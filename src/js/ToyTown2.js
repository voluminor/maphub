import * as LimeShared from "./shared/lime.js";
import * as OpenflShared from "./shared/openfl.js";
import * as HaxeShared from "./shared/haxe.js";
import * as OthersShared from "./shared/others.js";
import * as FuncProto from "./shared/proto.js";

import * as DataGeo from "./shared/data/geo.js";
import * as DataViewer from "./shared/data/Viewer.js";

import * as ParamsProto from "./struct/params.js";
import * as DataProto from "./struct/data.js";

const params = FuncProto.initParams(JSON.parse(String.raw`{{EMBED_PARAMETERS_JSON_VIEWER}}`));
let GetParamName = new URLSearchParams(window.location.search).get('name') || '';

if (params !== null) (function (S, u) {
    S.lime = S.lime || {};
    S.lime.$scripts = S.lime.$scripts || {};
    S.lime.$scripts.ToyTown2 = function (u, w) {
        (function (u, F) {
            var l = OthersShared.hxExtend;
            console.debug(params);

            function G(a) {
                return a instanceof Array ? new yf(a) : a.iterator()
            }

            function p(a, b) {
                if (null == b) return null;
                null == b.__id__ && (b.__id__ = F.$haxeUID++);
                var c;
                null == a.hx__closures__ ? a.hx__closures__ = {} : c = a.hx__closures__[b.__id__];
                null == c && (c = b.bind(a), a.hx__closures__[b.__id__] =
                    c);
                return c
            }

            u.lime = u.lime || {};
            var g = {},
                q = function () {
                    return T.__string_rec(this, "")
                },
                v = v || {},
                E, U = function () {
                };
            g["lime.app.IModule"] = U;
            U.__name__ = "lime.app.IModule";
            U.__isInterface__ = !0;
            U.prototype = {
                __class__: U
            };
            var ma = function () {
                this.onExit = new Ze
            };
            g["lime.app.Module"] = ma;
            ma.__name__ = "lime.app.Module";
            ma.__interfaces__ = [U];
            ma.prototype = {
                __registerLimeModule: function (a) {
                },
                __unregisterLimeModule: function (a) {
                },
                __class__: ma
            };
            var I = function (a) {
                this.gameDeviceCache = new Db;
                this.parent = a;
                this.nextUpdate = this.lastUpdate =
                    this.currentUpdate = 0;
                this.framePeriod = -1;
                fe.init();
                this.accelerometer = ge.registerSensor(Kl.ACCELEROMETER, 0)
            };
            g["lime._internal.backend.html5.HTML5Application"] = I;
            I.__name__ = "lime._internal.backend.html5.HTML5Application";
            I.prototype = {
                convertKeyCode: OthersShared.convertKeyCode,
                exec: function () {
                    window.addEventListener("keydown", p(this, this.handleKeyEvent), !1);
                    window.addEventListener("keyup", p(this, this.handleKeyEvent), !1);
                    window.addEventListener("focus",
                        p(this, this.handleWindowEvent), !1);
                    window.addEventListener("blur", p(this, this.handleWindowEvent), !1);
                    window.addEventListener("resize", p(this, this.handleWindowEvent), !1);
                    window.addEventListener("beforeunload", p(this, this.handleWindowEvent), !1);
                    Object.prototype.hasOwnProperty.call(window, "Accelerometer") && window.addEventListener("devicemotion", p(this, this.handleSensorEvent), !1);
                    CanvasRenderingContext2D.prototype.isPointInStroke || (CanvasRenderingContext2D.prototype.isPointInStroke = function (a, b, c) {
                        return !1
                    });
                    CanvasRenderingContext2D.prototype.isPointInPath || (CanvasRenderingContext2D.prototype.isPointInPath = function (a, b, c) {
                        return !1
                    });
                    0 == "performance" in window && (window.performance = {});
                    if (0 == "now" in window.performance) {
                        var a = Date.now();
                        performance.timing && performance.timing.navigationStart && (a = performance.timing.navigationStart);
                        window.performance.now = function () {
                            return Date.now() - a
                        }
                    }
                    for (var b = 0, c = ["ms", "moz", "webkit", "o"], d = 0; d < c.length && !window.requestAnimationFrame; ++d) window.requestAnimationFrame = window[c[d] +
                    "RequestAnimationFrame"], window.cancelAnimationFrame = window[c[d] + "CancelAnimationFrame"] || window[c[d] + "CancelRequestAnimationFrame"];
                    window.requestAnimationFrame || (window.requestAnimationFrame = function (a, c) {
                        var d = window.performance.now(),
                            e = Math.max(0, 16 - (d - b));
                        c = window.setTimeout(function () {
                            a(d + e)
                        }, e);
                        b = d + e;
                        return c
                    });
                    window.cancelAnimationFrame || (window.cancelAnimationFrame = OthersShared.cancelAnimationFrameClearTimeout);

                    window.requestAnimFrame = window.requestAnimationFrame;
                    this.lastUpdate = window.performance.now();
                    this.handleApplicationEvent();
                    return 0
                },
                exit: function () {
                },
                handleApplicationEvent: function (a) {
                    a = 0;
                    for (var b = this.parent.__windows; a < b.length;) {
                        var c = b[a];
                        ++a;
                        c.__backend.updateSize()
                    }
                    this.updateGameDevices();
                    this.currentUpdate = window.performance.now();
                    if (this.currentUpdate >= this.nextUpdate) {
                        this.deltaTime = this.currentUpdate - this.lastUpdate;
                        a = 0;
                        for (b = this.parent.__windows; a < b.length;) c = b[a], ++a, this.parent.onUpdate.dispatch(this.deltaTime | 0), null != c.context && c.onRender.dispatch(c.context);
                        this.nextUpdate =
                            0 > this.framePeriod ? this.currentUpdate : this.currentUpdate - this.currentUpdate % this.framePeriod + this.framePeriod;
                        this.lastUpdate = this.currentUpdate
                    }
                    window.requestAnimationFrame(p(this, this.handleApplicationEvent))
                },
                handleKeyEvent: function (a) {
                    if (null != this.parent.__window) {
                        var b = this.convertKeyCode(null != a.keyCode ? a.keyCode : a.which),
                            c = (a.shiftKey ? 3 : 0) | (a.ctrlKey ? 192 : 0) | (a.altKey ? 768 : 0) | (a.metaKey ? 3072 : 0);
                        "keydown" == a.type ? (this.parent.__window.onKeyDown.dispatch(b, c), this.parent.__window.onKeyDown.canceled &&
                        a.cancelable && a.preventDefault()) : (this.parent.__window.onKeyUp.dispatch(b, c), this.parent.__window.onKeyUp.canceled && a.cancelable && a.preventDefault())
                    }
                },
                handleSensorEvent: LimeShared.handleSensorEvent,
                handleWindowEvent: function (a) {
                    if (null != this.parent.__window) switch (a.type) {
                        case "blur":
                            this.hidden || (this.parent.__window.onFocusOut.dispatch(), this.parent.__window.onDeactivate.dispatch(),
                                this.hidden = !0);
                            break;
                        case "focus":
                            this.hidden && (this.parent.__window.onFocusIn.dispatch(), this.parent.__window.onActivate.dispatch(), this.hidden = !1);
                            break;
                        case "resize":
                            this.parent.__window.__backend.handleResizeEvent(a);
                            break;
                        case "visibilitychange":
                            window.document.hidden ? this.hidden || (this.parent.__window.onFocusOut.dispatch(), this.parent.__window.onDeactivate.dispatch(), this.hidden = !0) : this.hidden && (this.parent.__window.onFocusIn.dispatch(), this.parent.__window.onActivate.dispatch(), this.hidden = !1)
                    }
                },
                updateGameDevices: function () {
                    var a = Hb.__getDeviceData();
                    if (null != a)
                        for (var b, c, d, e, f, h = 0, r = a.length; h < r;)
                            if (b = h++, e = a[b], null != e) {
                                if (!this.gameDeviceCache.h.hasOwnProperty(b)) {
                                    f = new Oj;
                                    f.id = b;
                                    f.connected = e.connected;
                                    c = 0;
                                    for (d = e.buttons.length; c < d;) {
                                        var m = c++;
                                        f.buttons.push(e.buttons[m].value)
                                    }
                                    c = 0;
                                    for (d = e.axes.length; c < d;) m = c++, f.axes.push(e.axes[m]);
                                    "standard" == e.mapping && (f.isGamepad = !0);
                                    this.gameDeviceCache.h[b] = f;
                                    e.connected && (Hb.__connect(b), f.isGamepad && Mb.__connect(b))
                                }
                                f = this.gameDeviceCache.h[b];
                                d = Hb.devices.h[b];
                                c = Mb.devices.h[b];
                                if (e.connected) {
                                    for (var C = 0, wa = e.buttons.length; C < wa;) {
                                        var k = C++;
                                        m = e.buttons[k].value;
                                        if (m != f.buttons[k]) {
                                            if (6 == k) d.onAxisMove.dispatch(e.axes.length, m), null != c && c.onAxisMove.dispatch(4, m);
                                            else if (7 == k) d.onAxisMove.dispatch(e.axes.length + 1, m), null != c && c.onAxisMove.dispatch(5, m);
                                            else if (0 < m ? d.onButtonDown.dispatch(k) : d.onButtonUp.dispatch(k), null != c) {
                                                switch (k) {
                                                    case 0:
                                                        b = 0;
                                                        break;
                                                    case 1:
                                                        b = 1;
                                                        break;
                                                    case 2:
                                                        b = 2;
                                                        break;
                                                    case 3:
                                                        b = 3;
                                                        break;
                                                    case 4:
                                                        b = 9;
                                                        break;
                                                    case 5:
                                                        b = 10;
                                                        break;
                                                    case 8:
                                                        b = 4;
                                                        break;
                                                    case 9:
                                                        b = 6;
                                                        break;
                                                    case 10:
                                                        b = 7;
                                                        break;
                                                    case 11:
                                                        b = 8;
                                                        break;
                                                    case 12:
                                                        b = 11;
                                                        break;
                                                    case 13:
                                                        b = 12;
                                                        break;
                                                    case 14:
                                                        b = 13;
                                                        break;
                                                    case 15:
                                                        b = 14;
                                                        break;
                                                    case 16:
                                                        b = 5;
                                                        break;
                                                    default:
                                                        continue
                                                }
                                                0 < m ? c.onButtonDown.dispatch(b) : c.onButtonUp.dispatch(b)
                                            }
                                            f.buttons[k] = m
                                        }
                                    }
                                    b = 0;
                                    for (m = e.axes.length; b < m;) C = b++, e.axes[C] != f.axes[C] && (d.onAxisMove.dispatch(C, e.axes[C]), null != c && c.onAxisMove.dispatch(C, e.axes[C]), f.axes[C] = e.axes[C])
                                } else f.connected && (f.connected = !1, Hb.__disconnect(b), Mb.__disconnect(b))
                            }
                },
                __class__: I
            };
            var ca =
                function () {
                    this.onCreateWindow = new Pj;
                    this.onUpdate = new Ze;
                    this.onExit = new Ze;
                    null == ca.current && (ca.current = this);
                    this.meta = new Ha;
                    this.modules = [];
                    this.__windowByID = new Db;
                    this.__windows = [];
                    this.__backend = new I(this);
                    this.__registerLimeModule(this);
                    this.__preloader = new Qj;
                    this.__preloader.onProgress.add(p(this, this.onPreloadProgress));
                    this.__preloader.onComplete.add(p(this, this.onPreloadComplete))
                };
            g["lime.app.Application"] = ca;
            ca.__name__ = "lime.app.Application";
            ca.__super__ = ma;
            ca.prototype = l(ma.prototype, {
                addModule: LimeShared.addModule,
                exec: function () {
                    ca.current = this;
                    return this.__backend.exec()
                },
                onGamepadAxisMove: function (a, b, c) {
                },
                onGamepadButtonDown: function (a, b) {
                },
                onGamepadButtonUp: function (a, b) {
                },
                onGamepadConnect: function (a) {
                },
                onGamepadDisconnect: function (a) {
                },
                onJoystickAxisMove: function (a, b, c) {
                },
                onJoystickButtonDown: function (a, b) {
                },
                onJoystickButtonUp: function (a, b) {
                },
                onJoystickConnect: function (a) {
                },
                onJoystickDisconnect: function (a) {
                },
                onJoystickHatMove: function (a,
                                             b, c) {
                },
                onJoystickTrackballMove: function (a, b, c, d) {
                },
                onKeyDown: function (a, b) {
                },
                onKeyUp: function (a, b) {
                },
                onModuleExit: function (a) {
                },
                onMouseDown: function (a, b, c) {
                },
                onMouseMove: function (a, b) {
                },
                onMouseMoveRelative: function (a, b) {
                },
                onMouseUp: function (a, b, c) {
                },
                onMouseWheel: function (a, b, c) {
                },
                onPreloadComplete: function () {
                },
                onPreloadProgress: function (a, b) {
                },
                onRenderContextLost: function () {
                },
                onRenderContextRestored: function (a) {
                },
                onTextEdit: function (a, b, c) {
                },
                onTextInput: function (a) {
                },
                onTouchCancel: function (a) {
                },
                onTouchEnd: function (a) {
                },
                onTouchMove: function (a) {
                },
                onTouchStart: function (a) {
                },
                onWindowActivate: function () {
                },
                onWindowClose: function () {
                },
                onWindowCreate: function () {
                },
                onWindowDeactivate: function () {
                },
                onWindowDropFile: function (a) {
                },
                onWindowEnter: function () {
                },
                onWindowExpose: function () {
                },
                onWindowFocusIn: function () {
                },
                onWindowFocusOut: function () {
                },
                onWindowFullscreen: function () {
                },
                onWindowLeave: function () {
                },
                onWindowMove: function (a, b) {
                },
                onWindowMinimize: function () {
                },
                onWindowResize: function (a, b) {
                },
                onWindowRestore: function () {
                },
                removeModule: function (a) {
                    null !=
                    a && (a.__unregisterLimeModule(this), ja.remove(this.modules, a))
                },
                render: function (a) {
                },
                update: function (a) {
                },
                __registerLimeModule: function (a) {
                    a.onUpdate.add(p(this, this.update));
                    a.onExit.add(p(this, this.onModuleExit), !1, 0);
                    a.onExit.add(p(this, this.__onModuleExit), !1, -1E3);
                    for (a = Mb.devices.iterator(); a.hasNext();) {
                        var b = a.next();
                        this.__onGamepadConnect(b)
                    }
                    Mb.onConnect.add(p(this, this.__onGamepadConnect));
                    for (a = Hb.devices.iterator(); a.hasNext();) b = a.next(), this.__onJoystickConnect(b);
                    Hb.onConnect.add(p(this,
                        this.__onJoystickConnect));
                    Ab.onCancel.add(p(this, this.onTouchCancel));
                    Ab.onStart.add(p(this, this.onTouchStart));
                    Ab.onMove.add(p(this, this.onTouchMove));
                    Ab.onEnd.add(p(this, this.onTouchEnd))
                },
                __removeWindow: function (a) {
                    null != a && this.__windowByID.h.hasOwnProperty(a.id) && (this.__window == a && (this.__window = null), ja.remove(this.__windows, a), this.__windowByID.remove(a.id), a.close(), this.__checkForAllWindowsClosed())
                },
                __checkForAllWindowsClosed: function () {
                    0 == this.__windows.length && Yb.exit(0)
                },
                __onGamepadConnect: function (a) {
                    this.onGamepadConnect(a);
                    var b = this,
                        c = function (c, d) {
                            b.onGamepadAxisMove(a, c, d)
                        };
                    a.onAxisMove.add(c);
                    var d = this;
                    c = function (b) {
                        d.onGamepadButtonDown(a, b)
                    };
                    a.onButtonDown.add(c);
                    var e = this;
                    c = function (b) {
                        e.onGamepadButtonUp(a, b)
                    };
                    a.onButtonUp.add(c);
                    var f = this;
                    a.onDisconnect.add(function () {
                        f.onGamepadDisconnect(a)
                    })
                },
                __onJoystickConnect: function (a) {
                    this.onJoystickConnect(a);
                    var b = this,
                        c = function (c, d) {
                            b.onJoystickAxisMove(a, c, d)
                        };
                    a.onAxisMove.add(c);
                    var d = this;
                    c = function (b) {
                        d.onJoystickButtonDown(a, b)
                    };
                    a.onButtonDown.add(c);
                    var e =
                        this;
                    c = function (b) {
                        e.onJoystickButtonUp(a, b)
                    };
                    a.onButtonUp.add(c);
                    var f = this;
                    a.onDisconnect.add(function () {
                        f.onJoystickDisconnect(a)
                    });
                    var h = this;
                    c = function (b, c) {
                        h.onJoystickHatMove(a, b, c)
                    };
                    a.onHatMove.add(c);
                    var r = this;
                    c = function (b, c, d) {
                        r.onJoystickTrackballMove(a, b, c, d)
                    };
                    a.onTrackballMove.add(c)
                },
                __onModuleExit: function (a) {
                    this.onExit.canceled || (this.__unregisterLimeModule(this), this.__backend.exit(), ca.current == this && (ca.current = null))
                },
                __onWindowClose: LimeShared.__onWindowClose,
                __unregisterLimeModule: function (a) {
                    a.onUpdate.remove(p(this, this.update));
                    a.onExit.remove(p(this, this.__onModuleExit));
                    a.onExit.remove(p(this, this.onModuleExit));
                    Mb.onConnect.remove(p(this, this.__onGamepadConnect));
                    Hb.onConnect.remove(p(this, this.__onJoystickConnect));
                    Ab.onCancel.remove(p(this, this.onTouchCancel));
                    Ab.onStart.remove(p(this, this.onTouchStart));
                    Ab.onMove.remove(p(this, this.onTouchMove));
                    Ab.onEnd.remove(p(this, this.onTouchEnd))
                },
                __class__: ca
            });
            var w = function () {
            };
            g.ApplicationMain = w;
            w.__name__ = "ApplicationMain";
            w.main = function () {
                Yb.__registerEntryPoint("ToyTown2", w.create)
            };
            w.create = function (a) {
                var b = new og;
                A.init(a);
                b.meta.h.build = params.meta.build;
                b.meta.h.company = params.meta.name_company;
                b.meta.h.file = params.meta.name_file;
                b.meta.h.name = params.meta.name_app;
                b.meta.h.packageName = params.meta.name_package;
                b.meta.h.version = params.meta.ver_app;
                var c = {
                    allowHighDPI: params.meta.param.allow_high_dpi,
                    alwaysOnTop: params.meta.param.always_on_top,
                    borderless: params.meta.param.borderless,
                    element: null,
                    frameRate: params.meta.param.frame_rate,
                    height: params.meta.param.height,
                    hidden: params.meta.param.hidden,
                    maximized: params.meta.param.maximized,
                    minimized: params.meta.param.minimized,
                    parameters: {},
                    resizable: params.meta.param.resizable,
                    title: params.meta.name_app,
                    width: params.meta.param.width,
                    width: 0,
                    x: null,
                    y: null,
                    context: {
                        antialiasing: params.meta.context.antialiasing,
                        background: params.meta.context.background,
                        colorDepth: params.meta.context.color_depth,
                        depth: params.meta.context.depth,
                        hardware: params.meta.context.hardware,
                        stencil: params.meta.context.stencil,
                        type: null,
                        vsync: params.meta.context.vsync,
                    }
                };
                if (null == b.__window && null != a)
                    for (var d = 0, e = M.fields(a); d < e.length;) {
                        var f = e[d];
                        ++d;
                        Object.prototype.hasOwnProperty.call(c, f) ? c[f] = M.field(a, f) : Object.prototype.hasOwnProperty.call(c.context, f) && (c.context[f] = M.field(a, f))
                    }
                b.createWindow(c);
                var h = new kh(new pg);
                b.__preloader.onProgress.add(function (a, b) {
                    h.update(a, b)
                });
                b.__preloader.onComplete.add(function () {
                    h.start()
                });
                var r =
                    b.__window.stage;
                h.onComplete.add(function () {
                    w.start(r)
                });
                d = 0;
                for (e = A.preloadLibraries; d < e.length;) a = e[d], ++d, b.__preloader.addLibrary(a);
                d = 0;
                for (e = A.preloadLibraryNames; d < e.length;) a = e[d], ++d, b.__preloader.addLibraryName(a);
                b.__preloader.load();
                b.exec()
            };
            w.start = function (a) {
                if (a.__uncaughtErrorEvents.__enabled) try {
                    var b = a.getChildAt(0);
                    null != b && b instanceof oa || (b = new $e, a.addChild(b));
                    new tc(b);
                    a.dispatchEvent(new V("resize", !1, !1));
                    a.window.__fullscreen && a.dispatchEvent(new Be("fullScreen", !1,
                        !1, !0, !0))
                } catch (c) {
                    Ia.lastError = c, b = fa.caught(c).unwrap(), a.__handleError(b)
                } else b = a.getChildAt(0), null != b && b instanceof oa || (b = new $e, a.addChild(b)), new tc(b), a.dispatchEvent(new V("resize", !1, !1)), a.window.__fullscreen && a.dispatchEvent(new Be("fullScreen", !1, !1, !0, !0))
            };
            var H = function () {
            };
            g["openfl.events.IEventDispatcher"] = H;
            H.__name__ = "openfl.events.IEventDispatcher";
            H.__isInterface__ = !0;
            var O = function (a) {
                null != a && (this.__targetDispatcher = a)
            };
            g["openfl.events.EventDispatcher"] = O;
            O.__name__ =
                "openfl.events.EventDispatcher";
            O.__interfaces__ = [H];
            O.prototype = {
                addEventListener: function (a, b, c, d, e) {
                    null == e && (e = !1);
                    null == d && (d = 0);
                    null == c && (c = !1);
                    if (null != b)
                        if (null == this.__eventMap && (this.__eventMap = new Ha, this.__iterators = new Ha), Object.prototype.hasOwnProperty.call(this.__eventMap.h, a)) {
                            m = this.__eventMap.h[a];
                            for (var f = 0, h = m.length; f < h;) {
                                var r = f++;
                                if (m[r].match(b, c)) return
                            }
                            a = this.__iterators.h[a];
                            for (f = 0; f < a.length;) h = a[f], ++f, h.active && h.copy();
                            this.__addListenerByPriority(m, new af(b, c, d,
                                e))
                        } else {
                            var m = [];
                            m.push(new af(b, c, d, e));
                            h = new qg(m);
                            this.__eventMap.h[a] = m;
                            this.__iterators.h[a] = [h]
                        }
                },
                dispatchEvent: function (a) {
                    a.target = null != this.__targetDispatcher ? this.__targetDispatcher : this;
                    return this.__dispatchEvent(a)
                },
                hasEventListener: function (a) {
                    return null == this.__eventMap ? !1 : Object.prototype.hasOwnProperty.call(this.__eventMap.h, a)
                },
                removeEventListener: function (a, b, c) {
                    null == c && (c = !1);
                    if (null != this.__eventMap && null != b) {
                        var d = this.__eventMap.h[a];
                        if (null != d) {
                            for (var e = this.__iterators.h[a],
                                     f = 0, h = d.length; f < h;) {
                                var r = f++;
                                if (d[r].match(b, c)) {
                                    for (b = 0; b < e.length;) c = e[b], ++b, c.remove(d[r], r);
                                    d.splice(r, 1);
                                    break
                                }
                            }
                            0 == d.length && (d = this.__eventMap, e = a, Object.prototype.hasOwnProperty.call(d.h, e) && delete d.h[e], d = this.__iterators, e = a, Object.prototype.hasOwnProperty.call(d.h, e) && delete d.h[e]);
                            0 >= Object.keys(this.__eventMap.h).length && (this.__iterators = this.__eventMap = null)
                        }
                    }
                },
                toString: function () {
                    return "[object " + T.getClass(this).__name__.split(".").pop() + "]"
                },
                __dispatchEvent: function (a) {
                    if (null ==
                        this.__eventMap || null == a) return !0;
                    var b = a.type,
                        c = this.__eventMap.h[b];
                    if (null == c) return !0;
                    null == a.target && (a.target = null != this.__targetDispatcher ? this.__targetDispatcher : this);
                    a.currentTarget = this;
                    var d = 1 == a.eventPhase;
                    b = this.__iterators.h[b];
                    var e = b[0];
                    e.active && (e = new qg(c), b.push(e));
                    e.start();
                    for (var f = e; f.hasNext();) {
                        var h = f.next();
                        if (null != h && h.useCapture == d) {
                            if (h.useWeakReference && null != h.weakRefCallback) {
                                var r = h.weakRefCallback.deref();
                                null == r ? (r = e.index - 1, c.splice(r, 1), e.remove(h, r)) : r(a)
                            } else h.callback(a);
                            if (a.__isCanceledNow) break
                        }
                    }
                    e.stop();
                    e != b[0] ? ja.remove(b, e) : e.reset(c);
                    return !a.isDefaultPrevented()
                },
                __addListenerByPriority: function (a, b) {
                    for (var c = a.length, d = c, e = 0; e < c;) {
                        var f = e++;
                        if (a[f].priority < b.priority) {
                            d = f;
                            break
                        }
                    }
                    a.splice(d, 0, b)
                },
                __class__: O
            };
            var S = function () {
            };
            g["openfl.display.IBitmapDrawable"] = S;
            S.__name__ = "openfl.display.IBitmapDrawable";
            S.__isInterface__ = !0;
            S.prototype = {
                __class__: S
            };
            var D = {
                    toBoolVector: function (a, b, c, d) {
                        return new rg(b, c, d)
                    },
                    toIntVector: function (a, b, c, d) {
                        return new bf(b,
                            c, d)
                    },
                    toFloatVector: function (a, b, c, d) {
                        return new xd(b, c, d, !0)
                    },
                    toObjectVector: function (a, b, c, d) {
                        return new Pd(b, c, d, !0)
                    },
                    toNullVector: function (a, b, c, d) {
                        return new Pd(b, c, d, !0)
                    }
                },
                xa = function (a, b, c) {
                    this.__pool = new N;
                    this.inactiveObjects = this.activeObjects = 0;
                    this.__inactiveObject1 = this.__inactiveObject0 = null;
                    this.__inactiveObjectList = new Da;
                    null != a && (this.create = a);
                    null != b && (this.clean = b);
                    null != c && this.set_size(c)
                };
            g["lime.utils.ObjectPool"] = xa;
            xa.__name__ = "lime.utils.ObjectPool";
            xa.prototype = {
                clean: function (a) {
                },
                create: function () {
                    return null
                },
                get: function () {
                    var a = null;
                    if (0 < this.inactiveObjects) null != this.__inactiveObject0 ? (a = this.__inactiveObject0, this.__inactiveObject0 = null) : null != this.__inactiveObject1 ? (a = this.__inactiveObject1, this.__inactiveObject1 = null) : (a = this.__inactiveObjectList.pop(), 0 < this.__inactiveObjectList.length && (this.__inactiveObject0 = this.__inactiveObjectList.pop()), 0 < this.__inactiveObjectList.length && (this.__inactiveObject1 = this.__inactiveObjectList.pop())), this.inactiveObjects--, this.activeObjects++;
                    else if (null == this.__size || this.activeObjects < this.__size) a = this.create(), null != a && (this.__pool.set(a, !0), this.activeObjects++);
                    return a
                },
                release: function (a) {
                    this.activeObjects--;
                    null == this.__size || this.activeObjects + this.inactiveObjects < this.__size ? (this.clean(a), null == this.__inactiveObject0 ? this.__inactiveObject0 = a : null == this.__inactiveObject1 ? this.__inactiveObject1 = a : this.__inactiveObjectList.add(a), this.inactiveObjects++) : this.__pool.remove(a)
                },
                __removeInactive: function (a) {
                    if (!(0 >= a || 0 == this.inactiveObjects) &&
                        (null != this.__inactiveObject0 && (this.__pool.remove(this.__inactiveObject0), this.__inactiveObject0 = null, this.inactiveObjects--, --a), 0 != a && 0 != this.inactiveObjects && (null != this.__inactiveObject1 && (this.__pool.remove(this.__inactiveObject1), this.__inactiveObject1 = null, this.inactiveObjects--, --a), 0 != a && 0 != this.inactiveObjects)))
                        for (var b = this.__inactiveObjectList.h; null != b;) {
                            var c = b.item;
                            b = b.next;
                            this.__pool.remove(c);
                            this.__inactiveObjectList.remove(c);
                            this.inactiveObjects--;
                            --a;
                            if (0 == a || 0 == this.inactiveObjects) break
                        }
                },
                set_size: function (a) {
                    if (null == a) this.__size = null;
                    else {
                        var b = this.inactiveObjects + this.activeObjects;
                        this.__size = a;
                        if (b > a) this.__removeInactive(b - a);
                        else if (a > b)
                            for (var c = 0, d = a - b; c < d;)
                                if (c++, b = this.create(), null != b) this.__pool.set(b, !1), this.__inactiveObjectList.add(b), this.inactiveObjects++;
                                else break
                    }
                    return a
                },
                __class__: xa,
                __properties__: {
                    set_size: "set_size"
                }
            };
            var hb = function () {
            };
            g["haxe.IMap"] = hb;
            hb.__name__ = "haxe.IMap";
            hb.__isInterface__ = !0;
            hb.prototype = {
                __class__: hb
            };
            var N = function () {
                this.h = {
                    __keys__: {}
                }
            };
            g["haxe.ds.ObjectMap"] = N;
            N.__name__ = "haxe.ds.ObjectMap";
            N.__interfaces__ = [hb];
            N.prototype = {
                set: function (a, b) {
                    var c = a.__id__;
                    null == c && (c = a.__id__ = F.$haxeUID++);
                    this.h[c] = b;
                    this.h.__keys__[c] = a
                },
                remove: function (a) {
                    a = a.__id__;
                    if (null == this.h.__keys__[a]) return !1;
                    delete this.h[a];
                    delete this.h.__keys__[a];
                    return !0
                },
                keys: function () {
                    var a = [],
                        b;
                    for (b in this.h.__keys__) this.h.hasOwnProperty(b) && a.push(this.h.__keys__[b]);
                    return new yf(a)
                },
                iterator: function () {
                    return {
                        ref: this.h,
                        it: this.keys(),
                        hasNext: function () {
                            return this.it.hasNext()
                        },
                        next: HaxeShared.objectMapIteratorNext

                    }
                },
                __class__: N
            };
            var Da = function () {
                this.length = 0
            };
            g["haxe.ds.List"] = Da;
            Da.__name__ = "haxe.ds.List";
            Da.prototype = {
                add: function (a) {
                    a = new lh(a, null);
                    null == this.h ? this.h = a : this.q.next = a;
                    this.q = a;
                    this.length++
                },
                push: function (a) {
                    this.h = a = new lh(a, this.h);
                    null == this.q && (this.q = a);
                    this.length++
                },
                pop: function () {
                    if (null == this.h) return null;
                    var a = this.h.item;
                    this.h = this.h.next;
                    null == this.h && (this.q = null);
                    this.length--;
                    return a
                },
                clear: function () {
                    this.q =
                        this.h = null;
                    this.length = 0
                },
                remove: function (a) {
                    for (var b = null, c = this.h; null != c;) {
                        if (c.item == a) return null == b ? this.h = c.next : b.next = c.next, this.q == c && (this.q = b), this.length--, !0;
                        b = c;
                        c = c.next
                    }
                    return !1
                },
                iterator: function () {
                    return new Rj(this.h)
                },
                __class__: Da
            };
            var da = function () {
                O.call(this);
                this.__alpha = this.__drawableType = 1;
                this.__blendMode = 10;
                this.__cacheAsBitmap = !1;
                this.__transform = new la;
                this.__visible = !0;
                this.__rotationSine = this.__rotation = 0;
                this.__worldAlpha = this.__scaleY = this.__scaleX = this.__rotationCosine =
                    1;
                this.__worldBlendMode = 10;
                this.__worldTransform = new la;
                this.__worldColorTransform = new ib;
                this.__renderTransform = new la;
                this.__worldVisible = !0;
                this.set_name("instance" + ++da.__instanceCount);
                null != da.__initStage && (this.stage = da.__initStage, da.__initStage = null, this.stage.addChild(this))
            };
            g["openfl.display.DisplayObject"] = da;
            da.__name__ = "openfl.display.DisplayObject";
            da.__interfaces__ = [S];
            da.__super__ = O;
            da.prototype = l(O.prototype, {
                addEventListener: function (a, b, c, d, e) {
                    null == e && (e = !1);
                    null == d && (d = 0);
                    null == c && (c = !1);
                    switch (a) {
                        case "activate":
                        case "deactivate":
                        case "enterFrame":
                        case "exitFrame":
                        case "frameConstructed":
                        case "render":
                            Object.prototype.hasOwnProperty.call(da.__broadcastEvents.h, a) || (da.__broadcastEvents.h[a] = []);
                            var f = da.__broadcastEvents.h[a];
                            -
                                1 == f.indexOf(this) && f.push(this);
                            break;
                        case "clearDOM":
                        case "renderCairo":
                        case "renderCanvas":
                        case "renderDOM":
                        case "renderOpenGL":
                            null == this.__customRenderEvent && (this.__customRenderEvent = new mh(null), this.__customRenderEvent.objectColorTransform =
                                new ib, this.__customRenderEvent.objectMatrix = new la, this.__customRenderClear = !0)
                    }
                    O.prototype.addEventListener.call(this, a, b, c, d, e)
                },
                dispatchEvent: function (a) {
                    if (a instanceof $a) {
                        var b = this.__getRenderTransform();
                        a.stageX = a.localX * b.a + a.localY * b.c + b.tx;
                        b = this.__getRenderTransform();
                        a.stageY = a.localX * b.b + a.localY * b.d + b.ty
                    } else a instanceof $c && (b = this.__getRenderTransform(), a.stageX = a.localX * b.a + a.localY * b.c + b.tx, b = this.__getRenderTransform(), a.stageY = a.localX * b.b + a.localY * b.d + b.ty);
                    a.target = this;
                    return this.__dispatchWithCapture(a)
                },
                getBounds: function (a) {
                    var b = la.__pool.get();
                    if (null != a && a != this) {
                        b.copyFrom(this.__getWorldTransform());
                        var c = la.__pool.get();
                        c.copyFrom(a.__getWorldTransform());
                        c.invert();
                        b.concat(c);
                        la.__pool.release(c)
                    } else b.identity();
                    a = new ha;
                    this.__getBounds(a, b);
                    la.__pool.release(b);
                    return a
                },
                globalToLocal: function (a) {
                    return this.__globalToLocal(a, new ba)
                },
                hitTestPoint: function (a, b, c) {
                    null == c && (c = !1);
                    return null != this.stage ? this.__hitTest(a, b, c, null, !1, this) : !1
                },
                localToGlobal: OpenflShared.localToGlobal,
                removeEventListener: function (a, b, c) {
                    null == c && (c = !1);
                    O.prototype.removeEventListener.call(this, a, b, c);
                    switch (a) {
                        case "activate":
                        case "deactivate":
                        case "enterFrame":
                        case "exitFrame":
                        case "frameConstructed":
                        case "render":
                            this.hasEventListener(a) || Object.prototype.hasOwnProperty.call(da.__broadcastEvents.h, a) && ja.remove(da.__broadcastEvents.h[a], this);
                            break;
                        case "clearDOM":
                        case "renderCairo":
                        case "renderCanvas":
                        case "renderDOM":
                        case "renderOpenGL":
                            this.hasEventListener("clearDOM") || this.hasEventListener("renderCairo") ||
                            this.hasEventListener("renderCanvas") || this.hasEventListener("renderDOM") || this.hasEventListener("renderOpenGL") || (this.__customRenderEvent = null)
                    }
                },
                __cleanup: function () {
                    this.__context = this.__canvas = this.__cairo = null;
                    null != this.__graphics && this.__graphics.__cleanup();
                    null != this.__cacheBitmap && (this.__cacheBitmap.__cleanup(), this.__cacheBitmap = null);
                    null != this.__cacheBitmapData && (this.__cacheBitmapData.dispose(), this.__cacheBitmapData = null)
                },
                __dispatch: function (a) {
                    if (null != this.__eventMap && this.hasEventListener(a.type)) {
                        var b =
                            O.prototype.__dispatchEvent.call(this, a);
                        return a.__isCanceled ? !0 : b
                    }
                    return !0
                },
                __dispatchChildren: function (a) {
                },
                __dispatchEvent: function (a) {
                    var b = a.bubbles ? this.parent : null,
                        c = O.prototype.__dispatchEvent.call(this, a);
                    if (a.__isCanceled) return !0;
                    null != b && b != this && (a.eventPhase = 3, null == a.target && (a.target = this), b.__dispatchEvent(a));
                    return c
                },
                __dispatchWithCapture: function (a) {
                    null == a.target && (a.target = this);
                    if (null != this.parent)
                        if (a.eventPhase = 1, this.parent == this.stage) this.parent.__dispatch(a);
                        else {
                            for (var b =
                                da.__tempStack.get(), c = this.parent, d = 0; null != c;) b.set(d, c), c = c.parent, ++d;
                            c = 0;
                            for (var e = d; c < e;) {
                                var f = c++;
                                b.get(d - f - 1).__dispatch(a)
                            }
                            da.__tempStack.release(b)
                        }
                    a.eventPhase = 2;
                    return this.__dispatchEvent(a)
                },
                __enterFrame: function (a) {
                },
                __getBounds: function (a, b) {
                    null != this.__graphics && this.__graphics.__getBounds(a, b)
                },
                __getCursor: function () {
                    return null
                },
                __getFilterBounds: function (a, b) {
                    this.__getRenderBounds(a, b);
                    if (null != this.__filters) {
                        b = ha.__pool.get();
                        for (var c = 0, d = this.__filters; c < d.length;) {
                            var e =
                                d[c];
                            ++c;
                            b.__expand(-e.__leftExtension, -e.__topExtension, e.__leftExtension + e.__rightExtension, e.__topExtension + e.__bottomExtension)
                        }
                        a.width += b.width;
                        a.height += b.height;
                        a.x += b.x;
                        a.y += b.y;
                        ha.__pool.release(b)
                    }
                },
                __getInteractive: function (a) {
                    return !1
                },
                __getLocalBounds: OpenflShared.__getLocalBounds,
                __getRenderBounds: function (a, b) {
                    if (null == this.__scrollRect) this.__getBounds(a, b);
                    else {
                        var c = ha.__pool.get();
                        c.copyFrom(this.__scrollRect);
                        c.__transform(c, b);
                        a.__expand(c.x, c.y, c.width, c.height);
                        ha.__pool.release(c)
                    }
                },
                __getRenderTransform: OpenflShared.__getRenderTransform,
                __getWorldTransform: function () {
                    if (this.__transformDirty || this.__worldTransformInvalid) {
                        var a = [],
                            b = this;
                        if (null == this.parent) this.__update(!0, !1);
                        else
                            for (; b != this.stage && (a.push(b), b = b.parent, null != b);) ;
                        for (var c = a.length; 0 <= --c;) b = a[c], b.__update(!0, !1)
                    }
                    return this.__worldTransform
                },
                __globalToLocal: function (a, b) {
                    this.__getRenderTransform();
                    if (a == b) {
                        var c = this.__renderTransform,
                            d = c.a * c.d - c.b * c.c;
                        if (0 == d) a.x = -c.tx, a.y = -c.ty;
                        else {
                            var e = 1 / d * (c.c * (c.ty - a.y) + c.d * (a.x - c.tx));
                            a.y = 1 / d * (c.a * (a.y - c.ty) + c.b * (c.tx - a.x));
                            a.x = e
                        }
                    } else c = this.__renderTransform, d = c.a * c.d - c.b * c.c, b.x = 0 == d ? -c.tx : 1 / d * (c.c * (c.ty - a.y) + c.d * (a.x - c.tx)), c = this.__renderTransform, d = c.a * c.d - c.b * c.c, b.y = 0 == d ? -c.ty : 1 / d * (c.a * (a.y - c.ty) + c.b * (c.tx - a.x));
                    return b
                },
                __hitTest: function (a, b, c, d, e, f) {
                    if (null != this.__graphics) {
                        if (!f.__visible || this.__isMask || null != this.get_mask() && !this.get_mask().__hitTestMask(a,
                            b)) return !1;
                        if (this.__graphics.__hitTest(a, b, c, this.__getRenderTransform())) return null == d || e || d.push(f), !0
                    }
                    return !1
                },
                __hitTestMask: function (a, b) {
                    return null != this.__graphics && this.__graphics.__hitTest(a, b, !0, this.__getRenderTransform()) ? !0 : !1
                },
                __setParentRenderDirty: function () {
                    var a = null != this.__renderParent ? this.__renderParent : this.parent;
                    null == a || a.__renderDirty || (a.__renderDirty = !0, a.__setParentRenderDirty())
                },
                __setStageReference: OpenflShared.__setStageReference,
                __setTransformDirty: function () {
                    this.__transformDirty ||
                    (this.__transformDirty = !0, this.__setWorldTransformInvalid(), this.__setParentRenderDirty())
                },
                __setWorldTransformInvalid: OpenflShared.__setWorldTransformInvalid,
                __update: function (a, b) {
                    var c = null != this.__renderParent ? this.__renderParent : this.parent;
                    this.__isMask && null == c && (c = this.__maskTarget);
                    this.__renderable = this.__visible && 0 != this.__scaleX && 0 != this.__scaleY && !this.__isMask && (null == c || !c.__isMask);
                    this.__updateTransforms();
                    this.__worldTransformInvalid = this.__transformDirty = !1;
                    if (!a)
                        if (da.__supportDOM &&
                        (this.__renderTransformChanged = !this.__renderTransform.equals(this.__renderTransformCache), null == this.__renderTransformCache ? this.__renderTransformCache = this.__renderTransform.clone() : this.__renderTransformCache.copyFrom(this.__renderTransform)), null != c) {
                            if (da.__supportDOM) {
                                var d = c.__worldVisible && this.__visible;
                                this.__worldVisibleChanged = this.__worldVisible != d;
                                this.__worldVisible = d;
                                d = this.get_alpha() * c.__worldAlpha;
                                this.__worldAlphaChanged = this.__worldAlpha != d;
                                this.__worldAlpha = d
                            } else this.__worldAlpha =
                                this.get_alpha() * c.__worldAlpha;
                            null != this.__objectTransform ? (this.__worldColorTransform.__copyFrom(this.__objectTransform.__colorTransform), this.__worldColorTransform.__combine(c.__worldColorTransform)) : this.__worldColorTransform.__copyFrom(c.__worldColorTransform);
                            this.__worldBlendMode = null == this.__blendMode || 10 == this.__blendMode ? c.__worldBlendMode : this.__blendMode;
                            this.__worldShader = null == this.__shader ? c.__shader : this.__shader;
                            this.__worldScale9Grid = null == this.__scale9Grid ? c.__scale9Grid : this.__scale9Grid
                        } else this.__worldAlpha =
                            this.get_alpha(), da.__supportDOM && (this.__worldVisibleChanged = this.__worldVisible != this.__visible, this.__worldVisible = this.__visible, this.__worldAlphaChanged = this.__worldAlpha != this.get_alpha()), null != this.__objectTransform ? this.__worldColorTransform.__copyFrom(this.__objectTransform.__colorTransform) : this.__worldColorTransform.__identity(), this.__worldBlendMode = this.__blendMode, this.__worldShader = this.__shader, this.__worldScale9Grid = this.__scale9Grid;
                    b && null != this.get_mask() && this.get_mask().__update(a,
                        !0)
                },
                __updateTransforms: function (a) {
                    var b = null != a;
                    a = b ? a : this.__transform;
                    null == this.__worldTransform && (this.__worldTransform = new la);
                    null == this.__renderTransform && (this.__renderTransform = new la);
                    var c = null != this.__renderParent ? this.__renderParent : this.parent;
                    if (b || null == this.parent) this.__worldTransform.copyFrom(a);
                    else {
                        var d = this.parent.__worldTransform,
                            e = this.__worldTransform;
                        e.a = a.a * d.a + a.b * d.c;
                        e.b = a.a * d.b + a.b * d.d;
                        e.c = a.c * d.a + a.d * d.c;
                        e.d = a.c * d.b + a.d * d.d;
                        e.tx = a.tx * d.a + a.ty * d.c + d.tx;
                        e.ty = a.tx * d.b +
                            a.ty * d.d + d.ty
                    }
                    b || null == c ? this.__renderTransform.copyFrom(a) : (d = c.__renderTransform, e = this.__renderTransform, e.a = a.a * d.a + a.b * d.c, e.b = a.a * d.b + a.b * d.d, e.c = a.c * d.a + a.d * d.c, e.d = a.c * d.b + a.d * d.d, e.tx = a.tx * d.a + a.ty * d.c + d.tx, e.ty = a.tx * d.b + a.ty * d.d + d.ty);
                    null != this.__scrollRect && (b = this.__renderTransform, a = -this.__scrollRect.x, c = -this.__scrollRect.y, b.tx = a * b.a + c * b.c + b.tx, b.ty = a * b.b + c * b.d + b.ty)
                },
                get_alpha: function () {
                    return this.__alpha
                },
                set_alpha: function (a) {
                    1 < a && (a = 1);
                    0 > a && (a = 0);
                    a == this.__alpha || this.get_cacheAsBitmap() ||
                    this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty());
                    return this.__alpha = a
                },
                get_cacheAsBitmap: function () {
                    return null == this.__filters ? this.__cacheAsBitmap : !0
                },
                get_height: function () {
                    var a = ha.__pool.get();
                    this.__getLocalBounds(a);
                    var b = a.height;
                    ha.__pool.release(a);
                    return b
                },
                set_height: function (a) {
                    var b = ha.__pool.get(),
                        c = la.__pool.get();
                    c.identity();
                    this.__getBounds(b, c);
                    a != b.height ? this.set_scaleY(a / b.height) : this.set_scaleY(1);
                    ha.__pool.release(b);
                    la.__pool.release(c);
                    return a
                },
                get_loaderInfo: function () {
                    return null != this.stage ? gc.current.__loaderInfo : null
                },
                get_mask: OpenflShared.get_mask,
                set_mask: function (a) {
                    if (a == this.__mask) return a;
                    a != this.__mask && (this.__setTransformDirty(), this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    if (null != this.__mask) {
                        this.__mask.__isMask = !1;
                        this.__mask.__maskTarget = null;
                        this.__mask.__setTransformDirty();
                        var b = this.__mask;
                        b.__renderDirty || (b.__renderDirty = !0, b.__setParentRenderDirty())
                    }
                    null != a && (a.__isMask = !0, a.__maskTarget = this, a.__setWorldTransformInvalid());
                    null != this.__cacheBitmap && this.__cacheBitmap.get_mask() != a && this.__cacheBitmap.set_mask(a);
                    return this.__mask = a
                },
                get_mouseX: function () {
                    var a = null != this.stage ? this.stage.__mouseX : gc.current.stage.__mouseX,
                        b = null != this.stage ? this.stage.__mouseY : gc.current.stage.__mouseY,
                        c = this.__getRenderTransform(),
                        d = c.a * c.d - c.b * c.c;
                    return 0 == d ? -c.tx : 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx))
                },
                get_mouseY: function () {
                    var a = null != this.stage ? this.stage.__mouseX : gc.current.stage.__mouseX,
                        b = null != this.stage ? this.stage.__mouseY : gc.current.stage.__mouseY,
                        c = this.__getRenderTransform(),
                        d = c.a * c.d - c.b * c.c;
                    return 0 == d ? -c.ty : 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a))
                },
                get_name: OpenflShared.get_name,
                set_name: OpenflShared.set_name,
                get_root: function () {
                    return null != this.stage ? gc.current : null
                },
                get_rotation: OpenflShared.get_rotation,
                set_rotation: function (a) {
                    if (a != this.__rotation) {
                        this.__rotation = a;
                        var b = Math.PI / 180 * this.__rotation;
                        this.__rotationSine = Math.sin(b);
                        this.__rotationCosine =
                            Math.cos(b);
                        this.__transform.a = this.__rotationCosine * this.__scaleX;
                        this.__transform.b = this.__rotationSine * this.__scaleX;
                        this.__transform.c = -this.__rotationSine * this.__scaleY;
                        this.__transform.d = this.__rotationCosine * this.__scaleY;
                        this.__setTransformDirty()
                    }
                    return a
                },
                get_scaleX: OpenflShared.get_scaleX,
                set_scaleX: function (a) {
                    if (a != this.__scaleX)
                        if (this.__scaleX = a, 0 == this.__transform.b) a != this.__transform.a && this.__setTransformDirty(), this.__transform.a = a;
                        else {
                            var b = this.__rotationCosine * a,
                                c =
                                    this.__rotationSine * a;
                            this.__transform.a == b && this.__transform.b == c || this.__setTransformDirty();
                            this.__transform.a = b;
                            this.__transform.b = c
                        }
                    return a
                },
                get_scaleY: OpenflShared.get_scaleY,
                set_scaleY: function (a) {
                    if (a != this.__scaleY)
                        if (this.__scaleY = a, 0 == this.__transform.c) a != this.__transform.d && this.__setTransformDirty(), this.__transform.d = a;
                        else {
                            var b = -this.__rotationSine * a,
                                c = this.__rotationCosine * a;
                            this.__transform.d == c && this.__transform.c == b || this.__setTransformDirty();
                            this.__transform.c = b;
                            this.__transform.d =
                                c
                        }
                    return a
                },
                get_scrollRect: function () {
                    return null == this.__scrollRect ? null : this.__scrollRect.clone()
                },
                get_transform: function () {
                    null == this.__objectTransform && (this.__objectTransform = new nh(this));
                    return this.__objectTransform
                },
                set_transform: function (a) {
                    if (null == a) throw new sg("Parameter transform must be non-null.");
                    null == this.__objectTransform && (this.__objectTransform = new nh(this));
                    this.__setTransformDirty();
                    this.__objectTransform.set_matrix(a.get_matrix());
                    if (!this.__objectTransform.__colorTransform.__equals(a.__colorTransform,
                        !0) || !this.get_cacheAsBitmap() && this.__objectTransform.__colorTransform.alphaMultiplier != a.__colorTransform.alphaMultiplier) this.__objectTransform.__colorTransform.__copyFrom(a.get_colorTransform()), this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty());
                    return this.__objectTransform
                },
                get_visible: function () {
                    return this.__visible
                },
                set_visible: OpenflShared.set_visible,
                get_width: function () {
                    var a =
                        ha.__pool.get();
                    this.__getLocalBounds(a);
                    var b = a.width;
                    ha.__pool.release(a);
                    return b
                },
                set_width: function (a) {
                    var b = ha.__pool.get(),
                        c = la.__pool.get();
                    c.identity();
                    this.__getBounds(b, c);
                    a != b.width ? this.set_scaleX(a / b.width) : this.set_scaleX(1);
                    ha.__pool.release(b);
                    la.__pool.release(c);
                    return a
                },
                get_x: OpenflShared.get_x,
                set_x: function (a) {
                    a != this.__transform.tx && this.__setTransformDirty();
                    return this.__transform.tx = a
                },
                get_y: OpenflShared.get_y,
                set_y: function (a) {
                    a !=
                    this.__transform.ty && this.__setTransformDirty();
                    return this.__transform.ty = a
                },
                __class__: da,
                __properties__: {
                    set_y: "set_y",
                    get_y: "get_y",
                    set_x: "set_x",
                    get_x: "get_x",
                    set_width: "set_width",
                    get_width: "get_width",
                    set_visible: "set_visible",
                    get_visible: "get_visible",
                    set_transform: "set_transform",
                    get_transform: "get_transform",
                    get_scrollRect: "get_scrollRect",
                    set_scaleY: "set_scaleY",
                    get_scaleY: "get_scaleY",
                    set_scaleX: "set_scaleX",
                    get_scaleX: "get_scaleX",
                    set_rotation: "set_rotation",
                    get_rotation: "get_rotation",
                    get_root: "get_root",
                    set_name: "set_name",
                    get_name: "get_name",
                    get_mouseY: "get_mouseY",
                    get_mouseX: "get_mouseX",
                    set_mask: "set_mask",
                    get_mask: "get_mask",
                    get_loaderInfo: "get_loaderInfo",
                    set_height: "set_height",
                    get_height: "get_height",
                    get_cacheAsBitmap: "get_cacheAsBitmap",
                    set_alpha: "set_alpha",
                    get_alpha: "get_alpha"
                }
            });
            var X = function () {
                da.call(this);
                this.doubleClickEnabled = !1;
                this.mouseEnabled = !0;
                this.needsSoftKeyboard = !1;
                this.__tabEnabled = null;
                this.__tabIndex = -1
            };
            g["openfl.display.InteractiveObject"] = X;
            X.__name__ = "openfl.display.InteractiveObject";
            X.__super__ = da;
            X.prototype = l(da.prototype, {
                __allowMouseFocus: OpenflShared.__allowMouseFocus,
                __getInteractive: function (a) {
                    null != a && (a.push(this), null != this.parent && this.parent.__getInteractive(a));
                    return !0
                },
                __hitTest: function (a, b, c, d, e, f) {
                    return !f.get_visible() || this.__isMask || e && !this.mouseEnabled ? !1 : da.prototype.__hitTest.call(this, a, b, c, d, e, f)
                },
                __tabTest: OpenflShared.__tabTest,
                get_tabEnabled: OpenflShared.get_tabEnabled,
                get_tabIndex: OpenflShared.get_tabIndex,
                __class__: X,
                __properties__: l(da.prototype.__properties__, {
                    get_tabIndex: "get_tabIndex",
                    get_tabEnabled: "get_tabEnabled"
                })
            });
            var oa = function () {
                X.call(this);
                this.__tabChildren = this.mouseChildren = !0;
                this.__children = [];
                this.__removedChildren = D.toObjectVector(null)
            };
            g["openfl.display.DisplayObjectContainer"] = oa;
            oa.__name__ = "openfl.display.DisplayObjectContainer";
            oa.__super__ = X;
            oa.prototype = l(X.prototype, {
                addChild: OpenflShared.addChild,
                addChildAt: function (a, b) {
                    if (null == a) throw a = new sg("Error #2007: Parameter child must be non-null."), a.errorID = 2007, a;
                    if (a.stage == a) throw a = new zf("Error #3783: A Stage object cannot be added as the child of another object."), a.errorID = 3783, a;
                    if (b > this.__children.length || 0 > b) throw fa.thrown("Invalid index position " + b);
                    if (a.parent == this) this.__children[b] != a && (ja.remove(this.__children, a), this.__children.splice(b, 0, a), this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    else {
                        null != a.parent && a.parent.removeChild(a);
                        this.__children.splice(b, 0, a);
                        a.parent = this;
                        (b = null != this.stage && null == a.stage) && a.__setStageReference(this.stage);
                        a.__setTransformDirty();
                        a.__renderDirty || (a.__renderDirty = !0, a.__setParentRenderDirty());
                        this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty());
                        var c = new V("added");
                        c.bubbles = !0;
                        c.target = a;
                        a.__dispatchWithCapture(c);
                        b && (c = new V("addedToStage", !1, !1), a.__dispatchWithCapture(c), a.__dispatchChildren(c))
                    }
                    return a
                },
                getChildAt: function (a) {
                    return 0 <=
                    a && a < this.__children.length ? this.__children[a] : null
                },
                getChildByName: function (a) {
                    for (var b = 0, c = this.__children; b < c.length;) {
                        var d = c[b];
                        ++b;
                        if (d.get_name() == a) return d
                    }
                    return null
                },
                getChildIndex: OpenflShared.getChildIndex,
                removeChild: function (a) {
                    if (null != a && a.parent == this) {
                        a.__setTransformDirty();
                        a.__renderDirty || (a.__renderDirty = !0, a.__setParentRenderDirty());
                        this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty());
                        var b = new V("removed", !0);
                        a.__dispatchWithCapture(b);
                        null != this.stage && (null != a.stage && this.stage.get_focus() == a && this.stage.set_focus(null), b = new V("removedFromStage", !1, !1), a.__dispatchWithCapture(b), a.__dispatchChildren(b), a.__setStageReference(null));
                        a.parent = null;
                        ja.remove(this.__children, a);
                        this.__removedChildren.push(a);
                        a.__setTransformDirty()
                    }
                    return a
                },
                removeChildAt: function (a) {
                    return 0 <= a && a < this.__children.length ? this.removeChild(this.__children[a]) : null
                },
                removeChildren: function (a, b) {
                    null ==
                    b && (b = 2147483647);
                    null == a && (a = 0);
                    if (2147483647 == b && (b = this.__children.length - 1, 0 > b)) return;
                    if (!(a > this.__children.length - 1)) {
                        if (b < a || 0 > a || b > this.__children.length) throw new tg("The supplied index is out of bounds.");
                        for (b -= a; 0 <= b;) this.removeChildAt(a), --b
                    }
                },
                __cleanup: function () {
                    X.prototype.__cleanup.call(this);
                    for (var a = 0, b = this.__children; a < b.length;) {
                        var c = b[a];
                        ++a;
                        c.__cleanup()
                    }
                    for (a = this.__removedChildren.iterator(); a.hasNext();) b = a.next(), null == b.stage && b.__cleanup();
                    this.__removedChildren.set_length(0)
                },
                __dispatchChildren: function (a) {
                    if (null != this.__children)
                        for (var b = 0, c = this.__children; b < c.length;) {
                            var d = c[b];
                            ++b;
                            a.target = d;
                            if (!d.__dispatchWithCapture(a)) break;
                            d.__dispatchChildren(a)
                        }
                },
                __enterFrame: OpenflShared.__enterFrame,
                __getBounds: function (a, b) {
                    X.prototype.__getBounds.call(this, a, b);
                    if (0 != this.__children.length) {
                        for (var c = la.__pool.get(), d = 0, e = this.__children; d < e.length;) {
                            var f = e[d];
                            ++d;
                            if (0 != f.__scaleX && 0 != f.__scaleY) {
                                var h =
                                    f.__transform;
                                c.a = h.a * b.a + h.b * b.c;
                                c.b = h.a * b.b + h.b * b.d;
                                c.c = h.c * b.a + h.d * b.c;
                                c.d = h.c * b.b + h.d * b.d;
                                c.tx = h.tx * b.a + h.ty * b.c + b.tx;
                                c.ty = h.tx * b.b + h.ty * b.d + b.ty;
                                f.__getBounds(a, c)
                            }
                        }
                        la.__pool.release(c)
                    }
                },
                __getFilterBounds: function (a, b) {
                    X.prototype.__getFilterBounds.call(this, a, b);
                    if (null == this.__scrollRect && 0 != this.__children.length) {
                        for (var c = la.__pool.get(), d = 0, e = this.__children; d < e.length;) {
                            var f = e[d];
                            ++d;
                            if (0 != f.__scaleX && 0 != f.__scaleY && !f.__isMask) {
                                var h = f.__transform;
                                c.a = h.a * b.a + h.b * b.c;
                                c.b = h.a * b.b + h.b *
                                    b.d;
                                c.c = h.c * b.a + h.d * b.c;
                                c.d = h.c * b.b + h.d * b.d;
                                c.tx = h.tx * b.a + h.ty * b.c + b.tx;
                                c.ty = h.tx * b.b + h.ty * b.d + b.ty;
                                h = ha.__pool.get();
                                f.__getFilterBounds(h, c);
                                a.__expand(h.x, h.y, h.width, h.height);
                                ha.__pool.release(h)
                            }
                        }
                        la.__pool.release(c)
                    }
                },
                __getRenderBounds: function (a, b) {
                    if (null != this.__scrollRect) X.prototype.__getRenderBounds.call(this, a, b);
                    else if (X.prototype.__getBounds.call(this, a, b), 0 != this.__children.length) {
                        for (var c = la.__pool.get(), d = 0, e = this.__children; d < e.length;) {
                            var f = e[d];
                            ++d;
                            if (0 != f.__scaleX && 0 != f.__scaleY &&
                                !f.__isMask) {
                                var h = f.__transform;
                                c.a = h.a * b.a + h.b * b.c;
                                c.b = h.a * b.b + h.b * b.d;
                                c.c = h.c * b.a + h.d * b.c;
                                c.d = h.c * b.b + h.d * b.d;
                                c.tx = h.tx * b.a + h.ty * b.c + b.tx;
                                c.ty = h.tx * b.b + h.ty * b.d + b.ty;
                                f.__getRenderBounds(a, c)
                            }
                        }
                        la.__pool.release(c)
                    }
                },
                __hitTest: function (a, b, c, d, e, f) {
                    if (!f.get_visible() || this.__isMask || e && !this.mouseEnabled && !this.mouseChildren || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b)) return !1;
                    if (null != this.__scrollRect) {
                        var h = ba.__pool.get();
                        h.setTo(a, b);
                        var r = this.__getRenderTransform(),
                            m = r.a *
                                r.d - r.b * r.c;
                        if (0 == m) h.x = -r.tx, h.y = -r.ty;
                        else {
                            var C = 1 / m * (r.c * (r.ty - h.y) + r.d * (h.x - r.tx));
                            h.y = 1 / m * (r.a * (h.y - r.ty) + r.b * (r.tx - h.x));
                            h.x = C
                        }
                        if (!this.__scrollRect.containsPoint(h)) return ba.__pool.release(h), !1;
                        ba.__pool.release(h)
                    }
                    h = this.__children.length;
                    if (e)
                        if (null == d || !this.mouseChildren)
                            for (; 0 <= --h;) {
                                if (this.__children[h].__hitTest(a, b, c, null, !0, this.__children[h])) return null != d && d.push(f), !0
                            } else {
                            if (null != d) {
                                e = d.length;
                                for (m = !1; 0 <= --h && !(((r = this.__children[h].__getInteractive(null)) || this.mouseEnabled &&
                                    !m) && this.__children[h].__hitTest(a, b, c, d, !0, this.__children[h]) && (m = !0, r && d.length > e));) ;
                                if (m) return d.splice(e, 0, f), !0
                            }
                        } else {
                        for (m = !1; 0 <= --h && (!this.__children[h].__hitTest(a, b, c, d, !1, this.__children[h]) || (m = !0, null != d));) ;
                        return m
                    }
                    return !1
                },
                __hitTestMask: OpenflShared.__hitTestMask,
                __setStageReference: function (a) {
                    X.prototype.__setStageReference.call(this, a);
                    if (null != this.__children)
                        for (var b = 0, c = this.__children; b <
                        c.length;) {
                            var d = c[b];
                            ++b;
                            d.__setStageReference(a)
                        }
                },
                __setWorldTransformInvalid: function () {
                    if (!this.__worldTransformInvalid && (this.__worldTransformInvalid = !0, null != this.__children))
                        for (var a = 0, b = this.__children; a < b.length;) {
                            var c = b[a];
                            ++a;
                            c.__setWorldTransformInvalid()
                        }
                },
                __tabTest: function (a) {
                    X.prototype.__tabTest.call(this, a);
                    if (this.get_tabChildren())
                        for (var b, c = 0, d = this.__children; c < d.length;) {
                            var e = d[c];
                            ++c;
                            if (b = e.__getInteractive(null)) b = e, b.__tabTest(a)
                        }
                },
                __update: function (a, b) {
                    X.prototype.__update.call(this,
                        a, b);
                    if (b) {
                        b = 0;
                        for (var c = this.__children; b < c.length;) {
                            var d = c[b];
                            ++b;
                            d.__update(a, !0)
                        }
                    }
                },
                get_numChildren: OpenflShared.get_numChildren,
                get_tabChildren: OpenflShared.get_tabChildren,
                __class__: oa,
                __properties__: l(X.prototype.__properties__, {
                    get_tabChildren: "get_tabChildren",
                    get_numChildren: "get_numChildren"
                })
            });
            var Ja = function () {
                oa.call(this);
                this.__drawableType = 4;
                this.__buttonMode = !1;
                this.useHandCursor = !0;
                if (null != this.__pendingBindLibrary) {
                    var a = this.__pendingBindLibrary,
                        b = this.__pendingBindClassName;
                    this.__pendingBindClassName = this.__pendingBindLibrary = null;
                    a.bind(b, this)
                } else null != Ja.__constructor && (a = Ja.__constructor, Ja.__constructor = null, a(this))
            };
            g["openfl.display.Sprite"] = Ja;
            Ja.__name__ = "openfl.display.Sprite";
            Ja.__super__ = oa;
            Ja.prototype = l(oa.prototype, {
                __getCursor: function () {
                    return this.__buttonMode && this.useHandCursor ? "button" : null
                },
                __hitTest: function (a, b, c, d, e, f) {
                    if (e && !this.mouseEnabled && !this.mouseChildren) return !1;
                    if (!f.get_visible() || this.__isMask || null != this.get_mask() && !this.get_mask().__hitTestMask(a,
                        b)) return this.__hitTestHitArea(a, b, c, d, e, f);
                    if (null != this.__scrollRect) {
                        var h = ba.__pool.get();
                        h.setTo(a, b);
                        var r = this.__getRenderTransform(),
                            m = r.a * r.d - r.b * r.c;
                        if (0 == m) h.x = -r.tx, h.y = -r.ty;
                        else {
                            var C = 1 / m * (r.c * (r.ty - h.y) + r.d * (h.x - r.tx));
                            h.y = 1 / m * (r.a * (h.y - r.ty) + r.b * (r.tx - h.x));
                            h.x = C
                        }
                        if (!this.__scrollRect.containsPoint(h)) return ba.__pool.release(h), this.__hitTestHitArea(a, b, c, d, !0, f);
                        ba.__pool.release(h)
                    }
                    return oa.prototype.__hitTest.call(this, a, b, c, d, e, f) ? null != d ? e : !0 : null == this.hitArea && null != this.__graphics &&
                    this.__graphics.__hitTest(a, b, c, this.__getRenderTransform()) ? (null == d || e && !this.mouseEnabled || d.push(f), !0) : this.__hitTestHitArea(a, b, c, d, e, f)
                },
                __hitTestHitArea: function (a, b, c, d, e, f) {
                    return null == this.hitArea || this.hitArea.mouseEnabled ? !1 : (this.hitArea.mouseEnabled = !0, a = this.hitArea.__hitTest(a, b, c, null, !0, f), this.hitArea.mouseEnabled = !1, null != d && a && (d[d.length] = f), a)
                },
                __hitTestMask: function (a, b) {
                    return oa.prototype.__hitTestMask.call(this, a, b) || null != this.__graphics && this.__graphics.__hitTest(a,
                        b, !0, this.__getRenderTransform()) ? !0 : !1
                },
                get_graphics: function () {
                    null == this.__graphics && (this.__graphics = new Tc(this));
                    return this.__graphics
                },
                get_tabEnabled: function () {
                    return null == this.__tabEnabled ? this.__buttonMode : this.__tabEnabled
                },
                get_buttonMode: OpenflShared.get_buttonMode,
                set_buttonMode: OpenflShared.set_buttonMode,
                __class__: Ja,
                __properties__: l(oa.prototype.__properties__, {
                    get_graphics: "get_graphics",
                    set_buttonMode: "set_buttonMode",
                    get_buttonMode: "get_buttonMode"
                })
            });
            var db =
                function (a) {
                    db.instance = this;
                    Ja.call(this);
                    this.prepareStage();
                    eb.useEnterFrame(this);
                    db.switchScene(a)
                };
            g["coogee.Game"] = db;
            db.__name__ = "coogee.Game";
            db.switchScene = function (a) {
                db.instance.switchSceneImp(a)
            };
            db.quit = function () {
            };
            db.__super__ = Ja;
            db.prototype = l(Ja.prototype, {
                prepareStage: function () {
                    var a = this;
                    this.stage.align = 6;
                    this.stage.set_scaleMode(2);
                    this.stage.addEventListener("resize", function (b) {
                        a.layout()
                    });
                    this.stage.application.onExit.add(p(this, this.onExit));
                    this.stage.application.__window.onActivate.add(p(this,
                        this.onResume));
                    this.stage.application.__window.onDeactivate.add(p(this, this.onPause))
                },
                onExit: function (a) {
                    eb.stop()
                },
                onResume: function () {
                },
                onPause: function () {
                },
                layout: function () {
                    if (null != db.scene) {
                        var a = this.stage.stageWidth,
                            b = this.stage.stageHeight,
                            c = this.getScale(a, b);
                        db.scene.set_scaleX(db.scene.set_scaleY(c));
                        db.scene.setSize(a / c, b / c)
                    }
                },
                getScale: function (a, b) {
                    return 1
                },
                switchSceneImp: function (a) {
                    null != db.scene && (db.scene.deactivate(), this.removeChild(db.scene), db.scene = null);
                    null != a && (db.scene =
                        y.createInstance(a, []), this.addChild(db.scene), this.layout(), db.scene.activate());
                    this.stage.set_focus(this.stage)
                },
                __class__: db
            });
            var ub = function () {
                x.reset();
                this.initUI();
                db.call(this, Va)
            };
            g["toytown2.Main"] = ub;
            ub.__name__ = "toytown2.Main";
            ub.__super__ = db;
            ub.prototype = l(db.prototype, {
                initUI: function () {
                    this.stage.showDefaultContextMenu = !1;
                    ea.useDefault()
                },
                switchSceneImp: function (a) {
                    null == Ma.layer && (Ma.layer = new ka);
                    db.prototype.switchSceneImp.call(this, a);
                    this.addChild(Ma.layer);
                    Ma.wipe()
                },
                layout: function () {
                    db.prototype.layout.call(this);
                    var a = this.stage.stageWidth,
                        b = this.stage.stageHeight;
                    Ma.layer.set_scaleX(Ma.layer.set_scaleY(1));
                    Ma.layer.setSize(a / 1, b / 1)
                },
                __class__: ub
            });
            var tc = function (a) {
                a.addChild(this);
                ub.call(this);
                this.dispatchEvent(new V("addedToStage", !1, !1))
            };
            g.DocumentClass = tc;
            tc.__name__ = "DocumentClass";
            tc.__super__ = ub;
            tc.prototype = l(ub.prototype, {
                __class__: tc
            });
            var ra = function (a, b) {
                this.r = new RegExp(a, b.split("u").join(""))
            };
            g.EReg = ra;
            ra.__name__ = "EReg";
            ra.prototype = {
                match: function (a) {
                    this.r.global && (this.r.lastIndex = 0);
                    this.r.m = this.r.exec(a);
                    this.r.s = a;
                    return null != this.r.m
                },
                matched: function (a) {
                    if (null != this.r.m && 0 <= a && a < this.r.m.length) return this.r.m[a];
                    throw fa.thrown("EReg::matched");
                },
                matchedPos: function () {
                    if (null == this.r.m) throw fa.thrown("No string matched");
                    return {
                        pos: this.r.m.index,
                        len: this.r.m[0].length
                    }
                },
                matchSub: function (a, b, c) {
                    null == c && (c = -1);
                    if (this.r.global) {
                        if (this.r.lastIndex = b, this.r.m = this.r.exec(0 > c ? a : ja.substr(a, 0, b + c)), c = null != this.r.m) this.r.s =
                            a
                    } else if (c = this.match(0 > c ? ja.substr(a, b, null) : ja.substr(a, b, c))) this.r.s = a, this.r.m.index += b;
                    return c
                },
                split: function (a) {
                    return a.replace(this.r, "#__delim__#").split("#__delim__#")
                },
                map: function (a, b) {
                    var c = 0,
                        d = "";
                    do {
                        if (c >= a.length) break;
                        else if (!this.matchSub(a, c)) {
                            d += n.string(ja.substr(a, c, null));
                            break
                        }
                        var e = this.matchedPos();
                        d += n.string(ja.substr(a, c, e.pos - c));
                        d += n.string(b(this));
                        0 == e.len ? (d += n.string(ja.substr(a, e.pos, 1)), c = e.pos + 1) : c = e.pos + e.len
                    } while (this.r.global);
                    !this.r.global && 0 < c && c < a.length &&
                    (d += n.string(ja.substr(a, c, null)));
                    return d
                },
                __class__: ra
            };
            var ja = function () {
            };
            g.HxOverrides = ja;
            ja.__name__ = "HxOverrides";
            ja.strDate = function (a) {
                switch (a.length) {
                    case 8:
                        a = a.split(":");
                        var b = new Date;
                        b.setTime(0);
                        b.setUTCHours(a[0]);
                        b.setUTCMinutes(a[1]);
                        b.setUTCSeconds(a[2]);
                        return b;
                    case 10:
                        return a = a.split("-"), new Date(a[0], a[1] - 1, a[2], 0, 0, 0);
                    case 19:
                        return a = a.split(" "), b = a[0].split("-"), a = a[1].split(":"), new Date(b[0], b[1] - 1, b[2], a[0], a[1], a[2]);
                    default:
                        throw fa.thrown("Invalid date format : " +
                            a);
                }
            };
            ja.cca = function (a, b) {
                a = a.charCodeAt(b);
                if (a == a) return a
            };
            ja.substr = function (a, b, c) {
                if (null == c) c = a.length;
                else if (0 > c)
                    if (0 == b) c = a.length + c;
                    else return "";
                return a.substr(b, c)
            };
            ja.remove = function (a, b) {
                b = a.indexOf(b);
                if (-1 == b) return !1;
                a.splice(b, 1);
                return !0
            };
            ja.now = function () {
                return Date.now()
            };
            var ad = function () {
            };
            g.Lambda = ad;
            ad.__name__ = "Lambda";
            ad.array = function (a) {
                var b = [];
                for (a = G(a); a.hasNext();) {
                    var c = a.next();
                    b.push(c)
                }
                return b
            };
            var A = function () {
            };
            g.ManifestResources = A;
            A.__name__ = "ManifestResources";
            A.init = function (a) {
                A.preloadLibraries = [];
                A.preloadLibraryNames = [];
                A.rootPath = null;
                null != a && Object.prototype.hasOwnProperty.call(a, "rootPath") && (A.rootPath = M.field(a, "rootPath"), R.endsWith(A.rootPath, "/") || (A.rootPath += "/"));
                null == A.rootPath && (A.rootPath = "./");
                pa.registerFont(Ea);
                pa.registerFont(sa);
                a = Jc.parse('{"name":null,"assets":"aoy4:pathy21:Assets%2Fharbour.jsony4:sizei707846y4:typey4:TEXTy2:idy7:harboury7:preloadtgoR0y19:Assets%2Fdelta.jsonR2i301143R3R4R5y5:deltaR7tgoR0y19:Assets%2Friver.jsonR2i334164R3R4R5y5:riverR7tgoR0y19:Assets%2Fsmall.jsonR2i197491R3R4R5y5:smallR7tgoR0y20:Assets%2Fmedium.jsonR2i373288R3R4R5y6:mediumR7tgoR0y20:Assets%2Fisland.jsonR2i63618R3R4R5y6:islandR7tgoR0y21:Assets%2Fvillage.jsonR2i319807R3R4R5y7:villageR7tgoR0y20:Assets%2Fstreet.jsonR2i269432R3R4R5y6:streetR7tgoR0y22:Assets%2Fmidlands.jsonR2i473R3R4R5y8:midlandsR7tgoR0y20:Assets%2Fdesert.jsonR2i475R3R4R5y6:desertR7tgoR0y19:Assets%2Ffrost.jsonR2i469R3R4R5y5:frostR7tgoR0y21:Assets%2Fharvest.jsonR2i474R3R4R5y7:harvestR7tgoR0y23:Assets%2Finnsmouth.jsonR2i473R3R4R5y9:innsmouthR7tgoR0y19:Assets%2Fnight.jsonR2i474R3R4R5y5:nightR7tgoR2i46596R3y4:FONTy9:classNamey37:__ASSET__assets_sharetech_regular_ttfR5y7:ui_fontR7tgoR2i42756R3R34R35y41:__ASSET__assets_sharetechmono_regular_ttfR5y12:ui_font_monoR7tgh","rootPath":null,"version":2,"libraryArgs":[],"libraryType":null}',
                    A.rootPath);
                a = sb.fromManifest(a);
                za.registerLibrary("default", a);
                a = za.getLibrary("default");
                null != a ? A.preloadLibraries.push(a) : A.preloadLibraryNames.push("default")
            };
            var fb = function (a) {
                null != a && (this.name = a);
                this.__init || (void 0 == this.ascender && (this.ascender = 0), void 0 == this.descender && (this.descender = 0), void 0 == this.height && (this.height = 0), void 0 == this.numGlyphs && (this.numGlyphs = 0), void 0 == this.underlinePosition && (this.underlinePosition = 0), void 0 == this.underlineThickness && (this.underlineThickness =
                    0), void 0 == this.unitsPerEM && (this.unitsPerEM = 0), null != this.__fontID ? za.isLocal(this.__fontID) && this.__fromBytes(za.getBytes(this.__fontID)) : null != this.__fontPath && this.__fromFile(this.__fontPath))
            };
            g["lime.text.Font"] = fb;
            fb.__name__ = "lime.text.Font";
            fb.fromFile = function (a) {
                if (null == a) return null;
                var b = new fb;
                b.__fromFile(a);
                return b
            };
            fb.loadFromName = function (a) {
                return (new fb).__loadFromName(a)
            };
            fb.__measureFontNode = OpenflShared.measureFontNode;
            fb.prototype = {
                __copyFrom: function (a) {
                    null != a && (this.ascender = a.ascender, this.descender = a.descender, this.height = a.height, this.name = a.name, this.numGlyphs =
                        a.numGlyphs, this.src = a.src, this.underlinePosition = a.underlinePosition, this.underlineThickness = a.underlineThickness, this.unitsPerEM = a.unitsPerEM, this.__fontID = a.__fontID, this.__fontPath = a.__fontPath, this.__init = !0)
                },
                __fromBytes: function (a) {
                    this.__fontPath = null
                },
                __fromFile: function (a) {
                    this.__fontPath = a
                },
                __loadFromName: function (a) {
                    var b = this,
                        c = new Kc;
                    this.name = a;
                    var d = F.navigator.userAgent.toLowerCase(),
                        e = 0 <= d.indexOf(" safari/") && 0 > d.indexOf(" chrome/");
                    d = (new ra("(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)",
                        "i")).match(d);
                    if (!e && !d && window.document.fonts && (E = window.document.fonts, p(E, E.load))) window.document.fonts.load("1em '" + a + "'").then(function (a) {
                        c.complete(b)
                    }, function (d) {
                        ua.warn('Could not load web font "' + a + '"', {

                            className: "lime.text.Font",
                            methodName: "__loadFromName"
                        });
                        c.complete(b)
                    });
                    else {
                        var f = fb.__measureFontNode("'" + a + "', sans-serif"),
                            h = fb.__measureFontNode("'" + a + "', serif"),
                            r = f.offsetWidth,
                            m = h.offsetWidth,
                            C = -1,
                            wa = 0,
                            k, g;
                        C = window.setInterval(function () {
                            wa +=
                                1;
                            k = f.offsetWidth != r || h.offsetWidth != m;
                            g = 3E3 <= 50 * wa;
                            if (k || g) window.clearInterval(C), f.parentNode.removeChild(f), h.parentNode.removeChild(h), h = f = null, g && ua.warn('Could not load web font "' + a + '"', {

                                className: "lime.text.Font",
                                methodName: "__loadFromName"
                            }), c.complete(b)
                        }, 50)
                    }
                    return c.future
                },
                __class__: fb
            };
            var bd = u.__ASSET__assets_sharetech_regular_ttf = function () {
                this.ascender = 885;
                this.descender = -242;
                this.height = 1127;
                this.numGlyphs = 256;
                this.underlinePosition = -100;
                this.underlineThickness = 50;
                this.unitsPerEM = 1E3;
                this.name = "Share Tech Regular";
                fb.call(this)
            };
            g.__ASSET__assets_sharetech_regular_ttf = bd;
            bd.__name__ = "__ASSET__assets_sharetech_regular_ttf";
            bd.__super__ = fb;
            bd.prototype = l(fb.prototype, {
                __class__: bd
            });
            var va = u.__ASSET__assets_sharetechmono_regular_ttf = function () {
                this.ascender = 885;
                this.descender = -242;
                this.height = 1127;
                this.numGlyphs = 268;
                this.underlinePosition = -135;
                this.underlineThickness = 50;
                this.unitsPerEM = 1E3;
                this.name = "Share Tech Mono";
                fb.call(this)
            };
            g.__ASSET__assets_sharetechmono_regular_ttf = va;
            va.__name__ = "__ASSET__assets_sharetechmono_regular_ttf";
            va.__super__ = fb;
            va.prototype = l(fb.prototype, {
                __class__: va
            });
            var pa = function (a) {
                fb.call(this, a)
            };
            g["openfl.text.Font"] = pa;
            pa.__name__ = "openfl.text.Font";
            pa.fromFile = function (a) {
                if (null == a) return null;
                var b = new pa;
                b.__fromFile(a);
                return b
            };
            pa.loadFromName = function (a) {
                return fb.loadFromName(a).then(function (a) {
                    var b = new pa;
                    b.__fromLimeFont(a);
                    return Jb.withValue(b)
                })
            };
            pa.registerFont = function (a) {
                a =
                    null == T.getClass(a) ? T.__cast(y.createInstance(a, []), pa) : T.__cast(a, pa);
                null != a && (pa.__registeredFonts.push(a), pa.__fontByName.h[a.name] = a)
            };
            pa.__super__ = fb;
            pa.prototype = l(fb.prototype, {
                __fromLimeFont: function (a) {
                    this.__copyFrom(a)
                },
                __class__: pa
            });
            var Ea = u.__ASSET__OPENFL__assets_sharetech_regular_ttf = function () {
                this.__fromLimeFont(new bd);
                fb.call(this, void 0)
            };
            g.__ASSET__OPENFL__assets_sharetech_regular_ttf = Ea;
            Ea.__name__ = "__ASSET__OPENFL__assets_sharetech_regular_ttf";
            Ea.__super__ = pa;
            Ea.prototype =
                l(pa.prototype, {
                    __class__: Ea
                });
            var sa = u.__ASSET__OPENFL__assets_sharetechmono_regular_ttf = function () {
                this.__fromLimeFont(new va);
                fb.call(this, void 0)
            };
            g.__ASSET__OPENFL__assets_sharetechmono_regular_ttf = sa;
            sa.__name__ = "__ASSET__OPENFL__assets_sharetechmono_regular_ttf";
            sa.__super__ = pa;
            sa.prototype = l(pa.prototype, {
                __class__: sa
            });
            Math.__name__ = "Math";
            var M = function () {
            };
            g.Reflect = M;
            M.__name__ = "Reflect";
            M.field = function (a, b) {
                try {
                    return a[b]
                } catch (c) {
                    return Ia.lastError = c, null
                }
            };
            M.getProperty = HaxeShared.getProperty;
            M.fields = HaxeShared.fields;
            M.isFunction = HaxeShared.isFunction;
            M.compare = function (a, b) {
                return a == b ? 0 : a > b ? 1 : -1
            };
            M.deleteField = HaxeShared.deleteField;
            var n = function () {
            };
            g.Std = n;
            n.__name__ = "Std";
            n.string = function (a) {
                return T.__string_rec(a, "")
            };
            n.parseInt = function (a) {
                a = parseInt(a);
                return isNaN(a) ? null : a
            };
            var xc = function () {
            };
            g["_String.String_Impl_"] = xc;
            xc.__name__ = "_String.String_Impl_";
            xc.fromCharCode = function (a) {
                return String.fromCodePoint(a)
            };
            var ab = function () {
                this.b = ""
            };
            g.StringBuf = ab;
            ab.__name__ = "StringBuf";
            ab.prototype = {
                __class__: ab
            };
            var R = function () {
            };
            g.StringTools = R;
            R.__name__ = "StringTools";
            R.htmlEscape = function (a, b) {
                for (var c = "", d = 0, e =
                    a; d < e.length;) {
                    a = e;
                    var f = d++,
                        h = a.charCodeAt(f);
                    55296 <= h && 56319 >= h && (h = h - 55232 << 10 | a.charCodeAt(f + 1) & 1023);
                    a = h;
                    65536 <= a && ++d;
                    switch (a) {
                        case 34:
                            c = b ? c + "&quot;" : c + String.fromCodePoint(a);
                            break;
                        case 38:
                            c += "&amp;";
                            break;
                        case 39:
                            c = b ? c + "&#039;" : c + String.fromCodePoint(a);
                            break;
                        case 60:
                            c += "&lt;";
                            break;
                        case 62:
                            c += "&gt;";
                            break;
                        default:
                            c += String.fromCodePoint(a)
                    }
                }
                return c
            };
            R.htmlUnescape = function (a) {
                return a.split("&gt;").join(">").split("&lt;").join("<").split("&quot;").join('"').split("&#039;").join("'").split("&amp;").join("&")
            };
            R.startsWith = function (a, b) {
                return a.length >= b.length ? 0 == a.lastIndexOf(b, 0) : !1
            };
            R.endsWith = HaxeShared.endsWith;
            R.isSpace = function (a, b) {
                a = ja.cca(a, b);
                return 8 < a && 14 > a ? !0 : 32 == a
            };
            R.ltrim = function (a) {
                for (var b = a.length, c = 0; c < b && R.isSpace(a, c);) ++c;
                return 0 < c ? ja.substr(a, c, b - c) : a
            };
            R.rtrim = function (a) {
                for (var b = a.length, c = 0; c < b && R.isSpace(a, b - c - 1);) ++c;
                return 0 < c ? ja.substr(a, 0, b - c) : a
            };
            R.trim = function (a) {
                return R.ltrim(R.rtrim(a))
            };
            R.replace = function (a,
                                  b, c) {
                return a.split(b).join(c)
            };
            R.hex = function (a, b) {
                var c = "";
                do c = "0123456789ABCDEF".charAt(a & 15) + c, a >>>= 4; while (0 < a);
                if (null != b)
                    for (; c.length < b;) c = "0" + c;
                return c
            };
            var Ga = v.ValueType = {
                __ename__: "ValueType",
                __constructs__: null,
                TNull: {
                    _hx_name: "TNull",
                    _hx_index: 0,
                    __enum__: "ValueType",
                    toString: q
                },
                TInt: {
                    _hx_name: "TInt",
                    _hx_index: 1,
                    __enum__: "ValueType",
                    toString: q
                },
                TFloat: {
                    _hx_name: "TFloat",
                    _hx_index: 2,
                    __enum__: "ValueType",
                    toString: q
                },
                TBool: {
                    _hx_name: "TBool",
                    _hx_index: 3,
                    __enum__: "ValueType",
                    toString: q
                },
                TObject: {
                    _hx_name: "TObject",
                    _hx_index: 4,
                    __enum__: "ValueType",
                    toString: q
                },
                TFunction: {
                    _hx_name: "TFunction",
                    _hx_index: 5,
                    __enum__: "ValueType",
                    toString: q
                },
                TClass: (E = function (a) {
                    return {
                        _hx_index: 6,
                        c: a,
                        __enum__: "ValueType",
                        toString: q
                    }
                }, E._hx_name = "TClass", E.__params__ = ["c"], E),
                TEnum: (E = function (a) {
                    return {
                        _hx_index: 7,
                        e: a,
                        __enum__: "ValueType",
                        toString: q
                    }
                }, E._hx_name = "TEnum", E.__params__ = ["e"], E),
                TUnknown: {
                    _hx_name: "TUnknown",
                    _hx_index: 8,
                    __enum__: "ValueType",
                    toString: q
                }
            };
            Ga.__constructs__ = [Ga.TNull, Ga.TInt,
                Ga.TFloat, Ga.TBool, Ga.TObject, Ga.TFunction, Ga.TClass, Ga.TEnum, Ga.TUnknown
            ];
            var y = function () {
            };
            g.Type = y;
            y.__name__ = "Type";
            y.resolveEnum = function (a) {
                return v[a]
            };
            y.createInstance = function (a, b) {
                return new (Function.prototype.bind.apply(a, [null].concat(b)))
            };
            y.createEnum = function (a, b, c) {
                var d = M.field(a, b);
                if (null == d) throw fa.thrown("No such constructor " + b);
                if (M.isFunction(d)) {
                    if (null == c) throw fa.thrown("Constructor " + b + " need parameters");
                    return d.apply(a, c)
                }
                if (null != c && 0 != c.length) throw fa.thrown("Constructor " +
                    b + " does not need parameters");
                return d
            };
            y.typeof = function (a) {
                switch (typeof a) {
                    case "boolean":
                        return Ga.TBool;
                    case "function":
                        return a.__name__ || a.__ename__ ? Ga.TObject : Ga.TFunction;
                    case "number":
                        return Math.ceil(a) == a % 2147483648 ? Ga.TInt : Ga.TFloat;
                    case "object":
                        if (null == a) return Ga.TNull;
                        var b = a.__enum__;
                        if (null != b) return Ga.TEnum(v[b]);
                        a = T.getClass(a);
                        return null != a ? Ga.TClass(a) : Ga.TObject;
                    case "string":
                        return Ga.TClass(String);
                    case "undefined":
                        return Ga.TNull;
                    default:
                        return Ga.TUnknown
                }
            };
            y.enumParameters =
                function (a) {
                    var b = v[a.__enum__].__constructs__[a._hx_index].__params__;
                    if (null != b) {
                        for (var c = [], d = 0; d < b.length;) {
                            var e = b[d];
                            ++d;
                            c.push(a[e])
                        }
                        return c
                    }
                    return []
                };
            var J = {
                    gt: function (a, b) {
                        var c = 0 > a;
                        return c != 0 > b ? c : a > b
                    },
                    gte: function (a, b) {
                        var c = 0 > a;
                        return c != 0 > b ? c : a >= b
                    },
                    toFloat: function (a) {
                        return 0 > a ? 4294967296 + a : a + 0
                    }
                },
                B = function (a) {
                    null == a && (a = "null");
                    this._originalName = this._name = a;
                    this.updateFullPath();
                    O.call(this)
                };
            g["away3d.library.assets.NamedAssetBase"] = B;
            B.__name__ = "away3d.library.assets.NamedAssetBase";
            B.__super__ = O;
            B.prototype = l(O.prototype, {
                get_name: function () {
                    return this._name
                },
                set_name: function (a) {
                    var b = this._name;
                    this._name = a;
                    null == this._name && (this._name = "null");
                    this.updateFullPath();
                    this.hasEventListener("assetRename") && this.dispatchEvent(new oh("assetRename", T.__cast(this, t), b));
                    return a
                },
                updateFullPath: function () {
                    this._full_path = [this._namespace, this._name]
                },
                __class__: B,
                __properties__: {
                    set_name: "set_name",
                    get_name: "get_name"
                }
            });
            var t = function () {
            };
            g["away3d.library.assets.IAsset"] = t;
            t.__name__ =
                "away3d.library.assets.IAsset";
            t.__isInterface__ = !0;
            t.__interfaces__ = [H];
            t.prototype = {
                __class__: t,
                __properties__: {
                    get_name: "get_name"
                }
            };
            var gb = function () {
                this._animationDictionary = new Ha;
                this._animationNames = D.toObjectVector(null);
                this._animations = D.toObjectVector(null);
                B.call(this)
            };
            g["away3d.animators.AnimationSetBase"] = gb;
            gb.__name__ = "away3d.animators.AnimationSetBase";
            gb.__interfaces__ = [t];
            gb.__super__ = B;
            gb.prototype = l(B.prototype, {
                resetGPUCompatibility: function () {
                    this._usesCPU = !1
                },
                addAnimation: function (a) {
                    var b =
                            this._animationDictionary,
                        c = a.get_name();
                    if (Object.prototype.hasOwnProperty.call(b.h, c)) throw new ph("root node name '" + a.get_name() + "' already exists in the set");
                    b = this._animationDictionary;
                    c = a.get_name();
                    b.h[c] = a;
                    this._animations.push(a);
                    this._animationNames.push(a.get_name())
                },
                __class__: gb
            });
            var vb = function (a) {
                this.updatePosition = !0;
                this._animationStates = new N;
                this._absoluteTime = 0;
                this._owners = D.toObjectVector(null);
                this._playbackSpeed = 1;
                this._time = 0;
                this._autoUpdate = !0;
                this._broadcaster = new Ja;
                this._animationSet = a;
                B.call(this)
            };
            g["away3d.animators.AnimatorBase"] = vb;
            vb.__name__ = "away3d.animators.AnimatorBase";
            vb.__interfaces__ = [t];
            vb.__super__ = B;
            vb.prototype = l(B.prototype, {
                getAnimationState: function (a) {
                    var b = a.get_stateConstructor();
                    null == this._animationStates.h.__keys__[a.__id__] && this._animationStates.set(a, b(T.__cast(this, he), a));
                    return this._animationStates.h[a.__id__]
                },
                get_animationSet: function () {
                    return this._animationSet
                },
                get_playbackSpeed: function () {
                    return this._playbackSpeed
                },
                start: function () {
                    !this._isPlaying &&
                    this._autoUpdate && (this._time = this._absoluteTime = Na.getTimer(), this._isPlaying = !0, this._broadcaster.hasEventListener("enterFrame") || this._broadcaster.addEventListener("enterFrame", p(this, this.onEnterFrame)), this.hasEventListener("start") && (null == this._startEvent && (this._startEvent = new qh("start", this)), this.dispatchEvent(this._startEvent)))
                },
                update: function (a) {
                    var b = (a - this._time) * this.get_playbackSpeed() | 0;
                    this.updateDeltaTime(b);
                    this._time = a
                },
                addOwner: function (a) {
                    this._owners.push(a)
                },
                removeOwner: function (a) {
                    var b =
                        this._owners;
                    b.__tempIndex = this._owners.indexOf(a, 0);
                    a = 0;
                    for (var c = []; a < c.length;) {
                        var d = c[a++];
                        b.insertAt(b.__tempIndex, d);
                        b.__tempIndex++
                    }
                    b.splice(b.__tempIndex, 1)
                },
                updateDeltaTime: function (a) {
                    this._absoluteTime += a;
                    this._activeState.update(this._absoluteTime);
                    this.updatePosition && this.applyPositionDelta()
                },
                onEnterFrame: function (a) {
                    this.update(Na.getTimer())
                },
                applyPositionDelta: function () {
                    var a = this._activeState.get_positionDelta(),
                        b = a.get_length();
                    if (0 < b) {
                        var c = this._owners.get_length();
                        for (var d =
                            0; d < c;) {
                            var e = d++;
                            this._owners.get(e).translateLocal(a, b)
                        }
                    }
                },
                __class__: vb,
                __properties__: l(B.prototype.__properties__, {
                    get_playbackSpeed: "get_playbackSpeed",
                    get_animationSet: "get_animationSet"
                })
            });
            var Qd = function () {
            };
            g["away3d.animators.IAnimationSet"] = Qd;
            Qd.__name__ = "away3d.animators.IAnimationSet";
            Qd.__isInterface__ = !0;
            Qd.prototype = {
                __class__: Qd,
                __properties__: {
                    get_usesCPU: "get_usesCPU"
                }
            };
            var he = function () {
            };
            g["away3d.animators.IAnimator"] = he;
            he.__name__ = "away3d.animators.IAnimator";
            he.__isInterface__ = !0;
            he.prototype = {
                __class__: he,
                __properties__: {
                    get_animationSet: "get_animationSet"
                }
            };
            var Uc = function (a, b, c) {
                null == c && (c = !1);
                null == b && (b = !1);
                null == a && (a = !1);
                this._totalLenOfOneVertex = 0;
                this._localStaticNodes = D.toObjectVector(null);
                this._localDynamicNodes = D.toObjectVector(null);
                this._particleNodes = D.toObjectVector(null);
                this._animationSubGeometries = new N;
                gb.call(this);
                this.addAnimation(this._timeNode = new rh(a, b, c))
            };
            g["away3d.animators.ParticleAnimationSet"] = Uc;
            Uc.__name__ = "away3d.animators.ParticleAnimationSet";
            Uc.__interfaces__ = [Qd];
            Uc.__super__ = gb;
            Uc.prototype = l(gb.prototype, {
                get_particleNodes: function () {
                    return this._particleNodes
                },
                addAnimation: function (a) {
                    var b = T.__cast(a, Zb);
                    b.processAnimationSetting(this);
                    1 == b.get_mode() ? (b.dataOffset = this._totalLenOfOneVertex, this._totalLenOfOneVertex += b.get_dataLength(), this._localStaticNodes.push(b)) : 2 == b.get_mode() && this._localDynamicNodes.push(b);
                    for (var c = this._particleNodes.get_length() - 1; 0 <= c && !(this._particleNodes.get(c).get_priority() <= b.get_priority());) --c;
                    this._particleNodes.insertAt(c + 1, b);
                    gb.prototype.addAnimation.call(this, a)
                },
                activate: function (a, b) {
                    this._animationRegisterCache = b.animationRegisterCache
                },
                deactivate: function (a, b) {
                    if (null != this._animationRegisterCache) {
                        a = a.get_context3D();
                        var c = this._animationRegisterCache.get_vertexAttributesOffset();
                        for (b = this._animationRegisterCache.get_numUsedStreams(); c < b;) {
                            var d = c++;
                            a.setVertexBufferAt(d, null)
                        }
                    }
                },
                getAGALVertexCode: function (a, b, c, d) {
                    this._animationRegisterCache = null != a.animationRegisterCache ?
                        a.animationRegisterCache : a.animationRegisterCache = new $b(d);
                    this._animationRegisterCache.set_vertexConstantOffset(a.get_numUsedVertexConstants());
                    this._animationRegisterCache.set_vertexAttributesOffset(a.get_numUsedStreams());
                    this._animationRegisterCache.set_varyingsOffset(a.get_numUsedVaryings());
                    this._animationRegisterCache.set_fragmentConstantOffset(a.get_numUsedFragmentConstants());
                    this._animationRegisterCache.hasUVNode = this.hasUVNode;
                    this._animationRegisterCache.needVelocity = this.needVelocity;
                    this._animationRegisterCache.hasBillboard = this.hasBillboard;
                    this._animationRegisterCache.sourceRegisters = b;
                    this._animationRegisterCache.targetRegisters = c;
                    this._animationRegisterCache.needFragmentAnimation = a.get_needFragmentAnimation();
                    this._animationRegisterCache.needUVAnimation = a.get_needUVAnimation();
                    this._animationRegisterCache.hasColorAddNode = this.hasColorAddNode;
                    this._animationRegisterCache.hasColorMulNode = this.hasColorMulNode;
                    this._animationRegisterCache.reset();
                    b = "" + this._animationRegisterCache.getInitCode();
                    for (c = this._particleNodes.iterator(); c.hasNext();) d = c.next(), d.get_priority() < Uc.POST_PRIORITY && (b += d.getAGALVertexCode(a, this._animationRegisterCache));
                    b += this._animationRegisterCache.getCombinationCode();
                    for (c = this._particleNodes.iterator(); c.hasNext();) d = c.next(), d.get_priority() >= Uc.POST_PRIORITY && d.get_priority() < Uc.COLOR_PRIORITY && (b += d.getAGALVertexCode(a, this._animationRegisterCache));
                    b += this._animationRegisterCache.initColorRegisters();
                    for (c = this._particleNodes.iterator(); c.hasNext();) d =
                        c.next(), d.get_priority() >= Uc.COLOR_PRIORITY && (b += d.getAGALVertexCode(a, this._animationRegisterCache));
                    return b += this._animationRegisterCache.getColorPassCode()
                },
                getAGALUVCode: function (a, b, c) {
                    var d = "";
                    if (this.hasUVNode) {
                        this._animationRegisterCache.setUVSourceAndTarget(b, c);
                        d += "mov " + n.string(this._animationRegisterCache.uvTarget) + ".xy," + this._animationRegisterCache.uvAttribute.toString() + "\n";
                        for (b = this._particleNodes.iterator(); b.hasNext();) c = b.next(), d += c.getAGALUVCode(a, this._animationRegisterCache);
                        d += "mov " + this._animationRegisterCache.uvVar.toString() + "," + n.string(this._animationRegisterCache.uvTarget) + ".xy\n"
                    } else d += "mov " + c + "," + b + "\n";
                    return d
                },
                getAGALFragmentCode: function (a, b, c) {
                    return this._animationRegisterCache.getColorCombinationCode(b)
                },
                doneAGALCode: function (a) {
                    this._animationRegisterCache.setDataLength();
                    this._animationRegisterCache.setVertexConst(this._animationRegisterCache.vertexZeroConst.get_index(), 0, 1, 2, 0)
                },
                get_usesCPU: function () {
                    return !1
                },
                generateAnimationSubGeometries: function (a) {
                    if (null ==
                        this.initParticleFunc) throw new Fa("no initParticleFunc set");
                    var b = a.get_geometry() instanceof ug ? a.get_geometry() : null;
                    if (null == b) throw new Fa("Particle animation can only be performed on a ParticleGeometry object");
                    var c = null,
                        d = !1;
                    var e = 0;
                    for (var f = a.get_subMeshes().get_length(); e < f;) {
                        var h = e++;
                        var r = a.get_subMeshes().get(h);
                        h = r.get_subGeometry();
                        if (a.get_shareAnimationGeometry() && (c = this._animationSubGeometries.h[h.__id__], null != c)) {
                            r.animationSubGeometry = c;
                            continue
                        }
                        c = r.animationSubGeometry = new sh;
                        a.get_shareAnimationGeometry() && this._animationSubGeometries.set(h, c);
                        d = !0;
                        c.createVertexData(h.get_numVertices(), this._totalLenOfOneVertex)
                    }
                    if (0 != d) {
                        d = b.particles;
                        var m = d.get_length();
                        b = b.numParticles;
                        var C = new Sj,
                            wa = null,
                            k;
                        C.total = b;
                        C.startTime = 0;
                        C.duration = 1E3;
                        C.delay = .1;
                        for (var g = h = 0; h < b;) {
                            C.index = h;
                            this.initParticleFunc(C);
                            for (e = this._localStaticNodes.iterator(); e.hasNext();) e.next().generatePropertyOfOneParticle(C);
                            for (; ;) {
                                g < m ? (wa = d.get(g), e = wa.particleIndex == h) : e = !1;
                                if (!e) break;
                                for (r = a.get_subMeshes().iterator(); r.hasNext();)
                                    if (e =
                                        r.next(), e.get_subGeometry() == wa.subGeometry) {
                                        c = e.animationSubGeometry;
                                        break
                                    }
                                var q = wa.numVertices;
                                var n = c.get_vertexData();
                                var uc = q * this._totalLenOfOneVertex;
                                var l = c.numProcessedVertices * this._totalLenOfOneVertex;
                                for (var p = this._localStaticNodes.iterator(); p.hasNext();) {
                                    e = p.next();
                                    var y = e.get_oneData();
                                    r = e.get_dataLength();
                                    var v = l + e.dataOffset;
                                    for (k = 0; k < uc;) {
                                        var t = v + k;
                                        e = 0;
                                        for (f = r; e < f;) {
                                            var B = e++;
                                            n.set(t + B, y.get(B))
                                        }
                                        k += this._totalLenOfOneVertex
                                    }
                                }
                                0 < this._localDynamicNodes.get_length() && c.animationParticles.push(new Tj(h,
                                    C.startTime, C.duration, C.delay, wa));
                                c.numProcessedVertices += q;
                                ++g
                            }
                            ++h
                        }
                    }
                },
                __class__: Uc,
                __properties__: l(gb.prototype.__properties__, {
                    get_particleNodes: "get_particleNodes"
                })
            });
            var pd = function (a) {
                this._animatorSubGeometries = new N;
                this._totalLenOfOneVertex = 0;
                this._timeParticleStates = D.toObjectVector(null);
                this._animatorParticleStates = D.toObjectVector(null);
                this._animationParticleStates = D.toObjectVector(null);
                vb.call(this, a);
                this._particleAnimationSet = a;
                var b;
                for (b = this._particleAnimationSet.get_particleNodes().iterator(); b.hasNext();) {
                    var c =
                        b.next();
                    a = T.__cast(this.getAnimationState(c), cd);
                    2 == c.get_mode() ? (this._animatorParticleStates.push(a), c.dataOffset = this._totalLenOfOneVertex, this._totalLenOfOneVertex += c.get_dataLength()) : this._animationParticleStates.push(a);
                    a.get_needUpdateTime() && this._timeParticleStates.push(a)
                }
            };
            g["away3d.animators.ParticleAnimator"] = pd;
            pd.__name__ = "away3d.animators.ParticleAnimator";
            pd.__interfaces__ = [he];
            pd.__super__ = vb;
            pd.prototype = l(vb.prototype, {
                setRenderState: function (a, b, c, d, e) {
                    c = this._particleAnimationSet._animationRegisterCache;
                    var f = b instanceof vg ? b : null;
                    if (null == f) throw new Fa("Must be subMesh");
                    null == f.animationSubGeometry && this._particleAnimationSet.generateAnimationSubGeometries(f.get_parentMesh());
                    var h = f.animationSubGeometry;
                    for (d = this._animationParticleStates.iterator(); d.hasNext();) {
                        var r = d.next();
                        r.setRenderState(a, b, h, c, e)
                    }
                    null == f.animatorSubGeometry && 0 < this._animatorParticleStates.get_length() && this.generateAnimatorSubGeometry(f);
                    f = f.animatorSubGeometry;
                    for (d = this._animatorParticleStates.iterator(); d.hasNext();) r =
                        d.next(), r.setRenderState(a, b, f, c, e);
                    a.get_context3D().setProgramConstantsFromVector(1, c.get_vertexConstantOffset(), c.vertexConstantData, c.get_numVertexConstant());
                    0 < c.get_numFragmentConstant() && a.get_context3D().setProgramConstantsFromVector(0, c.get_fragmentConstantOffset(), c.fragmentConstantData, c.get_numFragmentConstant())
                },
                testGPUCompatibility: function (a) {
                },
                start: function () {
                    vb.prototype.start.call(this);
                    for (var a = this._timeParticleStates.iterator(); a.hasNext();) a.next().offset(this._absoluteTime)
                },
                updateDeltaTime: function (a) {
                    this._absoluteTime += a;
                    for (a = this._timeParticleStates.iterator(); a.hasNext();) a.next().update(this._absoluteTime)
                },
                generateAnimatorSubGeometry: function (a) {
                    var b = a.get_subGeometry(),
                        c = this._animatorSubGeometries,
                        d = new sh;
                    c.set(b, d);
                    c = a.animatorSubGeometry = d;
                    c.createVertexData(b.get_numVertices(), this._totalLenOfOneVertex);
                    c.animationParticles = a.animationSubGeometry.animationParticles
                },
                __class__: pd
            });
            var Rd = function (a) {
                this._profile = a
            };
            g["away3d.materials.compilation.ShaderRegisterCache"] =
                Rd;
            Rd.__name__ = "away3d.materials.compilation.ShaderRegisterCache";
            Rd.prototype = {
                reset: function () {
                    this._fragmentTempCache = new ic("ft", 8, !1);
                    this._vertexTempCache = new ic("vt", 8, !1);
                    this._varyingCache = new ic("v", 8);
                    this._textureCache = new ic("fs", 8);
                    this._vertexAttributesCache = new ic("va", 8);
                    this._fragmentConstantsCache = new ic("fc", 28);
                    this._vertexConstantsCache = new ic("vc", 128);
                    this._fragmentOutputRegister = new Nb("oc", -1);
                    this._vertexOutputRegister = new Nb("op", -1);
                    for (var a = this._numUsedFragmentConstants =
                        this._numUsedVaryings = this._numUsedTextures = this._numUsedStreams = this._numUsedVertexConstants = 0, b = this._vertexAttributesOffset; a < b;) a++, this.getFreeVertexAttribute();
                    a = 0;
                    for (b = this._vertexConstantOffset; a < b;) a++, this.getFreeVertexConstant();
                    a = 0;
                    for (b = this._varyingsOffset; a < b;) a++, this.getFreeVarying();
                    a = 0;
                    for (b = this._fragmentConstantOffset; a < b;) a++, this.getFreeFragmentConstant()
                },
                dispose: function () {
                    this._fragmentTempCache.dispose();
                    this._vertexTempCache.dispose();
                    this._varyingCache.dispose();
                    this._fragmentConstantsCache.dispose();
                    this._vertexAttributesCache.dispose();
                    this._vertexOutputRegister = this._fragmentOutputRegister = this._vertexAttributesCache = this._fragmentConstantsCache = this._varyingCache = this._vertexTempCache = this._fragmentTempCache = null
                },
                addFragmentTempUsages: function (a, b) {
                    this._fragmentTempCache.addUsage(a, b)
                },
                removeFragmentTempUsage: function (a) {
                    this._fragmentTempCache.removeUsage(a)
                },
                addVertexTempUsages: function (a, b) {
                    this._vertexTempCache.addUsage(a, b)
                },
                removeVertexTempUsage: function (a) {
                    this._vertexTempCache.removeUsage(a)
                },
                getFreeFragmentVectorTemp: function () {
                    return this._fragmentTempCache.requestFreeVectorReg()
                },
                getFreeFragmentSingleTemp: function () {
                    return this._fragmentTempCache.requestFreeRegComponent()
                },
                getFreeVarying: function () {
                    var a = this._varyingCache.requestFreeVectorReg();
                    ++this._numUsedVaryings;
                    return a
                },
                getFreeFragmentConstant: function () {
                    var a = this._fragmentConstantsCache.requestFreeVectorReg();
                    ++this._numUsedFragmentConstants;
                    return a
                },
                getFreeVertexConstant: function () {
                    var a = this._vertexConstantsCache.requestFreeVectorReg();
                    ++this._numUsedVertexConstants;
                    return a
                },
                getFreeVertexVectorTemp: function () {
                    return this._vertexTempCache.requestFreeVectorReg()
                },
                getFreeVertexSingleTemp: function () {
                    return this._vertexTempCache.requestFreeRegComponent()
                },
                getFreeVertexAttribute: function () {
                    var a = this._vertexAttributesCache.requestFreeVectorReg();
                    ++this._numUsedStreams;
                    return a
                },
                getFreeTextureReg: function () {
                    var a = this._textureCache.requestFreeVectorReg();
                    ++this._numUsedTextures;
                    return a
                },
                get_vertexConstantOffset: function () {
                    return this._vertexConstantOffset
                },
                set_vertexConstantOffset: function (a) {
                    return this._vertexConstantOffset = a
                },
                get_vertexAttributesOffset: function () {
                    return this._vertexAttributesOffset
                },
                set_vertexAttributesOffset: function (a) {
                    return this._vertexAttributesOffset = a
                },
                set_varyingsOffset: function (a) {
                    return this._varyingsOffset = a
                },
                get_fragmentConstantOffset: function () {
                    return this._fragmentConstantOffset
                },
                set_fragmentConstantOffset: function (a) {
                    return this._fragmentConstantOffset = a
                },
                get_fragmentOutputRegister: function () {
                    return this._fragmentOutputRegister
                },
                get_numUsedVertexConstants: function () {
                    return this._numUsedVertexConstants
                },
                get_numUsedFragmentConstants: function () {
                    return this._numUsedFragmentConstants
                },
                get_numUsedStreams: function () {
                    return this._numUsedStreams
                },
                get_numUsedTextures: function () {
                    return this._numUsedTextures
                },
                get_numUsedVaryings: function () {
                    return this._numUsedVaryings
                },
                __class__: Rd,
                __properties__: {
                    set_varyingsOffset: "set_varyingsOffset",
                    get_numUsedVaryings: "get_numUsedVaryings",
                    get_numUsedTextures: "get_numUsedTextures",
                    get_numUsedStreams: "get_numUsedStreams",
                    get_numUsedFragmentConstants: "get_numUsedFragmentConstants",
                    get_numUsedVertexConstants: "get_numUsedVertexConstants",
                    get_fragmentOutputRegister: "get_fragmentOutputRegister",
                    set_fragmentConstantOffset: "set_fragmentConstantOffset",
                    get_fragmentConstantOffset: "get_fragmentConstantOffset",
                    set_vertexAttributesOffset: "set_vertexAttributesOffset",
                    get_vertexAttributesOffset: "get_vertexAttributesOffset",
                    set_vertexConstantOffset: "set_vertexConstantOffset",
                    get_vertexConstantOffset: "get_vertexConstantOffset"
                }
            };
            var $b = function (a) {
                this.fragmentConstantData = D.toFloatVector(null);
                this.vertexConstantData = D.toFloatVector(null);
                this.indexDictionary = new N;
                this._profile = a
            };
            g["away3d.animators.data.AnimationRegisterCache"] = $b;
            $b.__name__ = "away3d.animators.data.AnimationRegisterCache";
            $b.__super__ = Rd;
            $b.prototype = l(Rd.prototype, {
                reset: function () {
                    Rd.prototype.reset.call(this);
                    this.rotationRegisters = D.toObjectVector(null);
                    this.positionAttribute = this.getRegisterFromString(this.sourceRegisters.get(0));
                    this.scaleAndRotateTarget =
                        this.getRegisterFromString(this.targetRegisters.get(0));
                    this.addVertexTempUsages(this.scaleAndRotateTarget, 1);
                    for (var a = 1, b = this.targetRegisters.get_length(); a < b;) {
                        var c = a++;
                        this.rotationRegisters.push(this.getRegisterFromString(this.targetRegisters.get(c)));
                        this.addVertexTempUsages(this.rotationRegisters.get(c - 1), 1)
                    }
                    this.scaleAndRotateTarget = new Nb(this.scaleAndRotateTarget.get_regName(), this.scaleAndRotateTarget.get_index());
                    this.vertexZeroConst = this.getFreeVertexConstant();
                    this.vertexZeroConst =
                        new Nb(this.vertexZeroConst.get_regName(), this.vertexZeroConst.get_index(), 0);
                    this.vertexOneConst = new Nb(this.vertexZeroConst.get_regName(), this.vertexZeroConst.get_index(), 1);
                    this.vertexTwoConst = new Nb(this.vertexZeroConst.get_regName(), this.vertexZeroConst.get_index(), 2);
                    this.positionTarget = this.getFreeVertexVectorTemp();
                    this.addVertexTempUsages(this.positionTarget, 1);
                    this.positionTarget = new Nb(this.positionTarget.get_regName(), this.positionTarget.get_index());
                    this.needVelocity ? (this.velocityTarget =
                        this.getFreeVertexVectorTemp(), this.addVertexTempUsages(this.velocityTarget, 1), this.velocityTarget = new Nb(this.velocityTarget.get_regName(), this.velocityTarget.get_index()), this.vertexTime = new Nb(this.velocityTarget.get_regName(), this.velocityTarget.get_index(), 3), this.vertexLife = new Nb(this.positionTarget.get_regName(), this.positionTarget.get_index(), 3)) : (a = this.getFreeVertexVectorTemp(), this.addVertexTempUsages(a, 1), this.vertexTime = new Nb(a.get_regName(), a.get_index(), 0), this.vertexLife = new Nb(a.get_regName(),
                        a.get_index(), 1))
                },
                setUVSourceAndTarget: function (a, b) {
                    this.uvVar = this.getRegisterFromString(b);
                    this.uvAttribute = this.getRegisterFromString(a);
                    this.uvTarget = new Nb(this.positionTarget.get_regName(), this.positionTarget.get_index())
                },
                setRegisterIndex: function (a, b, c) {
                    var d = null != this.indexDictionary.h.__keys__[a.__id__] ? this.indexDictionary.h[a.__id__] : D.toIntVector(null, 8, !0);
                    d.set(b, c);
                    this.indexDictionary.set(a, d)
                },
                getRegisterIndex: function (a, b) {
                    return this.indexDictionary.h[a.__id__].get(b)
                },
                getInitCode: function () {
                    for (var a =
                        "", b = 0, c = this.sourceRegisters.get_length(); b < c;) {
                        var d = b++;
                        a += "mov " + this.targetRegisters.get(d) + "," + this.sourceRegisters.get(d) + "\n"
                    }
                    a += "mov " + n.string(this.positionTarget) + ".xyz," + this.vertexZeroConst.toString() + "\n";
                    this.needVelocity && (a += "mov " + n.string(this.velocityTarget) + ".xyz," + this.vertexZeroConst.toString() + "\n");
                    return a
                },
                getCombinationCode: function () {
                    return "add " + n.string(this.scaleAndRotateTarget) + ".xyz," + n.string(this.scaleAndRotateTarget) + ".xyz," + n.string(this.positionTarget) + ".xyz\n"
                },
                initColorRegisters: function () {
                    var a = "";
                    this.hasColorMulNode && (this.colorMulTarget = this.getFreeVertexVectorTemp(), this.addVertexTempUsages(this.colorMulTarget, 1), this.colorMulVary = this.getFreeVarying(), a += "mov " + n.string(this.colorMulTarget) + "," + n.string(this.vertexOneConst) + "\n");
                    this.hasColorAddNode && (this.colorAddTarget = this.getFreeVertexVectorTemp(), this.addVertexTempUsages(this.colorAddTarget, 1), this.colorAddVary = this.getFreeVarying(), a += "mov " + n.string(this.colorAddTarget) + "," + n.string(this.vertexZeroConst) +
                        "\n");
                    return a
                },
                getColorPassCode: function () {
                    var a = "";
                    this.needFragmentAnimation && (this.hasColorAddNode || this.hasColorMulNode) && (this.hasColorMulNode && (a += "mov " + n.string(this.colorMulVary) + "," + n.string(this.colorMulTarget) + "\n"), this.hasColorAddNode && (a += "mov " + n.string(this.colorAddVary) + "," + n.string(this.colorAddTarget) + "\n"));
                    return a
                },
                getColorCombinationCode: function (a) {
                    var b = "";
                    this.needFragmentAnimation && (this.hasColorAddNode || this.hasColorMulNode) && (a = this.getRegisterFromString(a), this.addFragmentTempUsages(a,
                        1), this.hasColorMulNode && (b += "mul " + n.string(a) + "," + n.string(a) + "," + n.string(this.colorMulVary) + "\n"), this.hasColorAddNode && (b += "add " + n.string(a) + "," + n.string(a) + "," + n.string(this.colorAddVary) + "\n"));
                    return b
                },
                getRegisterFromString: function (a) {
                    var b = new ra("([a-z]+)([\\d]+)", "");
                    b.match(a);
                    return new Nb(b.matched(1), n.parseInt(b.matched(2)))
                },
                get_numVertexConstant: function () {
                    return this._numVertexConstant
                },
                get_numFragmentConstant: function () {
                    return this._numFragmentConstant
                },
                setDataLength: function () {
                    this._numVertexConstant =
                        this._numUsedVertexConstants - this._vertexConstantOffset;
                    this._numFragmentConstant = this._numUsedFragmentConstants - this._fragmentConstantOffset;
                    this.vertexConstantData.set_length(4 * this._numVertexConstant);
                    this.fragmentConstantData.set_length(4 * this._numFragmentConstant)
                },
                setVertexConst: function (a, b, c, d, e) {
                    null == e && (e = 0);
                    null == d && (d = 0);
                    null == c && (c = 0);
                    null == b && (b = 0);
                    a = 4 * (a - this._vertexConstantOffset);
                    this.vertexConstantData.set(a++, b);
                    this.vertexConstantData.set(a++, c);
                    this.vertexConstantData.set(a++,
                        d);
                    this.vertexConstantData.set(a, e)
                },
                __class__: $b,
                __properties__: l(Rd.prototype.__properties__, {
                    get_numFragmentConstant: "get_numFragmentConstant",
                    get_numVertexConstant: "get_numVertexConstant"
                })
            });
            var sh = function () {
                this.animationParticles = D.toObjectVector(null);
                this.numProcessedVertices = 0;
                this._bufferDirty = D.toBoolVector(null, 8);
                this._bufferContext = D.toObjectVector(null, 8);
                this._vertexBuffer = D.toObjectVector(null, 8);
                this._bufferDirty.set(0, !0);
                this._bufferDirty.set(1, !0);
                this._bufferDirty.set(2, !0);
                this._bufferDirty.set(3, !0);
                this._bufferDirty.set(4, !0);
                this._bufferDirty.set(5, !0);
                this._bufferDirty.set(6, !0);
                this._bufferDirty.set(7, !0)
            };
            g["away3d.animators.data.AnimationSubGeometry"] = sh;
            sh.__name__ = "away3d.animators.data.AnimationSubGeometry";
            sh.prototype = {
                createVertexData: function (a, b) {
                    this._numVertices = a;
                    this._totalLenOfOneVertex = b;
                    this._vertexData = D.toFloatVector(null, a * b)
                },
                activateVertexBuffer: function (a, b, c, d) {
                    var e = c.get_stage3DIndex();
                    c = c.get_context3D();
                    var f = this._vertexBuffer.get(e);
                    if (null == f || this._bufferContext.get(e) != c) f = this._vertexBuffer.set(e, c.createVertexBuffer(this._numVertices, this._totalLenOfOneVertex)), this._bufferContext.set(e, c), this._bufferDirty.set(e, !0);
                    this._bufferDirty.get(e) && (f.uploadFromVector(this._vertexData, 0, this._numVertices), this._bufferDirty.set(e, !1));
                    c.setVertexBufferAt(a, f, b, d)
                },
                invalidateBuffer: function () {
                    this._bufferDirty.set(0, !0);
                    this._bufferDirty.set(1, !0);
                    this._bufferDirty.set(2, !0);
                    this._bufferDirty.set(3, !0);
                    this._bufferDirty.set(4, !0);
                    this._bufferDirty.set(5, !0);
                    this._bufferDirty.set(6, !0);
                    this._bufferDirty.set(7, !0)
                },
                get_vertexData: function () {
                    return this._vertexData
                },
                get_totalLenOfOneVertex: function () {
                    return this._totalLenOfOneVertex
                },
                __class__: sh,
                __properties__: {
                    get_totalLenOfOneVertex: "get_totalLenOfOneVertex",
                    get_vertexData: "get_vertexData"
                }
            };
            var Tj = function (a, b, c, d, e) {
                this.index = a;
                this.startTime = b;
                this.totalTime = c + d;
                this.duration = c;
                this.delay = d;
                this.startVertexIndex = e.startVertexIndex;
                this.numVertices = e.numVertices
            };
            g["away3d.animators.data.ParticleAnimationData"] =
                Tj;
            Tj.__name__ = "away3d.animators.data.ParticleAnimationData";
            Tj.prototype = {
                __class__: Tj
            };
            var Sj = function () {
                this.nodes = new Ha
            };
            g["away3d.animators.data.ParticleProperties"] = Sj;
            Sj.__name__ = "away3d.animators.data.ParticleProperties";
            Sj.prototype = {
                __class__: Sj
            };
            var cf = function () {
                B.call(this)
            };
            g["away3d.animators.nodes.AnimationNodeBase"] = cf;
            cf.__name__ = "away3d.animators.nodes.AnimationNodeBase";
            cf.__interfaces__ = [t];
            cf.__super__ = B;
            cf.prototype = l(B.prototype, {
                get_stateConstructor: function () {
                    return this._stateConstructor
                },
                __class__: cf,
                __properties__: l(B.prototype.__properties__, {
                    get_stateConstructor: "get_stateConstructor"
                })
            });
            var Zb = function (a, b, c, d) {
                null == d && (d = 1);
                this._dataLength = 3;
                B.call(this);
                a += Zb.MODES[b];
                this.set_name(a);
                this._mode = b;
                this._priority = d;
                this._dataLength = c;
                this._oneData = D.toFloatVector(null, this._dataLength, !0)
            };
            g["away3d.animators.nodes.ParticleNodeBase"] = Zb;
            Zb.__name__ = "away3d.animators.nodes.ParticleNodeBase";
            Zb.__super__ = cf;
            Zb.prototype = l(cf.prototype, {
                get_mode: function () {
                    return this._mode
                },
                get_priority: function () {
                    return this._priority
                },
                get_dataLength: function () {
                    return this._dataLength
                },
                get_oneData: function () {
                    return this._oneData
                },
                getAGALVertexCode: function (a, b) {
                    return ""
                },
                getAGALUVCode: function (a, b) {
                    return ""
                },
                generatePropertyOfOneParticle: function (a) {
                },
                processAnimationSetting: function (a) {
                },
                __class__: Zb,
                __properties__: l(cf.prototype.__properties__, {
                    get_oneData: "get_oneData",
                    get_dataLength: "get_dataLength",
                    get_priority: "get_priority",
                    get_mode: "get_mode"
                })
            });
            var uh = function (a, b, c, d) {
                null ==
                c && (c = !1);
                null == b && (b = !0);
                this._stateConstructor = function (a, b) {
                    return new th(a, b)
                };
                this._usesMultiplier = b;
                this._usesOffset = c;
                this._initialColor = d;
                null == this._initialColor && (this._initialColor = new ib);
                Zb.call(this, "ParticleInitialColor", a, this._usesMultiplier && this._usesOffset ? 8 : 4, Uc.COLOR_PRIORITY)
            };
            g["away3d.animators.nodes.ParticleInitialColorNode"] = uh;
            uh.__name__ = "away3d.animators.nodes.ParticleInitialColorNode";
            uh.__super__ = Zb;
            uh.prototype = l(Zb.prototype, {
                getAGALVertexCode: function (a, b) {
                    a = "";
                    if (b.needFragmentAnimation) {
                        if (this._usesMultiplier) {
                            var c = 0 == this._mode ? b.getFreeVertexConstant() : b.getFreeVertexAttribute();
                            b.setRegisterIndex(this, 0, c.get_index());
                            a += "mul " + n.string(b.colorMulTarget) + "," + n.string(c) + "," + n.string(b.colorMulTarget) + "\n"
                        }
                        this._usesOffset && (c = 1 == this._mode ? b.getFreeVertexAttribute() : b.getFreeVertexConstant(), b.setRegisterIndex(this, 1, c.get_index()), a += "add " + n.string(b.colorAddTarget) + "," + n.string(c) + "," + n.string(b.colorAddTarget) + "\n")
                    }
                    return a
                },
                processAnimationSetting: function (a) {
                    this._usesMultiplier &&
                    (a.hasColorMulNode = !0);
                    this._usesOffset && (a.hasColorAddNode = !0)
                },
                generatePropertyOfOneParticle: function (a) {
                    a = a.nodes.h.ColorInitialColorTransform;
                    if (null == a) throw new Fa("there is no ColorInitialColorTransform in param!");
                    var b = 0;
                    this._usesMultiplier && (this._oneData.set(b++, a.redMultiplier), this._oneData.set(b++, a.greenMultiplier), this._oneData.set(b++, a.blueMultiplier), this._oneData.set(b++, a.alphaMultiplier));
                    this._usesOffset && (this._oneData.set(b++, a.redOffset / 255), this._oneData.set(b++, a.greenOffset /
                        255), this._oneData.set(b++, a.blueOffset / 255), this._oneData.set(b++, a.alphaOffset / 255))
                },
                __class__: uh
            });
            var wh = function (a, b) {
                Zb.call(this, "ParticlePosition", a, 3);
                this._stateConstructor = function (a, b) {
                    return new vh(a, b)
                };
                this._position = b;
                null == this._position && (this._position = new Q)
            };
            g["away3d.animators.nodes.ParticlePositionNode"] = wh;
            wh.__name__ = "away3d.animators.nodes.ParticlePositionNode";
            wh.__super__ = Zb;
            wh.prototype = l(Zb.prototype, {
                getAGALVertexCode: function (a, b) {
                    a = 0 == this._mode ? b.getFreeVertexConstant() :
                        b.getFreeVertexAttribute();
                    b.setRegisterIndex(this, 0, a.get_index());
                    return "add " + n.string(b.positionTarget) + ".xyz," + n.string(a) + ".xyz," + n.string(b.positionTarget) + ".xyz\n"
                },
                generatePropertyOfOneParticle: function (a) {
                    a = a.nodes.h.PositionVector3D;
                    if (null == a) throw new Fa("there is no PositionVector3D in param!");
                    this._oneData.set(0, a.x);
                    this._oneData.set(1, a.y);
                    this._oneData.set(2, a.z)
                },
                __class__: wh
            });
            var rh = function (a, b, c) {
                null == c && (c = !1);
                null == b && (b = !1);
                null == a && (a = !1);
                this._stateConstructor = function (a,
                                                   b) {
                    return new xh(a, b)
                };
                this._usesDuration = a;
                this._usesLooping = b;
                this._usesDelay = c;
                Zb.call(this, "ParticleTime", 1, 4, 0)
            };
            g["away3d.animators.nodes.ParticleTimeNode"] = rh;
            rh.__name__ = "away3d.animators.nodes.ParticleTimeNode";
            rh.__super__ = Zb;
            rh.prototype = l(Zb.prototype, {
                getAGALVertexCode: function (a, b) {
                    a = b.getFreeVertexAttribute();
                    b.setRegisterIndex(this, 0, a.get_index());
                    var c = b.getFreeVertexConstant();
                    b.setRegisterIndex(this, 1, c.get_index());
                    c = "sub " + n.string(b.vertexTime) + "," + n.string(c) + "," + n.string(a) +
                        ".x\n";
                    var d = b.getFreeVertexSingleTemp();
                    c += "sge " + n.string(d) + "," + n.string(b.vertexTime) + "," + n.string(b.vertexZeroConst) + "\n";
                    c += "mul " + n.string(b.scaleAndRotateTarget) + ".xyz," + n.string(b.scaleAndRotateTarget) + ".xyz," + n.string(d) + "\n";
                    this._usesDuration && (this._usesLooping ? (d = b.getFreeVertexSingleTemp(), this._usesDelay ? (c += "div " + n.string(d) + "," + n.string(b.vertexTime) + "," + n.string(a) + ".z\n", c += "frc " + n.string(d) + "," + n.string(d) + "\n", c += "mul " + n.string(b.vertexTime) + "," + n.string(d) + "," + n.string(a) +
                        ".z\n", c += "slt " + n.string(d) + "," + n.string(b.vertexTime) + "," + n.string(a) + ".y\n", c += "mul " + n.string(b.scaleAndRotateTarget) + ".xyz," + n.string(b.scaleAndRotateTarget) + ".xyz," + n.string(d) + "\n") : (c += "mul " + n.string(d) + "," + n.string(b.vertexTime) + "," + n.string(a) + ".w\n", c += "frc " + n.string(d) + "," + n.string(d) + "\n", c += "mul " + n.string(b.vertexTime) + "," + n.string(d) + "," + n.string(a) + ".y\n")) : (d = b.getFreeVertexSingleTemp(), c += "sge " + n.string(d) + "," + n.string(a) + ".y," + n.string(b.vertexTime) + "\n", c += "mul " + n.string(b.scaleAndRotateTarget) +
                        ".xyz," + n.string(b.scaleAndRotateTarget) + ".xyz," + n.string(d) + "\n"));
                    return c += "mul " + n.string(b.vertexLife) + "," + n.string(b.vertexTime) + "," + n.string(a) + ".w\n"
                },
                generatePropertyOfOneParticle: function (a) {
                    this._oneData.set(0, a.startTime);
                    this._oneData.set(1, a.duration);
                    this._oneData.set(2, a.delay + a.duration);
                    this._oneData.set(3, 1 / a.duration)
                },
                __class__: rh
            });
            var yh = function () {
            };
            g["away3d.animators.states.IAnimationState"] = yh;
            yh.__name__ = "away3d.animators.states.IAnimationState";
            yh.__isInterface__ = !0;
            yh.prototype = {
                __class__: yh,
                __properties__: {
                    get_positionDelta: "get_positionDelta"
                }
            };
            var df = function (a, b) {
                this._time = this._startTime = 0;
                this._positionDeltaDirty = !0;
                this._rootDelta = new Q;
                this._animator = a;
                this._animationNode = b
            };
            g["away3d.animators.states.AnimationStateBase"] = df;
            df.__name__ = "away3d.animators.states.AnimationStateBase";
            df.__interfaces__ = [yh];
            df.prototype = {
                get_positionDelta: function () {
                    this._positionDeltaDirty && this.updatePositionDelta();
                    return this._rootDelta
                },
                offset: function (a) {
                    this._startTime = a;
                    this._positionDeltaDirty = !0
                },
                update: function (a) {
                    this._time != a - this._startTime && this.updateTime(a)
                },
                updateTime: function (a) {
                    this._time = a - this._startTime;
                    this._positionDeltaDirty = !0
                },
                updatePositionDelta: function () {
                },
                __class__: df,
                __properties__: {
                    get_positionDelta: "get_positionDelta"
                }
            };
            var cd = function (a, b, c) {
                null == c && (c = !1);
                this._dynamicPropertiesDirty = new N;
                this._dynamicProperties = D.toObjectVector(null);
                df.call(this, a, b);
                this._particleNode = b;
                this._needUpdateTime = c
            };
            g["away3d.animators.states.ParticleStateBase"] = cd;
            cd.__name__ =
                "away3d.animators.states.ParticleStateBase";
            cd.__super__ = df;
            cd.prototype = l(df.prototype, {
                get_needUpdateTime: function () {
                    return this._needUpdateTime
                },
                setRenderState: function (a, b, c, d, e) {
                },
                updateDynamicProperties: function (a) {
                    this._dynamicPropertiesDirty.set(a, !0);
                    for (var b = a.animationParticles, c = a.get_vertexData(), d = a.get_totalLenOfOneVertex(), e = this._particleNode.get_dataLength(), f = this._particleNode.dataOffset, h, r, m, C, wa = null, k = this._dynamicProperties.get_length(), g = 0, q = 0, n; g < k;) {
                        for (; ;) {
                            q < k ? (wa = b.get(q),
                                h = wa.index == g) : h = !1;
                            if (!h) break;
                            C = this._dynamicProperties.get(g);
                            h = wa.numVertices * d;
                            r = wa.startVertexIndex * d + f;
                            for (n = 0; n < h;) {
                                for (n = 0; n < h;) m = r + n, c.set(m++, C.x), c.set(m++, C.y), c.set(m++, C.z), 4 == e && c.set(m++, C.w), n += d;
                                n += d
                            }
                            ++q
                        }
                        ++g
                    }
                    a.invalidateBuffer()
                },
                __class__: cd,
                __properties__: l(df.prototype.__properties__, {
                    get_needUpdateTime: "get_needUpdateTime"
                })
            });
            var th = function (a, b) {
                cd.call(this, a, b);
                this._particleInitialColorNode = b;
                this._usesMultiplier = b._usesMultiplier;
                this._usesOffset = b._usesOffset;
                this._initialColor =
                    b._initialColor;
                this.updateColorData()
            };
            g["away3d.animators.states.ParticleInitialColorState"] = th;
            th.__name__ = "away3d.animators.states.ParticleInitialColorState";
            th.__super__ = cd;
            th.prototype = l(cd.prototype, {
                setRenderState: function (a, b, c, d, e) {
                    d.needFragmentAnimation && (1 == this._particleInitialColorNode.get_mode() ? (b = this._particleInitialColorNode.dataOffset, this._usesMultiplier && (c.activateVertexBuffer(d.getRegisterIndex(this._animationNode, 0), b, a, 4), b += 4), this._usesOffset && c.activateVertexBuffer(d.getRegisterIndex(this._animationNode,
                        1), b, a, 4)) : (this._usesMultiplier && d.setVertexConst(d.getRegisterIndex(this._animationNode, 0), this._multiplierData.x, this._multiplierData.y, this._multiplierData.z, this._multiplierData.w), this._usesOffset && d.setVertexConst(d.getRegisterIndex(this._animationNode, 1), this._offsetData.x, this._offsetData.y, this._offsetData.z, this._offsetData.w)))
                },
                updateColorData: function () {
                    0 == this._particleInitialColorNode.get_mode() && (this._usesMultiplier && (this._multiplierData = new Q(this._initialColor.redMultiplier, this._initialColor.greenMultiplier,
                        this._initialColor.blueMultiplier, this._initialColor.alphaMultiplier)), this._usesOffset && (this._offsetData = new Q(this._initialColor.redOffset / 255, this._initialColor.greenOffset / 255, this._initialColor.blueOffset / 255, this._initialColor.alphaOffset / 255)))
                },
                __class__: th
            });
            var vh = function (a, b) {
                cd.call(this, a, b);
                this._particlePositionNode = b;
                this._position = this._particlePositionNode._position
            };
            g["away3d.animators.states.ParticlePositionState"] = vh;
            vh.__name__ = "away3d.animators.states.ParticlePositionState";
            vh.__super__ = cd;
            vh.prototype = l(cd.prototype, {
                setRenderState: function (a, b, c, d, e) {
                    2 == this._particlePositionNode.get_mode() && null == this._dynamicPropertiesDirty.h.__keys__[c.__id__] && this.updateDynamicProperties(c);
                    b = d.getRegisterIndex(this._animationNode, 0);
                    0 == this._particlePositionNode.get_mode() ? d.setVertexConst(b, this._position.x, this._position.y, this._position.z) : c.activateVertexBuffer(b, this._particlePositionNode.dataOffset, a, 3)
                },
                __class__: vh
            });
            var xh = function (a, b) {
                cd.call(this, a, b, !0);
                this._particleTimeNode =
                    b
            };
            g["away3d.animators.states.ParticleTimeState"] = xh;
            xh.__name__ = "away3d.animators.states.ParticleTimeState";
            xh.__super__ = cd;
            xh.prototype = l(cd.prototype, {
                setRenderState: function (a, b, c, d, e) {
                    c.activateVertexBuffer(d.getRegisterIndex(this._animationNode, 0), this._particleTimeNode.dataOffset, a, 4);
                    a = this._time / 1E3;
                    d.setVertexConst(d.getRegisterIndex(this._animationNode, 1), a, a, a, a)
                },
                __class__: xh
            });
            var Lc = function () {
                this._aabbPointsDirty = !0;
                this._min = new Q;
                this._max = new Q
            };
            g["away3d.bounds.BoundingVolumeBase"] =
                Lc;
            Lc.__name__ = "away3d.bounds.BoundingVolumeBase";
            Lc.prototype = {
                nullify: function () {
                    this._min.x = this._min.y = this._min.z = 0;
                    this._max.x = this._max.y = this._max.z = 0;
                    this._aabbPointsDirty = !0;
                    null != this._boundingRenderable && this.updateBoundingRenderable()
                },
                fromGeometry: function (a) {
                    a = a.get_subGeometries();
                    var b = a.get_length(),
                        c, d, e;
                    if (0 < b) {
                        var f = a.get(0),
                            h = f.get_vertexData(),
                            r = f.get_vertexOffset();
                        var m = c = h.get(r);
                        var C = d = h.get(r + 1);
                        var wa = e = h.get(r + 2);
                        for (var k = 0; k < b;) {
                            f = a.get(k++);
                            h = f.get_vertexData();
                            var g =
                                h.get_length();
                            r = f.get_vertexOffset();
                            for (f = f.get_vertexStride(); r < g;) {
                                var q = h.get(r);
                                q < m ? m = q : q > c && (c = q);
                                q = h.get(r + 1);
                                q < C ? C = q : q > d && (d = q);
                                q = h.get(r + 2);
                                q < wa ? wa = q : q > e && (e = q);
                                r += f
                            }
                        }
                        this.fromExtremes(m, C, wa, c, d, e)
                    } else this.fromExtremes(0, 0, 0, 0, 0, 0)
                },
                fromSphere: function (a, b) {
                    this.fromExtremes(a.x - b, a.y - b, a.z - b, a.x + b, a.y + b, a.z + b)
                },
                fromExtremes: function (a, b, c, d, e, f) {
                    this._min.x = a;
                    this._min.y = b;
                    this._min.z = c;
                    this._max.x = d;
                    this._max.y = e;
                    this._max.z = f;
                    this._aabbPointsDirty = !0;
                    null != this._boundingRenderable &&
                    this.updateBoundingRenderable()
                },
                isInFrustum: function (a, b) {
                    throw new Wa;
                },
                rayIntersection: function (a, b, c) {
                    return -1
                },
                updateBoundingRenderable: function () {
                    throw new Wa;
                },
                transformFrom: function (a, b) {
                    throw new Wa;
                },
                __class__: Lc
            };
            var wg = function () {
                this._centerX = this._centerY = this._centerZ = this._halfExtentsX = this._halfExtentsY = this._halfExtentsZ = 0;
                Lc.call(this)
            };
            g["away3d.bounds.AxisAlignedBoundingBox"] = wg;
            wg.__name__ = "away3d.bounds.AxisAlignedBoundingBox";
            wg.__super__ = Lc;
            wg.prototype = l(Lc.prototype, {
                nullify: function () {
                    Lc.prototype.nullify.call(this);
                    this._halfExtentsX = this._halfExtentsY = this._halfExtentsZ = this._centerX = this._centerY = this._centerZ = 0
                },
                isInFrustum: function (a, b) {
                    for (var c = 0; c < b;) {
                        var d = c++;
                        d = a.get(d);
                        var e = d.a,
                            f = d.b,
                            h = d.c;
                        if (0 > e * (this._centerX + (0 > e ? -this._halfExtentsX : this._halfExtentsX)) + f * (this._centerY + (0 > f ? -this._halfExtentsY : this._halfExtentsY)) + h * (this._centerZ + (0 > h ? -this._halfExtentsZ : this._halfExtentsZ)) - d.d) return !1
                    }
                    return !0
                },
                rayIntersection: function (a, b, c) {
                    if (this.containsPoint(a)) return 0;
                    var d = a.x - this._centerX,
                        e = a.y -
                            this._centerY;
                    a = a.z - this._centerZ;
                    var f = b.x,
                        h = b.y;
                    b = b.z;
                    var r = 0,
                        m = !1;
                    if (0 > f && (r = (this._halfExtentsX - d) / f, 0 < r)) {
                        var C = e + r * h;
                        var wa = a + r * b;
                        C > -this._halfExtentsY && C < this._halfExtentsY && wa > -this._halfExtentsZ && wa < this._halfExtentsZ && (c.x = 1, c.y = 0, c.z = 0, m = !0)
                    }
                    !m && 0 < f && (r = (-this._halfExtentsX - d) / f, 0 < r && (C = e + r * h, wa = a + r * b, C > -this._halfExtentsY && C < this._halfExtentsY && wa > -this._halfExtentsZ && wa < this._halfExtentsZ && (c.x = -1, c.y = 0, c.z = 0, m = !0)));
                    if (!m && 0 > h && (r = (this._halfExtentsY - e) / h, 0 < r)) {
                        var k = d + r * f;
                        wa = a + r * b;
                        k > -this._halfExtentsX && k < this._halfExtentsX && wa > -this._halfExtentsZ && wa < this._halfExtentsZ && (c.x = 0, c.y = 1, c.z = 0, m = !0)
                    }
                    !m && 0 < h && (r = (-this._halfExtentsY - e) / h, 0 < r && (k = d + r * f, wa = a + r * b, k > -this._halfExtentsX && k < this._halfExtentsX && wa > -this._halfExtentsZ && wa < this._halfExtentsZ && (c.x = 0, c.y = -1, c.z = 0, m = !0)));
                    !m && 0 > b && (r = (this._halfExtentsZ - a) / b, 0 < r && (k = d + r * f, C = e + r * h, C > -this._halfExtentsY && C < this._halfExtentsY && k > -this._halfExtentsX && k < this._halfExtentsX && (c.x = 0, c.y = 0, c.z = 1, m = !0)));
                    !m && 0 < b && (r = (-this._halfExtentsZ -
                        a) / b, 0 < r && (k = d + r * f, C = e + r * h, C > -this._halfExtentsY && C < this._halfExtentsY && k > -this._halfExtentsX && k < this._halfExtentsX && (c.x = 0, c.y = 0, c.z = -1, m = !0)));
                    return m ? r : -1
                },
                containsPoint: function (a) {
                    var b = a.x - this._centerX,
                        c = a.y - this._centerY;
                    a = a.z - this._centerZ;
                    return b <= this._halfExtentsX && b >= -this._halfExtentsX && c <= this._halfExtentsY && c >= -this._halfExtentsY && a <= this._halfExtentsZ ? a >= -this._halfExtentsZ : !1
                },
                fromExtremes: function (a, b, c, d, e, f) {
                    this._centerX = .5 * (d + a);
                    this._centerY = .5 * (e + b);
                    this._centerZ = .5 * (f +
                        c);
                    this._halfExtentsX = .5 * (d - a);
                    this._halfExtentsY = .5 * (e - b);
                    this._halfExtentsZ = .5 * (f - c);
                    Lc.prototype.fromExtremes.call(this, a, b, c, d, e, f)
                },
                updateBoundingRenderable: function () {
                    this._boundingRenderable.set_scaleX(Math.max(2 * this._halfExtentsX, .001));
                    this._boundingRenderable.set_scaleY(Math.max(2 * this._halfExtentsY, .001));
                    this._boundingRenderable.set_scaleZ(Math.max(2 * this._halfExtentsZ, .001));
                    this._boundingRenderable.set_x(this._centerX);
                    this._boundingRenderable.set_y(this._centerY);
                    this._boundingRenderable.set_z(this._centerZ)
                },
                transformFrom: function (a, b) {
                    a = T.__cast(a, wg);
                    var c = a._centerX,
                        d = a._centerY,
                        e = a._centerZ,
                        f = kb.RAW_DATA_CONTAINER;
                    b.copyRawDataTo(f);
                    b = f.get(0);
                    var h = f.get(4),
                        r = f.get(8),
                        m = f.get(12),
                        C = f.get(1),
                        wa = f.get(5),
                        k = f.get(9),
                        g = f.get(13),
                        q = f.get(2),
                        n = f.get(6),
                        uc = f.get(10);
                    f = f.get(14);
                    this._centerX = c * b + d * h + e * r + m;
                    this._centerY = c * C + d * wa + e * k + g;
                    this._centerZ = c * q + d * n + e * uc + f;
                    0 > b && (b = -b);
                    0 > h && (h = -h);
                    0 > r && (r = -r);
                    0 > C && (C = -C);
                    0 > wa && (wa = -wa);
                    0 > k && (k = -k);
                    0 > q && (q = -q);
                    0 > n && (n = -n);
                    0 > uc && (uc = -uc);
                    c = a._halfExtentsX;
                    d = a._halfExtentsY;
                    a = a._halfExtentsZ;
                    this._halfExtentsX = c * b + d * h + a * r;
                    this._halfExtentsY = c * C + d * wa + a * k;
                    this._halfExtentsZ = c * q + d * n + a * uc;
                    this._min.x = this._centerX - this._halfExtentsX;
                    this._min.y = this._centerY - this._halfExtentsY;
                    this._min.z = this._centerZ - this._halfExtentsZ;
                    this._max.x = this._centerX + this._halfExtentsX;
                    this._max.y = this._centerY + this._halfExtentsY;
                    this._max.z = this._centerZ + this._halfExtentsZ;
                    this._aabbPointsDirty = !0
                },
                __class__: wg
            });
            var Af = function () {
                this._radius = this._centerX = this._centerY = this._centerZ = 0;
                Lc.call(this)
            };
            g["away3d.bounds.BoundingSphere"] = Af;
            Af.__name__ = "away3d.bounds.BoundingSphere";
            Af.__super__ = Lc;
            Af.prototype = l(Lc.prototype, {
                nullify: function () {
                    Lc.prototype.nullify.call(this);
                    this._radius = this._centerX = this._centerY = this._centerZ = 0
                },
                isInFrustum: function (a, b) {
                    for (var c = 0; c < b;) {
                        var d = c++;
                        d = a.get(d);
                        if (0 > d.a * (this._centerX + (0 > d.a ? -this._radius : this._radius)) + d.b * (this._centerY + (0 > d.b ? -this._radius : this._radius)) + d.c * (this._centerZ + (0 > d.c ? -this._radius : this._radius)) - d.d) return !1
                    }
                    return !0
                },
                fromSphere: function (a,
                                      b) {
                    this._centerX = a.x;
                    this._centerY = a.y;
                    this._centerZ = a.z;
                    this._radius = b;
                    this._max.x = this._centerX + b;
                    this._max.y = this._centerY + b;
                    this._max.z = this._centerZ + b;
                    this._min.x = this._centerX - b;
                    this._min.y = this._centerY - b;
                    this._min.z = this._centerZ - b;
                    this._aabbPointsDirty = !0;
                    null != this._boundingRenderable && this.updateBoundingRenderable()
                },
                fromExtremes: function (a, b, c, d, e, f) {
                    this._centerX = .5 * (d + a);
                    this._centerY = .5 * (e + b);
                    this._centerZ = .5 * (f + c);
                    var h = d - a,
                        r = e - b,
                        m = f - c;
                    r > h && (h = r);
                    m > h && (h = m);
                    this._radius = h * Math.sqrt(.5);
                    Lc.prototype.fromExtremes.call(this, a, b, c, d, e, f)
                },
                rayIntersection: function (a, b, c) {
                    if (this.containsPoint(a)) return 0;
                    var d = a.x - this._centerX,
                        e = a.y - this._centerY;
                    a = a.z - this._centerZ;
                    var f = b.x,
                        h = b.y;
                    b = b.z;
                    var r = f * f + h * h + b * b;
                    var m = 2 * (d * f + e * h + a * b),
                        C = m * m - 4 * r * (d * d + e * e + a * a - this._radius * this._radius);
                    return 0 <= C && (r = (-m - Math.sqrt(C)) / (2 * r), 0 <= r) ? (c.x = d + r * f, c.y = e + r * h, c.z = a + r * b, c.normalize(), r) : -1
                },
                containsPoint: function (a) {
                    var b = a.x - this._centerX,
                        c = a.y - this._centerY;
                    a = a.z - this._centerZ;
                    return Math.sqrt(b * b +
                        c * c + a * a) <= this._radius
                },
                updateBoundingRenderable: function () {
                    var a = this._radius;
                    0 == a && (a = .001);
                    this._boundingRenderable.set_scaleX(a);
                    this._boundingRenderable.set_scaleY(a);
                    this._boundingRenderable.set_scaleZ(a);
                    this._boundingRenderable.set_x(this._centerX);
                    this._boundingRenderable.set_y(this._centerY);
                    this._boundingRenderable.set_z(this._centerZ)
                },
                transformFrom: function (a, b) {
                    a = T.__cast(a, Af);
                    var c = a._centerX,
                        d = a._centerY,
                        e = a._centerZ,
                        f = kb.RAW_DATA_CONTAINER;
                    b.copyRawDataTo(f);
                    var h = f.get(0),
                        r = f.get(4),
                        m = f.get(8),
                        C = f.get(12),
                        wa = f.get(1),
                        k = f.get(5),
                        g = f.get(9),
                        q = f.get(13);
                    b = f.get(2);
                    var n = f.get(6),
                        uc = f.get(10);
                    f = f.get(14);
                    this._centerX = c * h + d * r + e * m + C;
                    this._centerY = c * wa + d * k + e * g + q;
                    this._centerZ = c * b + d * n + e * uc + f;
                    0 > h && (h = -h);
                    0 > r && (r = -r);
                    0 > m && (m = -m);
                    0 > wa && (wa = -wa);
                    0 > k && (k = -k);
                    0 > g && (g = -g);
                    0 > b && (b = -b);
                    0 > n && (n = -n);
                    0 > uc && (uc = -uc);
                    c = h + r + m;
                    d = wa + k + g;
                    b = b + n + uc;
                    this._radius = a._radius * Math.sqrt(c * c + d * d + b * b);
                    this._min.x = this._centerX - this._radius;
                    this._min.y = this._centerY - this._radius;
                    this._min.z = this._centerZ - this._radius;
                    this._max.x = this._centerX + this._radius;
                    this._max.y = this._centerY + this._radius;
                    this._max.z = this._centerZ + this._radius
                },
                __class__: Af
            });
            var ef = function (a, b) {
                null == a && (a = !0);
                Lc.call(this);
                this._alwaysIn = a;
                this._renderable = b;
                this._max.x = this._max.y = this._max.z = Infinity;
                this._min.x = this._min.y = this._min.z = this._alwaysIn ? -Infinity : Infinity
            };
            g["away3d.bounds.NullBounds"] = ef;
            ef.__name__ = "away3d.bounds.NullBounds";
            ef.__super__ = Lc;
            ef.prototype = l(Lc.prototype, {
                isInFrustum: function (a, b) {
                    return this._alwaysIn
                },
                fromGeometry: function (a) {
                },
                fromSphere: function (a, b) {
                },
                fromExtremes: function (a, b, c, d, e, f) {
                },
                transformFrom: function (a, b) {
                    this._alwaysIn = T.__cast(a, ef)._alwaysIn
                },
                __class__: ef
            });
            var Sb = function () {
                this._sca = new Q;
                this._rot = new Q;
                this._pos = new Q;
                this._pivotZero = !0;
                this._pivotPoint = new Q;
                this._x = this._y = this._z = 0;
                this._scaleX = this._scaleY = this._scaleZ = 1;
                this._transform = new xb;
                this._zOffset = 0;
                this._flipY = new xb;
                this._rotationX = this._rotationY = this._rotationZ = 0;
                this._transformDirty = !0;
                this._smallestNumber =
                    1E-22;
                this._transformComponents = D.toObjectVector(null, 3, !0);
                this._transformComponents.set(0, this._pos);
                this._transformComponents.set(1, this._rot);
                this._transformComponents.set(2, this._sca);
                this._transform.identity();
                this._flipY.appendScale(1, -1, 1);
                B.call(this)
            };
            g["away3d.core.base.Object3D"] = Sb;
            Sb.__name__ = "away3d.core.base.Object3D";
            Sb.__super__ = B;
            Sb.prototype = l(B.prototype, {
                invalidatePosition: function () {
                    this._positionDirty || (this._positionDirty = !0, this.invalidateTransform(), this._listenToPositionChanged &&
                    this.notifyPositionChanged())
                },
                notifyPositionChanged: function () {
                    null == this._positionChanged && (this._positionChanged = new Ce("positionChanged", this));
                    this.dispatchEvent(this._positionChanged)
                },
                addEventListener: function (a, b, c, d, e) {
                    null == e && (e = !1);
                    null == d && (d = 0);
                    null == c && (c = !1);
                    B.prototype.addEventListener.call(this, a, b, c, d, e);
                    switch (a) {
                        case "positionChanged":
                            this._listenToPositionChanged = !0;
                            break;
                        case "rotationChanged":
                            this._listenToRotationChanged = !0;
                            break;
                        case "scaleChanged":
                            this._listenToScaleChanged = !0
                    }
                },
                removeEventListener: function (a, b, c) {
                    null == c && (c = !1);
                    B.prototype.removeEventListener.call(this, a, b, c);
                    if (!this.hasEventListener(a)) switch (a) {
                        case "positionChanged":
                            this._listenToPositionChanged = !1;
                            break;
                        case "rotationChanged":
                            this._listenToRotationChanged = !1;
                            break;
                        case "scaleChanged":
                            this._listenToScaleChanged = !1
                    }
                },
                invalidateRotation: function () {
                    this._rotationDirty || (this._rotationDirty = !0, this.invalidateTransform(), this._listenToRotationChanged && this.notifyRotationChanged())
                },
                notifyRotationChanged: function () {
                    null ==
                    this._rotationChanged && (this._rotationChanged = new Ce("rotationChanged", this));
                    this.dispatchEvent(this._rotationChanged)
                },
                invalidateScale: function () {
                    this._scaleDirty || (this._scaleDirty = !0, this.invalidateTransform(), this._listenToScaleChanged && this.notifyScaleChanged())
                },
                notifyScaleChanged: function () {
                    null == this._scaleChanged && (this._scaleChanged = new Ce("scaleChanged", this));
                    this.dispatchEvent(this._scaleChanged)
                },
                get_x: function () {
                    return this._x
                },
                set_x: function (a) {
                    if (this._x == a) return a;
                    this._x = a;
                    this.invalidatePosition();
                    return a
                },
                get_y: function () {
                    return this._y
                },
                set_y: function (a) {
                    if (this._y == a) return a;
                    this._y = a;
                    this.invalidatePosition();
                    return a
                },
                get_z: function () {
                    return this._z
                },
                set_z: function (a) {
                    if (this._z == a) return a;
                    this._z = a;
                    this.invalidatePosition();
                    return a
                },
                get_rotationX: function () {
                    return this._rotationX * De.RADIANS_TO_DEGREES
                },
                set_rotationX: function (a) {
                    if (this.get_rotationX() == a) return a;
                    this._rotationX = a * De.DEGREES_TO_RADIANS;
                    this.invalidateRotation();
                    return a
                },
                get_rotationY: function () {
                    return this._rotationY *
                        De.RADIANS_TO_DEGREES
                },
                set_rotationY: function (a) {
                    if (this.get_rotationY() == a) return a;
                    this._rotationY = a * De.DEGREES_TO_RADIANS;
                    this.invalidateRotation();
                    return a
                },
                get_rotationZ: function () {
                    return this._rotationZ * De.RADIANS_TO_DEGREES
                },
                set_rotationZ: function (a) {
                    if (this.get_rotationZ() == a) return a;
                    this._rotationZ = a * De.DEGREES_TO_RADIANS;
                    this.invalidateRotation();
                    return a
                },
                set_scaleX: function (a) {
                    if (this._scaleX == a) return a;
                    this._scaleX = a;
                    this.invalidateScale();
                    return a
                },
                set_scaleY: function (a) {
                    if (this._scaleY ==
                        a) return a;
                    this._scaleY = a;
                    this.invalidateScale();
                    return a
                },
                set_scaleZ: function (a) {
                    if (this._scaleZ == a) return a;
                    this._scaleZ = a;
                    this.invalidateScale();
                    return a
                },
                get_transform: function () {
                    this._transformDirty && this.updateTransform();
                    return this._transform
                },
                set_transform: function (a) {
                    if (0 == a.rawData.get(0)) {
                        var b = kb.RAW_DATA_CONTAINER;
                        a.copyRawDataTo(b);
                        b.set(0, this._smallestNumber);
                        a.copyRawDataFrom(b)
                    }
                    b = kb.decompose(a);
                    var c = b.get(0);
                    if (this._x != c.x || this._y != c.y || this._z != c.z) this._x = c.x, this._y = c.y,
                        this._z = c.z, this.invalidatePosition();
                    c = b.get(1);
                    if (this._rotationX != c.x || this._rotationY != c.y || this._rotationZ != c.z) this._rotationX = c.x, this._rotationY = c.y, this._rotationZ = c.z, this.invalidateRotation();
                    c = b.get(2);
                    if (this._scaleX != c.x || this._scaleY != c.y || this._scaleZ != c.z) this._scaleX = c.x, this._scaleY = c.y, this._scaleZ = c.z, this.invalidateScale();
                    return a
                },
                get_position: function () {
                    this.get_transform().copyColumnTo(3, this._pos);
                    return this._pos.clone()
                },
                set_position: function (a) {
                    this._x = a.x;
                    this._y = a.y;
                    this._z = a.z;
                    this.invalidatePosition();
                    return a
                },
                translateLocal: function (a, b) {
                    var c = a.x,
                        d = a.y;
                    a = a.z;
                    b /= Math.sqrt(c * c + d * d + a * a);
                    this.get_transform().prependTranslation(c * b, d * b, a * b);
                    this._transform.copyColumnTo(3, this._pos);
                    this._x = this._pos.x;
                    this._y = this._pos.y;
                    this._z = this._pos.z;
                    this.invalidatePosition()
                },
                lookAt: function (a, b) {
                    null == Sb.tempAxeX && (Sb.tempAxeX = new Q);
                    null == Sb.tempAxeY && (Sb.tempAxeY = new Q);
                    null == Sb.tempAxeZ && (Sb.tempAxeZ = new Q);
                    var c = Sb.tempAxeX,
                        d = Sb.tempAxeY,
                        e = Sb.tempAxeZ;
                    null == b && (b =
                        new Q(0, 1, 0));
                    this._transformDirty && this.updateTransform();
                    e.x = a.x - this._x;
                    e.y = a.y - this._y;
                    e.z = a.z - this._z;
                    e.normalize();
                    c.x = b.y * e.z - b.z * e.y;
                    c.y = b.z * e.x - b.x * e.z;
                    c.z = b.x * e.y - b.y * e.x;
                    c.normalize();
                    .05 > c.get_length() && (c.x = b.y, c.y = b.x, c.z = 0, c.normalize());
                    d.x = e.y * c.z - e.z * c.y;
                    d.y = e.z * c.x - e.x * c.z;
                    d.z = e.x * c.y - e.y * c.x;
                    a = kb.RAW_DATA_CONTAINER;
                    a.set(0, this._scaleX * c.x);
                    a.set(1, this._scaleX * c.y);
                    a.set(2, this._scaleX * c.z);
                    a.set(3, 0);
                    a.set(4, this._scaleY * d.x);
                    a.set(5, this._scaleY * d.y);
                    a.set(6, this._scaleY * d.z);
                    a.set(7, 0);
                    a.set(8, this._scaleZ * e.x);
                    a.set(9, this._scaleZ * e.y);
                    a.set(10, this._scaleZ * e.z);
                    a.set(11, 0);
                    a.set(12, this._x);
                    a.set(13, this._y);
                    a.set(14, this._z);
                    a.set(15, 1);
                    this._transform.copyRawDataFrom(a);
                    this.set_transform(this.get_transform());
                    0 > e.z && (this.set_rotationY(180 - this.get_rotationY()), this.set_rotationX(this.get_rotationX() - 180), this.set_rotationZ(this.get_rotationZ() - 180))
                },
                invalidateTransform: function () {
                    this._transformDirty = !0
                },
                updateTransform: function () {
                    this._pos.x = this._x;
                    this._pos.y =
                        this._y;
                    this._pos.z = this._z;
                    this._rot.x = this._rotationX;
                    this._rot.y = this._rotationY;
                    this._rot.z = this._rotationZ;
                    this._pivotZero ? (this._sca.x = this._scaleX, this._sca.y = this._scaleY, this._sca.z = this._scaleZ, this._transform.recompose(this._transformComponents)) : (this._sca.x = 1, this._sca.y = 1, this._sca.z = 1, this._transform.recompose(this._transformComponents), this._transform.appendTranslation(this._pivotPoint.x, this._pivotPoint.y, this._pivotPoint.z), this._transform.prependTranslation(-this._pivotPoint.x,
                        -this._pivotPoint.y, -this._pivotPoint.z), this._transform.prependScale(this._scaleX, this._scaleY, this._scaleZ), this._sca.x = this._scaleX, this._sca.y = this._scaleY, this._sca.z = this._scaleZ);
                    this._scaleDirty = this._rotationDirty = this._positionDirty = this._transformDirty = !1
                },
                get_zOffset: function () {
                    return this._zOffset
                },
                __class__: Sb,
                __properties__: l(B.prototype.__properties__, {
                    set_scaleZ: "set_scaleZ",
                    set_scaleY: "set_scaleY",
                    set_scaleX: "set_scaleX",
                    get_zOffset: "get_zOffset",
                    set_position: "set_position",
                    get_position: "get_position",
                    set_transform: "set_transform",
                    get_transform: "get_transform",
                    set_rotationZ: "set_rotationZ",
                    get_rotationZ: "get_rotationZ",
                    set_rotationY: "set_rotationY",
                    get_rotationY: "get_rotationY",
                    set_rotationX: "set_rotationX",
                    get_rotationX: "get_rotationX",
                    set_z: "set_z",
                    get_z: "get_z",
                    set_y: "set_y",
                    get_y: "get_y",
                    set_x: "set_x",
                    get_x: "get_x"
                })
            });
            var dd = function () {
                this._ignoreTransform = !1;
                this._scenePositionDirty = this._explicitVisibility = this._implicitVisibility = !0;
                this._scenePosition = new Q;
                this._inverseSceneTransformDirty = !0;
                this._inverseSceneTransform = new xb;
                this._mouseChildren = !0;
                this._children = D.toObjectVector(null);
                this._sceneTransformDirty = !0;
                this._sceneTransform = new xb;
                Sb.call(this)
            };
            g["away3d.containers.ObjectContainer3D"] = dd;
            dd.__name__ = "away3d.containers.ObjectContainer3D";
            dd.__interfaces__ = [t];
            dd.__super__ = Sb;
            dd.prototype = l(Sb.prototype, {
                get_implicitPartition: function () {
                    return this._implicitPartition
                },
                set_implicitPartition: function (a) {
                    if (a == this._implicitPartition) return a;
                    var b = 0,
                        c = this._children.get_length();
                    for (this._implicitPartition = a; b < c;) {
                        var d = this._children.get(b++);
                        null == d._explicitPartition && d.set_implicitPartition(a)
                    }
                    return a
                },
                get_isVisible: function () {
                    return this._implicitVisibility ? this._explicitVisibility : !1
                },
                setParent: function (a) {
                    this._parent = a;
                    this.updateMouseChildren();
                    null == a ? this.set_scene(null) : (this.notifySceneTransformChange(), this.notifySceneChange())
                },
                notifySceneTransformChange: function () {
                    if (!this._sceneTransformDirty && !this._ignoreTransform) {
                        this.invalidateSceneTransform();
                        for (var a =
                            0, b = this._children.get_length(); a < b;) this._children.get(a++).notifySceneTransformChange();
                        this._listenToSceneTransformChanged && (null == this._sceneTransformChanged && (this._sceneTransformChanged = new Ce("scenetransformChanged", this)), this.dispatchEvent(this._sceneTransformChanged))
                    }
                },
                notifySceneChange: function () {
                    this.notifySceneTransformChange();
                    for (var a = 0, b = this._children.get_length(); a < b;) this._children.get(a++).notifySceneChange();
                    this._listenToSceneChanged && (null == this._scenechanged && (this._scenechanged =
                        new Ce("sceneChanged", this)), this.dispatchEvent(this._scenechanged))
                },
                updateMouseChildren: function () {
                    this._ancestorsAllowMouseEnabled = null == this._parent || this._parent._isRoot ? this.get_mouseChildren() : this.get_parent()._ancestorsAllowMouseEnabled && this._parent.get_mouseChildren();
                    for (var a = 0, b = this._children.get_length(); a < b;) {
                        var c = a++;
                        this._children.get(c).updateMouseChildren()
                    }
                },
                get_mouseEnabled: function () {
                    return this._mouseEnabled
                },
                set_mouseEnabled: function (a) {
                    this._mouseEnabled = a;
                    this.updateMouseChildren();
                    return a
                },
                invalidateTransform: function () {
                    Sb.prototype.invalidateTransform.call(this);
                    this.notifySceneTransformChange()
                },
                invalidateSceneTransform: function () {
                    this._sceneTransformDirty = !this._ignoreTransform;
                    this._inverseSceneTransformDirty = !this._ignoreTransform;
                    this._scenePositionDirty = !this._ignoreTransform
                },
                updateSceneTransform: function () {
                    null == this._parent || this._parent._isRoot ? this._sceneTransform.copyFrom(this.get_transform()) : (this._sceneTransform.copyFrom(this._parent.get_sceneTransform()),
                        this._sceneTransform.prepend(this.get_transform()));
                    this._sceneTransformDirty = !1
                },
                get_mouseChildren: function () {
                    return this._mouseChildren
                },
                set_mouseChildren: function (a) {
                    this._mouseChildren = a;
                    this.updateMouseChildren();
                    return a
                },
                get_scenePosition: function () {
                    this._scenePositionDirty && (this.get_sceneTransform().copyColumnTo(3, this._scenePosition), this._scenePositionDirty = !1);
                    return this._scenePosition
                },
                get_partition: function () {
                    return this._explicitPartition
                },
                set_partition: function (a) {
                    this._explicitPartition =
                        a;
                    this.set_implicitPartition(null != a ? a : null != this._parent ? this._parent.get_implicitPartition() : null);
                    return a
                },
                get_sceneTransform: function () {
                    this._sceneTransformDirty && this.updateSceneTransform();
                    return this._sceneTransform
                },
                set_scene: function (a) {
                    for (var b = 0, c = this._children.get_length(); b < c;) this._children.get(b++).set_scene(a);
                    if (this._scene == a) return a;
                    null == a && (this._oldScene = this._scene);
                    null != this._explicitPartition && null != this._oldScene && this._oldScene != this._scene && this.set_partition(null);
                    null != a && (this._oldScene = null);
                    this._scene = a;
                    null != this._scene ? this._scene.dispatchEvent(new xg("addedToScene", this)) : null != this._oldScene && this._oldScene.dispatchEvent(new xg("removedFromScene", this));
                    return a
                },
                get_inverseSceneTransform: function () {
                    this._inverseSceneTransformDirty && (this._inverseSceneTransform.copyFrom(this.get_sceneTransform()), this._inverseSceneTransform.invert(), this._inverseSceneTransformDirty = !1);
                    return this._inverseSceneTransform
                },
                get_parent: function () {
                    return this._parent
                },
                addChild: function (a) {
                    if (null == a) throw new Fa("Parameter child cannot be null.");
                    null != a._parent && a._parent.removeChild(a);
                    null == a._explicitPartition && a.set_implicitPartition(this._implicitPartition);
                    a.setParent(this);
                    a.set_scene(this._scene);
                    a.notifySceneTransformChange();
                    a.updateMouseChildren();
                    a.updateImplicitVisibility();
                    this._children.push(a);
                    return a
                },
                removeChild: function (a) {
                    if (null == a) throw new Fa("Parameter child cannot be null");
                    var b = this._children.indexOf(a, 0);
                    if (-1 == b) throw new Fa("Parameter is not a child of the caller");
                    this.removeChildInternal(b, a)
                },
                removeChildAt: function (a) {
                    var b = this._children.get(a);
                    this.removeChildInternal(a, b)
                },
                removeChildInternal: function (a, b) {
                    var c = this._children;
                    c.__tempIndex = a;
                    a = 0;
                    for (var d = []; a < d.length;) {
                        var e = d[a++];
                        c.insertAt(c.__tempIndex, e);
                        c.__tempIndex++
                    }
                    c.splice(c.__tempIndex, 1);
                    b.setParent(null);
                    null == b._explicitPartition && b.set_implicitPartition(null)
                },
                get_numChildren: function () {
                    return this._children.get_length()
                },
                lookAt: function (a, b) {
                    Sb.prototype.lookAt.call(this, a, b);
                    this.notifySceneTransformChange()
                },
                translateLocal: function (a, b) {
                    Sb.prototype.translateLocal.call(this, a, b);
                    this.notifySceneTransformChange()
                },
                dispose: function () {
                    null != this.get_parent() && this.get_parent().removeChild(this)
                },
                dispatchEvent: function (a) {
                    var b = Sb.prototype.dispatchEvent.call(this, a);
                    a.bubbles && (null != this._parent ? this._parent.dispatchEvent(a) : null != this._scene && this._scene.dispatchEvent(a));
                    return b
                },
                updateImplicitVisibility: function () {
                    var a = this._children.get_length();
                    this._implicitVisibility = this._parent._explicitVisibility &&
                        this._parent._implicitVisibility;
                    for (var b = 0; b < a;) {
                        var c = b++;
                        this._children.get(c).updateImplicitVisibility()
                    }
                },
                addEventListener: function (a, b, c, d, e) {
                    null == e && (e = !1);
                    null == d && (d = 0);
                    null == c && (c = !1);
                    Sb.prototype.addEventListener.call(this, a, b, c, d, e);
                    switch (a) {
                        case "sceneChanged":
                            this._listenToSceneChanged = !0;
                            break;
                        case "scenetransformChanged":
                            this._listenToSceneTransformChanged = !0
                    }
                },
                removeEventListener: function (a, b, c) {
                    null == c && (c = !1);
                    Sb.prototype.removeEventListener.call(this, a, b, c);
                    if (!this.hasEventListener(a)) switch (a) {
                        case "sceneChanged":
                            this._listenToSceneChanged = !1;
                            break;
                        case "scenetransformChanged":
                            this._listenToSceneTransformChanged = !1
                    }
                },
                __class__: dd,
                __properties__: l(Sb.prototype.__properties__, {
                    set_scene: "set_scene",
                    get_numChildren: "get_numChildren",
                    get_parent: "get_parent",
                    get_inverseSceneTransform: "get_inverseSceneTransform",
                    get_sceneTransform: "get_sceneTransform",
                    set_partition: "set_partition",
                    get_partition: "get_partition",
                    get_scenePosition: "get_scenePosition",
                    set_mouseChildren: "set_mouseChildren",
                    get_mouseChildren: "get_mouseChildren",
                    set_mouseEnabled: "set_mouseEnabled",
                    get_mouseEnabled: "get_mouseEnabled",
                    get_isVisible: "get_isVisible",
                    set_implicitPartition: "set_implicitPartition",
                    get_implicitPartition: "get_implicitPartition"
                })
            });
            var Eb = function () {
                this._boundsInvalid = this._worldBoundsInvalid = !0;
                dd.call(this);
                this._bounds = this.getDefaultBoundingVolume();
                this._worldBounds = this.getDefaultBoundingVolume()
            };
            g["away3d.entities.Entity"] = Eb;
            Eb.__name__ = "away3d.entities.Entity";
            Eb.__super__ = dd;
            Eb.prototype = l(dd.prototype, {
                get_pickingCollisionVO: function () {
                    null == this._pickingCollisionVO &&
                    (this._pickingCollisionVO = new Uj(this));
                    return this._pickingCollisionVO
                },
                collidesBefore: function (a, b) {
                    return !0
                },
                get_bounds: function () {
                    this._boundsInvalid && this.updateBounds();
                    return this._bounds
                },
                get_worldBounds: function () {
                    this._worldBoundsInvalid && this.updateWorldBounds();
                    return this._worldBounds
                },
                updateWorldBounds: function () {
                    this._worldBounds.transformFrom(this.get_bounds(), this.get_sceneTransform());
                    this._worldBoundsInvalid = !1
                },
                set_implicitPartition: function (a) {
                    if (a == this._implicitPartition) return a;
                    null != this._implicitPartition && this.notifyPartitionUnassigned();
                    dd.prototype.set_implicitPartition.call(this, a);
                    this.notifyPartitionAssigned();
                    return a
                },
                set_scene: function (a) {
                    if (a == this._scene) return a;
                    null != this._scene && this._scene.unregisterEntity(this);
                    null != a && a.registerEntity(this);
                    dd.prototype.set_scene.call(this, a);
                    return a
                },
                get_pickingCollider: function () {
                    return this._pickingCollider
                },
                set_pickingCollider: function (a) {
                    return this._pickingCollider = a
                },
                getEntityPartitionNode: function () {
                    null == this._partitionNode &&
                    (this._partitionNode = this.createEntityPartitionNode());
                    return this._partitionNode
                },
                isIntersectingRay: function (a, b) {
                    null == this.get_pickingCollisionVO().localRayPosition && (this.get_pickingCollisionVO().localRayPosition = new Q);
                    null == this.get_pickingCollisionVO().localRayDirection && (this.get_pickingCollisionVO().localRayDirection = new Q);
                    null == this.get_pickingCollisionVO().localNormal && (this.get_pickingCollisionVO().localNormal = new Q);
                    var c = this.get_pickingCollisionVO().localRayPosition,
                        d = this.get_pickingCollisionVO().localRayDirection;
                    kb.transformVector(this.get_inverseSceneTransform(), a, c);
                    kb.deltaTransformVector(this.get_inverseSceneTransform(), b, d);
                    c = this.get_bounds().rayIntersection(c, d, this.get_pickingCollisionVO().localNormal);
                    if (0 > c) return !1;
                    this.get_pickingCollisionVO().rayEntryDistance = c;
                    this.get_pickingCollisionVO().rayPosition = a;
                    this.get_pickingCollisionVO().rayDirection = b;
                    this.get_pickingCollisionVO().rayOriginIsInsideBounds = 0 == c;
                    return !0
                },
                createEntityPartitionNode: function () {
                    throw new Wa;
                },
                getDefaultBoundingVolume: function () {
                    return new wg
                },
                updateBounds: function () {
                    throw new Wa;
                },
                invalidateSceneTransform: function () {
                    this._ignoreTransform || (dd.prototype.invalidateSceneTransform.call(this), this._worldBoundsInvalid = !0, this.notifySceneBoundsInvalid())
                },
                invalidateBounds: function () {
                    this._worldBoundsInvalid = this._boundsInvalid = !0;
                    this.notifySceneBoundsInvalid()
                },
                updateMouseChildren: function () {
                    if (null == this._parent && null != this.get_pickingCollider() && this._parent instanceof Eb) {
                        var a = T.__cast(this._parent, Eb).get_pickingCollider();
                        null != a && this.set_pickingCollider(a)
                    }
                    dd.prototype.updateMouseChildren.call(this)
                },
                notifySceneBoundsInvalid: function () {
                    null != this._scene && this._scene.invalidateEntityBounds(this)
                },
                notifyPartitionAssigned: function () {
                    null != this._scene && this._scene.registerPartition(this)
                },
                notifyPartitionUnassigned: function () {
                    null != this._scene && this._scene.unregisterPartition(this)
                },
                internalUpdate: function () {
                    null != this._controller && this._controller.update()
                },
                __class__: Eb,
                __properties__: l(dd.prototype.__properties__, {
                    set_pickingCollider: "set_pickingCollider",
                    get_pickingCollider: "get_pickingCollider",
                    get_worldBounds: "get_worldBounds",
                    get_bounds: "get_bounds",
                    get_pickingCollisionVO: "get_pickingCollisionVO"
                })
            });
            var Bf = function (a) {
                this._viewProjectionDirty = this._frustumPlanesDirty = !0;
                this._viewProjection = new xb;
                Eb.call(this);
                this._lens = a;
                null == this._lens && (this._lens = new ed);
                this._lens.addEventListener("matrixChanged", p(this, this.onLensMatrixChanged));
                this._frustumPlanes = D.toObjectVector(null, 6, !0);
                this._frustumPlanes.set(0, new Ee);
                this._frustumPlanes.set(1, new Ee);
                this._frustumPlanes.set(2, new Ee);
                this._frustumPlanes.set(3, new Ee);
                this._frustumPlanes.set(4, new Ee);
                this._frustumPlanes.set(5, new Ee);
                this.set_z(-1E3)
            };
            g["away3d.cameras.Camera3D"] = Bf;
            Bf.__name__ = "away3d.cameras.Camera3D";
            Bf.__super__ = Eb;
            Bf.prototype = l(Eb.prototype, {
                getDefaultBoundingVolume: function () {
                    return new ef
                },
                onLensMatrixChanged: function (a) {
                    this._frustumPlanesDirty = this._viewProjectionDirty = !0;
                    this.dispatchEvent(a)
                },
                get_frustumPlanes: function () {
                    this._frustumPlanesDirty && this.updateFrustum();
                    return this._frustumPlanes
                },
                updateFrustum: function () {
                    var a =
                        kb.RAW_DATA_CONTAINER;
                    this.get_viewProjection().copyRawDataTo(a);
                    var b = a.get(0),
                        c = a.get(4),
                        d = a.get(8),
                        e = a.get(12),
                        f = a.get(1),
                        h = a.get(5),
                        r = a.get(9),
                        m = a.get(13),
                        C = a.get(2),
                        wa = a.get(6),
                        k = a.get(10),
                        g = a.get(14),
                        q = a.get(3),
                        n = a.get(7),
                        uc = a.get(11);
                    a = a.get(15);
                    var p = this._frustumPlanes.get(0),
                        l = q + b,
                        y = n + c,
                        v = uc + d,
                        t = 1 / Math.sqrt(l * l + y * y + v * v);
                    p.a = l * t;
                    p.b = y * t;
                    p.c = v * t;
                    p.d = -(a + e) * t;
                    p = this._frustumPlanes.get(1);
                    l = q - b;
                    y = n - c;
                    v = uc - d;
                    t = 1 / Math.sqrt(l * l + y * y + v * v);
                    p.a = l * t;
                    p.b = y * t;
                    p.c = v * t;
                    p.d = (e - a) * t;
                    p = this._frustumPlanes.get(2);
                    l = q + f;
                    y = n + h;
                    v = uc + r;
                    t = 1 / Math.sqrt(l * l + y * y + v * v);
                    p.a = l * t;
                    p.b = y * t;
                    p.c = v * t;
                    p.d = -(a + m) * t;
                    p = this._frustumPlanes.get(3);
                    l = q - f;
                    y = n - h;
                    v = uc - r;
                    t = 1 / Math.sqrt(l * l + y * y + v * v);
                    p.a = l * t;
                    p.b = y * t;
                    p.c = v * t;
                    p.d = (m - a) * t;
                    p = this._frustumPlanes.get(4);
                    l = C;
                    y = wa;
                    v = k;
                    t = 1 / Math.sqrt(l * l + y * y + v * v);
                    p.a = l * t;
                    p.b = y * t;
                    p.c = v * t;
                    p.d = -g * t;
                    p = this._frustumPlanes.get(5);
                    l = q - C;
                    y = n - wa;
                    v = uc - k;
                    t = 1 / Math.sqrt(l * l + y * y + v * v);
                    p.a = l * t;
                    p.b = y * t;
                    p.c = v * t;
                    p.d = (g - a) * t;
                    this._frustumPlanesDirty = !1
                },
                invalidateSceneTransform: function () {
                    Eb.prototype.invalidateSceneTransform.call(this);
                    this._frustumPlanesDirty = this._viewProjectionDirty = !0
                },
                updateBounds: function () {
                    this._bounds.nullify();
                    this._boundsInvalid = !1
                },
                createEntityPartitionNode: function () {
                    return new zh(this)
                },
                get_lens: function () {
                    return this._lens
                },
                set_lens: function (a) {
                    if (this._lens == a) return a;
                    if (null == a) throw new Fa("Lens cannot be null!");
                    this._lens.removeEventListener("matrixChanged", p(this, this.onLensMatrixChanged));
                    this._lens = a;
                    this._lens.addEventListener("matrixChanged", p(this, this.onLensMatrixChanged));
                    this.dispatchEvent(new Ah("lensChanged",
                        this));
                    return a
                },
                get_viewProjection: function () {
                    this._viewProjectionDirty && (this._viewProjection.copyFrom(this.get_inverseSceneTransform()), this._viewProjection.append(this._lens.get_matrix()), this._viewProjectionDirty = !1);
                    return this._viewProjection
                },
                unproject: function (a, b, c, d) {
                    return kb.transformVector(this.get_sceneTransform(), this.get_lens().unproject(a, b, c, d), d)
                },
                __class__: Bf,
                __properties__: l(Eb.prototype.__properties__, {
                    get_viewProjection: "get_viewProjection",
                    set_lens: "set_lens",
                    get_lens: "get_lens",
                    get_frustumPlanes: "get_frustumPlanes"
                })
            });
            var Vc = function () {
                this._unprojectionInvalid = !0;
                this._frustumCorners = D.toFloatVector(null, 24, !0);
                this._matrixInvalid = !0;
                this._aspectRatio = 1;
                this._far = 3E3;
                this._near = 20;
                this._viewPort = new ha;
                this._scissorRect = new ha;
                O.call(this);
                this._matrix = new xb
            };
            g["away3d.cameras.lenses.LensBase"] = Vc;
            Vc.__name__ = "away3d.cameras.lenses.LensBase";
            Vc.__super__ = O;
            Vc.prototype = l(O.prototype, {
                get_frustumCorners: function () {
                    return this._frustumCorners
                },
                get_matrix: function () {
                    this._matrixInvalid &&
                    (this.updateMatrix(), this._matrixInvalid = !1);
                    return this._matrix
                },
                set_matrix: function (a) {
                    this._matrix = a;
                    this.invalidateMatrix();
                    return a
                },
                get_near: function () {
                    return this._near
                },
                set_near: function (a) {
                    if (a == this._near) return a;
                    this._near = a;
                    this.invalidateMatrix();
                    return a
                },
                get_far: function () {
                    return this._far
                },
                set_far: function (a) {
                    if (a == this._far) return a;
                    this._far = a;
                    this.invalidateMatrix();
                    return a
                },
                get_unprojectionMatrix: function () {
                    this._unprojectionInvalid && (null == this._unprojection && (this._unprojection =
                        new xb), this._unprojection.copyFrom(this.get_matrix()), this._unprojection.invert(), this._unprojectionInvalid = !1);
                    return this._unprojection
                },
                unproject: function (a, b, c, d) {
                    throw new Wa;
                },
                set_aspectRatio: function (a) {
                    if (this._aspectRatio == a || 0 != 0 * a) return a;
                    this._aspectRatio = a;
                    this.invalidateMatrix();
                    return a
                },
                invalidateMatrix: function () {
                    this._unprojectionInvalid = this._matrixInvalid = !0;
                    this.dispatchEvent(new Bh("matrixChanged", this))
                },
                updateMatrix: function () {
                    throw new Wa;
                },
                updateScissorRect: function (a,
                                             b, c, d) {
                    this._scissorRect.x = a;
                    this._scissorRect.y = b;
                    this._scissorRect.width = c;
                    this._scissorRect.height = d;
                    this.invalidateMatrix()
                },
                updateViewport: function (a, b, c, d) {
                    this._viewPort.x = a;
                    this._viewPort.y = b;
                    this._viewPort.width = c;
                    this._viewPort.height = d;
                    this.invalidateMatrix()
                },
                __class__: Vc,
                __properties__: {
                    set_aspectRatio: "set_aspectRatio",
                    get_unprojectionMatrix: "get_unprojectionMatrix",
                    set_far: "set_far",
                    get_far: "get_far",
                    set_near: "set_near",
                    get_near: "get_near",
                    set_matrix: "set_matrix",
                    get_matrix: "get_matrix",
                    get_frustumCorners: "get_frustumCorners"
                }
            });
            var Ch = function () {
                Vc.call(this);
                this._matrix.copyFrom((new ed).get_matrix())
            };
            g["away3d.cameras.lenses.FreeMatrixLens"] = Ch;
            Ch.__name__ = "away3d.cameras.lenses.FreeMatrixLens";
            Ch.__super__ = Vc;
            Ch.prototype = l(Vc.prototype, {
                set_near: function (a) {
                    return this._near = a
                },
                set_far: function (a) {
                    return this._far = a
                },
                set_aspectRatio: function (a) {
                    return this._aspectRatio = a
                },
                updateMatrix: function () {
                    this._matrixInvalid = !1
                },
                __class__: Ch
            });
            var Dh = function (a) {
                null == a && (a = 500);
                Vc.call(this);
                this._projectionHeight = a
            };
            g["away3d.cameras.lenses.OrthographicLens"] = Dh;
            Dh.__name__ = "away3d.cameras.lenses.OrthographicLens";
            Dh.__super__ = Vc;
            Dh.prototype = l(Vc.prototype, {
                get_projectionHeight: function () {
                    return this._projectionHeight
                },
                set_projectionHeight: function (a) {
                    if (a == this._projectionHeight) return a;
                    this._projectionHeight = a;
                    this.invalidateMatrix();
                    return a
                },
                unproject: function (a, b, c, d) {
                    null == d && (d = new Q);
                    b = kb.CALCULATION_VECTOR3D;
                    this.get_matrix().copyColumnTo(3, b);
                    d.x = a + b.x;
                    d.y = a + b.y;
                    d.z = c;
                    d.w =
                        1;
                    kb.transformVector(this.get_unprojectionMatrix(), d, d);
                    d.z = c;
                    return d
                },
                updateMatrix: function () {
                    var a = kb.RAW_DATA_CONTAINER;
                    this._yMax = .5 * this._projectionHeight;
                    this._xMax = this._yMax * this._aspectRatio;
                    if (0 == this._scissorRect.x && 0 == this._scissorRect.y && this._scissorRect.width == this._viewPort.width && this._scissorRect.height == this._viewPort.height) {
                        var b = -this._xMax;
                        var c = this._xMax;
                        var d = -this._yMax;
                        var e = this._yMax;
                        a.set(0, 2 / (this._projectionHeight * this._aspectRatio));
                        a.set(5, 2 / this._projectionHeight);
                        a.set(10, 1 / (this._far - this._near));
                        a.set(14, this._near / (this._near - this._far));
                        a.set(1, a.set(2, a.set(3, a.set(4, a.set(6, a.set(7, a.set(8, a.set(9, a.set(11, a.set(12, a.set(13, 0)))))))))))
                    } else {
                        c = this._viewPort.width / this._scissorRect.width * this._xMax;
                        e = this._viewPort.height / this._scissorRect.height * this._yMax;
                        d = this._xMax * (2 * this._scissorRect.x - this._viewPort.width) / this._scissorRect.width + this._xMax;
                        var f = -this._yMax * (2 * this._scissorRect.y - this._viewPort.height) / this._scissorRect.height - this._yMax;
                        b =
                            d - c;
                        c = d + c;
                        d = f - e;
                        e = f + e;
                        a.set(0, 2 / (c - b));
                        a.set(5, -2 / (d - e));
                        a.set(10, 1 / (this._far - this._near));
                        a.set(12, (c + b) / (c - b));
                        a.set(13, (e + d) / (e - d));
                        a.set(14, this._near / (this.get_near() - this.get_far()));
                        a.set(1, a.set(2, a.set(3, a.set(4, a.set(6, a.set(7, a.set(8, a.set(9, a.set(11, 0)))))))))
                    }
                    a.set(15, 1);
                    this._frustumCorners.set(0, this._frustumCorners.set(9, this._frustumCorners.set(12, this._frustumCorners.set(21, b))));
                    this._frustumCorners.set(3, this._frustumCorners.set(6, this._frustumCorners.set(15, this._frustumCorners.set(18,
                        c))));
                    this._frustumCorners.set(1, this._frustumCorners.set(4, this._frustumCorners.set(13, this._frustumCorners.set(16, d))));
                    this._frustumCorners.set(7, this._frustumCorners.set(10, this._frustumCorners.set(19, this._frustumCorners.set(22, e))));
                    this._frustumCorners.set(2, this._frustumCorners.set(5, this._frustumCorners.set(8, this._frustumCorners.set(11, this._near))));
                    this._frustumCorners.set(14, this._frustumCorners.set(17, this._frustumCorners.set(20, this._frustumCorners.set(23, this._far))));
                    this._matrix.copyRawDataFrom(a);
                    this._matrixInvalid = !1
                },
                __class__: Dh,
                __properties__: l(Vc.prototype.__properties__, {
                    set_projectionHeight: "set_projectionHeight",
                    get_projectionHeight: "get_projectionHeight"
                })
            });
            var ed = function (a, b) {
                null == b && (b = 0);
                null == a && (a = 60);
                Vc.call(this);
                this.set_fieldOfView(a);
                this.set_coordinateSystem(b)
            };
            g["away3d.cameras.lenses.PerspectiveLens"] = ed;
            ed.__name__ = "away3d.cameras.lenses.PerspectiveLens";
            ed.__super__ = Vc;
            ed.prototype = l(Vc.prototype, {
                get_fieldOfView: function () {
                    return this._fieldOfView
                },
                set_fieldOfView: function (a) {
                    if (a ==
                        this._fieldOfView) return a;
                    this._fieldOfView = a;
                    this._focalLengthInv = Math.tan(this._fieldOfView * Math.PI / 360);
                    this._focalLength = 1 / this._focalLengthInv;
                    this.invalidateMatrix();
                    return a
                },
                unproject: function (a, b, c, d) {
                    null == d && (d = new Q);
                    d.x = a;
                    d.y = -b;
                    d.z = c;
                    d.w = 1;
                    d.x *= c;
                    d.y *= c;
                    kb.transformVector(this.get_unprojectionMatrix(), d, d);
                    d.z = c;
                    return d
                },
                set_coordinateSystem: function (a) {
                    if (a == this._coordinateSystem) return a;
                    this._coordinateSystem = a;
                    this.invalidateMatrix();
                    return a
                },
                updateMatrix: function () {
                    var a = kb.RAW_DATA_CONTAINER;
                    this._yMax = this._near * this._focalLengthInv;
                    this._xMax = this._yMax * this._aspectRatio;
                    if (0 == this._scissorRect.x && 0 == this._scissorRect.y && this._scissorRect.width == this._viewPort.width && this._scissorRect.height == this._viewPort.height) {
                        var b = -this._xMax;
                        var c = this._xMax;
                        var d = -this._yMax;
                        var e = this._yMax;
                        a.set(0, this._near / this._xMax);
                        a.set(5, this._near / this._yMax);
                        a.set(10, this._far / (this._far - this._near));
                        a.set(11, 1);
                        a.set(1, a.set(2, a.set(3, a.set(4, a.set(6, a.set(7, a.set(8, a.set(9, a.set(12, a.set(13, a.set(15,
                            0)))))))))));
                        a.set(14, -this._near * a.get(10))
                    } else {
                        c = this._viewPort.width / this._scissorRect.width * this._xMax;
                        e = this._viewPort.height / this._scissorRect.height * this._yMax;
                        d = this._xMax * (2 * this._scissorRect.x - this._viewPort.width) / this._scissorRect.width + this._xMax;
                        var f = -this._yMax * (2 * this._scissorRect.y - this._viewPort.height) / this._scissorRect.height - this._yMax;
                        b = d - c;
                        c = d + c;
                        d = f - e;
                        e = f + e;
                        a.set(0, 2 * this._near / (c - b));
                        a.set(5, 2 * this._near / (e - d));
                        a.set(8, (c + b) / (c - b));
                        a.set(9, (e + d) / (e - d));
                        a.set(10, (this._far +
                            this._near) / (this._far - this._near));
                        a.set(11, 1);
                        a.set(1, a.set(2, a.set(3, a.set(4, a.set(6, a.set(7, a.set(12, a.set(13, a.set(15, 0)))))))));
                        a.set(14, -2 * this._far * this._near / (this._far - this._near))
                    }
                    1 == this._coordinateSystem && a.set(5, -a.get(5));
                    this._matrix.copyRawDataFrom(a);
                    a = this._far * this._focalLengthInv;
                    f = a * this._aspectRatio;
                    this._frustumCorners.set(0, this._frustumCorners.set(9, b));
                    this._frustumCorners.set(3, this._frustumCorners.set(6, c));
                    this._frustumCorners.set(1, this._frustumCorners.set(4, d));
                    this._frustumCorners.set(7,
                        this._frustumCorners.set(10, e));
                    this._frustumCorners.set(12, this._frustumCorners.set(21, -f));
                    this._frustumCorners.set(15, this._frustumCorners.set(18, f));
                    this._frustumCorners.set(13, this._frustumCorners.set(16, -a));
                    this._frustumCorners.set(19, this._frustumCorners.set(22, a));
                    this._frustumCorners.set(2, this._frustumCorners.set(5, this._frustumCorners.set(8, this._frustumCorners.set(11, this._near))));
                    this._frustumCorners.set(14, this._frustumCorners.set(17, this._frustumCorners.set(20, this._frustumCorners.set(23,
                        this._far))));
                    this._matrixInvalid = !1
                },
                __class__: ed,
                __properties__: l(Vc.prototype.__properties__, {
                    set_coordinateSystem: "set_coordinateSystem",
                    set_fieldOfView: "set_fieldOfView",
                    get_fieldOfView: "get_fieldOfView"
                })
            });
            var Eh = function () {
                this._partitions = D.toObjectVector(null);
                this._sceneGraphRoot = new dd;
                this._sceneGraphRoot.set_scene(this);
                this._sceneGraphRoot._isRoot = !0;
                this._sceneGraphRoot.set_partition(new Vj(new Sd));
                O.call(this)
            };
            g["away3d.containers.Scene3D"] = Eh;
            Eh.__name__ = "away3d.containers.Scene3D";
            Eh.__super__ = O;
            Eh.prototype = l(O.prototype, {
                traversePartitions: function (a) {
                    var b = 0,
                        c = this._partitions.get_length();
                    for (a.scene = this; b < c;) this._partitions.get(b++).traverse(a)
                },
                get_partition: function () {
                    return this._sceneGraphRoot.get_partition()
                },
                addChild: function (a) {
                    return this._sceneGraphRoot.addChild(a)
                },
                removeChildAt: function (a) {
                    this._sceneGraphRoot.removeChildAt(a)
                },
                get_numChildren: function () {
                    return this._sceneGraphRoot.get_numChildren()
                },
                registerEntity: function (a) {
                    var b = a.get_implicitPartition();
                    this.addPartitionUnique(b);
                    b.markForUpdate(a)
                },
                unregisterEntity: function (a) {
                    a.get_implicitPartition().removeEntity(a)
                },
                invalidateEntityBounds: function (a) {
                    a.get_implicitPartition().markForUpdate(a)
                },
                registerPartition: function (a) {
                    this.addPartitionUnique(a.get_implicitPartition())
                },
                unregisterPartition: function (a) {
                    a.get_implicitPartition().removeEntity(a)
                },
                addPartitionUnique: function (a) {
                    -1 == this._partitions.indexOf(a, 0) && this._partitions.push(a)
                },
                __class__: Eh,
                __properties__: {
                    get_numChildren: "get_numChildren",
                    get_partition: "get_partition"
                }
            });
            var Td = function (a, b, c, d, e, f) {
                null == f && (f = -1);
                null == e && (e = "baseline");
                null == d && (d = !1);
                this._contextIndex = -1;
                this._layeredView = !1;
                this._scissorRectDirty = this._viewportDirty = !0;
                this._shareContext = !1;
                this._depthTextureInvalid = this._backBufferInvalid = !0;
                this._globalWidth = this._globalHeight = this._time = this._backgroundColor = 0;
                this._globalPos = new ba;
                this._localBRPos = new ba;
                this._localTLPos = new ba;
                this._width = this._height = 0;
                Ja.call(this);
                this._profile = e;
                this._scene = null != a ?
                    a : new Eh;
                this._scene.addEventListener("partitionChanged", p(this, this.onScenePartitionChanged));
                this._camera = null != b ? b : new Bf;
                this._renderer = null != c ? c : new yd;
                this._depthRenderer = new Cf;
                this._forceSoftware = d;
                this._contextIndex = f;
                this._entityCollector = this._renderer.createEntityCollector();
                this._entityCollector.set_camera(this._camera);
                this._scissorRect = new ha;
                this.initHitField();
                this._mouse3DManager = new na;
                this._mouse3DManager.enableMouseListeners(this);
                this._touch3DManager = new jc;
                this._touch3DManager.set_view(this);
                this._touch3DManager.enableTouchListeners(this);
                this.addEventListener("addedToStage", p(this, this.onAddedToStage), !1, 0, !0);
                this.addEventListener("added", p(this, this.onAdded), !1, 0, !0);
                this._camera.addEventListener("lensChanged", p(this, this.onLensChanged));
                this._camera.set_partition(this._scene.get_partition())
            };
            g["away3d.containers.View3D"] = Td;
            Td.__name__ = "away3d.containers.View3D";
            Td.__super__ = Ja;
            Td.prototype = l(Ja.prototype, {
                onScenePartitionChanged: function (a) {
                    null != this._camera && this._camera.set_partition(this.get_scene().get_partition())
                },
                get_stage3DProxy: function () {
                    return this._stage3DProxy
                },
                onContext3DRecreated: function (a) {
                    this._depthTextureInvalid = !0
                },
                get_layeredView: function () {
                    return this._layeredView
                },
                initHitField: function () {
                    this._hitField = new Ja;
                    this._hitField.set_alpha(0);
                    this._hitField.doubleClickEnabled = !0;
                    this._hitField.get_graphics().beginFill(0);
                    this._hitField.get_graphics().drawRect(0, 0, 100, 100);
                    this.addChild(this._hitField)
                },
                set_backgroundColor: function (a) {
                    this._backgroundColor = a;
                    this._renderer.set_backgroundR(J.toFloat(a >>>
                        16 & 255) / J.toFloat(255));
                    this._renderer.set_backgroundG(J.toFloat(a >>> 8 & 255) / J.toFloat(255));
                    this._renderer.set_backgroundB(J.toFloat(a & 255) / J.toFloat(255));
                    return a
                },
                get_camera: function () {
                    return this._camera
                },
                get_scene: function () {
                    return this._scene
                },
                get_width: function () {
                    return this._width
                },
                set_width: function (a) {
                    null != this._stage3DProxy && this._stage3DProxy.get_usesSoftwareRendering() && 2048 < a && (a = 2048);
                    if (this._width == a) return a;
                    this._hitField.set_width(a);
                    this._width = a;
                    this._localBRPos.x = a + this._localTLPos.x;
                    this._globalWidth = null != this.parent ? this.parent.localToGlobal(this._localBRPos).x - this._globalPos.x : a;
                    null != this._rttBufferManager && this._rttBufferManager.set_viewWidth(this._globalWidth | 0);
                    this._aspectRatio = this._globalWidth / this._globalHeight;
                    this._camera.get_lens().set_aspectRatio(this._aspectRatio);
                    this._depthTextureInvalid = !0;
                    this._renderer.set_viewWidth(this._globalWidth);
                    this._scissorRect.width = this._globalWidth;
                    this._scissorRectDirty = this._backBufferInvalid = !0;
                    return a
                },
                get_height: function () {
                    return this._height
                },
                set_height: function (a) {
                    null != this._stage3DProxy && this._stage3DProxy.get_usesSoftwareRendering() && 2048 < a && (a = 2048);
                    if (this._height == a) return a;
                    this._hitField.set_height(a);
                    this._height = a;
                    this._localBRPos.y = a + this._localTLPos.y;
                    this._globalHeight = null != this.parent ? this.parent.localToGlobal(this._localBRPos).y - this._globalPos.y : a;
                    null != this._rttBufferManager && this._rttBufferManager.set_viewHeight(this._globalHeight | 0);
                    this._aspectRatio = this._globalWidth / this._globalHeight;
                    this._camera.get_lens().set_aspectRatio(this._aspectRatio);
                    this._depthTextureInvalid = !0;
                    this._renderer.set_viewHeight(this._globalHeight);
                    this._scissorRect.height = this._globalHeight;
                    this._scissorRectDirty = this._backBufferInvalid = !0;
                    return a
                },
                set_x: function (a) {
                    if (this.get_x() == a) return a;
                    Ja.prototype.set_x.call(this, a);
                    this._localTLPos.x = a;
                    var b = null != this.parent ? this.parent.localToGlobal(this._localTLPos).x : a;
                    this._globalPos.x = b;
                    this._globalPosDirty = !0;
                    return a
                },
                set_y: function (a) {
                    if (this.get_y() == a) return a;
                    Ja.prototype.set_y.call(this, a);
                    this._localTLPos.y =
                        a;
                    var b = null != this.parent ? this.parent.localToGlobal(this._localTLPos).y : a;
                    this._globalPos.y = b;
                    this._globalPosDirty = !0;
                    return a
                },
                set_visible: function (a) {
                    Ja.prototype.set_visible.call(this, a);
                    null == this._stage3DProxy || this._shareContext || this._stage3DProxy.set_visible(a);
                    return a
                },
                get_shareContext: function () {
                    return this._shareContext
                },
                updateBackBuffer: function () {
                    if (null != this._stage3DProxy.get_context3D() && !this._shareContext)
                        if (0 < this._globalWidth && 0 < this._globalHeight) this._stage3DProxy.get_usesSoftwareRendering() &&
                        (2048 < this._globalWidth && (this._globalWidth = 2048), 2048 < this._globalHeight && (this._globalHeight = 2048)), this._stage3DProxy.configureBackBuffer(this._globalWidth | 0, this._globalHeight | 0, this._antiAlias, !0), this._backBufferInvalid = !1;
                        else {
                            var a = new ba(this.stage.get_x() + this.stage.stageWidth, this.stage.get_y() + this.stage.stageHeight);
                            this.set_width(null != this.parent ? this.parent.globalToLocal(a).x - this._localTLPos.x : this.stage.stageWidth);
                            this.set_height(null != this.parent ? this.parent.globalToLocal(a).y -
                                this._localTLPos.y : this.stage.stageHeight)
                        }
                },
                render: function () {
                    Oa.drawTriangleCount = 0;
                    if (null != this.get_stage3DProxy().get_context3D() && this.get_stage3DProxy().recoverFromDisposal()) {
                        this._backBufferInvalid && this.updateBackBuffer();
                        this._shareContext && this._layeredView && this.get_stage3DProxy().clearDepthBuffer();
                        if (!this._parentIsStage) {
                            var a = this.parent.localToGlobal(this._localTLPos);
                            if (this._globalPos.x != a.x || this._globalPos.y != a.y) this._globalPos = a, this._globalPosDirty = !0
                        }
                        this._globalPosDirty &&
                        this.updateGlobalPos();
                        this.updateTime();
                        this.updateViewSizeData();
                        this._entityCollector.clear();
                        this._scene.traversePartitions(this._entityCollector);
                        this._mouse3DManager.updateCollider(this);
                        this._touch3DManager.updateCollider();
                        this._requireDepthRender && this.renderSceneDepthToTexture(this._entityCollector);
                        this._depthPrepass && this.renderDepthPrepass(this._entityCollector);
                        this._renderer.set_clearOnRender(!this._depthPrepass);
                        null != this._filter3DRenderer && null != this._stage3DProxy.get_context3D() ?
                            (this._renderer.render(this._entityCollector, this._filter3DRenderer.getMainInputTexture(this._stage3DProxy), this._rttBufferManager.get_renderToTextureRect()), this._filter3DRenderer.render(this._stage3DProxy, this.get_camera(), this._depthRender)) : (this._renderer.set_shareContext(this._shareContext), this._shareContext ? this._renderer.render(this._entityCollector, null, this._scissorRect) : this._renderer.render(this._entityCollector));
                        this._shareContext || (this.get_stage3DProxy().present(), this._mouse3DManager.fireMouseEvents(),
                            this._touch3DManager.fireTouchEvents());
                        this._entityCollector.cleanUp();
                        this.get_stage3DProxy().set_bufferClear(!1)
                    } else this._backBufferInvalid = !0
                },
                updateGlobalPos: function () {
                    this._globalPosDirty = !1;
                    if (null != this._stage3DProxy) {
                        if (this._shareContext) {
                            var a = this._globalPos.x,
                                b = this._stage3DProxy.get_x();
                            this._scissorRect.x = a - b;
                            a = this._globalPos.y;
                            b = this._stage3DProxy.get_y();
                            this._scissorRect.y = a - b
                        } else this._scissorRect.x = 0, this._scissorRect.y = 0, this._stage3DProxy.set_x(this._globalPos.x), this._stage3DProxy.set_y(this._globalPos.y);
                        this._scissorRectDirty = !0
                    }
                },
                updateTime: function () {
                    var a = Na.getTimer();
                    0 == this._time && (this._time = a);
                    this._deltaTime = a - this._time;
                    this._time = a
                },
                updateViewSizeData: function () {
                    this._camera.get_lens().set_aspectRatio(this._aspectRatio);
                    this._scissorRectDirty && (this._scissorRectDirty = !1, this._camera.get_lens().updateScissorRect(this._scissorRect.x, this._scissorRect.y, this._scissorRect.width, this._scissorRect.height));
                    this._viewportDirty && (this._viewportDirty = !1, this._camera.get_lens().updateViewport(this._stage3DProxy.get_viewPort().x,
                        this._stage3DProxy.get_viewPort().y, this._stage3DProxy.get_viewPort().width, this._stage3DProxy.get_viewPort().height));
                    null != this._filter3DRenderer || this._renderer.get_renderToTexture() ? (this._renderer.set_textureRatioX(this._rttBufferManager.get_textureRatioX()), this._renderer.set_textureRatioY(this._rttBufferManager.get_textureRatioY())) : (this._renderer.set_textureRatioX(1), this._renderer.set_textureRatioY(1))
                },
                renderDepthPrepass: function (a) {
                    this._depthRenderer.set_disableColor(!0);
                    null != this._filter3DRenderer ||
                    this._renderer.get_renderToTexture() ? (this._depthRenderer.set_textureRatioX(this._rttBufferManager.get_textureRatioX()), this._depthRenderer.set_textureRatioY(this._rttBufferManager.get_textureRatioY()), this._depthRenderer.render(a, this._filter3DRenderer.getMainInputTexture(this._stage3DProxy), this._rttBufferManager.get_renderToTextureRect())) : (this._depthRenderer.set_textureRatioX(1), this._depthRenderer.set_textureRatioY(1), this._depthRenderer.render(a));
                    this._depthRenderer.set_disableColor(!1)
                },
                renderSceneDepthToTexture: function (a) {
                    (this._depthTextureInvalid || null == this._depthRender) && this.initDepthTexture(this._stage3DProxy.get_context3D());
                    this._depthRenderer.set_textureRatioX(this._rttBufferManager.get_textureRatioX());
                    this._depthRenderer.set_textureRatioY(this._rttBufferManager.get_textureRatioY());
                    this._depthRenderer.render(a, this._depthRender)
                },
                initDepthTexture: function (a) {
                    this._depthTextureInvalid = !1;
                    null != this._depthRender && this._depthRender.dispose();
                    this._depthRender = a.createTexture(this._rttBufferManager.get_textureWidth(),
                        this._rttBufferManager.get_textureHeight(), 1, !0)
                },
                unproject: function (a, b, c, d) {
                    return this._camera.unproject((2 * (a - this._globalPos.x) - this._globalWidth) / this._stage3DProxy.get_width(), (2 * (b - this._globalPos.y) - this._globalHeight) / this._stage3DProxy.get_height(), c, d)
                },
                get_entityCollector: function () {
                    return this._entityCollector
                },
                onLensChanged: function (a) {
                    this._viewportDirty = this._scissorRectDirty = !0
                },
                onAddedToStage: function (a) {
                    this._addedToStage || (this._addedToStage = !0, null == this._stage3DProxy && (this._stage3DProxy = -1 == this._contextIndex ? Tb.getInstance(this.stage).getFreeStage3DProxy(this._forceSoftware, this._profile) : Tb.getInstance(this.stage).getStage3DProxy(this._contextIndex, this._forceSoftware, this._profile), this._stage3DProxy.addEventListener("ViewportUpdated", p(this, this.onViewportUpdated)), this._stage3DProxy.addEventListener("Context3DRecreated", p(this, this.onContext3DRecreated))), this._globalPosDirty = !0, this._rttBufferManager = qd.getInstance(this._stage3DProxy), this._renderer.set_stage3DProxy(this._depthRenderer.set_stage3DProxy(this._stage3DProxy)),
                        a = new ba(this.stage.get_x() + this.stage.stageWidth, this.stage.get_y() + this.stage.stageHeight), 0 == this._globalWidth ? this.set_width(null != this.parent ? this.parent.globalToLocal(a).x - this._localTLPos.x : this.stage.stageWidth) : this._rttBufferManager.set_viewWidth(this._globalWidth | 0), 0 == this._globalHeight ? this.set_height(null != this.parent ? this.parent.globalToLocal(a).y - this._localTLPos.y : this.stage.stageHeight) : this._rttBufferManager.set_viewHeight(this._globalHeight | 0), this._shareContext && this._mouse3DManager.addViewLayer(this))
                },
                onAdded: function (a) {
                    this._parentIsStage = this.parent == this.stage;
                    this._globalPos = this.parent.localToGlobal(this._localTLPos);
                    this._globalPosDirty = !0
                },
                onViewportUpdated: function (a) {
                    if (this._shareContext) {
                        a = this._globalPos.x;
                        var b = this._stage3DProxy.get_x();
                        this._scissorRect.x = a - b;
                        a = this._globalPos.y;
                        b = this._stage3DProxy.get_y();
                        this._scissorRect.y = a - b;
                        this._scissorRect.width = this._globalWidth;
                        this._scissorRect.height = this._globalHeight;
                        this._scissorRectDirty = !0
                    }
                    this._viewportDirty = !0
                },
                __class__: Td,
                __properties__: l(Ja.prototype.__properties__, {
                    get_entityCollector: "get_entityCollector",
                    get_shareContext: "get_shareContext",
                    get_scene: "get_scene",
                    get_camera: "get_camera",
                    set_backgroundColor: "set_backgroundColor",
                    get_layeredView: "get_layeredView",
                    get_stage3DProxy: "get_stage3DProxy"
                })
            });
            var kl = function (a) {
                this._autoUpdate = !0;
                this.set_targetObject(a)
            };
            g["away3d.controllers.ControllerBase"] = kl;
            kl.__name__ = "away3d.controllers.ControllerBase";
            kl.prototype = {
                notifyUpdate: function () {
                    null != this._targetObject &&
                    null != this._targetObject.get_implicitPartition() && this._autoUpdate && this._targetObject.get_implicitPartition().markForUpdate(this._targetObject)
                },
                set_targetObject: function (a) {
                    if (this._targetObject == a) return a;
                    null != this._targetObject && this._autoUpdate && (this._targetObject._controller = null);
                    this._targetObject = a;
                    null != this._targetObject && this._autoUpdate && (this._targetObject._controller = this);
                    this.notifyUpdate();
                    return a
                },
                update: function (a) {
                    throw new Wa;
                },
                __class__: kl,
                __properties__: {
                    set_targetObject: "set_targetObject"
                }
            };
            var zd = function () {
                this._uvsDirty = !0;
                this._scaleU = this._scaleV = 1;
                this._vertexNormalsDirty = this._vertexTangentsDirty = !0;
                this._autoGenerateUVs = this._useFaceWeights = !1;
                this._autoDeriveVertexNormals = this._autoDeriveVertexTangents = !0;
                this._indicesInvalid = D.toBoolVector(null, 8, !0);
                this._indexBufferContext = D.toObjectVector(null, 8);
                this._indexBuffer = D.toObjectVector(null, 8);
                this._faceNormalsDirty = this._faceTangentsDirty = !0
            };
            g["away3d.core.base.SubGeometryBase"] = zd;
            zd.__name__ = "away3d.core.base.SubGeometryBase";
            zd.prototype = {
                set_autoGenerateDummyUVs: function (a) {
                    return this._uvsDirty = this._autoGenerateUVs = a
                },
                get_numTriangles: function () {
                    return this._numTriangles
                },
                getIndexBuffer: function (a) {
                    var b = a._stage3DIndex,
                        c = a._context3D;
                    if (null == this._indexBuffer.get(b) || this._indexBufferContext.get(b) != c) this._indexBuffer.set(b, a.createIndexBuffer(this._numIndices)), this._indexBufferContext.set(b, c), this._indicesInvalid.set(b, !0);
                    this._indicesInvalid.get(b) && (this._indexBuffer.get(b).uploadFromVector(this._indices,
                        0, this._numIndices), this._indicesInvalid.set(b, !1));
                    return this._indexBuffer.get(b)
                },
                updateFaceTangents: function () {
                    var a = 0,
                        b = this._indices.get_length(),
                        c = this._vertexData,
                        d = this.get_UVData(),
                        e = this.get_vertexStride(),
                        f = this.get_vertexOffset(),
                        h = this.get_UVStride(),
                        r = this.get_UVOffset();
                    null == this._faceTangents && (this._faceTangents = D.toFloatVector(null, this._indices.get_length(), !0));
                    for (; a < b;) {
                        var m = this._indices.get(a);
                        var C = this._indices.get(a + 1);
                        var wa = this._indices.get(a + 2);
                        var k = r + m * h + 1;
                        var g =
                            d.get(k);
                        k = r + C * h + 1;
                        var q = d.get(k) - g;
                        k = r + wa * h + 1;
                        k = d.get(k) - g;
                        g = f + m * e;
                        var n = c.get(g);
                        var p = c.get(g + 1);
                        var l = c.get(g + 2);
                        g = f + C * e;
                        var y = c.get(g) - n;
                        m = c.get(g + 1) - p;
                        C = c.get(g + 2) - l;
                        g = f + wa * e;
                        wa = c.get(g) - n;
                        p = c.get(g + 1) - p;
                        g = c.get(g + 2) - l;
                        wa = k * y - q * wa;
                        m = k * m - q * p;
                        k = k * C - q * g;
                        q = 1 / Math.sqrt(wa * wa + m * m + k * k);
                        this._faceTangents.set(a++, q * wa);
                        this._faceTangents.set(a++, q * m);
                        this._faceTangents.set(a++, q * k)
                    }
                    this._faceTangentsDirty = !1
                },
                updateFaceNormals: function () {
                    var a = 0,
                        b = 0,
                        c = 0,
                        d = this._indices.get_length(),
                        e = this._vertexData,
                        f = this.get_vertexStride(),
                        h = this.get_vertexOffset();
                    null == this._faceNormals && (this._faceNormals = D.toFloatVector(null, d, !0));
                    null == this._faceWeights && (this._faceWeights = D.toFloatVector(null, d / 3 | 0, !0));
                    for (; a < d;) {
                        var r = h + this._indices.get(a++) * f;
                        var m = e.get(r);
                        var C = e.get(r + 1);
                        var wa = e.get(r + 2);
                        r = h + this._indices.get(a++) * f;
                        var k = e.get(r);
                        var g = e.get(r + 1);
                        var q = e.get(r + 2);
                        r = h + this._indices.get(a++) * f;
                        var n = e.get(r);
                        var p = e.get(r + 1);
                        r = e.get(r + 2);
                        n -= m;
                        p -= C;
                        r -= wa;
                        m = k - m;
                        C = g - C;
                        q -= wa;
                        wa = r * C - p * q;
                        q = n * q - r * m;
                        n = p * m - n * C;
                        p = Math.sqrt(wa * wa + q * q + n * n);
                        this._useFaceWeights && (C = 1E4 * p, 1 > C && (C = 1), this._faceWeights.set(c++, C));
                        p = 1 / p;
                        this._faceNormals.set(b++, wa * p);
                        this._faceNormals.set(b++, q * p);
                        this._faceNormals.set(b++, n * p)
                    }
                    this._faceNormalsDirty = !1
                },
                updateVertexNormals: function (a) {
                    this._faceNormalsDirty && this.updateFaceNormals();
                    var b = 0,
                        c = 1,
                        d = 2,
                        e = this._vertexData.get_length(),
                        f = this.get_vertexNormalStride(),
                        h = this.get_vertexNormalOffset();
                    null == a && (a = D.toFloatVector(null, e, !0));
                    for (var r = h; r < e;) a.set(r, 0), a.set(r +
                        1, 0), a.set(r + 2, 0), r += f;
                    for (var m = r = 0, C = this._indices.get_length(), wa, k; r < C;) {
                        k = this._useFaceWeights ? this._faceWeights.get(m++) : 1;
                        wa = h + this._indices.get(r++) * f;
                        var g = wa++,
                            q = a;
                        q.set(g, q.get(g) + this._faceNormals.get(b) * k);
                        g = wa++;
                        q = a;
                        q.set(g, q.get(g) + this._faceNormals.get(c) * k);
                        g = a;
                        g.set(wa, g.get(wa) + this._faceNormals.get(d) * k);
                        wa = h + this._indices.get(r++) * f;
                        g = wa++;
                        q = a;
                        q.set(g, q.get(g) + this._faceNormals.get(b) * k);
                        g = wa++;
                        q = a;
                        q.set(g, q.get(g) + this._faceNormals.get(c) * k);
                        g = a;
                        g.set(wa, g.get(wa) + this._faceNormals.get(d) *
                            k);
                        wa = h + this._indices.get(r++) * f;
                        g = wa++;
                        q = a;
                        q.set(g, q.get(g) + this._faceNormals.get(b) * k);
                        g = wa++;
                        q = a;
                        q.set(g, q.get(g) + this._faceNormals.get(c) * k);
                        g = a;
                        g.set(wa, g.get(wa) + this._faceNormals.get(d) * k);
                        b += 3;
                        c += 3;
                        d += 3
                    }
                    for (r = h; r < e;) b = a.get(r), c = a.get(r + 1), d = a.get(r + 2), h = 1 / Math.sqrt(b * b + c * c + d * d), a.set(r, b * h), a.set(r + 1, c * h), a.set(r + 2, d * h), r += f;
                    this._vertexNormalsDirty = !1;
                    return a
                },
                updateVertexTangents: function (a) {
                    this._faceTangentsDirty && this.updateFaceTangents();
                    var b, c = this._vertexData.get_length(),
                        d = this.get_vertexTangentStride(),
                        e = this.get_vertexTangentOffset();
                    null == a && (a = D.toFloatVector(null, c, !0));
                    for (b = e; b < c;) a.set(b, 0), a.set(b + 1, 0), a.set(b + 2, 0), b += d;
                    var f = 0,
                        h = this._indices.get_length(),
                        r = 0,
                        m = 1,
                        C = 2;
                    for (b = 0; b < h;) {
                        var g = this._useFaceWeights ? this._faceWeights.get(f++) : 1;
                        var k = e + this._indices.get(b++) * d;
                        var q = k++,
                            n = a;
                        n.set(q, n.get(q) + this._faceTangents.get(r) * g);
                        q = k++;
                        n = a;
                        n.set(q, n.get(q) + this._faceTangents.get(m) * g);
                        q = a;
                        q.set(k, q.get(k) + this._faceTangents.get(C) * g);
                        k = e + this._indices.get(b++) * d;
                        q = k++;
                        n = a;
                        n.set(q, n.get(q) +
                            this._faceTangents.get(r) * g);
                        q = k++;
                        n = a;
                        n.set(q, n.get(q) + this._faceTangents.get(m) * g);
                        q = a;
                        q.set(k, q.get(k) + this._faceTangents.get(C) * g);
                        k = e + this._indices.get(b++) * d;
                        q = k++;
                        n = a;
                        n.set(q, n.get(q) + this._faceTangents.get(r) * g);
                        q = k++;
                        n = a;
                        n.set(q, n.get(q) + this._faceTangents.get(m) * g);
                        q = a;
                        q.set(k, q.get(k) + this._faceTangents.get(C) * g);
                        r += 3;
                        m += 3;
                        C += 3
                    }
                    for (b = e; b < c;) e = a.get(b), f = a.get(b + 1), h = a.get(b + 2), g = 1 / Math.sqrt(e * e + f * f + h * h), a.set(b, e * g), a.set(b + 1, f * g), a.set(b + 2, h * g), b += d;
                    this._vertexTangentsDirty = !1;
                    return a
                },
                get_indexData: function () {
                    return this._indices
                },
                updateIndexData: function (a) {
                    this._indices = a;
                    this._numIndices = a.get_length();
                    a = this._numIndices / 3 | 0;
                    this._numTriangles != a && this.disposeIndexBuffers(this._indexBuffer);
                    this._numTriangles = a;
                    this.invalidateBuffers(this._indicesInvalid);
                    this._faceNormalsDirty = !0;
                    this._autoDeriveVertexNormals && (this._vertexNormalsDirty = !0);
                    this._autoDeriveVertexTangents && (this._vertexTangentsDirty = !0)
                },
                disposeIndexBuffers: function (a) {
                    null != a.get(0) && (Oa.disposeIndexBuffer(a.get(0)),
                        a.set(0, null));
                    null != a.get(1) && (Oa.disposeIndexBuffer(a.get(1)), a.set(1, null));
                    null != a.get(2) && (Oa.disposeIndexBuffer(a.get(2)), a.set(2, null));
                    null != a.get(3) && (Oa.disposeIndexBuffer(a.get(3)), a.set(3, null));
                    null != a.get(4) && (Oa.disposeIndexBuffer(a.get(4)), a.set(4, null));
                    null != a.get(5) && (Oa.disposeIndexBuffer(a.get(5)), a.set(5, null));
                    null != a.get(6) && (Oa.disposeIndexBuffer(a.get(6)), a.set(6, null));
                    null != a.get(7) && (Oa.disposeIndexBuffer(a.get(7)), a.set(7, null))
                },
                disposeVertexBuffers: function (a) {
                    null !=
                    a.get(0) && (Oa.disposeVertexBuffer(a.get(0)), a.set(0, null));
                    null != a.get(1) && (Oa.disposeVertexBuffer(a.get(1)), a.set(1, null));
                    null != a.get(2) && (Oa.disposeVertexBuffer(a.get(2)), a.set(2, null));
                    null != a.get(3) && (Oa.disposeVertexBuffer(a.get(3)), a.set(3, null));
                    null != a.get(4) && (Oa.disposeVertexBuffer(a.get(4)), a.set(4, null));
                    null != a.get(5) && (Oa.disposeVertexBuffer(a.get(5)), a.set(5, null));
                    null != a.get(6) && (Oa.disposeVertexBuffer(a.get(6)), a.set(6, null));
                    null != a.get(7) && (Oa.disposeVertexBuffer(a.get(7)), a.set(7,
                        null))
                },
                invalidateBuffers: function (a) {
                    a.set(0, !0);
                    a.set(1, !0);
                    a.set(2, !0);
                    a.set(3, !0);
                    a.set(4, !0);
                    a.set(5, !0);
                    a.set(6, !0);
                    a.set(7, !0)
                },
                get_UVStride: function () {
                    throw new Wa;
                },
                get_vertexNormalData: function () {
                    throw new Wa;
                },
                get_vertexTangentData: function () {
                    throw new Wa;
                },
                get_UVData: function () {
                    throw new Wa;
                },
                get_vertexStride: function () {
                    throw new Wa;
                },
                get_vertexNormalStride: function () {
                    throw new Wa;
                },
                get_vertexTangentStride: function () {
                    throw new Wa;
                },
                get_vertexOffset: function () {
                    throw new Wa;
                },
                get_vertexNormalOffset: function () {
                    throw new Wa;
                },
                get_vertexTangentOffset: function () {
                    throw new Wa;
                },
                get_UVOffset: function () {
                    throw new Wa;
                },
                invalidateBounds: function () {
                    null != this._parentGeometry && this._parentGeometry.invalidateBounds(T.__cast(this, yg))
                },
                set_parentGeometry: function (a) {
                    return this._parentGeometry = a
                },
                get_scaleU: function () {
                    return this._scaleU
                },
                get_scaleV: function () {
                    return this._scaleV
                },
                applyTransformation: function (a) {
                    var b = this._vertexData,
                        c = this.get_vertexNormalData(),
                        d = this.get_vertexTangentData(),
                        e = this.get_vertexStride(),
                        f = this.get_vertexNormalStride(),
                        h = this.get_vertexTangentStride(),
                        r = this.get_vertexOffset(),
                        m = this.get_vertexNormalOffset(),
                        C = this.get_vertexTangentOffset(),
                        g = b.get_length() / e | 0,
                        k = new Q,
                        q = null != c,
                        n = null != d,
                        p = null;
                    if (q || n) p = a.clone(), p.invert(), p.transpose();
                    for (var l = C, y = 0; y < g;) {
                        y++;
                        C = r + 1;
                        var v = r + 2;
                        k.x = b.get(r);
                        k.y = b.get(C);
                        k.z = b.get(v);
                        k = a.transformVector(k);
                        b.set(r, k.x);
                        b.set(C, k.y);
                        b.set(v, k.z);
                        r += e;
                        q && (C = m + 1, v = m + 2, k.x = c.get(m), k.y = c.get(C), k.z = c.get(v), k = p.deltaTransformVector(k), k.normalize(), c.set(m, k.x), c.set(C, k.y), c.set(v,
                            k.z), m += f);
                        n && (C = l + 1, v = l + 2, k.x = d.get(l), k.y = d.get(C), k.z = d.get(v), k = p.deltaTransformVector(k), k.normalize(), d.set(l, k.x), d.set(C, k.y), d.set(v, k.z), l += h)
                    }
                },
                updateDummyUVs: function (a) {
                    this._uvsDirty = !1;
                    var b = this.get_UVStride(),
                        c = b - 2;
                    b = this._vertexData.get_length() / this.get_vertexStride() * b | 0;
                    null == a && (a = D.toFloatVector(null));
                    a.fixed = !1;
                    a.set_length(b);
                    a.fixed = !0;
                    for (var d = this.get_UVOffset(), e = 0; d < b;) a.set(d++, .5 * e), a.set(d++, 1 - (e & 1)), d += c, 3 == ++e && (e = 0);
                    return a
                },
                __class__: zd,
                __properties__: {
                    set_parentGeometry: "set_parentGeometry",
                    set_autoGenerateDummyUVs: "set_autoGenerateDummyUVs",
                    get_scaleV: "get_scaleV",
                    get_scaleU: "get_scaleU",
                    get_UVOffset: "get_UVOffset",
                    get_vertexTangentOffset: "get_vertexTangentOffset",
                    get_vertexNormalOffset: "get_vertexNormalOffset",
                    get_vertexOffset: "get_vertexOffset",
                    get_vertexTangentStride: "get_vertexTangentStride",
                    get_vertexNormalStride: "get_vertexNormalStride",
                    get_vertexStride: "get_vertexStride",
                    get_UVData: "get_UVData",
                    get_vertexTangentData: "get_vertexTangentData",
                    get_vertexNormalData: "get_vertexNormalData",
                    get_UVStride: "get_UVStride",
                    get_indexData: "get_indexData",
                    get_numTriangles: "get_numTriangles"
                }
            };
            var yg = function () {
            };
            g["away3d.core.base.ISubGeometry"] = yg;
            yg.__name__ = "away3d.core.base.ISubGeometry";
            yg.__isInterface__ = !0;
            yg.prototype = {
                __class__: yg,
                __properties__: {
                    get_UVData: "get_UVData",
                    get_indexData: "get_indexData",
                    get_UVOffset: "get_UVOffset",
                    get_vertexOffset: "get_vertexOffset",
                    get_vertexData: "get_vertexData",
                    get_UVStride: "get_UVStride",
                    get_vertexStride: "get_vertexStride",
                    get_numTriangles: "get_numTriangles",
                    get_numVertices: "get_numVertices",
                    set_parentGeometry: "set_parentGeometry"
                }
            };
            var Bb = function () {
                this._bufferContext = D.toObjectVector(null, 8);
                this._vertexBuffer = D.toObjectVector(null, 8);
                this._vertexDataInvalid = D.toBoolVector(null, 8, !0);
                zd.call(this);
                this._autoDeriveVertexTangents = this._autoDeriveVertexNormals = !1
            };
            g["away3d.core.base.CompactSubGeometry"] = Bb;
            Bb.__name__ = "away3d.core.base.CompactSubGeometry";
            Bb.__interfaces__ = [yg];
            Bb.__super__ = zd;
            Bb.prototype = l(zd.prototype, {
                get_numVertices: function () {
                    return this._numVertices
                },
                updateData: function (a) {
                    this._autoDeriveVertexNormals && (this._vertexNormalsDirty = !0);
                    this._autoDeriveVertexTangents && (this._vertexTangentsDirty = !0);
                    this._isolatedVertexPositionDataDirty = this._faceTangentsDirty = this._faceNormalsDirty = !0;
                    this._vertexData = a;
                    a = this._vertexData.get_length() / 13 | 0;
                    a != this._numVertices && this.disposeVertexBuffers(this._vertexBuffer);
                    this._numVertices = a;
                    if (0 == this._numVertices) throw new Fa("Bad data: geometry can't have zero triangles");
                    this.invalidateBuffers(this._vertexDataInvalid);
                    this.invalidateBounds()
                },
                activateVertexBuffer: function (a, b) {
                    var c = b._stage3DIndex,
                        d = b._context3D;
                    c != this._contextIndex && this.updateActiveBuffer(c);
                    null != this._activeBuffer && this._activeContext == d || this.createBuffer(c, d, b);
                    this._activeDataInvalid && this.uploadData(c);
                    d.setVertexBufferAt(a, this._activeBuffer, 0, 3)
                },
                activateUVBuffer: function (a, b) {
                    var c = b._stage3DIndex,
                        d = b._context3D;
                    this._uvsDirty && this._autoGenerateUVs && (this._vertexData = this.updateDummyUVs(this._vertexData), this.invalidateBuffers(this._vertexDataInvalid));
                    c != this._contextIndex && this.updateActiveBuffer(c);
                    null != this._activeBuffer && this._activeContext == d || this.createBuffer(c, d, b);
                    this._activeDataInvalid && this.uploadData(c);
                    d.setVertexBufferAt(a, this._activeBuffer, 9, 2)
                },
                activateSecondaryUVBuffer: function (a, b) {
                    var c = b._stage3DIndex,
                        d = b._context3D;
                    c != this._contextIndex && this.updateActiveBuffer(c);
                    null != this._activeBuffer && this._activeContext == d || this.createBuffer(c, d, b);
                    this._activeDataInvalid && this.uploadData(c);
                    d.setVertexBufferAt(a, this._activeBuffer,
                        11, 2)
                },
                uploadData: function (a) {
                    this._activeBuffer.uploadFromVector(this._vertexData, 0, this._numVertices);
                    this._vertexDataInvalid.set(a, this._activeDataInvalid = !1)
                },
                activateVertexNormalBuffer: function (a, b) {
                    var c = b._stage3DIndex,
                        d = b._context3D;
                    c != this._contextIndex && this.updateActiveBuffer(c);
                    null != this._activeBuffer && this._activeContext == d || this.createBuffer(c, d, b);
                    this._activeDataInvalid && this.uploadData(c);
                    d.setVertexBufferAt(a, this._activeBuffer, 3, 3)
                },
                activateVertexTangentBuffer: function (a, b) {
                    var c =
                            b._stage3DIndex,
                        d = b._context3D;
                    c != this._contextIndex && this.updateActiveBuffer(c);
                    null != this._activeBuffer && this._activeContext == d || this.createBuffer(c, d, b);
                    this._activeDataInvalid && this.uploadData(c);
                    d.setVertexBufferAt(a, this._activeBuffer, 6, 3)
                },
                createBuffer: function (a, b, c) {
                    this._vertexBuffer.set(a, this._activeBuffer = c.createVertexBuffer(this._numVertices, 13));
                    this._bufferContext.set(a, this._activeContext = b);
                    this._vertexDataInvalid.set(a, this._activeDataInvalid = !0)
                },
                updateActiveBuffer: function (a) {
                    this._contextIndex =
                        a;
                    this._activeDataInvalid = this._vertexDataInvalid.get(a);
                    this._activeBuffer = this._vertexBuffer.get(a);
                    this._activeContext = this._bufferContext.get(a)
                },
                get_vertexData: function () {
                    this._autoDeriveVertexNormals && this._vertexNormalsDirty && (this._vertexData = this.updateVertexNormals(this._vertexData));
                    this._autoDeriveVertexTangents && this._vertexTangentsDirty && (this._vertexData = this.updateVertexTangents(this._vertexData));
                    this._uvsDirty && this._autoGenerateUVs && (this._vertexData = this.updateDummyUVs(this._vertexData));
                    return this._vertexData
                },
                updateVertexNormals: function (a) {
                    this.invalidateBuffers(this._vertexDataInvalid);
                    return zd.prototype.updateVertexNormals.call(this, a)
                },
                updateVertexTangents: function (a) {
                    this._vertexNormalsDirty && (this._vertexData = this.updateVertexNormals(this._vertexData));
                    this.invalidateBuffers(this._vertexDataInvalid);
                    return zd.prototype.updateVertexTangents.call(this, a)
                },
                get_vertexNormalData: function () {
                    this._autoDeriveVertexNormals && this._vertexNormalsDirty && (this._vertexData = this.updateVertexNormals(this._vertexData));
                    return this._vertexData
                },
                get_vertexTangentData: function () {
                    this._autoDeriveVertexTangents && this._vertexTangentsDirty && (this._vertexData = this.updateVertexTangents(this._vertexData));
                    return this._vertexData
                },
                get_UVData: function () {
                    this._uvsDirty && this._autoGenerateUVs && (this._vertexData = this.updateDummyUVs(this._vertexData), this.invalidateBuffers(this._vertexDataInvalid));
                    return this._vertexData
                },
                applyTransformation: function (a) {
                    zd.prototype.applyTransformation.call(this, a);
                    this.invalidateBuffers(this._vertexDataInvalid)
                },
                get_vertexStride: function () {
                    return 13
                },
                get_vertexNormalStride: function () {
                    return 13
                },
                get_vertexTangentStride: function () {
                    return 13
                },
                get_UVStride: function () {
                    return 13
                },
                get_vertexOffset: function () {
                    return 0
                },
                get_vertexNormalOffset: function () {
                    return 3
                },
                get_vertexTangentOffset: function () {
                    return 6
                },
                get_UVOffset: function () {
                    return 9
                },
                disposeVertexBuffers: function (a) {
                    zd.prototype.disposeVertexBuffers.call(this, a);
                    this._activeBuffer = null
                },
                invalidateBuffers: function (a) {
                    zd.prototype.invalidateBuffers.call(this,
                        a);
                    this._activeDataInvalid = !0
                },
                __class__: Bb,
                __properties__: l(zd.prototype.__properties__, {
                    get_numVertices: "get_numVertices"
                })
            });
            var Ca = function () {
                B.call(this);
                this._subGeometries = D.toObjectVector(null)
            };
            g["away3d.core.base.Geometry"] = Ca;
            Ca.__name__ = "away3d.core.base.Geometry";
            Ca.__interfaces__ = [t];
            Ca.__super__ = B;
            Ca.prototype = l(B.prototype, {
                get_subGeometries: function () {
                    return this._subGeometries
                },
                applyTransformation: function (a) {
                    for (var b = 0, c = this._subGeometries.get_length(); b < c;) {
                        var d = b++;
                        this._subGeometries.get(d).applyTransformation(a)
                    }
                },
                addSubGeometry: function (a) {
                    this._subGeometries.push(a);
                    a.set_parentGeometry(this);
                    this.hasEventListener("SubGeometryAdded") && this.dispatchEvent(new zg("SubGeometryAdded", a));
                    this.invalidateBounds(a)
                },
                validate: function () {
                },
                invalidateBounds: function (a) {
                    this.hasEventListener("BoundsInvalid") && this.dispatchEvent(new zg("BoundsInvalid", a))
                },
                __class__: Ca,
                __properties__: l(B.prototype.__properties__, {
                    get_subGeometries: "get_subGeometries"
                })
            });
            var Ag = function () {
            };
            g["away3d.core.base.IMaterialOwner"] = Ag;
            Ag.__name__ =
                "away3d.core.base.IMaterialOwner";
            Ag.__isInterface__ = !0;
            Ag.prototype = {
                __class__: Ag,
                __properties__: {
                    get_animator: "get_animator",
                    get_material: "get_material"
                }
            };
            var Df = function () {
            };
            g["away3d.core.base.IRenderable"] = Df;
            Df.__name__ = "away3d.core.base.IRenderable";
            Df.__isInterface__ = !0;
            Df.__interfaces__ = [Ag];
            Df.prototype = {
                __class__: Df,
                __properties__: {
                    get_numTriangles: "get_numTriangles",
                    get_uvTransform2: "get_uvTransform2",
                    get_uvTransform: "get_uvTransform",
                    get_castsShadows: "get_castsShadows",
                    get_sourceEntity: "get_sourceEntity",
                    get_mouseEnabled: "get_mouseEnabled",
                    get_inverseSceneTransform: "get_inverseSceneTransform"
                }
            };
            var ug = function () {
                Ca.call(this)
            };
            g["away3d.core.base.ParticleGeometry"] = ug;
            ug.__name__ = "away3d.core.base.ParticleGeometry";
            ug.__super__ = Ca;
            ug.prototype = l(Ca.prototype, {
                __class__: ug
            });
            var vg = function (a, b, c) {
                this._offsetU2 = this._offsetV2 = 0;
                this._scaleU2 = this._scaleV2 = 1;
                this._offsetU = this._offsetV = this._uvRotation2 = 0;
                this._scaleU = this._scaleV = 1;
                this._uvRotation = 0;
                this._parentMesh = b;
                this._subGeometry = a;
                this.set_material(c)
            };
            g["away3d.core.base.SubMesh"] = vg;
            vg.__name__ = "away3d.core.base.SubMesh";
            vg.__interfaces__ = [Df];
            vg.prototype = {
                get_sourceEntity: function () {
                    return this._parentMesh
                },
                get_subGeometry: function () {
                    return this._subGeometry
                },
                get_material: function () {
                    return null != this._material ? this._material : this._parentMesh.get_material()
                },
                set_material: function (a) {
                    null != this._material && this._material.removeOwner(this);
                    this._material = a;
                    null != this._material && this._material.addOwner(this);
                    return a
                },
                get_inverseSceneTransform: function () {
                    return this._parentMesh.get_inverseSceneTransform()
                },
                activateVertexBuffer: function (a, b) {
                    this._subGeometry.activateVertexBuffer(a, b)
                },
                activateVertexNormalBuffer: function (a, b) {
                    this._subGeometry.activateVertexNormalBuffer(a, b)
                },
                activateVertexTangentBuffer: function (a, b) {
                    this._subGeometry.activateVertexTangentBuffer(a, b)
                },
                activateUVBuffer: function (a, b) {
                    this._subGeometry.activateUVBuffer(a, b)
                },
                activateSecondaryUVBuffer: function (a, b) {
                    this._subGeometry.activateSecondaryUVBuffer(a, b)
                },
                getIndexBuffer: function (a) {
                    return this._subGeometry.getIndexBuffer(a)
                },
                get_numTriangles: function () {
                    return this._subGeometry.get_numTriangles()
                },
                get_animator: function () {
                    return this._parentMesh.get_animator()
                },
                get_mouseEnabled: function () {
                    return this._parentMesh.get_mouseEnabled() ? !0 : this._parentMesh._ancestorsAllowMouseEnabled
                },
                get_castsShadows: function () {
                    return this._parentMesh.get_castsShadows()
                },
                get_parentMesh: function () {
                    return this._parentMesh
                },
                get_uvTransform: function () {
                    this._uvTransformDirty && this.updateUVTransform();
                    return this._uvTransform
                },
                get_uvTransform2: function () {
                    this._uvTransformDirty2 && this.updateUVTransform2();
                    return this._uvTransform2
                },
                updateUVTransform: function () {
                    null == this._uvTransform && (this._uvTransform = new la);
                    this._uvTransform.identity();
                    0 != this._uvRotation && this._uvTransform.rotate(this._uvRotation);
                    1 == this._scaleU && 1 == this._scaleV || this._uvTransform.scale(this._scaleU, this._scaleV);
                    this._uvTransform.translate(this._offsetU, this._offsetV);
                    this._uvTransformDirty = !1
                },
                updateUVTransform2: function () {
                    null == this._uvTransform2 && (this._uvTransform2 = new la);
                    this._uvTransform2.identity();
                    0 != this._uvRotation2 && this._uvTransform2.rotate(this._uvRotation2);
                    1 == this._scaleU2 && 1 == this._scaleV2 || this._uvTransform2.scale(this._scaleU2, this._scaleV2);
                    this._uvTransform2.translate(this._offsetU2, this._offsetV2);
                    this._uvTransformDirty2 = !1
                },
                dispose: function () {
                    this.set_material(null)
                },
                getRenderSceneTransform: function (a) {
                    return this._parentMesh.get_sceneTransform()
                },
                __class__: vg,
                __properties__: {
                    get_uvTransform2: "get_uvTransform2",
                    get_uvTransform: "get_uvTransform",
                    get_parentMesh: "get_parentMesh",
                    get_castsShadows: "get_castsShadows",
                    get_mouseEnabled: "get_mouseEnabled",
                    get_animator: "get_animator",
                    get_numTriangles: "get_numTriangles",
                    get_inverseSceneTransform: "get_inverseSceneTransform",
                    set_material: "set_material",
                    get_material: "get_material",
                    get_subGeometry: "get_subGeometry",
                    get_sourceEntity: "get_sourceEntity"
                }
            };
            var Wj = function () {
            };
            g["away3d.core.base.data.ParticleData"] = Wj;
            Wj.__name__ = "away3d.core.base.data.ParticleData";
            Wj.prototype = {
                __class__: Wj
            };
            var Xj = function () {
            };
            g["away3d.core.data.EntityListItem"] = Xj;
            Xj.__name__ = "away3d.core.data.EntityListItem";
            Xj.prototype = {
                __class__: Xj
            };
            var Yj = function () {
                this._poolSize = this._index = 0;
                this._pool = D.toObjectVector(null)
            };
            g["away3d.core.data.EntityListItemPool"] = Yj;
            Yj.__name__ = "away3d.core.data.EntityListItemPool";
            Yj.prototype = {
                getItem: function () {
                    if (this._index == this._poolSize) {
                        var a = new Xj;
                        this._pool.set(this._index++, a);
                        ++this._poolSize
                    } else a = this._pool.get(this._index++);
                    return a
                },
                freeAll: function () {
                    this._index = 0
                },
                __class__: Yj
            };
            var Zj = function () {
            };
            g["away3d.core.data.RenderableListItem"] = Zj;
            Zj.__name__ = "away3d.core.data.RenderableListItem";
            Zj.prototype = {
                __class__: Zj
            };
            var ak = function () {
                this._poolSize = this._index = 0;
                this._pool = D.toObjectVector(null)
            };
            g["away3d.core.data.RenderableListItemPool"] = ak;
            ak.__name__ = "away3d.core.data.RenderableListItemPool";
            ak.prototype = {
                getItem: function () {
                    if (this._index == this._poolSize) {
                        var a = new Zj;
                        this._pool.set(this._index++, a);
                        ++this._poolSize;
                        return a
                    }
                    return this._pool.get(this._index++)
                },
                freeAll: function () {
                    this._index = 0
                },
                __class__: ak
            };
            var Kb = function (a) {
                this._stage3DProxy = a;
                this._program3Ds = new Ha;
                this._ids =
                    new Ha;
                this._usages = [];
                this._keys = []
            };
            g["away3d.core.managers.AGALProgram3DCache"] = Kb;
            Kb.__name__ = "away3d.core.managers.AGALProgram3DCache";
            Kb.getInstance = function (a) {
                var b = a.get_stage3DIndex();
                null == Kb._instances && (Kb._instances = D.toObjectVector(null, 8, !0));
                null == Kb._instances.get(b) && (Kb._instances.set(b, new Kb(a)), a.addEventListener("Context3DDisposed", Kb.onContext3DDisposed, !1, 0, !0), a.addEventListener("Context3DCreated", Kb.onContext3DDisposed, !1, 0, !0), a.addEventListener("Context3DRecreated", Kb.onContext3DDisposed,
                    !1, 0, !0));
                return Kb._instances.get(b)
            };
            Kb.onContext3DDisposed = function (a) {
                a = T.__cast(a.target, Oa);
                var b = a._stage3DIndex;
                Kb._instances.get(b).dispose();
                Kb._instances.set(b, null);
                a.removeEventListener("Context3DDisposed", Kb.onContext3DDisposed);
                a.removeEventListener("Context3DCreated", Kb.onContext3DDisposed);
                a.removeEventListener("Context3DRecreated", Kb.onContext3DDisposed)
            };
            Kb.prototype = {
                dispose: function () {
                    for (var a = Object.keys(this._program3Ds.h), b = a.length, c = 0; c < b;) {
                        var d = a[c++];
                        this.destroyProgram(d)
                    }
                    this._usages =
                        this._program3Ds = this._keys = null
                },
                setProgram3D: function (a, b, c, d) {
                    null == d && (d = 1);
                    var e = this._stage3DProxy._stage3DIndex,
                        f = b + "---" + c;
                    if (!Object.prototype.hasOwnProperty.call(this._program3Ds.h, f)) {
                        this._keys[Kb._currentId] = f;
                        this._usages[Kb._currentId] = 0;
                        this._ids.h[f] = Kb._currentId;
                        ++Kb._currentId;
                        var h = this._stage3DProxy._context3D.createProgram();
                        b = (new W(ie.active)).assemble(Ef.toString(1), b, d);
                        c = (new W(ie.active)).assemble(Ef.toString(0), c, d);
                        h.upload(b, c);
                        this._program3Ds.h[f] = h
                    }
                    h = a._program3Dids.get(e);
                    c = this._ids.h[f];
                    h != c && (0 <= h && this.freeProgram3D(h), this._usages[c]++);
                    a._program3Dids.set(e, c);
                    a._program3Ds.set(e, this._program3Ds.h[f])
                },
                freeProgram3D: function (a) {
                    this._usages[a]--;
                    0 == this._usages[a] && this.destroyProgram(this._keys[a])
                },
                destroyProgram: function (a) {
                    this._program3Ds.h[a].dispose();
                    var b = this._program3Ds;
                    Object.prototype.hasOwnProperty.call(b.h, a) && delete b.h[a];
                    this._ids.h[a] = -1
                },
                __class__: Kb
            };
            var V = function (a, b, c) {
                null == c && (c = !1);
                null == b && (b = !1);
                this.type = a;
                this.bubbles = b;
                this.cancelable =
                    c;
                this.eventPhase = 2
            };
            g["openfl.events.Event"] = V;
            V.__name__ = "openfl.events.Event";
            V.prototype = {
                isDefaultPrevented: function () {
                    return this.__preventDefault
                },
                preventDefault: function () {
                    this.cancelable && (this.__preventDefault = !0)
                },
                stopPropagation: function () {
                    this.__isCanceled = !0
                },
                __class__: V
            };
            var Ad = function (a) {
                this._allowedToPropagate = !0;
                V.call(this, a, !0, !0)
            };
            g["away3d.events.MouseEvent3D"] = Ad;
            Ad.__name__ = "away3d.events.MouseEvent3D";
            Ad.__super__ = V;
            Ad.prototype = l(V.prototype, {
                stopPropagation: function () {
                    V.prototype.stopPropagation.call(this);
                    this._allowedToPropagate = !1;
                    null != this._parentEvent && this._parentEvent.stopPropagation()
                },
                __class__: Ad
            });
            var na = function () {
                this._childDepth = 0;
                this._mousePicker = bk.RAYCAST_FIRST_ENCOUNTERED;
                this._mouseMoveEvent = new $a("mouseMove");
                this._nullVector = new Q;
                this._updateDirty = !0;
                null == na._view3Ds && (na._view3Ds = new N, na._view3DLookup = D.toObjectVector(null))
            };
            g["away3d.core.managers.Mouse3DManager"] = na;
            na.__name__ = "away3d.core.managers.Mouse3DManager";
            na.prototype = {
                updateCollider: function (a) {
                    na._previousCollidingView =
                        na._collidingView;
                    if (null != a) {
                        a.get_stage3DProxy().get_bufferClear() && (na._collidingViewObjects = D.toObjectVector(null, na._viewCount));
                        var b = a.localToGlobal(new ba(a.get_mouseX(), a.get_mouseY()));
                        a.get_shareContext() ? (null == na._collidingViewObjects && (na._collidingViewObjects = D.toObjectVector(null, na._viewCount)), na._collidingObject = na._collidingViewObjects.set(na._view3Ds.h[a.__id__], this._mousePicker.getViewCollision(b.x, b.y, a))) : a == this._activeView && (this._forceMouseMove || this._updateDirty) && (na._collidingObject =
                            this._mousePicker.getViewCollision(b.x, b.y, a))
                    }
                },
                fireMouseEvents: function () {
                    var a, b;
                    if (null != na._collidingViewObjects) {
                        na._collidingObject = null;
                        var c = Infinity;
                        for (a = na._viewCount - 1; 0 <= a;) {
                            var d = na._view3DLookup.get(a);
                            if (null != na._collidingViewObjects.get(a) && (d.get_layeredView() || na._collidingViewObjects.get(a).rayEntryDistance < c) && (c = na._collidingViewObjects.get(a).rayEntryDistance, na._collidingObject = na._collidingViewObjects.get(a), d.get_layeredView())) break;
                            --a
                        }
                    }
                    na._collidingObject != na._previousCollidingObject &&
                    (null != na._previousCollidingObject && this.queueDispatch(na._mouseOut, this._mouseMoveEvent, na._previousCollidingObject), null != na._collidingObject && this.queueDispatch(na._mouseOver, this._mouseMoveEvent, na._collidingObject));
                    this._forceMouseMove && null != na._collidingObject && this.queueDispatch(na._mouseMove, this._mouseMoveEvent, na._collidingObject);
                    c = 0;
                    for (d = na._queuedEvents.get_length(); c < d;) {
                        a = c++;
                        a = na._queuedEvents.get(a);
                        for (b = a.object; null != b && !b._ancestorsAllowMouseEnabled;) b = b.get_parent();
                        null !=
                        b && b.dispatchEvent(a)
                    }
                    na._queuedEvents.set_length(0);
                    this._updateDirty = !1;
                    na._previousCollidingObject = na._collidingObject
                },
                addViewLayer: function (a) {
                    var b = a.stage;
                    null == a.get_stage3DProxy().get_mouse3DManager() && a.get_stage3DProxy().set_mouse3DManager(this);
                    this.hasKey(a) || na._view3Ds.set(a, 0);
                    this._childDepth = 0;
                    this.traverseDisplayObjects(b);
                    na._viewCount = this._childDepth
                },
                enableMouseListeners: function (a) {
                    a.addEventListener("click", p(this, this.onClick));
                    a.addEventListener("doubleClick", p(this, this.onDoubleClick));
                    a.addEventListener("mouseDown", p(this, this.onMouseDown));
                    a.addEventListener("mouseMove", p(this, this.onMouseMove));
                    a.addEventListener("mouseUp", p(this, this.onMouseUp));
                    a.addEventListener("mouseWheel", p(this, this.onMouseWheel));
                    a.addEventListener("mouseOver", p(this, this.onMouseOver));
                    a.addEventListener("mouseOut", p(this, this.onMouseOut))
                },
                queueDispatch: function (a, b, c) {
                    a.ctrlKey = b.ctrlKey;
                    a.altKey = b.altKey;
                    a.shiftKey = b.shiftKey;
                    a.delta = b.delta;
                    a.screenX = b.localX;
                    a.screenY = b.localY;
                    null == c && (c = na._collidingObject);
                    null != c ? (a.object = c.entity, a.renderable = c.renderable, a.uv = c.uv, a.localPosition = null != c.localPosition ? c.localPosition.clone() : null, a.localNormal = null != c.localNormal ? c.localNormal.clone() : null, a.index = c.index, a.subGeometryIndex = c.subGeometryIndex) : (a.uv = null, a.object = null, a.localPosition = this._nullVector, a.localNormal = this._nullVector, a.index = 0, a.subGeometryIndex = 0);
                    na._queuedEvents.push(a)
                },
                reThrowEvent: function (a) {
                    if (null != this._activeView && (null == this._activeView || this._activeView.get_shareContext()))
                        for (var b =
                            na._view3Ds.keys(); b.hasNext();) {
                            var c = b.next();
                            c != this._activeView && na._view3Ds.h[c.__id__] == na._view3Ds.h[this._activeView.__id__] - 1 && (1 == a.bubbles ? c.dispatchEvent(new $a(a.type, !1, a.cancelable, a.localX, a.localY, a.relatedObject, a.ctrlKey, a.altKey, a.shiftKey, a.buttonDown, a.delta, a.commandKey, null, a.clickCount)) : c.dispatchEvent(a))
                        }
                },
                hasKey: function (a) {
                    return null != na._view3Ds.h.__keys__[a.__id__]
                },
                traverseDisplayObjects: function (a) {
                    for (var b, c = 0, d = a.get_numChildren(); c < d;) b = c++, b = a.getChildAt(b),
                    b instanceof Td && null != na._view3Ds.h.__keys__[b.__id__] && (na._view3Ds.set(b, this._childDepth), na._view3DLookup.set(this._childDepth, b), this._childDepth++), b instanceof oa && this.traverseDisplayObjects(T.__cast(b, oa))
                },
                onMouseMove: function (a) {
                    null != na._collidingObject ? this.queueDispatch(na._mouseMove, this._mouseMoveEvent = a) : this.reThrowEvent(a);
                    this._updateDirty = !0
                },
                onMouseOut: function (a) {
                    this._activeView = null;
                    null != na._collidingObject && this.queueDispatch(na._mouseOut, a, na._collidingObject);
                    this._updateDirty = !0
                },
                onMouseOver: function (a) {
                    this._activeView = T.__cast(a.currentTarget, Td);
                    null != na._collidingObject && na._previousCollidingObject != na._collidingObject ? this.queueDispatch(na._mouseOver, a, na._collidingObject) : this.reThrowEvent(a);
                    this._updateDirty = !0
                },
                onClick: function (a) {
                    null != na._collidingObject ? this.queueDispatch(na._mouseClick, a) : this.reThrowEvent(a);
                    this._updateDirty = !0
                },
                onDoubleClick: function (a) {
                    null != na._collidingObject ? this.queueDispatch(na._mouseDoubleClick, a) : this.reThrowEvent(a);
                    this._updateDirty = !0
                },
                onMouseDown: function (a) {
                    this._activeView = T.__cast(a.currentTarget, Td);
                    this.updateCollider(this._activeView);
                    null != na._collidingObject ? (this.queueDispatch(na._mouseDown, a), na._previousCollidingObject = na._collidingObject) : this.reThrowEvent(a);
                    this._updateDirty = !0
                },
                onMouseUp: function (a) {
                    null != na._collidingObject ? (this.queueDispatch(na._mouseUp, a), na._previousCollidingObject = na._collidingObject) : this.reThrowEvent(a);
                    this._updateDirty = !0
                },
                onMouseWheel: function (a) {
                    null != na._collidingObject ? this.queueDispatch(na._mouseWheel,
                        a) : this.reThrowEvent(a);
                    this._updateDirty = !0
                },
                __class__: na
            };
            var qd = function (a) {
                this._buffersInvalid = !0;
                this._viewWidth = this._viewHeight = this._textureWidth = this._textureHeight = -1;
                this._renderToTextureRect = new ha;
                this._stage3DProxy = a;
                this._stage3DProxy.addEventListener("Context3DRecreated", p(this, this.onContextRecreated));
                O.call(this)
            };
            g["away3d.core.managers.RTTBufferManager"] = qd;
            qd.__name__ = "away3d.core.managers.RTTBufferManager";
            qd.getInstance = function (a) {
                if (null == a) throw new Fa("stage3DProxy key cannot be null!");
                null == qd._instances && (qd._instances = new N);
                var b = qd._instances.h[a.__id__];
                null == b && (b = new qd(a), qd._instances.set(a, b));
                return b
            };
            qd.__super__ = O;
            qd.prototype = l(O.prototype, {
                get_textureRatioX: function () {
                    this._buffersInvalid && this.updateRTTBuffers();
                    return this._textureRatioX
                },
                get_textureRatioY: function () {
                    this._buffersInvalid && this.updateRTTBuffers();
                    return this._textureRatioY
                },
                set_viewWidth: function (a) {
                    if (a == this._viewWidth) return a;
                    this._viewWidth = a;
                    this._buffersInvalid = !0;
                    this._textureWidth = Ud.getBestPowerOf2(this._viewWidth);
                    this._textureWidth > this._viewWidth ? (this._renderToTextureRect.x = .5 * (this._textureWidth - this._viewWidth) | 0, this._renderToTextureRect.width = this._viewWidth) : (this._renderToTextureRect.x = 0, this._renderToTextureRect.width = this._textureWidth);
                    this.dispatchEvent(new V("resize"));
                    return a
                },
                set_viewHeight: function (a) {
                    if (a == this._viewHeight) return a;
                    this._viewHeight = a;
                    this._buffersInvalid = !0;
                    this._textureHeight = Ud.getBestPowerOf2(this._viewHeight);
                    this._textureHeight > this._viewHeight ? (this._renderToTextureRect.y =
                        .5 * (this._textureHeight - this._viewHeight) | 0, this._renderToTextureRect.height = this._viewHeight) : (this._renderToTextureRect.y = 0, this._renderToTextureRect.height = this._textureHeight);
                    this.dispatchEvent(new V("resize"));
                    return a
                },
                get_renderToTextureVertexBuffer: function () {
                    this._buffersInvalid && this.updateRTTBuffers();
                    return this._renderToTextureVertexBuffer
                },
                get_renderToScreenVertexBuffer: function () {
                    this._buffersInvalid && this.updateRTTBuffers();
                    return this._renderToScreenVertexBuffer
                },
                get_indexBuffer: function () {
                    return this._indexBuffer
                },
                get_renderToTextureRect: function () {
                    this._buffersInvalid && this.updateRTTBuffers();
                    return this._renderToTextureRect
                },
                get_textureWidth: function () {
                    return this._textureWidth
                },
                get_textureHeight: function () {
                    return this._textureHeight
                },
                onContextRecreated: function (a) {
                    this._renderToScreenVertexBuffer = this._renderToTextureVertexBuffer = this._indexBuffer = null;
                    this.updateRTTBuffers()
                },
                updateRTTBuffers: function () {
                    this._stage3DProxy.get_context3D();
                    null == this._renderToTextureVertexBuffer && (this._renderToTextureVertexBuffer =
                        this._stage3DProxy.createVertexBuffer(4, 5));
                    null == this._renderToScreenVertexBuffer && (this._renderToScreenVertexBuffer = this._stage3DProxy.createVertexBuffer(4, 5));
                    if (null == this._indexBuffer) {
                        this._indexBuffer = this._stage3DProxy.createIndexBuffer(6);
                        for (var a = [2, 1, 0, 3, 2, 0], b = D.toIntVector(null), c = 0, d = a.length; c < d;) {
                            var e = c++;
                            b.set(e, a[e])
                        }
                        this._indexBuffer.uploadFromVector(b, 0, 6)
                    }
                    var f = Math.min(this._viewWidth / this._textureWidth, 1);
                    this._textureRatioX = f;
                    this._textureRatioY = a = Math.min(this._viewHeight /
                        this._textureHeight, 1);
                    var h = .5 * (1 - f),
                        r = .5 * (f + 1),
                        m = .5 * (a + 1),
                        C = .5 * (1 - a);
                    a = [-f, -a, h, m, 0, f, -a, r, m, 1, f, a, r, C, 2, -f, a, h, C, 3];
                    b = D.toFloatVector(null);
                    c = 0;
                    for (d = a.length; c < d;) e = c++, b.set(e, a[e]);
                    f = b;
                    a = [-1, -1, h, m, 0, 1, -1, r, m, 1, 1, 1, r, C, 2, -1, 1, h, C, 3];
                    b = D.toFloatVector(null);
                    c = 0;
                    for (d = a.length; c < d;) e = c++, b.set(e, a[e]);
                    h = b;
                    this._renderToTextureVertexBuffer.uploadFromVector(f, 0, 4);
                    this._renderToScreenVertexBuffer.uploadFromVector(h, 0, 4);
                    this._buffersInvalid = !1
                },
                __class__: qd,
                __properties__: {
                    set_viewHeight: "set_viewHeight",
                    set_viewWidth: "set_viewWidth",
                    get_textureHeight: "get_textureHeight",
                    get_textureWidth: "get_textureWidth",
                    get_renderToTextureRect: "get_renderToTextureRect",
                    get_indexBuffer: "get_indexBuffer",
                    get_renderToScreenVertexBuffer: "get_renderToScreenVertexBuffer",
                    get_renderToTextureVertexBuffer: "get_renderToTextureVertexBuffer",
                    get_textureRatioY: "get_textureRatioY",
                    get_textureRatioX: "get_textureRatioX"
                }
            });
            var Tb = function (a) {
                this._stage = a;
                null == Tb._stageProxies && (Tb._stageProxies = D.toObjectVector(null, this._stage.stage3Ds.get_length(),
                    !0))
            };
            g["away3d.core.managers.Stage3DManager"] = Tb;
            Tb.__name__ = "away3d.core.managers.Stage3DManager";
            Tb.getInstance = function (a) {
                null == Tb._instances && (Tb._instances = new N);
                var b = Tb._instances.h[a.__id__];
                null == b && (b = new Tb(a), Tb._instances.set(a, b));
                return b
            };
            Tb.prototype = {
                getStage3DProxy: function (a, b, c) {
                    null == c && (c = "baseline");
                    null == b && (b = !1);
                    null == Tb._stageProxies.get(a) && (Tb._numStageProxies++, Tb._stageProxies.set(a, new Oa(a, this._stage.stage3Ds.get(a), this, b, c)));
                    return Tb._stageProxies.get(a)
                },
                getFreeStage3DProxy: function (a, b) {
                    null == b && (b = "baseline");
                    null == a && (a = !1);
                    for (var c = 0, d = Tb._stageProxies.get_length(); c < d;) {
                        if (null == Tb._stageProxies.get(c)) return this.getStage3DProxy(c, a, b), Tb._stageProxies.get(c).set_width(this._stage.stageWidth), Tb._stageProxies.get(c).set_height(this._stage.stageHeight), Tb._stageProxies.get(c);
                        ++c
                    }
                    throw new Fa("Too many Stage3D instances used!");
                },
                __class__: Tb
            };
            var je = function () {
                da.call(this);
                this.__drawableType = 3
            };
            g["openfl.display.Shape"] = je;
            je.__name__ = "openfl.display.Shape";
            je.__super__ = da;
            je.prototype = l(da.prototype, {
                get_graphics: function () {
                    null == this.__graphics && (this.__graphics = new Tc(this));
                    return this.__graphics
                },
                __class__: je,
                __properties__: l(da.prototype.__properties__, {
                    get_graphics: "get_graphics"
                })
            });
            var ll = function (a, b, c, d, e, f) {
                null == f && (f = 0);
                null == e && (e = 0);
                null == d && (d = 1);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 1);
                this.a = a;
                this.b = b;
                this.c = c;
                this.d = d;
                this.tx = e;
                this.ty = f
            };
            g["lime.math.Matrix3"] = ll;
            ll.__name__ = "lime.math.Matrix3";
            ll.prototype = {
                __class__: ll
            };
            var la =
                function (a, b, c, d, e, f) {
                    null == f && (f = 0);
                    null == e && (e = 0);
                    null == d && (d = 1);
                    null == c && (c = 0);
                    null == b && (b = 0);
                    null == a && (a = 1);
                    this.a = a;
                    this.b = b;
                    this.c = c;
                    this.d = d;
                    this.tx = e;
                    this.ty = f
                };
            g["openfl.geom.Matrix"] = la;
            la.__name__ = "openfl.geom.Matrix";
            la.prototype = {
                clone: function () {
                    return new la(this.a, this.b, this.c, this.d, this.tx, this.ty)
                },
                concat: function (a) {
                    var b = this.a * a.a + this.b * a.c;
                    this.b = this.a * a.b + this.b * a.d;
                    this.a = b;
                    b = this.c * a.a + this.d * a.c;
                    this.d = this.c * a.b + this.d * a.d;
                    this.c = b;
                    b = this.tx * a.a + this.ty * a.c + a.tx;
                    this.ty =
                        this.tx * a.b + this.ty * a.d + a.ty;
                    this.tx = b
                },
                copyFrom: function (a) {
                    this.a = a.a;
                    this.b = a.b;
                    this.c = a.c;
                    this.d = a.d;
                    this.tx = a.tx;
                    this.ty = a.ty
                },
                createGradientBox: function (a, b, c, d, e) {
                    null == e && (e = 0);
                    null == d && (d = 0);
                    null == c && (c = 0);
                    this.a = a / 1638.4;
                    this.d = b / 1638.4;
                    if (0 != c) {
                        var f = Math.cos(c);
                        c = Math.sin(c);
                        this.b = c * this.d;
                        this.c = -c * this.a;
                        this.a *= f;
                        this.d *= f
                    } else this.c = this.b = 0;
                    this.tx = d + a / 2;
                    this.ty = e + b / 2
                },
                equals: function (a) {
                    return null != a && this.tx == a.tx && this.ty == a.ty && this.a == a.a && this.b == a.b && this.c == a.c ? this.d ==
                        a.d : !1
                },
                identity: function () {
                    this.a = 1;
                    this.c = this.b = 0;
                    this.d = 1;
                    this.ty = this.tx = 0
                },
                invert: function () {
                    var a = this.a * this.d - this.b * this.c;
                    if (0 == a) this.a = this.b = this.c = this.d = 0, this.tx = -this.tx, this.ty = -this.ty;
                    else {
                        a = 1 / a;
                        var b = this.d * a;
                        this.d = this.a * a;
                        this.a = b;
                        this.b *= -a;
                        this.c *= -a;
                        a = -this.a * this.tx - this.c * this.ty;
                        this.ty = -this.b * this.tx - this.d * this.ty;
                        this.tx = a
                    }
                    return this
                },
                rotate: function (a) {
                    var b = Math.cos(a);
                    a = Math.sin(a);
                    var c = this.a * b - this.b * a;
                    this.b = this.a * a + this.b * b;
                    this.a = c;
                    c = this.c * b - this.d * a;
                    this.d = this.c * a + this.d * b;
                    this.c = c;
                    c = this.tx * b - this.ty * a;
                    this.ty = this.tx * a + this.ty * b;
                    this.tx = c
                },
                scale: function (a, b) {
                    this.a *= a;
                    this.b *= b;
                    this.c *= a;
                    this.d *= b;
                    this.tx *= a;
                    this.ty *= b
                },
                setTo: function (a, b, c, d, e, f) {
                    this.a = a;
                    this.b = b;
                    this.c = c;
                    this.d = d;
                    this.tx = e;
                    this.ty = f
                },
                transformPoint: function (a) {
                    return new ba(a.x * this.a + a.y * this.c + this.tx, a.x * this.b + a.y * this.d + this.ty)
                },
                translate: function (a, b) {
                    this.tx += a;
                    this.ty += b
                },
                __class__: la
            };
            var ib = function (a, b, c, d, e, f, h, r) {
                null == r && (r = 0);
                null == h && (h = 0);
                null == f && (f =
                    0);
                null == e && (e = 0);
                null == d && (d = 1);
                null == c && (c = 1);
                null == b && (b = 1);
                null == a && (a = 1);
                this.redMultiplier = a;
                this.greenMultiplier = b;
                this.blueMultiplier = c;
                this.alphaMultiplier = d;
                this.redOffset = e;
                this.greenOffset = f;
                this.blueOffset = h;
                this.alphaOffset = r
            };
            g["openfl.geom.ColorTransform"] = ib;
            ib.__name__ = "openfl.geom.ColorTransform";
            ib.prototype = {
                __clone: function () {
                    return new ib(this.redMultiplier, this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier, this.redOffset, this.greenOffset, this.blueOffset, this.alphaOffset)
                },
                __copyFrom: function (a) {
                    this.redMultiplier = a.redMultiplier;
                    this.greenMultiplier = a.greenMultiplier;
                    this.blueMultiplier = a.blueMultiplier;
                    this.alphaMultiplier = a.alphaMultiplier;
                    this.redOffset = a.redOffset;
                    this.greenOffset = a.greenOffset;
                    this.blueOffset = a.blueOffset;
                    this.alphaOffset = a.alphaOffset
                },
                __combine: function (a) {
                    this.redMultiplier *= a.redMultiplier;
                    this.greenMultiplier *= a.greenMultiplier;
                    this.blueMultiplier *= a.blueMultiplier;
                    this.alphaMultiplier *= a.alphaMultiplier;
                    this.redOffset += a.redOffset;
                    this.greenOffset +=
                        a.greenOffset;
                    this.blueOffset += a.blueOffset;
                    this.alphaOffset += a.alphaOffset
                },
                __identity: function () {
                    this.alphaMultiplier = this.blueMultiplier = this.greenMultiplier = this.redMultiplier = 1;
                    this.alphaOffset = this.blueOffset = this.greenOffset = this.redOffset = 0
                },
                __invert: function () {
                    this.redMultiplier = 0 != this.redMultiplier ? 1 / this.redMultiplier : 1;
                    this.greenMultiplier = 0 != this.greenMultiplier ? 1 / this.greenMultiplier : 1;
                    this.blueMultiplier = 0 != this.blueMultiplier ? 1 / this.blueMultiplier : 1;
                    this.alphaMultiplier = 0 != this.alphaMultiplier ?
                        1 / this.alphaMultiplier : 1;
                    this.redOffset = -this.redOffset;
                    this.greenOffset = -this.greenOffset;
                    this.blueOffset = -this.blueOffset;
                    this.alphaOffset = -this.alphaOffset
                },
                __equals: function (a, b) {
                    return null == a || this.redMultiplier != a.redMultiplier || this.greenMultiplier != a.greenMultiplier || this.blueMultiplier != a.blueMultiplier || !b && this.alphaMultiplier != a.alphaMultiplier || this.redOffset != a.redOffset || this.greenOffset != a.greenOffset || this.blueOffset != a.blueOffset ? !1 : this.alphaOffset == a.alphaOffset
                },
                __isDefault: function (a) {
                    return a ?
                        1 == this.redMultiplier && 1 == this.greenMultiplier && 1 == this.blueMultiplier && 0 == this.redOffset && 0 == this.greenOffset && 0 == this.blueOffset ? 0 == this.alphaOffset : !1 : 1 == this.redMultiplier && 1 == this.greenMultiplier && 1 == this.blueMultiplier && 1 == this.alphaMultiplier && 0 == this.redOffset && 0 == this.greenOffset && 0 == this.blueOffset ? 0 == this.alphaOffset : !1
                },
                __setArrays: function (a, b) {
                    a[0] = this.redMultiplier;
                    a[1] = this.greenMultiplier;
                    a[2] = this.blueMultiplier;
                    a[3] = this.alphaMultiplier;
                    b[0] = this.redOffset;
                    b[1] = this.greenOffset;
                    b[2] = this.blueOffset;
                    b[3] = this.alphaOffset
                },
                __toLimeColorMatrix: function () {
                    null == ib.__limeColorMatrix && (ib.__limeColorMatrix = new Float32Array(20));
                    ib.__limeColorMatrix[0] = this.redMultiplier;
                    ib.__limeColorMatrix[4] = this.redOffset / 255;
                    ib.__limeColorMatrix[6] = this.greenMultiplier;
                    ib.__limeColorMatrix[9] = this.greenOffset / 255;
                    ib.__limeColorMatrix[12] = this.blueMultiplier;
                    ib.__limeColorMatrix[14] = this.blueOffset / 255;
                    ib.__limeColorMatrix[18] = this.alphaMultiplier;
                    ib.__limeColorMatrix[19] = this.alphaOffset /
                        255;
                    return ib.__limeColorMatrix
                },
                __class__: ib
            };
            var Oa = function (a, b, c, d, e) {
                null == e && (e = "baseline");
                null == d && (d = !1);
                Oa.vertexBufferCount = Oa.indexBufferCount = Oa.drawTriangleCount = 0;
                this._stage3DIndex = a;
                this._stage3D = b;
                this._stage3D.set_x(0);
                this._stage3D.set_y(0);
                this._stage3D.visible = !0;
                this._stage3DManager = c;
                this._viewPort = new ha;
                this._enableDepthAndStencil = !0;
                O.call(this);
                this._stage3D.addEventListener("context3DCreate", p(this, this.onContext3DUpdate), !1, 1E3, !1);
                this.forceSoftware = d;
                this._profile =
                    e;
                if (null != this._stage3D.context3D) this.onContext3DUpdate(null);
                else this.requestContext(d, this._profile)
            };
            g["away3d.core.managers.Stage3DProxy"] = Oa;
            Oa.__name__ = "away3d.core.managers.Stage3DProxy";
            Oa.disposeVertexBuffer = function (a) {
                a.dispose();
                Oa.vertexBufferCount--
            };
            Oa.disposeIndexBuffer = function (a) {
                a.dispose();
                Oa.indexBufferCount--
            };
            Oa.__super__ = O;
            Oa.prototype = l(O.prototype, {
                notifyViewportUpdated: function () {
                    this._viewportDirty || (this._viewportDirty = !0, this.hasEventListener("ViewportUpdated") && (this._viewportUpdated =
                        new Ff("ViewportUpdated"), this.dispatchEvent(this._viewportUpdated)))
                },
                notifyEnterFrame: function () {
                    this.hasEventListener("enterFrame") && (null == this._enterFrame && (this._enterFrame = new V("enterFrame")), this.dispatchEvent(this._enterFrame))
                },
                notifyExitFrame: function () {
                    this.hasEventListener("exitFrame") && (null == this._exitFrame && (this._exitFrame = new V("exitFrame")), this.dispatchEvent(this._exitFrame))
                },
                get_profile: function () {
                    return this._profile
                },
                configureBackBuffer: function (a, b, c, d) {
                    50 > a && (a = 50);
                    50 > b &&
                    (b = 50);
                    var e = this._backBufferWidth,
                        f = this._backBufferHeight;
                    this._backBufferWidth = a;
                    this._backBufferHeight = b;
                    this._viewPort.width = a;
                    this._viewPort.height = b;
                    e == this._backBufferWidth && f == this._backBufferHeight || this.notifyViewportUpdated();
                    this._antiAlias = c;
                    this._enableDepthAndStencil = d;
                    null != this._context3D && this._context3D.configureBackBuffer(a, b, c, d)
                },
                get_enableDepthAndStencil: function () {
                    return this._enableDepthAndStencil
                },
                get_renderTarget: function () {
                    return this._renderTarget
                },
                get_renderSurfaceSelector: function () {
                    return this._renderSurfaceSelector
                },
                setRenderTarget: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    if (this._renderTarget != a || c != this._renderSurfaceSelector || this._enableDepthAndStencil != b) this._renderTarget = a, this._renderSurfaceSelector = c, this._enableDepthAndStencil = b, null != a ? this._context3D.setRenderToTexture(a, b, this._antiAlias, c) : this._context3D.setRenderToBackBuffer()
                },
                clear: function () {
                    null != this._context3D && (this._backBufferDirty && (this.configureBackBuffer(this._backBufferWidth, this._backBufferHeight, this._antiAlias, this._enableDepthAndStencil),
                        this._backBufferDirty = !1), this._context3D.clear((this._color >> 16 & 255) / 255, (this._color >> 8 & 255) / 255, (this._color & 255) / 255, (this._color >> 24 & 255) / 255), this._bufferClear = !0)
                },
                present: function () {
                    null != this._context3D && (this._context3D.present(), this._activeProgram3D = null, null != this._mouse3DManager && this._mouse3DManager.fireMouseEvents())
                },
                addEventListener: function (a, b, c, d, e) {
                    null == e && (e = !1);
                    null == d && (d = 0);
                    null == c && (c = !1);
                    O.prototype.addEventListener.call(this, a, b, c, d, e);
                    "enterFrame" != a && "exitFrame" != a ||
                    Oa._frameEventDriver.hasEventListener("enterFrame") || Oa._frameEventDriver.addEventListener("enterFrame", p(this, this.onEnterFrame), c, d, e)
                },
                removeEventListener: function (a, b, c) {
                    null == c && (c = !1);
                    O.prototype.removeEventListener.call(this, a, b, c);
                    this.hasEventListener("enterFrame") || this.hasEventListener("exitFrame") || !Oa._frameEventDriver.hasEventListener("enterFrame") || Oa._frameEventDriver.removeEventListener("enterFrame", p(this, this.onEnterFrame), c)
                },
                get_scissorRect: function () {
                    return this._scissorRect
                },
                set_scissorRect: function (a) {
                    this._scissorRect = a;
                    this._context3D.setScissorRectangle(this._scissorRect);
                    return a
                },
                get_stage3DIndex: function () {
                    return this._stage3DIndex
                },
                get_context3D: function () {
                    return this._context3D
                },
                get_usesSoftwareRendering: function () {
                    return this._usesSoftwareRendering
                },
                get_x: function () {
                    return this._stage3D.get_x()
                },
                set_x: function (a) {
                    if (this._viewPort.x == a) return a;
                    this._stage3D.set_x(this._viewPort.x = a);
                    this.notifyViewportUpdated();
                    return a
                },
                get_y: function () {
                    return this._stage3D.get_y()
                },
                set_y: function (a) {
                    if (this._viewPort.y == a) return a;
                    this._stage3D.set_y(this._viewPort.y = a);
                    this.notifyViewportUpdated();
                    return a
                },
                get_width: function () {
                    return this._backBufferWidth
                },
                set_width: function (a) {
                    if (this._viewPort.width == a) return a;
                    50 > a && (a = 50);
                    this._viewPort.width = this._backBufferWidth = a;
                    this._backBufferDirty = !0;
                    this.notifyViewportUpdated();
                    return a
                },
                get_height: function () {
                    return this._backBufferHeight
                },
                set_height: function (a) {
                    if (this._viewPort.height == a) return a;
                    50 > a && (a = 50);
                    this._viewPort.height =
                        this._backBufferHeight = a;
                    this._backBufferDirty = !0;
                    this.notifyViewportUpdated();
                    return a
                },
                get_viewPort: function () {
                    this._viewportDirty = !1;
                    return this._viewPort
                },
                set_visible: function (a) {
                    return this._stage3D.visible = a
                },
                get_bufferClear: function () {
                    return this._bufferClear
                },
                set_bufferClear: function (a) {
                    return this._bufferClear = a
                },
                get_mouse3DManager: function () {
                    return this._mouse3DManager
                },
                set_mouse3DManager: function (a) {
                    return this._mouse3DManager = a
                },
                onContext3DUpdate: function (a) {
                    if (null != this._stage3D.context3D) a =
                        null != this._context3D, this._context3D = this._stage3D.context3D, this._context3D.set_enableErrorChecking(ie.active), this._usesSoftwareRendering = 0 == this._context3D.driverInfo.indexOf("Software"), 0 < this._backBufferWidth && 0 < this._backBufferHeight && this._context3D.configureBackBuffer(this._backBufferWidth, this._backBufferHeight, this._antiAlias, this._enableDepthAndStencil), this.dispatchEvent(new Ff(a ? "Context3DRecreated" : "Context3DCreated"));
                    else throw new Fa("Rendering context lost!");
                },
                requestContext: function (a,
                                          b) {
                    null == b && (b = "baseline");
                    null == a && (a = !1);
                    this._usesSoftwareRendering || (this._usesSoftwareRendering = a);
                    this._profile = b;
                    a = a ? 1 : 0;
                    if ("baseline" == b) this._stage3D.requestContext3D(a);
                    else try {
                        this._stage3D.requestContext3D(a, Tl.fromString(b))
                    } catch (c) {
                        throw Ia.lastError = c, fa.thrown("An error occurred creating a context using the given profile. Profiles are not supported for the SDK this was compiled with.");
                    }
                    this._contextRequested = !0
                },
                onEnterFrame: function (a) {
                    null != this._context3D && (this.clear(), this.notifyEnterFrame(),
                        this.present(), this.notifyExitFrame())
                },
                recoverFromDisposal: function () {
                    return null == this._context3D ? !1 : "Disposed" == this._context3D.driverInfo ? (this._context3D = null, this.dispatchEvent(new Ff("Context3DDisposed")), !1) : !0
                },
                clearDepthBuffer: function () {
                    null != this._context3D && this._context3D.clear(0, 0, 0, 1, 1, 0, 2)
                },
                createVertexBuffer: function (a, b) {
                    Oa.vertexBufferCount++;
                    return this._context3D.createVertexBuffer(a, b)
                },
                createIndexBuffer: function (a) {
                    Oa.indexBufferCount++;
                    return this._context3D.createIndexBuffer(a)
                },
                drawTriangles: function (a, b, c) {
                    null == c && (c = -1);
                    null == b && (b = 0);
                    Oa.drawTriangleCount++;
                    this._context3D.drawTriangles(a, b, c)
                },
                __class__: Oa,
                __properties__: {
                    set_visible: "set_visible",
                    set_mouse3DManager: "set_mouse3DManager",
                    get_mouse3DManager: "get_mouse3DManager",
                    set_bufferClear: "set_bufferClear",
                    get_bufferClear: "get_bufferClear",
                    get_viewPort: "get_viewPort",
                    set_height: "set_height",
                    get_height: "get_height",
                    set_width: "set_width",
                    get_width: "get_width",
                    set_y: "set_y",
                    get_y: "get_y",
                    set_x: "set_x",
                    get_x: "get_x",
                    get_usesSoftwareRendering: "get_usesSoftwareRendering",
                    get_context3D: "get_context3D",
                    get_stage3DIndex: "get_stage3DIndex",
                    set_scissorRect: "set_scissorRect",
                    get_scissorRect: "get_scissorRect",
                    get_renderSurfaceSelector: "get_renderSurfaceSelector",
                    get_renderTarget: "get_renderTarget",
                    get_enableDepthAndStencil: "get_enableDepthAndStencil",
                    get_profile: "get_profile"
                }
            });
            var jc = function () {
                this._touchPicker = bk.RAYCAST_FIRST_ENCOUNTERED;
                this._touchMoveEvent = new $c("touchMove");
                this._nullVector = new Q;
                this._updateDirty = !0;
                this._touchPoints = D.toObjectVector(null);
                this._touchPointFromId = new Db;
                jc._collidingObjectFromTouchId = new Db;
                jc._previousCollidingObjectFromTouchId = new Db
            };
            g["away3d.core.managers.Touch3DManager"] = jc;
            jc.__name__ = "away3d.core.managers.Touch3DManager";
            jc.prototype = {
                updateCollider: function () {
                    if (this._forceTouchMove || this._updateDirty)
                        for (var a = 0, b = this._numTouchPoints; a < b;) {
                            var c = a++;
                            this._touchPoint = this._touchPoints.get(c);
                            this._collidingObject = this._touchPicker.getViewCollision(this._touchPoint.x,
                                this._touchPoint.y, this._view);
                            jc._collidingObjectFromTouchId.h[this._touchPoint.id] = this._collidingObject
                        }
                },
                fireTouchEvents: function () {
                    for (var a, b, c = 0, d = this._numTouchPoints; c < d;) a = c++, this._touchPoint = this._touchPoints.get(a), this._collidingObject = jc._collidingObjectFromTouchId.h[this._touchPoint.id], this._previousCollidingObject = jc._previousCollidingObjectFromTouchId.h[this._touchPoint.id], this._collidingObject != this._previousCollidingObject && (null != this._previousCollidingObject && this.queueDispatch("touchOut3d",
                        this._touchMoveEvent, this._previousCollidingObject, this._touchPoint), null != this._collidingObject && this.queueDispatch("touchOver3d", this._touchMoveEvent, this._collidingObject, this._touchPoint)), this._forceTouchMove && null != this._collidingObject && this.queueDispatch("touchMove3d", this._touchMoveEvent, this._collidingObject, this._touchPoint);
                    d = jc._queuedEvents.get_length();
                    for (c = 0; c < d;) {
                        a = c++;
                        a = jc._queuedEvents.get(a);
                        for (b = a.object; null != b && !b._ancestorsAllowMouseEnabled;) b = b.get_parent();
                        null != b && b.dispatchEvent(a)
                    }
                    jc._queuedEvents.set_length(0);
                    this._updateDirty = !1;
                    c = 0;
                    for (d = this._numTouchPoints; c < d;) a = c++, this._touchPoint = this._touchPoints.get(a), jc._previousCollidingObjectFromTouchId.h[this._touchPoint.id] = jc._collidingObjectFromTouchId.h[this._touchPoint.id]
                },
                enableTouchListeners: function (a) {
                    a.addEventListener("touchBegin", p(this, this.onTouchBegin));
                    a.addEventListener("touchMove", p(this, this.onTouchMove));
                    a.addEventListener("touchEnd", p(this, this.onTouchEnd))
                },
                queueDispatch: function (a, b, c, d) {
                    a = new Fh(a);
                    a.ctrlKey = b.ctrlKey;
                    a.altKey = b.altKey;
                    a.shiftKey = b.shiftKey;
                    a.screenX = d.x;
                    a.screenY = d.y;
                    a.touchPointID = d.id;
                    null != c ? (a.object = c.entity, a.renderable = c.renderable, a.uv = c.uv, a.localPosition = null != c.localPosition ? c.localPosition.clone() : null, a.localNormal = null != c.localNormal ? c.localNormal.clone() : null, a.index = c.index, a.subGeometryIndex = c.subGeometryIndex) : (a.uv = null, a.object = null, a.localPosition = this._nullVector, a.localNormal = this._nullVector, a.index = 0, a.subGeometryIndex = 0);
                    jc._queuedEvents.push(a)
                },
                onTouchBegin: function (a) {
                    var b = new ck;
                    b.id = a.touchPointID;
                    b.x = a.stageX;
                    b.y = a.stageY;
                    this._numTouchPoints++;
                    this._touchPoints.push(b);
                    this._touchPointFromId.h[b.id] = b;
                    this.updateCollider();
                    this._collidingObject = jc._collidingObjectFromTouchId.h[b.id];
                    null != this._collidingObject && this.queueDispatch("touchBegin3d", a, this._collidingObject, b);
                    this._updateDirty = !0
                },
                onTouchMove: function (a) {
                    var b = this._touchPointFromId.h[a.touchPointID];
                    null != b && (b.x = a.stageX, b.y = a.stageY, this._collidingObject = jc._collidingObjectFromTouchId.h[b.id], null != this._collidingObject &&
                    this.queueDispatch("touchMove3d", this._touchMoveEvent = a, this._collidingObject, b), this._updateDirty = !0)
                },
                onTouchEnd: function (a) {
                    var b = this._touchPointFromId.h[a.touchPointID];
                    if (null != b) {
                        this._collidingObject = jc._collidingObjectFromTouchId.h[b.id];
                        null != this._collidingObject && this.queueDispatch("touchEnd3d", a, this._collidingObject, b);
                        this._touchPointFromId.remove(b.id);
                        this._numTouchPoints--;
                        a = this._touchPoints;
                        a.__tempIndex = this._touchPoints.indexOf(b, 0);
                        b = 0;
                        for (var c = []; b < c.length;) {
                            var d = c[b++];
                            a.insertAt(a.__tempIndex, d);
                            a.__tempIndex++
                        }
                        a.splice(a.__tempIndex, 1);
                        this._updateDirty = !0
                    }
                },
                set_view: function (a) {
                    return this._view = a
                },
                __class__: jc,
                __properties__: {
                    set_view: "set_view"
                }
            };
            var ck = function () {
            };
            g["away3d.core.managers.TouchPoint"] = ck;
            ck.__name__ = "away3d.core.managers.TouchPoint";
            ck.prototype = {
                __class__: ck
            };
            var De = function () {
            };
            g["away3d.core.math.MathConsts"] = De;
            De.__name__ = "away3d.core.math.MathConsts";
            var Q = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 0);
                this.w = d;
                this.x = a;
                this.y = b;
                this.z = c
            };
            g["openfl.geom.Vector3D"] = Q;
            Q.__name__ = "openfl.geom.Vector3D";
            Q.distance = function (a, b) {
                var c = b.x - a.x,
                    d = b.y - a.y;
                a = b.z - a.z;
                return Math.sqrt(c * c + d * d + a * a)
            };
            Q.prototype = {
                clone: function () {
                    return new Q(this.x, this.y, this.z, this.w)
                },
                crossProduct: function (a) {
                    return new Q(this.y * a.z - this.z * a.y, this.z * a.x - this.x * a.z, this.x * a.y - this.y * a.x, 1)
                },
                normalize: function () {
                    var a = this.get_length();
                    0 != a && (this.x /= a, this.y /= a, this.z /= a);
                    return a
                },
                scaleBy: function (a) {
                    this.x *= a;
                    this.y *=
                        a;
                    this.z *= a
                },
                subtract: function (a) {
                    return new Q(this.x - a.x, this.y - a.y, this.z - a.z)
                },
                get_length: function () {
                    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
                },
                __class__: Q,
                __properties__: {
                    get_length: "get_length"
                }
            };
            var xb = function (a) {
                null != a && 16 == a.get_length() ? this.rawData = a.concat(null) : this.rawData = D.toFloatVector(null, null, null, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1])
            };
            g["openfl.geom.Matrix3D"] = xb;
            xb.__name__ = "openfl.geom.Matrix3D";
            xb.prototype = {
                append: function (a) {
                    var b = this.rawData.get(0),
                        c = this.rawData.get(4),
                        d = this.rawData.get(8),
                        e = this.rawData.get(12),
                        f = this.rawData.get(1),
                        h = this.rawData.get(5),
                        r = this.rawData.get(9),
                        m = this.rawData.get(13),
                        C = this.rawData.get(2),
                        g = this.rawData.get(6),
                        k = this.rawData.get(10),
                        q = this.rawData.get(14),
                        n = this.rawData.get(3),
                        p = this.rawData.get(7),
                        l = this.rawData.get(11),
                        y = this.rawData.get(15),
                        v = a.rawData.get(0),
                        t = a.rawData.get(4),
                        B = a.rawData.get(8),
                        E = a.rawData.get(12),
                        z = a.rawData.get(1),
                        x = a.rawData.get(5),
                        A = a.rawData.get(9),
                        u = a.rawData.get(13),
                        N = a.rawData.get(2),
                        U = a.rawData.get(6),
                        J = a.rawData.get(10),
                        I = a.rawData.get(14),
                        D = a.rawData.get(3),
                        ma = a.rawData.get(7),
                        ca = a.rawData.get(11);
                    a = a.rawData.get(15);
                    this.rawData.set(0, b * v + f * t + C * B + n * E);
                    this.rawData.set(1, b * z + f * x + C * A + n * u);
                    this.rawData.set(2, b * N + f * U + C * J + n * I);
                    this.rawData.set(3, b * D + f * ma + C * ca + n * a);
                    this.rawData.set(4, c * v + h * t + g * B + p * E);
                    this.rawData.set(5, c * z + h * x + g * A + p * u);
                    this.rawData.set(6, c * N + h * U + g * J + p * I);
                    this.rawData.set(7, c * D + h * ma + g * ca + p * a);
                    this.rawData.set(8, d * v + r * t + k * B + l * E);
                    this.rawData.set(9, d * z + r * x + k * A + l * u);
                    this.rawData.set(10,
                        d * N + r * U + k * J + l * I);
                    this.rawData.set(11, d * D + r * ma + k * ca + l * a);
                    this.rawData.set(12, e * v + m * t + q * B + y * E);
                    this.rawData.set(13, e * z + m * x + q * A + y * u);
                    this.rawData.set(14, e * N + m * U + q * J + y * I);
                    this.rawData.set(15, e * D + m * ma + q * ca + y * a)
                },
                appendRotation: function (a, b, c) {
                    var d = 0,
                        e = d,
                        f = e;
                    null != c && (f = c.x, e = c.y, d = c.z);
                    c = a * Math.PI / 180;
                    a = Math.cos(c);
                    c = Math.sin(c);
                    var h = b.x,
                        r = b.y;
                    b = b.z;
                    var m = h * h,
                        C = r * r,
                        g = b * b,
                        k = m + C + g;
                    if (0 != k) {
                        var q = Math.sqrt(k);
                        h /= q;
                        r /= q;
                        b /= q;
                        m /= k;
                        C /= k;
                        g /= k
                    }
                    k = 1 - a;
                    q = new xb;
                    var n = q.rawData;
                    n.set(0, m + (C + g) * a);
                    n.set(1, h * r * k +
                        b * c);
                    n.set(2, h * b * k - r * c);
                    n.set(4, h * r * k - b * c);
                    n.set(5, C + (m + g) * a);
                    n.set(6, r * b * k + h * c);
                    n.set(8, h * b * k + r * c);
                    n.set(9, r * b * k - h * c);
                    n.set(10, g + (m + C) * a);
                    n.set(12, (f * (C + g) - h * (e * r + d * b)) * k + (e * b - d * r) * c);
                    n.set(13, (e * (m + g) - r * (f * h + d * b)) * k + (d * h - f * b) * c);
                    n.set(14, (d * (m + C) - b * (f * h + e * r)) * k + (f * r - e * h) * c);
                    this.append(q)
                },
                appendScale: function (a, b, c) {
                    this.append(new xb(D.toFloatVector(null, null, null, [a, 0, 0, 0, 0, b, 0, 0, 0, 0, c, 0, 0, 0, 0, 1])))
                },
                appendTranslation: function (a, b, c) {
                    var d = this.rawData;
                    d.set(12, d.get(12) + a);
                    d = this.rawData;
                    d.set(13,
                        d.get(13) + b);
                    d = this.rawData;
                    d.set(14, d.get(14) + c)
                },
                clone: function () {
                    return new xb(this.rawData.copy())
                },
                copyColumnFrom: function (a, b) {
                    switch (a) {
                        case 0:
                            this.rawData.set(0, b.x);
                            this.rawData.set(1, b.y);
                            this.rawData.set(2, b.z);
                            this.rawData.set(3, b.w);
                            break;
                        case 1:
                            this.rawData.set(4, b.x);
                            this.rawData.set(5, b.y);
                            this.rawData.set(6, b.z);
                            this.rawData.set(7, b.w);
                            break;
                        case 2:
                            this.rawData.set(8, b.x);
                            this.rawData.set(9, b.y);
                            this.rawData.set(10, b.z);
                            this.rawData.set(11, b.w);
                            break;
                        case 3:
                            this.rawData.set(12, b.x),
                                this.rawData.set(13, b.y), this.rawData.set(14, b.z), this.rawData.set(15, b.w)
                    }
                },
                copyColumnTo: function (a, b) {
                    switch (a) {
                        case 0:
                            b.x = this.rawData.get(0);
                            b.y = this.rawData.get(1);
                            b.z = this.rawData.get(2);
                            b.w = this.rawData.get(3);
                            break;
                        case 1:
                            b.x = this.rawData.get(4);
                            b.y = this.rawData.get(5);
                            b.z = this.rawData.get(6);
                            b.w = this.rawData.get(7);
                            break;
                        case 2:
                            b.x = this.rawData.get(8);
                            b.y = this.rawData.get(9);
                            b.z = this.rawData.get(10);
                            b.w = this.rawData.get(11);
                            break;
                        case 3:
                            b.x = this.rawData.get(12), b.y = this.rawData.get(13), b.z =
                                this.rawData.get(14), b.w = this.rawData.get(15)
                    }
                },
                copyFrom: function (a) {
                    this.rawData = a.rawData.copy()
                },
                copyRawDataFrom: function (a, b, c) {
                    null == c && (c = !1);
                    null == b && (b = 0);
                    c && this.transpose();
                    for (var d = 0, e = a.get_length() - b; d < e;) {
                        var f = d++;
                        this.rawData.set(f, a.get(f + b))
                    }
                    c && this.transpose()
                },
                copyRawDataTo: function (a, b, c) {
                    null == c && (c = !1);
                    null == b && (b = 0);
                    c && this.transpose();
                    for (var d = 0, e = this.rawData.get_length(); d < e;) {
                        var f = d++;
                        a.set(f + b, this.rawData.get(f))
                    }
                    c && this.transpose()
                },
                copyRowFrom: function (a, b) {
                    switch (a) {
                        case 0:
                            this.rawData.set(0,
                                b.x);
                            this.rawData.set(4, b.y);
                            this.rawData.set(8, b.z);
                            this.rawData.set(12, b.w);
                            break;
                        case 1:
                            this.rawData.set(1, b.x);
                            this.rawData.set(5, b.y);
                            this.rawData.set(9, b.z);
                            this.rawData.set(13, b.w);
                            break;
                        case 2:
                            this.rawData.set(2, b.x);
                            this.rawData.set(6, b.y);
                            this.rawData.set(10, b.z);
                            this.rawData.set(14, b.w);
                            break;
                        case 3:
                            this.rawData.set(3, b.x), this.rawData.set(7, b.y), this.rawData.set(11, b.z), this.rawData.set(15, b.w)
                    }
                },
                copyRowTo: function (a, b) {
                    switch (a) {
                        case 0:
                            b.x = this.rawData.get(0);
                            b.y = this.rawData.get(4);
                            b.z = this.rawData.get(8);
                            b.w = this.rawData.get(12);
                            break;
                        case 1:
                            b.x = this.rawData.get(1);
                            b.y = this.rawData.get(5);
                            b.z = this.rawData.get(9);
                            b.w = this.rawData.get(13);
                            break;
                        case 2:
                            b.x = this.rawData.get(2);
                            b.y = this.rawData.get(6);
                            b.z = this.rawData.get(10);
                            b.w = this.rawData.get(14);
                            break;
                        case 3:
                            b.x = this.rawData.get(3), b.y = this.rawData.get(7), b.z = this.rawData.get(11), b.w = this.rawData.get(15)
                    }
                },
                deltaTransformVector: function (a) {
                    var b = a.x,
                        c = a.y;
                    a = a.z;
                    return new Q(b * this.rawData.get(0) + c * this.rawData.get(4) + a * this.rawData.get(8),
                        b * this.rawData.get(1) + c * this.rawData.get(5) + a * this.rawData.get(9), b * this.rawData.get(2) + c * this.rawData.get(6) + a * this.rawData.get(10), b * this.rawData.get(3) + c * this.rawData.get(7) + a * this.rawData.get(11))
                },
                identity: function () {
                    this.rawData = D.toFloatVector(null, null, null, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1])
                },
                invert: function () {
                    var a = this.get_determinant(),
                        b = 1E-11 < Math.abs(a);
                    if (b) {
                        a = 1 / a;
                        var c = this.rawData.get(0),
                            d = this.rawData.get(4),
                            e = this.rawData.get(8),
                            f = this.rawData.get(12),
                            h = this.rawData.get(1),
                            r = this.rawData.get(5),
                            m = this.rawData.get(9),
                            C = this.rawData.get(13),
                            g = this.rawData.get(2),
                            k = this.rawData.get(6),
                            q = this.rawData.get(10),
                            n = this.rawData.get(14),
                            p = this.rawData.get(3),
                            l = this.rawData.get(7),
                            y = this.rawData.get(11),
                            v = this.rawData.get(15);
                        this.rawData.set(0, a * (r * (q * v - n * y) - m * (k * v - n * l) + C * (k * y - q * l)));
                        this.rawData.set(1, -a * (h * (q * v - n * y) - m * (g * v - n * p) + C * (g * y - q * p)));
                        this.rawData.set(2, a * (h * (k * v - n * l) - r * (g * v - n * p) + C * (g * l - k * p)));
                        this.rawData.set(3, -a * (h * (k * y - q * l) - r * (g * y - q * p) + m * (g * l - k * p)));
                        this.rawData.set(4, -a * (d * (q * v - n * y) -
                            e * (k * v - n * l) + f * (k * y - q * l)));
                        this.rawData.set(5, a * (c * (q * v - n * y) - e * (g * v - n * p) + f * (g * y - q * p)));
                        this.rawData.set(6, -a * (c * (k * v - n * l) - d * (g * v - n * p) + f * (g * l - k * p)));
                        this.rawData.set(7, a * (c * (k * y - q * l) - d * (g * y - q * p) + e * (g * l - k * p)));
                        this.rawData.set(8, a * (d * (m * v - C * y) - e * (r * v - C * l) + f * (r * y - m * l)));
                        this.rawData.set(9, -a * (c * (m * v - C * y) - e * (h * v - C * p) + f * (h * y - m * p)));
                        this.rawData.set(10, a * (c * (r * v - C * l) - d * (h * v - C * p) + f * (h * l - r * p)));
                        this.rawData.set(11, -a * (c * (r * y - m * l) - d * (h * y - m * p) + e * (h * l - r * p)));
                        this.rawData.set(12, -a * (d * (m * n - C * q) - e * (r * n - C * k) + f *
                            (r * q - m * k)));
                        this.rawData.set(13, a * (c * (m * n - C * q) - e * (h * n - C * g) + f * (h * q - m * g)));
                        this.rawData.set(14, -a * (c * (r * n - C * k) - d * (h * n - C * g) + f * (h * k - r * g)));
                        this.rawData.set(15, a * (c * (r * q - m * k) - d * (h * q - m * g) + e * (h * k - r * g)))
                    }
                    return b
                },
                prepend: function (a) {
                    var b = a.rawData.get(0),
                        c = a.rawData.get(4),
                        d = a.rawData.get(8),
                        e = a.rawData.get(12),
                        f = a.rawData.get(1),
                        h = a.rawData.get(5),
                        r = a.rawData.get(9),
                        m = a.rawData.get(13),
                        C = a.rawData.get(2),
                        g = a.rawData.get(6),
                        k = a.rawData.get(10),
                        q = a.rawData.get(14),
                        n = a.rawData.get(3),
                        p = a.rawData.get(7),
                        l =
                            a.rawData.get(11);
                    a = a.rawData.get(15);
                    var y = this.rawData.get(0),
                        v = this.rawData.get(4),
                        t = this.rawData.get(8),
                        B = this.rawData.get(12),
                        E = this.rawData.get(1),
                        z = this.rawData.get(5),
                        x = this.rawData.get(9),
                        A = this.rawData.get(13),
                        u = this.rawData.get(2),
                        N = this.rawData.get(6),
                        U = this.rawData.get(10),
                        J = this.rawData.get(14),
                        I = this.rawData.get(3),
                        D = this.rawData.get(7),
                        ma = this.rawData.get(11),
                        ca = this.rawData.get(15);
                    this.rawData.set(0, b * y + f * v + C * t + n * B);
                    this.rawData.set(1, b * E + f * z + C * x + n * A);
                    this.rawData.set(2, b * u + f * N +
                        C * U + n * J);
                    this.rawData.set(3, b * I + f * D + C * ma + n * ca);
                    this.rawData.set(4, c * y + h * v + g * t + p * B);
                    this.rawData.set(5, c * E + h * z + g * x + p * A);
                    this.rawData.set(6, c * u + h * N + g * U + p * J);
                    this.rawData.set(7, c * I + h * D + g * ma + p * ca);
                    this.rawData.set(8, d * y + r * v + k * t + l * B);
                    this.rawData.set(9, d * E + r * z + k * x + l * A);
                    this.rawData.set(10, d * u + r * N + k * U + l * J);
                    this.rawData.set(11, d * I + r * D + k * ma + l * ca);
                    this.rawData.set(12, e * y + m * v + q * t + a * B);
                    this.rawData.set(13, e * E + m * z + q * x + a * A);
                    this.rawData.set(14, e * u + m * N + q * U + a * J);
                    this.rawData.set(15, e * I + m * D + q * ma + a * ca)
                },
                prependScale: function (a,
                                        b, c) {
                    this.prepend(new xb(D.toFloatVector(null, null, null, [a, 0, 0, 0, 0, b, 0, 0, 0, 0, c, 0, 0, 0, 0, 1])))
                },
                prependTranslation: function (a, b, c) {
                    var d = new xb;
                    d.set_position(new Q(a, b, c));
                    this.prepend(d)
                },
                recompose: function (a, b) {
                    null == b && (b = 1);
                    if (3 > a.get_length() || 0 == a.get(2).x || 0 == a.get(2).y || 0 == a.get(2).z) return !1;
                    this.identity();
                    var c = [];
                    c[0] = c[1] = c[2] = a.get(2).x;
                    c[4] = c[5] = c[6] = a.get(2).y;
                    c[8] = c[9] = c[10] = a.get(2).z;
                    if (1 == b) {
                        b = Math.cos(a.get(1).x);
                        var d = Math.cos(a.get(1).y),
                            e = Math.cos(a.get(1).z),
                            f = Math.sin(a.get(1).x),
                            h = Math.sin(a.get(1).y),
                            r = Math.sin(a.get(1).z);
                        this.rawData.set(0, d * e * c[0]);
                        this.rawData.set(1, d * r * c[1]);
                        this.rawData.set(2, -h * c[2]);
                        this.rawData.set(3, 0);
                        this.rawData.set(4, (f * h * e - b * r) * c[4]);
                        this.rawData.set(5, (f * h * r + b * e) * c[5]);
                        this.rawData.set(6, f * d * c[6]);
                        this.rawData.set(7, 0);
                        this.rawData.set(8, (b * h * e + f * r) * c[8]);
                        this.rawData.set(9, (b * h * r - f * e) * c[9]);
                        this.rawData.set(10, b * d * c[10])
                    } else d = a.get(1).x, e = a.get(1).y, f = a.get(1).z, h = a.get(1).w, 0 == b && (d *= Math.sin(h / 2), e *= Math.sin(h / 2), f *= Math.sin(h / 2), h =
                        Math.cos(h / 2)), this.rawData.set(0, (1 - 2 * e * e - 2 * f * f) * c[0]), this.rawData.set(1, (2 * d * e + 2 * h * f) * c[1]), this.rawData.set(2, (2 * d * f - 2 * h * e) * c[2]), this.rawData.set(3, 0), this.rawData.set(4, (2 * d * e - 2 * h * f) * c[4]), this.rawData.set(5, (1 - 2 * d * d - 2 * f * f) * c[5]), this.rawData.set(6, (2 * e * f + 2 * h * d) * c[6]), this.rawData.set(7, 0), this.rawData.set(8, (2 * d * f + 2 * h * e) * c[8]), this.rawData.set(9, (2 * e * f - 2 * h * d) * c[9]), this.rawData.set(10, (1 - 2 * d * d - 2 * e * e) * c[10]);
                    this.rawData.set(11, 0);
                    this.rawData.set(12, a.get(0).x);
                    this.rawData.set(13, a.get(0).y);
                    this.rawData.set(14, a.get(0).z);
                    this.rawData.set(15, 1);
                    0 == a.get(2).x && this.rawData.set(0, 1E-15);
                    0 == a.get(2).y && this.rawData.set(5, 1E-15);
                    0 == a.get(2).z && this.rawData.set(10, 1E-15);
                    return !(0 == a.get(2).x || 0 == a.get(2).y || 0 == a.get(2).y)
                },
                transformVector: function (a) {
                    var b = a.x,
                        c = a.y;
                    a = a.z;
                    return new Q(b * this.rawData.get(0) + c * this.rawData.get(4) + a * this.rawData.get(8) + this.rawData.get(12), b * this.rawData.get(1) + c * this.rawData.get(5) + a * this.rawData.get(9) + this.rawData.get(13), b * this.rawData.get(2) + c * this.rawData.get(6) +
                        a * this.rawData.get(10) + this.rawData.get(14), b * this.rawData.get(3) + c * this.rawData.get(7) + a * this.rawData.get(11) + this.rawData.get(15))
                },
                transformVectors: function (a, b) {
                    for (var c = 0, d, e, f; c + 3 <= a.get_length();) d = a.get(c), e = a.get(c + 1), f = a.get(c + 2), b.set(c, d * this.rawData.get(0) + e * this.rawData.get(4) + f * this.rawData.get(8) + this.rawData.get(12)), b.set(c + 1, d * this.rawData.get(1) + e * this.rawData.get(5) + f * this.rawData.get(9) + this.rawData.get(13)), b.set(c + 2, d * this.rawData.get(2) + e * this.rawData.get(6) + f * this.rawData.get(10) +
                        this.rawData.get(14)), c += 3
                },
                transpose: function () {
                    var a = this.rawData.copy();
                    this.rawData.set(1, a.get(4));
                    this.rawData.set(2, a.get(8));
                    this.rawData.set(3, a.get(12));
                    this.rawData.set(4, a.get(1));
                    this.rawData.set(6, a.get(9));
                    this.rawData.set(7, a.get(13));
                    this.rawData.set(8, a.get(2));
                    this.rawData.set(9, a.get(6));
                    this.rawData.set(11, a.get(14));
                    this.rawData.set(12, a.get(3));
                    this.rawData.set(13, a.get(7));
                    this.rawData.set(14, a.get(11))
                },
                get_determinant: function () {
                    return (this.rawData.get(0) * this.rawData.get(5) -
                        this.rawData.get(4) * this.rawData.get(1)) * (this.rawData.get(10) * this.rawData.get(15) - this.rawData.get(14) * this.rawData.get(11)) - (this.rawData.get(0) * this.rawData.get(9) - this.rawData.get(8) * this.rawData.get(1)) * (this.rawData.get(6) * this.rawData.get(15) - this.rawData.get(14) * this.rawData.get(7)) + (this.rawData.get(0) * this.rawData.get(13) - this.rawData.get(12) * this.rawData.get(1)) * (this.rawData.get(6) * this.rawData.get(11) - this.rawData.get(10) * this.rawData.get(7)) + (this.rawData.get(4) * this.rawData.get(9) -
                        this.rawData.get(8) * this.rawData.get(5)) * (this.rawData.get(2) * this.rawData.get(15) - this.rawData.get(14) * this.rawData.get(3)) - (this.rawData.get(4) * this.rawData.get(13) - this.rawData.get(12) * this.rawData.get(5)) * (this.rawData.get(2) * this.rawData.get(11) - this.rawData.get(10) * this.rawData.get(3)) + (this.rawData.get(8) * this.rawData.get(13) - this.rawData.get(12) * this.rawData.get(9)) * (this.rawData.get(2) * this.rawData.get(7) - this.rawData.get(6) * this.rawData.get(3))
                },
                set_position: function (a) {
                    this.rawData.set(12,
                        a.x);
                    this.rawData.set(13, a.y);
                    this.rawData.set(14, a.z);
                    return a
                },
                __class__: xb,
                __properties__: {
                    set_position: "set_position",
                    get_determinant: "get_determinant"
                }
            };
            var kb = function () {
            };
            g["away3d.core.math.Matrix3DUtils"] = kb;
            kb.__name__ = "away3d.core.math.Matrix3DUtils";
            kb.getForward = function (a, b) {
                null == b && (b = new Q(0, 0, 0));
                a.copyColumnTo(2, b);
                b.normalize();
                return b
            };
            kb.decompose = function (a, b) {
                null == b && (b = 1);
                var c = kb.RAW_DATA_CONTAINER;
                a.copyRawDataTo(c);
                var d = c.get(0),
                    e = c.get(1),
                    f = c.get(2),
                    h = c.get(4),
                    r = c.get(5),
                    m = c.get(6),
                    C = c.get(8),
                    g = c.get(9),
                    k = c.get(10);
                a = c.get(12);
                var q = c.get(13);
                c = c.get(14);
                var n = Math.sqrt(d * d + e * e + f * f),
                    p = Math.sqrt(h * h + r * r + m * m),
                    l = Math.sqrt(C * C + g * g + k * k),
                    y = 0,
                    v = n,
                    t = p,
                    B = l;
                0 > d * (r * k - m * g) - e * (h * k - m * C) + f * (h * g - r * C) && (B = -B);
                d /= v;
                e /= v;
                f /= v;
                h /= t;
                r /= t;
                m /= t;
                C /= B;
                g /= B;
                k /= B;
                1 == b ? (n = Math.atan2(m, k), p = Math.atan2(-f, Math.sqrt(d * d + e * e)), e = Math.sin(n), f = Math.cos(n), l = Math.atan2(e * C - f * h, f * r - e * g)) : 0 == b ? (y = Math.acos((d + r + k - 1) / 2), r = Math.sqrt((m - g) * (m - g) + (C - f) * (C - f) + (e - h) * (e - h)), n = (m - g) / r, p = (C - f) / r, l = (e - h) / r) :
                    (n = d + r + k, 0 < n ? (y = Math.sqrt(1 + n) / 2, n = (m - g) / (4 * y), p = (C - f) / (4 * y), l = (e - h) / (4 * y)) : d > r && d > k ? (n = Math.sqrt(1 + d - r - k) / 2, y = (m - g) / (4 * n), p = (e + h) / (4 * n), l = (C + f) / (4 * n)) : r > k ? (p = Math.sqrt(1 + r - d - k) / 2, n = (e + h) / (4 * p), y = (C - f) / (4 * p), l = (m + g) / (4 * p)) : (l = Math.sqrt(1 + k - d - r) / 2, n = (C + f) / (4 * l), p = (m + g) / (4 * l), y = (e - h) / (4 * l)));
                h = kb.CALCULATION_DECOMPOSE;
                h.get(0).x = a;
                h.get(0).y = q;
                h.get(0).z = c;
                h.get(1).x = n;
                h.get(1).y = p;
                h.get(1).z = l;
                h.get(1).w = y;
                h.get(2).x = v;
                h.get(2).y = t;
                h.get(2).z = B;
                return h
            };
            kb.transformVector = function (a, b, c) {
                null == c &&
                (c = new Q);
                var d = kb.RAW_DATA_CONTAINER;
                a.copyRawDataTo(d);
                a = d.get(0);
                var e = d.get(1),
                    f = d.get(2),
                    h = d.get(3),
                    r = d.get(4),
                    m = d.get(5),
                    C = d.get(6),
                    g = d.get(7),
                    k = d.get(8),
                    q = d.get(9),
                    n = d.get(10),
                    p = d.get(11),
                    l = d.get(12),
                    y = d.get(13),
                    v = d.get(14);
                d = d.get(15);
                var t = b.x,
                    B = b.y;
                b = b.z;
                c.x = a * t + r * B + k * b + l;
                c.y = e * t + m * B + q * b + y;
                c.z = f * t + C * B + n * b + v;
                c.w = h * t + g * B + p * b + d;
                return c
            };
            kb.deltaTransformVector = function (a, b, c) {
                null == c && (c = new Q);
                var d = kb.RAW_DATA_CONTAINER;
                a.copyRawDataTo(d);
                a = d.get(0);
                var e = d.get(1),
                    f = d.get(2),
                    h = d.get(3),
                    r = d.get(4),
                    m = d.get(5),
                    C = d.get(6),
                    g = d.get(7),
                    k = d.get(8),
                    q = d.get(9),
                    n = d.get(10);
                d = d.get(11);
                var p = b.x,
                    l = b.y;
                b = b.z;
                c.x = a * p + r * l + k * b;
                c.y = e * p + m * l + q * b;
                c.z = f * p + C * l + n * b;
                c.w = h * p + g * l + d * b;
                return c
            };
            var Ee = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 0);
                this.a = a;
                this.b = b;
                this.c = c;
                this.d = d;
                this._alignment = 0 == a && 0 == b ? 1 : 0 == b && 0 == c ? 2 : 0 == a && 0 == c ? 3 : 0
            };
            g["away3d.core.math.Plane3D"] = Ee;
            Ee.__name__ = "away3d.core.math.Plane3D";
            Ee.prototype = {
                __class__: Ee
            };
            var Sd = function () {
                this._childNodes = D.toObjectVector(null);
                this._numChildNodes = this._collectionMark = this._numEntities = 0
            };
            g["away3d.core.partition.NodeBase"] = Sd;
            Sd.__name__ = "away3d.core.partition.NodeBase";
            Sd.prototype = {
                set_showDebugBounds: function (a) {
                    if (null != this._debugPrimitive == a) return a;
                    a ? this._debugPrimitive = this.createDebugBounds() : (this._debugPrimitive.dispose(), this._debugPrimitive = null);
                    for (var b = 0, c = this._numChildNodes; b < c;) {
                        var d = b++;
                        this._childNodes.get(d).set_showDebugBounds(a)
                    }
                    return a
                },
                get_parent: function () {
                    return this._parent
                },
                addNode: function (a) {
                    a._parent =
                        this;
                    this._numEntities += a._numEntities;
                    this._childNodes.set(this._numChildNodes++, a);
                    a.set_showDebugBounds(null != this._debugPrimitive);
                    var b = a._numEntities;
                    a = this;
                    do a._numEntities += b, a = a._parent; while (null != a)
                },
                removeNode: function (a) {
                    var b = this._childNodes.indexOf(a, 0);
                    this._childNodes.set(b, this._childNodes.get(--this._numChildNodes));
                    this._childNodes.pop();
                    b = a._numEntities;
                    a = this;
                    do a._numEntities -= b, a = a._parent; while (null != a)
                },
                isInFrustum: function (a, b) {
                    return !0
                },
                findPartitionForEntity: function (a) {
                    return this
                },
                acceptTraverser: function (a) {
                    if ((0 != this._numEntities || null != this._debugPrimitive) && a.enterNode(this)) {
                        for (var b = 0; b < this._numChildNodes;) this._childNodes.get(b++).acceptTraverser(a);
                        null != this._debugPrimitive && a.applyRenderable(this._debugPrimitive)
                    }
                },
                createDebugBounds: function () {
                    return null
                },
                __class__: Sd,
                __properties__: {
                    set_showDebugBounds: "set_showDebugBounds",
                    get_parent: "get_parent"
                }
            };
            var jb = function (a) {
                Sd.call(this);
                this._entity = a;
                this._numEntities = 1
            };
            g["away3d.core.partition.EntityNode"] = jb;
            jb.__name__ = "away3d.core.partition.EntityNode";
            jb.__super__ = Sd;
            jb.prototype = l(Sd.prototype, {
                get_entity: function () {
                    return this._entity
                },
                acceptTraverser: function (a) {
                    a.applyEntity(this._entity)
                },
                removeFromParent: function () {
                    null != this._parent && this._parent.removeNode(this);
                    this._parent = null
                },
                isInFrustum: function (a, b) {
                    return this._entity.get_isVisible() ? this._entity.get_worldBounds().isInFrustum(a, b) : !1
                },
                __class__: jb,
                __properties__: l(Sd.prototype.__properties__, {
                    get_entity: "get_entity"
                })
            });
            var zh = function (a) {
                jb.call(this,
                    a)
            };
            g["away3d.core.partition.CameraNode"] = zh;
            zh.__name__ = "away3d.core.partition.CameraNode";
            zh.__super__ = jb;
            zh.prototype = l(jb.prototype, {
                acceptTraverser: function (a) {
                },
                __class__: zh
            });
            var Gh = function (a) {
                jb.call(this, a);
                this._light = a
            };
            g["away3d.core.partition.DirectionalLightNode"] = Gh;
            Gh.__name__ = "away3d.core.partition.DirectionalLightNode";
            Gh.__super__ = jb;
            Gh.prototype = l(jb.prototype, {
                acceptTraverser: function (a) {
                    a.enterNode(this) && (jb.prototype.acceptTraverser.call(this, a), a.applyDirectionalLight(this._light))
                },
                __class__: Gh
            });
            var Hh = function (a) {
                jb.call(this, a);
                this._light = a
            };
            g["away3d.core.partition.LightNode"] = Hh;
            Hh.__name__ = "away3d.core.partition.LightNode";
            Hh.__super__ = jb;
            Hh.prototype = l(jb.prototype, {
                acceptTraverser: function (a) {
                    a.enterNode(this) && (jb.prototype.acceptTraverser.call(this, a), a.applyUnknownLight(this._light))
                },
                __class__: Hh
            });
            var Ih = function (a) {
                jb.call(this, a);
                this._light = a
            };
            g["away3d.core.partition.LightProbeNode"] = Ih;
            Ih.__name__ = "away3d.core.partition.LightProbeNode";
            Ih.__super__ = jb;
            Ih.prototype =
                l(jb.prototype, {
                    acceptTraverser: function (a) {
                        a.enterNode(this) && (jb.prototype.acceptTraverser.call(this, a), a.applyLightProbe(this._light))
                    },
                    __class__: Ih
                });
            var ff = function (a) {
                jb.call(this, a);
                this._mesh = a
            };
            g["away3d.core.partition.MeshNode"] = ff;
            ff.__name__ = "away3d.core.partition.MeshNode";
            ff.__super__ = jb;
            ff.prototype = l(jb.prototype, {
                acceptTraverser: function (a) {
                    if (a.enterNode(this)) {
                        jb.prototype.acceptTraverser.call(this, a);
                        for (var b = this._mesh.get_subMeshes(), c = 0, d = b.get_length(); c < d;) a.applyRenderable(b.get(c++))
                    }
                },
                __class__: ff
            });
            var Jh = function () {
                Sd.call(this)
            };
            g["away3d.core.partition.NullNode"] = Jh;
            Jh.__name__ = "away3d.core.partition.NullNode";
            Jh.__super__ = Sd;
            Jh.prototype = l(Sd.prototype, {
                __class__: Jh
            });
            var Vj = function (a) {
                this._rootNode = a;
                null == a && (this._rootNode = new Jh)
            };
            g["away3d.core.partition.Partition3D"] = Vj;
            Vj.__name__ = "away3d.core.partition.Partition3D";
            Vj.prototype = {
                traverse: function (a) {
                    this._updatesMade && this.updateEntities();
                    ++Fe._collectionMark;
                    this._rootNode.acceptTraverser(a)
                },
                markForUpdate: function (a) {
                    a =
                        a.getEntityPartitionNode();
                    for (var b = this._updateQueue; null != b;) {
                        if (a == b) return;
                        b = b._updateQueueNext
                    }
                    a._updateQueueNext = this._updateQueue;
                    this._updateQueue = a;
                    this._updatesMade = !0
                },
                removeEntity: function (a) {
                    a = a.getEntityPartitionNode();
                    var b;
                    a.removeFromParent();
                    if (a == this._updateQueue) this._updateQueue = a._updateQueueNext;
                    else {
                        for (b = this._updateQueue; null != b && b._updateQueueNext != a;) b = b._updateQueueNext;
                        null != b && (b._updateQueueNext = a._updateQueueNext)
                    }
                    a._updateQueueNext = null;
                    null == this._updateQueue &&
                    (this._updatesMade = !1)
                },
                updateEntities: function () {
                    var a = this._updateQueue;
                    this._updateQueue = null;
                    this._updatesMade = !1;
                    do {
                        var b = this._rootNode.findPartitionForEntity(a.get_entity());
                        a.get_parent() != b && (null != a && a.removeFromParent(), b.addNode(a));
                        b = a._updateQueueNext;
                        a._updateQueueNext = null;
                        a.get_entity().internalUpdate();
                        a = b
                    } while (null != a)
                },
                __class__: Vj
            };
            var Kh = function (a) {
                jb.call(this, a);
                this._light = a
            };
            g["away3d.core.partition.PointLightNode"] = Kh;
            Kh.__name__ = "away3d.core.partition.PointLightNode";
            Kh.__super__ = jb;
            Kh.prototype = l(jb.prototype, {
                acceptTraverser: function (a) {
                    a.enterNode(this) && (jb.prototype.acceptTraverser.call(this, a), a.applyPointLight(this._light))
                },
                __class__: Kh
            });
            var Lh = function (a) {
                jb.call(this, T.__cast(a, Eb));
                this._renderable = a
            };
            g["away3d.core.partition.RenderableNode"] = Lh;
            Lh.__name__ = "away3d.core.partition.RenderableNode";
            Lh.__super__ = jb;
            Lh.prototype = l(jb.prototype, {
                acceptTraverser: function (a) {
                    a.enterNode(this) && (jb.prototype.acceptTraverser.call(this, a), a.applyRenderable(this._renderable))
                },
                __class__: Lh
            });
            var Mh = function () {
            };
            g["away3d.core.pick.IPicker"] = Mh;
            Mh.__name__ = "away3d.core.pick.IPicker";
            Mh.__isInterface__ = !0;
            Mh.prototype = {
                __class__: Mh
            };
            var dk = function () {
            };
            g["away3d.core.pick.IPickingCollider"] = dk;
            dk.__name__ = "away3d.core.pick.IPickingCollider";
            dk.__isInterface__ = !0;
            dk.prototype = {
                __class__: dk
            };
            var Uj = function (a) {
                this.entity = a
            };
            g["away3d.core.pick.PickingCollisionVO"] = Uj;
            Uj.__name__ = "away3d.core.pick.PickingCollisionVO";
            Uj.prototype = {
                __class__: Uj
            };
            var Ge = function (a) {
                this._onlyMouseEnabled = !0;
                this._ignoredEntities = [];
                this._findClosestCollision = a;
                this._entities = D.toObjectVector(null)
            };
            g["away3d.core.pick.RaycastPicker"] = Ge;
            Ge.__name__ = "away3d.core.pick.RaycastPicker";
            Ge.__interfaces__ = [Mh];
            Ge.prototype = {
                getViewCollision: function (a, b, c) {
                    var d = c.get_entityCollector();
                    if (0 == d.get_numMouseEnableds()) return null;
                    var e = c.unproject(a, b, 0, Ge.tempRayPosition);
                    a = c.unproject(a, b, 1, Ge.tempRayDirection);
                    a.x -= e.x;
                    a.y -= e.y;
                    a.z -= e.z;
                    this._numEntities = 0;
                    for (d = d.get_entityHead(); null != d;) b = d.entity, this.isIgnored(b) ||
                    b.get_isVisible() && b.isIntersectingRay(e, a) && this._entities.set(this._numEntities++, b), d = d.next;
                    return 0 == this._numEntities ? null : this.getPickingCollisionVO()
                },
                isIgnored: function (a) {
                    if (this._onlyMouseEnabled && (!a._ancestorsAllowMouseEnabled || !a.get_mouseEnabled())) return !0;
                    for (var b, c = 0, d = this._ignoredEntities; c < d.length;)
                        if (b = d[c], ++c, b == a) return !0;
                    return !1
                },
                sortOnNearT: function (a, b) {
                    return a.get_pickingCollisionVO().rayEntryDistance > b.get_pickingCollisionVO().rayEntryDistance ? 1 : -1
                },
                getPickingCollisionVO: function () {
                    this._entities.set_length(this._numEntities);
                    this._entities.sort(p(this, this.sortOnNearT));
                    for (var a = Infinity, b = null, c, d, e = 0, f = this._numEntities; e < f;)
                        if (c = e++, d = this._entities.get(c), c = d._pickingCollisionVO, null != d.get_pickingCollider()) {
                            if ((null == b || c.rayEntryDistance < b.rayEntryDistance) && d.collidesBefore(a, this._findClosestCollision) && (a = c.rayEntryDistance, b = c, !this._findClosestCollision)) return this.updateLocalPosition(c), c
                        } else if ((null == b || c.rayEntryDistance < b.rayEntryDistance) && !c.rayOriginIsInsideBounds) return this.updateLocalPosition(c),
                            c;
                    return b
                },
                updateLocalPosition: function (a) {
                    null == a.localPosition && (a.localPosition = new Q);
                    var b = a.localPosition,
                        c = a.localRayDirection,
                        d = a.localRayPosition;
                    a = a.rayEntryDistance;
                    b.x = d.x + a * c.x;
                    b.y = d.y + a * c.y;
                    b.z = d.z + a * c.z
                },
                __class__: Ge
            };
            var ha = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 0);
                this.x = a;
                this.y = b;
                this.width = c;
                this.height = d
            };
            g["openfl.geom.Rectangle"] = ha;
            ha.__name__ = "openfl.geom.Rectangle";
            ha.prototype = {
                clone: function () {
                    return new ha(this.x, this.y, this.width,
                        this.height)
                },
                contains: function (a, b) {
                    return a >= this.x && b >= this.y && a < this.get_right() ? b < this.get_bottom() : !1
                },
                containsPoint: function (a) {
                    return this.contains(a.x, a.y)
                },
                copyFrom: function (a) {
                    this.x = a.x;
                    this.y = a.y;
                    this.width = a.width;
                    this.height = a.height
                },
                equals: function (a) {
                    return a == this ? !0 : null != a && this.x == a.x && this.y == a.y && this.width == a.width ? this.height == a.height : !1
                },
                offset: function (a, b) {
                    this.x += a;
                    this.y += b
                },
                setTo: function (a, b, c, d) {
                    this.x = a;
                    this.y = b;
                    this.width = c;
                    this.height = d
                },
                __contract: function (a,
                                      b, c, d) {
                    if (0 != this.width || 0 != this.height) {
                        var e = 0,
                            f = 0,
                            h = 0,
                            r = 0;
                        this.x < a && (e = a - this.x);
                        this.y < b && (f = b - this.y);
                        this.get_right() > a + c && (h = a + c - this.get_right());
                        this.get_bottom() > b + d && (r = b + d - this.get_bottom());
                        this.x += e;
                        this.y += f;
                        this.width += h - e;
                        this.height += r - f
                    }
                },
                __expand: function (a, b, c, d) {
                    if (0 == this.width && 0 == this.height) this.x = a, this.y = b, this.width = c, this.height = d;
                    else {
                        var e = this.get_right(),
                            f = this.get_bottom();
                        this.x > a && (this.x = a, this.width = e - a);
                        this.y > b && (this.y = b, this.height = f - b);
                        e < a + c && (this.width =
                            a + c - this.x);
                        f < b + d && (this.height = b + d - this.y)
                    }
                },
                __toLimeRectangle: function () {
                    null == ha.__limeRectangle && (ha.__limeRectangle = new Mc);
                    ha.__limeRectangle.setTo(this.x, this.y, this.width, this.height);
                    return ha.__limeRectangle
                },
                __transform: function (a, b) {
                    var c = b.a * this.x + b.c * this.y,
                        d = c,
                        e = b.b * this.x + b.d * this.y,
                        f = e,
                        h = b.a * (this.x + this.width) + b.c * this.y,
                        r = b.b * (this.x + this.width) + b.d * this.y;
                    h < c && (c = h);
                    r < e && (e = r);
                    h > d && (d = h);
                    r > f && (f = r);
                    h = b.a * (this.x + this.width) + b.c * (this.y + this.height);
                    r = b.b * (this.x + this.width) + b.d *
                        (this.y + this.height);
                    h < c && (c = h);
                    r < e && (e = r);
                    h > d && (d = h);
                    r > f && (f = r);
                    h = b.a * this.x + b.c * (this.y + this.height);
                    r = b.b * this.x + b.d * (this.y + this.height);
                    h < c && (c = h);
                    r < e && (e = r);
                    h > d && (d = h);
                    r > f && (f = r);
                    a.setTo(c + b.tx, e + b.ty, d - c, f - e)
                },
                get_bottom: function () {
                    return this.y + this.height
                },
                get_left: function () {
                    return this.x
                },
                get_right: function () {
                    return this.x + this.width
                },
                get_top: function () {
                    return this.y
                },
                __class__: ha,
                __properties__: {
                    get_top: "get_top",
                    get_right: "get_right",
                    get_left: "get_left",
                    get_bottom: "get_bottom"
                }
            };
            var bk =
                function () {
                };
            g["away3d.core.pick.PickingType"] = bk;
            bk.__name__ = "away3d.core.pick.PickingType";
            var ml = function (a) {
                this.set_stage3DProxy(a)
            };
            g["away3d.core.render.BackgroundImageRenderer"] = ml;
            ml.__name__ = "away3d.core.render.BackgroundImageRenderer";
            ml.prototype = {
                set_stage3DProxy: function (a) {
                    if (a == this._stage3DProxy) return a;
                    this._stage3DProxy = a;
                    this.removeBuffers();
                    return a
                },
                removeBuffers: function () {
                    null != this._vertexBuffer && (Oa.disposeVertexBuffer(this._vertexBuffer), this._vertexBuffer = null, this._program3d.dispose(),
                        this._program3d = null, Oa.disposeIndexBuffer(this._indexBuffer), this._indexBuffer = null)
                },
                getVertexCode: function () {
                    return "mov op, va0\nmov v0, va1"
                },
                getFragmentCode: function () {
                    switch (this._texture.get_format()) {
                        case 3:
                            var a = "dxt1,";
                            break;
                        case 4:
                            a = "dxt5,";
                            break;
                        default:
                            a = ""
                    }
                    return "tex ft0, v0, fs0 <2d, " + a + "linear>\t\nmov oc, ft0"
                },
                render: function () {
                    var a = this._stage3DProxy.get_context3D();
                    a != this._context && (this.removeBuffers(), this._context = a);
                    null != a && (null == this._vertexBuffer && this.initBuffers(a),
                        a.setBlendFactors(2, 9), a.setProgram(this._program3d), a.setTextureAt(0, this._texture.getTextureForStage3D(this._stage3DProxy)), a.setVertexBufferAt(0, this._vertexBuffer, 0, 2), a.setVertexBufferAt(1, this._vertexBuffer, 2, 2), a.drawTriangles(this._indexBuffer, 0, 2), a.setVertexBufferAt(0, null), a.setVertexBufferAt(1, null), a.setTextureAt(0, null))
                },
                initBuffers: function (a) {
                    this._vertexBuffer = this._stage3DProxy.createVertexBuffer(4, 4);
                    this._program3d = a.createProgram();
                    this._indexBuffer = this._stage3DProxy.createIndexBuffer(6);
                    for (var b = [2, 1, 0, 3, 2, 0], c = D.toIntVector(null), d = 0, e = b.length; d < e;) {
                        var f = d++;
                        c.set(f, b[f])
                    }
                    this._indexBuffer.uploadFromVector(c, 0, 6);
                    this._program3d.upload((new W(ie.active)).assemble(Ef.toString(1), this.getVertexCode()), (new W(ie.active)).assemble(Ef.toString(0), this.getFragmentCode()));
                    c = b = 2;
                    d = -1;
                    e = 1;
                    null != this._stage3DProxy.get_scissorRect() && (d = (2 * this._stage3DProxy.get_scissorRect().x - this._stage3DProxy.get_viewPort().width) / this._stage3DProxy.get_viewPort().width, e = (2 * this._stage3DProxy.get_scissorRect().y -
                        this._stage3DProxy.get_viewPort().height) / this._stage3DProxy.get_viewPort().height * -1, b = 2 / (this._stage3DProxy.get_viewPort().width / this._stage3DProxy.get_scissorRect().width), c = 2 / (this._stage3DProxy.get_viewPort().height / this._stage3DProxy.get_scissorRect().height));
                    a = this._vertexBuffer;
                    b = [d, e - c, 0, 1, d + b, e - c, 1, 1, d + b, e, 1, 0, d, e, 0, 0];
                    c = D.toFloatVector(null);
                    d = 0;
                    for (e = b.length; d < e;) f = d++, c.set(f, b[f]);
                    a.uploadFromVector(c, 0, 4)
                },
                __class__: ml,
                __properties__: {
                    set_stage3DProxy: "set_stage3DProxy"
                }
            };
            var Bd =
                function (a) {
                    null == a && (a = !1);
                    this._rttViewProjectionMatrix = new xb;
                    this._clearOnRender = !0;
                    this._textureRatioX = this._textureRatioY = 1;
                    this._shareContext = !1;
                    this._backgroundAlpha = 1;
                    this._backgroundR = this._backgroundG = this._backgroundB = 0;
                    this._renderableSorter = new Nh;
                    this._renderToTexture = a
                };
            g["away3d.core.render.RendererBase"] = Bd;
            Bd.__name__ = "away3d.core.render.RendererBase";
            Bd.prototype = {
                createEntityCollector: function () {
                    return new Gf
                },
                set_viewWidth: function (a) {
                    return this._viewWidth = a
                },
                set_viewHeight: function (a) {
                    return this._viewHeight =
                        a
                },
                get_renderToTexture: function () {
                    return this._renderToTexture
                },
                set_clearOnRender: function (a) {
                    return this._clearOnRender = a
                },
                set_backgroundR: function (a) {
                    return this._backgroundR = a
                },
                set_backgroundG: function (a) {
                    return this._backgroundG = a
                },
                set_backgroundB: function (a) {
                    return this._backgroundB = a
                },
                set_stage3DProxy: function (a) {
                    if (a == this._stage3DProxy) return a;
                    if (null == a) return null != this._stage3DProxy && (this._stage3DProxy.removeEventListener("Context3DCreated", p(this, this.onContextUpdate)), this._stage3DProxy.removeEventListener("Context3DRecreated",
                        p(this, this.onContextUpdate))), this._context = this._stage3DProxy = null;
                    this._stage3DProxy = a;
                    this._stage3DProxy.addEventListener("Context3DCreated", p(this, this.onContextUpdate));
                    this._stage3DProxy.addEventListener("Context3DRecreated", p(this, this.onContextUpdate));
                    null != this._backgroundImageRenderer && this._backgroundImageRenderer.set_stage3DProxy(a);
                    null != a.get_context3D() && (this._context = a.get_context3D());
                    return a
                },
                set_shareContext: function (a) {
                    return this._shareContext = a
                },
                render: function (a, b, c, d) {
                    null ==
                    d && (d = 0);
                    null != this._stage3DProxy && null != this._context && (this._rttViewProjectionMatrix.copyFrom(a.get_camera().get_viewProjection()), this._rttViewProjectionMatrix.appendScale(this._textureRatioX, this._textureRatioY, 1), this.executeRender(a, b, c, d), this._context.setVertexBufferAt(0, null), this._context.setTextureAt(0, null), this._context.setVertexBufferAt(1, null), this._context.setTextureAt(1, null), this._context.setVertexBufferAt(2, null), this._context.setTextureAt(2, null), this._context.setVertexBufferAt(3,
                        null), this._context.setTextureAt(3, null), this._context.setVertexBufferAt(4, null), this._context.setTextureAt(4, null), this._context.setVertexBufferAt(5, null), this._context.setTextureAt(5, null), this._context.setVertexBufferAt(6, null), this._context.setTextureAt(6, null), this._context.setVertexBufferAt(7, null), this._context.setTextureAt(7, null))
                },
                executeRender: function (a, b, c, d) {
                    null == d && (d = 0);
                    this._renderTarget = b;
                    this._renderTargetSurface = d;
                    null != this._renderableSorter && this._renderableSorter.sort(a);
                    this._renderToTexture &&
                    this.executeRenderToTexturePass(a);
                    this._stage3DProxy.setRenderTarget(b, !0, d);
                    null == b && this._shareContext || !this._clearOnRender || this._context.clear(this._backgroundR, this._backgroundG, this._backgroundB, this._backgroundAlpha, 1, 0);
                    this._context.setDepthTest(!1, 0);
                    this._stage3DProxy.set_scissorRect(c);
                    null != this._backgroundImageRenderer && this._backgroundImageRenderer.render();
                    this.draw(a, b);
                    this._context.setDepthTest(!1, 5);
                    !this._shareContext && this._snapshotRequired && null != this._snapshotBitmapData &&
                    (this._context.drawToBitmapData(this._snapshotBitmapData), this._snapshotRequired = !1);
                    this._stage3DProxy.set_scissorRect(null)
                },
                executeRenderToTexturePass: function (a) {
                    throw new Wa;
                },
                draw: function (a, b) {
                    throw new Wa;
                },
                onContextUpdate: function (a) {
                    this._context = this._stage3DProxy.get_context3D()
                },
                set_textureRatioX: function (a) {
                    return this._textureRatioX = a
                },
                set_textureRatioY: function (a) {
                    return this._textureRatioY = a
                },
                __class__: Bd,
                __properties__: {
                    set_textureRatioY: "set_textureRatioY",
                    set_textureRatioX: "set_textureRatioX",
                    set_shareContext: "set_shareContext",
                    set_stage3DProxy: "set_stage3DProxy",
                    set_backgroundB: "set_backgroundB",
                    set_backgroundG: "set_backgroundG",
                    set_backgroundR: "set_backgroundR",
                    set_clearOnRender: "set_clearOnRender",
                    set_viewHeight: "set_viewHeight",
                    set_viewWidth: "set_viewWidth",
                    get_renderToTexture: "get_renderToTexture"
                }
            };
            var yd = function () {
                this._skyboxTempVector = new Q;
                this._tempSkyboxMatrix = new xb;
                this._skyboxProjection = new xb;
                Bd.call(this);
                this._depthRenderer = new Cf;
                this._distanceRenderer = new Cf(!1, !0)
            };
            g["away3d.core.render.DefaultRenderer"] = yd;
            yd.__name__ = "away3d.core.render.DefaultRenderer";
            yd.__super__ = Bd;
            yd.prototype = l(Bd.prototype, {
                set_stage3DProxy: function (a) {
                    Bd.prototype.set_stage3DProxy.call(this, a);
                    this._distanceRenderer.set_stage3DProxy(this._depthRenderer.set_stage3DProxy(a));
                    return a
                },
                executeRender: function (a, b, c, d) {
                    null == d && (d = 0);
                    this.updateLights(a);
                    null != b && (this.drawRenderables(a.get_opaqueRenderableHead(), a, yd.RTT_PASSES), this.drawRenderables(a.get_blendedRenderableHead(), a, yd.RTT_PASSES));
                    Bd.prototype.executeRender.call(this, a, b, c, d)
                },
                updateLights: function (a) {
                    for (var b = a.get_directionalLights(), c = a.get_pointLights(), d, e, f = b.get_length(), h = 0; h < f;) d = h++, d = b.get(d), e = d.get_shadowMapper(), d.get_castsShadows() && (e.get_autoUpdateShadows() || e._shadowsInvalid) && e.renderDepthMap(this._stage3DProxy, a, this._depthRenderer);
                    f = c.get_length();
                    for (h = 0; h < f;) d = h++, d = c.get(d), e = d.get_shadowMapper(), d.get_castsShadows() && (e.get_autoUpdateShadows() || e._shadowsInvalid) && e.renderDepthMap(this._stage3DProxy,
                        a, this._distanceRenderer)
                },
                draw: function (a, b) {
                    this._context.setBlendFactors(2, 9);
                    null != a.get_skyBox() && (null != this._activeMaterial && this._activeMaterial.deactivate(this._stage3DProxy), this._activeMaterial = null, this._context.setDepthTest(!1, 0), this.drawSkyBox(a));
                    this._context.setDepthTest(!0, 5);
                    b = null != b ? yd.SCREEN_PASSES : yd.ALL_PASSES;
                    this.drawRenderables(a.get_opaqueRenderableHead(), a, b);
                    this.drawRenderables(a.get_blendedRenderableHead(), a, b);
                    this._context.setDepthTest(!1, 5);
                    null != this._activeMaterial &&
                    this._activeMaterial.deactivate(this._stage3DProxy);
                    this._activeMaterial = null
                },
                drawSkyBox: function (a) {
                    var b = a.get_skyBox(),
                        c = b.get_material(),
                        d = a.get_camera();
                    this.updateSkyBoxProjection(d);
                    c.activatePass(0, this._stage3DProxy, d);
                    c.renderPass(0, b, this._stage3DProxy, a, this._skyboxProjection);
                    c.deactivatePass(0, this._stage3DProxy)
                },
                updateSkyBoxProjection: function (a) {
                    this._skyboxProjection.copyFrom(this._rttViewProjectionMatrix);
                    this._skyboxProjection.copyRowTo(2, this._skyboxTempVector);
                    var b = a.get_scenePosition(),
                        c = this._skyboxTempVector.x,
                        d = this._skyboxTempVector.y,
                        e = this._skyboxTempVector.z,
                        f = Math.sqrt(c * c + d * d + e * e);
                    this._skyboxTempVector.x = 0;
                    this._skyboxTempVector.y = 0;
                    this._skyboxTempVector.z = 0;
                    this._skyboxTempVector.w = 1;
                    this._tempSkyboxMatrix.copyFrom(a.get_sceneTransform());
                    this._tempSkyboxMatrix.copyColumnFrom(3, this._skyboxTempVector);
                    this._skyboxTempVector.x = 0;
                    this._skyboxTempVector.y = 0;
                    this._skyboxTempVector.z = 1;
                    this._skyboxTempVector.w = 0;
                    kb.transformVector(this._tempSkyboxMatrix, this._skyboxTempVector,
                        this._skyboxTempVector);
                    this._skyboxTempVector.normalize();
                    1E-6 < Math.abs(Math.acos(c / f * this._skyboxTempVector.x + d / f * this._skyboxTempVector.y + e / f * this._skyboxTempVector.z)) || (a = -(c * b.x + d * b.y + e * b.z + f), b = this._skyboxTempVector, b.x = 0 <= c ? 1 : -1, b.y = 0 <= d ? 1 : -1, b.z = 1, b.w = 1, this._tempSkyboxMatrix.copyFrom(this._skyboxProjection), this._tempSkyboxMatrix.invert(), f = kb.transformVector(this._tempSkyboxMatrix, b, kb.CALCULATION_VECTOR3D), this._skyboxProjection.copyRowTo(3, b), b = (f.x * b.x + f.y * b.y + f.z * b.z + f.w * b.w) / (c * f.x +
                        d * f.y + e * f.z + a * f.w), this._skyboxTempVector.x = c * b, this._skyboxTempVector.y = d * b, this._skyboxTempVector.z = e * b, this._skyboxTempVector.w = a * b, this._skyboxProjection.copyRowFrom(2, this._skyboxTempVector))
                },
                drawRenderables: function (a, b, c) {
                    for (var d, e, f = b.get_camera(), h; null != a;) {
                        this._activeMaterial = a.renderable.get_material();
                        this._activeMaterial.updateMaterial(this._context);
                        d = this._activeMaterial.get_numPasses();
                        e = 0;
                        do
                            if (h = a, 0 != ((this._activeMaterial.passRendersToTexture(e) ? 1 : 2) & c)) {
                                this._activeMaterial.activatePass(e,
                                    this._stage3DProxy, f);
                                do this._activeMaterial.renderPass(e, h.renderable, this._stage3DProxy, b, this._rttViewProjectionMatrix), h = h.next; while (null != h && h.renderable.get_material() == this._activeMaterial);
                                this._activeMaterial.deactivatePass(e, this._stage3DProxy)
                            } else {
                                do h = h.next; while (null != h && h.renderable.get_material() == this._activeMaterial)
                            } while (++e < d);
                        a = h
                    }
                },
                __class__: yd
            });
            var Cf = function (a, b) {
                null == b && (b = !1);
                null == a && (a = !1);
                Bd.call(this);
                this._renderBlended = a;
                this._distanceBased = b;
                this._backgroundB =
                    this._backgroundG = this._backgroundR = 1
            };
            g["away3d.core.render.DepthRenderer"] = Cf;
            Cf.__name__ = "away3d.core.render.DepthRenderer";
            Cf.__super__ = Bd;
            Cf.prototype = l(Bd.prototype, {
                set_disableColor: function (a) {
                    return this._disableColor = a
                },
                set_backgroundR: function (a) {
                    return a
                },
                set_backgroundG: function (a) {
                    return a
                },
                set_backgroundB: function (a) {
                    return a
                },
                draw: function (a, b) {
                    this._context.setBlendFactors(2, 9);
                    this._context.setDepthTest(!0, 4);
                    this.drawRenderables(a.get_opaqueRenderableHead(), a);
                    this._disableColor &&
                    this._context.setColorMask(!1, !1, !1, !1);
                    this._renderBlended && this.drawRenderables(a.get_blendedRenderableHead(), a);
                    null != this._activeMaterial && this._activeMaterial.deactivateForDepth(this._stage3DProxy);
                    this._disableColor && this._context.setColorMask(!0, !0, !0, !0);
                    this._activeMaterial = null
                },
                drawRenderables: function (a, b) {
                    for (b = b.get_camera(); null != a;)
                        if (this._activeMaterial = a.renderable.get_material(), this._disableColor && this._activeMaterial.hasDepthAlphaThreshold()) {
                            do a = a.next; while (null != a && a.renderable.get_material() ==
                            this._activeMaterial)
                        } else {
                            this._activeMaterial.activateForDepth(this._stage3DProxy, b, this._distanceBased);
                            do this._activeMaterial.renderDepth(a.renderable, this._stage3DProxy, b, this._rttViewProjectionMatrix), a = a.next; while (null != a && a.renderable.get_material() == this._activeMaterial);
                            this._activeMaterial.deactivateForDepth(this._stage3DProxy)
                        }
                },
                __class__: Cf,
                __properties__: l(Bd.prototype.__properties__, {
                    set_disableColor: "set_disableColor"
                })
            });
            var nl = function (a) {
                this._filterSizesInvalid = !0;
                this._stage3DProxy =
                    a;
                this._stage3DProxy.addEventListener("Context3DRecreated", p(this, this.onContext3DRecreated));
                this._rttManager = qd.getInstance(a);
                this._rttManager.addEventListener("resize", p(this, this.onRTTResize))
            };
            g["away3d.core.render.Filter3DRenderer"] = nl;
            nl.__name__ = "away3d.core.render.Filter3DRenderer";
            nl.prototype = {
                onContext3DRecreated: function (a) {
                    this._filterSizesInvalid = !0
                },
                onRTTResize: function (a) {
                    this._filterSizesInvalid = !0
                },
                getMainInputTexture: function (a) {
                    this._filterTasksInvalid && this.updateFilterTasks(a);
                    return this._mainInputTexture
                },
                updateFilterTasks: function (a) {
                    this._filterSizesInvalid && this.updateFilterSizes();
                    if (null == this._filters) this._tasks = null;
                    else {
                        this._tasks = D.toObjectVector(null);
                        for (var b = this._filters.length - 1, c, d = 0, e = b + 1; d < e;) {
                            var f = d++;
                            c = this._filters[f];
                            c.setRenderTargets(f == b ? null : this._filters[f + 1].getMainInputTexture(a), a);
                            this._tasks = this._tasks.concat(c.get_tasks())
                        }
                        this._mainInputTexture = this._filters[0].getMainInputTexture(a)
                    }
                },
                render: function (a, b, c) {
                    var d = a.get_context3D(),
                        e = this._rttManager.get_indexBuffer(),
                        f = this._rttManager.get_renderToTextureVertexBuffer();
                    if (null != this._filters) {
                        this._filterSizesInvalid && this.updateFilterSizes();
                        this._filterTasksInvalid && this.updateFilterTasks(a);
                        for (var h = this._filters.length, r = 0; r < h;) {
                            var m = r++;
                            this._filters[m].update(a, b)
                        }
                        h = this._tasks.get_length();
                        1 < h && (d.setVertexBufferAt(0, f, 0, 2), d.setVertexBufferAt(1, f, 2, 2));
                        for (r = 0; r < h;) m = r++, m = this._tasks.get(m), a.setRenderTarget(m.get_target()), null == m.get_target() && (a.set_scissorRect(null),
                            f = this._rttManager.get_renderToScreenVertexBuffer(), d.setVertexBufferAt(0, f, 0, 2), d.setVertexBufferAt(1, f, 2, 2)), d.setTextureAt(0, m.getMainInputTexture(a)), d.setProgram(m.getProgram3D(a)), d.clear(0, 0, 0, 0), m.activate(a, b, c), d.setBlendFactors(2, 9), a.drawTriangles(e, 0, 2), m.deactivate(a);
                        d.setTextureAt(0, null);
                        d.setVertexBufferAt(0, null);
                        d.setVertexBufferAt(1, null)
                    }
                },
                updateFilterSizes: function () {
                    for (var a = 0, b = this._filters.length; a < b;) {
                        var c = a++;
                        this._filters[c].set_textureWidth(this._rttManager.get_textureWidth());
                        this._filters[c].set_textureHeight(this._rttManager.get_textureHeight())
                    }
                    this._filterSizesInvalid = !0
                },
                __class__: nl
            };
            var Oh = function () {
            };
            g["away3d.core.sort.IEntitySorter"] = Oh;
            Oh.__name__ = "away3d.core.sort.IEntitySorter";
            Oh.__isInterface__ = !0;
            Oh.prototype = {
                __class__: Oh
            };
            var Nh = function () {
            };
            g["away3d.core.sort.RenderableMergeSort"] = Nh;
            Nh.__name__ = "away3d.core.sort.RenderableMergeSort";
            Nh.__interfaces__ = [Oh];
            Nh.prototype = {
                sort: function (a) {
                    a.set_opaqueRenderableHead(this.mergeSortByMaterial(a.get_opaqueRenderableHead()));
                    a.set_blendedRenderableHead(this.mergeSortByDepth(a.get_blendedRenderableHead()))
                },
                mergeSortByDepth: function (a) {
                    if (null == a || null == a.next) return a;
                    for (var b = a, c = a.next; null != c;) c = c.next, null != c && (b = b.next, c = c.next);
                    c = b.next;
                    b.next = null;
                    a = this.mergeSortByDepth(a);
                    c = this.mergeSortByDepth(c);
                    var d = b = null;
                    if (null == a) return c;
                    if (null == c) return a;
                    for (; null != a && null != c;) {
                        if (a.zIndex < c.zIndex) {
                            var e = a;
                            a = a.next
                        } else e = c, c = c.next;
                        null == b ? b = e : d.next = e;
                        d = e
                    }
                    null != a ? d.next = a : null != c && (d.next = c);
                    return b
                },
                mergeSortByMaterial: function (a) {
                    if (null ==
                        a || null == a.next) return a;
                    for (var b = a, c = a.next; null != c;) c = c.next, null != c && (b = b.next, c = c.next);
                    c = b.next;
                    b.next = null;
                    a = this.mergeSortByMaterial(a);
                    c = this.mergeSortByMaterial(c);
                    var d = b = null;
                    if (null == a) return c;
                    if (null == c) return a;
                    for (; null != a && null != c && null != a && null != c;) {
                        var e = a.renderOrderId;
                        var f = c.renderOrderId;
                        e == f ? (e = a.materialId, f = c.materialId, e = e == f ? a.zIndex < c.zIndex ? 1 : -1 : e > f ? 1 : -1) : e = e > f ? 1 : -1;
                        0 > e ? (e = a, a = a.next) : (e = c, c = c.next);
                        null == b ? b = e : d.next = e;
                        d = e
                    }
                    null != a ? d.next = a : null != c && (d.next = c);
                    return b
                },
                __class__: Nh
            };
            var Fe = function () {
            };
            g["away3d.core.traverse.PartitionTraverser"] = Fe;
            Fe.__name__ = "away3d.core.traverse.PartitionTraverser";
            Fe.prototype = {
                enterNode: function (a) {
                    return !0
                },
                applyRenderable: function (a) {
                    throw new Wa;
                },
                applyUnknownLight: function (a) {
                    throw new Wa;
                },
                applyDirectionalLight: function (a) {
                    throw new Wa;
                },
                applyPointLight: function (a) {
                    throw new Wa;
                },
                applyLightProbe: function (a) {
                    throw new Wa;
                },
                applyEntity: function (a) {
                    throw new Wa;
                },
                __class__: Fe
            };
            var Gf = function () {
                this.init()
            };
            g["away3d.core.traverse.EntityCollector"] =
                Gf;
            Gf.__name__ = "away3d.core.traverse.EntityCollector";
            Gf.__super__ = Fe;
            Gf.prototype = l(Fe.prototype, {
                init: function () {
                    this._lights = D.toObjectVector(null);
                    this._directionalLights = D.toObjectVector(null);
                    this._pointLights = D.toObjectVector(null);
                    this._lightProbes = D.toObjectVector(null);
                    this._renderableListItemPool = new ak;
                    this._entityListItemPool = new Yj;
                    this._numCullPlanes = this._numLightProbes = this._numPointLights = this._numDirectionalLights = this._numMouseEnableds = this._numTriangles = this._numLights = this._numEntities =
                        0
                },
                get_camera: function () {
                    return this._camera
                },
                set_camera: function (a) {
                    this._camera = a;
                    this._entryPoint = this._camera.get_scenePosition();
                    this._cameraForward = kb.getForward(this._camera.get_transform(), this._cameraForward);
                    this._cullPlanes = this._camera.get_frustumPlanes();
                    return a
                },
                set_cullPlanes: function (a) {
                    return this._customCullPlanes = a
                },
                get_numMouseEnableds: function () {
                    return this._numMouseEnableds
                },
                get_skyBox: function () {
                    return this._skyBox
                },
                get_opaqueRenderableHead: function () {
                    return this._opaqueRenderableHead
                },
                set_opaqueRenderableHead: function (a) {
                    return this._opaqueRenderableHead = a
                },
                get_blendedRenderableHead: function () {
                    return this._blendedRenderableHead
                },
                set_blendedRenderableHead: function (a) {
                    return this._blendedRenderableHead = a
                },
                get_entityHead: function () {
                    return this._entityHead
                },
                get_directionalLights: function () {
                    return this._directionalLights
                },
                get_pointLights: function () {
                    return this._pointLights
                },
                clear: function () {
                    null != this._camera && (this._entryPoint = this._camera.get_scenePosition(), this._cameraForward = kb.getForward(this._camera.get_transform(),
                        this._cameraForward));
                    this._cullPlanes = null != this._customCullPlanes ? this._customCullPlanes : null != this._camera ? this._camera.get_frustumPlanes() : null;
                    this._numCullPlanes = null != this._cullPlanes ? this._cullPlanes.get_length() : 0;
                    this._numTriangles = this._numMouseEnableds = 0;
                    this._entityHead = this._opaqueRenderableHead = this._blendedRenderableHead = null;
                    this._renderableListItemPool.freeAll();
                    this._entityListItemPool.freeAll();
                    this._skyBox = null;
                    0 < this._numLights && this._lights.set_length(this._numLights = 0);
                    0 < this._numDirectionalLights &&
                    this._directionalLights.set_length(this._numDirectionalLights = 0);
                    0 < this._numPointLights && this._pointLights.set_length(this._numPointLights = 0);
                    0 < this._numLightProbes && this._lightProbes.set_length(this._numLightProbes = 0)
                },
                enterNode: function (a) {
                    var b = Fe._collectionMark != a._collectionMark && a.isInFrustum(this._cullPlanes, this._numCullPlanes);
                    a._collectionMark = Fe._collectionMark;
                    return b
                },
                applyRenderable: function (a) {
                    var b = a.get_sourceEntity();
                    a.get_mouseEnabled() && ++this._numMouseEnableds;
                    this._numTriangles +=
                        a.get_numTriangles();
                    var c = a.get_material();
                    if (null != c) {
                        var d = this._renderableListItemPool.getItem();
                        d.renderable = a;
                        d.materialId = c._uniqueId;
                        d.renderOrderId = c._renderOrderId;
                        d.cascaded = !1;
                        var e = b.get_scenePosition();
                        d.zIndex = (this._entryPoint.x - e.x) * this._cameraForward.x + (this._entryPoint.y - e.y) * this._cameraForward.y + (this._entryPoint.z - e.z) * this._cameraForward.z + b.get_zOffset();
                        d.renderSceneTransform = a.getRenderSceneTransform(this._camera);
                        c.get_requiresBlending() ? (d.next = this._blendedRenderableHead,
                            this._blendedRenderableHead = d) : (d.next = this._opaqueRenderableHead, this._opaqueRenderableHead = d)
                    }
                },
                applyEntity: function (a) {
                    ++this._numEntities;
                    var b = this._entityListItemPool.getItem();
                    b.entity = a;
                    b.next = this._entityHead;
                    this._entityHead = b
                },
                applyUnknownLight: function (a) {
                    this._lights.set(this._numLights++, a)
                },
                applyDirectionalLight: function (a) {
                    this._lights.set(this._numLights++, a);
                    this._directionalLights.set(this._numDirectionalLights++, a)
                },
                applyPointLight: function (a) {
                    this._lights.set(this._numLights++,
                        a);
                    this._pointLights.set(this._numPointLights++, a)
                },
                applyLightProbe: function (a) {
                    this._lights.set(this._numLights++, a);
                    this._lightProbes.set(this._numLightProbes++, a)
                },
                cleanUp: function () {
                },
                __class__: Gf,
                __properties__: {
                    set_cullPlanes: "set_cullPlanes",
                    get_pointLights: "get_pointLights",
                    get_directionalLights: "get_directionalLights",
                    get_entityHead: "get_entityHead",
                    set_blendedRenderableHead: "set_blendedRenderableHead",
                    get_blendedRenderableHead: "get_blendedRenderableHead",
                    set_opaqueRenderableHead: "set_opaqueRenderableHead",
                    get_opaqueRenderableHead: "get_opaqueRenderableHead",
                    get_skyBox: "get_skyBox",
                    get_numMouseEnableds: "get_numMouseEnableds",
                    set_camera: "set_camera",
                    get_camera: "get_camera"
                }
            });
            var Ph = function () {
                this.init()
            };
            g["away3d.core.traverse.ShadowCasterCollector"] = Ph;
            Ph.__name__ = "away3d.core.traverse.ShadowCasterCollector";
            Ph.__super__ = Gf;
            Ph.prototype = l(Gf.prototype, {
                applyRenderable: function (a) {
                    var b = a.get_material(),
                        c = a.get_sourceEntity();
                    if (a.get_castsShadows() && null != b) {
                        var d = this._renderableListItemPool.getItem();
                        d.renderable = a;
                        d.next = this._opaqueRenderableHead;
                        d.cascaded = !1;
                        c = c.get_scenePosition();
                        d.zIndex = (this._entryPoint.x - c.x) * this._cameraForward.x + (this._entryPoint.y - c.y) * this._cameraForward.y + (this._entryPoint.z - c.z) * this._cameraForward.z;
                        d.renderSceneTransform = a.getRenderSceneTransform(this._camera);
                        d.renderOrderId = b._depthPassId;
                        this._opaqueRenderableHead = d
                    }
                },
                applyUnknownLight: function (a) {
                },
                applyDirectionalLight: function (a) {
                },
                applyPointLight: function (a) {
                },
                applyLightProbe: function (a) {
                },
                __class__: Ph
            });
            var ie = function () {
            };
            g["away3d.debug.Debug"] = ie;
            ie.__name__ = "away3d.debug.Debug";
            var Ub = function (a, b) {
                this._castsShadows = this._shareAnimationGeometry = !0;
                Eb.call(this);
                this._subMeshes = D.toObjectVector(null);
                this.set_geometry(null != a ? a : new Ca);
                this.set_material(null != b ? b : Pa.getDefaultMaterial(this))
            };
            g["away3d.entities.Mesh"] = Ub;
            Ub.__name__ = "away3d.entities.Mesh";
            Ub.__interfaces__ = [t, Ag];
            Ub.__super__ = Eb;
            Ub.prototype = l(Eb.prototype, {
                onGeometryBoundsInvalid: function (a) {
                    this.invalidateBounds()
                },
                get_castsShadows: function () {
                    return this._castsShadows
                },
                get_animator: function () {
                    return this._animator
                },
                set_animator: function (a) {
                    null != this._animator && this._animator.removeOwner(this);
                    this._animator = a;
                    var b = this.get_material();
                    this.set_material(null);
                    this.set_material(b);
                    for (var c, d = 0, e = this._subMeshes.get_length(); d < e;) b = d++, c = this._subMeshes.get(b), b = c._material, null != b && (c.set_material(null), c.set_material(b));
                    null != this._animator && this._animator.addOwner(this);
                    return a
                },
                get_geometry: function () {
                    return this._geometry
                },
                set_geometry: function (a) {
                    if (null !=
                        this._geometry) {
                        this._geometry.removeEventListener("BoundsInvalid", p(this, this.onGeometryBoundsInvalid));
                        this._geometry.removeEventListener("SubGeometryAdded", p(this, this.onSubGeometryAdded));
                        this._geometry.removeEventListener("SubGeometryRemoved", p(this, this.onSubGeometryRemoved));
                        for (var b = 0, c = this._subMeshes.get_length(); b < c;) {
                            var d = b++;
                            this._subMeshes.get(d).dispose()
                        }
                        this._subMeshes.set_length(0)
                    }
                    this._geometry = a;
                    if (null != this._geometry) {
                        this._geometry.addEventListener("BoundsInvalid", p(this,
                            this.onGeometryBoundsInvalid));
                        this._geometry.addEventListener("SubGeometryAdded", p(this, this.onSubGeometryAdded));
                        this._geometry.addEventListener("SubGeometryRemoved", p(this, this.onSubGeometryRemoved));
                        var e = this._geometry.get_subGeometries();
                        b = 0;
                        for (c = e.get_length(); b < c;) d = b++, this.addSubMesh(e.get(d))
                    }
                    null != this._material && (this._material.removeOwner(this), this._material.addOwner(this));
                    return a
                },
                get_material: function () {
                    return this._material
                },
                set_material: function (a) {
                    if (a == this._material) return a;
                    null != this._material && this._material.removeOwner(this);
                    this._material = a;
                    null != this._material && this._material.addOwner(this);
                    return a
                },
                get_subMeshes: function () {
                    this._geometry.validate();
                    return this._subMeshes
                },
                get_shareAnimationGeometry: function () {
                    return this._shareAnimationGeometry
                },
                dispose: function () {
                    Eb.prototype.dispose.call(this);
                    this.set_material(null);
                    this.set_geometry(null)
                },
                updateBounds: function () {
                    this._bounds.fromGeometry(this._geometry);
                    this._boundsInvalid = !1
                },
                createEntityPartitionNode: function () {
                    return new ff(this)
                },
                onSubGeometryAdded: function (a) {
                    this.addSubMesh(a.get_subGeometry())
                },
                onSubGeometryRemoved: function (a) {
                    var b = a.get_subGeometry();
                    a = this._subMeshes.get_length();
                    for (var c = 0; c < a;) {
                        var d = this._subMeshes.get(c);
                        if (d.get_subGeometry() == b) {
                            d.dispose();
                            d = this._subMeshes;
                            d.__tempIndex = c;
                            b = 0;
                            for (var e = []; b < e.length;) {
                                var f = e[b++];
                                d.insertAt(d.__tempIndex, f);
                                d.__tempIndex++
                            }
                            d.splice(d.__tempIndex, 1);
                            break
                        }
                        ++c
                    }
                    for (--a; c < a;) this._subMeshes.get(c)._index = c, ++c
                },
                addSubMesh: function (a) {
                    a = new vg(a, this, null);
                    var b =
                        this._subMeshes.get_length();
                    a._index = b;
                    this._subMeshes.set(b, a);
                    this.invalidateBounds();
                    return a
                },
                collidesBefore: function (a, b) {
                    this._pickingCollider.setLocalRay(this._pickingCollisionVO.localRayPosition, this._pickingCollisionVO.localRayDirection);
                    this._pickingCollisionVO.renderable = null;
                    for (var c = 0, d = this._subMeshes.get_length(); c < d;) {
                        var e = c++;
                        e = this._subMeshes.get(e);
                        if (this._pickingCollider.testSubMeshCollision(e, this._pickingCollisionVO, a) && (a = this._pickingCollisionVO.rayEntryDistance, this._pickingCollisionVO.renderable =
                            e, !b)) return !0
                    }
                    return null != this._pickingCollisionVO.renderable
                },
                __class__: Ub,
                __properties__: l(Eb.prototype.__properties__, {
                    get_shareAnimationGeometry: "get_shareAnimationGeometry",
                    get_subMeshes: "get_subMeshes",
                    set_material: "set_material",
                    get_material: "get_material",
                    set_geometry: "set_geometry",
                    get_geometry: "get_geometry",
                    set_animator: "set_animator",
                    get_animator: "get_animator",
                    get_castsShadows: "get_castsShadows"
                })
            });
            var fd = function () {
                this._subSetCount = this._numIndices = this._indexSegments = 0;
                Eb.call(this);
                this._subSetCount = 0;
                this._subSets = D.toObjectVector(null);
                this.addSubSet();
                this._segments = new Db;
                this.set_material(new Qh)
            };
            g["away3d.entities.SegmentSet"] = fd;
            fd.__name__ = "away3d.entities.SegmentSet";
            fd.__interfaces__ = [Df];
            fd.__super__ = Eb;
            fd.prototype = l(Eb.prototype, {
                addSegment: function (a) {
                    a.set_segmentsBase(this);
                    this._hasData = !0;
                    var b = this._subSets.get_length() - 1,
                        c = this._subSets.get(b);
                    c.vertices.get_length() + 44 > fd.LIMIT && (c = this.addSubSet(), ++b);
                    a.set_index(c.vertices.get_length());
                    a.set_subSetIndex(b);
                    this.updateSegment(a);
                    var d = c.lineCount << 2;
                    c.indices.push(d);
                    c.indices.push(d + 1);
                    c.indices.push(d + 2);
                    c.indices.push(d + 3);
                    c.indices.push(d + 2);
                    c.indices.push(d + 1);
                    c.numVertices = c.vertices.get_length() / 11 | 0;
                    c.numIndices = c.indices.get_length();
                    c.lineCount++;
                    c.indexBufferDirty = !0;
                    c = new ek;
                    c.index = d;
                    c.subSetIndex = b;
                    c.segment = a;
                    this._segments.h[this._indexSegments] = c;
                    this._indexSegments++
                },
                removeAllSegments: function () {
                    for (var a, b = 0, c = this._subSetCount; b < c;) a = b++, a = this._subSets.get(a), a.vertices = null, a.indices =
                        null, null != a.vertexBuffer && Oa.disposeVertexBuffer(a.vertexBuffer), null != a.indexBuffer && Oa.disposeIndexBuffer(a.indexBuffer);
                    for (b = this._segments.iterator(); b.hasNext();) b.next();
                    this._segments = null;
                    this._subSetCount = 0;
                    this._activeSubSet = null;
                    this._indexSegments = 0;
                    this._subSets = D.toObjectVector(null);
                    this._segments = new Db;
                    this.addSubSet();
                    this._hasData = !1
                },
                getSegment: function (a) {
                    return a > this._indexSegments - 1 ? null : this._segments.h[a].segment
                },
                get_subSetCount: function () {
                    return this._subSetCount
                },
                updateSegment: function (a) {
                    var b =
                            a._start,
                        c = a._end,
                        d = b.x,
                        e = b.y;
                    b = b.z;
                    var f = c.x,
                        h = c.y;
                    c = c.z;
                    var r = a._startR,
                        m = a._startG,
                        C = a._startB,
                        g = a._endR,
                        k = a._endG,
                        q = a._endB,
                        n = a.get_index(),
                        p = a.get_thickness();
                    a = this._subSets.get(a.get_subSetIndex());
                    var l = a.vertices;
                    l.set(n++, d);
                    l.set(n++, e);
                    l.set(n++, b);
                    l.set(n++, f);
                    l.set(n++, h);
                    l.set(n++, c);
                    l.set(n++, p);
                    l.set(n++, r);
                    l.set(n++, m);
                    l.set(n++, C);
                    l.set(n++, 1);
                    l.set(n++, f);
                    l.set(n++, h);
                    l.set(n++, c);
                    l.set(n++, d);
                    l.set(n++, e);
                    l.set(n++, b);
                    l.set(n++, -p);
                    l.set(n++, g);
                    l.set(n++, k);
                    l.set(n++, q);
                    l.set(n++,
                        1);
                    l.set(n++, d);
                    l.set(n++, e);
                    l.set(n++, b);
                    l.set(n++, f);
                    l.set(n++, h);
                    l.set(n++, c);
                    l.set(n++, -p);
                    l.set(n++, r);
                    l.set(n++, m);
                    l.set(n++, C);
                    l.set(n++, 1);
                    l.set(n++, f);
                    l.set(n++, h);
                    l.set(n++, c);
                    l.set(n++, d);
                    l.set(n++, e);
                    l.set(n++, b);
                    l.set(n++, p);
                    l.set(n++, g);
                    l.set(n++, k);
                    l.set(n++, q);
                    l.set(n++, 1);
                    a.vertexBufferDirty = !0;
                    this.invalidateBounds()
                },
                get_hasData: function () {
                    return this._hasData
                },
                getIndexBuffer: function (a) {
                    if (this._activeSubSet.indexContext3D != a.get_context3D() || this._activeSubSet.indexBufferDirty) this._activeSubSet.indexBuffer =
                        a.createIndexBuffer(this._activeSubSet.numIndices), this._activeSubSet.indexBuffer.uploadFromVector(this._activeSubSet.indices, 0, this._activeSubSet.numIndices), this._activeSubSet.indexBufferDirty = !1, this._activeSubSet.indexContext3D = a.get_context3D();
                    return this._activeSubSet.indexBuffer
                },
                activateVertexBuffer: function (a, b) {
                    this._activeSubSet = a = this._subSets.get(a);
                    this._numIndices = a.numIndices;
                    if (a.vertexContext3D != b.get_context3D() || a.vertexBufferDirty) null != a.vertexBuffer && Oa.disposeVertexBuffer(a.vertexBuffer),
                        a.vertexBuffer = b.createVertexBuffer(a.numVertices, 11), a.vertexBuffer.uploadFromVector(a.vertices, 0, a.numVertices), a.vertexBufferDirty = !1, a.vertexContext3D = b.get_context3D();
                    a = a.vertexBuffer;
                    b = b._context3D;
                    b.setVertexBufferAt(0, a, 0, 3);
                    b.setVertexBufferAt(1, a, 3, 3);
                    b.setVertexBufferAt(2, a, 6, 1);
                    b.setVertexBufferAt(3, a, 7, 4)
                },
                activateUVBuffer: function (a, b) {
                },
                activateVertexNormalBuffer: function (a, b) {
                },
                activateVertexTangentBuffer: function (a, b) {
                },
                activateSecondaryUVBuffer: function (a, b) {
                },
                addSubSet: function () {
                    var a =
                        new fk;
                    this._subSets.push(a);
                    a.vertices = D.toFloatVector(null);
                    a.numVertices = 0;
                    a.indices = D.toIntVector(null);
                    a.numIndices = 0;
                    a.vertexBufferDirty = !0;
                    a.indexBufferDirty = !0;
                    a.lineCount = 0;
                    this._subSetCount++;
                    return a
                },
                dispose: function () {
                    Eb.prototype.dispose.call(this);
                    this.removeAllSegments();
                    this._material = this._segments = null;
                    var a = this._subSets.get(0);
                    a.vertices = null;
                    this._subSets = a.indices = null
                },
                get_mouseEnabled: function () {
                    return !1
                },
                getDefaultBoundingVolume: function () {
                    return new Af
                },
                updateBounds: function () {
                    for (var a,
                             b, c, d = Infinity, e = Infinity, f = Infinity, h = -Infinity, r = -Infinity, m = -Infinity, C, g = 0; g < this._subSetCount;) {
                        a = this._subSets.get(g);
                        c = 0;
                        C = a.vertices;
                        a = C.get_length();
                        if (0 != a)
                            for (; c < a;) b = C.get(c++), b < d ? d = b : b > h && (h = b), b = C.get(c++), b < e ? e = b : b > r && (r = b), b = C.get(c++), b < f ? f = b : b > m && (m = b), c += 8;
                        ++g
                    }
                    Infinity != d ? this._bounds.fromExtremes(d, e, f, h, r, m) : this._bounds.fromExtremes(-.5, -.5, -.5, .5, .5, .5);
                    this._boundsInvalid = !1
                },
                createEntityPartitionNode: function () {
                    return new Lh(this)
                },
                get_numTriangles: function () {
                    return this._numIndices /
                        3 | 0
                },
                get_sourceEntity: function () {
                    return this
                },
                get_castsShadows: function () {
                    return !1
                },
                get_material: function () {
                    return this._material
                },
                get_animator: function () {
                    return this._animator
                },
                set_material: function (a) {
                    if (a == this._material) return a;
                    null != this._material && this._material.removeOwner(this);
                    this._material = a;
                    null != this._material && this._material.addOwner(this);
                    return a
                },
                get_uvTransform: function () {
                    return null
                },
                get_uvTransform2: function () {
                    return null
                },
                getRenderSceneTransform: function (a) {
                    return this._sceneTransform
                },
                __class__: fd,
                __properties__: l(Eb.prototype.__properties__, {
                    get_uvTransform2: "get_uvTransform2",
                    get_uvTransform: "get_uvTransform",
                    get_animator: "get_animator",
                    set_material: "set_material",
                    get_material: "get_material",
                    get_castsShadows: "get_castsShadows",
                    get_sourceEntity: "get_sourceEntity",
                    get_numTriangles: "get_numTriangles",
                    get_hasData: "get_hasData",
                    get_subSetCount: "get_subSetCount"
                })
            });
            var ek = function () {
            };
            g["away3d.entities.SegRef"] = ek;
            ek.__name__ = "away3d.entities.SegRef";
            ek.prototype = {
                __class__: ek
            };
            var fk = function () {
            };
            g["away3d.entities.SubSet"] = fk;
            fk.__name__ = "away3d.entities.SubSet";
            fk.prototype = {
                __class__: fk
            };
            var fa = function (a, b, c) {
                Error.call(this, a);
                this.message = a;
                this.__previousException = b;
                this.__nativeException = null != c ? c : this;
                this.__skipStack = 0;
                a = Error.prepareStackTrace;
                Error.prepareStackTrace = function (a) {
                    return a.stack
                };
                if (c instanceof Error) this.stack = c.stack;
                else {
                    c = null;
                    if (Error.captureStackTrace) Error.captureStackTrace(this, fa), c = this;
                    else if (c = Error(), "undefined" == typeof c.stack) {
                        try {
                            throw c;
                        } catch (d) {
                        }
                        this.__skipStack++
                    }
                    this.stack = c.stack
                }
                Error.prepareStackTrace = a
            };
            g["haxe.Exception"] = fa;
            fa.__name__ = "haxe.Exception";
            fa.caught = function (a) {
                return a instanceof fa ? a : a instanceof Error ? new fa(a.message, null, a) : new Bg(a, null, a)
            };
            fa.thrown = function (a) {
                if (a instanceof fa) return a.get_native();
                if (a instanceof Error) return a;
                a = new Bg(a);
                a.__skipStack++;
                return a
            };
            fa.__super__ = Error;
            fa.prototype = l(Error.prototype, {
                unwrap: function () {
                    return this.__nativeException
                },
                toString: function () {
                    return this.get_message()
                },
                __shiftStack: function () {
                    this.__skipStack++
                },
                get_message: function () {
                    return this.message
                },
                get_native: function () {
                    return this.__nativeException
                },
                get_stack: function () {
                    var a = this.__exceptionStack;
                    null == a && (a = Ia.toHaxe(Ia.normalize(this.stack), this.__skipStack), this.setProperty("__exceptionStack", a));
                    return a
                },
                setProperty: function (a, b) {
                    try {
                        Object.defineProperty(this, a, {
                            value: b
                        })
                    } catch (c) {
                        this[a] = b
                    }
                },
                __class__: fa,
                __properties__: {
                    get_native: "get_native",
                    get_stack: "get_stack",
                    get_message: "get_message"
                }
            });
            var Fa =
                function (a, b) {
                    null == b && (b = 0);
                    null == a && (a = "");
                    fa.call(this, a);
                    this.errorID = b;
                    this.name = "Error";
                    this.__skipStack++
                };
            g["openfl.errors.Error"] = Fa;
            Fa.__name__ = "openfl.errors.Error";
            Fa.__super__ = fa;
            Fa.prototype = l(fa.prototype, {
                toString: function () {
                    return null != this.get_message() ? this.get_message() : "Error"
                },
                __class__: Fa
            });
            var Wa = function (a, b) {
                null == b && (b = 0);
                null == a && (a = "An abstract method was called! Either an instance of an abstract class was created, or an abstract method was not overridden by the subclass.");
                Fa.call(this, a, b);
                this.__skipStack++
            };
            g["away3d.errors.AbstractMethodError"] = Wa;
            Wa.__name__ = "away3d.errors.AbstractMethodError";
            Wa.__super__ = Fa;
            Wa.prototype = l(Fa.prototype, {
                __class__: Wa
            });
            var ph = function (a) {
                Fa.call(this, a);
                this.__skipStack++
            };
            g["away3d.errors.AnimationSetError"] = ph;
            ph.__name__ = "away3d.errors.AnimationSetError";
            ph.__super__ = Fa;
            ph.prototype = l(Fa.prototype, {
                __class__: ph
            });
            var qh = function (a, b) {
                V.call(this, a, !1, !1);
                this._animator = b
            };
            g["away3d.events.AnimatorEvent"] = qh;
            qh.__name__ = "away3d.events.AnimatorEvent";
            qh.__super__ = V;
            qh.prototype = l(V.prototype, {
                __class__: qh
            });
            var oh = function (a, b, c) {
                V.call(this, a);
                this._asset = b;
                this._prevName = null != c ? c : null != this._asset ? this._asset.get_name() : null
            };
            g["away3d.events.Asset3DEvent"] = oh;
            oh.__name__ = "away3d.events.Asset3DEvent";
            oh.__super__ = V;
            oh.prototype = l(V.prototype, {
                __class__: oh
            });
            var Ah = function (a, b, c, d) {
                null == d && (d = !1);
                null == c && (c = !1);
                V.call(this, a, c, d);
                this._camera = b
            };
            g["away3d.events.CameraEvent"] = Ah;
            Ah.__name__ = "away3d.events.CameraEvent";
            Ah.__super__ = V;
            Ah.prototype =
                l(V.prototype, {
                    __class__: Ah
                });
            var zg = function (a, b) {
                V.call(this, a, !1, !1);
                this._subGeometry = b
            };
            g["away3d.events.GeometryEvent"] = zg;
            zg.__name__ = "away3d.events.GeometryEvent";
            zg.__super__ = V;
            zg.prototype = l(V.prototype, {
                get_subGeometry: function () {
                    return this._subGeometry
                },
                __class__: zg,
                __properties__: {
                    get_subGeometry: "get_subGeometry"
                }
            });
            var Bh = function (a, b, c, d) {
                null == d && (d = !1);
                null == c && (c = !1);
                V.call(this, a, c, d);
                this._lens = b
            };
            g["away3d.events.LensEvent"] = Bh;
            Bh.__name__ = "away3d.events.LensEvent";
            Bh.__super__ =
                V;
            Bh.prototype = l(V.prototype, {
                __class__: Bh
            });
            var Rh = function (a) {
                V.call(this, a)
            };
            g["away3d.events.LightEvent"] = Rh;
            Rh.__name__ = "away3d.events.LightEvent";
            Rh.__super__ = V;
            Rh.prototype = l(V.prototype, {
                __class__: Rh
            });
            var Ce = function (a, b) {
                V.call(this, a);
                this.object = b
            };
            g["away3d.events.Object3DEvent"] = Ce;
            Ce.__name__ = "away3d.events.Object3DEvent";
            Ce.__super__ = V;
            Ce.prototype = l(V.prototype, {
                __class__: Ce
            });
            var xg = function (a, b) {
                this.objectContainer3D = b;
                V.call(this, a)
            };
            g["away3d.events.Scene3DEvent"] = xg;
            xg.__name__ =
                "away3d.events.Scene3DEvent";
            xg.__super__ = V;
            xg.prototype = l(V.prototype, {
                __class__: xg
            });
            var Cg = function (a, b, c) {
                null == c && (c = !1);
                null == b && (b = !1);
                V.call(this, a, b, c)
            };
            g["away3d.events.ShadingMethodEvent"] = Cg;
            Cg.__name__ = "away3d.events.ShadingMethodEvent";
            Cg.__super__ = V;
            Cg.prototype = l(V.prototype, {
                __class__: Cg
            });
            var Ff = function (a, b, c) {
                null == c && (c = !1);
                null == b && (b = !1);
                V.call(this, a, b, c)
            };
            g["away3d.events.Stage3DEvent"] = Ff;
            Ff.__name__ = "away3d.events.Stage3DEvent";
            Ff.__super__ = V;
            Ff.prototype = l(V.prototype, {
                __class__: Ff
            });
            var Fh = function (a) {
                this._allowedToPropagate = !0;
                V.call(this, a, !0, !0)
            };
            g["away3d.events.TouchEvent3D"] = Fh;
            Fh.__name__ = "away3d.events.TouchEvent3D";
            Fh.__super__ = V;
            Fh.prototype = l(V.prototype, {
                stopPropagation: function () {
                    V.prototype.stopPropagation.call(this);
                    this._allowedToPropagate = !1;
                    null != this._parentEvent && (this._parentEvent._allowedToPropagate = !1)
                },
                __class__: Fh
            });
            var ol = function () {
                this._tasks = D.toObjectVector(null)
            };
            g["away3d.filters.Filter3DBase"] = ol;
            ol.__name__ = "away3d.filters.Filter3DBase";
            ol.prototype = {
                get_tasks: function () {
                    return this._tasks
                },
                getMainInputTexture: function (a) {
                    return this._tasks.get(0).getMainInputTexture(a)
                },
                set_textureWidth: function (a) {
                    this._textureWidth = a;
                    for (var b = 0, c = this._tasks.get_length(); b < c;) {
                        var d = b++;
                        this._tasks.get(d).set_textureWidth(a)
                    }
                    return a
                },
                set_textureHeight: function (a) {
                    this._textureHeight = a;
                    for (var b = 0, c = this._tasks.get_length(); b < c;) {
                        var d = b++;
                        this._tasks.get(d).set_textureHeight(a)
                    }
                    return a
                },
                setRenderTargets: function (a, b) {
                    this._tasks.get(this._tasks.get_length() -
                        1).set_target(a)
                },
                update: function (a, b) {
                },
                __class__: ol,
                __properties__: {
                    set_textureHeight: "set_textureHeight",
                    set_textureWidth: "set_textureWidth",
                    get_tasks: "get_tasks"
                }
            };
            var pl = function (a) {
                null == a && (a = !1);
                this._textureScale = 0;
                this._textureDimensionsInvalid = this._program3DInvalid = !0;
                this._scaledTextureWidth = this._scaledTextureHeight = this._textureWidth = this._textureHeight = -1;
                this._requireDepthRender = a
            };
            g["away3d.filters.tasks.Filter3DTaskBase"] = pl;
            pl.__name__ = "away3d.filters.tasks.Filter3DTaskBase";
            pl.prototype = {
                get_target: function () {
                    return this._target
                },
                set_target: function (a) {
                    return this._target = a
                },
                set_textureWidth: function (a) {
                    if (this._textureWidth == a) return a;
                    this._textureWidth = a;
                    this._scaledTextureWidth = this._textureWidth >> this._textureScale;
                    1 > this._scaledTextureWidth && (this._scaledTextureWidth = 1);
                    this._textureDimensionsInvalid = !0;
                    return a
                },
                set_textureHeight: function (a) {
                    if (this._textureHeight == a) return a;
                    this._textureHeight = a;
                    this._scaledTextureHeight = this._textureHeight >> this._textureScale;
                    1 > this._scaledTextureHeight &&
                    (this._scaledTextureHeight = 1);
                    this._textureDimensionsInvalid = !0;
                    return a
                },
                getMainInputTexture: function (a) {
                    a.get_context3D() != this._mainInputTextureContext && (this._textureDimensionsInvalid = !0);
                    this._textureDimensionsInvalid && this.updateTextures(a);
                    return this._mainInputTexture
                },
                updateProgram3D: function (a) {
                    null != this._program3D && this._program3D.dispose();
                    this._program3DContext = a.get_context3D();
                    this._program3D = this._program3DContext.createProgram();
                    this._program3D.upload((new W(ie.active)).assemble(Ef.toString(1),
                        this.getVertexCode()), (new W(ie.active)).assemble(Ef.toString(0), this.getFragmentCode()));
                    this._program3DInvalid = !1
                },
                getVertexCode: function () {
                    return "mov op, va0\nmov v0, va1\n"
                },
                getFragmentCode: function () {
                    throw new Wa;
                },
                updateTextures: function (a) {
                    null != this._mainInputTexture && this._mainInputTexture.dispose();
                    this._mainInputTextureContext = a.get_context3D();
                    this._mainInputTexture = this._mainInputTextureContext.createTexture(this._scaledTextureWidth, this._scaledTextureHeight, 1, !0);
                    this._textureDimensionsInvalid = !1
                },
                getProgram3D: function (a) {
                    this._program3DContext != a.get_context3D() && (this._program3DInvalid = !0);
                    this._program3DInvalid && this.updateProgram3D(a);
                    return this._program3D
                },
                activate: function (a, b, c) {
                },
                deactivate: function (a) {
                },
                __class__: pl,
                __properties__: {
                    set_textureHeight: "set_textureHeight",
                    set_textureWidth: "set_textureWidth",
                    set_target: "set_target",
                    get_target: "get_target"
                }
            };
            var yc = function () {
                this._specular = this._specularR = this._specularG = this._specularB = this._diffuse = this._diffuseR = this._diffuseG =
                    this._diffuseB = 1;
                this._ambient = this._ambientR = this._ambientG = this._ambientB = 0;
                this._ambientColor = 16777215;
                this._colorR = this._colorG = this._colorB = 1;
                this._color = 16777215;
                Eb.call(this)
            };
            g["away3d.lights.LightBase"] = yc;
            yc.__name__ = "away3d.lights.LightBase";
            yc.__super__ = Eb;
            yc.prototype = l(Eb.prototype, {
                get_castsShadows: function () {
                    return this._castsShadows
                },
                set_castsShadows: function (a) {
                    if (this._castsShadows == a) return a;
                    (this._castsShadows = a) ? (null == this._shadowMapper && (this._shadowMapper = this.createShadowMapper()),
                        this._shadowMapper.set_light(this)) : (null != this._shadowMapper && this._shadowMapper.dispose(), this._shadowMapper = null);
                    this.dispatchEvent(new Rh("castsShadowChange"));
                    return a
                },
                createShadowMapper: function () {
                    throw new Wa;
                },
                set_specular: function (a) {
                    0 > a && (a = 0);
                    this._specular = a;
                    this.updateSpecular();
                    return a
                },
                get_diffuse: function () {
                    return this._diffuse
                },
                set_diffuse: function (a) {
                    0 > a && (a = 0);
                    this._diffuse = a;
                    this.updateDiffuse();
                    return a
                },
                get_color: function () {
                    return this._color
                },
                set_color: function (a) {
                    this._color =
                        a;
                    this._colorR = (this._color >> 16 & 255) / 255;
                    this._colorG = (this._color >> 8 & 255) / 255;
                    this._colorB = (this._color & 255) / 255;
                    this.updateDiffuse();
                    this.updateSpecular();
                    return a
                },
                get_ambient: function () {
                    return this._ambient
                },
                set_ambient: function (a) {
                    0 > a ? a = 0 : 1 < a && (a = 1);
                    this._ambient = a;
                    this.updateAmbient();
                    return a
                },
                get_ambientColor: function () {
                    return this._ambientColor
                },
                set_ambientColor: function (a) {
                    this._ambientColor = a;
                    this.updateAmbient();
                    return a
                },
                updateAmbient: function () {
                    this._ambientR = (this._ambientColor >> 16 &
                        255) / 255 * this._ambient;
                    this._ambientG = (this._ambientColor >> 8 & 255) / 255 * this._ambient;
                    this._ambientB = (this._ambientColor & 255) / 255 * this._ambient
                },
                createEntityPartitionNode: function () {
                    return new Hh(this)
                },
                updateSpecular: function () {
                    this._specularR = this._colorR * this._specular;
                    this._specularG = this._colorG * this._specular;
                    this._specularB = this._colorB * this._specular
                },
                updateDiffuse: function () {
                    this._diffuseR = this._colorR * this._diffuse;
                    this._diffuseG = this._colorG * this._diffuse;
                    this._diffuseB = this._colorB * this._diffuse
                },
                get_shadowMapper: function () {
                    return this._shadowMapper
                },
                __class__: yc,
                __properties__: l(Eb.prototype.__properties__, {
                    set_specular: "set_specular",
                    get_shadowMapper: "get_shadowMapper",
                    set_ambientColor: "set_ambientColor",
                    get_ambientColor: "get_ambientColor",
                    set_ambient: "set_ambient",
                    get_ambient: "get_ambient",
                    set_color: "set_color",
                    get_color: "get_color",
                    set_diffuse: "set_diffuse",
                    get_diffuse: "get_diffuse",
                    set_castsShadows: "set_castsShadows",
                    get_castsShadows: "get_castsShadows"
                })
            });
            var gd = function (a, b, c) {
                null ==
                c && (c = 1);
                null == b && (b = -1);
                null == a && (a = 0);
                yc.call(this);
                this.set_direction(new Q(a, b, c));
                this._sceneDirection = new Q
            };
            g["away3d.lights.DirectionalLight"] = gd;
            gd.__name__ = "away3d.lights.DirectionalLight";
            gd.__super__ = yc;
            gd.prototype = l(yc.prototype, {
                createEntityPartitionNode: function () {
                    return new Gh(this)
                },
                get_sceneDirection: function () {
                    this._sceneTransformDirty && this.updateSceneTransform();
                    return this._sceneDirection
                },
                set_direction: function (a) {
                    this._direction = a;
                    null == this._tmpLookAt && (this._tmpLookAt = new Q);
                    var b = this.get_x();
                    this._tmpLookAt.x = b + this._direction.x;
                    b = this.get_y();
                    this._tmpLookAt.y = b + this._direction.y;
                    b = this.get_z();
                    this._tmpLookAt.z = b + this._direction.z;
                    this.lookAt(this._tmpLookAt);
                    return a
                },
                getDefaultBoundingVolume: function () {
                    return new ef
                },
                updateBounds: function () {
                },
                updateSceneTransform: function () {
                    yc.prototype.updateSceneTransform.call(this);
                    this.get_sceneTransform().copyColumnTo(2, this._sceneDirection);
                    this._sceneDirection.normalize()
                },
                createShadowMapper: function () {
                    return new Sh
                },
                __class__: gd,
                __properties__: l(yc.prototype.__properties__, {
                    set_direction: "set_direction",
                    get_sceneDirection: "get_sceneDirection"
                })
            });
            var Dg = function (a, b) {
                yc.call(this);
                this._diffuseMap = a;
                this._specularMap = b
            };
            g["away3d.lights.LightProbe"] = Dg;
            Dg.__name__ = "away3d.lights.LightProbe";
            Dg.__super__ = yc;
            Dg.prototype = l(yc.prototype, {
                createEntityPartitionNode: function () {
                    return new Ih(this)
                },
                get_diffuseMap: function () {
                    return this._diffuseMap
                },
                get_specularMap: function () {
                    return this._specularMap
                },
                updateBounds: function () {
                    this._boundsInvalid = !1
                },
                getDefaultBoundingVolume: function () {
                    return new ef
                },
                __class__: Dg,
                __properties__: l(yc.prototype.__properties__, {
                    get_specularMap: "get_specularMap",
                    get_diffuseMap: "get_diffuseMap"
                })
            });
            var Cd = function () {
                this._fallOff = 1E5;
                this._radius = 9E4;
                yc.call(this);
                this._fallOffFactor = 1 / (this._fallOff * this._fallOff - this._radius * this._radius)
            };
            g["away3d.lights.PointLight"] = Cd;
            Cd.__name__ = "away3d.lights.PointLight";
            Cd.__super__ = yc;
            Cd.prototype = l(yc.prototype, {
                createShadowMapper: function () {
                    return new Th
                },
                createEntityPartitionNode: function () {
                    return new Kh(this)
                },
                updateBounds: function () {
                    this._bounds.fromSphere(new Q, this._fallOff);
                    this._boundsInvalid = !1
                },
                getDefaultBoundingVolume: function () {
                    return new Af
                },
                __class__: Cd
            });
            var He = function () {
                this._autoUpdateShadows = !0;
                this._depthMapSize = 2048;
                this._casterCollector = this.createCasterCollector()
            };
            g["away3d.lights.shadowmaps.ShadowMapperBase"] = He;
            He.__name__ = "away3d.lights.shadowmaps.ShadowMapperBase";
            He.prototype = {
                createCasterCollector: function () {
                    return new Ph
                },
                get_autoUpdateShadows: function () {
                    return this._autoUpdateShadows
                },
                set_light: function (a) {
                    return this._light = a
                },
                dispose: function () {
                    this._casterCollector = null;
                    null == this._depthMap || this._explicitDepthMap || this._depthMap.dispose();
                    this._depthMap = null
                },
                createDepthTexture: function () {
                    return new Uh(this._depthMapSize, this._depthMapSize)
                },
                renderDepthMap: function (a, b, c) {
                    this._shadowsInvalid = !1;
                    this.updateDepthProjection(b.get_camera());
                    null == this._depthMap && (this._depthMap = this.createDepthTexture());
                    this.drawDepthMap(this._depthMap.getTextureForStage3D(a), b.scene, c)
                },
                updateDepthProjection: function (a) {
                    throw new Wa;
                },
                drawDepthMap: function (a, b, c) {
                    throw new Wa;
                },
                __class__: He,
                __properties__: {
                    set_light: "set_light",
                    get_autoUpdateShadows: "get_autoUpdateShadows"
                }
            };
            var Th = function () {
                He.call(this);
                this._depthMapSize = 512;
                this._needsRender = D.toBoolVector(null, 6, !0);
                this.initCameras()
            };
            g["away3d.lights.shadowmaps.CubeMapShadowMapper"] = Th;
            Th.__name__ = "away3d.lights.shadowmaps.CubeMapShadowMapper";
            Th.__super__ = He;
            Th.prototype = l(He.prototype, {
                initCameras: function () {
                    this._depthCameras = D.toObjectVector(null);
                    this._lenses = D.toObjectVector(null);
                    this.addCamera(0, 90, 0);
                    this.addCamera(0, -90, 0);
                    this.addCamera(-90, 0, 0);
                    this.addCamera(90, 0, 0);
                    this.addCamera(0, 0, 0);
                    this.addCamera(0, 180, 0)
                },
                addCamera: function (a, b, c) {
                    var d = new Bf;
                    d.set_rotationX(a);
                    d.set_rotationY(b);
                    d.set_rotationZ(c);
                    d.get_lens().set_near(.01);
                    T.__cast(d.get_lens(), ed).set_fieldOfView(90);
                    this._lenses.push(T.__cast(d.get_lens(), ed));
                    d.get_lens().set_aspectRatio(1);
                    this._depthCameras.push(d)
                },
                createDepthTexture: function () {
                    return new Vh(this._depthMapSize)
                },
                updateDepthProjection: function (a) {
                    a =
                        T.__cast(this._light, Cd)._fallOff;
                    var b = this._light.get_scenePosition();
                    this._lenses.get(0).set_far(a);
                    this._depthCameras.get(0).set_position(b);
                    this._needsRender.set(0, !0);
                    this._lenses.get(1).set_far(a);
                    this._depthCameras.get(1).set_position(b);
                    this._needsRender.set(1, !0);
                    this._lenses.get(2).set_far(a);
                    this._depthCameras.get(2).set_position(b);
                    this._needsRender.set(2, !0);
                    this._lenses.get(3).set_far(a);
                    this._depthCameras.get(3).set_position(b);
                    this._needsRender.set(3, !0);
                    this._lenses.get(4).set_far(a);
                    this._depthCameras.get(4).set_position(b);
                    this._needsRender.set(4, !0);
                    this._lenses.get(5).set_far(a);
                    this._depthCameras.get(5).set_position(b);
                    this._needsRender.set(5, !0)
                },
                drawDepthMap: function (a, b, c) {
                    this._needsRender.get(0) && (this._casterCollector.set_camera(this._depthCameras.get(0)), this._casterCollector.clear(), b.traversePartitions(this._casterCollector), c.render(this._casterCollector, a, null, 0), this._casterCollector.cleanUp());
                    this._needsRender.get(1) && (this._casterCollector.set_camera(this._depthCameras.get(1)),
                        this._casterCollector.clear(), b.traversePartitions(this._casterCollector), c.render(this._casterCollector, a, null, 1), this._casterCollector.cleanUp());
                    this._needsRender.get(2) && (this._casterCollector.set_camera(this._depthCameras.get(2)), this._casterCollector.clear(), b.traversePartitions(this._casterCollector), c.render(this._casterCollector, a, null, 2), this._casterCollector.cleanUp());
                    this._needsRender.get(3) && (this._casterCollector.set_camera(this._depthCameras.get(3)), this._casterCollector.clear(), b.traversePartitions(this._casterCollector),
                        c.render(this._casterCollector, a, null, 3), this._casterCollector.cleanUp());
                    this._needsRender.get(4) && (this._casterCollector.set_camera(this._depthCameras.get(4)), this._casterCollector.clear(), b.traversePartitions(this._casterCollector), c.render(this._casterCollector, a, null, 4), this._casterCollector.cleanUp());
                    this._needsRender.get(5) && (this._casterCollector.set_camera(this._depthCameras.get(5)), this._casterCollector.clear(), b.traversePartitions(this._casterCollector), c.render(this._casterCollector,
                        a, null, 5), this._casterCollector.cleanUp())
                },
                __class__: Th
            });
            var Sh = function () {
                this._snap = 64;
                this._lightOffset = 1E4;
                He.call(this);
                this._cullPlanes = D.toObjectVector(null);
                this._overallDepthLens = new Ch;
                this._overallDepthCamera = new Bf(this._overallDepthLens);
                this._localFrustum = D.toFloatVector(null, 24);
                this._matrix = new xb
            };
            g["away3d.lights.shadowmaps.DirectionalShadowMapper"] = Sh;
            Sh.__name__ = "away3d.lights.shadowmaps.DirectionalShadowMapper";
            Sh.__super__ = He;
            Sh.prototype = l(He.prototype, {
                drawDepthMap: function (a,
                                        b, c) {
                    this._casterCollector.set_camera(this._overallDepthCamera);
                    this._casterCollector.set_cullPlanes(this._cullPlanes);
                    this._casterCollector.clear();
                    b.traversePartitions(this._casterCollector);
                    c.render(this._casterCollector, a);
                    this._casterCollector.cleanUp()
                },
                updateCullPlanes: function (a) {
                    var b = this._overallDepthCamera.get_frustumPlanes();
                    a = a.get_frustumPlanes();
                    this._cullPlanes.set_length(4);
                    this._cullPlanes.set(0, b.get(0));
                    this._cullPlanes.set(1, b.get(1));
                    this._cullPlanes.set(2, b.get(2));
                    this._cullPlanes.set(3,
                        b.get(3));
                    var c = T.__cast(this._light, gd).get_sceneDirection();
                    b = c.x;
                    var d = c.y;
                    c = c.z;
                    var e = 4,
                        f = a.get(0);
                    0 > f.a * b + f.b * d + f.c * c && this._cullPlanes.set(e++, f);
                    f = a.get(1);
                    0 > f.a * b + f.b * d + f.c * c && this._cullPlanes.set(e++, f);
                    f = a.get(2);
                    0 > f.a * b + f.b * d + f.c * c && this._cullPlanes.set(e++, f);
                    f = a.get(3);
                    0 > f.a * b + f.b * d + f.c * c && this._cullPlanes.set(e++, f);
                    f = a.get(4);
                    0 > f.a * b + f.b * d + f.c * c && this._cullPlanes.set(e++, f);
                    f = a.get(5);
                    0 > f.a * b + f.b * d + f.c * c && this._cullPlanes.set(e++, f)
                },
                updateDepthProjection: function (a) {
                    this.updateProjectionFromFrustumCorners(a,
                        a.get_lens().get_frustumCorners(), this._matrix);
                    this._overallDepthLens.set_matrix(this._matrix);
                    this.updateCullPlanes(a)
                },
                updateProjectionFromFrustumCorners: function (a, b, c) {
                    var d = kb.RAW_DATA_CONTAINER,
                        e = T.__cast(this._light, gd).get_sceneDirection();
                    this._overallDepthCamera.set_transform(this._light.get_sceneTransform());
                    var f = ((a.get_x() - e.x * this._lightOffset) / this._snap | 0) * this._snap,
                        h = ((a.get_y() - e.y * this._lightOffset) / this._snap | 0) * this._snap,
                        r = ((a.get_z() - e.z * this._lightOffset) / this._snap | 0) *
                            this._snap;
                    this._overallDepthCamera.set_x(f);
                    this._overallDepthCamera.set_y(h);
                    this._overallDepthCamera.set_z(r);
                    this._matrix.copyFrom(this._overallDepthCamera.get_inverseSceneTransform());
                    this._matrix.prepend(a.get_sceneTransform());
                    this._matrix.transformVectors(b, this._localFrustum);
                    a = e = this._localFrustum.get(0);
                    var m = this._localFrustum.get(1);
                    b = m;
                    this._maxZ = this._localFrustum.get(2);
                    for (var C = 3; 24 > C;) f = this._localFrustum.get(C), h = this._localFrustum.get(C + 1), r = this._localFrustum.get(C + 2), f < a && (a =
                        f), f > e && (e = f), h < b && (b = h), h > m && (m = h), r > this._maxZ && (this._maxZ = r), C += 3;
                    this._minZ = 1;
                    f = e - a;
                    h = m - b;
                    r = 1 / (this._maxZ - this._minZ);
                    0 > a && (a -= this._snap);
                    0 > b && (b -= this._snap);
                    a = (a / this._snap | 0) * this._snap;
                    b = (b / this._snap | 0) * this._snap;
                    e = 2 * this._snap;
                    f = (f / e + 2 | 0) * e;
                    h = (h / e + 2 | 0) * e;
                    e = a + f;
                    m = b + h;
                    f = 1 / f;
                    h = 1 / h;
                    d.set(0, 2 * f);
                    d.set(5, 2 * h);
                    d.set(10, r);
                    d.set(12, -(e + a) * f);
                    d.set(13, -(m + b) * h);
                    d.set(14, -this._minZ * r);
                    d.set(15, 1);
                    d.set(1, d.set(2, d.set(3, d.set(4, d.set(6, d.set(7, d.set(8, d.set(9, d.set(11, 0)))))))));
                    c.copyRawDataFrom(d)
                },
                __class__: Sh
            });
            var kc = function () {
                this._depthCompareMode = 5;
                this._anisotropy = 1;
                this._mipmap = this._smooth = !0;
                this._numPasses = 0;
                this._blendMode = 10;
                this._owners = D.toObjectVector(null);
                this._passes = D.toObjectVector(null);
                this._depthPass = new Wh;
                this._distancePass = new Xh;
                this._depthPass.addEventListener("change", p(this, this.onDepthPassChange));
                this._distancePass.addEventListener("change", p(this, this.onDistancePassChange));
                this.set_alphaPremultiplied(!0);
                this._uniqueId = kc.MATERIAL_ID_COUNT++;
                B.call(this)
            };
            g["away3d.materials.MaterialBase"] = kc;
            kc.__name__ = "away3d.materials.MaterialBase";
            kc.__interfaces__ = [t];
            kc.__super__ = B;
            kc.prototype = l(B.prototype, {
                set_lightPicker: function (a) {
                    if (a != this._lightPicker) {
                        this._lightPicker = a;
                        for (var b = 0, c = this._passes.get_length(); b < c;) {
                            var d = b++;
                            this._passes.get(d).set_lightPicker(this._lightPicker)
                        }
                    }
                    return a
                },
                set_mipmap: function (a) {
                    this._mipmap = a;
                    for (var b = 0, c = this._numPasses; b < c;) {
                        var d = b++;
                        this._passes.get(d).set_mipmap(a)
                    }
                    return a
                },
                set_smooth: function (a) {
                    this._smooth =
                        a;
                    for (var b = 0, c = this._numPasses; b < c;) {
                        var d = b++;
                        this._passes.get(d).set_smooth(a)
                    }
                    return a
                },
                set_depthCompareMode: function (a) {
                    return this._depthCompareMode = a
                },
                set_repeat: function (a) {
                    this._repeat = a;
                    for (var b = 0, c = this._numPasses; b < c;) {
                        var d = b++;
                        this._passes.get(d).set_repeat(a)
                    }
                    return a
                },
                set_anisotropy: function (a) {
                    this._anisotropy = a;
                    for (var b = 0, c = this._numPasses; b < c;) {
                        var d = b++;
                        this._passes.get(d).set_anisotropy(this._anisotropy)
                    }
                    return a
                },
                set_bothSides: function (a) {
                    this._bothSides = a;
                    for (var b = 0, c = this._numPasses; b <
                    c;) {
                        var d = b++;
                        this._passes.get(d).set_bothSides(a)
                    }
                    this._depthPass.set_bothSides(a);
                    this._distancePass.set_bothSides(a);
                    return a
                },
                get_blendMode: function () {
                    return this._blendMode
                },
                set_alphaPremultiplied: function (a) {
                    this._alphaPremultiplied = a;
                    for (var b = 0, c = this._numPasses; b < c;) {
                        var d = b++;
                        this._passes.get(d).set_alphaPremultiplied(a)
                    }
                    return a
                },
                get_requiresBlending: function () {
                    return 10 != this._blendMode
                },
                get_numPasses: function () {
                    return this._numPasses
                },
                hasDepthAlphaThreshold: function () {
                    return 0 < this._depthPass.get_alphaThreshold()
                },
                activateForDepth: function (a, b, c) {
                    null == c && (c = !1);
                    (this._distanceBasedDepthRender = c) ? this._distancePass.activate(a, b) : this._depthPass.activate(a, b)
                },
                deactivateForDepth: function (a) {
                    this._distanceBasedDepthRender ? this._distancePass.deactivate(a) : this._depthPass.deactivate(a)
                },
                renderDepth: function (a, b, c, d) {
                    this._distanceBasedDepthRender ? (null != a.get_animator() && this._distancePass.updateAnimationState(a, b, c), this._distancePass.render(a, b, c, d)) : (null != a.get_animator() && this._depthPass.updateAnimationState(a,
                        b, c), this._depthPass.render(a, b, c, d))
                },
                passRendersToTexture: function (a) {
                    return this._passes.get(a).get_renderToTexture()
                },
                activatePass: function (a, b, c) {
                    this._passes.get(a).activate(b, c)
                },
                deactivatePass: function (a, b) {
                    this._passes.get(a).deactivate(b)
                },
                renderPass: function (a, b, c, d, e) {
                    null != this._lightPicker && this._lightPicker.collectLights(b, d);
                    a = this._passes.get(a);
                    null != b.get_animator() && a.updateAnimationState(b, c, d.get_camera());
                    a.render(b, c, d.get_camera(), e)
                },
                addOwner: function (a) {
                    this._owners.push(a);
                    if (null != a.get_animator()) {
                        if (null != this._animationSet && a.get_animator().get_animationSet() != this._animationSet) throw new Fa("A Material instance cannot be shared across renderables with different animator libraries");
                        if (this._animationSet != a.get_animator().get_animationSet()) {
                            this._animationSet = a.get_animator().get_animationSet();
                            a = 0;
                            for (var b = this._numPasses; a < b;) {
                                var c = a++;
                                this._passes.get(c).set_animationSet(this._animationSet)
                            }
                            this._depthPass.set_animationSet(this._animationSet);
                            this._distancePass.set_animationSet(this._animationSet);
                            this.invalidatePasses(null)
                        }
                    }
                },
                removeOwner: function (a) {
                    var b = this._owners;
                    b.__tempIndex = this._owners.indexOf(a, 0);
                    a = 0;
                    for (var c = []; a < c.length;) {
                        var d = c[a++];
                        b.insertAt(b.__tempIndex, d);
                        b.__tempIndex++
                    }
                    b.splice(b.__tempIndex, 1);
                    if (0 == this._owners.get_length()) {
                        this._animationSet = null;
                        b = 0;
                        for (a = this._numPasses; b < a;) c = b++, this._passes.get(c).set_animationSet(this._animationSet);
                        this._depthPass.set_animationSet(this._animationSet);
                        this._distancePass.set_animationSet(this._animationSet);
                        this.invalidatePasses(null)
                    }
                },
                updateMaterial: function (a) {
                },
                deactivate: function (a) {
                    this._passes.get(this._numPasses - 1).deactivate(a)
                },
                invalidatePasses: function (a) {
                    var b;
                    this._depthPass.invalidateShaderProgram();
                    this._distancePass.invalidateShaderProgram();
                    if (null != this._animationSet)
                        for (this._animationSet.resetGPUCompatibility(), b = this._owners.iterator(); b.hasNext();) {
                            var c = b.next();
                            null != c.get_animator() && (c.get_animator().testGPUCompatibility(this._depthPass), c.get_animator().testGPUCompatibility(this._distancePass))
                        }
                    for (var d =
                        0, e = this._numPasses; d < e;) {
                        var f = d++;
                        this._passes.get(f) != a && this._passes.get(f).invalidateShaderProgram(!1);
                        if (null != this._animationSet)
                            for (b = this._owners.iterator(); b.hasNext();) c = b.next(), null != c.get_animator() && c.get_animator().testGPUCompatibility(this._passes.get(f))
                    }
                },
                clearPasses: function () {
                    for (var a = 0, b = this._numPasses; a < b;) {
                        var c = a++;
                        this._passes.get(c).removeEventListener("change", p(this, this.onPassChange))
                    }
                    this._passes.set_length(0);
                    this._numPasses = 0
                },
                addPass: function (a) {
                    this._passes.set(this._numPasses++,
                        a);
                    a.set_animationSet(this._animationSet);
                    a.set_alphaPremultiplied(this._alphaPremultiplied);
                    a.set_mipmap(this._mipmap);
                    a.set_smooth(this._smooth);
                    a.set_repeat(this._repeat);
                    a.set_anisotropy(this._anisotropy);
                    a.set_lightPicker(this._lightPicker);
                    a.set_bothSides(this._bothSides);
                    a.addEventListener("change", p(this, this.onPassChange));
                    this.invalidatePasses(null)
                },
                onPassChange: function (a) {
                    a = 1;
                    for (var b, c, d = this._renderOrderId = 0, e = this._numPasses; d < e;) {
                        b = d++;
                        b = this._passes.get(b)._program3Dids;
                        c = b.get_length();
                        for (var f = 0; f < c;) {
                            var h = f++;
                            if (-1 != b.get(h)) {
                                this._renderOrderId += a * b.get(h) | 0;
                                break
                            }
                        }
                        a *= 1E3
                    }
                },
                onDistancePassChange: function (a) {
                    a = this._distancePass._program3Dids;
                    for (var b = a.get_length(), c = this._depthPassId = 0; c < b;) {
                        var d = c++;
                        if (-1 != a.get(d)) {
                            this._depthPassId += a.get(d);
                            break
                        }
                    }
                },
                onDepthPassChange: function (a) {
                    a = this._depthPass._program3Dids;
                    for (var b = a.get_length(), c = this._depthPassId = 0; c < b;) {
                        var d = c++;
                        if (-1 != a.get(d)) {
                            this._depthPassId += a.get(d);
                            break
                        }
                    }
                },
                __class__: kc,
                __properties__: l(B.prototype.__properties__, {
                    set_alphaPremultiplied: "set_alphaPremultiplied",
                    set_bothSides: "set_bothSides",
                    set_anisotropy: "set_anisotropy",
                    set_repeat: "set_repeat",
                    set_depthCompareMode: "set_depthCompareMode",
                    set_smooth: "set_smooth",
                    set_mipmap: "set_mipmap",
                    set_lightPicker: "set_lightPicker",
                    get_numPasses: "get_numPasses",
                    get_requiresBlending: "get_requiresBlending",
                    get_blendMode: "get_blendMode"
                })
            });
            var rd = function () {
                kc.call(this);
                this.addPass(this._screenPass = new Yh(this))
            };
            g["away3d.materials.SinglePassMaterialBase"] = rd;
            rd.__name__ =
                "away3d.materials.SinglePassMaterialBase";
            rd.__super__ = kc;
            rd.prototype = l(kc.prototype, {
                set_depthCompareMode: function (a) {
                    kc.prototype.set_depthCompareMode.call(this, a);
                    this._screenPass.set_depthCompareMode(a);
                    return a
                },
                activateForDepth: function (a, b, c) {
                    null == c && (c = !1);
                    c ? this._distancePass.set_alphaMask(this._screenPass.get_diffuseMethod().get_texture()) : this._depthPass.set_alphaMask(this._screenPass.get_diffuseMethod().get_texture());
                    kc.prototype.activateForDepth.call(this, a, b, c)
                },
                get_requiresBlending: function () {
                    return kc.prototype.get_requiresBlending.call(this) ||
                    this._alphaBlending ? !0 : null != this._screenPass.get_colorTransform() ? 1 > this._screenPass.get_colorTransform().alphaMultiplier : !1
                },
                addMethod: function (a) {
                    this._screenPass.addMethod(a)
                },
                set_mipmap: function (a) {
                    if (this._mipmap == a) return a;
                    kc.prototype.set_mipmap.call(this, a);
                    return a
                },
                set_gloss: function (a) {
                    null != this._screenPass.get_specularMethod() && this._screenPass.get_specularMethod().set_gloss(a);
                    return a
                },
                set_specular: function (a) {
                    null != this._screenPass.get_specularMethod() && this._screenPass.get_specularMethod().set_specular(a);
                    return a
                },
                set_alphaBlending: function (a) {
                    this._alphaBlending = a;
                    this._screenPass.setBlendMode(10 == this.get_blendMode() && this.get_requiresBlending() ? 7 : this.get_blendMode());
                    this._screenPass.set_preserveAlpha(this.get_requiresBlending());
                    return a
                },
                updateMaterial: function (a) {
                    if (this._screenPass._passesDirty) {
                        this.clearPasses();
                        if (null != this._screenPass._passes) {
                            a = 0;
                            for (var b = this._screenPass._passes.get_length(); a < b;) {
                                var c = a++;
                                this.addPass(this._screenPass._passes.get(c))
                            }
                        }
                        this.addPass(this._screenPass);
                        this._screenPass._passesDirty = !1
                    }
                },
                set_lightPicker: function (a) {
                    kc.prototype.set_lightPicker.call(this, a);
                    this._screenPass.set_lightPicker(a);
                    return a
                },
                __class__: rd,
                __properties__: l(kc.prototype.__properties__, {
                    set_alphaBlending: "set_alphaBlending",
                    set_specular: "set_specular",
                    set_gloss: "set_gloss"
                })
            });
            var hd = function (a, b) {
                null == b && (b = 1);
                null == a && (a = 13421772);
                this._diffuseAlpha = 1;
                rd.call(this);
                this.set_color(a);
                this.set_alpha(b)
            };
            g["away3d.materials.ColorMaterial"] = hd;
            hd.__name__ = "away3d.materials.ColorMaterial";
            hd.__super__ = rd;
            hd.prototype = l(rd.prototype, {
                set_alpha: function (a) {
                    1 < a ? a = 1 : 0 > a && (a = 0);
                    this._screenPass.get_diffuseMethod().set_diffuseAlpha(this._diffuseAlpha = a);
                    this._screenPass.set_preserveAlpha(this.get_requiresBlending());
                    this._screenPass.setBlendMode(10 == this.get_blendMode() && this.get_requiresBlending() ? 7 : this.get_blendMode());
                    return a
                },
                set_color: function (a) {
                    this._screenPass.get_diffuseMethod().set_diffuseColor(a);
                    return a
                },
                get_requiresBlending: function () {
                    return rd.prototype.get_requiresBlending.call(this) ?
                        !0 : 1 > this._diffuseAlpha
                },
                __class__: hd,
                __properties__: l(rd.prototype.__properties__, {
                    set_color: "set_color",
                    set_alpha: "set_alpha"
                })
            });
            var Qh = function (a) {
                null == a && (a = 1.25);
                kc.call(this);
                this.set_bothSides(!0);
                this.addPass(this._screenPass = new Ie(a));
                this._screenPass.set_material(this)
            };
            g["away3d.materials.SegmentMaterial"] = Qh;
            Qh.__name__ = "away3d.materials.SegmentMaterial";
            Qh.__super__ = kc;
            Qh.prototype = l(kc.prototype, {
                __class__: Qh
            });
            var ke = function (a, b, c, d, e) {
                null == e && (e = 1);
                null == d && (d = !0);
                null == c && (c = !1);
                null == b && (b = !0);
                rd.call(this);
                this.set_texture(a);
                this.set_smooth(b);
                this.set_repeat(c);
                this.set_mipmap(d);
                this.set_anisotropy(e)
            };
            g["away3d.materials.TextureMaterial"] = ke;
            ke.__name__ = "away3d.materials.TextureMaterial";
            ke.__super__ = rd;
            ke.prototype = l(rd.prototype, {
                set_texture: function (a) {
                    this._screenPass.get_diffuseMethod().set_texture(a);
                    return a
                },
                __class__: ke,
                __properties__: l(rd.prototype.__properties__, {
                    set_texture: "set_texture"
                })
            });
            var gk = function () {
                this._usesGlobalPosFragment = !1
            };
            g["away3d.materials.compilation.MethodDependencyCounter"] =
                gk;
            gk.__name__ = "away3d.materials.compilation.MethodDependencyCounter";
            gk.prototype = {
                reset: function () {
                    this._tangentDependencies = this._globalPosDependencies = this._secondaryUVDependencies = this._uvDependencies = this._viewDirDependencies = this._normalDependencies = this._projectionDependencies = 0;
                    this._usesGlobalPosFragment = !1
                },
                setPositionedLights: function (a, b) {
                    this._numPointLights = a;
                    this._lightSourceMask = b
                },
                includeMethodVO: function (a) {
                    a.needsProjection && ++this._projectionDependencies;
                    a.needsGlobalVertexPos ?
                        (++this._globalPosDependencies, a.needsGlobalFragmentPos && (this._usesGlobalPosFragment = !0)) : a.needsGlobalFragmentPos && (++this._globalPosDependencies, this._usesGlobalPosFragment = !0);
                    a.needsNormals && ++this._normalDependencies;
                    a.needsTangents && ++this._tangentDependencies;
                    a.needsView && ++this._viewDirDependencies;
                    a.needsUV && ++this._uvDependencies;
                    a.needsSecondaryUV && ++this._secondaryUVDependencies
                },
                get_tangentDependencies: function () {
                    return this._tangentDependencies
                },
                get_usesGlobalPosFragment: function () {
                    return this._usesGlobalPosFragment
                },
                get_projectionDependencies: function () {
                    return this._projectionDependencies
                },
                get_normalDependencies: function () {
                    return this._normalDependencies
                },
                get_viewDirDependencies: function () {
                    return this._viewDirDependencies
                },
                get_uvDependencies: function () {
                    return this._uvDependencies
                },
                get_secondaryUVDependencies: function () {
                    return this._secondaryUVDependencies
                },
                get_globalPosDependencies: function () {
                    return this._globalPosDependencies
                },
                addWorldSpaceDependencies: function (a) {
                    0 < this._viewDirDependencies && ++this._globalPosDependencies;
                    0 < this._numPointLights && 0 != (this._lightSourceMask & 1) && (++this._globalPosDependencies, a && (this._usesGlobalPosFragment = !0))
                },
                __class__: gk,
                __properties__: {
                    get_globalPosDependencies: "get_globalPosDependencies",
                    get_secondaryUVDependencies: "get_secondaryUVDependencies",
                    get_uvDependencies: "get_uvDependencies",
                    get_viewDirDependencies: "get_viewDirDependencies",
                    get_normalDependencies: "get_normalDependencies",
                    get_projectionDependencies: "get_projectionDependencies",
                    get_usesGlobalPosFragment: "get_usesGlobalPosFragment",
                    get_tangentDependencies: "get_tangentDependencies"
                }
            };
            var ic = function (a, b, c) {
                null == c && (c = !0);
                this._regName = a;
                this._regCount = b;
                this._persistent = c;
                this.initRegisters(a, b)
            };
            g["away3d.materials.compilation.RegisterPool"] = ic;
            ic.__name__ = "away3d.materials.compilation.RegisterPool";
            ic._initPool = function (a, b) {
                var c = a + b;
                if (Object.prototype.hasOwnProperty.call(ic._regPool.h, c)) return c;
                var d = D.toObjectVector(null, b, !0);
                ic._regPool.h[c] = d;
                var e = [
                    [],
                    [],
                    [],
                    []
                ];
                ic._regCompsPool.h[c] = e;
                for (var f = 0; f < b;) {
                    var h = f++;
                    d.set(h, new Nb(a, h));
                    e[0][h] = new Nb(a, h, 0);
                    e[1][h] = new Nb(a, h, 1);
                    e[2][h] = new Nb(a, h, 2);
                    e[3][h] = new Nb(a, h, 3)
                }
                return c
            };
            ic.prototype = {
                requestFreeVectorReg: function () {
                    for (var a = 0, b = this._regCount; a < b;) {
                        var c = a++;
                        if (!this.isRegisterUsed(c)) return this._persistent && (a = c, b = this._usedVectorCount, b.set(a, b.get(a) + 1)), this._vectorRegisters.get(c)
                    }
                    throw new Fa("Register overflow!");
                },
                requestFreeRegComponent: function () {
                    for (var a = 0, b = this._regCount; a < b;) {
                        var c = a++;
                        if (!J.gt(this._usedVectorCount.get(c), 0)) {
                            if (0 ==
                                this._usedSingleCount.get(0).get(c)) return this._persistent && (a = c, b = this._usedSingleCount.get(0), b.set(a, b.get(a) + 1)), this._registerComponents[0][c];
                            if (0 == this._usedSingleCount.get(1).get(c)) return this._persistent && (a = c, b = this._usedSingleCount.get(1), b.set(a, b.get(a) + 1)), this._registerComponents[1][c];
                            if (0 == this._usedSingleCount.get(2).get(c)) return this._persistent && (a = c, b = this._usedSingleCount.get(2), b.set(a, b.get(a) + 1)), this._registerComponents[2][c];
                            if (0 == this._usedSingleCount.get(3).get(c)) return this._persistent &&
                            (a = c, b = this._usedSingleCount.get(3), b.set(a, b.get(a) + 1)), this._registerComponents[3][c]
                        }
                    }
                    throw new Fa("Register overflow!");
                },
                addUsage: function (a, b) {
                    if (-1 < a._component) {
                        var c = a.get_index();
                        a = this._usedSingleCount.get(a._component)
                    } else c = a.get_index(), a = this._usedVectorCount;
                    a.set(c, a.get(c) + b)
                },
                removeUsage: function (a) {
                    if (-1 < a._component) {
                        var b = a.get_index();
                        a = this._usedSingleCount.get(a._component);
                        b = a.set(b, a.get(b) - 1)
                    } else b = a.get_index(), a = this._usedVectorCount, b = a.set(b, a.get(b) - 1);
                    if (J.gt(0,
                        b)) throw new Fa("More usages removed than exist!");
                },
                dispose: function () {
                    this._usedVectorCount = this._usedSingleCount = this._registerComponents = this._vectorRegisters = null
                },
                initRegisters: function (a, b) {
                    a = ic._initPool(a, b);
                    this._vectorRegisters = ic._regPool.h[a];
                    this._registerComponents = ic._regCompsPool.h[a];
                    this._usedVectorCount = D.toIntVector(null, b, !0);
                    this._usedSingleCount = D.toNullVector(null, 4, !0);
                    this._usedSingleCount.set(0, D.toIntVector(null, b, !0));
                    this._usedSingleCount.set(1, D.toIntVector(null, b,
                        !0));
                    this._usedSingleCount.set(2, D.toIntVector(null, b, !0));
                    this._usedSingleCount.set(3, D.toIntVector(null, b, !0))
                },
                isRegisterUsed: function (a) {
                    return J.gt(this._usedVectorCount.get(a), 0) || J.gt(this._usedSingleCount.get(0).get(a), 0) || J.gt(this._usedSingleCount.get(1).get(a), 0) || J.gt(this._usedSingleCount.get(2).get(a), 0) || J.gt(this._usedSingleCount.get(3).get(a), 0) ? !0 : !1
                },
                __class__: ic
            };
            var gf = function (a) {
                this._commonsDataIndex = this._uvBufferIndex = this._uvTransformIndex = this._uvTransformIndex2 = this._secondaryUVBufferIndex =
                    this._normalBufferIndex = this._tangentBufferIndex = this._lightFragmentConstantIndex = this._sceneMatrixIndex = this._sceneNormalMatrixIndex = this._cameraPositionIndex = this._probeWeightsIndex = -1;
                this._preserveAlpha = !0;
                this._sharedRegisters = new hk;
                this._dependencyCounter = new gk;
                this._profile = a;
                this.initRegisterCache(a)
            };
            g["away3d.materials.compilation.ShaderCompiler"] = gf;
            gf.__name__ = "away3d.materials.compilation.ShaderCompiler";
            gf.prototype = {
                set_enableLightFallOff: function (a) {
                    return this._enableLightFallOff =
                        a
                },
                get_needUVAnimation: function () {
                    return this._needUVAnimation
                },
                get_UVTarget: function () {
                    return this._UVTarget
                },
                get_UVSource: function () {
                    return this._UVSource
                },
                set_forceSeperateMVP: function (a) {
                    return this._forceSeperateMVP = a
                },
                initRegisterCache: function (a) {
                    this._registerCache = new Rd(a);
                    this._registerCache.set_vertexAttributesOffset(1);
                    this._registerCache.reset()
                },
                get_animateUVs: function () {
                    return this._animateUVs
                },
                set_animateUVs: function (a) {
                    return this._animateUVs = a
                },
                get_animateUVs2: function () {
                    return this._animateUVs2
                },
                set_animateUVs2: function (a) {
                    return this._animateUVs2 = a
                },
                set_alphaPremultiplied: function (a) {
                    return this._alphaPremultiplied = a
                },
                set_preserveAlpha: function (a) {
                    return this._preserveAlpha = a
                },
                setTextureSampling: function (a, b, c, d) {
                    this._smooth = a;
                    this._repeat = b;
                    this._mipmap = c;
                    this._anisotropy = d
                },
                setConstantDataBuffers: function (a, b) {
                    this._vertexConstantData = a;
                    this._fragmentConstantData = b
                },
                set_methodSetup: function (a) {
                    return this._methodSetup = a
                },
                compile: function () {
                    this.initRegisterIndices();
                    this.initLightData();
                    for (var a = ["va0"], b = D.toObjectVector(null), c = 0, d = a.length; c < d;) {
                        var e = c++;
                        b.set(e, a[e])
                    }
                    this._animatableAttributes = b;
                    a = ["vt0"];
                    b = D.toObjectVector(null);
                    c = 0;
                    for (d = a.length; c < d;) e = c++, b.set(e, a[e]);
                    this._animationTargetRegisters = b;
                    this._fragmentCode = this._vertexCode = "";
                    this._sharedRegisters.localPosition = this._registerCache.getFreeVertexVectorTemp();
                    this._registerCache.addVertexTempUsages(this._sharedRegisters.localPosition, 1);
                    this.createCommons();
                    this.calculateDependencies();
                    this.updateMethodRegisters();
                    this._registerCache.getFreeVertexConstant();
                    this._registerCache.getFreeVertexConstant();
                    this._registerCache.getFreeVertexConstant();
                    this._registerCache.getFreeVertexConstant();
                    this.createNormalRegisters();
                    (0 < this._dependencyCounter.get_globalPosDependencies() || this._forceSeperateMVP) && this.compileGlobalPositionCode();
                    this.compileProjectionCode();
                    this.compileMethodsCode();
                    this.compileFragmentOutput();
                    this._fragmentPostLightCode = this.get_fragmentCode()
                },
                createNormalRegisters: function () {
                },
                compileMethodsCode: function () {
                    0 <
                    this._dependencyCounter.get_uvDependencies() && this.compileUVCode();
                    0 < this._dependencyCounter.get_secondaryUVDependencies() && this.compileSecondaryUVCode();
                    0 < this._dependencyCounter.get_normalDependencies() && this.compileNormalCode();
                    0 < this._dependencyCounter.get_viewDirDependencies() && this.compileViewDirCode();
                    this.compileLightingCode();
                    this._fragmentLightCode = this._fragmentCode;
                    this._fragmentCode = "";
                    this.compileMethods()
                },
                compileLightingCode: function () {
                },
                compileViewDirCode: function () {
                },
                compileNormalCode: function () {
                },
                compileUVCode: function () {
                    var a = this._registerCache.getFreeVertexAttribute();
                    this._uvBufferIndex = a.get_index();
                    var b = this._registerCache.getFreeVarying();
                    this._sharedRegisters.uvVarying = b;
                    if (this.get_animateUVs()) {
                        var c = this._registerCache.getFreeVertexConstant(),
                            d = this._registerCache.getFreeVertexConstant();
                        this._uvTransformIndex = 4 * c.get_index();
                        this._vertexCode += "dp4 " + n.string(b) + ".x, " + n.string(a) + ", " + n.string(c) + "\ndp4 " + n.string(b) + ".y, " + n.string(a) + ", " + n.string(d) + "\nmov " + n.string(b) + ".zw, " +
                            n.string(a) + ".zw \n"
                    } else this._uvTransformIndex = -1, this._needUVAnimation = !0, this._UVTarget = b.toString(), this._UVSource = a.toString()
                },
                compileSecondaryUVCode: function () {
                    var a = this._registerCache.getFreeVertexAttribute();
                    this._secondaryUVBufferIndex = a.get_index();
                    var b = this._registerCache.getFreeVarying();
                    this._sharedRegisters.secondaryUVVarying = b;
                    if (this.get_animateUVs2()) {
                        var c = this._registerCache.getFreeVertexConstant(),
                            d = this._registerCache.getFreeVertexConstant();
                        this._uvTransformIndex2 = 4 * c.get_index();
                        this._vertexCode += "dp4 " + n.string(b) + ".x, " + n.string(a) + ", " + n.string(c) + "\n";
                        this._vertexCode += "dp4 " + n.string(b) + ".y, " + n.string(a) + ", " + n.string(d) + "\n";
                        this._vertexCode += "mov " + n.string(b) + ".zw, " + n.string(a) + ".zw\n"
                    } else this._uvTransformIndex2 = -1, this._vertexCode += "mov " + n.string(b) + ", " + n.string(a) + "\n"
                },
                compileGlobalPositionCode: function () {
                    this._sharedRegisters.globalPositionVertex = this._registerCache.getFreeVertexVectorTemp();
                    this._registerCache.addVertexTempUsages(this._sharedRegisters.globalPositionVertex,
                        this._dependencyCounter.get_globalPosDependencies());
                    var a = this._registerCache.getFreeVertexConstant();
                    this._registerCache.getFreeVertexConstant();
                    this._registerCache.getFreeVertexConstant();
                    this._registerCache.getFreeVertexConstant();
                    this._sceneMatrixIndex = 4 * a.get_index();
                    this._vertexCode += "m44 " + n.string(this._sharedRegisters.globalPositionVertex) + ", " + n.string(this._sharedRegisters.localPosition) + ", " + n.string(a) + "\n";
                    this._dependencyCounter.get_usesGlobalPosFragment() && (this._sharedRegisters.globalPositionVarying =
                        this._registerCache.getFreeVarying(), this._vertexCode += "mov " + n.string(this._sharedRegisters.globalPositionVarying) + ", " + n.string(this._sharedRegisters.globalPositionVertex) + "\n")
                },
                compileProjectionCode: function () {
                    var a = 0 < this._dependencyCounter.get_globalPosDependencies() || this._forceSeperateMVP ? this._sharedRegisters.globalPositionVertex.toString() : this._animationTargetRegisters.get(0);
                    0 < this._dependencyCounter.get_projectionDependencies() ? (this._sharedRegisters.projectionFragment = this._registerCache.getFreeVarying(),
                        a = "m44 vt5, " + a + ", vc0\t\t\nmov " + n.string(this._sharedRegisters.projectionFragment) + ", vt5\nmov op, vt5\n") : a = "m44 op, " + a + ", vc0\t\t\n";
                    this._vertexCode += a
                },
                compileFragmentOutput: function () {
                    this._fragmentCode += "mov " + n.string(this._registerCache.get_fragmentOutputRegister()) + ", " + n.string(this._sharedRegisters.shadedTarget) + "\n";
                    this._registerCache.removeFragmentTempUsage(this._sharedRegisters.shadedTarget)
                },
                initRegisterIndices: function () {
                    this._probeWeightsIndex = this._sceneNormalMatrixIndex = this._sceneMatrixIndex =
                        this._lightFragmentConstantIndex = this._tangentBufferIndex = this._normalBufferIndex = this._secondaryUVBufferIndex = this._uvTransformIndex2 = this._uvTransformIndex = this._uvBufferIndex = this._cameraPositionIndex = this._commonsDataIndex = -1
                },
                initLightData: function () {
                    this._numLights = this._numPointLights + this._numDirectionalLights;
                    this._numProbeRegisters = Math.ceil(this._numLightProbes / 4);
                    this._combinedLightSources = null != this._methodSetup._specularMethod ? this._specularLightSources | this._diffuseLightSources : this._diffuseLightSources;
                    this._usingSpecularMethod = null != this._methodSetup._specularMethod && (this.usesLightsForSpecular() || this.usesProbesForSpecular())
                },
                createCommons: function () {
                    this._sharedRegisters.commons = this._registerCache.getFreeFragmentConstant();
                    this._commonsDataIndex = 4 * this._sharedRegisters.commons.get_index()
                },
                calculateDependencies: function () {
                    this._dependencyCounter.reset();
                    var a = this._methodSetup._methods;
                    this.setupAndCountMethodDependencies(this._methodSetup._diffuseMethod, this._methodSetup._diffuseMethodVO);
                    null != this._methodSetup._shadowMethod && this.setupAndCountMethodDependencies(this._methodSetup._shadowMethod, this._methodSetup._shadowMethodVO);
                    this.setupAndCountMethodDependencies(this._methodSetup._ambientMethod, this._methodSetup._ambientMethodVO);
                    this._usingSpecularMethod && this.setupAndCountMethodDependencies(this._methodSetup._specularMethod, this._methodSetup._specularMethodVO);
                    null != this._methodSetup._colorTransformMethod && this.setupAndCountMethodDependencies(this._methodSetup._colorTransformMethod,
                        this._methodSetup._colorTransformMethodVO);
                    for (var b = 0, c = a.get_length(); b < c;) {
                        var d = b++;
                        this.setupAndCountMethodDependencies(a.get(d).method, a.get(d).data)
                    }
                    this.get_usesNormals() && this.setupAndCountMethodDependencies(this._methodSetup._normalMethod, this._methodSetup._normalMethodVO);
                    this._dependencyCounter.setPositionedLights(this._numPointLights, this._combinedLightSources)
                },
                setupAndCountMethodDependencies: function (a, b) {
                    this.setupMethod(a, b);
                    this._dependencyCounter.includeMethodVO(b)
                },
                setupMethod: function (a,
                                       b) {
                    a.reset();
                    b.reset();
                    b.vertexData = this._vertexConstantData;
                    b.fragmentData = this._fragmentConstantData;
                    b.useSmoothTextures = this._smooth;
                    b.repeatTextures = this._repeat;
                    b.useMipmapping = this._mipmap;
                    b.anisotropy = this._anisotropy;
                    b.useLightFallOff = this._enableLightFallOff && "baselineConstrained" != this._profile;
                    b.numLights = this._numLights + this._numLightProbes;
                    a.initVO(b)
                },
                get_commonsDataIndex: function () {
                    return this._commonsDataIndex
                },
                updateMethodRegisters: function () {
                    this._methodSetup._normalMethod.set_sharedRegisters(this._sharedRegisters);
                    this._methodSetup._diffuseMethod.set_sharedRegisters(this._sharedRegisters);
                    null != this._methodSetup._shadowMethod && this._methodSetup._shadowMethod.set_sharedRegisters(this._sharedRegisters);
                    this._methodSetup._ambientMethod.set_sharedRegisters(this._sharedRegisters);
                    null != this._methodSetup._specularMethod && this._methodSetup._specularMethod.set_sharedRegisters(this._sharedRegisters);
                    null != this._methodSetup._colorTransformMethod && this._methodSetup._colorTransformMethod.set_sharedRegisters(this._sharedRegisters);
                    for (var a = this._methodSetup._methods, b = 0, c = a.get_length(); b < c;) {
                        var d = b++;
                        a.get(d).method.set_sharedRegisters(this._sharedRegisters)
                    }
                },
                get_numUsedVertexConstants: function () {
                    return this._registerCache.get_numUsedVertexConstants()
                },
                get_numUsedFragmentConstants: function () {
                    return this._registerCache.get_numUsedFragmentConstants()
                },
                get_numUsedStreams: function () {
                    return this._registerCache.get_numUsedStreams()
                },
                get_numUsedTextures: function () {
                    return this._registerCache.get_numUsedTextures()
                },
                get_numUsedVaryings: function () {
                    return this._registerCache.get_numUsedVaryings()
                },
                usesLightsForSpecular: function () {
                    return 0 < this._numLights ? 0 != (this._specularLightSources & 1) : !1
                },
                usesLightsForDiffuse: function () {
                    return 0 < this._numLights ? 0 != (this._diffuseLightSources & 1) : !1
                },
                dispose: function () {
                    this.cleanUpMethods();
                    this._registerCache.dispose();
                    this._sharedRegisters = this._registerCache = null
                },
                cleanUpMethods: function () {
                    null != this._methodSetup._normalMethod && this._methodSetup._normalMethod.cleanCompilationData();
                    null != this._methodSetup._diffuseMethod && this._methodSetup._diffuseMethod.cleanCompilationData();
                    null != this._methodSetup._ambientMethod && this._methodSetup._ambientMethod.cleanCompilationData();
                    null != this._methodSetup._specularMethod && this._methodSetup._specularMethod.cleanCompilationData();
                    null != this._methodSetup._shadowMethod && this._methodSetup._shadowMethod.cleanCompilationData();
                    null != this._methodSetup._colorTransformMethod && this._methodSetup._colorTransformMethod.cleanCompilationData();
                    for (var a = this._methodSetup._methods, b = 0, c = a.get_length(); b < c;) {
                        var d = b++;
                        a.get(d).method.cleanCompilationData()
                    }
                },
                set_specularLightSources: function (a) {
                    return this._specularLightSources = a
                },
                set_diffuseLightSources: function (a) {
                    return this._diffuseLightSources = a
                },
                usesProbesForSpecular: function () {
                    return 0 < this._numLightProbes ? 0 != (this._specularLightSources & 2) : !1
                },
                usesProbesForDiffuse: function () {
                    return 0 < this._numLightProbes ? 0 != (this._diffuseLightSources & 2) : !1
                },
                usesProbes: function () {
                    return 0 < this._numLightProbes ? 0 != ((this._diffuseLightSources | this._specularLightSources) & 2) : !1
                },
                get_uvBufferIndex: function () {
                    return this._uvBufferIndex
                },
                get_uvTransformIndex: function () {
                    return this._uvTransformIndex
                },
                get_uvTransformIndex2: function () {
                    return this._uvTransformIndex2
                },
                get_secondaryUVBufferIndex: function () {
                    return this._secondaryUVBufferIndex
                },
                get_normalBufferIndex: function () {
                    return this._normalBufferIndex
                },
                get_tangentBufferIndex: function () {
                    return this._tangentBufferIndex
                },
                get_lightFragmentConstantIndex: function () {
                    return this._lightFragmentConstantIndex
                },
                get_cameraPositionIndex: function () {
                    return this._cameraPositionIndex
                },
                get_sceneMatrixIndex: function () {
                    return this._sceneMatrixIndex
                },
                get_sceneNormalMatrixIndex: function () {
                    return this._sceneNormalMatrixIndex
                },
                get_probeWeightsIndex: function () {
                    return this._probeWeightsIndex
                },
                get_vertexCode: function () {
                    return this._vertexCode
                },
                get_fragmentCode: function () {
                    return this._fragmentCode
                },
                get_fragmentLightCode: function () {
                    return this._fragmentLightCode
                },
                get_fragmentPostLightCode: function () {
                    return this._fragmentPostLightCode
                },
                get_shadedTarget: function () {
                    return this._sharedRegisters.shadedTarget.toString()
                },
                set_numPointLights: function (a) {
                    return this._numPointLights =
                        a
                },
                set_numDirectionalLights: function (a) {
                    return this._numDirectionalLights = a
                },
                set_numLightProbes: function (a) {
                    return this._numLightProbes = a
                },
                get_usingSpecularMethod: function () {
                    return this._usingSpecularMethod
                },
                get_animatableAttributes: function () {
                    return this._animatableAttributes
                },
                get_animationTargetRegisters: function () {
                    return this._animationTargetRegisters
                },
                get_usesNormals: function () {
                    return 0 < this._dependencyCounter.get_normalDependencies() ? this._methodSetup._normalMethod.get_hasOutput() : !1
                },
                usesLights: function () {
                    return 0 <
                    this._numLights ? 0 != (this._combinedLightSources & 1) : !1
                },
                compileMethods: function () {
                    var a = this._methodSetup._methods,
                        b = a.get_length(),
                        c = null;
                    this._preserveAlpha && (c = this._registerCache.getFreeFragmentSingleTemp(), this._registerCache.addFragmentTempUsages(c, 1), this._fragmentCode += "mov " + n.string(c) + ", " + n.string(this._sharedRegisters.shadedTarget) + ".w\n");
                    for (var d = 0; d < b;) {
                        var e = d++;
                        var f = a.get(e).method;
                        e = a.get(e).data;
                        this._vertexCode += f.getVertexCode(e, this._registerCache);
                        (e.needsGlobalVertexPos ||
                            e.needsGlobalFragmentPos) && this._registerCache.removeVertexTempUsage(this._sharedRegisters.globalPositionVertex);
                        this._fragmentCode += f.getFragmentCode(e, this._registerCache, this._sharedRegisters.shadedTarget);
                        e.needsNormals && this._registerCache.removeFragmentTempUsage(this._sharedRegisters.normalFragment);
                        e.needsView && this._registerCache.removeFragmentTempUsage(this._sharedRegisters.viewDirFragment)
                    }
                    this._preserveAlpha && (this._fragmentCode += "mov " + n.string(this._sharedRegisters.shadedTarget) + ".w, " +
                        n.string(c) + "\n", this._registerCache.removeFragmentTempUsage(c));
                    null != this._methodSetup._colorTransformMethod && (this._vertexCode += this._methodSetup._colorTransformMethod.getVertexCode(this._methodSetup._colorTransformMethodVO, this._registerCache), this._fragmentCode += this._methodSetup._colorTransformMethod.getFragmentCode(this._methodSetup._colorTransformMethodVO, this._registerCache, this._sharedRegisters.shadedTarget))
                },
                get_lightProbeDiffuseIndices: function () {
                    return this._lightProbeDiffuseIndices
                },
                get_lightProbeSpecularIndices: function () {
                    return this._lightProbeSpecularIndices
                },
                __class__: gf,
                __properties__: {
                    set_numLightProbes: "set_numLightProbes",
                    set_numDirectionalLights: "set_numDirectionalLights",
                    set_numPointLights: "set_numPointLights",
                    set_diffuseLightSources: "set_diffuseLightSources",
                    set_specularLightSources: "set_specularLightSources",
                    set_methodSetup: "set_methodSetup",
                    set_preserveAlpha: "set_preserveAlpha",
                    set_alphaPremultiplied: "set_alphaPremultiplied",
                    set_forceSeperateMVP: "set_forceSeperateMVP",
                    set_enableLightFallOff: "set_enableLightFallOff",
                    get_lightProbeSpecularIndices: "get_lightProbeSpecularIndices",
                    get_lightProbeDiffuseIndices: "get_lightProbeDiffuseIndices",
                    get_usesNormals: "get_usesNormals",
                    get_animationTargetRegisters: "get_animationTargetRegisters",
                    get_animatableAttributes: "get_animatableAttributes",
                    get_usingSpecularMethod: "get_usingSpecularMethod",
                    get_shadedTarget: "get_shadedTarget",
                    get_fragmentPostLightCode: "get_fragmentPostLightCode",
                    get_fragmentLightCode: "get_fragmentLightCode",
                    get_fragmentCode: "get_fragmentCode",
                    get_vertexCode: "get_vertexCode",
                    get_probeWeightsIndex: "get_probeWeightsIndex",
                    get_sceneNormalMatrixIndex: "get_sceneNormalMatrixIndex",
                    get_sceneMatrixIndex: "get_sceneMatrixIndex",
                    get_cameraPositionIndex: "get_cameraPositionIndex",
                    get_lightFragmentConstantIndex: "get_lightFragmentConstantIndex",
                    get_tangentBufferIndex: "get_tangentBufferIndex",
                    get_normalBufferIndex: "get_normalBufferIndex",
                    get_secondaryUVBufferIndex: "get_secondaryUVBufferIndex",
                    get_uvTransformIndex2: "get_uvTransformIndex2",
                    get_uvTransformIndex: "get_uvTransformIndex",
                    get_uvBufferIndex: "get_uvBufferIndex",
                    get_numUsedVaryings: "get_numUsedVaryings",
                    get_numUsedTextures: "get_numUsedTextures",
                    get_numUsedStreams: "get_numUsedStreams",
                    get_numUsedFragmentConstants: "get_numUsedFragmentConstants",
                    get_numUsedVertexConstants: "get_numUsedVertexConstants",
                    get_commonsDataIndex: "get_commonsDataIndex",
                    set_animateUVs2: "set_animateUVs2",
                    get_animateUVs2: "get_animateUVs2",
                    set_animateUVs: "set_animateUVs",
                    get_animateUVs: "get_animateUVs",
                    get_UVSource: "get_UVSource",
                    get_UVTarget: "get_UVTarget",
                    get_needUVAnimation: "get_needUVAnimation"
                }
            };
            var hk = function () {
            };
            g["away3d.materials.compilation.ShaderRegisterData"] = hk;
            hk.__name__ = "away3d.materials.compilation.ShaderRegisterData";
            hk.prototype = {
                __class__: hk
            };
            var Nb = function (a, b, c) {
                null == c && (c = -1);
                this._component = c;
                this._regName = a;
                this._index = b;
                this._toStr = this._regName;
                0 <= this._index && (this._toStr += this._index);
                -
                    1 < c && (this._toStr += "." + Nb.COMPONENTS[c])
            };
            g["away3d.materials.compilation.ShaderRegisterElement"] = Nb;
            Nb.__name__ =
                "away3d.materials.compilation.ShaderRegisterElement";
            Nb.prototype = {
                toString: function () {
                    return this._toStr
                },
                get_regName: function () {
                    return this._regName
                },
                get_index: function () {
                    return this._index
                },
                __class__: Nb,
                __properties__: {
                    get_index: "get_index",
                    get_regName: "get_regName"
                }
            };
            var Zh = function (a) {
                gf.call(this, a)
            };
            g["away3d.materials.compilation.SuperShaderCompiler"] = Zh;
            Zh.__name__ = "away3d.materials.compilation.SuperShaderCompiler";
            Zh.__super__ = gf;
            Zh.prototype = l(gf.prototype, {
                initLightData: function () {
                    gf.prototype.initLightData.call(this);
                    this._pointLightRegisters = D.toObjectVector(null, 3 * this._numPointLights, !0);
                    this._dirLightRegisters = D.toObjectVector(null, 3 * this._numDirectionalLights, !0)
                },
                calculateDependencies: function () {
                    gf.prototype.calculateDependencies.call(this);
                    this._dependencyCounter.addWorldSpaceDependencies(!0)
                },
                compileNormalCode: function () {
                    var a = D.toObjectVector(null, 3, !0);
                    this._sharedRegisters.normalFragment = this._registerCache.getFreeFragmentVectorTemp();
                    this._registerCache.addFragmentTempUsages(this._sharedRegisters.normalFragment,
                        this._dependencyCounter.get_normalDependencies());
                    this._methodSetup._normalMethod.get_hasOutput() && !this._methodSetup._normalMethod.get_tangentSpace() ? (this._vertexCode += this._methodSetup._normalMethod.getVertexCode(this._methodSetup._normalMethodVO, this._registerCache), this._fragmentCode += this._methodSetup._normalMethod.getFragmentCode(this._methodSetup._normalMethodVO, this._registerCache, this._sharedRegisters.normalFragment)) : (this._sharedRegisters.normalVarying = this._registerCache.getFreeVarying(),
                        a.set(0, this._registerCache.getFreeVertexConstant()), a.set(1, this._registerCache.getFreeVertexConstant()), a.set(2, this._registerCache.getFreeVertexConstant()), this._registerCache.getFreeVertexConstant(), this._sceneNormalMatrixIndex = 4 * a.get(0).get_index(), this._methodSetup._normalMethod.get_hasOutput() ? (this.compileTangentVertexCode(a), this.compileTangentNormalMapFragmentCode()) : (this._vertexCode += "m33 " + n.string(this._sharedRegisters.normalVarying) + ".xyz, " + n.string(this._sharedRegisters.animatedNormal) +
                        ", " + n.string(a.get(0)) + "\nmov " + n.string(this._sharedRegisters.normalVarying) + ".w, " + n.string(this._sharedRegisters.animatedNormal) + ".w\t\n", this._fragmentCode += "nrm " + n.string(this._sharedRegisters.normalFragment) + ".xyz, " + n.string(this._sharedRegisters.normalVarying) + "\nmov " + n.string(this._sharedRegisters.normalFragment) + ".w, " + n.string(this._sharedRegisters.normalVarying) + ".w\t\t\n", 0 < this._dependencyCounter.get_tangentDependencies() && (this._sharedRegisters.tangentInput = this._registerCache.getFreeVertexAttribute(),
                        this._tangentBufferIndex = this._sharedRegisters.tangentInput.get_index(), this._sharedRegisters.tangentVarying = this._registerCache.getFreeVarying(), this._vertexCode += "mov " + n.string(this._sharedRegisters.tangentVarying) + ", " + n.string(this._sharedRegisters.tangentInput) + "\n")), this._registerCache.removeVertexTempUsage(this._sharedRegisters.animatedNormal))
                },
                createNormalRegisters: function () {
                    0 < this._dependencyCounter.get_normalDependencies() && (this._sharedRegisters.normalInput = this._registerCache.getFreeVertexAttribute(),
                        this._normalBufferIndex = this._sharedRegisters.normalInput.get_index(), this._sharedRegisters.animatedNormal = this._registerCache.getFreeVertexVectorTemp(), this._registerCache.addVertexTempUsages(this._sharedRegisters.animatedNormal, 1), this._animatableAttributes.push(this._sharedRegisters.normalInput.toString()), this._animationTargetRegisters.push(this._sharedRegisters.animatedNormal.toString()));
                    this._methodSetup._normalMethod.get_hasOutput() && (this._sharedRegisters.tangentInput = this._registerCache.getFreeVertexAttribute(),
                        this._tangentBufferIndex = this._sharedRegisters.tangentInput.get_index(), this._sharedRegisters.animatedTangent = this._registerCache.getFreeVertexVectorTemp(), this._registerCache.addVertexTempUsages(this._sharedRegisters.animatedTangent, 1), this._animatableAttributes.push(this._sharedRegisters.tangentInput.toString()), this._animationTargetRegisters.push(this._sharedRegisters.animatedTangent.toString()))
                },
                compileTangentVertexCode: function (a) {
                    this._sharedRegisters.tangentVarying = this._registerCache.getFreeVarying();
                    this._sharedRegisters.bitangentVarying = this._registerCache.getFreeVarying();
                    this._vertexCode += "m33 " + n.string(this._sharedRegisters.animatedNormal) + ".xyz, " + n.string(this._sharedRegisters.animatedNormal) + ", " + n.string(a.get(0)) + "\nnrm " + n.string(this._sharedRegisters.animatedNormal) + ".xyz, " + n.string(this._sharedRegisters.animatedNormal) + "\n";
                    this._vertexCode += "m33 " + n.string(this._sharedRegisters.animatedTangent) + ".xyz, " + n.string(this._sharedRegisters.animatedTangent) + ", " + n.string(a.get(0)) + "\nnrm " +
                        n.string(this._sharedRegisters.animatedTangent) + ".xyz, " + n.string(this._sharedRegisters.animatedTangent) + "\n";
                    a = this._registerCache.getFreeVertexVectorTemp();
                    this._vertexCode += "mov " + n.string(this._sharedRegisters.tangentVarying) + ".x, " + n.string(this._sharedRegisters.animatedTangent) + ".x  \nmov " + n.string(this._sharedRegisters.tangentVarying) + ".z, " + n.string(this._sharedRegisters.animatedNormal) + ".x  \nmov " + n.string(this._sharedRegisters.tangentVarying) + ".w, " + n.string(this._sharedRegisters.normalInput) +
                        ".w  \nmov " + n.string(this._sharedRegisters.bitangentVarying) + ".x, " + n.string(this._sharedRegisters.animatedTangent) + ".y  \nmov " + n.string(this._sharedRegisters.bitangentVarying) + ".z, " + n.string(this._sharedRegisters.animatedNormal) + ".y  \nmov " + n.string(this._sharedRegisters.bitangentVarying) + ".w, " + n.string(this._sharedRegisters.normalInput) + ".w  \nmov " + n.string(this._sharedRegisters.normalVarying) + ".x, " + n.string(this._sharedRegisters.animatedTangent) + ".z  \nmov " + n.string(this._sharedRegisters.normalVarying) +
                        ".z, " + n.string(this._sharedRegisters.animatedNormal) + ".z  \nmov " + n.string(this._sharedRegisters.normalVarying) + ".w, " + n.string(this._sharedRegisters.normalInput) + ".w  \ncrs " + n.string(a) + ".xyz, " + n.string(this._sharedRegisters.animatedNormal) + ", " + n.string(this._sharedRegisters.animatedTangent) + "\nmov " + n.string(this._sharedRegisters.tangentVarying) + ".y, " + n.string(a) + ".x    \nmov " + n.string(this._sharedRegisters.bitangentVarying) + ".y, " + n.string(a) + ".y  \nmov " + n.string(this._sharedRegisters.normalVarying) +
                        ".y, " + n.string(a) + ".z    \n";
                    this._registerCache.removeVertexTempUsage(this._sharedRegisters.animatedTangent)
                },
                compileTangentNormalMapFragmentCode: function () {
                    var a = this._registerCache.getFreeFragmentVectorTemp();
                    this._registerCache.addFragmentTempUsages(a, 1);
                    var b = this._registerCache.getFreeFragmentVectorTemp();
                    this._registerCache.addFragmentTempUsages(b, 1);
                    var c = this._registerCache.getFreeFragmentVectorTemp();
                    this._registerCache.addFragmentTempUsages(c, 1);
                    this._fragmentCode += "nrm " + n.string(a) +
                        ".xyz, " + n.string(this._sharedRegisters.tangentVarying) + "\nmov " + n.string(a) + ".w, " + n.string(this._sharedRegisters.tangentVarying) + ".w\t\nnrm " + n.string(b) + ".xyz, " + n.string(this._sharedRegisters.bitangentVarying) + "\nnrm " + n.string(c) + ".xyz, " + n.string(this._sharedRegisters.normalVarying) + "\n";
                    var d = this._registerCache.getFreeFragmentVectorTemp();
                    this._registerCache.addFragmentTempUsages(d, 1);
                    this._fragmentCode += this._methodSetup._normalMethod.getFragmentCode(this._methodSetup._normalMethodVO, this._registerCache,
                        d) + "m33 " + n.string(this._sharedRegisters.normalFragment) + ".xyz, " + n.string(d) + ", " + n.string(a) + "\t\nmov " + n.string(this._sharedRegisters.normalFragment) + ".w,   " + n.string(this._sharedRegisters.normalVarying) + ".w\t\t\t\n";
                    this._registerCache.removeFragmentTempUsage(d);
                    this._methodSetup._normalMethodVO.needsView && this._registerCache.removeFragmentTempUsage(this._sharedRegisters.viewDirFragment);
                    (this._methodSetup._normalMethodVO.needsGlobalVertexPos || this._methodSetup._normalMethodVO.needsGlobalFragmentPos) &&
                    this._registerCache.removeVertexTempUsage(this._sharedRegisters.globalPositionVertex);
                    this._registerCache.removeFragmentTempUsage(b);
                    this._registerCache.removeFragmentTempUsage(a);
                    this._registerCache.removeFragmentTempUsage(c)
                },
                compileViewDirCode: function () {
                    var a = this._registerCache.getFreeVertexConstant();
                    this._sharedRegisters.viewDirVarying = this._registerCache.getFreeVarying();
                    this._sharedRegisters.viewDirFragment = this._registerCache.getFreeFragmentVectorTemp();
                    this._registerCache.addFragmentTempUsages(this._sharedRegisters.viewDirFragment,
                        this._dependencyCounter.get_viewDirDependencies());
                    this._cameraPositionIndex = 4 * a.get_index();
                    this._vertexCode += "sub " + n.string(this._sharedRegisters.viewDirVarying) + ", " + n.string(a) + ", " + n.string(this._sharedRegisters.globalPositionVertex) + "\n";
                    this._fragmentCode += "nrm " + n.string(this._sharedRegisters.viewDirFragment) + ".xyz, " + n.string(this._sharedRegisters.viewDirVarying) + "\nmov " + n.string(this._sharedRegisters.viewDirFragment) + ".w,   " + n.string(this._sharedRegisters.viewDirVarying) + ".w \t\t\n";
                    this._registerCache.removeVertexTempUsage(this._sharedRegisters.globalPositionVertex)
                },
                compileLightingCode: function () {
                    var a = null;
                    this._sharedRegisters.shadedTarget = this._registerCache.getFreeFragmentVectorTemp();
                    this._registerCache.addFragmentTempUsages(this._sharedRegisters.shadedTarget, 1);
                    this._vertexCode += this._methodSetup._diffuseMethod.getVertexCode(this._methodSetup._diffuseMethodVO, this._registerCache);
                    this._fragmentCode += this._methodSetup._diffuseMethod.getFragmentPreLightingCode(this._methodSetup._diffuseMethodVO,
                        this._registerCache);
                    this._usingSpecularMethod && (this._vertexCode += this._methodSetup._specularMethod.getVertexCode(this._methodSetup._specularMethodVO, this._registerCache), this._fragmentCode += this._methodSetup._specularMethod.getFragmentPreLightingCode(this._methodSetup._specularMethodVO, this._registerCache));
                    this.usesLights() && (this.initLightRegisters(), this.compileDirectionalLightCode(), this.compilePointLightCode());
                    this.usesProbes() && this.compileLightProbeCode();
                    this._vertexCode += this._methodSetup._ambientMethod.getVertexCode(this._methodSetup._ambientMethodVO,
                        this._registerCache);
                    this._fragmentCode += this._methodSetup._ambientMethod.getFragmentCode(this._methodSetup._ambientMethodVO, this._registerCache, this._sharedRegisters.shadedTarget);
                    this._methodSetup._ambientMethodVO.needsNormals && this._registerCache.removeFragmentTempUsage(this._sharedRegisters.normalFragment);
                    this._methodSetup._ambientMethodVO.needsView && this._registerCache.removeFragmentTempUsage(this._sharedRegisters.viewDirFragment);
                    null != this._methodSetup._shadowMethod && (this._vertexCode += this._methodSetup._shadowMethod.getVertexCode(this._methodSetup._shadowMethodVO,
                        this._registerCache), 0 == this._dependencyCounter.get_normalDependencies() ? (a = this._registerCache.getFreeFragmentVectorTemp(), this._registerCache.addFragmentTempUsages(a, 1)) : a = this._sharedRegisters.normalFragment, this._methodSetup._diffuseMethod.set_shadowRegister(a), this._fragmentCode += this._methodSetup._shadowMethod.getFragmentCode(this._methodSetup._shadowMethodVO, this._registerCache, a));
                    this._fragmentCode += this._methodSetup._diffuseMethod.getFragmentPostLightingCode(this._methodSetup._diffuseMethodVO,
                        this._registerCache, this._sharedRegisters.shadedTarget);
                    this._alphaPremultiplied && (this._fragmentCode += "add " + n.string(this._sharedRegisters.shadedTarget) + ".w, " + n.string(this._sharedRegisters.shadedTarget) + ".w, " + n.string(this._sharedRegisters.commons) + ".z\ndiv " + n.string(this._sharedRegisters.shadedTarget) + ".xyz, " + n.string(this._sharedRegisters.shadedTarget) + ", " + n.string(this._sharedRegisters.shadedTarget) + ".w\nsub " + n.string(this._sharedRegisters.shadedTarget) + ".w, " + n.string(this._sharedRegisters.shadedTarget) +
                        ".w, " + n.string(this._sharedRegisters.commons) + ".z\nsat " + n.string(this._sharedRegisters.shadedTarget) + ".xyz, " + n.string(this._sharedRegisters.shadedTarget) + "\n");
                    this._methodSetup._diffuseMethodVO.needsNormals && this._registerCache.removeFragmentTempUsage(this._sharedRegisters.normalFragment);
                    this._methodSetup._diffuseMethodVO.needsView && this._registerCache.removeFragmentTempUsage(this._sharedRegisters.viewDirFragment);
                    this._usingSpecularMethod && (this._methodSetup._specularMethod.set_shadowRegister(a),
                        this._fragmentCode += this._methodSetup._specularMethod.getFragmentPostLightingCode(this._methodSetup._specularMethodVO, this._registerCache, this._sharedRegisters.shadedTarget), this._methodSetup._specularMethodVO.needsNormals && this._registerCache.removeFragmentTempUsage(this._sharedRegisters.normalFragment), this._methodSetup._specularMethodVO.needsView && this._registerCache.removeFragmentTempUsage(this._sharedRegisters.viewDirFragment))
                },
                initLightRegisters: function () {
                    for (var a = this._dirLightRegisters.get_length(),
                             b = 0; b < a;) {
                        var c = b++;
                        this._dirLightRegisters.set(c, this._registerCache.getFreeFragmentConstant());
                        -
                            1 == this._lightFragmentConstantIndex && (this._lightFragmentConstantIndex = 4 * this._dirLightRegisters.get(c).get_index())
                    }
                    a = this._pointLightRegisters.get_length();
                    for (b = 0; b < a;) c = b++, this._pointLightRegisters.set(c, this._registerCache.getFreeFragmentConstant()), -1 == this._lightFragmentConstantIndex && (this._lightFragmentConstantIndex = 4 * this._pointLightRegisters.get(c).get_index())
                },
                compileDirectionalLightCode: function () {
                    var a =
                            0,
                        b = this._usingSpecularMethod && this.usesLightsForSpecular(),
                        c = this.usesLightsForDiffuse();
                    if (b || c)
                        for (var d = 0, e = this._numDirectionalLights; d < e;) {
                            d++;
                            var f = this._dirLightRegisters.get(a++);
                            var h = this._dirLightRegisters.get(a++);
                            var r = this._dirLightRegisters.get(a++);
                            c && (this._fragmentCode += this._methodSetup._diffuseMethod.getFragmentCodePerLight(this._methodSetup._diffuseMethodVO, f, h, this._registerCache));
                            b && (this._fragmentCode += this._methodSetup._specularMethod.getFragmentCodePerLight(this._methodSetup._specularMethodVO,
                                f, r, this._registerCache))
                        }
                },
                compilePointLightCode: function () {
                    var a = 0,
                        b = this._usingSpecularMethod && this.usesLightsForSpecular(),
                        c = this.usesLightsForDiffuse();
                    if (b || c)
                        for (var d = 0, e = this._numPointLights; d < e;) {
                            d++;
                            var f = this._pointLightRegisters.get(a++);
                            var h = this._pointLightRegisters.get(a++);
                            var r = this._pointLightRegisters.get(a++);
                            var m = this._registerCache.getFreeFragmentVectorTemp();
                            this._registerCache.addFragmentTempUsages(m, 1);
                            this._fragmentCode += "sub " + n.string(m) + ", " + n.string(f) + ", " + n.string(this._sharedRegisters.globalPositionVarying) +
                                "\ndp3 " + n.string(m) + ".w, " + n.string(m) + ", " + n.string(m) + "\nsub " + n.string(m) + ".w, " + n.string(m) + ".w, " + n.string(h) + ".w\nmul " + n.string(m) + ".w, " + n.string(m) + ".w, " + n.string(r) + ".w\nsat " + n.string(m) + ".w, " + n.string(m) + ".w\nsub " + n.string(m) + ".w, " + n.string(f) + ".w, " + n.string(m) + ".w\nnrm " + n.string(m) + ".xyz, " + n.string(m) + "\n";
                            -
                                1 == this._lightFragmentConstantIndex && (this._lightFragmentConstantIndex = 4 * f.get_index());
                            c && (this._fragmentCode += this._methodSetup._diffuseMethod.getFragmentCodePerLight(this._methodSetup._diffuseMethodVO,
                                m, h, this._registerCache));
                            b && (this._fragmentCode += this._methodSetup._specularMethod.getFragmentCodePerLight(this._methodSetup._specularMethodVO, m, r, this._registerCache));
                            this._registerCache.removeFragmentTempUsage(m)
                        }
                },
                compileLightProbeCode: function () {
                    var a = [".x", ".y", ".z", ".w"],
                        b = D.toObjectVector(null),
                        c = this._usingSpecularMethod && this.usesProbesForSpecular(),
                        d = this.usesProbesForDiffuse();
                    if (c || d) {
                        d && (this._lightProbeDiffuseIndices = D.toIntVector(null));
                        c && (this._lightProbeSpecularIndices = D.toIntVector(null));
                        for (var e = 0, f = this._numProbeRegisters; e < f;) {
                            var h = e++;
                            b.set(h, this._registerCache.getFreeFragmentConstant());
                            0 == h && (this._probeWeightsIndex = 4 * b.get(h).get_index())
                        }
                        e = 0;
                        for (f = this._numLightProbes; e < f;) {
                            h = e++;
                            var r = b.get(Math.floor(h / 4)).toString() + a[h % 4];
                            if (d) {
                                var m = this._registerCache.getFreeTextureReg();
                                this._lightProbeDiffuseIndices.set(h, m.get_index());
                                this._fragmentCode += this._methodSetup._diffuseMethod.getFragmentCodePerProbe(this._methodSetup._diffuseMethodVO, m, r, this._registerCache)
                            }
                            c && (m =
                                this._registerCache.getFreeTextureReg(), this._lightProbeSpecularIndices.set(h, m.get_index()), this._fragmentCode += this._methodSetup._specularMethod.getFragmentCodePerProbe(this._methodSetup._specularMethodVO, m, r, this._registerCache))
                        }
                    }
                },
                __class__: Zh
            });
            var hf = function () {
                B.call(this)
            };
            g["away3d.materials.lightpickers.LightPickerBase"] = hf;
            hf.__name__ = "away3d.materials.lightpickers.LightPickerBase";
            hf.__interfaces__ = [t];
            hf.__super__ = B;
            hf.prototype = l(B.prototype, {
                get_numDirectionalLights: function () {
                    return this._numDirectionalLights
                },
                get_numPointLights: function () {
                    return this._numPointLights
                },
                get_numCastingDirectionalLights: function () {
                    return this._numCastingDirectionalLights
                },
                get_numCastingPointLights: function () {
                    return this._numCastingPointLights
                },
                get_numLightProbes: function () {
                    return this._numLightProbes
                },
                get_pointLights: function () {
                    return this._pointLights
                },
                get_directionalLights: function () {
                    return this._directionalLights
                },
                get_castingPointLights: function () {
                    return this._castingPointLights
                },
                get_castingDirectionalLights: function () {
                    return this._castingDirectionalLights
                },
                get_lightProbes: function () {
                    return this._lightProbes
                },
                get_lightProbeWeights: function () {
                    return this._lightProbeWeights
                },
                collectLights: function (a, b) {
                    this.updateProbeWeights(a)
                },
                updateProbeWeights: function (a) {
                    a = a.get_sourceEntity().get_scenePosition();
                    for (var b, c = a.x, d = a.y, e = a.z, f, h, r = a = 0, m = this._numLightProbes; r < m;) {
                        var C = r++;
                        b = this._lightProbes.get(C).get_scenePosition();
                        f = c - b.x;
                        h = d - b.y;
                        b = e - b.z;
                        f = f * f + h * h + b * b;
                        f = 1E-5 < f ? 1 / f : 5E7;
                        this._lightProbeWeights.set(C, f);
                        a += f
                    }
                    a = 1 / a;
                    r = 0;
                    for (m = this._numLightProbes; r <
                    m;) c = C = r++, d = this._lightProbeWeights, d.set(c, d.get(c) * a)
                },
                __class__: hf,
                __properties__: l(B.prototype.__properties__, {
                    get_lightProbeWeights: "get_lightProbeWeights",
                    get_lightProbes: "get_lightProbes",
                    get_castingDirectionalLights: "get_castingDirectionalLights",
                    get_castingPointLights: "get_castingPointLights",
                    get_directionalLights: "get_directionalLights",
                    get_pointLights: "get_pointLights",
                    get_numLightProbes: "get_numLightProbes",
                    get_numCastingPointLights: "get_numCastingPointLights",
                    get_numCastingDirectionalLights: "get_numCastingDirectionalLights",
                    get_numPointLights: "get_numPointLights",
                    get_numDirectionalLights: "get_numDirectionalLights"
                })
            });
            var $h = function (a) {
                this.set_lights(a);
                B.call(this)
            };
            g["away3d.materials.lightpickers.StaticLightPicker"] = $h;
            $h.__name__ = "away3d.materials.lightpickers.StaticLightPicker";
            $h.__super__ = hf;
            $h.prototype = l(hf.prototype, {
                set_lights: function (a) {
                    var b = 0,
                        c = 0,
                        d = 0,
                        e = 0,
                        f = 0;
                    null != this._lights && this.clearListeners();
                    this._lights = a;
                    var h = D.toObjectVector(null);
                    for (var r = 0, m = a.length; r < m;) {
                        var C = r++;
                        h.set(C, a[C])
                    }
                    this._allPickedLights =
                        h;
                    this._pointLights = D.toObjectVector(null);
                    this._castingPointLights = D.toObjectVector(null);
                    this._directionalLights = D.toObjectVector(null);
                    this._castingDirectionalLights = D.toObjectVector(null);
                    this._lightProbes = D.toObjectVector(null);
                    m = a.length;
                    for (r = 0; r < m;) C = r++, h = a[C], h.addEventListener("castsShadowChange", p(this, this.onCastShadowChange)), h instanceof Cd ? h.get_castsShadows() ? this._castingPointLights.set(d++, T.__cast(h, Cd)) : this._pointLights.set(b++, T.__cast(h, Cd)) : h instanceof gd ? h.get_castsShadows() ?
                        this._castingDirectionalLights.set(e++, T.__cast(h, gd)) : this._directionalLights.set(c++, T.__cast(h, gd)) : h instanceof Dg && this._lightProbes.set(f++, T.__cast(h, Dg));
                    if (this._numDirectionalLights == c && this._numPointLights == b && this._numLightProbes == f && this._numCastingPointLights == d && this._numCastingDirectionalLights == e) return a;
                    this._numDirectionalLights = c;
                    this._numCastingDirectionalLights = e;
                    this._numPointLights = b;
                    this._numCastingPointLights = d;
                    this._numLightProbes = f;
                    this._lightProbeWeights = D.toFloatVector(null,
                        4 * Math.ceil(f / 4), !0);
                    this.dispatchEvent(new V("change"));
                    return a
                },
                clearListeners: function () {
                    for (var a = 0, b = this._lights.length; a < b;) {
                        var c = a++;
                        this._lights[c].removeEventListener("castsShadowChange", p(this, this.onCastShadowChange))
                    }
                },
                onCastShadowChange: function (a) {
                    a = T.__cast(a.target, yc);
                    a instanceof Cd ? this.updatePointCasting(T.__cast(a, Cd)) : a instanceof gd && this.updateDirectionalCasting(T.__cast(a, gd));
                    this.dispatchEvent(new V("change"))
                },
                updateDirectionalCasting: function (a) {
                    if (a.get_castsShadows()) {
                        --this._numDirectionalLights;
                        ++this._numCastingDirectionalLights;
                        var b = this._directionalLights;
                        b.__tempIndex = this._directionalLights.indexOf(T.__cast(a, gd), 0);
                        for (var c = 0, d = []; c < d.length;) {
                            var e = d[c++];
                            b.insertAt(b.__tempIndex, e);
                            b.__tempIndex++
                        }
                        b.splice(b.__tempIndex, 1);
                        this._castingDirectionalLights.push(a)
                    } else {
                        ++this._numDirectionalLights;
                        --this._numCastingDirectionalLights;
                        b = this._castingDirectionalLights;
                        b.__tempIndex = this._castingDirectionalLights.indexOf(T.__cast(a, gd), 0);
                        c = 0;
                        for (d = []; c < d.length;) e = d[c++], b.insertAt(b.__tempIndex,
                            e), b.__tempIndex++;
                        b.splice(b.__tempIndex, 1);
                        this._directionalLights.push(a)
                    }
                },
                updatePointCasting: function (a) {
                    if (a.get_castsShadows()) {
                        --this._numPointLights;
                        ++this._numCastingPointLights;
                        var b = this._pointLights;
                        b.__tempIndex = this._pointLights.indexOf(T.__cast(a, Cd), 0);
                        for (var c = 0, d = []; c < d.length;) {
                            var e = d[c++];
                            b.insertAt(b.__tempIndex, e);
                            b.__tempIndex++
                        }
                        b.splice(b.__tempIndex, 1);
                        this._castingPointLights.push(a)
                    } else {
                        ++this._numPointLights;
                        --this._numCastingPointLights;
                        b = this._castingPointLights;
                        b.__tempIndex = this._castingPointLights.indexOf(T.__cast(a, Cd), 0);
                        c = 0;
                        for (d = []; c < d.length;) e = d[c++], b.insertAt(b.__tempIndex, e), b.__tempIndex++;
                        b.splice(b.__tempIndex, 1);
                        this._pointLights.push(a)
                    }
                },
                __class__: $h,
                __properties__: l(hf.prototype.__properties__, {
                    set_lights: "set_lights"
                })
            });
            var zc = function () {
                B.call(this)
            };
            g["away3d.materials.methods.ShadingMethodBase"] = zc;
            zc.__name__ = "away3d.materials.methods.ShadingMethodBase";
            zc.__super__ = B;
            zc.prototype = l(B.prototype, {
                initVO: function (a) {
                },
                initConstants: function (a) {
                },
                set_sharedRegisters: function (a) {
                    return this._sharedRegisters = a
                },
                get_passes: function () {
                    return this._passes
                },
                createMethodVO: function () {
                    return new ik
                },
                reset: function () {
                    this.cleanCompilationData()
                },
                cleanCompilationData: function () {
                },
                getVertexCode: function (a, b) {
                    return ""
                },
                activate: function (a, b) {
                },
                setRenderState: function (a, b, c, d) {
                },
                deactivate: function (a, b) {
                },
                getTex2DSampleCode: function (a, b, c, d, e, f) {
                    var h = a.repeatTextures ? "wrap" : "clamp";
                    null != f && (h = f);
                    f = this.getFormatStringForTexture(d);
                    d = a.useMipmapping &&
                        d.get_hasMipMaps();
                    a = a.useSmoothTextures ? d ? "linear,miplinear" : "linear" : d ? "nearest,mipnearest" : "nearest";
                    null == e && (e = this._sharedRegisters.uvVarying);
                    return "tex " + n.string(b) + ", " + n.string(e) + ", " + n.string(c) + " <2d," + a + "," + f + h + ">\n"
                },
                getFormatStringForTexture: function (a) {
                    switch (a.get_format()) {
                        case 3:
                            return "dxt1,";
                        case 4:
                            return "dxt5,";
                        default:
                            return ""
                    }
                },
                invalidateShaderProgram: function () {
                    this.dispatchEvent(new Cg("ShaderInvalidated"))
                },
                getSmoothingFilter: function (a, b) {
                    if (a) switch (b) {
                        case 0:
                            return 4;
                        case 1:
                            return 1;
                        case 2:
                            return 2;
                        case 3:
                            return 3;
                        case 4:
                            return 0
                    } else return 5
                },
                __class__: zc,
                __properties__: l(B.prototype.__properties__, {
                    set_sharedRegisters: "set_sharedRegisters",
                    get_passes: "get_passes"
                })
            });
            var ai = function () {
                this._lightAmbientR = this._lightAmbientG = this._lightAmbientB = 0;
                this._ambient = 1;
                this._ambientR = this._ambientG = this._ambientB = 0;
                this._ambientColor = 16777215;
                B.call(this)
            };
            g["away3d.materials.methods.BasicAmbientMethod"] = ai;
            ai.__name__ = "away3d.materials.methods.BasicAmbientMethod";
            ai.__super__ = zc;
            ai.prototype = l(zc.prototype, {
                initVO: function (a) {
                    a.needsUV = this._useTexture
                },
                initConstants: function (a) {
                    a.fragmentData.set(a.fragmentConstantsIndex + 3, 1)
                },
                cleanCompilationData: function () {
                    zc.prototype.cleanCompilationData.call(this);
                    this._ambientInputRegister = null
                },
                getFragmentCode: function (a, b, c) {
                    var d = "";
                    this._useTexture ? (this._ambientInputRegister = b.getFreeTextureReg(), a.texturesIndex = this._ambientInputRegister.get_index(), d += this.getTex2DSampleCode(a, c, this._ambientInputRegister, this._texture) +
                        "div " + n.string(c) + ".xyz, " + n.string(c) + ".xyz, " + n.string(c) + ".w\n") : (this._ambientInputRegister = b.getFreeFragmentConstant(), a.fragmentConstantsIndex = 4 * this._ambientInputRegister.get_index(), d += "mov " + n.string(c) + ", " + n.string(this._ambientInputRegister) + "\n");
                    return d
                },
                activate: function (a, b) {
                    this._useTexture && (b.get_context3D().setSamplerStateAt(a.texturesIndex, a.repeatTextures ? 2 : 0, this.getSmoothingFilter(a.useSmoothTextures, a.anisotropy), a.useMipmapping ? 0 : 2), b._context3D.setTextureAt(a.texturesIndex,
                        this._texture.getTextureForStage3D(b)))
                },
                updateAmbient: function () {
                    this._ambientR = (this._ambientColor >> 16 & 255) / 255 * this._ambient * this._lightAmbientR;
                    this._ambientG = (this._ambientColor >> 8 & 255) / 255 * this._ambient * this._lightAmbientG;
                    this._ambientB = (this._ambientColor & 255) / 255 * this._ambient * this._lightAmbientB
                },
                setRenderState: function (a, b, c, d) {
                    this.updateAmbient();
                    this._useTexture || (b = a.fragmentConstantsIndex, a = a.fragmentData, a.set(b, this._ambientR), a.set(b + 1, this._ambientG), a.set(b + 2, this._ambientB))
                },
                __class__: ai
            });
            var Dd = function () {
                B.call(this)
            };
            g["away3d.materials.methods.LightingMethodBase"] = Dd;
            Dd.__name__ = "away3d.materials.methods.LightingMethodBase";
            Dd.__super__ = zc;
            Dd.prototype = l(zc.prototype, {
                __class__: Dd
            });
            var bi = function () {
                this._alphaThreshold = 0;
                this._diffuseR = this._diffuseG = this._diffuseB = this._diffuseA = 1;
                this._diffuseColor = 16777215;
                B.call(this)
            };
            g["away3d.materials.methods.BasicDiffuseMethod"] = bi;
            bi.__name__ = "away3d.materials.methods.BasicDiffuseMethod";
            bi.__super__ = Dd;
            bi.prototype =
                l(Dd.prototype, {
                    initVO: function (a) {
                        a.needsUV = this._useTexture;
                        a.needsNormals = 0 < a.numLights
                    },
                    set_diffuseAlpha: function (a) {
                        return this._diffuseA = a
                    },
                    set_diffuseColor: function (a) {
                        this._diffuseColor = a;
                        this.updateDiffuse();
                        return a
                    },
                    get_texture: function () {
                        return this._texture
                    },
                    set_texture: function (a) {
                        null != a == this._useTexture && (null == a || null == this._texture || a.get_hasMipMaps() == this._texture.get_hasMipMaps() && a.get_format() == this._texture.get_format()) || this.invalidateShaderProgram();
                        this._useTexture = null !=
                            a;
                        return this._texture = a
                    },
                    cleanCompilationData: function () {
                        Dd.prototype.cleanCompilationData.call(this);
                        this._diffuseInputRegister = this._totalLightColorReg = this._shadowRegister = null
                    },
                    getFragmentPreLightingCode: function (a, b) {
                        this._isFirstLight = !0;
                        0 < a.numLights && (this._totalLightColorReg = b.getFreeFragmentVectorTemp(), b.addFragmentTempUsages(this._totalLightColorReg, 1));
                        return ""
                    },
                    getFragmentCodePerLight: function (a, b, c, d) {
                        var e = "";
                        if (this._isFirstLight) var f = this._totalLightColorReg;
                        else f = d.getFreeFragmentVectorTemp(),
                            d.addFragmentTempUsages(f, 1);
                        e += "dp3 " + n.string(f) + ".x, " + n.string(b) + ", " + n.string(this._sharedRegisters.normalFragment) + "\nmax " + n.string(f) + ".w, " + n.string(f) + ".x, " + n.string(this._sharedRegisters.commons) + ".y\n";
                        a.useLightFallOff && (e += "mul " + n.string(f) + ".w, " + n.string(f) + ".w, " + n.string(b) + ".w\n");
                        null != this._modulateMethod && (e += n.string(this._modulateMethod(a, f, d, this._sharedRegisters)));
                        e += "mul " + n.string(f) + ", " + n.string(f) + ".w, " + n.string(c) + "\n";
                        this._isFirstLight || (e += "add " + n.string(this._totalLightColorReg) +
                            ".xyz, " + n.string(this._totalLightColorReg) + ", " + n.string(f) + "\n", d.removeFragmentTempUsage(f));
                        this._isFirstLight = !1;
                        return e
                    },
                    getFragmentCodePerProbe: function (a, b, c, d) {
                        var e = "";
                        if (this._isFirstLight) var f = this._totalLightColorReg;
                        else f = d.getFreeFragmentVectorTemp(), d.addFragmentTempUsages(f, 1);
                        e += "tex " + n.string(f) + ", " + n.string(this._sharedRegisters.normalFragment) + ", " + n.string(b) + " <cube,linear,miplinear>\nmul " + n.string(f) + ".xyz, " + n.string(f) + ".xyz, " + c + "\n";
                        null != this._modulateMethod && (e +=
                            n.string(this._modulateMethod(a, f, d, this._sharedRegisters)));
                        this._isFirstLight || (e += "add " + n.string(this._totalLightColorReg) + ".xyz, " + n.string(this._totalLightColorReg) + ", " + n.string(f) + "\n", d.removeFragmentTempUsage(f));
                        this._isFirstLight = !1;
                        return e
                    },
                    getFragmentPostLightingCode: function (a, b, c) {
                        var d = "";
                        if (0 < a.numLights) {
                            null != this._shadowRegister && (d += this.applyShadow(a, b));
                            var e = b.getFreeFragmentVectorTemp();
                            b.addFragmentTempUsages(e, 1)
                        } else e = c;
                        if (this._useTexture) {
                            if (this._diffuseInputRegister =
                                b.getFreeTextureReg(), a.texturesIndex = this._diffuseInputRegister.get_index(), d += this.getTex2DSampleCode(a, e, this._diffuseInputRegister, this._texture), 0 < this._alphaThreshold) {
                                var f = b.getFreeFragmentConstant();
                                a.fragmentConstantsIndex = 4 * f.get_index();
                                d += "sub " + n.string(e) + ".w, " + n.string(e) + ".w, " + n.string(f) + ".x\nkil " + n.string(e) + ".w\nadd " + n.string(e) + ".w, " + n.string(e) + ".w, " + n.string(f) + ".x\n"
                            }
                        } else this._diffuseInputRegister = b.getFreeFragmentConstant(), a.fragmentConstantsIndex = 4 * this._diffuseInputRegister.get_index(),
                            d += "mov " + n.string(e) + ", " + n.string(this._diffuseInputRegister) + "\n";
                        if (0 == a.numLights) return d;
                        d += "sat " + n.string(this._totalLightColorReg) + ", " + n.string(this._totalLightColorReg) + "\n";
                        this._useAmbientTexture ? d += "mul " + n.string(e) + ".xyz, " + n.string(e) + ", " + n.string(this._totalLightColorReg) + "\nmul " + n.string(this._totalLightColorReg) + ".xyz, " + n.string(c) + ", " + n.string(this._totalLightColorReg) + "\nsub " + n.string(c) + ".xyz, " + n.string(c) + ", " + n.string(this._totalLightColorReg) + "\nadd " + n.string(c) +
                            ".xyz, " + n.string(e) + ", " + n.string(c) + "\n" : (d += "add " + n.string(c) + ".xyz, " + n.string(this._totalLightColorReg) + ", " + n.string(c) + "\n", d = this._useTexture ? d + ("mul " + n.string(c) + ".xyz, " + n.string(e) + ", " + n.string(c) + "\nmov " + n.string(c) + ".w, " + n.string(e) + ".w\n") : d + ("mul " + n.string(c) + ".xyz, " + n.string(this._diffuseInputRegister) + ", " + n.string(c) + "\nmov " + n.string(c) + ".w, " + n.string(this._diffuseInputRegister) + ".w\n"));
                        b.removeFragmentTempUsage(this._totalLightColorReg);
                        b.removeFragmentTempUsage(e);
                        return d
                    },
                    applyShadow: function (a, b) {
                        return "mul " + n.string(this._totalLightColorReg) + ".xyz, " + n.string(this._totalLightColorReg) + ", " + n.string(this._shadowRegister) + ".w\n"
                    },
                    activate: function (a, b) {
                        this._useTexture ? (b._context3D.setSamplerStateAt(a.texturesIndex, a.repeatTextures ? 2 : 0, this.getSmoothingFilter(a.useSmoothTextures, a.anisotropy), a.useMipmapping ? 0 : 2), b._context3D.setTextureAt(a.texturesIndex, this._texture.getTextureForStage3D(b)), 0 < this._alphaThreshold && a.fragmentData.set(a.fragmentConstantsIndex, this._alphaThreshold)) :
                            (b = a.fragmentConstantsIndex, a = a.fragmentData, a.set(b, this._diffuseR), a.set(b + 1, this._diffuseG), a.set(b + 2, this._diffuseB), a.set(b + 3, this._diffuseA))
                    },
                    updateDiffuse: function () {
                        this._diffuseR = (this._diffuseColor >> 16 & 255) / 255;
                        this._diffuseG = (this._diffuseColor >> 8 & 255) / 255;
                        this._diffuseB = (this._diffuseColor & 255) / 255
                    },
                    set_shadowRegister: function (a) {
                        return this._shadowRegister = a
                    },
                    __class__: bi,
                    __properties__: l(Dd.prototype.__properties__, {
                        set_diffuseColor: "set_diffuseColor",
                        set_diffuseAlpha: "set_diffuseAlpha",
                        set_shadowRegister: "set_shadowRegister",
                        set_texture: "set_texture",
                        get_texture: "get_texture"
                    })
                });
            var ci = function () {
                B.call(this)
            };
            g["away3d.materials.methods.BasicNormalMethod"] = ci;
            ci.__name__ = "away3d.materials.methods.BasicNormalMethod";
            ci.__super__ = zc;
            ci.prototype = l(zc.prototype, {
                initVO: function (a) {
                    a.needsUV = null != this._texture
                },
                get_tangentSpace: function () {
                    return !0
                },
                get_hasOutput: function () {
                    return this._useTexture
                },
                cleanCompilationData: function () {
                    zc.prototype.cleanCompilationData.call(this);
                    this._normalTextureRegister =
                        null
                },
                activate: function (a, b) {
                    0 <= a.texturesIndex && (b._context3D.setSamplerStateAt(a.texturesIndex, a.repeatTextures ? 2 : 0, this.getSmoothingFilter(a.useSmoothTextures, a.anisotropy), a.useMipmapping ? 0 : 2), b._context3D.setTextureAt(a.texturesIndex, this._texture.getTextureForStage3D(b)))
                },
                getFragmentCode: function (a, b, c) {
                    this._normalTextureRegister = b.getFreeTextureReg();
                    a.texturesIndex = this._normalTextureRegister.get_index();
                    return this.getTex2DSampleCode(a, c, this._normalTextureRegister, this._texture) + "sub " +
                        n.string(c) + ".xyz, " + n.string(c) + ".xyz, " + n.string(this._sharedRegisters.commons) + ".xxx\t\nnrm " + n.string(c) + ".xyz, " + n.string(c) + ".xyz\t\t\t\t\t\t\t\n"
                },
                __class__: ci,
                __properties__: l(zc.prototype.__properties__, {
                    get_hasOutput: "get_hasOutput",
                    get_tangentSpace: "get_tangentSpace"
                })
            });
            var di = function () {
                this._specularR = this._specularG = this._specularB = 1;
                this._specularColor = 16777215;
                this._specular = 1;
                this._gloss = 50;
                B.call(this)
            };
            g["away3d.materials.methods.BasicSpecularMethod"] = di;
            di.__name__ = "away3d.materials.methods.BasicSpecularMethod";
            di.__super__ = Dd;
            di.prototype = l(Dd.prototype, {
                initVO: function (a) {
                    a.needsUV = this._useTexture;
                    a.needsNormals = 0 < a.numLights;
                    a.needsView = 0 < a.numLights
                },
                set_gloss: function (a) {
                    return this._gloss = a
                },
                set_specular: function (a) {
                    if (a == this._specular) return a;
                    this._specular = a;
                    this.updateSpecular();
                    return a
                },
                cleanCompilationData: function () {
                    Dd.prototype.cleanCompilationData.call(this);
                    this._specularDataRegister = this._specularTexData = this._specularTextureRegister = this._totalLightColorReg = this._shadowRegister = null
                },
                getFragmentPreLightingCode: function (a, b) {
                    var c = "";
                    this._isFirstLight = !0;
                    0 < a.numLights && (this._specularDataRegister = b.getFreeFragmentConstant(), a.fragmentConstantsIndex = 4 * this._specularDataRegister.get_index(), this._useTexture ? (this._specularTexData = b.getFreeFragmentVectorTemp(), b.addFragmentTempUsages(this._specularTexData, 1), this._specularTextureRegister = b.getFreeTextureReg(), a.texturesIndex = this._specularTextureRegister.get_index(), c = this.getTex2DSampleCode(a, this._specularTexData, this._specularTextureRegister,
                        this._texture)) : this._specularTextureRegister = null, this._totalLightColorReg = b.getFreeFragmentVectorTemp(), b.addFragmentTempUsages(this._totalLightColorReg, 1));
                    return c
                },
                getFragmentCodePerLight: function (a, b, c, d) {
                    var e = "";
                    if (this._isFirstLight) var f = this._totalLightColorReg;
                    else f = d.getFreeFragmentVectorTemp(), d.addFragmentTempUsages(f, 1);
                    var h = this._sharedRegisters.viewDirFragment,
                        r = this._sharedRegisters.normalFragment;
                    e += "add " + n.string(f) + ", " + n.string(b) + ", " + n.string(h) + "\nnrm " + n.string(f) + ".xyz, " +
                        n.string(f) + "\ndp3 " + n.string(f) + ".w, " + n.string(r) + ", " + n.string(f) + "\nsat " + n.string(f) + ".w, " + n.string(f) + ".w\n";
                    e = this._useTexture ? e + ("mul " + n.string(this._specularTexData) + ".w, " + n.string(this._specularTexData) + ".y, " + n.string(this._specularDataRegister) + ".w\npow " + n.string(f) + ".w, " + n.string(f) + ".w, " + n.string(this._specularTexData) + ".w\n") : e + ("pow " + n.string(f) + ".w, " + n.string(f) + ".w, " + n.string(this._specularDataRegister) + ".w\n");
                    a.useLightFallOff && (e += "mul " + n.string(f) + ".w, " + n.string(f) +
                        ".w, " + n.string(b) + ".w\n");
                    null != this._modulateMethod && (e += n.string(this._modulateMethod(a, f, d, this._sharedRegisters)));
                    e += "mul " + n.string(f) + ".xyz, " + n.string(c) + ", " + n.string(f) + ".w\n";
                    this._isFirstLight || (e += "add " + n.string(this._totalLightColorReg) + ".xyz, " + n.string(this._totalLightColorReg) + ", " + n.string(f) + "\n", d.removeFragmentTempUsage(f));
                    this._isFirstLight = !1;
                    return e
                },
                getFragmentCodePerProbe: function (a, b, c, d) {
                    var e = "";
                    if (this._isFirstLight) var f = this._totalLightColorReg;
                    else f = d.getFreeFragmentVectorTemp(),
                        d.addFragmentTempUsages(f, 1);
                    var h = this._sharedRegisters.normalFragment,
                        r = this._sharedRegisters.viewDirFragment;
                    e += "dp3 " + n.string(f) + ".w, " + n.string(h) + ", " + n.string(r) + "\nadd " + n.string(f) + ".w, " + n.string(f) + ".w, " + n.string(f) + ".w\nmul " + n.string(f) + ", " + n.string(f) + ".w, " + n.string(h) + "\nsub " + n.string(f) + ", " + n.string(f) + ", " + n.string(r) + "\ntex " + n.string(f) + ", " + n.string(f) + ", " + n.string(b) + " <cube," + (a.useSmoothTextures ? "linear" : "nearest") + ",miplinear>\nmul " + n.string(f) + ".xyz, " + n.string(f) +
                        ", " + c + "\n";
                    null != this._modulateMethod && (e += n.string(this._modulateMethod(a, f, d, this._sharedRegisters)));
                    this._isFirstLight || (e += "add " + n.string(this._totalLightColorReg) + ".xyz, " + n.string(this._totalLightColorReg) + ", " + n.string(f) + "\n", d.removeFragmentTempUsage(f));
                    this._isFirstLight = !1;
                    return e
                },
                getFragmentPostLightingCode: function (a, b, c) {
                    var d = "";
                    if (0 == a.numLights) return d;
                    null != this._shadowRegister && (d += "mul " + n.string(this._totalLightColorReg) + ".xyz, " + n.string(this._totalLightColorReg) + ", " +
                        n.string(this._shadowRegister) + ".w\n");
                    this._useTexture && (d += "mul " + n.string(this._totalLightColorReg) + ".xyz, " + n.string(this._totalLightColorReg) + ", " + n.string(this._specularTexData) + ".x\n", b.removeFragmentTempUsage(this._specularTexData));
                    d += "mul " + n.string(this._totalLightColorReg) + ".xyz, " + n.string(this._totalLightColorReg) + ", " + n.string(this._specularDataRegister) + "\nadd " + n.string(c) + ".xyz, " + n.string(c) + ", " + n.string(this._totalLightColorReg) + "\n";
                    b.removeFragmentTempUsage(this._totalLightColorReg);
                    return d
                },
                activate: function (a, b) {
                    0 != a.numLights && (this._useTexture && (b._context3D.setSamplerStateAt(a.texturesIndex, a.repeatTextures ? 2 : 0, this.getSmoothingFilter(a.useSmoothTextures, a.anisotropy), a.useMipmapping ? 0 : 2), b._context3D.setTextureAt(a.texturesIndex, this._texture.getTextureForStage3D(b))), b = a.fragmentConstantsIndex, a = a.fragmentData, a.set(b, this._specularR), a.set(b + 1, this._specularG), a.set(b + 2, this._specularB), a.set(b + 3, this._gloss))
                },
                updateSpecular: function () {
                    this._specularR = J.toFloat(this._specularColor >>>
                        16 & 255) / J.toFloat(255) * this._specular;
                    this._specularG = J.toFloat(this._specularColor >>> 8 & 255) / J.toFloat(255) * this._specular;
                    this._specularB = J.toFloat(this._specularColor & 255) / J.toFloat(255) * this._specular
                },
                set_shadowRegister: function (a) {
                    return this._shadowRegister = a
                },
                __class__: di,
                __properties__: l(Dd.prototype.__properties__, {
                    set_specular: "set_specular",
                    set_gloss: "set_gloss",
                    set_shadowRegister: "set_shadowRegister"
                })
            });
            var Vd = function () {
                B.call(this)
            };
            g["away3d.materials.methods.EffectMethodBase"] = Vd;
            Vd.__name__ = "away3d.materials.methods.EffectMethodBase";
            Vd.__interfaces__ = [t];
            Vd.__super__ = zc;
            Vd.prototype = l(zc.prototype, {
                getFragmentCode: function (a, b, c) {
                    throw new Wa;
                },
                __class__: Vd
            });
            var jk = function () {
                B.call(this)
            };
            g["away3d.materials.methods.ColorTransformMethod"] = jk;
            jk.__name__ = "away3d.materials.methods.ColorTransformMethod";
            jk.__super__ = Vd;
            jk.prototype = l(Vd.prototype, {
                get_colorTransform: function () {
                    return this._colorTransform
                },
                getFragmentCode: function (a, b, c) {
                    var d = "",
                        e = b.getFreeFragmentConstant();
                    b = b.getFreeFragmentConstant();
                    a.fragmentConstantsIndex = 4 * e.get_index();
                    return d += "mul " + n.string(c) + ", " + c.toString() + ", " + n.string(e) + "\nadd " + n.string(c) + ", " + c.toString() + ", " + n.string(b) + "\n"
                },
                activate: function (a, b) {
                    b = a.fragmentConstantsIndex;
                    a = a.fragmentData;
                    a.set(b, this._colorTransform.redMultiplier);
                    a.set(b + 1, this._colorTransform.greenMultiplier);
                    a.set(b + 2, this._colorTransform.blueMultiplier);
                    a.set(b + 3, this._colorTransform.alphaMultiplier);
                    a.set(b + 4, .00392156862745098 * this._colorTransform.redOffset);
                    a.set(b + 5, .00392156862745098 * this._colorTransform.greenOffset);
                    a.set(b + 6, .00392156862745098 * this._colorTransform.blueOffset);
                    a.set(b + 7, .00392156862745098 * this._colorTransform.alphaOffset)
                },
                __class__: jk,
                __properties__: l(Vd.prototype.__properties__, {
                    get_colorTransform: "get_colorTransform"
                })
            });
            var ei = function (a, b, c) {
                null == c && (c = 8421504);
                this._maxDistance = 1E3;
                this._minDistance = 0;
                B.call(this);
                this.set_minDistance(a);
                this.set_maxDistance(b);
                this.set_fogColor(c)
            };
            g["away3d.materials.methods.FogMethod"] =
                ei;
            ei.__name__ = "away3d.materials.methods.FogMethod";
            ei.__super__ = Vd;
            ei.prototype = l(Vd.prototype, {
                initVO: function (a) {
                    a.needsProjection = !0
                },
                initConstants: function (a) {
                    var b = a.fragmentData;
                    a = a.fragmentConstantsIndex;
                    b.set(a + 3, 1);
                    b.set(a + 6, 0);
                    b.set(a + 7, 0)
                },
                set_minDistance: function (a) {
                    return this._minDistance = a
                },
                set_maxDistance: function (a) {
                    return this._maxDistance = a
                },
                set_fogColor: function (a) {
                    this._fogColor = a;
                    this._fogR = (a >> 16 & 255) / 255;
                    this._fogG = (a >> 8 & 255) / 255;
                    this._fogB = (a & 255) / 255;
                    return a
                },
                activate: function (a,
                                    b) {
                    b = a.fragmentData;
                    a = a.fragmentConstantsIndex;
                    b.set(a, this._fogR);
                    b.set(a + 1, this._fogG);
                    b.set(a + 2, this._fogB);
                    b.set(a + 4, this._minDistance);
                    b.set(a + 5, 1 / (this._maxDistance - this._minDistance))
                },
                getFragmentCode: function (a, b, c) {
                    var d = b.getFreeFragmentConstant(),
                        e = b.getFreeFragmentConstant(),
                        f = b.getFreeFragmentVectorTemp();
                    b.addFragmentTempUsages(f, 1);
                    var h = b.getFreeFragmentVectorTemp(),
                        r = "";
                    a.fragmentConstantsIndex = 4 * d.get_index();
                    r += "sub " + n.string(h) + ".w, " + n.string(this._sharedRegisters.projectionFragment) +
                        ".z, " + n.string(e) + ".x          \nmul " + n.string(h) + ".w, " + n.string(h) + ".w, " + n.string(e) + ".y\t\t\t\t\t\nsat " + n.string(h) + ".w, " + n.string(h) + ".w\t\t\t\t\t\t\t\t\t\t\nsub " + n.string(f) + ", " + n.string(d) + ", " + n.string(c) + "\nmul " + n.string(f) + ", " + n.string(f) + ", " + n.string(h) + ".w\t\t\t\t\t\nadd " + n.string(c) + ", " + n.string(c) + ", " + n.string(f) + "\n";
                    b.removeFragmentTempUsage(f);
                    return r
                },
                __class__: ei,
                __properties__: l(Vd.prototype.__properties__, {
                    set_fogColor: "set_fogColor",
                    set_maxDistance: "set_maxDistance",
                    set_minDistance: "set_minDistance"
                })
            });
            var ik = function () {
                this.useLightFallOff = !0
            };
            g["away3d.materials.methods.MethodVO"] = ik;
            ik.__name__ = "away3d.materials.methods.MethodVO";
            ik.prototype = {
                reset: function () {
                    this.fragmentConstantsIndex = this.vertexConstantsIndex = this.texturesIndex = -1;
                    this.useMipmapping = !0;
                    this.anisotropy = 1;
                    this.useSmoothTextures = !0;
                    this.needsGlobalFragmentPos = this.needsGlobalVertexPos = this.needsSecondaryUV = this.needsUV = this.needsTangents = this.needsNormals = this.needsView = this.needsProjection =
                        this.repeatTextures = !1;
                    this.numLights = 0;
                    this.useLightFallOff = !0
                },
                __class__: ik
            };
            var kk = function (a) {
                this.method = a;
                this.data = a.createMethodVO()
            };
            g["away3d.materials.methods.MethodVOSet"] = kk;
            kk.__name__ = "away3d.materials.methods.MethodVOSet";
            kk.prototype = {
                __class__: kk
            };
            var fi = function () {
                this._methods = D.toObjectVector(null);
                this._normalMethod = new ci;
                this._ambientMethod = new ai;
                this._diffuseMethod = new bi;
                this._specularMethod = new di;
                this._normalMethod.addEventListener("ShaderInvalidated", p(this, this.onShaderInvalidated));
                this._diffuseMethod.addEventListener("ShaderInvalidated", p(this, this.onShaderInvalidated));
                this._specularMethod.addEventListener("ShaderInvalidated", p(this, this.onShaderInvalidated));
                this._ambientMethod.addEventListener("ShaderInvalidated", p(this, this.onShaderInvalidated));
                this._normalMethodVO = this._normalMethod.createMethodVO();
                this._ambientMethodVO = this._ambientMethod.createMethodVO();
                this._diffuseMethodVO = this._diffuseMethod.createMethodVO();
                this._specularMethodVO = this._specularMethod.createMethodVO();
                O.call(this)
            };
            g["away3d.materials.methods.ShaderMethodSetup"] = fi;
            fi.__name__ = "away3d.materials.methods.ShaderMethodSetup";
            fi.__super__ = O;
            fi.prototype = l(O.prototype, {
                onShaderInvalidated: function (a) {
                    this.invalidateShaderProgram()
                },
                invalidateShaderProgram: function () {
                    this.dispatchEvent(new Cg("ShaderInvalidated"))
                },
                get_diffuseMethod: function () {
                    return this._diffuseMethod
                },
                get_specularMethod: function () {
                    return this._specularMethod
                },
                get_colorTransformMethod: function () {
                    return this._colorTransformMethod
                },
                addMethod: function (a) {
                    this._methods.push(new kk(a));
                    a.addEventListener("ShaderInvalidated", p(this, this.onShaderInvalidated));
                    this.invalidateShaderProgram()
                },
                __class__: fi,
                __properties__: {
                    get_colorTransformMethod: "get_colorTransformMethod",
                    get_specularMethod: "get_specularMethod",
                    get_diffuseMethod: "get_diffuseMethod"
                }
            });
            var gi = function (a) {
                B.call(this);
                this._castingLight = a;
                a.set_castsShadows(!0);
                this._shadowMapper = a.get_shadowMapper()
            };
            g["away3d.materials.methods.ShadowMapMethodBase"] = gi;
            gi.__name__ = "away3d.materials.methods.ShadowMapMethodBase";
            gi.__interfaces__ = [t];
            gi.__super__ = zc;
            gi.prototype = l(zc.prototype, {
                getFragmentCode: function (a, b, c) {
                    throw new Wa;
                },
                __class__: gi
            });
            var ob = function (a) {
                null == a && (a = !1);
                this._writeDepth = !0;
                this._agalVersion = 1;
                this._defaultCulling = 0;
                this._shadedTarget = "ft0";
                for (var b = ["vt0"], c = D.toObjectVector(null), d = 0, e = b.length; d < e;) {
                    var f = d++;
                    c.set(f, b[f])
                }
                this._animationTargetRegisters = c;
                b = ["va0"];
                c = D.toObjectVector(null);
                d = 0;
                for (e = b.length; d < e;) f = d++, c.set(f, b[f]);
                this._animatableAttributes = c;
                this._blendFactorDest = 9;
                this._blendFactorSource =
                    2;
                this._depthCompareMode = 5;
                this._anisotropy = 1;
                this._mipmap = !0;
                this._repeat = !1;
                this._smooth = !0;
                this._numUsedStreams = this._numUsedTextures = this._numUsedVertexConstants = this._numUsedFragmentConstants = this._numUsedVaryings = 0;
                this._context3Ds = D.toObjectVector(null, 8);
                b = [-1, -1, -1, -1, -1, -1, -1, -1];
                c = D.toIntVector(null);
                d = 0;
                for (e = b.length; d < e;) f = d++, c.set(f, b[f]);
                this._program3Dids = c;
                this._program3Ds = D.toObjectVector(null, 8);
                O.call(this);
                this._renderToTexture = a;
                this._numUsedStreams = 1;
                this._numUsedVertexConstants =
                    5
            };
            g["away3d.materials.passes.MaterialPassBase"] = ob;
            ob.__name__ = "away3d.materials.passes.MaterialPassBase";
            ob.__super__ = O;
            ob.prototype = l(O.prototype, {
                get_material: function () {
                    return this._material
                },
                set_material: function (a) {
                    return this._material = a
                },
                set_mipmap: function (a) {
                    if (this._mipmap == a) return this._mipmap;
                    this._mipmap = a;
                    this.invalidateShaderProgram();
                    return this._mipmap
                },
                set_anisotropy: function (a) {
                    if (this._anisotropy == a) return a;
                    this._anisotropy = a;
                    this.invalidateShaderProgram();
                    return a
                },
                set_smooth: function (a) {
                    if (this._smooth ==
                        a) return this._smooth;
                    this._smooth = a;
                    this.invalidateShaderProgram();
                    return this._smooth
                },
                set_repeat: function (a) {
                    if (this._repeat == a) return this._repeat;
                    this._repeat = a;
                    this.invalidateShaderProgram();
                    return this._repeat
                },
                set_bothSides: function (a) {
                    return this._bothSides = a
                },
                set_depthCompareMode: function (a) {
                    return this._depthCompareMode = a
                },
                set_animationSet: function (a) {
                    if (this._animationSet == a) return this._animationSet;
                    this._animationSet = a;
                    this.invalidateShaderProgram();
                    return this._animationSet
                },
                get_renderToTexture: function () {
                    return this._renderToTexture
                },
                get_numUsedStreams: function () {
                    return this._numUsedStreams
                },
                get_numUsedVertexConstants: function () {
                    return this._numUsedVertexConstants
                },
                get_numUsedVaryings: function () {
                    return this._numUsedVaryings
                },
                get_numUsedFragmentConstants: function () {
                    return this._numUsedFragmentConstants
                },
                get_needFragmentAnimation: function () {
                    return this._needFragmentAnimation
                },
                get_needUVAnimation: function () {
                    return this._needUVAnimation
                },
                updateAnimationState: function (a, b, c) {
                    a.get_animator().setRenderState(b, a, this._numUsedVertexConstants,
                        this._numUsedStreams, c)
                },
                render: function (a, b, c, d) {
                    throw new Wa;
                },
                getVertexCode: function () {
                    throw new Wa;
                },
                getFragmentCode: function (a) {
                    throw new Wa;
                },
                setBlendMode: function (a) {
                    switch (a) {
                        case 0:
                            this._blendFactorSource = 7;
                            this._blendFactorDest = 2;
                            this._enableBlending = !0;
                            break;
                        case 1:
                            this._blendFactorSource = 9;
                            this._blendFactorDest = 7;
                            this._enableBlending = !0;
                            break;
                        case 7:
                            this._blendFactorSource = 7;
                            this._blendFactorDest = 5;
                            this._enableBlending = !0;
                            break;
                        case 9:
                            this._blendFactorSource = 9;
                            this._blendFactorDest = 8;
                            this._enableBlending = !0;
                            break;
                        case 10:
                            this._blendFactorSource = 2;
                            this._blendFactorDest = 9;
                            this._enableBlending = !1;
                            break;
                        case 12:
                            this._blendFactorSource = 2;
                            this._blendFactorDest = 6;
                            this._enableBlending = !0;
                            break;
                        default:
                            throw new zf("Unsupported blend mode!");
                    }
                },
                activate: function (a, b) {
                    b = a._stage3DIndex;
                    var c = a._context3D;
                    c.setDepthTest(this._writeDepth && !this._enableBlending, this._depthCompareMode);
                    this._enableBlending && c.setBlendFactors(this._blendFactorSource, this._blendFactorDest);
                    if (this._context3Ds.get(b) !=
                        c || null == this._program3Ds.get(b)) this._context3Ds.set(b, c), this.updateProgram(a), this.dispatchEvent(new V("change"));
                    for (var d = ob._previousUsedStreams.get(b), e = this._numUsedStreams; e < d;) {
                        var f = e++;
                        c.setVertexBufferAt(f, null)
                    }
                    d = ob._previousUsedTexs.get(b);
                    for (e = this._numUsedTextures; e < d;) f = e++, c.setTextureAt(f, null);
                    null == this._animationSet || this._animationSet.get_usesCPU() || this._animationSet.activate(a, this);
                    c.setProgram(this._program3Ds.get(b));
                    c.setCulling(this._bothSides ? 3 : this._defaultCulling);
                    this._renderToTexture && (this._oldTarget = a.get_renderTarget(), this._oldSurface = a.get_renderSurfaceSelector(), this._oldDepthStencil = a.get_enableDepthAndStencil(), this._oldRect = a.get_scissorRect())
                },
                deactivate: function (a) {
                    var b = a._stage3DIndex;
                    ob._previousUsedStreams.set(b, this._numUsedStreams);
                    ob._previousUsedTexs.set(b, this._numUsedTextures);
                    null == this._animationSet || this._animationSet.get_usesCPU() || this._animationSet.deactivate(a, this);
                    this._renderToTexture && (a.setRenderTarget(this._oldTarget, this._oldDepthStencil,
                        this._oldSurface), a.set_scissorRect(this._oldRect));
                    this._enableBlending && a._context3D.setBlendFactors(2, 9);
                    a._context3D.setDepthTest(!0, 5)
                },
                invalidateShaderProgram: function (a) {
                    null == a && (a = !0);
                    this._program3Ds.set(0, null);
                    this._program3Ds.set(1, null);
                    this._program3Ds.set(2, null);
                    this._program3Ds.set(3, null);
                    this._program3Ds.set(4, null);
                    this._program3Ds.set(5, null);
                    this._program3Ds.set(6, null);
                    this._program3Ds.set(7, null);
                    null != this._material && a && this._material.invalidatePasses(this)
                },
                updateProgram: function (a) {
                    var b =
                            "",
                        c = "",
                        d = "",
                        e = this.getVertexCode();
                    if (null == this._animationSet || this._animationSet.get_usesCPU()) {
                        for (var f = 0, h = this._animatableAttributes.get_length(); f < h;) {
                            var r = f++;
                            b += "mov " + this._animationTargetRegisters.get(r) + ", " + this._animatableAttributes.get(r) + "\n"
                        }
                        this._needUVAnimation && (c = "mov " + this._UVTarget + "," + this._UVSource + "\n")
                    } else b = this._animationSet.getAGALVertexCode(this, this._animatableAttributes, this._animationTargetRegisters, a.get_profile()), this._needFragmentAnimation && (d = this._animationSet.getAGALFragmentCode(this,
                        this._shadedTarget, a.get_profile())), this._needUVAnimation && (c = this._animationSet.getAGALUVCode(this, this._UVSource, this._UVTarget)), this._animationSet.doneAGALCode(this);
                    e = b + c + e;
                    b = this.getFragmentCode(d);
                    ie.active && (console.log("Compiling AGAL Code:"), console.log("--------------------"), console.log(e), console.log(
                        "--------------------"), console.log(b));
                    Kb.getInstance(a).setProgram3D(this, e, b, this._agalVersion)
                },
                set_lightPicker: function (a) {
                    null != this._lightPicker && this._lightPicker.removeEventListener("change", p(this, this.onLightsChange));
                    this._lightPicker = a;
                    null != this._lightPicker && this._lightPicker.addEventListener("change", p(this, this.onLightsChange));
                    this.updateLights();
                    return this._lightPicker
                },
                onLightsChange: function (a) {
                    this.updateLights()
                },
                updateLights: function () {
                },
                set_alphaPremultiplied: function (a) {
                    this._alphaPremultiplied = a;
                    this.invalidateShaderProgram(!1);
                    return this._alphaPremultiplied
                },
                __class__: ob,
                __properties__: {
                    set_alphaPremultiplied: "set_alphaPremultiplied",
                    set_lightPicker: "set_lightPicker",
                    set_animationSet: "set_animationSet",
                    set_depthCompareMode: "set_depthCompareMode",
                    set_bothSides: "set_bothSides",
                    set_repeat: "set_repeat",
                    set_smooth: "set_smooth",
                    set_anisotropy: "set_anisotropy",
                    set_mipmap: "set_mipmap",
                    get_needUVAnimation: "get_needUVAnimation",
                    get_needFragmentAnimation: "get_needFragmentAnimation",
                    get_numUsedFragmentConstants: "get_numUsedFragmentConstants",
                    get_numUsedVaryings: "get_numUsedVaryings",
                    get_numUsedVertexConstants: "get_numUsedVertexConstants",
                    get_numUsedStreams: "get_numUsedStreams",
                    get_renderToTexture: "get_renderToTexture",
                    set_material: "set_material",
                    get_material: "get_material"
                }
            });
            var Ed = function (a) {
                this._preserveAlpha = this._enableLightFallOff = !0;
                this._fragmentConstantData = D.toFloatVector(null);
                this._vertexConstantData = D.toFloatVector(null);
                this._diffuseLightSources = 3;
                this._specularLightSources =
                    1;
                this._material = a;
                this.init();
                ob.call(this)
            };
            g["away3d.materials.passes.CompiledPass"] = Ed;
            Ed.__name__ = "away3d.materials.passes.CompiledPass";
            Ed.__super__ = ob;
            Ed.prototype = l(ob.prototype, {
                updateProgram: function (a) {
                    this.reset(a.get_profile());
                    ob.prototype.updateProgram.call(this, a)
                },
                reset: function (a) {
                    this.initCompiler(a);
                    this.updateShaderProperties();
                    this.initConstantData();
                    this.cleanUp()
                },
                updateUsedOffsets: function () {
                    this._numUsedVertexConstants = this._compiler.get_numUsedVertexConstants();
                    this._numUsedFragmentConstants =
                        this._compiler.get_numUsedFragmentConstants();
                    this._numUsedStreams = this._compiler.get_numUsedStreams();
                    this._numUsedTextures = this._compiler.get_numUsedTextures();
                    this._numUsedVaryings = this._compiler.get_numUsedVaryings();
                    this._numUsedFragmentConstants = this._compiler.get_numUsedFragmentConstants()
                },
                initConstantData: function () {
                    this._vertexConstantData.set_length(4 * this._numUsedVertexConstants);
                    this._fragmentConstantData.set_length(4 * this._numUsedFragmentConstants);
                    this.initCommonsData();
                    0 <= this._uvTransformIndex &&
                    this.initUVTransformData();
                    0 <= this._cameraPositionIndex && this._vertexConstantData.set(this._cameraPositionIndex + 3, 1);
                    this.updateMethodConstants()
                },
                initCompiler: function (a) {
                    this._compiler = this.createCompiler(a);
                    this._compiler.set_forceSeperateMVP(this._forceSeparateMVP);
                    this._compiler.set_numPointLights(this._numPointLights);
                    this._compiler.set_numDirectionalLights(this._numDirectionalLights);
                    this._compiler.set_numLightProbes(this._numLightProbes);
                    this._compiler.set_methodSetup(this._methodSetup);
                    this._compiler.set_diffuseLightSources(this._diffuseLightSources);
                    this._compiler.set_specularLightSources(this._specularLightSources);
                    this._compiler.setTextureSampling(this._smooth, this._repeat, this._mipmap, this._anisotropy);
                    this._compiler.setConstantDataBuffers(this._vertexConstantData, this._fragmentConstantData);
                    this._compiler.set_animateUVs(this._animateUVs);
                    this._compiler.set_animateUVs2(this._animateUVs2);
                    this._compiler.set_alphaPremultiplied(this._alphaPremultiplied && this._enableBlending);
                    this._compiler.set_preserveAlpha(this._preserveAlpha && this._enableBlending);
                    this._compiler.set_enableLightFallOff(this._enableLightFallOff);
                    this._compiler.compile()
                },
                createCompiler: function (a) {
                    throw new Wa;
                },
                updateShaderProperties: function () {
                    this._animatableAttributes = this._compiler.get_animatableAttributes();
                    this._animationTargetRegisters = this._compiler.get_animationTargetRegisters();
                    this._vertexCode = this._compiler.get_vertexCode();
                    this._fragmentLightCode = this._compiler.get_fragmentLightCode();
                    this._framentPostLightCode = this._compiler.get_fragmentPostLightCode();
                    this._shadedTarget =
                        this._compiler.get_shadedTarget();
                    this._usingSpecularMethod = this._compiler.get_usingSpecularMethod();
                    this._usesNormals = this._compiler.get_usesNormals();
                    this._needUVAnimation = this._compiler.get_needUVAnimation();
                    this._UVSource = this._compiler.get_UVSource();
                    this._UVTarget = this._compiler.get_UVTarget();
                    this.updateRegisterIndices();
                    this.updateUsedOffsets()
                },
                updateRegisterIndices: function () {
                    this._uvBufferIndex = this._compiler.get_uvBufferIndex();
                    this._uvTransformIndex = this._compiler.get_uvTransformIndex();
                    this._uvTransformIndex2 = this._compiler.get_uvTransformIndex2();
                    this._secondaryUVBufferIndex = this._compiler.get_secondaryUVBufferIndex();
                    this._normalBufferIndex = this._compiler.get_normalBufferIndex();
                    this._tangentBufferIndex = this._compiler.get_tangentBufferIndex();
                    this._lightFragmentConstantIndex = this._compiler.get_lightFragmentConstantIndex();
                    this._cameraPositionIndex = this._compiler.get_cameraPositionIndex();
                    this._commonsDataIndex = this._compiler.get_commonsDataIndex();
                    this._sceneMatrixIndex = this._compiler.get_sceneMatrixIndex();
                    this._sceneNormalMatrixIndex = this._compiler.get_sceneNormalMatrixIndex();
                    this._probeWeightsIndex = this._compiler.get_probeWeightsIndex();
                    this._lightProbeDiffuseIndices = this._compiler.get_lightProbeDiffuseIndices();
                    this._lightProbeSpecularIndices = this._compiler.get_lightProbeSpecularIndices()
                },
                set_preserveAlpha: function (a) {
                    if (this._preserveAlpha == a) return a;
                    this._preserveAlpha = a;
                    this.invalidateShaderProgram();
                    return a
                },
                set_mipmap: function (a) {
                    if (this._mipmap == a) return a;
                    ob.prototype.set_mipmap.call(this,
                        a);
                    return a
                },
                set_anisotropy: function (a) {
                    if (this._anisotropy == a) return a;
                    ob.prototype.set_anisotropy.call(this, a);
                    return a
                },
                get_diffuseMethod: function () {
                    return this._methodSetup.get_diffuseMethod()
                },
                get_specularMethod: function () {
                    return this._methodSetup.get_specularMethod()
                },
                init: function () {
                    this._methodSetup = new fi;
                    this._methodSetup.addEventListener("ShaderInvalidated", p(this, this.onShaderInvalidated))
                },
                invalidateShaderProgram: function (a) {
                    null == a && (a = !0);
                    var b = this._passes;
                    this._passes = D.toObjectVector(null);
                    null != this._methodSetup && this.addPassesFromMethods();
                    if (null == b || this._passes.get_length() != b.get_length()) this._passesDirty = !0;
                    else {
                        for (var c = 0, d = this._passes.get_length(); c < d;) {
                            var e = c++;
                            if (this._passes.get(e) != b.get(e)) {
                                this._passesDirty = !0;
                                return
                            }
                        }
                        ob.prototype.invalidateShaderProgram.call(this, a)
                    }
                },
                addPassesFromMethods: function () {
                    null != this._methodSetup._normalMethod && this._methodSetup._normalMethod.get_hasOutput() && this.addPasses(this._methodSetup._normalMethod.get_passes());
                    null != this._methodSetup._ambientMethod &&
                    this.addPasses(this._methodSetup._ambientMethod.get_passes());
                    null != this._methodSetup._shadowMethod && this.addPasses(this._methodSetup._shadowMethod.get_passes());
                    null != this._methodSetup._diffuseMethod && this.addPasses(this._methodSetup._diffuseMethod.get_passes());
                    null != this._methodSetup._specularMethod && this.addPasses(this._methodSetup._specularMethod.get_passes())
                },
                addPasses: function (a) {
                    if (null != a)
                        for (var b = 0, c = a.get_length(); b < c;) {
                            var d = b++;
                            a.get(d).set_material(this.get_material());
                            a.get(d).set_lightPicker(this._lightPicker);
                            this._passes.push(a.get(d))
                        }
                },
                initUVTransformData: function () {
                    this._vertexConstantData.set(this._uvTransformIndex, 1);
                    this._vertexConstantData.set(this._uvTransformIndex + 1, 0);
                    this._vertexConstantData.set(this._uvTransformIndex + 2, 0);
                    this._vertexConstantData.set(this._uvTransformIndex + 3, 0);
                    this._vertexConstantData.set(this._uvTransformIndex + 4, 0);
                    this._vertexConstantData.set(this._uvTransformIndex + 5, 1);
                    this._vertexConstantData.set(this._uvTransformIndex + 6, 0);
                    this._vertexConstantData.set(this._uvTransformIndex +
                        7, 0)
                },
                initCommonsData: function () {
                    this._fragmentConstantData.set(this._commonsDataIndex, .5);
                    this._fragmentConstantData.set(this._commonsDataIndex + 1, 0);
                    this._fragmentConstantData.set(this._commonsDataIndex + 2, .00392156862745098);
                    this._fragmentConstantData.set(this._commonsDataIndex + 3, 1)
                },
                cleanUp: function () {
                    this._compiler.dispose();
                    this._compiler = null
                },
                updateMethodConstants: function () {
                    null != this._methodSetup._normalMethod && this._methodSetup._normalMethod.initConstants(this._methodSetup._normalMethodVO);
                    null != this._methodSetup._diffuseMethod && this._methodSetup._diffuseMethod.initConstants(this._methodSetup._diffuseMethodVO);
                    null != this._methodSetup._ambientMethod && this._methodSetup._ambientMethod.initConstants(this._methodSetup._ambientMethodVO);
                    this._usingSpecularMethod && this._methodSetup._specularMethod.initConstants(this._methodSetup._specularMethodVO);
                    null != this._methodSetup._shadowMethod && this._methodSetup._shadowMethod.initConstants(this._methodSetup._shadowMethodVO)
                },
                updateLightConstants: function () {
                },
                updateProbes: function (a) {
                },
                onShaderInvalidated: function (a) {
                    this.invalidateShaderProgram()
                },
                getVertexCode: function () {
                    return this._vertexCode
                },
                getFragmentCode: function (a) {
                    return this._fragmentLightCode + a + this._framentPostLightCode
                },
                activate: function (a, b) {
                    ob.prototype.activate.call(this, a, b);
                    this._usesNormals && this._methodSetup._normalMethod.activate(this._methodSetup._normalMethodVO, a);
                    this._methodSetup._ambientMethod.activate(this._methodSetup._ambientMethodVO, a);
                    null != this._methodSetup._shadowMethod &&
                    this._methodSetup._shadowMethod.activate(this._methodSetup._shadowMethodVO, a);
                    this._methodSetup._diffuseMethod.activate(this._methodSetup._diffuseMethodVO, a);
                    this._usingSpecularMethod && this._methodSetup._specularMethod.activate(this._methodSetup._specularMethodVO, a)
                },
                render: function (a, b, c, d) {
                    var e = b._context3D;
                    0 <= this._uvBufferIndex && a.activateUVBuffer(this._uvBufferIndex, b);
                    0 <= this._secondaryUVBufferIndex && a.activateSecondaryUVBuffer(this._secondaryUVBufferIndex, b);
                    0 <= this._normalBufferIndex && a.activateVertexNormalBuffer(this._normalBufferIndex,
                        b);
                    0 <= this._tangentBufferIndex && a.activateVertexTangentBuffer(this._tangentBufferIndex, b);
                    if (this._animateUVs) {
                        var f = a.get_uvTransform();
                        null != f ? (this._vertexConstantData.set(this._uvTransformIndex, f.a), this._vertexConstantData.set(this._uvTransformIndex + 1, f.b), this._vertexConstantData.set(this._uvTransformIndex + 3, f.tx), this._vertexConstantData.set(this._uvTransformIndex + 4, f.c), this._vertexConstantData.set(this._uvTransformIndex + 5, f.d), this._vertexConstantData.set(this._uvTransformIndex + 7, f.ty)) :
                            (this._vertexConstantData.set(this._uvTransformIndex, 1), this._vertexConstantData.set(this._uvTransformIndex + 1, 0), this._vertexConstantData.set(this._uvTransformIndex + 3, 0), this._vertexConstantData.set(this._uvTransformIndex + 4, 0), this._vertexConstantData.set(this._uvTransformIndex + 5, 1), this._vertexConstantData.set(this._uvTransformIndex + 7, 0))
                    }
                    this._animateUVs2 && (f = a.get_uvTransform2(), null != f ? (this._vertexConstantData.set(this._uvTransformIndex2, f.a), this._vertexConstantData.set(this._uvTransformIndex2 +
                        1, f.b), this._vertexConstantData.set(this._uvTransformIndex2 + 3, f.tx), this._vertexConstantData.set(this._uvTransformIndex2 + 4, f.c), this._vertexConstantData.set(this._uvTransformIndex2 + 5, f.d), this._vertexConstantData.set(this._uvTransformIndex2 + 7, f.ty)) : (this._vertexConstantData.set(this._uvTransformIndex2, 1), this._vertexConstantData.set(this._uvTransformIndex2 + 1, 0), this._vertexConstantData.set(this._uvTransformIndex2 + 3, 0), this._vertexConstantData.set(this._uvTransformIndex2 + 4, 0), this._vertexConstantData.set(this._uvTransformIndex2 +
                        5, 1), this._vertexConstantData.set(this._uvTransformIndex2 + 7, 0)));
                    this._ambientLightR = this._ambientLightG = this._ambientLightB = 0;
                    this.usesLights() && this.updateLightConstants();
                    this.usesProbes() && this.updateProbes(b);
                    0 <= this._sceneMatrixIndex ? (a.getRenderSceneTransform(c).copyRawDataTo(this._vertexConstantData, this._sceneMatrixIndex, !0), d.copyRawDataTo(this._vertexConstantData, 0, !0)) : (f = kb.CALCULATION_MATRIX, f.copyFrom(a.getRenderSceneTransform(c)), f.append(d), f.copyRawDataTo(this._vertexConstantData,
                        0, !0));
                    0 <= this._sceneNormalMatrixIndex && a.get_inverseSceneTransform().copyRawDataTo(this._vertexConstantData, this._sceneNormalMatrixIndex, !1);
                    this._usesNormals && this._methodSetup._normalMethod.setRenderState(this._methodSetup._normalMethodVO, a, b, c);
                    d = this._methodSetup._ambientMethod;
                    d._lightAmbientR = this._ambientLightR;
                    d._lightAmbientG = this._ambientLightG;
                    d._lightAmbientB = this._ambientLightB;
                    d.setRenderState(this._methodSetup._ambientMethodVO, a, b, c);
                    null != this._methodSetup._shadowMethod && this._methodSetup._shadowMethod.setRenderState(this._methodSetup._shadowMethodVO,
                        a, b, c);
                    this._methodSetup._diffuseMethod.setRenderState(this._methodSetup._diffuseMethodVO, a, b, c);
                    this._usingSpecularMethod && this._methodSetup._specularMethod.setRenderState(this._methodSetup._specularMethodVO, a, b, c);
                    null != this._methodSetup._colorTransformMethod && this._methodSetup._colorTransformMethod.setRenderState(this._methodSetup._colorTransformMethodVO, a, b, c);
                    d = this._methodSetup._methods;
                    f = 0;
                    for (var h = d.get_length(); f < h;) {
                        var r = f++;
                        r = d.get(r);
                        r.method.setRenderState(r.data, a, b, c)
                    }
                    e.setProgramConstantsFromVector(1,
                        0, this._vertexConstantData, this._numUsedVertexConstants);
                    e.setProgramConstantsFromVector(0, 0, this._fragmentConstantData, this._numUsedFragmentConstants);
                    a.activateVertexBuffer(0, b);
                    b.drawTriangles(a.getIndexBuffer(b), 0, a.get_numTriangles())
                },
                usesProbes: function () {
                    return 0 < this._numLightProbes ? 0 != ((this._diffuseLightSources | this._specularLightSources) & 2) : !1
                },
                usesLights: function () {
                    return 0 < this._numPointLights || 0 < this._numDirectionalLights ? 0 != ((this._diffuseLightSources | this._specularLightSources) & 1) :
                        !1
                },
                deactivate: function (a) {
                    ob.prototype.deactivate.call(this, a);
                    this._usesNormals && this._methodSetup._normalMethod.deactivate(this._methodSetup._normalMethodVO, a);
                    this._methodSetup._ambientMethod.deactivate(this._methodSetup._ambientMethodVO, a);
                    null != this._methodSetup._shadowMethod && this._methodSetup._shadowMethod.deactivate(this._methodSetup._shadowMethodVO, a);
                    this._methodSetup._diffuseMethod.deactivate(this._methodSetup._diffuseMethodVO, a);
                    this._usingSpecularMethod && this._methodSetup._specularMethod.deactivate(this._methodSetup._specularMethodVO,
                        a)
                },
                __class__: Ed,
                __properties__: l(ob.prototype.__properties__, {
                    set_preserveAlpha: "set_preserveAlpha",
                    get_specularMethod: "get_specularMethod",
                    get_diffuseMethod: "get_diffuseMethod"
                })
            });
            var Wh = function () {
                this._alphaThreshold = 0;
                ob.call(this);
                for (var a = [1, 255, 65025, 16581375, .00392156862745098, .00392156862745098, .00392156862745098, 0, 0, 0, 0, 0], b = D.toFloatVector(null), c = 0, d = a.length; c < d;) {
                    var e = c++;
                    b.set(e, a[e])
                }
                this._data = b
            };
            g["away3d.materials.passes.DepthMapPass"] = Wh;
            Wh.__name__ = "away3d.materials.passes.DepthMapPass";
            Wh.__super__ = ob;
            Wh.prototype = l(ob.prototype, {
                get_alphaThreshold: function () {
                    return this._alphaThreshold
                },
                set_alphaMask: function (a) {
                    return this._alphaMask = a
                },
                getVertexCode: function () {
                    var a = "m44 vt1, vt0, vc0\t\t\nmov op, vt1\t\n";
                    0 < this._alphaThreshold ? (this._numUsedTextures = 1, this._numUsedStreams = 2, a += "mov v0, vt1\nmov v1, va1\n") : (this._numUsedTextures = 0, this._numUsedStreams = 1, a += "mov v0, vt1\n");
                    return a
                },
                getFragmentCode: function (a) {
                    a = "div ft2, v0, v0.w\t\t\nmul ft0, fc0, ft2.z\t\nfrc ft0, ft0\t\t\t\nmul ft1, ft0.yzww, fc1\t\n";
                    if (0 < this._alphaThreshold) {
                        var b = this._repeat ? "wrap" : "clamp";
                        var c = this._mipmap && this._alphaMask.get_hasMipMaps();
                        c = this._smooth ? c ? "linear,miplinear" : "linear" : c ? "nearest,mipnearest" : "nearest";
                        switch (this._alphaMask.get_format()) {
                            case 3:
                                var d = "dxt1,";
                                break;
                            case 4:
                                d = "dxt5,";
                                break;
                            default:
                                d = ""
                        }
                        a += "tex ft3, v1, fs0 <2d," + c + "," + d + b + ">\nsub ft3.w, ft3.w, fc2.x\nkil ft3.w\n"
                    }
                    return a + "sub oc, ft0, ft1\t\t\n"
                },
                render: function (a, b, c, d) {
                    0 < this._alphaThreshold && a.activateUVBuffer(1, b);
                    var e = b._context3D,
                        f = kb.CALCULATION_MATRIX;
                    f.copyFrom(a.getRenderSceneTransform(c));
                    f.append(d);
                    e.setProgramConstantsFromMatrix(1, 0, f, !0);
                    a.activateVertexBuffer(0, b);
                    b.drawTriangles(a.getIndexBuffer(b), 0, a.get_numTriangles())
                },
                activate: function (a, b) {
                    var c = a._context3D;
                    ob.prototype.activate.call(this, a, b);
                    0 < this._alphaThreshold ? (c.setTextureAt(0, this._alphaMask.getTextureForStage3D(a)), c.setProgramConstantsFromVector(0, 0, this._data, 3)) : c.setProgramConstantsFromVector(0, 0, this._data, 2)
                },
                __class__: Wh,
                __properties__: l(ob.prototype.__properties__, {
                    set_alphaMask: "set_alphaMask",
                    get_alphaThreshold: "get_alphaThreshold"
                })
            });
            var Xh = function () {
                ob.call(this);
                for (var a = [1, 255, 65025, 16581375, .00392156862745098, .00392156862745098, .00392156862745098, 0, 0, 0, 0, 0], b = D.toFloatVector(null), c = 0, d = a.length; c < d;) {
                    var e = c++;
                    b.set(e, a[e])
                }
                this._fragmentData = b;
                this._vertexData = D.toFloatVector(null, 4, !0);
                this._vertexData.set(3, 1);
                this._numUsedVertexConstants = 9
            };
            g["away3d.materials.passes.DistanceMapPass"] = Xh;
            Xh.__name__ = "away3d.materials.passes.DistanceMapPass";
            Xh.__super__ = ob;
            Xh.prototype = l(ob.prototype, {
                set_alphaMask: function (a) {
                    return this._alphaMask = a
                },
                getVertexCode: function () {
                    var a = "m44 op, vt0, vc0\t\t\nm44 vt1, vt0, vc5\t\t\nsub v0, vt1, vc9\t\t\n";
                    0 < this._alphaThreshold ? (a += "mov v1, va1\n", this._numUsedTextures = 1, this._numUsedStreams = 2) : (this._numUsedTextures = 0, this._numUsedStreams = 1);
                    return a
                },
                getFragmentCode: function (a) {
                    a = this._repeat ? "wrap" : "clamp";
                    var b = this._smooth ? this._mipmap ? "linear,miplinear" : "linear" : this._mipmap ? "nearest,mipnearest" : "nearest";
                    var c = "dp3 ft2.z, v0.xyz, v0.xyz\t\nmul ft0, fc0, ft2.z\t\nfrc ft0, ft0\t\t\t\nmul ft1, ft0.yzww, fc1\t\n";
                    if (0 < this._alphaThreshold) {
                        switch (this._alphaMask.get_format()) {
                            case 3:
                                var d = "dxt1,";
                                break;
                            case 4:
                                d = "dxt5,";
                                break;
                            default:
                                d = ""
                        }
                        c += "tex ft3, v1, fs0 <2d," + b + "," + d + a + ">\nsub ft3.w, ft3.w, fc2.x\nkil ft3.w\n"
                    }
                    return c + "sub oc, ft0, ft1\t\t\n"
                },
                render: function (a, b, c, d) {
                    var e = b._context3D,
                        f = c.get_scenePosition();
                    this._vertexData.set(0, f.x);
                    this._vertexData.set(1, f.y);
                    this._vertexData.set(2, f.z);
                    this._vertexData.set(3,
                        1);
                    c = a.getRenderSceneTransform(c);
                    e.setProgramConstantsFromMatrix(1, 5, c, !0);
                    e.setProgramConstantsFromVector(1, 9, this._vertexData, 1);
                    0 < this._alphaThreshold && a.activateUVBuffer(1, b);
                    f = kb.CALCULATION_MATRIX;
                    f.copyFrom(c);
                    f.append(d);
                    e.setProgramConstantsFromMatrix(1, 0, f, !0);
                    a.activateVertexBuffer(0, b);
                    b.drawTriangles(a.getIndexBuffer(b), 0, a.get_numTriangles())
                },
                activate: function (a, b) {
                    var c = a._context3D;
                    ob.prototype.activate.call(this, a, b);
                    b = b.get_lens().get_far();
                    b = 1 / (2 * b * b);
                    this._fragmentData.set(0,
                        b);
                    this._fragmentData.set(1, 255 * b);
                    this._fragmentData.set(2, 65025 * b);
                    this._fragmentData.set(3, 16581375 * b);
                    0 < this._alphaThreshold ? (c.setTextureAt(0, this._alphaMask.getTextureForStage3D(a)), c.setProgramConstantsFromVector(0, 0, this._fragmentData, 3)) : c.setProgramConstantsFromVector(0, 0, this._fragmentData, 2)
                },
                __class__: Xh,
                __properties__: l(ob.prototype.__properties__, {
                    set_alphaMask: "set_alphaMask"
                })
            });
            var Ie = function (a) {
                this._constants = D.toFloatVector(null, 4, !0);
                this._calcMatrix = new xb;
                this._thickness =
                    a;
                this._constants.set(1, .00392156862745098);
                ob.call(this)
            };
            g["away3d.materials.passes.SegmentPass"] = Ie;
            Ie.__name__ = "away3d.materials.passes.SegmentPass";
            Ie.__super__ = ob;
            Ie.prototype = l(ob.prototype, {
                getVertexCode: function () {
                    return "m44 vt0, va0, vc8\t\t\t\nm44 vt1, va1, vc8\t\t\t\nsub vt2, vt1, vt0 \t\t\t\nslt vt5.x, vt0.z, vc7.z\t\t\t\nsub vt5.y, vc5.x, vt5.x\t\t\t\nadd vt4.x, vt0.z, vc7.z\t\t\t\nsub vt4.y, vt0.z, vt1.z\t\t\t\nseq vt4.z, vt4.y vc6.x\t\t\t\nadd vt4.y, vt4.y, vt4.z\t\t\t\ndiv vt4.z, vt4.x, vt4.y\t\t\t\nmul vt4.xyz, vt4.zzz, vt2.xyz\t\nadd vt3.xyz, vt0.xyz, vt4.xyz\t\nmov vt3.w, vc5.x\t\t\t\nmul vt0, vt0, vt5.yyyy\t\t\t\nmul vt3, vt3, vt5.xxxx\t\t\t\nadd vt0, vt0, vt3\t\t\t\t\nsub vt2, vt1, vt0 \t\t\t\nnrm vt2.xyz, vt2.xyz\t\t\t\nnrm vt5.xyz, vt0.xyz\t\t\t\nmov vt5.w, vc5.x\t\t\t\t\ncrs vt3.xyz, vt2, vt5\t\t\t\nnrm vt3.xyz, vt3.xyz\t\t\t\nmul vt3.xyz, vt3.xyz, va2.xxx\t\nmov vt3.w, vc5.x\t\t\t\ndp3 vt4.x, vt0, vc6\t\t\t\nmul vt4.x, vt4.x, vc7.x\t\t\t\nmul vt3.xyz, vt3.xyz, vt4.xxx\t\nadd vt0.xyz, vt0.xyz, vt3.xyz\t\nm44 op, vt0, vc0\t\t\t\nmov v0, va3\t\t\t\t\n"
                },
                getFragmentCode: function (a) {
                    return "mov oc, v0\n"
                },
                render: function (a, b, c, d) {
                    d = b._context3D;
                    this._calcMatrix.copyFrom(a.get_sourceEntity().get_sceneTransform());
                    this._calcMatrix.append(c.get_inverseSceneTransform());
                    c = T.__cast(a, fd).get_subSetCount();
                    if (T.__cast(a, fd).get_hasData())
                        for (var e = 0; e < c;) {
                            var f = e++;
                            a.activateVertexBuffer(f, b);
                            d.setProgramConstantsFromMatrix(1, 8, this._calcMatrix, !0);
                            b.drawTriangles(a.getIndexBuffer(b), 0, a.get_numTriangles())
                        }
                },
                activate: function (a, b) {
                    var c = a._context3D;
                    ob.prototype.activate.call(this,
                        a, b);
                    null != a.get_scissorRect() ? this._constants.set(0, this._thickness / Math.min(a.get_scissorRect().width, a.get_scissorRect().height)) : this._constants.set(0, this._thickness / Math.min(a.get_width(), a.get_height()));
                    this._constants.set(2, b.get_lens().get_near());
                    c.setProgramConstantsFromVector(1, 5, Ie.ONE_VECTOR);
                    c.setProgramConstantsFromVector(1, 6, Ie.FRONT_VECTOR);
                    c.setProgramConstantsFromVector(1, 7, this._constants);
                    null == a.get_renderTarget() ? c.setProgramConstantsFromMatrix(1, 0, b.get_lens().get_matrix(),
                        !0) : (this._calcMatrix.copyFrom(b.get_lens().get_matrix()), a = qd.getInstance(a), this._calcMatrix.appendScale(a.get_textureRatioX(), a.get_textureRatioY(), 1), c.setProgramConstantsFromMatrix(1, 0, this._calcMatrix, !0))
                },
                deactivate: function (a) {
                    a = a._context3D;
                    a.setVertexBufferAt(0, null);
                    a.setVertexBufferAt(1, null);
                    a.setVertexBufferAt(2, null);
                    a.setVertexBufferAt(3, null)
                },
                __class__: Ie
            });
            var Yh = function (a) {
                this._includeCasters = !0;
                Ed.call(this, a);
                this._needFragmentAnimation = !0
            };
            g["away3d.materials.passes.SuperShaderPass"] =
                Yh;
            Yh.__name__ = "away3d.materials.passes.SuperShaderPass";
            Yh.__super__ = Ed;
            Yh.prototype = l(Ed.prototype, {
                createCompiler: function (a) {
                    return new Zh(a)
                },
                get_colorTransform: function () {
                    return null != this._methodSetup.get_colorTransformMethod() ? this._methodSetup._colorTransformMethod.get_colorTransform() : null
                },
                addMethod: function (a) {
                    this._methodSetup.addMethod(a)
                },
                updateLights: function () {
                    null == this._lightPicker || this._ignoreLights ? this._numLightProbes = this._numDirectionalLights = this._numPointLights = 0 : (this._numPointLights =
                        this._lightPicker.get_numPointLights(), this._numDirectionalLights = this._lightPicker.get_numDirectionalLights(), this._numLightProbes = this._lightPicker.get_numLightProbes(), this._includeCasters && (this._numPointLights += this._lightPicker.get_numCastingPointLights(), this._numDirectionalLights += this._lightPicker.get_numCastingDirectionalLights()));
                    this.invalidateShaderProgram()
                },
                activate: function (a, b) {
                    Ed.prototype.activate.call(this, a, b);
                    null != this._methodSetup._colorTransformMethod && this._methodSetup._colorTransformMethod.activate(this._methodSetup._colorTransformMethodVO,
                        a);
                    for (var c = this._methodSetup._methods, d = 0, e = c.get_length(); d < e;) {
                        var f = d++;
                        f = c.get(f);
                        f.method.activate(f.data, a)
                    }
                    0 <= this._cameraPositionIndex && (a = b.get_scenePosition(), this._vertexConstantData.set(this._cameraPositionIndex, a.x), this._vertexConstantData.set(this._cameraPositionIndex + 1, a.y), this._vertexConstantData.set(this._cameraPositionIndex + 2, a.z))
                },
                deactivate: function (a) {
                    Ed.prototype.deactivate.call(this, a);
                    null != this._methodSetup._colorTransformMethod && this._methodSetup._colorTransformMethod.deactivate(this._methodSetup._colorTransformMethodVO,
                        a);
                    for (var b, c = this._methodSetup._methods, d = 0, e = c.get_length(); d < e;) b = d++, b = c.get(b), b.method.deactivate(b.data, a)
                },
                addPassesFromMethods: function () {
                    Ed.prototype.addPassesFromMethods.call(this);
                    null != this._methodSetup._colorTransformMethod && this.addPasses(this._methodSetup._colorTransformMethod.get_passes());
                    for (var a = this._methodSetup._methods, b = 0, c = a.get_length(); b < c;) {
                        var d = b++;
                        this.addPasses(a.get(d).method.get_passes())
                    }
                },
                usesProbesForSpecular: function () {
                    return 0 < this._numLightProbes ? 0 != (this._specularLightSources &
                        2) : !1
                },
                usesProbesForDiffuse: function () {
                    return 0 < this._numLightProbes ? 0 != (this._diffuseLightSources & 2) : !1
                },
                updateMethodConstants: function () {
                    Ed.prototype.updateMethodConstants.call(this);
                    null != this._methodSetup._colorTransformMethod && this._methodSetup._colorTransformMethod.initConstants(this._methodSetup._colorTransformMethodVO);
                    for (var a = this._methodSetup._methods, b = 0, c = a.get_length(); b < c;) {
                        var d = b++;
                        a.get(d).method.initConstants(a.get(d).data)
                    }
                },
                updateLightConstants: function () {
                    var a = 0;
                    for (var b = this._includeCasters ?
                        2 : 1, c = this._lightFragmentConstantIndex, d = 0, e = b; d < e;) {
                        var f = d++;
                        var h = 0 != f ? this._lightPicker.get_castingDirectionalLights() : this._lightPicker.get_directionalLights();
                        var r = h.get_length();
                        a += r;
                        for (f = 0; f < r;) {
                            var m = f++;
                            var C = h.get(m);
                            m = C.get_sceneDirection();
                            this._ambientLightR += C._ambientR;
                            this._ambientLightG += C._ambientG;
                            this._ambientLightB += C._ambientB;
                            this._fragmentConstantData.set(c++, -m.x);
                            this._fragmentConstantData.set(c++, -m.y);
                            this._fragmentConstantData.set(c++, -m.z);
                            this._fragmentConstantData.set(c++,
                                1);
                            this._fragmentConstantData.set(c++, C._diffuseR);
                            this._fragmentConstantData.set(c++, C._diffuseG);
                            this._fragmentConstantData.set(c++, C._diffuseB);
                            this._fragmentConstantData.set(c++, 1);
                            this._fragmentConstantData.set(c++, C._specularR);
                            this._fragmentConstantData.set(c++, C._specularG);
                            this._fragmentConstantData.set(c++, C._specularB);
                            this._fragmentConstantData.set(c++, 1)
                        }
                    }
                    if (this._numDirectionalLights > a)
                        for (a = c + 12 * (this._numDirectionalLights - a); J.gt(a, c);) this._fragmentConstantData.set(c++, 0);
                    d = a = 0;
                    for (e =
                             b; d < e;)
                        for (f = d++, b = 0 != f ? this._lightPicker.get_castingPointLights() : this._lightPicker.get_pointLights(), r = b.get_length(), f = 0; f < r;) m = f++, h = b.get(m), m = h.get_scenePosition(), this._ambientLightR += h._ambientR, this._ambientLightG += h._ambientG, this._ambientLightB += h._ambientB, this._fragmentConstantData.set(c++, m.x), this._fragmentConstantData.set(c++, m.y), this._fragmentConstantData.set(c++, m.z), this._fragmentConstantData.set(c++, 1), this._fragmentConstantData.set(c++, h._diffuseR), this._fragmentConstantData.set(c++,
                            h._diffuseG), this._fragmentConstantData.set(c++, h._diffuseB), this._fragmentConstantData.set(c++, h._radius * h._radius), this._fragmentConstantData.set(c++, h._specularR), this._fragmentConstantData.set(c++, h._specularG), this._fragmentConstantData.set(c++, h._specularB), this._fragmentConstantData.set(c++, h._fallOffFactor);
                    if (this._numPointLights > a)
                        for (a = c + 12 * (a - this._numPointLights); J.gt(a, c);) this._fragmentConstantData.set(c, 0), ++c
                },
                updateProbes: function (a) {
                    var b = this._lightPicker.get_lightProbes(),
                        c = this._lightPicker.get_lightProbeWeights(),
                        d = b.get_length(),
                        e = this.usesProbesForDiffuse(),
                        f = null != this._methodSetup._specularMethod && this.usesProbesForSpecular(),
                        h = a._context3D;
                    if (e || f) {
                        for (var r = 0; r < d;) {
                            var m = r++;
                            var C = b.get(m);
                            e && h.setTextureAt(this._lightProbeDiffuseIndices.get(m), C.get_diffuseMap().getTextureForStage3D(a));
                            f && h.setTextureAt(this._lightProbeSpecularIndices.get(m), C.get_specularMap().getTextureForStage3D(a))
                        }
                        this._fragmentConstantData.set(this._probeWeightsIndex, c.get(0));
                        this._fragmentConstantData.set(this._probeWeightsIndex +
                            1, c.get(1));
                        this._fragmentConstantData.set(this._probeWeightsIndex + 2, c.get(2));
                        this._fragmentConstantData.set(this._probeWeightsIndex + 3, c.get(3))
                    }
                },
                __class__: Yh,
                __properties__: l(Ed.prototype.__properties__, {
                    get_colorTransform: "get_colorTransform"
                })
            });
            var Pa = function () {
            };
            g["away3d.materials.utils.DefaultMaterialManager"] = Pa;
            Pa.__name__ = "away3d.materials.utils.DefaultMaterialManager";
            Pa.getDefaultMaterial = function (a) {
                null == Pa._defaultTexture && Pa.createDefaultTexture();
                null == Pa._defaultMaterial && Pa.createDefaultMaterial();
                return Pa._defaultMaterial
            };
            Pa.createDefaultTexture = function () {
                Pa._defaultTextureBitmapData = new mb(8, 8, !1, 0);
                Pa._defaultTextureBitmapData.setPixel(0, 1, 16777215);
                Pa._defaultTextureBitmapData.setPixel(0, 3, 16777215);
                Pa._defaultTextureBitmapData.setPixel(0, 5, 16777215);
                Pa._defaultTextureBitmapData.setPixel(0, 7, 16777215);
                Pa._defaultTextureBitmapData.setPixel(1, 0, 16777215);
                Pa._defaultTextureBitmapData.setPixel(1, 2, 16777215);
                Pa._defaultTextureBitmapData.setPixel(1, 4, 16777215);
                Pa._defaultTextureBitmapData.setPixel(1,
                    6, 16777215);
                Pa._defaultTextureBitmapData.setPixel(2, 1, 16777215);
                Pa._defaultTextureBitmapData.setPixel(2, 3, 16777215);
                Pa._defaultTextureBitmapData.setPixel(2, 5, 16777215);
                Pa._defaultTextureBitmapData.setPixel(2, 7, 16777215);
                Pa._defaultTextureBitmapData.setPixel(3, 0, 16777215);
                Pa._defaultTextureBitmapData.setPixel(3, 2, 16777215);
                Pa._defaultTextureBitmapData.setPixel(3, 4, 16777215);
                Pa._defaultTextureBitmapData.setPixel(3, 6, 16777215);
                Pa._defaultTextureBitmapData.setPixel(4, 1, 16777215);
                Pa._defaultTextureBitmapData.setPixel(4,
                    3, 16777215);
                Pa._defaultTextureBitmapData.setPixel(4, 5, 16777215);
                Pa._defaultTextureBitmapData.setPixel(4, 7, 16777215);
                Pa._defaultTextureBitmapData.setPixel(5, 0, 16777215);
                Pa._defaultTextureBitmapData.setPixel(5, 2, 16777215);
                Pa._defaultTextureBitmapData.setPixel(5, 4, 16777215);
                Pa._defaultTextureBitmapData.setPixel(5, 6, 16777215);
                Pa._defaultTextureBitmapData.setPixel(6, 1, 16777215);
                Pa._defaultTextureBitmapData.setPixel(6, 3, 16777215);
                Pa._defaultTextureBitmapData.setPixel(6, 5, 16777215);
                Pa._defaultTextureBitmapData.setPixel(6,
                    7, 16777215);
                Pa._defaultTextureBitmapData.setPixel(7, 0, 16777215);
                Pa._defaultTextureBitmapData.setPixel(7, 2, 16777215);
                Pa._defaultTextureBitmapData.setPixel(7, 4, 16777215);
                Pa._defaultTextureBitmapData.setPixel(7, 6, 16777215);
                Pa._defaultTexture = new Ob(Pa._defaultTextureBitmapData);
                Pa._defaultTexture.set_name("defaultTexture")
            };
            Pa.createDefaultMaterial = function () {
                Pa._defaultMaterial = new ke(Pa._defaultTexture);
                Pa._defaultMaterial.set_mipmap(!1);
                Pa._defaultMaterial.set_smooth(!1);
                Pa._defaultMaterial.set_name("defaultMaterial")
            };
            var dc = function () {
            };
            g["away3d.materials.utils.MipmapGenerator"] = dc;
            dc.__name__ = "away3d.materials.utils.MipmapGenerator";
            dc.generateMipMaps = function (a, b, c, d, e) {
                null == e && (e = -1);
                null == d && (d = !1);
                var f = a.width,
                    h = a.height,
                    r = 0,
                    m = null != c;
                null == c && (c = new mb(f, h, d));
                dc._rect.width = J.toFloat(f);
                for (dc._rect.height = J.toFloat(h); J.gte(f, 1) || J.gte(h, 1);) {
                    d && c.fillRect(dc._rect, 0);
                    dc._matrix.a = dc._rect.width / a.width;
                    dc._matrix.d = dc._rect.height / a.height;
                    c.draw(a, dc._matrix, null, null, null, !0);
                    b instanceof Je ? T.__cast(b,
                        Je).uploadFromBitmapData(c, r++) : T.__cast(b, Hf).uploadFromBitmapData(c, e, r++);
                    f >>>= 1;
                    h >>>= 1;
                    var C = J.gt(f, 1) ? J.toFloat(f) : 1;
                    dc._rect.width = C;
                    C = J.gt(h, 1) ? J.toFloat(h) : 1;
                    dc._rect.height = C
                }
                m || c.dispose()
            };
            var le = function () {
                this._geomDirty = this._uvDirty = !0;
                Ca.call(this);
                this._subGeometry = new Bb;
                this._subGeometry.set_autoGenerateDummyUVs(!1);
                this.addSubGeometry(this._subGeometry)
            };
            g["away3d.primitives.PrimitiveBase"] = le;
            le.__name__ = "away3d.primitives.PrimitiveBase";
            le.__super__ = Ca;
            le.prototype = l(Ca.prototype, {
                get_subGeometries: function () {
                    this._geomDirty && this.updateGeometry();
                    this._uvDirty && this.updateUVs();
                    return Ca.prototype.get_subGeometries.call(this)
                },
                applyTransformation: function (a) {
                    this._geomDirty && this.updateGeometry();
                    Ca.prototype.applyTransformation.call(this, a)
                },
                buildGeometry: function (a) {
                    throw new Wa;
                },
                buildUVs: function (a) {
                    throw new Wa;
                },
                invalidateGeometry: function () {
                    this._geomDirty = !0
                },
                updateGeometry: function () {
                    this.buildGeometry(this._subGeometry);
                    this._geomDirty = !1
                },
                updateUVs: function () {
                    this.buildUVs(this._subGeometry);
                    this._uvDirty = !1
                },
                validate: function () {
                    this._geomDirty && this.updateGeometry();
                    this._uvDirty && this.updateUVs()
                },
                __class__: le
            });
            var jf = function (a, b, c, d, e, f, h, r, m) {
                null == m && (m = !0);
                null == r && (r = !0);
                null == h && (h = !0);
                null == f && (f = !0);
                null == e && (e = 1);
                null == d && (d = 16);
                null == c && (c = 100);
                null == b && (b = 50);
                null == a && (a = 50);
                le.call(this);
                this._topRadius = a;
                this._bottomRadius = b;
                this._height = c;
                this._segmentsW = d;
                this._segmentsH = e;
                this._topClosed = f;
                this._bottomClosed = h;
                this._surfaceClosed = r;
                this._yUp = m
            };
            g["away3d.primitives.CylinderGeometry"] =
                jf;
            jf.__name__ = "away3d.primitives.CylinderGeometry";
            jf.__super__ = le;
            jf.prototype = l(le.prototype, {
                addVertex: function (a, b, c, d, e, f, h, r, m) {
                    var C = this._vertexOffset + this._nextVertexIndex * this._stride;
                    this._rawData.set(C++, a);
                    this._rawData.set(C++, b);
                    this._rawData.set(C++, c);
                    this._rawData.set(C++, d);
                    this._rawData.set(C++, e);
                    this._rawData.set(C++, f);
                    this._rawData.set(C++, h);
                    this._rawData.set(C++, r);
                    this._rawData.set(C++, m);
                    this._nextVertexIndex++
                },
                addTriangleClockWise: function (a, b, c) {
                    this._rawIndices.set(this._currentIndex++,
                        a);
                    this._rawIndices.set(this._currentIndex++, b);
                    this._rawIndices.set(this._currentIndex++, c);
                    this._currentTriangleIndex++
                },
                buildGeometry: function (a) {
                    var b;
                    var c = b = 0;
                    this._stride = a.get_vertexStride();
                    this._vertexOffset = a.get_vertexOffset();
                    this._currentTriangleIndex = this._currentIndex = this._nextVertexIndex = this._numVertices = 0;
                    this._surfaceClosed && (this._numVertices += (this._segmentsH + 1) * (this._segmentsW + 1), b += this._segmentsH * this._segmentsW * 2);
                    this._topClosed && (this._numVertices += 2 * (this._segmentsW +
                        1), b += this._segmentsW);
                    this._bottomClosed && (this._numVertices += 2 * (this._segmentsW + 1), b += this._segmentsW);
                    this._numVertices == a.get_numVertices() ? (this._rawData = a.get_vertexData(), this._rawIndices = a.get_indexData(), null == this._rawIndices && (this._rawIndices = D.toIntVector(null, 3 * b, !0))) : (this._rawData = D.toFloatVector(null, this._numVertices * this._stride, !0), this._rawIndices = D.toIntVector(null, 3 * b, !0));
                    var d = 2 * Math.PI / this._segmentsW;
                    if (this._topClosed && 0 < this._topRadius) {
                        var e = -.5 * this._height;
                        for (var f =
                            0, h = this._segmentsW + 1; f < h;) {
                            var r = f++;
                            if (this._yUp) {
                                var m = 1;
                                var C = 0;
                                var g = -e;
                                var k = 0
                            } else m = 0, C = -1, g = 0, k = e;
                            this.addVertex(0, g, k, 0, m, C, 1, 0, 0);
                            g = r * d;
                            var q = this._topRadius * Math.cos(g);
                            k = this._topRadius * Math.sin(g);
                            this._yUp ? g = -e : (g = k, k = e);
                            r == this._segmentsW ? this.addVertex(this._rawData.get(c + this._stride), this._rawData.get(c + this._stride + 1), this._rawData.get(c + this._stride + 2), 0, m, C, 1, 0, 0) : this.addVertex(q, g, k, 0, m, C, 1, 0, 0);
                            0 < r && this.addTriangleClockWise(this._nextVertexIndex - 1, this._nextVertexIndex - 3,
                                this._nextVertexIndex - 2)
                        }
                    }
                    if (this._bottomClosed && 0 < this._bottomRadius)
                        for (e = .5 * this._height, c = this._vertexOffset + this._nextVertexIndex * this._stride, f = 0, h = this._segmentsW + 1; f < h;) r = f++, this._yUp ? (m = -1, C = 0, g = -e, k = 0) : (m = 0, C = 1, g = 0, k = e), this.addVertex(0, g, k, 0, m, C, 1, 0, 0), g = r * d, q = this._bottomRadius * Math.cos(g), k = this._bottomRadius * Math.sin(g), this._yUp ? g = -e : (g = k, k = e), r == this._segmentsW ? this.addVertex(q, this._rawData.get(c + 1), this._rawData.get(c + 2), 0, m, C, 1, 0, 0) : this.addVertex(q, g, k, 0, m, C, 1, 0, 0), 0 < r && this.addTriangleClockWise(this._nextVertexIndex -
                            2, this._nextVertexIndex - 3, this._nextVertexIndex - 1);
                    c = this._bottomRadius - this._topRadius;
                    b = c / this._height;
                    var n = 0 == b ? 1 : this._height / c;
                    if (this._surfaceClosed)
                        for (f = 0, h = this._segmentsH + 1; f < h;) {
                            var l = f++;
                            var p = this._topRadius - l / this._segmentsH * (this._topRadius - this._bottomRadius);
                            e = -(this._height / 2) + l / this._segmentsH * this._height;
                            c = this._vertexOffset + this._nextVertexIndex * this._stride;
                            for (var y = 0, v = this._segmentsW + 1; y < v;) {
                                r = y++;
                                g = r * d;
                                q = p * Math.cos(g);
                                k = p * Math.sin(g);
                                var t = n * Math.cos(g);
                                var B = n * Math.sin(g);
                                if (this._yUp) {
                                    m = 0;
                                    C = -t;
                                    g = -e;
                                    var E = b;
                                    var z = B
                                } else m = -t, C = 0, g = k, k = e, E = B, z = b;
                                r == this._segmentsW ? this.addVertex(this._rawData.get(c), this._rawData.get(c + 1), this._rawData.get(c + 2), t, b, B, B, m, C) : this.addVertex(q, g, k, t, E, z, -B, m, C);
                                0 < r && 0 < l && (r = this._nextVertexIndex - 1, q = this._nextVertexIndex - 2, m = q - this._segmentsW - 1, C = r - this._segmentsW - 1, this.addTriangleClockWise(r, q, m), this.addTriangleClockWise(r, m, C))
                            }
                        }
                    a.updateData(this._rawData);
                    a.updateIndexData(this._rawIndices)
                },
                buildUVs: function (a) {
                    var b = a.get_UVStride(),
                        c = b - 2;
                    b *= this._numVertices;
                    null != a.get_UVData() && b == a.get_UVData().get_length() ? b = a.get_UVData() : (b = D.toFloatVector(null, b, !0), this.invalidateGeometry());
                    var d = 2 * Math.PI / this._segmentsW;
                    var e = a.get_UVOffset();
                    if (this._topClosed)
                        for (var f = 0, h = this._segmentsW + 1; f < h;) {
                            var r = f++;
                            var m = r * d;
                            r = .5 + .5 * -Math.cos(m);
                            m = .5 + .5 * Math.sin(m);
                            b.set(e++, .5 * a.get_scaleU());
                            b.set(e++, .5 * a.get_scaleV());
                            e += c;
                            b.set(e++, r * a.get_scaleU());
                            b.set(e++, m * a.get_scaleV());
                            e += c
                        }
                    if (this._bottomClosed)
                        for (f = 0, h = this._segmentsW + 1; f <
                        h;) r = f++, m = r * d, r = .5 + .5 * Math.cos(m), m = .5 + .5 * Math.sin(m), b.set(e++, .5 * a.get_scaleU()), b.set(e++, .5 * a.get_scaleV()), e += c, b.set(e++, r * a.get_scaleU()), b.set(e++, m * a.get_scaleV()), e += c;
                    if (this._surfaceClosed)
                        for (f = 0, h = this._segmentsH + 1; f < h;) {
                            d = f++;
                            m = 0;
                            for (var C = this._segmentsW + 1; m < C;) r = m++, b.set(e++, r / this._segmentsW * a.get_scaleU()), b.set(e++, d / this._segmentsH * a.get_scaleV()), e += c
                        }
                    a.updateData(b)
                },
                __class__: jf
            });
            var hi = function (a, b, c, d, e, f) {
                null == f && (f = !0);
                null == e && (e = !0);
                null == d && (d = 1);
                null == c && (c = 16);
                null == b && (b = 100);
                null == a && (a = 50);
                jf.call(this, 0, a, b, c, d, !1, e, !0, f)
            };
            g["away3d.primitives.ConeGeometry"] = hi;
            hi.__name__ = "away3d.primitives.ConeGeometry";
            hi.__super__ = jf;
            hi.prototype = l(jf.prototype, {
                __class__: hi
            });
            var Eg = function (a, b, c, d, e, f) {
                null == f && (f = 1);
                null == e && (e = 3355443);
                null == d && (d = 3355443);
                this._index = this._subSetIndex = -1;
                this._thickness = .5 * f;
                this._start = a;
                this._end = b;
                this.set_startColor(d);
                this.set_endColor(e)
            };
            g["away3d.primitives.data.Segment"] = Eg;
            Eg.__name__ = "away3d.primitives.data.Segment";
            Eg.prototype = {
                updateSegment: function (a, b, c, d, e, f) {
                    null == f && (f = 1);
                    null == e && (e = 3355443);
                    null == d && (d = 3355443);
                    this._start = a;
                    this._end = b;
                    this._startColor != d && this.set_startColor(d);
                    this._endColor != e && this.set_endColor(e);
                    this._thickness = .5 * f;
                    this.update()
                },
                get_start: function () {
                    return this._start
                },
                get_end: function () {
                    return this._end
                },
                get_thickness: function () {
                    return 2 * this._thickness
                },
                set_startColor: function (a) {
                    this._startR = (a >> 16 & 255) / 255;
                    this._startG = (a >> 8 & 255) / 255;
                    this._startB = (a & 255) / 255;
                    this._startColor =
                        a;
                    this.update();
                    return a
                },
                set_endColor: function (a) {
                    this._endR = (a >> 16 & 255) / 255;
                    this._endG = (a >> 8 & 255) / 255;
                    this._endB = (a & 255) / 255;
                    this._endColor = a;
                    this.update();
                    return a
                },
                get_index: function () {
                    return this._index
                },
                set_index: function (a) {
                    return this._index = a
                },
                get_subSetIndex: function () {
                    return this._subSetIndex
                },
                set_subSetIndex: function (a) {
                    return this._subSetIndex = a
                },
                set_segmentsBase: function (a) {
                    return this._segmentsBase = a
                },
                update: function () {
                    null != this._segmentsBase && this._segmentsBase.updateSegment(this)
                },
                __class__: Eg,
                __properties__: {
                    set_endColor: "set_endColor",
                    set_startColor: "set_startColor",
                    set_segmentsBase: "set_segmentsBase",
                    set_subSetIndex: "set_subSetIndex",
                    get_subSetIndex: "get_subSetIndex",
                    set_index: "set_index",
                    get_index: "get_index",
                    get_thickness: "get_thickness",
                    get_end: "get_end",
                    get_start: "get_start"
                }
            };
            var ii = function (a, b, c, d, e) {
                null == e && (e = 1);
                null == d && (d = 3355443);
                null == c && (c = 3355443);
                Eg.call(this, a, b, null, c, d, e)
            };
            g["away3d.primitives.LineSegment"] = ii;
            ii.__name__ = "away3d.primitives.LineSegment";
            ii.__super__ = Eg;
            ii.prototype = l(Eg.prototype, {
                __class__: ii
            });
            var ji = function (a, b, c, d) {
                null == d && (d = !0);
                null == c && (c = 12);
                null == b && (b = 16);
                null == a && (a = 50);
                le.call(this);
                this._radius = a;
                this._segmentsW = b;
                this._segmentsH = c;
                this._yUp = d
            };
            g["away3d.primitives.SphereGeometry"] = ji;
            ji.__name__ = "away3d.primitives.SphereGeometry";
            ji.__super__ = le;
            ji.prototype = l(le.prototype, {
                buildGeometry: function (a) {
                    var b = 0;
                    var c = (this._segmentsH + 1) * (this._segmentsW + 1);
                    var d = a.get_vertexStride();
                    var e = d - 9;
                    c == a.get_numVertices() ? (c =
                        a.get_vertexData(), d = a.get_indexData(), null == d && (d = D.toIntVector(null, (this._segmentsH - 1) * this._segmentsW * 6))) : (c = D.toFloatVector(null, c * d, !0), d = D.toIntVector(null, (this._segmentsH - 1) * this._segmentsW * 6), this.invalidateGeometry());
                    for (var f, h = a.get_vertexOffset(), r, m, C, g, k = 0, q = this._segmentsH + 1; k < q;) {
                        var n = k++;
                        f = h;
                        var l = Math.PI * n / this._segmentsH,
                            p = -this._radius * Math.cos(l);
                        l = this._radius * Math.sin(l);
                        for (var y = 0, v = this._segmentsW + 1; y < v;) {
                            var t = y++;
                            r = 2 * Math.PI * t / this._segmentsW;
                            var B = l * Math.cos(r),
                                E =
                                    l * Math.sin(r),
                                z = 1 / Math.sqrt(B * B + E * E + p * p),
                                x = Math.sqrt(E * E + B * B);
                            this._yUp ? (C = 0, g = .007 < x ? B / x : 0, r = -p, m = E) : (C = .007 < x ? B / x : 0, g = 0, r = E, m = p);
                            t == this._segmentsW ? (c.set(h++, c.get(f)), c.set(h++, c.get(f + 1)), c.set(h++, c.get(f + 2)), c.set(h++, c.get(f + 3) + B * z * .5), c.set(h++, c.get(f + 4) + r * z * .5), c.set(h++, c.get(f + 5) + m * z * .5)) : (c.set(h++, B), c.set(h++, r), c.set(h++, m), c.set(h++, B * z), c.set(h++, r * z), c.set(h++, m * z));
                            c.set(h++, .007 < x ? -E / x : 1);
                            c.set(h++, C);
                            c.set(h++, g);
                            0 < t && 0 < n && (B = (this._segmentsW + 1) * n + t, r = (this._segmentsW + 1) * n +
                                t - 1, m = (this._segmentsW + 1) * (n - 1) + t - 1, t = (this._segmentsW + 1) * (n - 1) + t, n == this._segmentsH ? (c.set(h - 9, c.get(f)), c.set(h - 8, c.get(f + 1)), c.set(h - 7, c.get(f + 2)), d.set(b++, B), d.set(b++, m), d.set(b++, t)) : 1 == n ? (d.set(b++, B), d.set(b++, r), d.set(b++, m)) : (d.set(b++, B), d.set(b++, r), d.set(b++, m), d.set(b++, B), d.set(b++, m), d.set(b++, t)));
                            h += e
                        }
                    }
                    a.updateData(c);
                    a.updateIndexData(d)
                },
                buildUVs: function (a) {
                    var b = a.get_UVStride();
                    var c = (this._segmentsH + 1) * (this._segmentsW + 1) * b;
                    b -= 2;
                    if (null != a.get_UVData() && c == a.get_UVData().get_length()) var d =
                        a.get_UVData();
                    else d = D.toFloatVector(null, c, !0), this.invalidateGeometry();
                    for (var e = a.get_UVOffset(), f = 0, h = this._segmentsH + 1; f < h;) {
                        var r = f++;
                        for (var m = 0, C = this._segmentsW + 1; m < C;) c = m++, d.set(e++, c / this._segmentsW * a.get_scaleU()), d.set(e++, r / this._segmentsH * a.get_scaleV()), e += b
                    }
                    a.updateData(d)
                },
                __class__: ji
            });
            var me = function (a, b) {
                null == b && (b = 1);
                null == a && (a = 16777215);
                this._geomDirty = !0;
                0 >= b && (b = 1);
                this._color = a;
                this._thickness = b;
                this.set_mouseEnabled(this.set_mouseChildren(!1));
                fd.call(this)
            };
            g["away3d.primitives.WireframePrimitiveBase"] =
                me;
            me.__name__ = "away3d.primitives.WireframePrimitiveBase";
            me.__super__ = fd;
            me.prototype = l(fd.prototype, {
                removeAllSegments: function () {
                    fd.prototype.removeAllSegments.call(this)
                },
                get_bounds: function () {
                    this._geomDirty && this.updateGeometry();
                    return fd.prototype.get_bounds.call(this)
                },
                buildGeometry: function () {
                    throw new Wa;
                },
                updateGeometry: function () {
                    this.buildGeometry();
                    this._geomDirty = !1
                },
                updateOrAddSegment: function (a, b, c) {
                    var d = this.getSegment(a);
                    if (null != d) {
                        a = d.get_start();
                        var e = d.get_end();
                        a.x = b.x;
                        a.y =
                            b.y;
                        a.z = b.z;
                        e.x = c.x;
                        e.y = c.y;
                        e.z = c.z;
                        d.updateSegment(a, e, null, this._color, this._color, this._thickness)
                    } else this.addSegment(new ii(b.clone(), c.clone(), this._color, this._color, this._thickness))
                },
                updateMouseChildren: function () {
                    this._ancestorsAllowMouseEnabled = !1
                },
                __class__: me
            });
            var lk = function (a, b, c, d, e) {
                null == e && (e = 1);
                null == d && (d = 16777215);
                null == c && (c = 100);
                null == b && (b = 100);
                null == a && (a = 100);
                me.call(this, d, e);
                this._width = a;
                this._height = b;
                this._depth = c
            };
            g["away3d.primitives.WireframeCube"] = lk;
            lk.__name__ =
                "away3d.primitives.WireframeCube";
            lk.__super__ = me;
            lk.prototype = l(me.prototype, {
                buildGeometry: function () {
                    var a = new Q,
                        b = new Q,
                        c = .5 * this._width,
                        d = .5 * this._height,
                        e = .5 * this._depth;
                    a.x = -c;
                    a.y = d;
                    a.z = -e;
                    b.x = -c;
                    b.y = -d;
                    b.z = -e;
                    this.updateOrAddSegment(0, a, b);
                    a.z = e;
                    b.z = e;
                    this.updateOrAddSegment(1, a, b);
                    a.x = c;
                    b.x = c;
                    this.updateOrAddSegment(2, a, b);
                    a.z = -e;
                    b.z = -e;
                    this.updateOrAddSegment(3, a, b);
                    a.x = -c;
                    a.y = -d;
                    a.z = -e;
                    b.x = c;
                    b.y = -d;
                    b.z = -e;
                    this.updateOrAddSegment(4, a, b);
                    a.y = d;
                    b.y = d;
                    this.updateOrAddSegment(5, a, b);
                    a.z = e;
                    b.z =
                        e;
                    this.updateOrAddSegment(6, a, b);
                    a.y = -d;
                    b.y = -d;
                    this.updateOrAddSegment(7, a, b);
                    a.x = -c;
                    a.y = -d;
                    a.z = -e;
                    b.x = -c;
                    b.y = -d;
                    b.z = e;
                    this.updateOrAddSegment(8, a, b);
                    a.y = d;
                    b.y = d;
                    this.updateOrAddSegment(9, a, b);
                    a.x = c;
                    b.x = c;
                    this.updateOrAddSegment(10, a, b);
                    a.y = -d;
                    b.y = -d;
                    this.updateOrAddSegment(11, a, b)
                },
                __class__: lk
            });
            var mk = function (a, b, c, d, e) {
                null == e && (e = 1);
                null == d && (d = 16777215);
                null == c && (c = 12);
                null == b && (b = 16);
                null == a && (a = 50);
                me.call(this, d, e);
                this._radius = a;
                this._segmentsW = b;
                this._segmentsH = c
            };
            g["away3d.primitives.WireframeSphere"] =
                mk;
            mk.__name__ = "away3d.primitives.WireframeSphere";
            mk.__super__ = me;
            mk.prototype = l(me.prototype, {
                buildGeometry: function () {
                    for (var a = D.toFloatVector(null), b = new Q, c = new Q, d = 0, e = 0, f, h, r, m, C, g = 0, k = this._segmentsH + 1; g < k;) {
                        h = g++;
                        f = Math.PI * h / this._segmentsH;
                        h = -this._radius * Math.cos(f);
                        r = this._radius * Math.sin(f);
                        f = 0;
                        for (var q = this._segmentsW + 1; f < q;) C = f++, m = 2 * Math.PI * C / this._segmentsW, C = r * Math.cos(m), m = r * Math.sin(m), a.set(d++, C), a.set(d++, -h), a.set(d++, m)
                    }
                    g = 1;
                    for (k = this._segmentsH + 1; g < k;)
                        for (h = g++, f = 1, q = this._segmentsH +
                            1; f < q;) C = f++, d = 3 * ((this._segmentsW + 1) * h + C), r = 3 * ((this._segmentsW + 1) * h + C - 1), m = 3 * ((this._segmentsW + 1) * (h - 1) + C - 1), C = 3 * ((this._segmentsW + 1) * (h - 1) + C), h == this._segmentsH ? (b.x = a.get(m), b.y = a.get(m + 1), b.z = a.get(m + 2), c.x = a.get(C), c.y = a.get(C + 1), c.z = a.get(C + 2), this.updateOrAddSegment(e++, b, c), b.x = a.get(d), b.y = a.get(d + 1), b.z = a.get(d + 2)) : 1 == h ? (c.x = a.get(r), c.y = a.get(r + 1), c.z = a.get(r + 2), b.x = a.get(m), b.y = a.get(m + 1), b.z = a.get(m + 2)) : (c.x = a.get(r), c.y = a.get(r + 1), c.z = a.get(r + 2), b.x = a.get(m), b.y = a.get(m + 1), b.z = a.get(m +
                            2), this.updateOrAddSegment(e++, b, c), c.x = a.get(C), c.y = a.get(C + 1), c.z = a.get(C + 2)), this.updateOrAddSegment(e++, b, c)
                },
                __class__: mk
            });
            var id = function () {
                this._hasMipmaps = !0;
                this._format = 1;
                this._textures = D.toObjectVector(null, 8);
                this._dirty = D.toObjectVector(null, 8);
                B.call(this)
            };
            g["away3d.textures.TextureProxyBase"] = id;
            id.__name__ = "away3d.textures.TextureProxyBase";
            id.__interfaces__ = [t];
            id.__super__ = B;
            id.prototype = l(B.prototype, {
                get_hasMipMaps: function () {
                    return this._hasMipmaps
                },
                get_format: function () {
                    return this._format
                },
                get_width: function () {
                    return this._width
                },
                get_height: function () {
                    return this._height
                },
                getTextureForStage3D: function (a) {
                    var b = a._stage3DIndex,
                        c = this._textures.get(b);
                    a = a._context3D;
                    if (null == a) return null;
                    if (null == c || this._dirty.get(b) != a) {
                        var d = this._textures;
                        c = this.createTexture(a);
                        d.set(b, c);
                        this._dirty.set(b, a);
                        this.uploadContent(c)
                    }
                    return c
                },
                uploadContent: function (a) {
                    throw new Wa;
                },
                setSize: function (a, b) {
                    this._width == a && this._height == b || this.invalidateSize();
                    this._width = a;
                    this._height = b
                },
                invalidateContent: function () {
                    this._dirty.set(0,
                        null);
                    this._dirty.set(1, null);
                    this._dirty.set(2, null);
                    this._dirty.set(3, null);
                    this._dirty.set(4, null);
                    this._dirty.set(5, null);
                    this._dirty.set(6, null);
                    this._dirty.set(7, null)
                },
                invalidateSize: function () {
                    var a = this._textures.get(0);
                    null != a && (a.dispose(), this._textures.set(0, null), this._dirty.set(0, null));
                    a = this._textures.get(1);
                    null != a && (a.dispose(), this._textures.set(1, null), this._dirty.set(1, null));
                    a = this._textures.get(2);
                    null != a && (a.dispose(), this._textures.set(2, null), this._dirty.set(2, null));
                    a =
                        this._textures.get(3);
                    null != a && (a.dispose(), this._textures.set(3, null), this._dirty.set(3, null));
                    a = this._textures.get(4);
                    null != a && (a.dispose(), this._textures.set(4, null), this._dirty.set(4, null));
                    a = this._textures.get(5);
                    null != a && (a.dispose(), this._textures.set(5, null), this._dirty.set(5, null));
                    a = this._textures.get(6);
                    null != a && (a.dispose(), this._textures.set(6, null), this._dirty.set(6, null));
                    a = this._textures.get(7);
                    null != a && (a.dispose(), this._textures.set(7, null), this._dirty.set(7, null))
                },
                createTexture: function (a) {
                    throw new Wa;
                },
                dispose: function () {
                    null != this._textures.get(0) && this._textures.get(0).dispose();
                    null != this._textures.get(1) && this._textures.get(1).dispose();
                    null != this._textures.get(2) && this._textures.get(2).dispose();
                    null != this._textures.get(3) && this._textures.get(3).dispose();
                    null != this._textures.get(4) && this._textures.get(4).dispose();
                    null != this._textures.get(5) && this._textures.get(5).dispose();
                    null != this._textures.get(6) && this._textures.get(6).dispose();
                    null != this._textures.get(7) && this._textures.get(7).dispose()
                },
                __class__: id,
                __properties__: l(B.prototype.__properties__, {
                    get_height: "get_height",
                    get_width: "get_width",
                    get_format: "get_format",
                    get_hasMipMaps: "get_hasMipMaps"
                })
            });
            var ne = function () {
                id.call(this)
            };
            g["away3d.textures.Texture2DBase"] = ne;
            ne.__name__ = "away3d.textures.Texture2DBase";
            ne.__super__ = id;
            ne.prototype = l(id.prototype, {
                createTexture: function (a) {
                    return a.createTexture(this._width, this._height, 1, !1)
                },
                __class__: ne
            });
            var Ob = function (a, b) {
                null == b && (b = !0);
                id.call(this);
                this.set_bitmapData(a);
                this._generateMipmaps =
                    this._hasMipmaps = b
            };
            g["away3d.textures.BitmapTexture"] = Ob;
            Ob.__name__ = "away3d.textures.BitmapTexture";
            Ob.__super__ = ne;
            Ob.prototype = l(ne.prototype, {
                set_bitmapData: function (a) {
                    if (a == this._bitmapData) return null;
                    if (!Ud.isBitmapDataValid(a)) throw new Fa("Invalid bitmapData: Width and height must be power of 2 and cannot exceed 2048");
                    this.invalidateContent();
                    this.setSize(a.width, a.height);
                    this._bitmapData = a;
                    this._generateMipmaps && this.getMipMapHolder();
                    return a
                },
                uploadContent: function (a) {
                    this._generateMipmaps ?
                        dc.generateMipMaps(this._bitmapData, a, this._mipMapHolder, !0) : T.__cast(a, Je).uploadFromBitmapData(this._bitmapData, 0)
                },
                getMipMapHolder: function () {
                    var a = this._bitmapData.width,
                        b = this._bitmapData.height;
                    if (null != this._mipMapHolder) {
                        if (this._mipMapHolder.width == a && this._bitmapData.height == b) return;
                        this.freeMipMapHolder()
                    }
                    null == Ob._mipMaps[a] && (Ob._mipMaps[a] = [], Ob._mipMapUses[a] = []);
                    null == Ob._mipMaps[a][b] ? (this._mipMapHolder = Ob._mipMaps[a][b] = new mb(a, b, !0), Ob._mipMapUses[a][b] = 1) : (Ob._mipMapUses[a][b] +=
                        1, this._mipMapHolder = Ob._mipMaps[a][b])
                },
                freeMipMapHolder: function () {
                    var a = this._mipMapHolder.width,
                        b = this._mipMapHolder.height;
                    0 == --Ob._mipMapUses[a][b] && (Ob._mipMaps[a][b].dispose(), Ob._mipMaps[a][b] = null)
                },
                dispose: function () {
                    ne.prototype.dispose.call(this);
                    null != this._mipMapHolder && this.freeMipMapHolder()
                },
                __class__: Ob,
                __properties__: l(ne.prototype.__properties__, {
                    set_bitmapData: "set_bitmapData"
                })
            });
            var Fg = function () {
                id.call(this)
            };
            g["away3d.textures.CubeTextureBase"] = Fg;
            Fg.__name__ = "away3d.textures.CubeTextureBase";
            Fg.__super__ = id;
            Fg.prototype = l(id.prototype, {
                createTexture: function (a) {
                    return a.createCubeTexture(this.get_width(), 1, !1)
                },
                __class__: Fg
            });
            var Vh = function (a) {
                id.call(this);
                this.setSize(a, a)
            };
            g["away3d.textures.RenderCubeTexture"] = Vh;
            Vh.__name__ = "away3d.textures.RenderCubeTexture";
            Vh.__super__ = Fg;
            Vh.prototype = l(Fg.prototype, {
                uploadContent: function (a) {
                    var b = new mb(this._width, this._height, !1, 0);
                    dc.generateMipMaps(b, a, null, !1, 0);
                    dc.generateMipMaps(b, a, null, !1, 1);
                    dc.generateMipMaps(b, a, null, !1, 2);
                    dc.generateMipMaps(b,
                        a, null, !1, 3);
                    dc.generateMipMaps(b, a, null, !1, 4);
                    dc.generateMipMaps(b, a, null, !1, 5);
                    b.dispose()
                },
                createTexture: function (a) {
                    return a.createCubeTexture(this._width, 1, !0)
                },
                __class__: Vh
            });
            var Uh = function (a, b) {
                id.call(this);
                this.setSize(a, b)
            };
            g["away3d.textures.RenderTexture"] = Uh;
            Uh.__name__ = "away3d.textures.RenderTexture";
            Uh.__super__ = ne;
            Uh.prototype = l(ne.prototype, {
                uploadContent: function (a) {
                },
                createTexture: function (a) {
                    return a.createTexture(this.get_width(), this.get_height(), 1, !0)
                },
                __class__: Uh
            });
            var ql =
                function () {
                };
            g["away3d.tools.helpers.ParticleGeometryHelper"] = ql;
            ql.__name__ = "away3d.tools.helpers.ParticleGeometryHelper";
            ql.generateGeometry = function (a, b) {
                for (var c = D.toNullVector(null), d = D.toNullVector(null), e = D.toIntVector(null), f = D.toObjectVector(null), h = D.toObjectVector(null), r = a.get_length(), m, C, g, k, q, n, l, p, y, v = D.toIntVector(null), t = new Q, B = new Q, E = new Q, z = new ba, x = 0, A = r; x < A;) {
                    p = x++;
                    m = a.get(p).get_subGeometries();
                    g = m.get_length();
                    for (var u = 0; u < g;) {
                        q = u++;
                        v.get_length() <= q && (v.push(h.get_length()),
                            c.push(D.toFloatVector(null)), d.push(D.toIntVector(null)), h.push(new Bb), e.push(0));
                        C = m.get(q);
                        65535 < (J.toFloat(C.get_numVertices() + e.get(v.get(q))) | 0) && (v.set(q, h.get_length()), c.push(D.toFloatVector(null)), d.push(D.toIntVector(null)), h.push(new Bb), e.push(0));
                        y = v.get(q);
                        k = c.get(y);
                        q = d.get(y);
                        n = e.get(y);
                        l = h.get(y);
                        var N = new Wj;
                        N.numVertices = C.get_numVertices();
                        N.startVertexIndex = n;
                        N.particleIndex = p;
                        N.subGeometry = l;
                        f.push(N);
                        l = y;
                        y = e;
                        y.set(l, y.get(l) + C.get_numVertices());
                        y = C instanceof Bb ? C : null;
                        if (null !=
                            y)
                            if (l = y.get_numVertices(), y.get_numTriangles(), y = y.get_vertexData(), null != b) {
                                var U = b.get(p);
                                N = U.get_vertexTransform();
                                var I = U.get_invVertexTransform();
                                U = U.get_UVTransform();
                                for (var ma = 0, ca = l; ma < ca;) l = 13 * ma++, t.x = y.get(l), t.y = y.get(l + 1), t.z = y.get(l + 2), B.x = y.get(l + 3), B.y = y.get(l + 4), B.z = y.get(l + 5), E.x = y.get(l + 6), E.y = y.get(l + 7), E.z = y.get(l + 8), z.x = y.get(l + 9), z.y = y.get(l + 10), null != N && (t = N.transformVector(t), B = I.deltaTransformVector(B), E = I.deltaTransformVector(B)), null != U && (z = U.transformPoint(z)), k.push(t.x),
                                    k.push(t.y), k.push(t.z), k.push(B.x), k.push(B.y), k.push(B.z), k.push(E.x), k.push(E.y), k.push(E.z), k.push(z.x), k.push(z.y), k.push(y.get(l + 11)), k.push(y.get(l + 12))
                            } else
                                for (N = 0, I = l; N < I;) l = 13 * N++, k.push(y.get(l)), k.push(y.get(l + 1)), k.push(y.get(l + 2)), k.push(y.get(l + 3)), k.push(y.get(l + 4)), k.push(y.get(l + 5)), k.push(y.get(l + 6)), k.push(y.get(l + 7)), k.push(y.get(l + 8)), k.push(y.get(l + 9)), k.push(y.get(l + 10)), k.push(y.get(l + 11)), k.push(y.get(l + 12));
                        k = C.get_indexData();
                        l = C.get_numTriangles();
                        C = 0;
                        for (y = l; C < y;) l =
                            3 * C++, q.push(k.get(l) + n), q.push(k.get(l + 1) + n), q.push(k.get(l + 2) + n)
                    }
                }
                a = new ug;
                a.particles = f;
                a.numParticles = r;
                r = h.get_length();
                x = 0;
                for (A = r; x < A;) p = x++, l = h.get(p), l.updateData(c.get(p)), l.updateIndexData(d.get(p)), a.addSubGeometry(l);
                return a
            };
            var nk = function () {
            };
            g["away3d.tools.helpers.data.ParticleGeometryTransform"] = nk;
            nk.__name__ = "away3d.tools.helpers.data.ParticleGeometryTransform";
            nk.prototype = {
                set_vertexTransform: function (a) {
                    this._defaultVertexTransform = a;
                    this._defaultInvVertexTransform = a.clone();
                    this._defaultInvVertexTransform.invert();
                    this._defaultInvVertexTransform.transpose();
                    return a
                },
                get_UVTransform: function () {
                    return this._defaultUVTransform
                },
                get_vertexTransform: function () {
                    return this._defaultVertexTransform
                },
                get_invVertexTransform: function () {
                    return this._defaultInvVertexTransform
                },
                __class__: nk,
                __properties__: {
                    get_invVertexTransform: "get_invVertexTransform",
                    get_UVTransform: "get_UVTransform",
                    set_vertexTransform: "set_vertexTransform",
                    get_vertexTransform: "get_vertexTransform"
                }
            };
            var Ud =
                function () {
                };
            g["away3d.tools.utils.TextureUtils"] = Ud;
            Ud.__name__ = "away3d.tools.utils.TextureUtils";
            Ud.isBitmapDataValid = function (a) {
                return null == a ? !0 : Ud.isDimensionValid(a.width) ? Ud.isDimensionValid(a.height) : !1
            };
            Ud.isDimensionValid = function (a) {
                return 1 <= a && 4096 >= a ? Ud.isPowerOfTwo(a) : !1
            };
            Ud.isPowerOfTwo = function (a) {
                return 0 < a ? (a & -a) == a : !1
            };
            Ud.getBestPowerOf2 = function (a) {
                for (var b = 1; b < a;) b <<= 1;
                4096 < b && (b = 4096);
                return b
            };
            var oe = function () {
                this.keyShift = this.keyCtrl = this.isSolid = !1;
                this.rWidth = this.rHeight =
                    0;
                this.update = new ac;
                this.keyEvent = new Gg;
                Ja.call(this)
            };
            g["coogee.Scene"] = oe;
            oe.__name__ = "coogee.Scene";
            oe.__super__ = Ja;
            oe.prototype = l(Ja.prototype, {
                activate: function () {
                    eb.get_tick().add(p(this, this.onUpdate));
                    this.stage.addEventListener("keyDown", p(this, this.onKeyDown));
                    this.stage.addEventListener("keyUp", p(this, this.onKeyUp))
                },
                deactivate: function () {
                    eb.get_tick().remove(p(this, this.onUpdate));
                    this.stage.removeEventListener("keyDown", p(this, this.onKeyDown));
                    this.stage.removeEventListener("keyUp",
                        p(this, this.onKeyUp))
                },
                onEsc: function () {
                    db.quit()
                },
                onKeyDown: function (a) {
                    switch (a.keyCode) {
                        case 15:
                        case 17:
                            this.keyCtrl = !0;
                            break;
                        case 16:
                            this.keyShift = !0;
                            break;
                        case 27:
                            this.onEsc()
                    }
                    this.keyEvent.dispatch(a.keyCode, !0);
                    null == this.stage || this.stage.get_focus() instanceof Ac || a.preventDefault()
                },
                onKeyUp: function (a) {
                    switch (a.keyCode) {
                        case 15:
                        case 17:
                            this.keyCtrl = !1;
                            break;
                        case 16:
                            this.keyShift = !1
                    }
                    this.keyEvent.dispatch(a.keyCode, !1);
                    this.stage.get_focus() instanceof Ac || a.preventDefault()
                },
                setSize: function (a,
                                   b) {
                    this.rWidth = a;
                    this.rHeight = b;
                    this.layout()
                },
                get_width: function () {
                    return this.rWidth
                },
                get_height: function () {
                    return this.rHeight
                },
                layout: function () {
                },
                onUpdate: function (a) {
                    this.update.dispatch(a)
                },
                __hitTest: function (a, b, c, d, e, f) {
                    a = Ja.prototype.__hitTest.call(this, a, b, c, d, e, f);
                    return this.isSolid ? (a || d.push(f), !0) : a
                },
                __class__: oe
            });
            var ka = function () {
                this.valign = "top";
                this.halign = "left";
                this.rWidth = this.rHeight = 0;
                Ja.call(this)
            };
            g["coogee.ui.View"] = ka;
            ka.__name__ = "coogee.ui.View";
            ka.__super__ = Ja;
            ka.prototype = l(Ja.prototype, {
                get_width: function () {
                    return this.rWidth
                },
                set_width: function (a) {
                    this.setSize(a, this.rHeight);
                    return this.rWidth
                },
                get_height: function () {
                    return this.rHeight
                },
                set_height: function (a) {
                    this.setSize(this.rWidth, a);
                    return this.rHeight
                },
                setSize: function (a, b) {
                    this.rWidth = a;
                    this.rHeight = b;
                    this.layout()
                },
                layout: function () {
                },
                add: function (a) {
                    this.addChild(a)
                },
                set_enabled: function (a) {
                    return this.mouseEnabled = this.mouseChildren = a
                },
                __class__: ka,
                __properties__: l(Ja.prototype.__properties__, {
                    set_enabled: "set_enabled"
                })
            });
            var Xd = function () {
                this.click = new Wd;
                ka.call(this);
                this.label = this.createLabel();
                this.addChild(this.label);
                this.set_buttonMode(!0);
                this.addEventListener("click", p(this, this.onClick));
                this.setSize(this.label.get_width() + 10, this.label.get_height() + 10)
            };
            g["coogee.ui.ButtonBase"] = Xd;
            Xd.__name__ = "coogee.ui.ButtonBase";
            Xd.__super__ = ka;
            Xd.prototype = l(ka.prototype, {
                layout: function () {
                    this.get_graphics().clear();
                    this.get_graphics().beginFill(ea.black);
                    this.get_graphics().drawRoundRect(0,
                        0, this.rWidth, this.rHeight, 10);
                    this.label.set_x((this.rWidth - this.label.get_width()) / 2 | 0);
                    this.label.set_y((this.rHeight - this.label.get_height()) / 2 | 0)
                },
                createLabel: function () {
                    return null
                },
                onClick: function (a) {
                    this.click.dispatch()
                },
                __class__: Xd
            });
            var Ke = function (a, b) {
                this.txtLabel = a;
                Xd.call(this);
                null != b && this.click.add(b)
            };
            g["coogee.ui.Button"] = Ke;
            Ke.__name__ = "coogee.ui.Button";
            Ke.__super__ = Xd;
            Ke.prototype = l(Xd.prototype, {
                createLabel: function () {
                    return Nc.get(this.txtLabel,
                        ea.format(ea.uiFont, ea.smallSize, ea.white))
                },
                __class__: Ke
            });
            var Oc = function () {
                this.snap = !0;
                this.margin = this.gap = 10;
                ka.call(this)
            };
            g["coogee.ui.layouts.VBox"] = Oc;
            Oc.__name__ = "coogee.ui.layouts.VBox";
            Oc.__super__ = ka;
            Oc.prototype = l(ka.prototype, {
                layout: function () {
                    for (var a = this.margin, b = 0, c = !1, d = 0, e = this.get_numChildren(); d < e;) {
                        var f = d++;
                        f = this.getChildAt(f);
                        "left" != f.halign && (c = !0);
                        b < f.get_width() && (b = f.get_width());
                        f.set_x(this.margin);
                        f.set_y(a);
                        a += f.get_height() + this.gap;
                        this.snap && (a |= 0)
                    }
                    if (c)
                        for (d = 0, e = this.get_numChildren(); d < e;) switch (f = d++, f = this.getChildAt(f), f.halign) {
                            case "center":
                                f.set_x(this.margin + (b - f.get_width()) / 2);
                                break;
                            case "fill":
                                f.set_width(b);
                                break;
                            case "right":
                                f.set_x(this.margin + (b - f.get_width()))
                        }
                    this.rHeight = a > this.margin ? a - this.gap + this.margin : 2 * this.margin;
                    this.rWidth = b + 2 * this.margin
                },
                add: function (a) {
                    ka.prototype.add.call(this, a);
                    this.layout()
                },
                setMargins: function (a, b) {
                    this.margin = a;
                    this.gap = b
                },
                __class__: Oc
            });
            var Pc = function () {
                Oc.call(this);
                this.setMargins(0, 0);
                this.addEventListener("keyDown", p(this, this.onKeyDown));
                this.addEventListener("focusOut", p(this, this.onFocusOut))
            };
            g["coogee.ui.Form"] = Pc;
            Pc.__name__ = "coogee.ui.Form";
            Pc.__super__ = Oc;
            Pc.prototype = l(Oc.prototype, {
                getTitle: function () {
                    return null
                },
                onShow: function () {
                },
                onHide: function () {
                },
                onKeyDown: function (a) {
                    this.onKey(a.keyCode) && a.stopPropagation()
                },
                onKey: function (a) {
                    switch (a) {
                        case 13:
                            this.onEnter();
                            break;
                        case 27:
                            this.onEsc();
                            break;
                        default:
                            return !1
                    }
                    return !0
                },
                onEsc: function () {
                    this.dialog.hide()
                },
                onEnter: function () {
                },
                onFocusOut: function (a) {
                    null == a.relatedObject && this.stage.set_focus(this)
                },
                __class__: Pc
            });
            var Yd = function (a) {
                Pc.call(this);
                this.buttons = new ki(a);
                this.buttons.click.add(p(this, this.onButton));
                this.addChild(this.buttons)
            };
            g["coogee.ui.ButtonsForm"] = Yd;
            Yd.__name__ = "coogee.ui.ButtonsForm";
            Yd.__super__ = Pc;
            Yd.prototype = l(Pc.prototype, {
                add: function (a) {
                    this.addChild(a);
                    this.addChild(this.buttons);
                    this.layout()
                },
                layout: function () {
                    Pc.prototype.layout.call(this);
                    this.buttons.set_width(this.rWidth);
                    Pc.prototype.layout.call(this)
                },
                onButton: function (a) {
                    this.dialog.hide()
                },
                onEnter: function () {
                    this.onButton("OK")
                },
                onEsc: function () {
                    this.onButton("Cancel")
                },
                __class__: Yd
            });
            var AboutTextBox = function (a, b, c) {
                ka.call(this);
                this.border = Qa.black();
                this.add(this.border);
                this.bg = Qa.white();
                this.add(this.bg);
                this.tf = new Ac;
                this.tf.set_defaultTextFormat(ea.format(ea.uiFont, ea.smallSize, ea.black));
                this.tf.set_selectable(!0);
                this.tf.set_wordWrap(!0);
                //this.tf.set_multiline(!0);
                this.tf.set_autoSize(0);
                this.addChild(this.tf);
                this.setSize(b, c);
                this.setText(a)
            };
            g["coogee.ui.views.AboutTextBox"] = AboutTextBox;
            AboutTextBox.__name__ = "coogee.ui.views.AboutTextBox";
            AboutTextBox.__super__ = ka;
            AboutTextBox.prototype = l(ka.prototype, {
                setText: function (a) {
                    null == a && (a = "");
                    1000 < a.length && (a = a.substr(0, 1000));
                    this.tf.set_text(a);
                    this.layout();
                    return a
                },
                layout: function () {
                    this.border.setSize(this.rWidth, this.rHeight);
                    this.bg.setSize(this.rWidth - 4, this.rHeight - 4);
                    this.bg.set_x(this.bg.set_y(2));
                    this.tf.set_x(6);
                    this.tf.set_y(6);
                    this.tf.set_width(this.rWidth - 12);
                    this.tf.set_height(this.rHeight - 12)
                },
                __class__: AboutTextBox
            });
            var AboutDialogForm = function () {
                var buttonsArr = [];
                Object.entries(params.meta.about.buttons).forEach(([key, value]) => {
                    buttonsArr.push(key);
                });
                buttonsArr.sort();
                Yd.call(this, buttonsArr);

                this.setMargins(10, 8);
                this.add(new sd(params.meta.name_app));
                var a = new Oc;
                a.setMargins(0, 4);
                var b = new jd;
                b.setMargins(0, 0);
                b.gap = 12;

                Object.entries(params.meta.about.params).forEach(([key, value]) => {
                    var c = new sd(key, !0);
                    //c.set_width(80);
                    b.add(c);
                    b.add(new sd(value, !0));
                    a.add(b);
                    b = new jd;
                    b.setMargins(0, 0);
                    b.gap = 12;
                });

                this.add(a);
                a = new AboutTextBox(AboutDialogForm.TEXT, OthersShared.widthAboutTextBox(), OthersShared.heightAboutTextBox());
                a.halign = "fill";
                this.add(a);
                a = this.buttons.hbox.getChildAt(0);
                b = this.buttons.hbox.getChildAt(1);
                a.set_width(140);
                b.set_width(140);
                this.buttons.hbox.layout();
                this.buttons.setSize(this.buttons.hbox.get_width(), this.buttons.hbox.get_height());
                this.layout()
            };
            g["coogee.ui.forms.AboutDialogForm"] = AboutDialogForm;
            AboutDialogForm.__name__ = "coogee.ui.forms.AboutDialogForm";
            AboutDialogForm.TEXT = params.meta.about.text;
            AboutDialogForm.__super__ = Yd;
            AboutDialogForm.prototype = l(Yd.prototype, {
                getTitle: function () {
                    return "About"
                },
                onButton: function (a) {
                    Object.entries(params.meta.about.buttons).forEach(([key, value]) => {
                        if (key == a) window.open(FuncProto.paramsUrlString(value), "_self");
                    });
                    this.dialog.hide()
                },
                onEnter: function () {
                },
                onEsc: function () {
                    this.dialog.hide()
                },
                __class__: AboutDialogForm
            });
            var If = function (a) {
                this.changed = new ac;
                ka.call(this);
                this.border = Qa.black();
                this.add(this.border);
                this.empty = Qa.white();
                this.add(this.empty);
                this.filled = Qa.black();
                this.add(this.filled);
                null != a ? (this.label = new sd(a), this.label.mouseEnabled = !0, this.label.mouseChildren = !0, this.add(this.label), this.setSize(24 +
                    this.label.get_width(), Math.max(20, this.label.get_height()))) : this.setSize(20, 20);
                this.set_buttonMode(!0);
                this.addEventListener("click", p(this, this.onClick))
            };
            g["coogee.ui.CheckBox"] = If;
            If.__name__ = "coogee.ui.CheckBox";
            If.__super__ = ka;
            If.prototype = l(ka.prototype, {
                layout: function () {
                    this.border.setSize(20, 20);
                    this.border.set_x(null != this.label ? 0 : (this.rWidth - this.border.get_width()) / 2 | 0);
                    this.border.set_y((this.rHeight - this.border.get_height()) / 2 | 0);
                    this.empty.setSize(this.border.get_width() -
                        4, this.border.get_height() - 4);
                    this.empty.set_x(this.border.get_x() + 2);
                    this.empty.set_y(this.border.get_y() + 2);
                    this.filled.setSize(this.empty.get_width() - 4, this.empty.get_height() - 4);
                    this.filled.set_x(this.empty.get_x() + 2);
                    this.filled.set_y(this.empty.get_y() + 2);
                    null != this.label && this.label.set_x(this.border.get_width() + 4)
                },
                get_value: function () {
                    return this.filled.get_visible()
                },
                set_value: function (a) {
                    this.filled.set_visible(a);
                    return a
                },
                onClick: function (a) {
                    this.set_value(!this.get_value());
                    this.changed.dispatch(this.get_value())
                },
                set_enabled: function (a) {
                    ka.prototype.set_enabled.call(this, a);
                    var b = a ? ea.black : ea.light;
                    this.border.bmp.get_bitmapData().setPixel(0, 0, b);
                    this.filled.bmp.get_bitmapData().setPixel(0, 0, b);
                    null != this.label && this.label.set_color(b);
                    return a
                },
                __class__: If,
                __properties__: l(ka.prototype.__properties__, {
                    set_value: "set_value",
                    get_value: "get_value"
                })
            });
            var Fd = function (a, b) {
                this.onMinimize = new ac;
                this.onMove = new ac;
                this.onHide = new ac;
                this.minimized = this.minimizable = !1;
                ka.call(this);
                this.bg1 = Qa.black();
                this.addChild(this.bg1);
                this.bg2 = Qa.white();
                this.addChild(this.bg2);
                this.addEventListener("mouseDown", p(this, this.onBringUp));
                this.header = new li(b);
                this.header.addEventListener("mouseDown", p(this, this.onStartDrag));
                this.header.addEventListener("click", p(this, this.onClick));
                this.addChild(this.header);
                this.content = a;
                this.addChild(a);
                this.resize()
            };
            g["coogee.ui.Window"] = Fd;
            Fd.__name__ = "coogee.ui.Window";
            Fd.show = function (a, b, c, d) {
                c = null == d ? new Fd(b, c) : y.createInstance(d, [b, c]);
                c.set_x((a.get_width() -
                    c.get_width()) / 2 | 0);
                c.set_y((a.get_height() - c.get_height()) / 2 | 0);
                a.addChild(c);
                null != b.stage && b.stage.set_focus(b);
                return c
            };
            Fd.__super__ = ka;
            Fd.prototype = l(ka.prototype, {
                resize: function (a) {
                    null == a && (a = !1);
                    var b = this.content.get_width() + 4,
                        c = this.header.get_height() + this.content.get_height() + 2,
                        d = a ? (this.rWidth - b) / 2 | 0 : 0;
                    a = a ? (this.rHeight - c) / 2 | 0 : 0;
                    this.setSize(b, c);
                    this.set_x(this.get_x() + d);
                    this.set_y(this.get_y() + a)
                },
                layout: function () {
                    this.header.set_width(this.rWidth);
                    this.minimized ? (this.bg1.setSize(this.rWidth,
                        this.header.get_height()), this.content.set_visible(!1), this.bg2.set_visible(!1)) : (this.bg1.setSize(this.rWidth, this.rHeight), this.content.set_visible(!0), this.bg2.set_visible(!0), this.bg2.setSize(this.rWidth - 4, this.rHeight - this.header.get_height() - 2), this.content.set_x(this.bg2.set_x(2)), this.content.set_y(this.bg2.set_y(this.header.get_height())))
                },
                hide: function () {
                    null != this.parent && (this.stage.set_focus(this.stage), this.parent.removeChild(this), this.onHide.dispatch(this))
                },
                onBringUp: function (a) {
                    this.parent.addChild(this)
                },
                onStartDrag: function (a) {
                    this.clicked = !0;
                    this.stage.addEventListener("mouseMove", p(this, this.onDrag));
                    this.stage.addEventListener("mouseUp", p(this, this.onEndDrag));
                    this.grabX = this.get_mouseX();
                    this.grabY = this.get_mouseY()
                },
                onDrag: function (a) {
                    this.clicked = !1;
                    this.set_x(this.parent.get_mouseX() - this.grabX);
                    this.set_y(this.parent.get_mouseY() - this.grabY);
                    a.updateAfterEvent()
                },
                onEndDrag: function (a) {
                    this.stage.removeEventListener("mouseMove", p(this, this.onDrag));
                    this.stage.removeEventListener("mouseUp",
                        p(this, this.onEndDrag));
                    this.clicked || this.onMove.dispatch(this)
                },
                onClick: function (a) {
                    this.clicked && this.minimizable && (this.minimized = !this.minimized, this.layout(), this.onMinimize.dispatch(this))
                },
                setTitle: function (a) {
                    this.header.setText(a)
                },
                __class__: Fd
            });
            var Jf = function (a, b) {
                a.dialog = this;
                Fd.call(this, a, b);
                this.header.close.add(function () {
                    a.onEsc()
                })
            };
            g["coogee.ui.Dialog"] = Jf;
            Jf.__name__ = "coogee.ui.Dialog";
            Jf.show = function (a, b, c) {
                null == c && (c = b.getTitle());
                a = Fd.show(a, b, c,
                    Jf);
                b.onShow();
                return a
            };
            Jf.__super__ = Fd;
            Jf.prototype = l(Fd.prototype, {
                hide: function () {
                    if (null != this.parent) T.__cast(this.content, Pc).onHide();
                    Fd.prototype.hide.call(this)
                },
                __class__: Jf
            });
            var Le = function (a, b) {
                this.update = new ac;
                var c = this;
                this.values = b;
                this.labels = a;
                ka.call(this);
                this.border = Qa.black();
                this.add(this.border);
                this.bg = Qa.white();
                this.bg.set_x(this.bg.set_y(2));
                this.add(this.bg);
                this.tf = Nc.get("", ea.format(ea.uiFont, ea.normalSize, ea.black));
                this.addChild(this.tf);
                this.btn = new Kf;
                this.btn.set_width(ea.normalSize);
                this.btn.set_enabled(!1);
                this.add(this.btn);
                for (var d = 0, e = 0, f = 0; f < a.length;) {
                    var h = a[f];
                    ++f;
                    this.tf.set_text(h);
                    d = Math.max(d, this.tf.get_width());
                    e = Math.max(e, this.tf.get_height())
                }
                this.tf.set_autoSize(2);
                this.menu = new td;
                f = [];
                h = 0;
                for (var r = a.length; h < r;) {
                    var m = [h++];
                    f.push(this.menu.addItem(a[m[0]], function (d) {
                        return function () {
                            c.onSelect(a[d[0]], b[d[0]])
                        }
                    }(m)))
                }
                this.items = f;
                this.set_buttonMode(!0);
                this.addEventListener("click", p(this, this.onClick));
                this.set_text(a[0]);
                this.setSize(Math.ceil(d + this.btn.get_width()),
                    Math.ceil(e))
            };
            g["coogee.ui.DropDown"] = Le;
            Le.__name__ = "coogee.ui.DropDown";
            Le.ofStrings = function (a) {
                return new Le(a, a)
            };
            Le.__super__ = ka;
            Le.prototype = l(ka.prototype, {
                layout: function () {
                    this.border.setSize(this.rWidth, this.rHeight);
                    this.bg.setSize(this.rWidth - 4, this.rHeight - 4);
                    this.tf.set_width(this.rWidth - this.btn.get_width());
                    this.tf.set_height(this.rHeight);
                    this.btn.set_height(this.rHeight);
                    this.btn.set_x(this.rWidth - this.btn.get_width());
                    this.btn.set_y((this.rHeight - this.btn.get_height()) /
                        2)
                },
                set_text: function (a) {
                    this.tf.set_text(a);
                    return a
                },
                get_value: function () {
                    var a = this.labels.indexOf(this.tf.get_text());
                    return -1 == a ? null : this.values[a]
                },
                set_value: function (a) {
                    for (var b = 0, c = this.values.length; b < c;) {
                        var d = b++;
                        if (this.values[d] == a) return this.tf.set_text(this.labels[d]), a
                    }
                    return this.get_value()
                },
                onClick: function (a) {
                    a = this.labels.indexOf(this.tf.get_text());
                    for (var b = 0, c = this.items.length; b < c;) {
                        var d = b++;
                        this.items[d].setCheck(d == a)
                    }
                    a = Ma.getRect(this);
                    Ma.showMenuAt(this.menu, Math.ceil(a.get_left()),
                        a.get_bottom() - 2)
                },
                onSelect: function (a, b) {
                    this.stage.set_focus(this);
                    this.tf.set_text(a);
                    this.update.dispatch(b)
                },
                __class__: Le,
                __properties__: l(ka.prototype.__properties__, {
                    set_value: "set_value",
                    get_value: "get_value",
                    set_text: "set_text"
                })
            });
            var sd = function (a, b) {
                null == b && (b = !1);
                ka.call(this);
                this.tf = Nc.get(a, ea.format(ea.uiFont, b ? ea.smallSize : ea.normalSize, ea.black));
                this.tf.set_x(-2);
                this.tf.set_y(-2);
                this.addChild(this.tf);
                this.setSize(this.tf.get_width() - 4, this.tf.get_height() - 4)
            };
            g["coogee.ui.Label"] =
                sd;
            sd.__name__ = "coogee.ui.Label";
            sd.__super__ = ka;
            sd.prototype = l(ka.prototype, {
                get_text: function () {
                    return this.tf.get_text()
                },
                set_text: function (a) {
                    this.tf.set_text(a);
                    this.setSize(this.tf.get_width(), this.tf.get_height());
                    return a
                },
                set_color: function (a) {
                    var b = this.tf.get_defaultTextFormat();
                    b.color = a;
                    this.tf.setTextFormat(b);
                    this.tf.set_defaultTextFormat(b);
                    return a
                },
                __class__: sd,
                __properties__: l(ka.prototype.__properties__, {
                    set_color: "set_color",
                    set_text: "set_text",
                    get_text: "get_text"
                })
            });
            var td = function () {
                ka.call(this);
                this.bg = Qa.black();
                this.addChild(this.bg);
                this.items = [];
                this.addEventListener("addedToStage", p(this, this.onAdded));
                this.addEventListener("removedFromStage", p(this, this.onRemoved))
            };
            g["coogee.ui.Menu"] = td;
            td.__name__ = "coogee.ui.Menu";
            td.__super__ = ka;
            td.prototype = l(ka.prototype, {
                layout: function () {
                    for (var a = this.rHeight = this.rWidth = 0, b = this.items; a < b.length;) {
                        var c = b[a];
                        ++a;
                        this.rWidth = Math.max(this.rWidth, c.get_width());
                        this.rHeight += c.get_height()
                    }
                    var d =
                        2;
                    a = 0;
                    for (b = this.items; a < b.length;) c = b[a], ++a, c.set_width(this.rWidth), c.set_x(2), c.set_y(d), d += c.get_height();
                    this.rWidth += 4;
                    this.rHeight += 4;
                    this.bg.setSize(this.rWidth, this.rHeight)
                },
                add: function (a) {
                    this.items.push(a);
                    this.addChild(a);
                    this.layout()
                },
                addItem: function (a, b, c) {
                    null == c && (c = !1);
                    a = new Hg(a, null, b);
                    a.setCheck(c);
                    this.add(a);
                    return a
                },
                addSubmenu: function (a, b) {
                    a = new Hg(a, b);
                    this.add(a);
                    return a
                },
                addSeparator: function () {
                    0 < this.items.length && !(this.items[this.items.length - 1] instanceof Ig) &&
                    this.add(new Ig)
                },
                hide: function () {
                    null != this.submenu && (this.submenu.hide(), this.submenu = null);
                    null != this.parent && (null != this.stage && this.stage.set_focus(this.stage), this.parent.removeChild(this))
                },
                getRoot: function () {
                    return null != this.parentMenu ? this.parentMenu.getRoot() : this
                },
                onMouseDown: function (a) {
                    this.hitTestPoint(this.stage.get_mouseX(), this.stage.get_mouseY()) || this.hide()
                },
                onAdded: function (a) {
                    this.stage.addEventListener("mouseDown", p(this, this.onMouseDown));
                    this.stage.addEventListener("rightMouseDown",
                        p(this, this.onMouseDown))
                },
                onRemoved: function (a) {
                    this.stage.removeEventListener("mouseDown", p(this, this.onMouseDown));
                    this.stage.removeEventListener("rightMouseDown", p(this, this.onMouseDown))
                },
                cancel: function () {
                    null != this.submenu && (this.submenu.cancel(), this.parent.removeChild(this.submenu), this.submenu = null)
                },
                hover: function (a, b) {
                    this.cancel();
                    if (null != b) {
                        b.parentMenu = this;
                        this.submenu = b;
                        var c = a.get_x() + a.rWidth,
                            d = a.get_y() - 2,
                            e = new ba(c, d);
                        e = this.parent.globalToLocal(this.localToGlobal(e));
                        if (this.parent ==
                            Ma.layer) {
                            var f = !1;
                            e.x + b.get_width() > this.parent.get_width() && (c = a.get_x() - b.get_width(), f = !0);
                            e.y + b.get_height() > this.parent.get_height() && (d = a.get_y() + a.rHeight - b.get_height() + 2, f = !0);
                            f && (e.x = c, e.y = d, e = this.parent.globalToLocal(this.localToGlobal(e)))
                        }
                        b.set_x(e.x);
                        b.set_y(e.y);
                        this.parent.addChild(b)
                    }
                },
                __class__: td
            });
            var Hg = function (a, b, c) {
                var d = this;
                ka.call(this);
                this.submenu = b;
                this.callback = c;
                this.bg = Qa.white();
                this.addChild(this.bg);
                this.bullet = Qa.black();
                this.bullet.set_visible(!1);
                this.bullet.setSize(8,
                    8);
                this.addChild(this.bullet);
                c = null == c && null == b;
                this.formatNormal = ea.format(ea.uiFont, ea.smallSize, c ? ea.medium : ea.black);
                this.formatHover = ea.format(ea.uiFont, ea.smallSize, ea.white);
                this.tf = Nc.get(a, this.formatNormal);
                this.addChild(this.tf);
                null != b && (this.sub = Nc.get(" >", this.formatNormal), this.addChild(this.sub));
                this.addEventListener("mouseDown", function (a) {
                    a.stopPropagation()
                });
                c || (this.set_buttonMode(!0), this.addEventListener("rollOver", function (a) {
                    d.hover(!0)
                }), this.addEventListener("rollOut",
                    function (a) {
                        d.hover(!1)
                    }), this.addEventListener("click", p(this, this.onClick)));
                a = Math.round(ea.normalSize / 4);
                this.bullet.set_x(a);
                this.tf.set_x(a + this.bullet.get_width() + a - 2);
                null != b ? (this.sub.set_x(this.tf.get_x() + this.tf.get_width() - 4), this.rWidth = this.sub.get_x() + (this.sub.get_width() - 4) + a) : this.rWidth = a + this.bullet.get_width() + a + (this.tf.get_width() - 4) + a;
                this.rHeight = 1.5 * ea.normalSize;
                this.rWidth = Math.ceil(this.rWidth);
                this.rHeight = Math.ceil(this.rHeight);
                this.layout()
            };
            g["coogee.ui.MenuItem"] =
                Hg;
            Hg.__name__ = "coogee.ui.MenuItem";
            Hg.__super__ = ka;
            Hg.prototype = l(ka.prototype, {
                layout: function () {
                    this.bg.setSize(this.rWidth, this.rHeight);
                    this.bullet.set_y((this.rHeight - this.bullet.get_height()) / 2);
                    this.tf.set_y((this.rHeight - this.tf.get_height()) / 2);
                    null != this.sub && (this.sub.set_y(this.tf.get_y()), this.sub.set_x(this.rWidth - this.bullet.get_x() - this.sub.get_width() + 2))
                },
                hover: function (a) {
                    null != this.get_root() && (this.highlight(a), T.__cast(this.parent, td).hover(this, this.submenu))
                },
                highlight: function (a) {
                    var b = a ? this.formatHover : this.formatNormal;
                    this.tf.set_defaultTextFormat(b);
                    var c = a ? ea.black : ea.white;
                    this.bg.bmp.get_bitmapData().setPixel(0, 0, c);
                    c = a ? ea.white : ea.black;
                    this.bullet.bmp.get_bitmapData().setPixel(0, 0, c);
                    null != this.submenu && this.sub.set_defaultTextFormat(b)
                },
                onClick: function (a) {
                    null == this.submenu ? (a.stopPropagation(), this.highlight(!1), T.__cast(this.parent, td).getRoot().hide(), null != this.callback && this.callback()) : T.__cast(this.parent, td).hover(this, null == this.submenu.parent ?
                        this.submenu : null)
                },
                setCheck: function (a) {
                    this.bullet.set_visible(a);
                    return this
                },
                __class__: Hg
            });
            var Qa = function (a, b) {
                null == b && (b = 1);
                ka.call(this);
                this.set_alpha(b);
                this.bmp = new Jg(new mb(1, 1, !1, a));
                this.addChild(this.bmp)
            };
            g["coogee.ui.SolidRect"] = Qa;
            Qa.__name__ = "coogee.ui.SolidRect";
            Qa.black = function () {
                return new Qa(ea.black)
            };
            Qa.light = function () {
                return new Qa(ea.light)
            };
            Qa.white = function () {
                return new Qa(ea.white)
            };
            Qa.__super__ = ka;
            Qa.prototype = l(ka.prototype, {
                layout: function () {
                    this.bmp.set_width(this.rWidth);
                    this.bmp.set_height(this.rHeight)
                },
                __class__: Qa
            });
            var Ig = function () {
                Qa.call(this, ea.black);
                this.setSize(2, 2)
            };
            g["coogee.ui.MenuSeparator"] = Ig;
            Ig.__name__ = "coogee.ui.MenuSeparator";
            Ig.__super__ = Qa;
            Ig.prototype = l(Qa.prototype, {
                __class__: Ig
            });
            var Kg = function (a, b, c) {
                this.action = new ac;
                var d = this;
                this.txtLabel = a;
                Xd.call(this);
                this.menu = new td;
                a = 0;
                for (var e = b.length; a < e;) {
                    var f = a++,
                        h = b[f];
                    this.menu.addItem(h, function (a) {
                        return function () {
                            d.action.dispatch(a[0])
                        }
                    }([null != c ? c[f] : h]))
                }
            };
            g["coogee.ui.MultiAction"] = Kg;
            Kg.__name__ = "coogee.ui.MultiAction";
            Kg.__super__ = Xd;
            Kg.prototype = l(Xd.prototype, {
                createLabel: function () {
                    var a = this,
                        b = new jd;
                    b.setMargins(2, 4);
                    var c = new sd(this.txtLabel, !0);
                    c.set_color(ea.white);
                    b.add(c);
                    c = new Kf(ea.white);
                    c.click.add(function () {
                        a.onClick(null)
                    });
                    c.valign = "fill";
                    b.add(c);
                    return b
                },
                onClick: function (a) {
                    Xd.prototype.onClick.call(this, a);
                    a = Ma.getRect(this);
                    Ma.showMenuAt(this.menu, a.get_left(), a.get_bottom())
                },
                __class__: Kg
            });
            var Lg =
                function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = 100);
                    null == a && (a = 0);
                    this.submit = new ac;
                    this.change = new ac;
                    ka.call(this);
                    this.min = a;
                    this.max = b;
                    this.rounding = Math.pow(10, c);
                    this.bg = new Ja;
                    this.bg.addEventListener("mouseDown", p(this, this.onPage));
                    this.addChild(this.bg);
                    this.scale = Qa.black();
                    this.scale.mouseEnabled = !1;
                    this.add(this.scale);
                    this.thumb = Qa.black();
                    this.thumb.set_buttonMode(!0);
                    this.thumb.addEventListener("mouseDown", p(this, this.onStartDrag));
                    this.add(this.thumb);
                    this.addEventListener("mouseWheel",
                        p(this, this.onWheel));
                    this._value = a;
                    this._prev = NaN;
                    this.setSize(200, 20)
                };
            g["coogee.ui.Slider"] = Lg;
            Lg.__name__ = "coogee.ui.Slider";
            Lg.__super__ = ka;
            Lg.prototype = l(ka.prototype, {
                get_value: function () {
                    return this._value
                },
                set_value: function (a) {
                    this._value = hc.gate(a, this.min, this.max);
                    this._value = Math.round(this._value * this.rounding) / this.rounding;
                    this._prev != this._value && (this._prev = this._value, this.placeThumb(), this.change.dispatch(this._value));
                    return a
                },
                layout: function () {
                    var a =
                        this.bg.get_graphics();
                    a.clear();
                    a.beginFill(16711680, 0);
                    a.drawRect(0, 0, this.rWidth, this.rHeight);
                    this.scale.setSize(this.rWidth, 2);
                    this.scale.set_y((this.rHeight - this.scale.get_height()) / 2 | 0);
                    this.thumb.setSize(10, this.rHeight);
                    this.thumb.set_y((this.rHeight - this.thumb.get_height()) / 2 | 0);
                    this.placeThumb()
                },
                placeThumb: function () {
                    this.thumb.set_x((this.rWidth - this.thumb.get_width()) * (this.get_value() - this.min) / (this.max - this.min))
                },
                onStartDrag: function (a) {
                    this.stage.addEventListener("mouseMove", p(this,
                        this.onDrag));
                    this.stage.addEventListener("mouseUp", p(this, this.onEndDrag));
                    this.grabX = this.thumb.get_mouseX()
                },
                onDrag: function (a) {
                    this.set_value((this.get_mouseX() - this.grabX) / (this.rWidth - this.thumb.get_width()) * (this.max - this.min) + this.min);
                    a.updateAfterEvent()
                },
                onEndDrag: function (a) {
                    this.stage.removeEventListener("mouseMove", p(this, this.onDrag));
                    this.stage.removeEventListener("mouseUp", p(this, this.onEndDrag));
                    this.submit.dispatch(this.get_value())
                },
                onPage: function (a) {
                    a = this.get_value();
                    this.get_mouseX() <
                    this.thumb.get_x() ? this.set_value(this.get_value() - .1 * (this.max - this.min)) : this.get_mouseX() > this.thumb.get_x() + this.thumb.get_width() && this.set_value(this.get_value() + .1 * (this.max - this.min));
                    a != this.get_value() && this.submit.dispatch(this.get_value())
                },
                onWheel: function (a) {
                    var b = this.get_value(),
                        c = this.get_value();
                    a = a.delta;
                    this.set_value(c + (0 == a ? 0 : 0 > a ? -1 : 1) * (this.max - this.min) / this.rounding);
                    b != this.get_value() && this.submit.dispatch(this.get_value())
                },
                __class__: Lg,
                __properties__: l(ka.prototype.__properties__, {
                    set_value: "set_value",
                    get_value: "get_value"
                })
            });
            var mi = function (a) {
                this.enter = new ac;
                this.update = new ac;
                ka.call(this);
                this.tf = Nc.get(a, ea.format(ea.uiFont, ea.normalSize, ea.black), p(this, this.onUpdate));
                this.tf.set_border(!0);
                this.tf.set_borderColor(ea.black);
                this.tf.set_autoSize(2);
                this.tf.set_wordWrap(!0);
                this.addChild(this.tf);
                this.addEventListener("focusIn", p(this, this.onFocusIn));
                this.tf.addEventListener("keyDown", p(this, this.onKeyDown));
                this.setSize(this.tf.get_width(), this.tf.get_height())
            };
            g["coogee.ui.TextArea"] = mi;
            mi.__name__ = "coogee.ui.TextArea";
            mi.__super__ = ka;
            mi.prototype = l(ka.prototype, {
                layout: function () {
                    this.tf.set_width(this.rWidth);
                    this.tf.set_height(this.rHeight)
                },
                onFocusIn: function (a) {
                    this.stage.set_focus(this.tf);
                    this.tf.setSelection(this.tf.get_text().length, this.tf.get_text().length)
                },
                onKeyDown: function (a) {
                    switch (a.keyCode) {
                        case 13:
                            this.enter.dispatch(this.tf.get_text());
                            break;
                        case 27:
                            this.stage.set_focus(this.parent)
                    }
                    a.stopPropagation()
                },
                onUpdate: function () {
                    this.update.dispatch(this.tf.get_text())
                },
                __class__: mi
            });
            var Wc = function (a, b) {
                null == b && (b = !1);
                null == a && (a = "");
                this.leave = new Wd;
                this.enter = new ac;
                this.update = new ac;
                ka.call(this);
                this.tf = Nc.input(a, ea.format(b ? ea.uiFontMono : ea.uiFont, ea.normalSize, ea.black), p(this, this.onUpdate));
                this.tf.set_backgroundColor(ea.white);
                this.tf.set_borderColor(ea.black);
                this.addChild(this.tf);
                this.addEventListener("focusIn", p(this, this.onFocusIn));
                this.addEventListener("focusOut", p(this, this.onFocusOut));
                this.addEventListener("keyDown", p(this, this.onKeyDown));
                this.setSize(this.tf.get_width(), this.tf.get_height())
            };
            g["coogee.ui.TextInput"] = Wc;
            Wc.__name__ = "coogee.ui.TextInput";
            Wc.__super__ = ka;
            Wc.prototype = l(ka.prototype, {
                onKeyDown: function (a) {
                    switch (a.keyCode) {
                        case 13:
                            this.enter.dispatch(this.tf.get_text());
                            break;
                        case 27:
                            this.stage.set_focus(this.parent)
                    }
                    a.stopPropagation()
                },
                onFocusIn: function (a) {
                    this.stage.set_focus(this.tf)
                },
                onFocusOut: function (a) {
                    this.leave.dispatch()
                },
                layout: function () {
                    this.tf.set_width(this.rWidth);
                    this.tf.set_height(this.rHeight);
                    this.layoutPrompt()
                },
                layoutPrompt: function () {
                    if (null != this.label) {
                        var a = this.get_centered();
                        this.label.set_x(a ? (this.rWidth - this.label.get_width()) / 2 : 2);
                        this.label.set_y(a ? (this.rHeight - this.label.get_height()) / 2 : 2)
                    }
                },
                get_text: function () {
                    return this.tf.get_text()
                },
                set_text: function (a) {
                    this.tf.set_text(a);
                    this.updatePrompt();
                    return a
                },
                get_centered: function () {
                    return 0 == this.tf.get_defaultTextFormat().align
                },
                set_restrict: function (a) {
                    return this.tf.set_restrict(a)
                },
                onUpdate: function () {
                    this.updatePrompt();
                    this.update.dispatch(this.tf.get_text())
                },
                updatePrompt: function () {
                    null != this.label && (this.layoutPrompt(), this.label.set_visible("" == this.tf.get_text()))
                },
                set_prompt: function (a) {
                    null == this.label && (this.label = new sd(a), this.label.set_enabled(!1), this.label.set_color(ea.medium), this.add(this.label), this.updatePrompt());
                    this.label.set_text(a);
                    return a
                },
                selecteAll: function () {
                    this.tf.setSelection(0, this.tf.get_length())
                },
                set_enabled: function (a) {
                    ka.prototype.set_enabled.call(this, a);
                    this.tf.set_alpha(a ?
                        1 : .6);
                    return this.tf.mouseEnabled = a
                },
                __class__: Wc,
                __properties__: l(ka.prototype.__properties__, {
                    set_prompt: "set_prompt",
                    set_restrict: "set_restrict",
                    get_centered: "get_centered",
                    set_text: "set_text",
                    get_text: "get_text"
                })
            });
            var lc = function (a) {
                var b = this;
                ka.call(this);
                a = Nc.get(a, ea.format(ea.uiFont, ea.normalSize, ea.white));
                a.set_x(10);
                a.set_y(10);
                this.addChild(a);
                this.rWidth = 10 + a.get_width() + 10;
                this.rHeight = 10 + a.get_height() + 10;
                this.get_graphics().beginFill(ea.black);
                this.get_graphics().drawRoundRect(0,
                    0, this.rWidth, this.rHeight, 10);
                Me.run(lc.delay, function (a) {
                    b.set_alpha(lc.delay * (1 - a))
                }).onComplete(function () {
                    null != b.parent && b.parent.removeChild(b)
                })
            };
            g["coogee.ui.Toast"] = lc;
            lc.__name__ = "coogee.ui.Toast";
            lc.show = function (a) {
                lc.hide();
                var b = Ma.layer;
                a = lc.instance = new lc(a);
                a.set_x((b.get_width() - a.get_width()) / 2 | 0);
                a.set_y(b.get_height() - a.get_height() - lc.offset | 0);
                b.addChild(a);
                return a
            };
            lc.hide = function () {
                null != lc.instance && null != lc.instance.parent && lc.instance.parent.removeChild(lc.instance)
            };
            lc.__super__ = ka;
            lc.prototype = l(ka.prototype, {
                __class__: lc
            });
            var Ma = function () {
            };
            g["coogee.ui.UI"] = Ma;
            Ma.__name__ = "coogee.ui.UI";
            Ma.showMenu = function (a) {
                Ma.showMenuAt(a, Ma.layer.get_mouseX(), Ma.layer.get_mouseY())
            };
            Ma.showMenuAt = function (a, b, c) {
                Ma.menu = a;
                a.set_x((b + a.get_width() <= Ma.layer.get_width() ? b : b - a.get_width()) | 0);
                a.set_y((c + a.get_height() <= Ma.layer.get_height() ? c : c - a.get_height()) | 0);
                0 > a.get_x() && a.set_x(0);
                0 > a.get_y() && a.set_y(0);
                Ma.layer.addChild(a)
            };
            Ma.hideMenu =
                function () {
                    return null != Ma.menu && null != Ma.menu.stage ? (Ma.menu.hide(), Ma.menu = null, !0) : !1
                };
            Ma.showDialog = function (a, b) {
                a = Jf.show(Ma.layer, a, b);
                a.onHide.add(function (a) {
                    ja.remove(Ma.windows, a)
                });
                Ma.windows.push(a);
                return a
            };
            Ma.showMessage = function (a) {
                Ma.showDialog(new ni(a))
            };
            Ma.wipe = function () {
                Ma.hideMenu();
                for (var a = 0, b = Ma.windows.slice(); a < b.length;) {
                    var c = b[a];
                    ++a;
                    c.hide()
                }
                Ma.windows = []
            };
            Ma.findForm = function (a) {
                for (var b = 0, c = Ma.windows; b < c.length;) {
                    var d = c[b];
                    ++b;
                    if (T.__instanceof(d.content, a)) return d.content
                }
                return null
            };
            Ma.getRect = function (a) {
                var b = new ba(a.get_x(), a.get_y()),
                    c = new ba(a.get_x() + a.rWidth, a.get_y() + a.rHeight);
                b = Ma.layer.globalToLocal(a.parent.localToGlobal(b));
                c = Ma.layer.globalToLocal(a.parent.localToGlobal(c));
                return new ha(b.x, b.y, c.x - b.x, c.y - b.y)
            };
            var ea = function () {
            };
            g["coogee.ui.UIStyle"] = ea;
            ea.__name__ = "coogee.ui.UIStyle";
            ea.format = function (a, b, c) {
                null == c && (c = 0);
                return new Ne("_" == a.charAt(0) ? a : mc.getFont(a).name, b, c)
            };
            ea.useDefault = function () {
                ea.black = 4012352;
                ea.dark =
                    5725031;
                ea.medium = 7569526;
                ea.light = 10064002;
                ea.white = 14276035;
                ea.smallSize = 18;
                ea.normalSize = 20;
                ea.uiFont = "ui_font";
                ea.uiFontMono = "ui_font_mono"
            };
            var oi = function () {
                this.click = new Wd;
                ka.call(this);
                this.set_buttonMode(!0);
                this.addEventListener("click", p(this, this.onClick));
                this.setSize(12, 12)
            };
            g["coogee.ui.elements.CloseButton"] = oi;
            oi.__name__ = "coogee.ui.elements.CloseButton";
            oi.__super__ = ka;
            oi.prototype = l(ka.prototype, {
                layout: function () {
                    this.get_graphics().clear();
                    this.get_graphics().beginFill(ea.white);
                    this.get_graphics().drawCircle(this.rWidth / 2, this.rHeight / 2, 6)
                },
                onClick: function (a) {
                    a.stopPropagation();
                    this.click.dispatch()
                },
                __class__: oi
            });
            var Kf = function (a) {
                null == a && (a = 0);
                this.click = new Wd;
                ka.call(this);
                this.bg = new Qa(0, 0);
                this.addChild(this.bg);
                0 == a && (a = ea.black);
                var b = ea.smallSize / 4;
                this.image = new Ja;
                var c = this.image.get_graphics();
                c.beginFill(a);
                c.moveTo(-b, -b);
                c.lineTo(b, -b);
                c.lineTo(0, b);
                this.addChild(this.image);
                this.set_buttonMode(!0);
                this.addEventListener("click", p(this, this.onClick));
                this.setSize(2 * b, 2 * b)
            };
            g["coogee.ui.elements.DropDownButton"] = Kf;
            Kf.__name__ = "coogee.ui.elements.DropDownButton";
            Kf.__super__ = ka;
            Kf.prototype = l(ka.prototype, {
                layout: function () {
                    this.bg.setSize(this.rWidth, this.rHeight);
                    this.image.set_x(this.rWidth / 2);
                    this.image.set_y(this.rHeight / 2)
                },
                onClick: function (a) {
                    a.stopPropagation();
                    this.click.dispatch()
                },
                __class__: Kf
            });
            var pi = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 1E3);
                null == b && (b = 0);
                var e = this;
                if (0 == d) Wc.call(this, null == c ? "null" :
                    "" + c, !0);
                else {
                    for (var f = "0.", h = 0, r = d; h < r;) h++, f += "0";
                    Wc.call(this, f, !0)
                }
                this.min = b;
                this.max = c;
                this.set_text(null == a ? "null" : "" + a);
                this.set_restrict("-0-9.");
                var m = Math.pow(10, Math.floor(Math.log(c - b) / Math.log(10)) - 1),
                    C = 0 < d ? Math.pow(10, d) : 0;
                this.addEventListener("mouseWheel", function (a) {
                    var d = parseFloat(e.get_text());
                    d = hc.gate(d + (0 < a.delta ? 1 : -1) * m, b, c);
                    0 < C && (d = Math.round(d * C) / C);
                    e.set_text(null == d ? "null" : "" + d)
                })
            };
            g["coogee.ui.elements.FloatInput"] = pi;
            pi.__name__ = "coogee.ui.elements.FloatInput";
            pi.__super__ = Wc;
            pi.prototype = l(Wc.prototype, {
                __class__: pi
            });
            var ki = function (a) {
                this.click = new ac;
                var b = this;
                ka.call(this);
                this.bg = Qa.light();
                this.add(this.bg);
                this.hbox = new jd;
                this.add(this.hbox);
                for (var c = 0; c < a.length;) {
                    var d = [a[c]];
                    ++c;
                    var e = new Ke(d[0]);
                    e.click.add(function (a) {
                        return function () {
                            b.click.dispatch(a[0])
                        }
                    }(d));
                    e.set_width(100);
                    this.hbox.add(e)
                }
                this.setSize(this.hbox.get_width(), this.hbox.get_height())
            };
            g["coogee.ui.elements.FormButtons"] = ki;
            ki.__name__ = "coogee.ui.elements.FormButtons";
            ki.__super__ = ka;
            ki.prototype = l(ka.prototype, {
                layout: function () {
                    this.rWidth = Math.max(this.rWidth, this.hbox.get_width());
                    this.bg.set_width(this.rWidth);
                    this.bg.set_height(this.rHeight);
                    this.hbox.set_x(this.rWidth - this.hbox.get_width());
                    this.hbox.set_y((this.rHeight - this.hbox.get_height()) / 2 | 0)
                },
                __class__: ki
            });
            var Lf = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 1E3);
                null == b && (b = 0);
                var e = this,
                    f = "0";
                if (0 == d)
                    for (var h = c; 10 <= h;) f += "0", h = h / 10 | 0;
                else
                    for (h = 1; h < d;) h++, f += "0";
                Wc.call(this, f, !0);
                this.min = b;
                this.max =
                    c;
                this.set_text(null == a ? "null" : "" + a);
                this.set_restrict("0-9");
                this.addEventListener("mouseWheel", function (a) {
                    a = 0 < a.delta ? 1 : -1;
                    e.update.dispatch(n.string(e.set_value(e.get_value() + a)))
                })
            };
            g["coogee.ui.elements.IntInput"] = Lf;
            Lf.__name__ = "coogee.ui.elements.IntInput";
            Lf.__super__ = Wc;
            Lf.prototype = l(Wc.prototype, {
                get_value: function () {
                    return n.parseInt(this.get_text())
                },
                set_value: function (a) {
                    a = hc.gatei(a, this.min, this.max);
                    this.tf.set_text(null == a ? "null" : "" + a);
                    return a
                },
                __class__: Lf,
                __properties__: l(Wc.prototype.__properties__, {
                    set_value: "set_value",
                    get_value: "get_value"
                })
            });
            var ok = function (a, b) {
                ka.call(this);
                this.border2 = Qa.black();
                this.add(this.border2);
                this.paint2 = Qa.white();
                this.add(this.paint2);
                this.border = Qa.black();
                this.add(this.border);
                this.paint = Qa.white();
                this.add(this.paint);
                this.colors = a;
                a = this.colors[0];
                this.paint.bmp.get_bitmapData().setPixel(0, 0, a);
                a = 1 < this.colors.length ? this.colors[1] : ea.white;
                this.paint2.bmp.get_bitmapData().setPixel(0, 0, a);
                this.setSize(b, b);
                this.addEventListener("click", p(this, this.onClickEvent))
            };
            g["coogee.ui.elements.MultiSwatch"] = ok;
            ok.__name__ = "coogee.ui.elements.MultiSwatch";
            ok.__super__ = ka;
            ok.prototype = l(ka.prototype, {
                layout: function () {
                    var a = this.rWidth - 4 - 1,
                        b = this.rHeight - 4 - 1;
                    this.border.setSize(a, b);
                    this.paint.setSize(a - 2, b - 2);
                    this.paint.set_x(this.paint.set_y(1));
                    this.border2.setSize(a, b);
                    this.border2.set_x(this.border2.set_y(5));
                    this.paint2.setSize(a - 2, b - 2);
                    this.paint2.set_x(this.border2.get_x() + 1);
                    this.paint2.set_y(this.border2.get_y() +
                        1)
                },
                onClickEvent: function (a) {
                    null != this.callback && this.callback()
                },
                __class__: ok
            });
            var Mf = function (a, b) {
                ka.call(this);
                this.border = Qa.black();
                this.add(this.border);
                this.paint = new Qa(a);
                this.add(this.paint);
                this.setSize(b, b);
                this.addEventListener("click", p(this, this.onClickEvent))
            };
            g["coogee.ui.elements.Swatch"] = Mf;
            Mf.__name__ = "coogee.ui.elements.Swatch";
            Mf.__super__ = ka;
            Mf.prototype = l(ka.prototype, {
                layout: function () {
                    this.border.setSize(this.rWidth, this.rHeight);
                    this.paint.setSize(this.rWidth -
                        2, this.rHeight - 2);
                    this.paint.set_x(this.paint.set_y(1))
                },
                onClick: function (a) {
                    this.callback = a;
                    this.set_buttonMode(null != a)
                },
                onClickEvent: function (a) {
                    null != this.callback && this.callback()
                },
                __class__: Mf
            });
            var pk = function (a, b, c, d) {
                null == c && (c = !1);
                this.edit = function (a) {
                    console.log(a.get_value())
                };
                this.data2text = function (a) {
                    return n.string(a)
                };
                this._value = null;
                var e = this;
                null != b && (this.data2text = b);
                null != d && (this.edit = d);
                this._value = a;
                ka.call(this);
                this.border =
                    Qa.black();
                this.add(this.border);
                this.bg = Qa.white();
                this.bg.set_x(this.bg.set_y(2));
                this.add(this.bg);
                this.tf = Nc.get(this.data2text(a), ea.format(ea.uiFont, c ? ea.smallSize : ea.normalSize, ea.black));
                this.addChild(this.tf);
                this.btn = new Kf;
                this.btn.set_width(ea.normalSize);
                this.btn.set_enabled(!1);
                this.add(this.btn);
                this.tf.mouseEnabled = !1;
                this.set_buttonMode(!0);
                this.addEventListener("click", function (a) {
                    e.edit(e)
                });
                this.setSize(Math.ceil(this.tf.get_width() + this.btn.get_width()), Math.ceil(this.tf.get_height()))
            };
            g["coogee.ui.elements.TextView"] = pk;
            pk.__name__ = "coogee.ui.elements.TextView";
            pk.__super__ = ka;
            pk.prototype = l(ka.prototype, {
                layout: function () {
                    this.border.setSize(this.rWidth, this.rHeight);
                    this.bg.setSize(this.rWidth - 4, this.rHeight - 4);
                    this.tf.set_autoSize(2);
                    this.tf.set_width(this.rWidth - this.btn.get_width());
                    this.tf.set_height(this.rHeight);
                    this.btn.set_height(this.rHeight);
                    this.btn.set_x(this.rWidth - this.btn.get_width());
                    this.btn.set_y((this.rHeight - this.btn.get_height()) /
                        2)
                },
                get_value: function () {
                    return this._value
                },
                set_value: function (a) {
                    this._value = a;
                    this.tf.set_text(this.data2text(a));
                    return a
                },
                __class__: pk,
                __properties__: l(ka.prototype.__properties__, {
                    set_value: "set_value",
                    get_value: "get_value"
                })
            });
            var Bc = function (a) {
                Yd.call(this, null != a ? a.concat(Bc.okCancel) : Bc.okCancel)
            };
            g["coogee.ui.elements.EditForm"] = Bc;
            Bc.__name__ = "coogee.ui.elements.EditForm";
            Bc.__super__ = Yd;
            Bc.prototype = l(Yd.prototype, {
                getTitle: function () {
                    return "Edit"
                },
                onButton: function (a) {
                    if ("OK" ==
                        a) {
                        if (null != this.onOK) this.onOK(this.get());
                        this.dialog.hide()
                    } else Yd.prototype.onButton.call(this, a)
                },
                set: function (a) {
                },
                get: function () {
                    return null
                },
                link: function (a, b, c, d) {
                    null != a && this.dialog.setTitle(a);
                    this.set(b);
                    this.onOK = c;
                    null != this.host && this.host.dialog.onHide.remove(p(this, this.onHostHidden));
                    this.host = d;
                    null != d && d.dialog.onHide.add(p(this, this.onHostHidden))
                },
                onHostHidden: function (a) {
                    this.dialog.hide()
                },
                __class__: Bc
            });
            var li = function (a) {
                this.close = new Wd;
                var b = this;
                ka.call(this);
                this.bg =
                    Qa.black();
                this.add(this.bg);
                this.btn = new oi;
                this.btn.click.add(function () {
                    b.close.dispatch()
                });
                this.add(this.btn);
                this.tf = Nc.get(a, ea.format(ea.uiFont, ea.smallSize, ea.white));
                this.tf.mouseEnabled = !1;
                this.addChild(this.tf);
                this.setSize(this.tf.get_width(), 36)
            };
            g["coogee.ui.elements.WindowHeader"] = li;
            li.__name__ = "coogee.ui.elements.WindowHeader";
            li.__super__ = ka;
            li.prototype = l(ka.prototype, {
                layout: function () {
                    this.bg.setSize(this.rWidth, this.rHeight);
                    this.btn.setSize(this.rHeight,
                        this.rHeight);
                    this.btn.set_x(this.rWidth - this.rHeight);
                    this.tf.set_x(this.tf.set_y((this.rHeight - this.tf.get_height()) / 2 | 0))
                },
                setText: function (a) {
                    this.tf.set_text(a)
                },
                __class__: li
            });
            var Mg = function () {
                var a = this;
                Bc.call(this);
                var b = new jd;
                this.swatch = new Mf(0, 60);
                this.swatch.valign = "fill";
                b.add(this.swatch);
                var c = new Nf(3);
                c.setMargins(0, 10);
                var d = function (b, d) {
                    b = new sd(b);
                    b.valign = "center";
                    c.add(b);
                    var e = new Lg(0, d);
                    e.valign = "center";
                    c.add(e);
                    var f = new Lf(0, 0, d, 3);
                    c.add(f);
                    f.update.add(function (a) {
                        e.set_value(f.get_value())
                    });
                    e.change.add(function (b) {
                        f.set_value(Math.round(b));
                        a.updateSwatch()
                    });
                    return e
                };
                this.hue = d("Hue", 359);
                this.sat = d("Sat", 100);
                this.val = d("Val", 100);
                b.add(c);
                this.add(b)
            };
            g["coogee.ui.forms.ColorForm"] = Mg;
            Mg.__name__ = "coogee.ui.forms.ColorForm";
            Mg.__super__ = Bc;
            Mg.prototype = l(Bc.prototype, {
                set: function (a) {
                    this.setColor(a)
                },
                get: function () {
                    return this.color
                },
                setColor: function (a) {
                    a = Ta.rgb2hsv(a);
                    this.hue.set_value(a.x);
                    this.sat.set_value(100 * a.y);
                    this.val.set_value(100 * a.z)
                },
                updateSwatch: function () {
                    var a =
                        this.color = Ta.hsv(this.hue.get_value(), this.sat.get_value() / 100, this.val.get_value() / 100);
                    this.swatch.paint.bmp.get_bitmapData().setPixel(0, 0, a)
                },
                __class__: Mg
            });
            var qk = function () {
                var a = this;
                Bc.call(this);
                var b = new Oc,
                    c = new jd;
                c.setMargins(0, 10);
                this.face = new Wc("");
                this.face.set_width(300);
                this.face.set_prompt("Font name");
                this.face.update.add(function (b) {
                    a.updatePreview()
                });
                c.add(this.face);
                this.size = new Lf(18, 8, 96);
                this.size.set_restrict("0-9");
                this.size.update.add(function (b) {
                    a.updatePreview()
                });
                c.add(this.size);
                var d = new jd;
                d.setMargins(0, 10);
                this.bold = new If("Bold");
                this.bold.changed.add(function (b) {
                    a.updatePreview()
                });
                d.add(this.bold);
                this.italic = new If("Italic");
                this.italic.changed.add(function (b) {
                    a.updatePreview()
                });
                d.add(this.italic);
                this.preview = new qi;
                this.preview.halign = "fill";
                this.preview.set_height(100);
                b.add(c);
                b.add(d);
                b.add(this.preview);
                this.add(b)
            };
            g["coogee.ui.forms.FontForm"] = qk;
            qk.__name__ = "coogee.ui.forms.FontForm";
            qk.__super__ = Bc;
            qk.prototype =
                l(Bc.prototype, {
                    set: function (a) {
                        this.face.set_text(null != a.face ? a.face : "");
                        this.size.set_value(a.size);
                        this.bold.set_value(a.bold);
                        this.italic.set_value(a.italic);
                        this.embedded = a.embedded;
                        this.face.set_prompt(null != this.embedded && mc.exists(this.embedded) ? mc.getFont(this.embedded).name : "Font name");
                        this.preview.setFont(a);
                        this.face.selecteAll();
                        null != this.stage && this.stage.set_focus(this.face)
                    },
                    get: function () {
                        return {
                            face: "" == this.face.get_text() ? null : this.face.get_text(),
                            embedded: this.embedded,
                            size: this.size.get_value(),
                            bold: this.bold.get_value(),
                            italic: this.italic.get_value()
                        }
                    },
                    updatePreview: function () {
                        this.preview.setFont(this.get())
                    },
                    __class__: qk
                });
            var qi = function (a) {
                null == a && (a = "Sample Text");
                ka.call(this);
                this.border = Qa.black();
                this.addChild(this.border);
                this.bg = Qa.white();
                this.bg.set_x(this.bg.set_y(1));
                this.addChild(this.bg);
                this.tf = new Ac;
                this.tf.set_text(a);
                this.fixText();
                this.addChild(this.tf);
                this.maskRect = new je;
                this.addChild(this.maskRect);
                this.tf.set_mask(this.maskRect)
            };
            g["coogee.ui.forms._FontForm.FontPreview"] =
                qi;
            qi.__name__ = "coogee.ui.forms._FontForm.FontPreview";
            qi.__super__ = ka;
            qi.prototype = l(ka.prototype, {
                layout: function () {
                    var a = this.maskRect.get_graphics();
                    a.clear();
                    a.beginFill(16711680);
                    a.drawRect(0, 0, this.rWidth, this.rHeight);
                    this.border.set_width(this.rWidth);
                    this.border.set_height(this.rHeight);
                    this.bg.set_width(this.rWidth - 2);
                    this.bg.set_height(this.rHeight - 2);
                    this.tf.set_x(Math.max((this.rWidth - this.tf.get_width()) / 2, 0));
                    this.tf.set_y(Math.max((this.rHeight - this.tf.get_height()) / 2,
                        0))
                },
                setFont: function (a) {
                    a = Lb.font2format(a);
                    null == a && (a = new Ne);
                    a.color = ea.black;
                    this.tf.setTextFormat(a);
                    this.fixText();
                    this.layout()
                },
                fixText: function () {
                    this.tf.set_autoSize(1);
                    var a = this.tf.get_width(),
                        b = this.tf.get_height();
                    this.tf.set_autoSize(2);
                    this.tf.set_width(Math.ceil(a));
                    this.tf.set_height(Math.ceil(b))
                },
                __class__: qi
            });
            var ni = function (a) {
                Yd.call(this, ["OK"]);
                var b = new Ng;
                a = new mi(a);
                a.mouseEnabled = !1;
                a.mouseChildren = !1;
                a.set_width(360);
                b.add(a);
                this.add(b)
            };
            g["coogee.ui.forms.Message"] =
                ni;
            ni.__name__ = "coogee.ui.forms.Message";
            ni.__super__ = Yd;
            ni.prototype = l(Yd.prototype, {
                getTitle: function () {
                    return "Message"
                },
                __class__: ni
            });
            var rk = function () {
                Bc.call(this);
                this.content = new Oc;
                this.content.setMargins(12, 12);
                this.add(this.content)
            };
            g["coogee.ui.forms.MultiColorForm"] = rk;
            rk.__name__ = "coogee.ui.forms.MultiColorForm";
            rk.__super__ = Bc;
            rk.prototype = l(Bc.prototype, {
                onButton: function (a) {
                    "Add" == a ? (a = this.get(), a.push(a[a.length - 1]), this.set(a)) : Bc.prototype.onButton.call(this,
                        a)
                },
                set: function (a) {
                    this.content.removeChildren();
                    for (var b = [], c = 0, d = a.length; c < d;) {
                        var e = c++,
                            f = a[e];
                        if (0 < e) {
                            var h = new Qa(ea.black);
                            h.halign = "fill";
                            h.setSize(2, 2);
                            this.content.add(h)
                        }
                        e = new sk(this.content, f, 0 == e, e == a.length - 1);
                        e.action.add(p(this, this.onItemAction));
                        b.push(e)
                    }
                    this.items = b;
                    this.add(this.content);
                    T.__cast(this.parent, Fd).resize(!0)
                },
                get: function () {
                    for (var a = [], b = 0, c = this.items; b < c.length;) {
                        var d = c[b];
                        ++b;
                        a.push(d.color)
                    }
                    return a
                },
                onItemAction: function (a, b) {
                    var c = this.items.indexOf(a),
                        d = this.get();
                    d.splice(c, 1);
                    switch (b) {
                        case "Duplicate":
                            d.splice(c, 0, a.color);
                            d.splice(c, 0, a.color);
                            break;
                        case "Move down":
                            d.splice(c + 1, 0, a.color);
                            break;
                        case "Move up":
                            d.splice(c - 1, 0, a.color)
                    }
                    this.set(d)
                },
                __class__: rk
            });
            var sk = function (a, b, c, d) {
                this.action = new Gg;
                var e = this;
                this.color = b;
                var f = new jd;
                f.setMargins(0, 10);
                var h = new Oc;
                h.setMargins(0, 10);
                this.hex = new Wc("#000000", !0);
                this.hex.set_text(R.hex(b, 6));
                this.hex.set_restrict("#0-9a-fA-F");
                this.hex.update.add(p(this, this.onHex));
                h.add(this.hex);
                this.swatch = new Mf(b, 10 + 2 * this.hex.get_height());
                this.swatch.halign = "fill";
                h.add(this.swatch);
                f.add(h);
                h = new Nf(4);
                h.setMargins(0, 10);
                var r = ["Duplicate"];
                c || r.push("Move up");
                d || r.push("Move down");
                c && d || r.push("Delete");
                c = new Kg("...", r);
                c.action.add(function (a) {
                    e.action.dispatch(e, a)
                });
                c.valign = "fill";
                b = Ta.rgb2hsv(b);
                this.hue = this.addRow(h, "Hue", 359, b.x, c);
                this.sat = this.addRow(h, "Sat", 100, 100 * b.y);
                this.val = this.addRow(h, "Val", 100, 100 * b.z);
                f.add(h);
                a.add(f)
            };
            g["coogee.ui.forms.ColorItem"] =
                sk;
            sk.__name__ = "coogee.ui.forms.ColorItem";
            sk.prototype = {
                addRow: function (a, b, c, d, e) {
                    var f = this;
                    c |= 0;
                    d |= 0;
                    b = new sd(b);
                    b.valign = "center";
                    a.add(b);
                    var h = new Lg(0, c);
                    h.set_value(d);
                    h.valign = "center";
                    a.add(h);
                    var r = new Lf(d, 0, c, 3);
                    a.add(r);
                    r.update.add(function (a) {
                        h.set_value(r.get_value())
                    });
                    h.change.add(function (a) {
                        r.set_value(Math.round(a));
                        f.updateSwatch()
                    });
                    null != e ? a.add(e) : a.addEmpty();
                    return h
                },
                onHex: function (a) {
                    "#" == a.charAt(0) && (a = ja.substr(a, 1, null));
                    if (3 == a.length) {
                        var b = [];
                        b.push(a.charAt(0) +
                            a.charAt(0));
                        b.push(a.charAt(1) + a.charAt(1));
                        b.push(a.charAt(2) + a.charAt(2));
                        a = b.join("")
                    }
                    6 < a.length && (a = ja.substr(a, 0, 6));
                    a = n.parseInt("0x" + a);
                    a = Ta.rgb2hsv(a);
                    this.hue.set_value(a.x);
                    this.sat.set_value(100 * a.y);
                    this.val.set_value(100 * a.z);
                    this.updateSwatch()
                },
                updateSwatch: function () {
                    var a = this.color = Ta.hsv(this.hue.get_value(), this.sat.get_value() / 100, this.val.get_value() / 100);
                    this.swatch.paint.bmp.get_bitmapData().setPixel(0, 0, a);
                    this.hex.set_text(R.hex(this.color, 6))
                },
                __class__: sk
            };
            var nc = function (a,
                               b) {
                this.onNullAsset = function (a, b) {
                    console.log("No " + a + " palette!")
                };
                this.getName = function (a) {
                    return "palette"
                };
                var c = this;
                Pc.call(this);
                this.form = new jd;
                this.form.setMargins(0, 0);
                this.add(this.form);
                this.tabs = new ri;
                this.form.add(this.tabs);

                var exportBtn = new Kg("Save", ["JSON","PROTO"], ["json","proto"]);
                exportBtn.action.add(function (fmt) {
                    c.onSave(c.getPalette(), fmt);
                });

                var d = [
                    new Ke("Load", p(this, this.onLoad)),
                    new Ke("Apply", function () {if (GetParamName === "") {a(c.getPalette());}}),
                    exportBtn,
                ];
                if (null != b) {
                    for (var e = [], f = []; 0 < b.length;) e.push(b.shift()), f.push(b.shift());
                    b = new Kg("Preset", e, f);
                    b.action.add(function (a) {
                        c.loadPreset(a)
                    });
                    d.unshift(b)
                }
                this.buttons = new si(d);
                this.form.add(this.buttons);
                this.onApply = a;
                this.values = []
            };
            g["coogee.ui.forms.PaletteForm"] = nc;
            nc.__name__ = "coogee.ui.forms.PaletteForm";
            nc.txt2color = function (a) {
                "#" == a.charAt(0) && (a = ja.substr(a, 1, null));
                if (3 == a.length) {
                    var b = [];
                    b.push(a.charAt(0) + a.charAt(0));
                    b.push(a.charAt(1) + a.charAt(1));
                    b.push(a.charAt(2) + a.charAt(2));
                    a = b.join("")
                }
                6 < a.length && (a = ja.substr(a, 0, 6));
                return n.parseInt("0x" +
                    a)
            };
            nc.txt2float = function (a, b, c) {
                return hc.gate(parseFloat(a), b, c)
            };
            nc.txt2int = function (a, b, c) {
                return hc.gatei(n.parseInt(a), b | 0, c | 0)
            };
            nc.__super__ = Pc;
            nc.prototype = l(Pc.prototype, {
                onShow: function () {
                    Pc.prototype.onShow.call(this);
                    this.tabs.onTab(nc.lastTab);
                    this.tabs.change.add(function (a) {
                        nc.lastTab = a
                    })
                },
                onEnter: function () {
                    if (GetParamName === "") {
                        this.onApply(this.getPalette());
                    }
                },
                layout: function () {
                    null != this.tabs && this.tabs.layout();
                    this.form.layout();
                    Pc.prototype.layout.call(this)
                },
                onKey: function (a) {
                    var b = this.tabs.getTab();
                    switch (a) {
                        case 33:
                            if (b < this.tabs.getTabCount() - 1) this.tabs.onTab(b + 1);
                            break;
                        case 34:
                            if (0 < b) this.tabs.onTab(this.tabs.getTab() - 1);
                            break;
                        default:
                            return Pc.prototype.onKey.call(this, a)
                    }
                    return !0
                },
                addTab: function (a) {
                    this.grid = new Nf(2);
                    this.tabs.addTab(a, this.grid)
                },
                addColor: function (a, b, c) {
                    var d = this;
                    null == this.grid && this.addTab(null);
                    var e = new sd(b);
                    this.grid.add(e);
                    b = new jd;
                    b.setMargins(0, 10);
                    var f = new Wc("#000000", !0);
                    f.set_text(R.hex(c, 6));
                    f.set_restrict("#0-9a-fA-F");
                    b.add(f);
                    var h = new Mf(c, f.get_height());
                    b.add(h);
                    f.update.add(function (a) {
                        a = nc.txt2color(a);
                        h.paint.bmp.get_bitmapData().setPixel(0, 0, a)
                    });
                    h.onClick(function () {
                        d.onColor(e.get_text(), h, function (a) {
                            f.set_text(R.hex(a, 6));
                            h.paint.bmp.get_bitmapData().setPixel(0, 0, a)
                        })
                    });
                    this.grid.add(b);
                    this.values.push({
                        id: a,
                        type: Cb.COLOR,
                        view: f,
                        swatch: h
                    });
                    this.layout()
                },
                addFloat: function (a, b, c, d, e) {
                    null == this.grid && this.addTab(null);
                    b = new sd(b);
                    this.grid.add(b);
                    c = new pi(c, d, e, 5);
                    this.grid.add(c);
                    this.values.push({
                        id: a,
                        type: Cb.FLOAT,
                        view: c,
                        min: d,
                        max: e
                    });
                    this.layout()
                },
                addEnum: function (a, b, c, d) {
                    null == this.grid && this.addTab(null);
                    b = new sd(b);
                    this.grid.add(b);
                    c = Le.ofStrings(c);
                    c.set_text(d);
                    c.halign = "fill";
                    this.grid.add(c);
                    this.values.push({
                        id: a,
                        type: Cb.STRING,
                        view: c
                    });
                    this.layout()
                },
                addCheck: function (a, b, c) {
                    null == this.grid && this.addTab(null);
                    b = new sd(b);
                    this.grid.add(b);
                    b = new If;
                    b.set_value(c);
                    b.valign = "fill";
                    this.grid.add(b);
                    this.values.push({
                        id: a,
                        type: Cb.BOOL,
                        view: b
                    });
                    this.layout()
                },
                onColor: function (a, b, c) {
                    var d = Ma.findForm(Mg);
                    null == d && (d = new Mg,
                        Ma.showDialog(d));
                    d.link(a, b.paint.bmp.get_bitmapData().getPixel(0, 0), c, this)
                },
                onLoad: function () {
                    var a = this,
                        b = new Of;
                    b.addEventListener("select", function (c) {
                        b.addEventListener("complete", p(a, a.onPaletteLoaded));
                        b.load()
                    });
                    var c = [new ti("Palette", "*.json;*.pb;")];
                    b.browse(c)
                },
                loadPreset: function (a) {
                    if (mc.exists(a)) this.loadPalette(Lb.fromJSON(mc.getText(a)));
                    else this.onNullAsset(a, this)
                },
                onPaletteLoaded: function (a) {
                    try {
                        var fr = T.__cast(a.target, Of);
                        var pvo = DataViewer.decodePaletteFile(fr.name, fr.data);
                        var legacyJson = DataViewer.paletteLegacyJsonFromPaletteViewerObj(pvo);
                        this.loadPalette(Lb.fromJSON(legacyJson));
                    } catch (b) {
                        Ia.lastError = b;
                        b = fa.caught(b).unwrap();
                        lc.show(n.string(b));
                    }
                },
                loadPalette: function (a) {
                    for (var b = 0, c = this.values; b < c.length;) {
                        var d = c[b];
                        ++b;
                        switch (d.type._hx_index) {
                            case 0:
                                var e = d.view,
                                    f = a.getColor(d.id, nc.txt2color(e.get_text()));
                                d.swatch.paint.bmp.get_bitmapData().setPixel(0, 0, f);
                                e.set_text(R.hex(f, 6));
                                break;
                            case 1:
                                e = d.view;
                                f = a.getMulti(d.id, nc.txt2color(e.get_text()));
                                d = d.multi;
                                d.colors = f;
                                var h = d.colors[0];
                                d.paint.bmp.get_bitmapData().setPixel(0, 0, h);
                                h = 1 < d.colors.length ? d.colors[1] : ea.white;
                                d.paint2.bmp.get_bitmapData().setPixel(0, 0, h);
                                e.set_text(R.hex(f[0],
                                    6));
                                break;
                            case 2:
                                e = d.view;
                                d = a.getFont(d.id, e.get_value());
                                e.set_value(d);
                                break;
                            case 3:
                                e = d.view;
                                d = a.getFloat(d.id, nc.txt2float(e.get_text(), d.min, d.max));
                                e.set_text(null == d ? "null" : "" + d);
                                break;
                            case 4:
                                e = d.view;
                                d = a.getInt(d.id, nc.txt2int(e.get_text(), d.min, d.max));
                                e.set_text(null == d ? "null" : "" + d);
                                break;
                            case 5:
                                d.view instanceof Le ? (e = d.view, d = a.getString(d.id, e.get_value()), e.set_value(d)) : (e = d.view, d = a.getString(d.id, e.get_text()), e.set_text(d));
                                break;
                            case 6:
                                e = d.view, e.set_value(a.getBool(d.id, e.get_value()))
                        }
                    }
                },
                getPalette: function () {
                    for (var a = new Lb, b = 0, c = this.values; b < c.length;) {
                        var d = c[b];
                        ++b;
                        switch (d.type._hx_index) {
                            case 0:
                                var e = d.view,
                                    f = nc.txt2color(e.get_text());
                                a.setColor(d.id, f);
                                e.set_text(R.hex(f, 6));
                                break;
                            case 1:
                                e = d.view;
                                f = d.multi.colors;
                                a.setMulti(d.id, f);
                                e.set_text(R.hex(f[0], 6));
                                break;
                            case 2:
                                e = d.view.get_value();
                                a.setFont(d.id, e);
                                break;
                            case 3:
                                e = d.view;
                                f = nc.txt2float(e.get_text(), d.min, d.max);
                                a.setFloat(d.id, f);
                                e.set_text(null == f ? "null" : "" + f);
                                break;
                            case 4:
                                e = d.view;
                                f = nc.txt2int(e.get_text(), d.min,
                                    d.max);
                                a.setInt(d.id, f);
                                e.set_text(null == f ? "null" : "" + f);
                                break;
                            case 5:
                                d.view instanceof Le ? a.setString(d.id, d.view.get_value()) : a.setString(d.id, d.view.get_text());
                                break;
                            case 6:
                                a.setBool(d.id, d.view.get_value())
                        }
                    }
                    return a
                },
                onSave: function (a, fmt) {
                    var pvo = DataViewer.paletteViewerObjFromLegacyJsonText(a.json());
                    if (fmt === "proto") {
                        var bytes = DataViewer.paletteProtoBytesFromPaletteViewerObj(pvo);
                        Og.saveText(bytes, this.getName(a) + ".palette.vr.pb", "application/octet-stream");
                    } else {
                        var json = DataViewer.paletteLegacyJsonFromPaletteViewerObj(pvo);
                        Og.saveText(json, this.getName(a) + ".palette.vr.json", "application/json");
                    }
                },
                __class__: nc
            });
            var si = function (a) {
                ka.call(this);
                this.bg = Qa.light();
                this.add(this.bg);
                this.vbox = new Oc;
                this.add(this.vbox);
                for (var b = 0; b < a.length;) {
                    var c = a[b];
                    ++b;
                    c.set_width(100);
                    this.vbox.add(c)
                }
                this.setSize(this.vbox.get_width(),
                    this.vbox.get_height());
                this.valign = "fill"
            };
            g["coogee.ui.forms.ButtonColumn"] = si;
            si.__name__ = "coogee.ui.forms.ButtonColumn";
            si.__super__ = ka;
            si.prototype = l(ka.prototype, {
                layout: function () {
                    this.rWidth = Math.max(this.rWidth, this.vbox.get_width());
                    this.bg.set_width(this.rWidth);
                    this.bg.set_height(this.rHeight);
                    this.vbox.set_x((this.rWidth - this.vbox.get_width()) / 2 | 0);
                    this.vbox.set_y(0)
                },
                __class__: si
            });
            var Nf = function (a) {
                null == a && (a = 2);
                this.margin = this.gap = 10;
                ka.call(this);
                this.cols =
                    a
            };
            g["coogee.ui.layouts.Grid"] = Nf;
            Nf.__name__ = "coogee.ui.layouts.Grid";
            Nf.__super__ = ka;
            Nf.prototype = l(ka.prototype, {
                layout: function () {
                    for (var a = [], b = 0, c = this.cols; b < c;) b++, a.push(0);
                    c = a;
                    var d = [];
                    a = 0;
                    for (b = this.get_numChildren(); a < b;) {
                        var e = a++;
                        var f = e % this.cols,
                            h = e / this.cols | 0;
                        d.length <= h && d.push(0);
                        e = this.getChildAt(e);
                        var r = e.get_width();
                        c[f] < r && (c[f] = r);
                        f = e.get_height();
                        d[h] < f && (d[h] = f)
                    }
                    var m = r = this.margin;
                    a = h = f = 0;
                    for (b = this.get_numChildren(); a < b;) {
                        e = a++;
                        e = this.getChildAt(e);
                        var C = r,
                            g = m;
                        if (e instanceof ka) {
                            var k = T.__cast(e, ka);
                            switch (k.halign) {
                                case "center":
                                    C += (c[f] - k.get_width()) / 2;
                                    break;
                                case "fill":
                                    k.set_width(c[f]);
                                    break;
                                case "right":
                                    C += c[f] - k.get_width()
                            }
                            switch (k.valign) {
                                case "bottom":
                                    g += d[h] - k.get_height();
                                    break;
                                case "center":
                                    g += (d[h] - k.get_height()) / 2;
                                    break;
                                case "fill":
                                    k.set_height(d[h])
                            }
                        }
                        e.set_x(C);
                        e.set_y(g);
                        r += c[f] + this.gap;
                        ++f;
                        f == this.cols && (r = this.margin, m += d[h] + this.gap, ++h, f = 0)
                    }
                    this.rHeight = 2 * this.margin + (d.length - 1) * this.gap;
                    for (a = 0; a < d.length;) f = d[a], ++a,
                        this.rHeight += f;
                    this.rWidth = 2 * this.margin + (c.length - 1) * this.gap;
                    for (a = 0; a < c.length;) r = c[a], ++a, this.rWidth += r
                },
                add: function (a) {
                    ka.prototype.add.call(this, a);
                    this.layout()
                },
                addEmpty: function () {
                    this.add(new Qa(0, 0))
                },
                setMargins: function (a, b) {
                    this.margin = a;
                    this.gap = b
                },
                __class__: Nf
            });
            var jd = function () {
                this.margin = this.gap = 10;
                ka.call(this)
            };
            g["coogee.ui.layouts.HBox"] = jd;
            jd.__name__ = "coogee.ui.layouts.HBox";
            jd.__super__ = ka;
            jd.prototype = l(ka.prototype, {
                layout: function () {
                    for (var a =
                        this.margin, b = 0, c = !1, d = 0, e = this.get_numChildren(); d < e;) {
                        var f = d++;
                        f = this.getChildAt(f);
                        "top" != f.valign && (c = !0);
                        "fill" != f.valign && b < f.get_height() && (b = f.get_height());
                        f.set_x(a);
                        f.set_y(this.margin);
                        a += f.get_width() + this.gap
                    }
                    if (c)
                        for (d = 0, e = this.get_numChildren(); d < e;) switch (f = d++, f = this.getChildAt(f), f.valign) {
                            case "bottom":
                                f.set_y(this.margin + (b - f.get_height()));
                                break;
                            case "center":
                                f.set_y(this.margin + (b - f.get_height()) / 2);
                                break;
                            case "fill":
                                f.set_height(b)
                        }
                    this.rWidth = a > this.margin ? a - this.gap + this.margin :
                        2 * this.margin;
                    this.rHeight = b + 2 * this.margin
                },
                add: function (a) {
                    ka.prototype.add.call(this, a);
                    this.layout()
                },
                setMargins: function (a, b) {
                    this.margin = a;
                    this.gap = b
                },
                __class__: jd
            });
            var Ng = function () {
                this.margin = 10;
                ka.call(this)
            };
            g["coogee.ui.layouts.SimpleBox"] = Ng;
            Ng.__name__ = "coogee.ui.layouts.SimpleBox";
            Ng.__super__ = ka;
            Ng.prototype = l(ka.prototype, {
                layout: function () {
                    for (var a = 0, b = 0, c = 0, d = this.get_numChildren(); c < d;) {
                        var e = c++;
                        e = this.getChildAt(e);
                        a < e.get_width() && (a = e.get_width());
                        b < e.get_height() && (b = e.get_height());
                        e.set_x(this.margin);
                        e.set_y(this.margin)
                    }
                    this.rWidth = a + 2 * this.margin;
                    this.rHeight = b + 2 * this.margin
                },
                add: function (a) {
                    ka.prototype.add.call(this, a);
                    this.layout()
                },
                setMargins: function (a) {
                    this.margin = a
                },
                __class__: Ng
            });
            var ri = function () {
                this.change = new ac;
                Oc.call(this);
                this.setMargins(0, 0);
                this.tabRow = new ui;
                this.tabRow.click.add(p(this, this.onTab));
                this.tabRow.halign = "fill";
                this.add(this.tabRow);
                this.stack = new Ng;
                this.stack.setMargins(0);
                this.add(this.stack)
            };
            g["coogee.ui.layouts.Tabs"] =
                ri;
            ri.__name__ = "coogee.ui.layouts.Tabs";
            ri.__super__ = Oc;
            ri.prototype = l(Oc.prototype, {
                layout: function () {
                    null != this.stack && this.stack.layout();
                    Oc.prototype.layout.call(this)
                },
                addTab: function (a, b) {
                    null != a && this.tabRow.addTab(a);
                    this.stack.add(b);
                    this.tabRow.get_selected() != this.stack.get_numChildren() - 1 && null != a && b.set_visible(!1);
                    this.layout()
                },
                onTab: function (a) {
                    var b = this.tabRow.get_selected();
                    -
                        1 != b && this.stack.getChildAt(b).set_visible(!1);
                    this.stack.getChildAt(a).set_visible(!0);
                    this.tabRow.set_selected(a);
                    this.change.dispatch(a)
                },
                getTab: function () {
                    return this.tabRow.get_selected()
                },
                getTabCount: function () {
                    return this.tabRow.get_size()
                },
                __class__: ri
            });
            var ud = function () {
                this._selected = -1;
                this.tabs = [];
                this.rowSize = 256;
                this.click = new ac;
                ka.call(this);
                this.bg = Qa.light();
                this.add(this.bg)
            };
            g["coogee.ui.layouts._Tabs.TabButtons"] = ud;
            ud.__name__ = "coogee.ui.layouts._Tabs.TabButtons";
            ud.__super__ = ka;
            ud.prototype = l(ka.prototype, {
                get_selected: function () {
                    return this._selected
                },
                set_selected: function (a) {
                    return this._selected =
                        a
                },
                get_size: function () {
                    return this.tabs.length
                },
                layout: function () {
                    this.bg.setSize(this.rWidth, this.rHeight)
                },
                addTab: function (a) {
                    a = new vi(a);
                    a.click.add(p(this, this.onTab));
                    this.tabs.push(a);
                    return a
                },
                onTab: function (a) {
                    this.click.dispatch(this.tabs.indexOf(a))
                },
                __class__: ud,
                __properties__: l(ka.prototype.__properties__, {
                    get_size: "get_size",
                    set_selected: "set_selected",
                    get_selected: "get_selected"
                })
            });
            var tk = function () {
                this.first = 0;
                ud.call(this);
                this.stripe = new jd;
                this.stripe.setMargins(0, 0);
                this.add(this.stripe);
                this.more = new Ke("...");
                this.more.click.add(p(this, this.showList));
                this.more.set_visible(!1);
                this.add(this.more)
            };
            g["coogee.ui.layouts._Tabs.TabRow"] = tk;
            tk.__name__ = "coogee.ui.layouts._Tabs.TabRow";
            tk.__super__ = ud;
            tk.prototype = l(ud.prototype, {
                layout: function () {
                    ud.prototype.layout.call(this);
                    this.more.set_height(this.rHeight - 8);
                    this.more.set_x(this.rWidth - this.more.get_width());
                    this.more.set_y(4)
                },
                addTab: function (a) {
                    a = ud.prototype.addTab.call(this, a);
                    this.stripe.add(a);
                    this.updateSize();
                    this.layout();
                    1 == this.tabs.length && this.set_selected(0);
                    return a
                },
                set_selected: function (a) {
                    if (0 == this.tabs.length) return 0;
                    -
                        1 != this._selected && this.tabs[this._selected].set_selected(!1);
                    this._selected = a;
                    if (this.tabs.length > this.rowSize) {
                        this.first > a ? this.first = a : a >= this.first + this.rowSize && (this.first = a - this.rowSize + 1);
                        for (var b = 0, c = this.tabs.length; b < c;) a = b++, this.tabs[a].set_visible(a >= this.first && a < this.first + this.rowSize);
                        this.stripe.set_x(-this.tabs[this.first].get_x())
                    }
                    -
                        1 != this._selected && this.tabs[this._selected].set_selected(!0);
                    return this.get_selected()
                },
                updateSize: function () {
                    if (this.tabs.length <= this.rowSize) this.more.set_visible(!1), this.rWidth = this.stripe.get_width();
                    else {
                        this.more.set_visible(!0);
                        for (var a = this.rWidth = 0, b = this.tabs.length - this.rowSize + 1; a < b;) {
                            for (var c = a++, d = 0, e = 0, f = this.rowSize; e < f;) {
                                var h = e++;
                                d += this.tabs[c + h].get_width()
                            }
                            this.rWidth < d && (this.rWidth = d)
                        }
                        this.rWidth += 4 + this.more.get_width()
                    }
                    this.rHeight = this.stripe.get_height()
                },
                showList: function () {
                    for (var a = this, b = new td, c = 0, d = this.tabs.length; c < d;) {
                        var e = [c++];
                        b.addItem(this.tabs[e[0]].get_text(), function (b) {
                            return function () {
                                a.click.dispatch(b[0])
                            }
                        }(e), this.get_selected() == e[0])
                    }
                    c = Ma.getRect(this.more);
                    Ma.showMenuAt(b, Math.ceil(c.x), c.get_bottom())
                },
                __class__: tk
            });
            var ui = function () {
                ud.call(this);
                this.stripes = new Oc;
                this.stripes.setMargins(0, 0);
                this.add(this.stripes)
            };
            g["coogee.ui.layouts._Tabs.TabMultiRow"] = ui;
            ui.__name__ = "coogee.ui.layouts._Tabs.TabMultiRow";
            ui.__super__ = ud;
            ui.prototype = l(ud.prototype, {
                addTab: function (a) {
                    a =
                        ud.prototype.addTab.call(this, a);
                    null == this.lastRow && (this.lastRow = new jd, this.lastRow.setMargins(0, 0), this.stripes.add(this.lastRow));
                    this.lastRow.add(a);
                    this.lastRow.get_numChildren() >= this.rowSize && (this.lastRow = null);
                    this.stripes.layout();
                    this.updateSize();
                    this.layout();
                    1 == this.tabs.length && this.set_selected(0);
                    return a
                },
                set_selected: function (a) {
                    if (0 == this.tabs.length) return 0;
                    -
                        1 != this._selected && this.tabs[this._selected].set_selected(!1);
                    this._selected = a;
                    if (-1 != this._selected) {
                        a = this.tabs[this._selected];
                        a.set_selected(!0);
                        for (var b = this.stripes.getChildAt(this.stripes.get_numChildren() - 1); -1 == b.getChildIndex(a);) b = this.stripes.removeChildAt(0), this.stripes.add(b)
                    }
                    return this.get_selected()
                },
                updateSize: function () {
                    this.rWidth = this.stripes.get_width();
                    this.rHeight = this.stripes.get_height()
                },
                __class__: ui
            });
            var vi = function (a) {
                this.click = new ac;
                ka.call(this);
                this.bg = new Ja;
                this.addChild(this.bg);
                this.tf = Nc.get("", ea.format(ea.uiFont, ea.smallSize, ea.black));
                this.tf.set_x(4);
                this.tf.set_y(8);
                this.addChild(this.tf);
                this.set_text(a);
                this.set_selected(!1);
                this.set_buttonMode(!0);
                this.addEventListener("click", p(this, this.onClick))
            };
            g["coogee.ui.layouts.Tab"] = vi;
            vi.__name__ = "coogee.ui.layouts.Tab";
            vi.__super__ = ka;
            vi.prototype = l(ka.prototype, {
                layout: function () {
                    var a = this.bg.get_graphics();
                    a.clear();
                    a.beginFill(ea.white);
                    a.drawRoundRectComplex(0, 4, this.rWidth, this.rHeight - 4, 4, 4, 0, 0)
                },
                onClick: function (a) {
                    this.click.dispatch(this)
                },
                get_text: function () {
                    return this.tf.get_text()
                },
                set_text: function (a) {
                    this.tf.set_text(a);
                    this.setSize(this.tf.get_width() + 8, Math.ceil(this.tf.get_height() + 8));
                    return a
                },
                set_selected: function (a) {
                    this.mouseEnabled = !a;
                    this.bg.set_alpha(a ? 1 : 0);
                    return a
                },
                __class__: vi,
                __properties__: l(ka.prototype.__properties__, {
                    set_selected: "set_selected",
                    set_text: "set_text",
                    get_text: "get_text"
                })
            });
            var Nc = function () {
            };
            g["coogee.ui.utils.Text"] = Nc;
            Nc.__name__ = "coogee.ui.utils.Text";
            Nc.get = function (a, b, c, d) {
                null == a && (a = "");
                var e = new Ac;
                null != c || null != d ? Nc.activate(e, c, d) : e.set_selectable(!1);
                e.set_autoSize(1);
                null != b && e.set_defaultTextFormat(b);
                e.set_htmlText(a);
                return e
            };
            Nc.input = function (a, b, c) {
                null == a && (a = "");
                var d = new Ac;
                d.set_type(1);
                d.set_borderColor(d.get_defaultTextFormat().color);
                d.set_background(!0);
                d.set_border(!0);
                d.addEventListener("change", function (a) {
                    null != c && c()
                });
                d.set_defaultTextFormat(b);
                d.set_text("" != a ? a : " ");
                d.set_autoSize(1);
                d.set_height(d.get_height());
                d.set_autoSize(2);
                d.set_text(a);
                return d
            };
            Nc.activate = function (a, b, c) {
                a.set_type(1);
                a.addEventListener("focusIn",
                    function (b) {
                        a.set_borderColor(a.get_defaultTextFormat().color);
                        a.set_border(!0)
                    });
                a.addEventListener("focusOut", function (b) {
                    a.set_border(!1);
                    null != c && c()
                });
                a.addEventListener("keyDown", function (b) {
                    if (13 == b.keyCode || 27 == b.keyCode) a.stage.set_focus(a.stage), b.stopPropagation()
                });
                a.addEventListener("change", function (a) {
                    null != b && b()
                })
            };
            var kf = function () {
            };
            g["geom.Chaikin"] = kf;
            kf.__name__ = "geom.Chaikin";
            kf.render = function (a, b, c, d) {
                null == c && (c = 1);
                for (var e = 0; e < c;) {
                    e++;
                    for (var f = [], h = a.length, r = 1, m = h - 1; r < m;) {
                        var C = r++,
                            g = a[C];
                        null == d || -1 == d.indexOf(g) ? (f.push(vc.lerp(g, a[C - 1], .25)), f.push(vc.lerp(g, a[C + 1], .25))) : f.push(g)
                    }
                    b ? (r = a[h - 1], null == d || -1 == d.indexOf(r) ? (f.push(vc.lerp(r, a[h - 2], .25)), f.push(vc.lerp(r, a[0], .25))) : f.push(r), r = a[0], null == d || -1 == d.indexOf(r) ? (f.push(vc.lerp(r, a[h - 1], .25)), f.push(vc.lerp(r, a[1], .25))) : f.push(r)) : (f.unshift(a[0]), f.push(a[h - 1]));
                    a = f
                }
                return a
            };
            var Ta = function () {
            };
            g["geom.Color"] = Ta;
            Ta.__name__ = "geom.Color";
            Ta.rgbf = function (a,
                                b, c) {
                return (255 * a | 0) << 16 | (255 * b | 0) << 8 | 255 * c | 0
            };
            Ta.rgbfSafe = function (a, b, c) {
                return (hc.gate(255 * a, 0, 255) | 0) << 16 | (hc.gate(255 * b, 0, 255) | 0) << 8 | hc.gate(255 * c, 0, 255) | 0
            };
            Ta.lerp = function (a, b, c) {
                null == c && (c = .5);
                var d = a >>> 8 & 255,
                    e = a & 255,
                    f = b >>> 16,
                    h = b >>> 8 & 255;
                b &= 255;
                var r = 1 - c;
                return (J.toFloat(a >>> 16) * r + J.toFloat(f) * c | 0) << 16 | (J.toFloat(d) * r + J.toFloat(h) * c | 0) << 8 | J.toFloat(e) * r + J.toFloat(b) * c | 0
            };
            Ta.lerpHSV = function (a, b, c) {
                null == c && (c = .5);
                a = Ta.rgb2hsv(a);
                b = Ta.rgb2hsv(b);
                var d = 0 == a.y ? b.x : 0 == b.y ? a.x : Ta.lerpHue(a.x,
                        b.x, c),
                    e = 1 - c;
                return Ta.hsv(d, a.y * e + b.y * c, a.z * e + b.z * c)
            };
            Ta.lerpHue = HaxeShared.lerpHue;
            Ta.scale = function (a, b) {
                return Ta.rgbfSafe(J.toFloat(a >>> 16) / J.toFloat(255) * b, J.toFloat(a >>> 8 & 255) / J.toFloat(255) * b, J.toFloat(a & 255) / J.toFloat(255) * b)
            };
            Ta.multiply = function (a, b) {
                return Ta.rgbf(J.toFloat(a >>> 16) / J.toFloat(255) * (J.toFloat(b >>> 16) / J.toFloat(255)), J.toFloat(a >>> 8 & 255) / J.toFloat(255) *
                    (J.toFloat(b >>> 8 & 255) / J.toFloat(255)), J.toFloat(a & 255) / J.toFloat(255) * (J.toFloat(b & 255) / J.toFloat(255)))
            };
            Ta.hsv = function (a, b, c) {
                var d = function (a) {
                        a -= 360 * Math.floor(a / 360);
                        return hc.gate(Math.abs(a / 60 - 3) - 1, 0, 1)
                    },
                    e = d(a),
                    f = d(a - 120);
                a = d(a + 120);
                return Ta.rgbfSafe((e * b + 1 - b) * c, (f * b + 1 - b) * c, (a * b + 1 - b) * c)
            };
            Ta.rgb2hsv = function (a) {
                var b = J.toFloat(a >>> 16) / J.toFloat(255),
                    c = J.toFloat(a >>> 8 & 255) / J.toFloat(255);
                a = J.toFloat(a & 255) / J.toFloat(255);
                var d = Math.min(b, Math.min(c, a)),
                    e = Math.max(b, Math.max(c, a));
                return d ==
                e ? new Q(0, 0, d) : new Q(60 * ((b == d ? 3 : a == d ? 1 : 5) - (b == d ? c - a : a == d ? b - c : a - b) / (e - d)), (e - d) / e, e)
            };
            var vc = function () {
            };
            g["geom.GeomUtils"] = vc;
            vc.__name__ = "geom.GeomUtils";
            vc.intersectLines = function (a, b, c, d, e, f, h, r) {
                var m = c * r - d * h;
                if (0 == m) return null;
                m = (d * (e - a) - c * (f - b)) / m;
                return new ba(Math.abs(c) > Math.abs(d) ? (e - a + h * m) / c : (f - b + r * m) / d, m)
            };
            vc.lerp = function (a, b, c) {
                null == c && (c = .5);
                var d = a.x,
                    e = c;
                null == e && (e = .5);
                var f = a.y;
                a = c;
                null == a && (a = .5);
                return new ba(d + (b.x - d) * e, f + (b.y - f) * a)
            };
            var uk = function (a,
                               b) {
                this.start = a;
                this.end = b
            };
            g["geom.Segment"] = uk;
            uk.__name__ = "geom.Segment";
            uk.prototype = {
                __class__: uk
            };
            var Qc = function () {
            };
            g["geom.Triangulation"] = Qc;
            Qc.__name__ = "geom.Triangulation";
            Qc.earcut = function (a) {
                var b = [];
                Qc.earcutLinked(Qc.linkedList(a, 0, a.length), b);
                return b
            };
            Qc.linkedList = function (a, b, c) {
                for (var d = null; b < c;) {
                    var e = b++;
                    d = new vk(e, a[e], d)
                }
                return d
            };
            Qc.earcutLinked = function (a, b) {
                if (null != a)
                    for (var c = a; a.prev != a.next;) {
                        var d = a.prev,
                            e = a.next;
                        if (Qc.isEar(a)) b.push([d.i, a.i, e.i]), a.remove(), c = a = e.next;
                        else if (a = e, a == c) break
                    }
            };
            Qc.isEar = function (a) {
                var b = a.prev,
                    c = a.next,
                    d = b.p,
                    e = a.p,
                    f = c.p;
                if (0 <= (e.y - d.y) * (f.x - e.x) - (e.x - d.x) * (f.y - e.y)) return !1;
                for (var h = a.next.next; h != a.prev;) {
                    Qc.pointInTriangle(b.p, a.p, c.p, h.p) ? (d = h.prev.p, e = h.p, f = h.next.p, d = 0 <= (e.y - d.y) * (f.x - e.x) - (e.x - d.x) * (f.y - e.y)) : d = !1;
                    if (d) return !1;
                    h = h.next
                }
                return !0
            };
            Qc.pointInTriangle = function (a, b, c, d) {
                var e = a.x;
                a = a.y;
                var f = b.x;
                b = b.y;
                var h = c.x;
                c = c.y;
                var r = d.x;
                d = d.y;
                return 0 <= (h - r) * (a -
                    d) - (e - r) * (c - d) && 0 <= (e - r) * (b - d) - (f - r) * (a - d) ? 0 <= (f - r) * (c - d) - (h - r) * (b - d) : !1
            };
            var vk = function (a, b, c) {
                this.i = a;
                this.p = b;
                null == c ? (this.prev = this, this.next = this) : (this.next = c.next, this.prev = c, c.next.prev = this, c.next = this)
            };
            g["geom._Triangulation.Node"] = vk;
            vk.__name__ = "geom._Triangulation.Node";
            vk.prototype = {
                remove: function () {
                    this.next.prev = this.prev;
                    this.prev.next = this.next
                },
                __class__: vk
            };
            var rl = function () {
            };
            g["geom.polygons.PolyAccess"] = rl;
            rl.__name__ = "geom.polygons.PolyAccess";
            rl.tangent = function (a, b) {
                var c = a.length;
                return a[(b + 1) % c].subtract(a[(b + c - 1) % c])
            };
            var wi = function () {
            };
            g["geom.polygons.PolyBounds"] = wi;
            wi.__name__ = "geom.polygons.PolyBounds";
            wi.obb = function (a) {
                a = wi.convexHull(a);
                for (var b = Infinity, c = null, d = null, e = a.length, f = 0; f < e;) {
                    var h = f++,
                        r = a[h];
                    h = a[(h + 1) % e];
                    if (r.x != h.x || r.y != h.y) {
                        r = h.subtract(r);
                        r.normalize(1);
                        for (var m = r.x, C = -r.y, g = h = Infinity, k = -Infinity, q = -Infinity, n = 0; n < a.length;) {
                            var l = a[n];
                            ++n;
                            var p = l.x * m - l.y * C;
                            l = l.y * m + l.x * C;
                            p < h &&
                            (h = p);
                            l < g && (g = l);
                            p > k && (k = p);
                            l > q && (q = l)
                        }
                        m = (k - h) * (q - g);
                        b > m && (b = m, c = [new ba(h, g), new ba(k, g), new ba(k, q), new ba(h, q)], d = r)
                    }
                }
                Pg.asRotateYX(c, d.y, d.x);
                return c
            };
            wi.convexHull = function (a) {
                var b = a.length;
                if (3 > b) return null;
                if (3 == b) return a;
                var c = a[0],
                    d = a[1],
                    e = a[2];
                c = 0 < (d.x - c.x) * (e.y - c.y) - (e.x - c.x) * (d.y - c.y) ? [e, c, d, e] : [e, d, c, e];
                for (d = 3; ;) {
                    if (d >= b) return c[0] == c[c.length - 1] && c.pop(), c;
                    e = a[d++];
                    for (var f = c.length; ;) {
                        var h = c[0];
                        var r = c[1];
                        0 <= (h.x - e.x) * (r.y - e.y) - (r.x - e.x) * (h.y - e.y) ? (h = c[f - 2], r = c[f - 1], h = 0 <= (r.x -
                            h.x) * (e.y - h.y) - (e.x - h.x) * (r.y - h.y)) : h = !1;
                        if (!h) break;
                        if (d >= b) return c[0] == c[c.length - 1] && c.pop(), c;
                        e = a[d++]
                    }
                    for (; ;) {
                        2 <= c.length ? (f = c[c.length - 2], h = c[c.length - 1], f = 0 > (h.x - f.x) * (e.y - f.y) - (e.x - f.x) * (h.y - f.y)) : f = !1;
                        if (!f) break;
                        c.pop()
                    }
                    for (c.push(e); ;) {
                        f = c[0];
                        h = c[1];
                        if (!(0 > (f.x - e.x) * (h.y - e.y) - (h.x - e.x) * (f.y - e.y))) break;
                        c.shift()
                    }
                    c.unshift(e)
                }
            };
            var kd = function () {
            };
            g["geom.polygons.PolyCore"] = kd;
            kd.__name__ = "geom.polygons.PolyCore";
            kd.area = function (a) {
                for (var b = a.length, c = a[b - 1],
                         d = a[0], e = c.x * d.y - d.x * c.y, f = 1; f < b;) {
                    var h = f++;
                    c = d;
                    d = a[h];
                    e += c.x * d.y - d.x * c.y
                }
                return .5 * e
            };
            kd.rectArea = function (a) {
                return ba.distance(a[0], a[1]) * ba.distance(a[1], a[2])
            };
            kd.$length = function (a) {
                for (var b = 0, c = 1, d = a.length; c < d;) {
                    var e = c++;
                    b += ba.distance(a[e - 1], a[e])
                }
                return b
            };
            kd.center = function (a) {
                for (var b = a.length, c = a[0].clone(), d = 1; d < b;) {
                    var e = d++;
                    e = a[e];
                    c.x += e.x;
                    c.y += e.y
                }
                a = 1 / b;
                c.x *= a;
                c.y *= a;
                return c
            };
            var Qg = function () {
            };
            g["geom.polygons.PolyCreate"] = Qg;
            Qg.__name__ = "geom.polygons.PolyCreate";
            Qg.rect = function (a, b) {
                a /= 2;
                b /= 2;
                return [new ba(-a, -b), new ba(a, -b), new ba(a, b), new ba(-a, b)]
            };
            Qg.stripe = function (a, b, c) {
                null == c && (c = 1);
                var d = b / 2,
                    e = a.length;
                b = [];
                var f = [],
                    h = a[0],
                    r = a[1],
                    m = r.subtract(h);
                m.normalize(1);
                if (0 < c) {
                    var C = new ba(m.x * d, m.y * d),
                        g = new ba(-C.y, C.x);
                    h = h.subtract(new ba(C.x * c, C.y * c));
                    b.unshift(h.subtract(g));
                    f.unshift(h.add(g))
                } else {
                    var k = new ba(m.x * d, m.y * d);
                    g = new ba(-k.y, k.x);
                    b.unshift(h.subtract(g));
                    f.unshift(h.add(g))
                }
                g = 1;
                for (--e; g < e;) C = g++, h = r, r = a[C + 1], k = m, m = r.subtract(h), m.normalize(1),
                    C = k.x * m.x + k.y * m.y, k = k.add(m), k = new ba(-k.y, k.x), k.normalize(d * Math.sqrt(2 / (1 + C))), b.push(h.subtract(k)), f.push(h.add(k));
                0 < c ? (C = new ba(m.x * d, m.y * d), g = new ba(-C.y, C.x), a = r.add(new ba(C.x * c, C.y * c)), b.push(a.subtract(g)), f.push(a.add(g))) : (k = new ba(m.x * d, m.y * d), g = new ba(-k.y, k.x), b.push(r.subtract(g)), f.push(r.add(g)));
                return b.concat(yb.revert(f))
            };
            var sl = function () {
            };
            g["geom.polygons.PolyCut"] = sl;
            sl.__name__ = "geom.polygons.PolyCut";
            sl.enlarge = function (a, b) {
                for (var c = [], d = a.length,
                         e = 0, f = a.length; e < f;) {
                    var h = e++,
                        r = a[h];
                    h = a[(h + 1) % d];
                    var m = h.subtract(r);
                    m = new ba(-m.y, m.x);
                    m.normalize(-b);
                    c.push(r.add(m));
                    c.push(h.add(m))
                }
                return c
            };
            var Pg = function () {
            };
            g["geom.polygons.PolyTransform"] = Pg;
            Pg.__name__ = "geom.polygons.PolyTransform";
            Pg.translate = function (a, b, c) {
                for (var d = [], e = 0; e < a.length;) {
                    var f = a[e];
                    ++e;
                    d.push(new ba(f.x + b, f.y + c))
                }
                return d
            };
            Pg.asRotateYX = function (a, b, c) {
                for (var d = 0; d < a.length;) {
                    var e = a[d];
                    ++d;
                    e.setTo(e.x * c - e.y * b, e.y * c + e.x * b)
                }
            };
            var xi = function () {
                this.complete =
                    new Wd
            };
            g["processes.Process"] = xi;
            xi.__name__ = "processes.Process";
            xi.prototype = {
                onComplete: function (a) {
                    null != a && this.complete.add(a);
                    return this
                },
                __class__: xi
            };
            var Me = function () {
                this.complete = new Wd
            };
            g["processes.Tweener"] = Me;
            Me.__name__ = "processes.Tweener";
            Me.create = function (a, b) {
                var c = new Me;
                c.time = a;
                c.updateCallback = b;
                return c
            };
            Me.run = function (a, b) {
                a = Me.create(a, b);
                a.start();
                return a
            };
            Me.__super__ = xi;
            Me.prototype = l(xi.prototype, {
                start: function () {
                    this.passed =
                        0;
                    this.paused = !1;
                    this.updateCallback(0);
                    return this.resume()
                },
                stop: function () {
                    return this.pause()
                },
                resume: function () {
                    eb.get_tick().add(p(this, this.update));
                    this.paused = !1;
                    return this
                },
                pause: function () {
                    eb.get_tick().remove(p(this, this.update));
                    this.paused = !0;
                    return this
                },
                update: function (a) {
                    this.paused || ((this.passed += a) < this.time ? this.updateCallback(this.passed / this.time) : (this.updateCallback(1), this.stop(), this.complete.dispatch()))
                },
                __class__: Me
            });
            var Og = function () {
            };
            g["system.Exporter"] =
                Og;
            Og.__name__ = "system.Exporter";
            Og.saveText = function (a, b, c) {
                b = Og.fixName(b);
                window.saveAs(new Blob([a], {
                    type: c
                }), b, !0)
            };
            Og.fixName = function (a) {
                return (new ra("[ ']", "g")).split(a.toLowerCase()).join("_")
            };
            var Oe = function () {
            };
            g["system.FileAccepter"] = Oe;
            Oe.__name__ = "system.FileAccepter";
            Oe.init = function (a) {
                Oe.handler = a;
                window.addEventListener("dragover", Oe.onDragOver);
                window.addEventListener("drop", Oe.onDrop)
            };
            Oe.onDragOver = function (a) {
                a.stopPropagation();
                a.preventDefault();
                a.dataTransfer.dropEffect = "link"
            };
            Oe.onDrop = function (a) {
                a.preventDefault();
                a.stopPropagation();
                if (0 < a.dataTransfer.files.length && GetParamName == "") {
                    var b = a.dataTransfer.files[0],
                        c = new FileReader;
                    c.onload = function (a) {
                        Oe.handler(b.name, c.result)
                    };
                    var d = b.name.split(".").pop().toLowerCase();
                    "pb" === d ? c.readAsArrayBuffer(b) : c.readAsText(b)
                } else console.log("Not a file!")
            };
            var Fb = function () {
            };
            g["system.State"] = Fb;
            Fb.__name__ = "system.State";
            Fb.init = function (a, b) {
                null == Fb.so && (null == a && (a = ca.current.meta.h.packageName), Fb.so = oc.getLocal(a),
                    Fb.data = Fb.so.data, null != b && 0 == M.fields(Fb.data).length && b(Fb.data))
            };
            Fb.get = function (a, b) {
                Fb.init();
                return Object.prototype.hasOwnProperty.call(Fb.data, a) ? Fb.data[a] : b
            };
            Fb.set = function (a, b) {
                Fb.init();
                Fb.data[a] = b;
                Fb.so.flush()
            };
            var aa = function () {
            };
            g["toytown2.Style"] = aa;
            aa.__name__ = "toytown2.Style";
            aa.fillForm = function (a) {
                a.addTab("Colors");
                a.addColor("ground", "Ground", aa.ground);
                a.addColor("fields", "Fields", aa.fields);
                a.addColor("greens", "Greens", aa.greens);
                a.addColor("foliage",
                    "Foliage", aa.foliage);
                a.addColor("roads", "Roads", aa.roads);
                a.addColor("water", "Water", aa.water);
                a.addColor("walls1", "Wall top", aa.walls1);
                a.addColor("walls2", "Wall bottom", aa.walls2);
                a.addColor("roofs1", "Roof 1", aa.roofs1);
                a.addColor("roofs2", "Roof 2", aa.roofs2);
                a.addTab("Lighting");
                a.addColor("sky1", "Zenith color", aa.sky1);
                a.addColor("sky2", "Horizon color", aa.sky2);
                a.addColor("sun", "Sun color", aa.sun);
                a.addFloat("sun_pos", "Sun altitude", aa.sunPos, 0, 90);
                a.addFloat("ambience", "Ambient light", aa.ambience,
                    0, 1);
                a.addColor("windows", "Lights color", aa.windows);
                a.addFloat("lighted", "Lights amount", aa.lighted, 0, 1);
                a.addTab("Shapes");
                a.addFloat("pitch", "Roof pitch", aa.pitch, 0, 2);
                a.addCheck("roofedTowers", "Roofed towers", aa.roofedTowers);
                a.addEnum("towers", "Tower plan", ["Round", "Square"], aa.squareTowers ? "Square" : "Round");
                a.addEnum("tree_shape", "Tree shape", ["Ellipsoid", "Cone"], aa.firTrees ? "Cone" : "Ellipsoid")
            };
            aa.setPalette = function (a, b) {
                null == b && (b = !1);
                aa.sky1 = a.getColor("sky1", aa.sky1);
                aa.sky2 = a.getColor("sky2",
                    aa.sky1);
                aa.sun = a.getColor("sun", aa.sun);
                aa.sunPos = a.getFloat("sun_pos", aa.sunPos);
                aa.ambience = a.getFloat("ambience", aa.ambience);
                aa.windows = a.getColor("windows", aa.windows);
                aa.lighted = a.getFloat("lighted", aa.lighted);
                aa.ground = a.getColor("ground", aa.ground);
                aa.fields = a.getColor("fields", aa.fields);
                aa.greens = a.getColor("greens", aa.greens);
                aa.foliage = a.getColor("foliage", aa.foliage);
                aa.roads = a.getColor("roads", aa.roads);
                aa.water = a.getColor("water", aa.water);
                aa.walls1 = a.getColor("walls1", aa.walls1);
                aa.walls2 = a.getColor("walls2", aa.walls1);
                aa.roofs1 = a.getColor("roofs1", aa.roofs1);
                aa.roofs2 = a.getColor("roofs2", aa.roofs1);
                aa.pitch = a.getFloat("pitch", 1);
                aa.roofedTowers = a.getBool("roofedTowers", aa.roofedTowers);
                aa.squareTowers = "Square" == a.getString("towers", "Round");
                aa.firTrees = "Cone" == a.getString("tree_shape", "Ellipsoid");
                b && Fb.set("style", a.data())
            };
            aa.getRandom = function () {
                var a = .2;
                null == a && (a = .5);
                var b = (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 < a;
                a = .1;
                null == a && (a = .5);
                var c = (x.seed = 48271 * x.seed %
                        2147483647 | 0) / 2147483647 < a,
                    d = c ? new Q(210 + 30 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), .2 * Math.abs(((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 2 - 1), 1) : null,
                    e = (b ? .8 : 1) + .4 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 +
                        (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3);
                if (b) {
                    var f = new Q(240 + 60 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), ((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3, .5 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) /
                        3));
                    var h = new Q(f.x + 120 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), (f.y + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 2, (f.z + 1) / 2)
                } else f = new Q(210 + 180 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), ((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed =
                    48271 * x.seed % 2147483647 | 0) / 2147483647) / 3, .8 + .2 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3) * e), h = new Q(210 + 40 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), f.y * Math.abs(((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 +
                    (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 2 - 1), 1 - .2 * Math.abs(((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                var r = new Q(50 + 40 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), .3 * Math.abs(((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed %
                        2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 2 - 1), 1),
                    m = .2 + .6 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3),
                    C = 75 - 150 * r.y,
                    g = c ? d : new Q(90 + 180 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), .2 + .8 * (((x.seed = 48271 * x.seed % 2147483647 | 0) /
                        2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3), Math.min(((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 * e, 1)),
                    k = g.z;
                k = new Q(g.x + 30 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), g.y * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed %
                    2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3), k + .5 * ((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 - k));
                var q = new Q(g.x + 60 * ((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647), g.y * (1 - Math.abs(((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 2 - 1)), g.z * (1 - Math.abs(((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 |
                        0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 2 - 1))),
                    n = new Q(g.x + 30 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), g.y, g.z * (1 - .5 * Math.abs(((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 2 - 1))),
                    l = (x.seed =
                        48271 * x.seed % 2147483647 | 0) / 2147483647;
                null == l && (l = .5);
                l = new Q(210 + (f.x - 210) * l, 1 - Math.abs(((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 2 - 1), f.z * C / 120);
                e = new Q(360 * ((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647), .8 * Math.abs(((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 +
                    (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 2 - 1), (.4 + .6 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3)) * e * (c ? ((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 : 1));
                d = c ? d : new Q(e.x + 30 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) /
                    2147483647) / 3 * 2 - 1), (1 + e.y) / 2, (1 - e.z + ((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3) / 2);
                var p = new Q(d.x + 30 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), d.y, d.z * Math.pow(2, ((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) /
                    3 * 2 - 1));
                a = .3333333333333333;
                null == a && (a = .5);
                var y = (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 < a,
                    v = new Lb;
                v.setColor("sky1", Ta.hsv(f.x, f.y, f.z));
                v.setColor("sky2", Ta.hsv(h.x, h.y, h.z));
                v.setColor("sun", Ta.hsv(r.x, r.y, r.z));
                h = Math.pow(10, 1);
                v.setFloat("ambience", Math.round(m * h) / h);
                m = -1;
                null == m && (m = 1);
                h = Math.pow(10, m);
                v.setFloat("sun_pos", Math.round(C * h) / h);
                v.setColor("ground", Ta.hsv(g.x, g.y, g.z));
                b ? (f = new Q(f.x + 180 + 180 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 |
                    0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), Math.abs(((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 2 - 1), 1), f = Ta.hsv(f.x, f.y, f.z)) : f = 16777215;
                v.setColor("windows", f);
                b ? (b = .2 + .6 * Math.abs(((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 *
                    x.seed % 2147483647 | 0) / 2147483647) / 2 - 1), m = 2, null == m && (m = 1), h = Math.pow(10, m), f = Math.round(b * h) / h) : f = 0;
                v.setFloat("lighted", f);
                v.setColor("fields", Ta.hsv(q.x, q.y, q.z));
                v.setColor("greens", Ta.hsv(q.x, q.y, q.z));
                v.setColor("foliage", Ta.hsv(n.x, n.y, n.z));
                v.setColor("roads", Ta.hsv(k.x, k.y, k.z));
                v.setColor("water", Ta.hsv(l.x, l.y, l.z));
                v.setColor("walls1", Ta.hsv(e.x, e.y, e.z));
                v.setColor("walls2", Ta.lerpHSV(Ta.hsv(e.x, e.y, e.z), Ta.hsv(g.x, g.y, g.z), Math.abs(((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed =
                    48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 2 - 1)));
                v.setColor("roofs1", Ta.hsv(d.x, d.y, d.z));
                v.setColor("roofs2", Ta.hsv(p.x, p.y, p.z));
                a = .1;
                null == a && (a = .5);
                b = (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 < a ? 0 : .2 + 1.8 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3);
                h = Math.pow(10, 1);
                v.setFloat("pitch", Math.round(b * h) / h);
                a =
                    y ? .2 : .5;
                null == a && (a = .5);
                v.setBool("roofedTowers", (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 < a);
                v.setString("towers", y ? "Square" : "Round");
                a = c ? .5 : .2;
                null == a && (a = .5);
                v.setString("tree_shape", (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 < a ? "Cone" : "Ellipsoid");
                return v
            };
            aa.restorePalette = function () {
                var a = Fb.get("style");
                return null != a ? (aa.setPalette(Lb.fromData(a)), !0) : !1
            };
            var lf = function (a, b) {
                null == b && (b = 0);
                this.poly = a;
                this.thickness = b
            };
            g["toytown2.ThickPolyline"] = lf;
            lf.__name__ = "toytown2.ThickPolyline";
            lf.prototype = {
                __class__: lf
            };
            var tl = function () {
            };
            g["toytown2.WavefrontOBJ"] = tl;
            tl.__name__ = "toytown2.WavefrontOBJ";
            tl.export = function (a) {
                var b = "",
                    c = 1;
                for (a = a.get_subGeometries().iterator(); a.hasNext();) {
                    var d = a.next(),
                        e = T.__cast(d, Bb);
                    d = e.get_vertexData();
                    e = e.get_indexData();
                    for (var f = 0; f < d.get_length();) {
                        var h = d.get(f),
                            r = d.get(f + 1),
                            m = -d.get(f + 2);
                        b += n.string("v " + h + " " + r + " " + m + "\n");
                        f += 13
                    }
                    for (f = 0; f < e.get_length();) h = e.get(f) + c, r = e.get(f + 1) + c, m = e.get(f + 2) + c, b += n.string("f " +
                        (null == h ? "null" : n.string(J.toFloat(h))) + " " + (null == r ? "null" : n.string(J.toFloat(r))) + " " + (null == m ? "null" : n.string(J.toFloat(m))) + "\n"), f += 3;
                    c += d.get_length() / 13 | 0
                }
                return b
            };
            var yi = function (a, b, c, d, e, f) {
                Bb.call(this);
                var h = ba.distance(a, b),
                    r = h + e;
                f = c - f;
                var m = new Xc;
                e = Qg.rect(e, d);
                this.addColumn(m, Pg.translate(e, -h / 2, 0), c);
                this.addColumn(m, Pg.translate(e, h / 2, 0), c);
                this.addBeam(m, c - f / 2, f, r, d);
                this.updateIndexData(m.indices);
                this.updateData(m.data);
                c = new xb;
                c.appendRotation(-Math.atan2(b.y - a.y, b.x - a.x) /
                    Math.PI * 180, new Q(0, 1, 0));
                c.appendTranslation((a.x + b.x) / 2, 0, (a.y + b.y) / 2);
                this.applyTransformation(c)
            };
            g["toytown2.elements3d.Gate"] = yi;
            yi.__name__ = "toytown2.elements3d.Gate";
            yi.__super__ = Bb;
            yi.prototype = l(Bb.prototype, {
                addColumn: function (a, b, c) {
                    for (var d = [], e = 0; e < b.length;) {
                        var f = b[e];
                        ++e;
                        d.push([new Q(f.x, 0, f.y), new Q(f.x, c, f.y)])
                    }
                    c = d;
                    b = b.length;
                    d = 0;
                    for (e = b; d < e;) {
                        var h = d++;
                        f = c[h];
                        h = c[(h + 1) % b];
                        a.addPolygonUV([f[0], f[1], h[1], h[0]], ia.uvWalls)
                    }
                },
                addBeam: function (a, b, c, d, e) {
                    var f =
                        Qg.rect(e, c);
                    e = [];
                    for (var h = 0; h < f.length;) {
                        var r = f[h];
                        ++h;
                        e.push([new Q(-d / 2, b + r.y, r.x), new Q(d / 2, b + r.y, r.x)])
                    }
                    d = e;
                    b += c / 2;
                    c = f.length;
                    e = 0;
                    for (h = c; e < h;) {
                        r = e++;
                        f = d[r];
                        r = d[(r + 1) % c];
                        f = [f[0], f[1], r[1], r[0]];
                        r = [];
                        for (var m = 0; m < f.length;) {
                            var C = f[m];
                            ++m;
                            r.push(new ba(.125, .25 + .5 * C.y / b))
                        }
                        a.addPolygonUV(f, r)
                    }
                },
                __class__: yi
            });
            var Zd = function (a, b) {
                for (var c = new Xc, d = 0; d < b.length;) {
                    var e = b[d];
                    ++d;
                    e = Qg.stripe(e, Zd.THICKNESS, 0);
                    for (var f = e.length, h = 0, r = f; h < r;) {
                        var m = h++,
                            C = e[m],
                            g = e[(m + 1) % f],
                            k = new Q(C.x, 0, C.y),
                            q =
                                new Q(C.x, Zd.HEIGHT, C.y),
                            n = new Q(g.x, Zd.HEIGHT, g.y),
                            l = new Q(g.x, 0, g.y),
                            p = e[(m + f - 1) % f],
                            y = !0;
                        null == y && (y = !1);
                        g = new ba(p.y - g.y, g.x - p.x);
                        y && g.normalize(1);
                        y = g;
                        g = e[(m + 2) % f];
                        m = !0;
                        null == m && (m = !1);
                        C = new ba(C.y - g.y, g.x - C.x);
                        m && C.normalize(1);
                        m = C;
                        C = new Q(-y.x, 0, -y.y);
                        m = new Q(-m.x, 0, -m.y);
                        y = ia.uvWalls[0];
                        g = ia.uvWalls[1];
                        c.indices.push(c.addVertex(k.x, k.y, k.z, C.x, C.y, C.z, y.x, y.y));
                        c.indices.push(c.addVertex(q.x, q.y, q.z, C.x, C.y, C.z, g.x, g.y));
                        c.indices.push(c.addVertex(n.x, n.y, n.z, m.x, m.y, m.z, g.x, g.y));
                        c.indices.push(c.addVertex(k.x,
                            k.y, k.z, C.x, C.y, C.z, y.x, y.y));
                        c.indices.push(c.addVertex(n.x, n.y, n.z, m.x, m.y, m.z, g.x, g.y));
                        c.indices.push(c.addVertex(l.x, l.y, l.z, m.x, m.y, m.z, y.x, y.y))
                    }
                    h = [];
                    for (r = 0; r < e.length;) k = e[r], ++r, h.push(new Q(k.x, Zd.HEIGHT, k.y));
                    r = [];
                    k = 0;
                    for (q = f; k < q;) k++, r.push(new Q(0, 1, 0));
                    k = [];
                    for (q = 0; q < f;) q++, k.push(ia.uvWalls[1]);
                    c.addTriangulation(h, r, k, Qc.earcut(e))
                }
                Ub.call(this, c.geometry(), a.mHouse)
            };
            g["toytown2.elements3d.Palisade"] = Zd;
            Zd.__name__ = "toytown2.elements3d.Palisade";
            Zd.__super__ =
                Ub;
            Zd.prototype = l(Ub.prototype, {
                __class__: Zd
            });
            var pe = function (a, b) {
                null == b && (b = 0);
                Ca.call(this);
                for (var c = new Xc, d = new ba, e = [], f = 0; f < a.length;) {
                    var h = a[f];
                    ++f;
                    h = kf.render(h, !0, b);
                    for (var r = [], m = 0; m < h.length;) {
                        var C = h[m];
                        ++m;
                        r.push(new Q(C.x, pe.getLevel(C.x, C.y), C.y))
                    }
                    for (; e.length < r.length;) e.push(d);
                    m = r.length / 3 | 0;
                    C = r[0];
                    m = r[2 * r.length / 3 | 0].subtract(C).crossProduct(r[m].subtract(C));
                    C = [];
                    for (var g = 0, k = r.length; g < k;) g++, C.push(m);
                    c.addTriangulation(r, C, e, Qc.earcut(h))
                }
                this.addSubGeometry(c.subGeometry())
            };
            g["toytown2.elements3d.Patches"] = pe;
            pe.__name__ = "toytown2.elements3d.Patches";
            pe.getLevel = function (a, b) {
                return 0
            };
            pe.__super__ = Ca;
            pe.prototype = l(Ca.prototype, {
                __class__: pe
            });
            var zi = function (a) {
                Ca.call(this);
                var b = a.farthest.get_length(),
                    c = 0;
                for (a = a.rivers; c < a.length;) {
                    var d = a[c];
                    ++c;
                    var e = d.thickness;
                    d = d.poly;
                    var f = yb.max(d, function (a) {
                        return a.get_length()
                    });
                    f = (Ka.radius - b) / (f.get_length() - b);
                    for (var h = [], r = 0; r < d.length;) {
                        var m = d[r];
                        ++r;
                        if (m.get_length() < b) var C = m;
                        else C =
                            m, m = b + (m.get_length() - b) * f, null == m && (m = 1), C = C.clone(), C.normalize(m);
                        h.push(C)
                    }
                    d = kf.render(h, !1, 2);
                    Cc.addStartCap(d, e);
                    this.addSubGeometry(new Cc(d, e))
                }
            };
            g["toytown2.elements3d.Rivers"] = zi;
            zi.__name__ = "toytown2.elements3d.Rivers";
            zi.__super__ = Ca;
            zi.prototype = l(Ca.prototype, {
                __class__: zi
            });
            var Ai = function (a) {
                Ca.call(this);
                for (var b = 0, c = a.roads; b < c.length;) {
                    var d = c[b];
                    ++b;
                    var e = .75 * d.thickness,
                        f = d.poly;
                    if (kd.$length(f) / f.length / 4 > d.thickness) {
                        for (var h = [], r = 0, m = f.length - 1; r <
                        m;) {
                            var C = r++;
                            h.push(f[C]);
                            h.push(vc.lerp(f[C], f[C + 1]))
                        }
                        h.push(f[f.length - 1]);
                        r = [];
                        m = 0;
                        for (C = a.roads; m < C.length;) {
                            var g = C[m];
                            ++m;
                            if (g != d) {
                                g = yb.intersect(f, g.poly);
                                for (var k = 0; k < g.length;) {
                                    var q = g[k];
                                    ++k;
                                    r.push(q)
                                }
                            }
                        }
                        h = kf.render(h, !1, 2, r);
                        this.addSubGeometry(new Cc(h, e))
                    } else d = f.slice(), this.addSubGeometry(new Cc(d, e))
                }
                b = 0;
                for (c = a.planks; b < c.length;) a = c[b], ++b, e = a.thickness, f = a.poly.slice(), Cc.addStartCap(f, e / 2), Cc.addEndCap(f, e / 2), this.addSubGeometry(new Cc(f, e))
            };
            g["toytown2.elements3d.Roads"] =
                Ai;
            Ai.__name__ = "toytown2.elements3d.Roads";
            Ai.__super__ = Ca;
            Ai.prototype = l(Ca.prototype, {
                __class__: Ai
            });
            var Bi = function (a, b, c) {
                var d = new mb(1, 2, !1);
                d.setPixel(0, 0, aa.sky2);
                d.setPixel(0, 1, aa.sky1);
                d = new ke(new Ob(d));
                for (var e = new Xc, f = [], h = [], r = 0; 16 > r;) {
                    var m = r++,
                        C = m / 16 * 2 * Math.PI;
                    m = b * Math.cos(C);
                    C = b * Math.sin(C);
                    h.push(e.addVertex(m, 0, C, 0, 0, 0, .25, .25));
                    f.push(e.addVertex(m, b, C, 0, 0, 0, .25, 1.25))
                }
                for (r = 0; 16 > r;) m = r++, C = (m + 1) % 16, e.addTri(h[m], h[C], f[m]), e.addTri(h[C], f[C], f[m]);
                r = 1;
                for (h = 15; r <
                h;) m = r++, e.addTri(f[0], f[m], f[m + 1]);
                Ub.call(this, e.geometry(), d);
                if (!Ka.elevation) {
                    e = new Xc;
                    r = [];
                    for (h = 0; 16 > h;) m = h++, C = -m / 16 * 2 * Math.PI, m = b * Math.cos(C), C = b * Math.sin(C), r.push(new Q(m, 0, C));
                    e.addPolygon(r);
                    d = e.subGeometry();
                    e = a.isOcean ? a.mWater : a.mGround;
                    this.addSubMesh(d).set_material(e)
                }
                this.addSunDisk(a, b, c)
            };
            g["toytown2.elements3d.SkyDome"] = Bi;
            Bi.__name__ = "toytown2.elements3d.SkyDome";
            Bi.__super__ = Ub;
            Bi.prototype = l(Ub.prototype, {
                addSunDisk: function (a, b, c) {
                    a = new Xc;
                    a.addPolygonUV([new Q(.5,
                        .5, 0), new Q(.5, -.5, 0), new Q(-.5, -.5, 0), new Q(-.5, .5, 0)], [new ba(1, 1), new ba(1, 0), new ba(0, 0), new ba(0, 1)]);
                    a = a.subGeometry();
                    c.scaleBy(.5 * b / c.get_length());
                    b *= .05 * (1 + aa.ambience);
                    var d = new xb;
                    d.appendRotation(-(Math.atan2(c.y, Math.sqrt(c.x * c.x + c.z * c.z)) / Math.PI * 180), new Q(1, 0, 0));
                    d.appendRotation(Math.atan2(c.x, c.z) / Math.PI * 180, new Q(0, 1, 0));
                    d.appendScale(b, b, b);
                    d.appendTranslation(c.x, c.y, c.z);
                    a.applyTransformation(d);
                    this.addSubMesh(a).set_material(this.getTexture())
                },
                getTexture: function () {
                    var a =
                            255 - 255 * aa.ambience * aa.ambience | 0,
                        b = new la;
                    b.createGradientBox(512, 512);
                    var c = new je;
                    c.get_graphics().beginGradientFill(1, [aa.sun, aa.sun], [1, 0], [a, 255], b);
                    c.get_graphics().drawCircle(256, 256, 256);
                    a = new mb(512, 512, !0, 0);
                    a.draw(c);
                    c = new ke(new Ob(a), !0, !1);
                    c.set_alphaBlending(!0);
                    return c
                },
                __class__: Bi
            });
            var Cc = function (a, b) {
                Bb.call(this);
                var c = b / 2,
                    d = a.length,
                    e = a[1].subtract(a[0]),
                    f = b / 2;
                null == f && (f = 1);
                e = e.clone();
                e.normalize(f);
                for (var h = [a[0].subtract(new ba(-e.y, e.x))], r = [a[0].add(new ba(-e.y, e.x))],
                         m = 1, C = d - 1; m < C;) {
                    e = m++;
                    var g = a[e],
                        k = a[e + 1];
                    e = g.subtract(a[e - 1]);
                    f = 1;
                    null == f && (f = 1);
                    e = e.clone();
                    e.normalize(f);
                    k = k.subtract(g);
                    f = 1;
                    null == f && (f = 1);
                    k = k.clone();
                    k.normalize(f);
                    f = e.x * k.x + e.y * k.y;
                    k = e.add(k);
                    k = new ba(-k.y, k.x);
                    e = .5 * c * Math.sqrt(2 / (1 + f));
                    k.x *= e;
                    k.y *= e;
                    h.push(g.subtract(k));
                    r.push(g.add(k))
                }
                e = a[d - 1].subtract(a[d - 2]);
                f = b / 2;
                null == f && (f = 1);
                e = e.clone();
                e.normalize(f);
                h.push(a[d - 1].subtract(new ba(-e.y, e.x)));
                r.push(a[d - 1].add(new ba(-e.y, e.x)));
                m = [];
                for (C = 0; C < d;) e = C++, m.push([new Q(h[e].x, Cc.getLevel(h[e].x,
                    h[e].y), h[e].y), new Q(r[e].x, Cc.getLevel(r[e].x, r[e].y), r[e].y)]);
                a = m;
                b = new Xc;
                m = 0;
                for (C = d - 1; m < C;) e = m++, k = a[e], d = a[e + 1], b.addPolygon([d[1], d[0], k[0], k[1]]);
                this.updateIndexData(b.indices);
                this.updateData(b.data)
            };
            g["toytown2.elements3d.Stripe"] = Cc;
            Cc.__name__ = "toytown2.elements3d.Stripe";
            Cc.getLevel = function (a, b) {
                return 0
            };
            Cc.addStartCap = function (a, b) {
                var c = a[1].subtract(a[0]);
                null == b && (b = 1);
                c = c.clone();
                c.normalize(b);
                a[0] = a[0].subtract(c)
            };
            Cc.addEndCap = function (a, b) {
                var c =
                        a.length,
                    d = a[c - 2].subtract(a[c - 1]);
                null == b && (b = 1);
                d = d.clone();
                d.normalize(b);
                a[c - 1] = a[c - 1].subtract(d)
            };
            Cc.__super__ = Bb;
            Cc.prototype = l(Bb.prototype, {
                __class__: Cc
            });
            var Ka = function (a, b, c, d, e, f) {
                Td.call(this, a, b, c, d, e, f)
            };
            g["toytown2.elements3d.View"] = Ka;
            Ka.__name__ = "toytown2.elements3d.View";
            Ka.__super__ = Td;
            Ka.prototype = l(Td.prototype, {
                reset: function (a) {
                    for (this.set_backgroundColor(aa.sky2); 0 < this.get_scene().get_numChildren();) this.get_scene().removeChildAt(0);
                    this.get_camera().get_lens().set_near(.5);
                    this.get_camera().get_lens().set_far(Ka.radius * Math.sqrt(2));
                    this.isOcean = null != a.islands;
                    var b = this.prepareLight();
                    this.prepareMaterials();
                    this.sky = new Bi(this, Ka.radius, b);
                    this.get_scene().addChild(this.sky);
                    if (Ka.elevation) {
                        var c = new Ci(Math.floor((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 * 256), 2 * Ka.radius, 2 * Ka.radius, 100);
                        Cc.getLevel = function (a, b) {
                            return c.getLevel(a, b) + .5
                        };
                        pe.getLevel = function (a, b) {
                            return c.getLevel(a, b) + 2
                        };
                        ia.getLevel = p(c, c.getLevel);
                        this.terrain = new Di(c, 2 * Ka.radius, 2 * Ka.radius,
                            400, 200, 200);
                        this.get_scene().addChild(new Ub(this.terrain, this.mTerrain))
                    }
                    if (null != a.water) {
                        b = this.get_scene();
                        var d = this.isOcean ? this.mGround : this.mWater;
                        b.addChild(new Ub(new Ei(a), d))
                    }
                    null != a.roads && 0 < a.roads.length && this.get_scene().addChild(new Ub(new Ai(a), this.mRoads));
                    null != a.rivers && 0 < a.rivers.length && this.get_scene().addChild(new Ub(new zi(a), this.mWater));
                    null != a.fields && 0 < a.fields.length && this.get_scene().addChild(new Ub(new pe(a.fields, 2), this.mFields));
                    if (null != a.squares && 0 < a.squares.length) {
                        b =
                            a.values.roadWidth;
                        var e = (null != b ? b : 0 / a.scale) * a.scale / 2;
                        b = [];
                        d = 0;
                        for (var f = a.squares; d < f.length;) {
                            var h = f[d];
                            ++d;
                            b.push(sl.enlarge(h, e))
                        }
                        b = new pe(b);
                        this.get_scene().addChild(new Ub(b, this.mRoads))
                    }
                    null != a.greens && 0 < a.greens.length && this.get_scene().addChild(new Ub(new pe(a.greens), this.mGreen));
                    ia.initLights();
                    this.buildings = new Fi;
                    f = a.farthest.get_length();
                    b = 0;
                    for (d = a.buildings; b < d.length;) {
                        e = d[b];
                        ++b;
                        h = Math.sqrt(kd.area(e)) / 2;
                        var r = kd.center(e).get_length() / f;
                        h *= 1 + Math.pow(1 - r, 2);
                        100 < h && console.log(
                            e);
                        Ka.gableRoofs && 0 < aa.pitch ? Rg.add(this.buildings.fa, e, h, aa.pitch) : Pf.add(this.buildings.fa, e, h);
                        this.buildings.manage()
                    }
                    b = 0;
                    for (d = a.prisms; b < d.length;) e = d[b], ++b, h = Math.sqrt(kd.area(e)) / 3, Pf.add(this.buildings.fa, e, h, !1), this.buildings.manage();
                    0 < a.wallSegments.length && (new Pb(a, p(this, this.getLevel), this.buildings.fa), this.buildings.manage());
                    this.buildings.flush();
                    Pb.addGates(this.buildings, a, p(this, this.getLevel));
                    this.get_scene().addChild(new Ub(this.buildings, this.mHouse));
                    ia.addLights(this.get_scene(),
                        this.mLight);
                    if (Ka.showTrees && null != a.trees) {
                        b = [];
                        d = 0;
                        for (f = a.trees; d < f.length;) e = f[d], ++d, b.push(new Q(e.x, Ka.elevation ? this.terrain.getLevel(e.x, e.y) : 0, e.y));
                        b = new qe(this, b);
                        this.get_scene().addChild(b)
                    }
                    null != a.palisade && this.get_scene().addChild(new Zd(this, a.palisade))
                },
                getLevel: function (a, b) {
                    return Ka.elevation ? this.terrain.getLevel(a, b) : 0
                },
                prepareLight: function () {
                    var a = aa.sunPos / 180 * Math.PI,
                        b = ba.polar(1, (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 * 2 * Math.PI);
                    a = new Q(b.x * Math.cos(a), Math.sin(a),
                        b.y * Math.cos(a));
                    b = aa.ambience;
                    this.sun = new gd;
                    this.sun.set_position(a);
                    this.sun.lookAt(new Q);
                    this.sun.set_color(aa.sun);
                    this.sun.set_diffuse(1 - b);
                    var c = Ta.rgb2hsv(this.sun.get_color());
                    this.sun.set_ambient(1 * b);
                    this.sun.set_ambientColor(Ta.hsv(c.x + 180, c.y, 1));
                    this.sun.set_specular(this.sun.get_diffuse());
                    this.get_scene().addChild(this.sun);
                    return a
                },
                prepareMaterials: function () {
                    if (this.isOcean) this.mWater = new hd(aa.water), this.mGround = new hd(aa.ground), this.mFields = new hd(aa.fields), this.mGreen =
                        new hd(aa.greens);
                    else {
                        var a = this.applyLight(aa.ground);
                        this.mGround = new hd(a);
                        this.mFields = new hd(this.applyLight(aa.fields));
                        this.mGreen = new hd(this.applyLight(aa.greens));
                        this.mWater = new hd(this.applyLight(aa.water))
                    }
                    this.mRoads = new hd(this.deriveUnlit(aa.roads));
                    Ka.elevation || (a = this.mGround, a.set_depthCompareMode(0), a = this.mRoads, a.set_depthCompareMode(0), a = this.mWater, a.set_depthCompareMode(0), a = this.mFields, a.set_depthCompareMode(0), a = this.mGreen, a.set_depthCompareMode(0));
                    a = Ta.multiply(aa.walls2,
                        Ta.scale(this.sun.get_ambientColor(), .9 * this.sun.get_ambient()));
                    var b = new mb(4, 2, !1);
                    b.setPixel(0, 0, aa.walls2);
                    b.setPixel(0, 1, aa.walls1);
                    b.setPixel(1, 0, aa.roofs1);
                    b.setPixel(1, 1, aa.roofs2);
                    b.setPixel(2, 0, a);
                    b.setPixel(2, 1, a);
                    b.setPixel(3, 0, aa.windows);
                    b.setPixel(3, 1, Ta.lerp(a, aa.windows));
                    this.mHouse = new ke(new Ob(b), !0, !1);
                    b = new mb(1, 2, !1);
                    b.setPixel(0, 0, aa.foliage);
                    b.setPixel(0, 1, aa.walls2);
                    this.mTree = new ke(new Ob(b), !0);
                    b = new mb(1, 2, !1, aa.ground);
                    this.mTerrain = new ke(new Ob(b), !0, !1);
                    b = new $h([this.sun]);
                    for (var c = Ka.elevation ? [this.mHouse, this.mTerrain, this.mRoads, this.mFields, this.mGreen, this.mTree] : this.isOcean ? [this.mGround, this.mHouse, this.mWater, this.mRoads, this.mFields, this.mGreen, this.mTree] : [this.mHouse, this.mWater, this.mRoads, this.mTree], d = 0; d < c.length;) a = c[d], ++d, a.set_lightPicker(b), a.set_specular(0);
                    this.mWater.set_specular(1 - Math.pow(aa.ambience, 2));
                    this.mWater.set_gloss(50 / (.2 + aa.ambience));
                    this.mLight = new hd(aa.windows);
                    this.fog = new ei(1, 10, aa.sky2);
                    a = this.mHouse;
                    a.addMethod(this.fog);
                    a = this.mGround;
                    a.addMethod(this.fog);
                    a = this.mRoads;
                    a.addMethod(this.fog);
                    a = this.mWater;
                    a.addMethod(this.fog);
                    a = this.mFields;
                    a.addMethod(this.fog);
                    a = this.mGreen;
                    a.addMethod(this.fog);
                    a = this.mTerrain;
                    a.addMethod(this.fog);
                    a = this.mTree;
                    a.addMethod(this.fog)
                },
                applyLight: function (a) {
                    var b = Ta.scale(this.sun.get_ambientColor(), this.sun.get_ambient()),
                        c = new Q(J.toFloat(b >>> 16) / J.toFloat(255), J.toFloat(b >>> 8 & 255) / J.toFloat(255), J.toFloat(b & 255) / J.toFloat(255));
                    b = Ta.scale(this.sun.get_color(), this.sun.get_diffuse() *
                        Math.sin(aa.sunPos / 180 * Math.PI));
                    b = new Q(J.toFloat(b >>> 16) / J.toFloat(255), J.toFloat(b >>> 8 & 255) / J.toFloat(255), J.toFloat(b & 255) / J.toFloat(255));
                    a = new Q(J.toFloat(a >>> 16) / J.toFloat(255), J.toFloat(a >>> 8 & 255) / J.toFloat(255), J.toFloat(a & 255) / J.toFloat(255));
                    return Ta.rgbfSafe(a.x * (c.x + b.x), a.y * (c.y + b.y), a.z * (c.z + b.z))
                },
                deriveUnlit: function (a) {
                    var b = Ta.scale(this.sun.get_ambientColor(), this.sun.get_ambient()),
                        c = new Q(J.toFloat(b >>> 16) / J.toFloat(255), J.toFloat(b >>> 8 & 255) / J.toFloat(255), J.toFloat(b & 255) /
                            J.toFloat(255));
                    b = Ta.scale(this.sun.get_color(), this.sun.get_diffuse() * Math.sin(aa.sunPos / 180 * Math.PI));
                    b = new Q(J.toFloat(b >>> 16) / J.toFloat(255), J.toFloat(b >>> 8 & 255) / J.toFloat(255), J.toFloat(b & 255) / J.toFloat(255));
                    a = new Q(J.toFloat(a >>> 16) / J.toFloat(255), J.toFloat(a >>> 8 & 255) / J.toFloat(255), J.toFloat(a & 255) / J.toFloat(255));
                    return Ta.rgbfSafe(a.x / (c.x + b.x), a.y / (c.y + b.y), a.z / (c.z + b.z))
                },
                enableFog: function () {
                    var a = .5 * Ka.radius;
                    this.fog.set_minDistance(Math.min(100, .1 * a));
                    this.fog.set_maxDistance(a)
                },
                enableOrthFog: function () {
                    var a = this.get_camera().get_lens().get_far() - this.get_camera().get_lens().get_near();
                    this.fog.set_minDistance(Ka.radius / 2 / a);
                    this.fog.set_maxDistance((Ka.radius / 2 + bc.instance.farthest.get_length()) / a)
                },
                disableFog: function () {
                    this.fog.set_minDistance(this.fog.set_maxDistance(Ka.radius))
                },
                render: function () {
                    this.sky.set_x(this.get_camera().get_x());
                    this.sky.set_z(this.get_camera().get_z());
                    Td.prototype.render.call(this)
                },
                __class__: Ka
            });
            var Xc = function () {
                this.reset()
            };
            g["utils3d.FaceAdder"] =
                Xc;
            Xc.__name__ = "utils3d.FaceAdder";
            Xc.prototype = {
                reset: function () {
                    this.data = D.toFloatVector(null);
                    this.indices = D.toIntVector(null);
                    this.vCount = 0
                },
                addVertex: function (a, b, c, d, e, f, h, r) {
                    null == r && (r = 0);
                    null == h && (h = 0);
                    null == f && (f = 0);
                    null == e && (e = 1);
                    null == d && (d = 0);
                    this.data.push(a);
                    this.data.push(b);
                    this.data.push(c);
                    this.data.push(d);
                    this.data.push(e);
                    this.data.push(f);
                    this.data.push(1);
                    this.data.push(0);
                    this.data.push(0);
                    this.data.push(h);
                    this.data.push(r);
                    this.data.push(0);
                    this.data.push(0);
                    return this.vCount++
                },
                addTri: function (a, b, c) {
                    this.indices.push(a);
                    this.indices.push(b);
                    this.indices.push(c)
                },
                addPolygon: function (a) {
                    var b = a.length,
                        c = a[0],
                        d = a[1].subtract(c).crossProduct(a[2].subtract(c));
                    c = [];
                    for (var e = 0; e < b;) {
                        var f = e++;
                        c.push(this.addVertex(a[f].x, a[f].y, a[f].z, d.x, d.y, d.z))
                    }
                    a = c;
                    c = 1;
                    for (e = b - 1; c < e;) f = c++, this.addTri(a[0], a[f], a[f + 1])
                },
                addPolygonUV: function (a, b, c) {
                    var d = a.length;
                    if (null != c) var e = c;
                    else c = a[0], e = a[1].subtract(c).crossProduct(a[2].subtract(c));
                    c = [];
                    for (var f = 0; f < d;) {
                        var h =
                            f++;
                        c.push(this.addVertex(a[h].x, a[h].y, a[h].z, e.x, e.y, e.z, b[h].x, b[h].y))
                    }
                    a = c;
                    c = 1;
                    for (f = d - 1; c < f;) h = c++, this.addTri(a[0], a[h], a[h + 1])
                },
                addTriangulation: function (a, b, c, d) {
                    if (null == b) {
                        for (var e = new Q, f = 0; f < d.length;) {
                            b = d[f];
                            ++f;
                            var h = a[b[0]];
                            e = a[b[2]].subtract(h).crossProduct(a[b[1]].subtract(h));
                            if (0 < e.y) break
                        }
                        f = [];
                        h = 0;
                        for (var r = a.length; h < r;) h++, f.push(e);
                        b = f
                    }
                    if (null == c) {
                        var m = new ba;
                        f = [];
                        h = 0;
                        for (r = a.length; h < r;) h++, f.push(m);
                        c = f
                    }
                    f = [];
                    h = 0;
                    for (r = a.length; h < r;) {
                        m = h++;
                        var C = a[m];
                        e = b[m];
                        m = c[m];
                        f.push(this.addVertex(C.x,
                            C.y, C.z, e.x, e.y, e.z, m.x, m.y))
                    }
                    a = f;
                    f = 0;
                    for (h = d.length; f < h;) m = f++, b = d[m], this.addTri(a[b[0]], a[b[2]], a[b[1]])
                },
                subGeometry: function () {
                    var a = new Bb;
                    a.updateIndexData(this.indices);
                    a.updateData(this.data);
                    return a
                },
                subGeometryTill: function (a, b) {
                    var c = new Bb,
                        d = b / 13 | 0,
                        e = 0;
                    null == e && (e = 0);
                    c.updateIndexData(this.indices.slice(e, a));
                    e = 0;
                    null == e && (e = 0);
                    c.updateData(this.data.slice(e, b));
                    e = this.indices;
                    for (var f = e.__tempIndex = 0, h = []; f < h.length;) {
                        var r = h[f++];
                        e.insertAt(e.__tempIndex, r);
                        e.__tempIndex++
                    }
                    e.splice(e.__tempIndex,
                        a);
                    e = this.data;
                    f = e.__tempIndex = 0;
                    for (h = []; f < h.length;) r = h[f++], e.insertAt(e.__tempIndex, r), e.__tempIndex++;
                    e.splice(e.__tempIndex, b);
                    this.vCount -= d;
                    a = 0;
                    for (b = this.indices.get_length(); a < b;) e = a++, f = this.indices, f.set(e, f.get(e) - d);
                    return c
                },
                geometry: function () {
                    var a = new Ca;
                    a.addSubGeometry(this.subGeometry());
                    return a
                },
                __class__: Xc
            };
            var ba = function (a, b) {
                null == b && (b = 0);
                null == a && (a = 0);
                this.x = a;
                this.y = b
            };
            g["openfl.geom.Point"] = ba;
            ba.__name__ = "openfl.geom.Point";
            ba.distance = function (a, b) {
                var c = a.x - b.x;
                a = a.y - b.y;
                return Math.sqrt(c * c + a * a)
            };
            ba.polar = function (a, b) {
                return new ba(a * Math.cos(b), a * Math.sin(b))
            };
            ba.prototype = {
                add: function (a) {
                    return new ba(a.x + this.x, a.y + this.y)
                },
                clone: function () {
                    return new ba(this.x, this.y)
                },
                copyFrom: function (a) {
                    this.x = a.x;
                    this.y = a.y
                },
                normalize: function (a) {
                    if (0 != this.x || 0 != this.y) a /= Math.sqrt(this.x * this.x + this.y * this.y), this.x *= a, this.y *= a
                },
                setTo: function (a, b) {
                    this.x = a;
                    this.y = b
                },
                subtract: function (a) {
                    return new ba(this.x - a.x, this.y - a.y)
                },
                __toLimeVector2: function () {
                    null ==
                    ba.__limeVector2 && (ba.__limeVector2 = new mf);
                    var a = ba.__limeVector2;
                    a.x = this.x;
                    a.y = this.y;
                    return ba.__limeVector2
                },
                get_length: function () {
                    return Math.sqrt(this.x * this.x + this.y * this.y)
                },
                __class__: ba,
                __properties__: {
                    get_length: "get_length"
                }
            };
            var ia = function () {
                Bb.call(this)
            };
            g["toytown2.elements3d.buildings.Building"] = ia;
            ia.__name__ = "toytown2.elements3d.buildings.Building";
            ia.getLevel = function (a, b) {
                return 0
            };
            ia.getRandomRoof = function () {
                ia.uvRoof.y = .25 + .5 * Math.abs(((x.seed = 48271 *
                    x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                return ia.uvRoof
            };
            ia.addWindowlessWall = function (a, b, c, d, e, f) {
                ia.uvWall[1].y = .25 + .5 * (c.y - ia.zero) / f;
                ia.uvWall[2].y = .25 + .5 * (d.y - ia.zero) / f;
                a.addPolygonUV([b, c, d, e], ia.uvWall)
            };
            ia.addWall = function (a, b, c, d, e, f) {
                var h = Q.distance(b, e),
                    r = Math.min(c.y, d.y) - ia.zero,
                    m = 1.8,
                    C = 3,
                    g = 2,
                    k = 1.5;
                var q = 1.5 * (1 - Math.min(Math.abs(c.y - d.y) / (1.2 + m),
                    1));
                var n = Math.floor((h - 2 * g + C) / (.8 + C)),
                    l = Math.floor((r - k - q + m) / (1.2 + m));
                if (1 > n || 1 > l) ia.addWindowlessWall(a, b, c, d, e, f);
                else {
                    var p = (r - 1.2 * l) / (k + (l - 1) * m + q);
                    k *= p;
                    q *= p;
                    m *= p;
                    p = (h - .8 * n) / (g + (n - 1) * C + g);
                    g *= p;
                    C *= p;
                    if (3 < l) {
                        p = Math.pow(l - 2, .3333333333333333);
                        var y = p - (p | 0);
                        null == y && (y = .5);
                        l = 2 + ((p | 0) + ((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 < y ? 1 : 0));
                        k = r - 1.2 * l - (l - 1) * m - q
                    }
                    n > l + 1 && (p = Math.pow(n - l, .3333333333333333), y = p - (p | 0), null == y && (y = .5), n = l + ((p | 0) + ((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 < y ? 1 : 0)), C = (h - .8 *
                        n - 2 * g) / (n - 1));
                    p = [];
                    y = [];
                    r = 0;
                    for (q = n; r < q;) {
                        var v = r++;
                        v = (g + v * (.8 + C)) / h;
                        var t = b.x,
                            B = v;
                        null == B && (B = .5);
                        p.push(t + (e.x - t) * B);
                        t = b.z;
                        B = v;
                        null == B && (B = .5);
                        y.push(t + (e.z - t) * B);
                        v += .8 / h;
                        t = b.x;
                        B = v;
                        null == B && (B = .5);
                        p.push(t + (e.x - t) * B);
                        t = b.z;
                        null == v && (v = .5);
                        y.push(t + (e.z - t) * v)
                    }
                    h = [];
                    r = 0;
                    for (q = l; r < q;) v = r++, h.push(ia.zero + k + v * (1.2 + m)), h.push(ia.zero + k + v * (1.2 + m) + 1.2);
                    r = [];
                    q = 0;
                    for (m = 2 * l; q < m;) {
                        v = q++;
                        k = [];
                        g = 0;
                        for (t = 2 * n; g < t;) C = g++, k.push(new Q(p[C], h[v], y[C]));
                        r.push(k)
                    }
                    g = r;
                    r = new Q(b.x, h[0], b.z);
                    q = new Q(e.x, h[0], e.z);
                    m = new Q(b.x,
                        h[2 * l - 1], b.z);
                    k = new Q(e.x, h[2 * l - 1], e.z);
                    h = c.subtract(b).crossProduct(e.subtract(b));
                    ia.addWallQuad(a, h, [b, r, q, e], f);
                    ia.addWallQuad(a, h, [r, m, g[2 * l - 1][0], g[0][0]], f);
                    ia.addWallQuad(a, h, [g[0][2 * n - 1], g[2 * l - 1][2 * n - 1], k, q], f);
                    ia.addWallQuad(a, h, [m, c, d, k], f);
                    r = 1;
                    for (q = l; r < q;) v = r++, ia.addWallQuad(a, h, [g[2 * v - 1][0], g[2 * v][0], g[2 * v][2 * n - 1], g[2 * v - 1][2 * n - 1]], f);
                    r = 0;
                    for (q = l; r < q;)
                        for (v = r++, m = 1, k = n; m < k;) C = m++, ia.addWallQuad(a, h, [g[2 * v][2 * C - 1], g[2 * v + 1][2 * C - 1], g[2 * v + 1][2 * C], g[2 * v][2 * C]], f);
                    r = 0;
                    for (q = l; r < q;)
                        for (v = r++,
                                 m = 0, k = n; m < k;) C = m++, ia.addWindow(a, h, [g[2 * v][2 * C], g[2 * v + 1][2 * C], g[2 * v + 1][2 * C + 1], g[2 * v][2 * C + 1]])
                }
            };
            ia.addWallQuad = function (a, b, c, d) {
                ia.uvWallQuad[0].y = .25 + .5 * (c[0].y - ia.zero) / d;
                ia.uvWallQuad[1].y = .25 + .5 * (c[1].y - ia.zero) / d;
                ia.uvWallQuad[2].y = .25 + .5 * (c[2].y - ia.zero) / d;
                ia.uvWallQuad[3].y = .25 + .5 * (c[3].y - ia.zero) / d;
                a.addPolygonUV(c, ia.uvWallQuad, b)
            };
            ia.addWindow = function (a, b, c) {
                var d = aa.lighted;
                null == d && (d = .5);
                (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 < d ? ia.faLights.addPolygon(c) : a.addPolygonUV(c, ia.uvDarkWindow,
                    b)
            };
            ia.initLights = function () {
                ia.faLights.reset()
            };
            ia.addLights = function (a, b) {
                0 < ia.faLights.indices.get_length() && (b = new Ub(ia.faLights.geometry(), b), a.addChild(b))
            };
            ia.__super__ = Bb;
            ia.prototype = l(Bb.prototype, {
                __class__: ia
            });
            var Pb = function (a, b, c) {
                var d = 6;
                null == d && (d = 0);
                var e = a.values.wallThickness,
                    f = (null != e ? e : d / a.scale) * a.scale;
                d = f;
                null == d && (d = 0);
                e = a.values.towerRadius;
                d = (null != e ? e : d / a.scale) * a.scale;
                e = 0;
                for (var h = a.wallSegments; e < h.length;) {
                    var r = h[e];
                    ++e;
                    var m = r.start,
                        C = a.gates.h[m.__id__];
                    null !=
                    C && (m = C.p2);
                    r = r.end;
                    C = a.gates.h[r.__id__];
                    null != C && (r = C.p1);
                    C = b(m.x, m.y);
                    var g = b(r.x, r.y);
                    Pb.buildSegment(c, m, r, 30, f, C, g)
                }
                Pb.roofNeeded = aa.roofedTowers && 0 < aa.pitch && Ka.gableRoofs;
                for (a = a.towers.iterator(); a.hasNext();) f = a.next(), e = f.point, e = b(e.x, e.y), aa.squareTowers ? (h = f.wall.poly.indexOf(f.point), h = rl.tangent(f.wall.poly, h), Pb.buildSquareTower(c, f.point, 35, d, Math.atan2(h.y, h.x), e)) : Pb.buildRoundTower(c, f.point, 35, d, e)
            };
            g["toytown2.elements3d.Walls"] = Pb;
            Pb.__name__ = "toytown2.elements3d.Walls";
            Pb.buildSegment = function (a, b, c, d, e, f, h) {
                null == h && (h = 0);
                null == f && (f = 0);
                var r = c.subtract(b);
                r = new ba(-r.y, r.x);
                e /= 2;
                null == e && (e = 1);
                r = r.clone();
                r.normalize(e);
                var m = r;
                e = b.subtract(m);
                r = c.subtract(m);
                a.addPolygonUV([new Q(e.x, f, e.y), new Q(e.x, f + d, e.y), new Q(r.x, h + d, r.y), new Q(r.x, h, r.y)], ia.uvWalls);
                b = b.add(m);
                c = c.add(m);
                a.addPolygonUV([new Q(c.x, h, c.y), new Q(c.x, h + d, c.y), new Q(b.x, f + d, b.y), new Q(b.x, f, b.y)], ia.uvWalls);
                a.addPolygonUV([new Q(e.x, f + d, e.y), new Q(b.x, f + d, b.y), new Q(c.x, h + d, c.y), new Q(r.x,
                    h + d, r.y)], Pb.wallTopUV)
            };
            Pb.buildRoundTower = function (a, b, c, d, e) {
                null == e && (e = 0);
                for (var f = ia.uvWalls[0], h = ia.uvWalls[1], r = [], m = [], C = [], g = 0, k = 12; g < k;) {
                    var q = g++,
                        n = q / 12 * 2 * Math.PI;
                    q = Math.cos(n);
                    n = Math.sin(n);
                    var l = b.x + d * q,
                        p = b.y + d * n;
                    r.push(a.addVertex(l, e, p, q, 0, n, f.x, f.y));
                    m.push(a.addVertex(l, e + c, p, q, 0, n, h.x, h.y));
                    C.unshift(new Q(l, e + c, p))
                }
                g = 0;
                for (k = 12; g < k;) q = g++, a.addTri(r[q], m[q], r[(q + 1) % 12]), a.addTri(m[(q + 1) % 12], r[(q + 1) % 12], m[q]);
                if (Pb.roofNeeded) C = d + 1, g = C * aa.pitch * 1.5, ul.smooth(a, [new ba(0, 0), new ba(C,
                    0), new ba(0, g)], Pb.roofUV, new Q(b.x, e + c, b.y), 12);
                else {
                    b = ia.uvWalls[1];
                    g = [];
                    for (k = 0; 12 > k;) k++, g.push(b);
                    a.addPolygonUV(C, g)
                }
            };
            Pb.buildSquareTower = function (a, b, c, d, e, f) {
                null == f && (f = 0);
                var h = [],
                    r = [],
                    m = Pb.roofNeeded ? [] : null,
                    C = d + 1;
                e += Math.PI / 4;
                for (var g = 0, k = 4; g < k;) {
                    var q = g++,
                        n = e + q / 4 * 2 * Math.PI;
                    q = Math.cos(n);
                    n = Math.sin(n);
                    var l = b.x + d * q,
                        p = b.y + d * n;
                    h.unshift(new Q(l, f + c, p));
                    r.unshift(new Q(l, f, p));
                    Pb.roofNeeded && m.unshift(new Q(b.x + C * q, f + c, b.y + C * n))
                }
                g = 0;
                for (k = 4; g < k;) q = g++, d = (q + 1) % 4, a.addPolygonUV([r[d], h[d],
                    h[q], r[q]
                ], ia.uvWalls);
                if (Pb.roofNeeded) {
                    h = new Q(b.x, f + c + C * aa.pitch * 1.5, b.y);
                    g = 0;
                    for (k = 4; g < k;) q = g++, a.addPolygonUV([m[q], m[(q + 1) % 4], h], Pb.roofUV);
                    a.addPolygonUV(yb.revert(m), Pb.overhangUV)
                } else {
                    m = ia.uvWalls[1];
                    g = [];
                    for (k = 0; 4 > k;) k++, g.push(m);
                    a.addPolygonUV(h, g)
                }
            };
            Pb.addGates = function (a, b, c) {
                var d = new xb;
                for (b = b.gates.iterator(); b.hasNext();) {
                    var e = b.next(),
                        f = e.p1,
                        h = e.p2;
                    e = e.wall.thickness;
                    e = new yi(f, h, 35, 2 * e, e, 12);
                    f = Math.min(c(f.x, f.y), c(h.x, h.y));
                    d.identity();
                    d.appendTranslation(0, f, 0);
                    e.applyTransformation(d);
                    a.addSubGeometry(e)
                }
            };
            Pb.prototype = {
                __class__: Pb
            };
            var Ei = function (a) {
                Ca.call(this);
                var b = new ba,
                    c = new Xc,
                    d = DataProto.data.GeoGeneratorType[DataProto.data.GeoGeneratorType.vg] == a.generator,
                    e = DataProto.data.GeoGeneratorType[DataProto.data.GeoGeneratorType.mfcg] == a.generator,
                    f = null != a.islands,
                    h = d && !f || e,
                    r = a.farthest.get_length();
                f = f ? a.islands : a.water;
                for (var m = 0; m < f.length;) {
                    var g = f[m];
                    ++m;
                    if (h)
                        if (d && null != a.extendable) {
                            for (var q = [], k = 0; k < g.length;) {
                                var n = g[k];
                                ++k;
                                q.push(-1 != a.extendable.indexOf(n) ? new ba(10 * n.x, 10 * n.y) : n)
                            }
                            g = q;
                            g = kf.render(g, !0, 1)
                        } else {
                            if (e) {
                                q = [];
                                for (k = 0; k < g.length;) {
                                    var l = g[k];
                                    ++k;
                                    l.get_length() < r ? n = l : (n = l,
                                        l = r + 10 * (l.get_length() - r), null == l && (l = 1), n = n.clone(), n.normalize(l));
                                    q.push(n)
                                }
                                g = q;
                                q = yb.difference(g, a.earth);
                                k = 0;
                                for (n = a.walls; k < n.length;) l = n[k], ++k, yb.addAll(q, l.poly);
                                k = 0;
                                for (n = a.rivers; k < n.length;) l = n[k], ++k, yb.add(q, l.poly[0]);
                                g = kf.render(g, !0, 2, q)
                            }
                        }
                    else {
                        q = yb.difference(g, a.earth);
                        k = 0;
                        for (n = a.walls; k < n.length;) l = n[k], ++k, yb.addAll(q, l.poly);
                        k = 0;
                        for (n = a.rivers; k < n.length;) l = n[k], ++k, yb.add(q, l.poly[0]);
                        g = kf.render(g, !0, d ? 1 : 2, q)
                    }
                    q = [];
                    for (k = 0; k < g.length;) n = g[k], ++k, q.push(new Q(n.x, 0, n.y));
                    k = [];
                    for (n = 0; n < q.length;) l = q[n], ++n, k.push(l);
                    n = [];
                    l = 0;
                    for (q = q.length; l < q;) l++, n.push(b);
                    c.addTriangulation(k, null, n, Qc.earcut(g))
                }
                this.addSubGeometry(c.subGeometry())
            };
            g["toytown2.elements3d.Waterbody"] = Ei;
            Ei.__name__ = "toytown2.elements3d.Waterbody";
            Ei.__super__ = Ca;
            Ei.prototype = l(Ca.prototype, {
                __class__: Ei
            });
            var qe = function (a, b) {
                this.trees = b;
                for (var c = qe.getTreeModel(), d = [], e = 0, f = b.length; e < f;) e++, d.push(c);
                var h = d,
                    r = D.toObjectVector(null);
                d = 0;
                for (e = h.length; d < e;) f = d++, r.set(f,
                    h[f]);
                c = r;
                d = [];
                e = 0;
                for (f = b.length; e < f;) e++, b = new xb, aa.firTrees ? (h = Math.pow(1.5, ((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), b.appendScale(h, h, h)) : (h = 1 + .5 * Math.abs(((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 2 - 1), b.appendScale(h, 1 + .5 * (((x.seed = 48271 * x.seed %
                    2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), h)), h = new nk, h.set_vertexTransform(b), d.push(h);
                h = d;
                r = D.toObjectVector(null);
                d = 0;
                for (e = h.length; d < e;) f = d++, r.set(f, h[f]);
                d = ql.generateGeometry(c, r);
                e = new Uc(!1, !1, !1);
                e.addAnimation(new wh(1));
                e.addAnimation(new uh(1));
                e.initParticleFunc = p(this, this.initParticleParam);
                Ub.call(this, d, a.mTree);
                a = new pd(e);
                this.set_animator(a);
                a.start()
            };
            g["toytown2.elements3d.Wood"] =
                qe;
            qe.__name__ = "toytown2.elements3d.Wood";
            qe.getTreeModel = function () {
                if (aa.firTrees) {
                    var a = 28;
                    var b = 2.1;
                    var c = new hi(7, a, 11);
                    var d = new xb
                } else a = 21, b = 3.5, c = new ji(7, 7, 11), d = new xb, d.appendScale(1, a / 14, 1);
                d.appendTranslation(0, a / 2 + b, 0);
                c.applyTransformation(d);
                a = new jf(.8, .8, 2 * b, 6, 1);
                d = new xb;
                d.appendTranslation(0, b, 0);
                a.applyTransformation(d);
                c.addSubGeometry(a.get_subGeometries().get(0));
                qe.repaint(c.get_subGeometries().get(0), .5, .25);
                qe.repaint(c.get_subGeometries().get(1), .5, .75);
                return c
            };
            qe.repaint = function (a, b, c) {
                a.get_vertexStride();
                var d = a.get_UVStride(),
                    e = a.get_UVData(),
                    f = e.get_length(),
                    h = a.get_UVOffset();
                for (a.get_vertexOffset(); h < f;) e.set(h, b), e.set(h + 1, c), h += d
            };
            qe.__super__ = Ub;
            qe.prototype = l(Ub.prototype, {
                initParticleParam: function (a) {
                    var b = this.trees[a.index],
                        c = a.nodes;
                    b = new Q(b.x, b.y, b.z);
                    c.h.PositionVector3D = b;
                    b = 1 + .3 * (((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1);
                    c = a.nodes;
                    b = new ib(b, b, b);
                    c.h.ColorInitialColorTransform = b
                },
                createEntityPartitionNode: function () {
                    return new Gi(this)
                },
                __class__: qe
            });
            var Gi = function (a) {
                ff.call(this, a)
            };
            g["toytown2.elements3d.WoodNode"] = Gi;
            Gi.__name__ = "toytown2.elements3d.WoodNode";
            Gi.__super__ = ff;
            Gi.prototype = l(ff.prototype, {
                isInFrustum: function (a, b) {
                    return !0
                },
                __class__: Gi
            });
            var Pf = function () {
                Bb.call(this)
            };
            g["toytown2.elements3d.buildings.FlatRoof"] = Pf;
            Pf.__name__ = "toytown2.elements3d.buildings.FlatRoof";
            Pf.add = function (a, b, c, d) {
                null == d && (d = !0);
                ia.zero = Infinity;
                for (var e = 0; e < b.length;) {
                    var f = b[e];
                    ++e;
                    var h = ia.getLevel(f.x, f.y);
                    ia.zero > h && (ia.zero = h)
                }
                e = [];
                for (h = 0; h < b.length;) f = b[h], ++h, e.push([new Q(f.x, ia.zero, f.y), new Q(f.x, ia.zero + c, f.y)]);
                var r = e;
                f = b.length;
                e = 0;
                for (h = f; e < h;) {
                    var m = e++,
                        g = r[m];
                    m = r[(m + 1) % f];
                    Ka.showWindows ? ia.addWall(a, g[0], g[1], m[1], m[0], c) : ia.addWindowlessWall(a, g[0], g[1], m[1], m[0], c)
                }
                ia.getRandomRoof();
                e = [];
                for (h = 0; h < r.length;) c = r[h], ++h, e.push(c[1]);
                c = e;
                e = [];
                h = 0;
                for (r = f; h < r;) h++,
                    e.push(new Q(0, 1, 0));
                g = e;
                if (d)
                    for (e = [], h = 0, r = f; h < r;) h++, e.push(ia.uvRoof);
                else
                    for (e = [], h = 0, r = f; h < r;) h++, e.push(ia.uvWalls[1]);
                a.addTriangulation(c, g, e, Qc.earcut(b))
            };
            Pf.__super__ = Bb;
            Pf.prototype = l(Bb.prototype, {
                __class__: Pf
            });
            var Rg = function () {
                Bb.call(this)
            };
            g["toytown2.elements3d.buildings.GableRoof"] = Rg;
            Rg.__name__ = "toytown2.elements3d.buildings.GableRoof";
            Rg.add = function (a, b, c, d) {
                d *= Math.pow(2, ((x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 |
                    0) / 2147483647 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1);
                var e = wi.obb(b);
                d *= Math.pow(kd.area(b) / kd.rectArea(e), 2);
                var f = ba.distance(e[0], e[1]),
                    h = ba.distance(e[2], e[1]);
                if (f < h) {
                    var r = vc.lerp(e[0], e[1]);
                    var m = vc.lerp(e[2], e[3]);
                    var g = f;
                    var q = h
                } else r = vc.lerp(e[2], e[1]), m = vc.lerp(e[0], e[3]), g = h, q = f;
                var k = m.y - r.y,
                    n = m.x - r.x,
                    l = new N;
                e = b.length;
                ia.zero = Infinity;
                f = 0;
                for (h = e; f < h;) {
                    var p = f++,
                        y = b[p],
                        v = b[(p + 1) % e];
                    p = vc.intersectLines(r.x, r.y, n, k, y.x, y.y, v.x - y.x, v.y - y.y);
                    null != p && 0 <= p.y && 1 >= p.y && (p =
                        vc.lerp(y, v, p.y), l.set(y, p));
                    v = ia.getLevel(y.x, y.y);
                    ia.zero > v && (ia.zero = v)
                }
                b = b.slice();
                for (p = l.keys(); p.hasNext();) v = p.next(), b.splice(b.indexOf(v) + 1, 0, l.h[v.__id__]);
                e = b.length;
                f = [];
                for (h = 0; h < b.length;) v = b[h], ++h, f.push([new Q(v.x, ia.zero, v.y), new Q(v.x, ia.zero + c + (g / 2 - Math.abs(k * v.x - n * v.y + m.x * r.y - m.y * r.x) / q) * d, v.y)]);
                d = f;
                f = [];
                for (p = l.iterator(); p.hasNext();) v = p.next(), f.push(b.indexOf(v));
                h = f;
                f = h[0] < h[1] ? h[0] : h[1];
                h = h[0] > h[1] ? h[0] : h[1];
                r = b.slice(f, h + 1);
                b = b.slice(h).concat(b.slice(0, f + 1));
                g = d.slice(f,
                    h + 1);
                m = d.slice(h).concat(d.slice(0, f + 1));
                f = 0;
                for (h = e; f < h;) p = f++, v = d[p], l = d[(p + 1) % e], Ka.showWindows ? ia.addWall(a, v[0], v[1], l[1], l[0], c) : ia.addWindowlessWall(a, v[0], v[1], l[1], l[0], c);
                ia.getRandomRoof();
                f = [];
                h = 0;
                for (c = g; h < c.length;) p = c[h], ++h, f.push(p[1]);
                e = f;
                f = [];
                h = 0;
                for (c = r.length; h < c;) h++, f.push(ia.uvRoof);
                a.addTriangulation(e, null, f, Qc.earcut(r));
                f = [];
                h = 0;
                for (c = m; h < c.length;) p = c[h], ++h, f.push(p[1]);
                e = f;
                f = [];
                h = 0;
                for (c = b.length; h < c;) h++, f.push(ia.uvRoof);
                a.addTriangulation(e, null, f, Qc.earcut(b))
            };
            Rg.__super__ = Bb;
            Rg.prototype = l(Bb.prototype, {
                __class__: Rg
            });
            var bc = function (a, b) {
                this.scale = 1;
                this.name = (new Yc(a)).file;
                bc.points = [];
                this.buildings = [];
                this.walls = [];
                this.rivers = [];
                this.roads = [];
                this.planks = [];
                this.prisms = [];
                this.greens = [];
                this.fields = [];
                this.squares = [];
                var c = b.features;
                if (null != c)
                    for (a = 0; a < c.length;) {
                        var d = c[a];
                        ++a;
                        b = d.properties;
                        null == b && (b = d);
                        var e = M.field(b, "id");
                        if (e === "hood" || e === "hoods") e = DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.districts];
                        if (null == e) throw fa.thrown("Feature id is missing");
                        try {
                           switch (e) {
                                case DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.buildings]:
                                    this.buildings = this.getMultiPolygon(d);
                                    break;
                                case DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.districts]:
                                    b = [];
                                    var f = this.getNamedPolies(d).h;
                                    d = f;
                                    for (var h = Object.keys(f), r = h.length, m = 0; m < r;) {
                                        var g = d[h[m++]];
                                        b.push(g)
                                    }
                                    this.districts = b;
                                    break;
                                case DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.earth]:
                                    this.earth = this.getPolygon(d);
                                    break;
                                case DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.extendable]:
                                    this.extendable = this.getMultiPoint(d);
                                    break;
                                case DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.fields]:
                                    this.fields = this.getMultiPolygon(d);
                                    break;
                                case DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.greens]:
                                    this.greens = this.getMultiPolygon(d);
                                    break;
                                case DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.palisade]:
                                    this.palisade = this.getMultiLineString(d);
                                    break;
                                case DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.planks]:
                                    b = 8;
                                    null == b && (b = 0);
                                    var q = this.values.roadWidth;
                                    this.planks = this.getThickMultiLineString(d, (null != q ? q : b / this.scale) * this.scale);
                                    break;
                                case DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.prisms]:
                                    this.prisms = this.getMultiPolygon(d);
                                    break;
                                case DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.rivers]:
                                    var k = this.values.riverWidth;
                                    this.rivers = this.getThickMultiLineString(d, (null != k ? k : 0 / this.scale) * this.scale);
                                    break;
                                case DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.roads]:
                                    b = 8;
                                    null == b && (b = 0);
                                    var n = this.values.roadWidth;
                                    this.roads = this.getThickMultiLineString(d, (null != n ? n : b / this.scale) * this.scale);
                                    break;
                                case DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.squares]:
                                    this.squares = this.getMultiPolygon(d);
                                    break;
                                case DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.trees]:
                                    this.trees = this.getMultiPoint(d);
                                    break;
                                case DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.values]:
                                    this.parseValues(b);
                                    break;
                                case DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.walls]:
                                    b = 6;
                                    null == b && (b = 0);
                                    var l = this.values.wallThickness;
                                    this.walls = this.getThickMultiPolygon(d, (null != l ? l : b / this.scale) * this.scale);
                                    break;
                                case DataProto.data.GeoFeatureType[DataProto.data.GeoFeatureType.water]:
                                    try {
                                        this.water = this.getMultiPolygon(d)
                                    } catch (Ll) {
                                        Ia.lastError = Ll, this.water = [this.getPolygon(d)]
                                    }
                            }
                        } catch (Ll) {
                            console.log('Invalid "' + e + '" feature', Ll);
                            throw Ia.lastError = Ll, fa.thrown('Invalid "' + e + '" feature');
                        }
                    }
                if (null != this.roads) {
                    a = [];
                    b = 0;
                    for (f = this.roads; b < f.length;) g = f[b], ++b, a.push(kd.$length(g.poly));
                    this.lengths = a
                }
                if (0 == this.buildings.length) throw fa.thrown("No buildings!");
                if (1 != this.scale)
                    for (a = 0, b = bc.points; a < b.length;) g = b[a], ++a, g.x *= this.scale, g.y *= this.scale;
                if (DataProto.data.GeoGeneratorType[DataProto.data.GeoGeneratorType.vg] == this.generator && null != this.water) {
                    f = kd.area(this.earth);
                    this.islands = [];
                    g = !1;
                    a = 0;
                    for (b = this.water; a < b.length;) l = b[a], ++a, h = kd.area(l), h == f && (g = !0), 0 > h && this.islands.push(yb.revert(l));
                    g || (this.islands = null)
                }
                this.wallSegments = [];
                this.towers = new N;
                this.gates = new N;
                if (null != this.walls)
                    for (a = 0, b = this.walls; a < b.length;)
                        for (g = b[a], ++a, h = g.poly, r = h.length, f = 0, q = r; f < q;) {
                            n = f++;
                            k = h[n];
                            n = h[(n + 1) % r];
                            if (null !=
                                this.water && 8 <= r) {
                                c = !1;
                                e = 0;
                                for (d = this.water; e < d.length;)
                                    if (l = d[e], ++e, m = l.indexOf(k), -1 != m && l.indexOf(n) == (m + l.length - 1) % l.length) {
                                        c = !0;
                                        break
                                    }
                                if (c) continue
                            }
                            this.wallSegments.push(new uk(k, n));
                            null == this.towers.h[k.__id__] && (l = this.towers, c = new Hi(k, g), l.set(k, c));
                            null == this.towers.h[n.__id__] && (l = this.towers, c = new Hi(n, g), l.set(n, c));
                            l = 0;
                            for (c = this.roads; l < c.length;)
                                if (n = c[l], ++l, -1 != n.poly.indexOf(k)) {
                                    l = this.gates;
                                    n = new Ii(k, g, n);
                                    l.set(k, n);
                                    break
                                }
                            l = 0;
                            for (c = this.rivers; l < c.length;)
                                if (n = c[l], ++l, -1 !=
                                n.poly.indexOf(k)) {
                                    l = this.gates;
                                    n = new Ii(k, g, n);
                                    l.set(k, n);
                                    break
                                }
                        }
                for (a = this.gates.iterator(); a.hasNext();) b = a.next(), this.towers.remove(b.point);
                a = [];
                b = 0;
                for (f = this.buildings; b < f.length;) c = f[b], ++b, 3 <= c.length && a.push(c);
                this.buildings = a;
                a = [];
                b = 0;
                for (f = this.prisms; b < f.length;) c = f[b], ++b, 3 <= c.length && a.push(c);
                this.prisms = a;
                h = 10;
                this.farthest = new ba(h, 0);
                a = 0;
                for (b = this.buildings; a < b.length;)
                    for (r = b[a], ++a, f = 0; f < r.length;) g = r[f], ++f, q = g.get_length(), h < q && (h = q, this.farthest = g);
                bc.instance = this
            };
            g["toytown2.model.City"] =
                bc;
            bc.__name__ = "toytown2.model.City";
            bc.prototype = {
                getRoute: function (a, b) {
                    if (null == this.roads || 0 == this.roads.length) return null;
                    if (null == a) {
                        var c = yb.weighted(this.roads, this.lengths).poly;
                        return {
                            road: c,
                            path: .5 > (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 ? c : yb.revert(c)
                        }
                    }
                    var d = [];
                    c = [];
                    for (var e = [], f = 0, h = this.roads; f < h.length;) {
                        var r = h[f];
                        ++f;
                        if (r.poly != b) {
                            for (var m = bc.JUMP_DISTANCE, g = null, q = 0, k = r.poly; q < k.length;) {
                                var n = k[q];
                                ++q;
                                var l = ba.distance(a, n);
                                m > l && (m = l, g = n)
                            }
                            null != g && (d.push(r),
                                c.push(g), e.push(0 < m ? 1 / m : 1E10))
                        }
                    }
                    if (0 < d.length) {
                        f = [];
                        h = 0;
                        for (q = e.length; h < q;) a = h++, f.push(a);
                        e = yb.weighted(f, e);
                        d = d[e].poly;
                        c = d.indexOf(c[e]);
                        e = 1 - c / (d.length - 1);
                        null == e && (e = .5);
                        c = (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 < e ? d.slice(c) : yb.revert(d.slice(0, c + 1));
                        return {
                            road: d,
                            path: c
                        }
                    }
                    return null
                },
                parseValues: function (a) {
                    this.values = a;
                    a = this.values.generator;
                    this.generator = null != a ? a : DataProto.data.GeoGeneratorType[DataProto.data.GeoGeneratorType.mfcg];
                    a = this.values.version;
                    this.version = null != a ? a : "0.0.0";
                    a = [];
                    for (var b = 0, c = this.version.split("."); b < c.length;) {
                        var d =
                            c[b];
                        ++b;
                        a.push(n.parseInt(d))
                    }
                    DataProto.data.GeoGeneratorType[DataProto.data.GeoGeneratorType.mfcg] == this.generator && (7 > a[1] || 7 == a[1] && 5 > a[2]) && (this.scale = bc.LEGACY_SCALE)
                },
                getThickMultiLineString: function (a, b) {
                    null == b && (b = 0);
                    var c = a.type;
                    if (null == c) return this.thicken(this.getMultiLineString(a), b);
                    switch (c) {
                        case DataProto.data.GeoType[DataProto.data.GeoType.FeatureCollection]:
                            a = a.features;
                            c = [];
                            for (b = 0; b < a.length;) {
                                var d = a[b];
                                ++b;
                                c.push(new lf(this.getLineString(d.geometry), d.width))
                            }
                            return c;
                        case DataProto.data.GeoType[DataProto.data.GeoType.GeometryCollection]:
                            a = a.geometries;
                            c = [];
                            if(typeof a === "array"){
                                for (b = 0; b < a.length;) d = a[b], ++b, c.push(new lf(this.getLineString(d), d.width));
                            }
                            return c;
                        default:
                            return this.thicken(this.getMultiLineString(a), b)
                    }
                },
                getThickMultiPolygon: function (a, b) {
                    null == b && (b = 0);
                    var c = a.type;
                    if (null == c) return this.thicken(this.getMultiPolygon(a), b);
                    switch (c) {
                        case DataProto.data.GeoType[DataProto.data.GeoType.FeatureCollection]:
                            a = a.features;
                            c = [];
                            for (b = 0; b < a.length;) {
                                var d = a[b];
                                ++b;
                                c.push(new lf(this.getPolygon(d.geometry), d.width))
                            }
                            return c;
                        case DataProto.data.GeoType[DataProto.data.GeoType.GeometryCollection]:
                            a = a.geometries;
                            c = [];
                            for (b = 0; b < a.length;) d = a[b], ++b, c.push(new lf(this.getPolygon(d), d.width));
                            return c;
                        default:
                            return this.thicken(this.getMultiPolygon(a),
                                b)
                    }
                },
                getNamedPolies: function (a) {
                    a = a.geometries;
                    for (var b = new Ha, c = 0; c < a.length;) {
                        var d = a[c];
                        ++c;
                        var e = this.getPolygon(d);
                        b.h[d.name] = e
                    }
                    return b
                },
                thicken: function (a, b) {
                    for (var c = [], d = 0; d < a.length;) {
                        var e = a[d];
                        ++d;
                        c.push(new lf(e, b))
                    }
                    return c
                },
                getMultiPolygon: function (a) {
                    var b = a.type;
                    if (null == b) throw fa.thrown("Incorrect object type: " + n.string(b));
                    switch (b) {
                        case DataProto.data.GeoType[DataProto.data.GeoType.Feature]:
                            return this.getMultiPolygon(a.geometry);
                        case DataProto.data.GeoType[DataProto.data.GeoType.MultiPolygon]:
                            a = a.coordinates;
                            b = [];
                            for (var c = 0; c < a.length;) {
                                var d = a[c];
                                ++c;
                                d = d[0];
                                for (var e = [], f = 0; f < d.length;) {
                                    var h = d[f];
                                    ++f;
                                    e.push(this.getPoint(h))
                                }
                                d = e;
                                d.reverse();
                                b.push(d)
                            }
                            return b;
                        default:
                            throw fa.thrown("Incorrect object type: " + n.string(b));
                    }
                },
                getMultiPoint: function (a) {
                    var b = a.type;
                    if (null == b) throw fa.thrown("Incorrect object type: " + n.string(b));
                    switch (b) {
                        case DataProto.data.GeoType[DataProto.data.GeoType.Feature]:
                            return this.getMultiPoint(a.geometry);
                        case DataProto.data.GeoType[DataProto.data.GeoType.MultiPoint]:
                            a = a.coordinates;
                            b = [];
                            for (var c = 0; c < a.length;) {
                                var d = a[c];
                                ++c;
                                b.push(this.getPoint(d))
                            }
                            return b;
                        default:
                            throw fa.thrown("Incorrect object type: " +
                                n.string(b));
                    }
                },
                getMultiLineString: function (a) {
                    if (DataProto.data.GeoType[DataProto.data.GeoType.Feature] == a.type) return this.getMultiLineString(a.geometry);
                    a = a.coordinates;
                    for (var b = [], c = 0; c < a.length;) {
                        var d = a[c];
                        ++c;
                        for (var e = [], f = 0; f < d.length;) {
                            var h = d[f];
                            ++f;
                            e.push(this.getPoint(h))
                        }
                        b.push(e)
                    }
                    return b
                },
                getPolygon: function (a) {
                    if (DataProto.data.GeoType[DataProto.data.GeoType.Feature] == a.type) return this.getPolygon(a.geometry);
                    a = a.coordinates[0];
                    for (var b = [], c = 0; c < a.length;) {
                        var d = a[c];
                        ++c;
                        b.push(this.getPoint(d))
                    }
                    b.reverse();
                    return b
                },
                getLineString: function (a) {
                    if (DataProto.data.GeoType[DataProto.data.GeoType.Feature] == a.type) return this.getLineString(a.geometry);
                    a = a.coordinates;
                    for (var b = [], c = 0; c < a.length;) {
                        var d = a[c];
                        ++c;
                        b.push(this.getPoint(d))
                    }
                    return b
                },
                getPoint: function (a) {
                    var b = a[0];
                    a = a[1];
                    for (var c = 0, d = bc.points; c < d.length;) {
                        var e = d[c];
                        ++c;
                        if (e.x == b && e.y == a) return e
                    }
                    e = new ba(b, a);
                    bc.points.push(e);
                    return e
                },
                __class__: bc
            };
            var Ii = function (a, b, c) {
                this.point = a;
                this.wall = b;
                this.road = c;
                this.width = c.thickness;
                var d = b.poly,
                    e = d.indexOf(a);
                -
                    1 != e ? (c = d.length, c = d[(e + c - 1) % c]) : c = null;
                d = b.poly;
                e = d.indexOf(a);
                b = -1 != e ? d[(e + 1) % d.length] : null;
                d = (this.width + this.getExtraWidth()) /
                    2;
                c = c.subtract(a);
                e = d;
                null == e && (e = 1);
                c = c.clone();
                c.normalize(e);
                this.p1 = a.add(c);
                c = b.subtract(a);
                e = d;
                null == e && (e = 1);
                c = c.clone();
                c.normalize(e);
                this.p2 = a.add(c)
            };
            g["toytown2.model.Gate"] = Ii;
            Ii.__name__ = "toytown2.model.Gate";
            Ii.prototype = {
                getExtraWidth: function () {
                    return this.wall.thickness
                },
                __class__: Ii
            };
            var Hi = function (a, b) {
                this.point = a;
                this.wall = b
            };
            g["toytown2.model.Tower"] = Hi;
            Hi.__name__ = "toytown2.model.Tower";
            Hi.prototype = {
                __class__: Hi
            };
            var Va = function () {
                this.btnLeft =
                    this.btnRight = !1;
                oe.call(this);
                Va.shuffleStyles = Fb.get("shuffleStyles", !0);
                !Va.shuffleStyles && aa.restorePalette() || this.loadPresetStyle();
                Ka.showTrees = Fb.get("showTrees", !0);
                Ka.gableRoofs = Fb.get("gableRoofs", !0);
                Ka.showWindows = Fb.get("showWindows", !0);
                null == Va.view && (Va.view = new Ka);
                this.camera = Va.view.get_camera();
                this.addChild(Va.view);
                var a = (E = Va.view, p(E, E.getLevel));
                this.modeRotate = new Ji(this.camera, a);
                this.modeOrtho = new Ki(this.camera, a);
                this.modeFree = new Li(this.camera, a);
                this.modeStare = new Mi(this.camera,
                    a);
                this.modeFly = new Ni(this.camera, a);
                this.keyEvent.add(p(this, this.onKey));
                Oe.init(p(this, this.load));
                this.loadFromExchangeOrSample();
            };
            g["toytown2.scenes.TownScene"] = Va;
            Va.__name__ = "toytown2.scenes.TownScene";
            Va.__super__ = oe;
            Va.prototype = l(oe.prototype, {
                activate: function () {
                    oe.prototype.activate.call(this);
                    this.stage.showDefaultContextMenu = !1;
                    this.addEventListener("mouseDown", p(this, this.onMouseDown));
                    this.addEventListener("mouseUp", p(this, this.onMouseUp));
                    this.addEventListener("mouseWheel",
                        p(this, this.onWheel));
                    this.addEventListener("mouseMove", p(this, this.onMouseMove));
                    this.addEventListener("touchTap", p(this, this.onTap));
                    this.addEventListener("rightClick", p(this, this.onContext))
                },
                deactivate: function () {
                    oe.prototype.deactivate.call(this);
                    this.removeEventListener("mouseDown", p(this, this.onMouseDown));
                    this.removeEventListener("mouseUp", p(this, this.onMouseUp));
                    this.removeEventListener("mouseWheel", p(this, this.onWheel));
                    this.removeEventListener("mouseMove", p(this, this.onMouseMove));
                    this.removeEventListener("touchTap",
                        p(this, this.onTap));
                    this.removeEventListener("rightClick", p(this, this.onContext))
                },
                layout: function () {
                    Va.view.set_width(this.rWidth);
                    Va.view.set_height(this.rHeight)
                },
                groundView: function (a) {
                    this.changeLens(ed);
                    this.viewPedestrian();
                    this.setMode(a ? this.modeFly : this.modeFree)
                },
                defaultView: function (a) {
                    this.changeLens(ed);
                    this.viewPanoramic();
                    this.setMode(a ? this.modeRotate : this.modeFree)
                },
                mapView: function () {
                    this.changeLens(ed);
                    this.viewTopDown();
                    this.setMode(this.modeStare)
                },
                macroView: function () {
                    this.changeLens(Dh);
                    this.setMode(this.modeOrtho)
                },
                changeLens: function (a) {
                    T.__instanceof(this.camera.get_lens(), a) || (this.camera.set_lens(y.createInstance(a, [])), this.camera.get_lens().set_near(.5), this.camera.get_lens().set_far(Ka.radius * Math.sqrt(2)))
                },
                viewPedestrian: function () {
                    if (null != bc.instance.roads && 0 != bc.instance.roads.length) {
                        var a = yb.random(bc.instance.roads).poly,
                            b = Math.floor(1 + (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 * (a.length - 1)),
                            c = a[b];
                        a = a[b - 1];
                        b = 2;
                        null == b && (b = 0);
                        this.camera.set_position(new Q(c.x,
                            (Ka.elevation ? Va.view.terrain.getLevel(c.x, c.y) : 0) + b, c.y));
                        b = 2;
                        null == b && (b = 0);
                        this.camera.lookAt(new Q(a.x, (Ka.elevation ? Va.view.terrain.getLevel(a.x, a.y) : 0) + b, a.y))
                    }
                },
                viewPanoramic: function () {
                    var a = bc.instance.farthest;
                    a = new ba(.5 * a.x, .5 * a.y);
                    var b = this.camera,
                        c = Va.view,
                        d = a.get_length() / 3;
                    null == d && (d = 0);
                    b.set_position(new Q(a.x, (Ka.elevation ? c.terrain.getLevel(a.x, a.y) : 0) + d, a.y));
                    this.camera.lookAt(new Q(0, (Ka.elevation ? Va.view.terrain.getLevel(0, 0) : 0) + 2, 0));
                    this.camera.set_rotationX(this.camera.get_rotationX() %
                        360 + (0 < this.camera.get_rotationX() ? 0 : 360))
                },
                viewTopDown: function () {
                    this.camera.set_position(new Q(0, bc.instance.farthest.get_length(), 0));
                    this.camera.lookAt(new Q(0, 0, 0))
                },
                setMode: function (a) {
                    a != this.navMode && (this.navMode = a, this.navMode.activate(), this.updateFog())
                },
                onUpdate: function (a) {
                    oe.prototype.onUpdate.call(this, a);
                    this.navMode.update(a);
                    Va.view.render()
                },
                onKey: function (a, b) {
                    if (!this.navMode.onKey(a, b) && b) switch (a) {
                        case 13:
                            if (GetParamName === "") this.loadSample();
                            break;
                        case 48:
                            this.switchStyle(this.keyShift ? aa.getRandom() :
                                Lb.fromAsset("night"));
                            break;
                        case 49:
                            this.groundView(this.keyShift);
                            break;
                        case 50:
                            this.defaultView(!0);
                            break;
                        case 51:
                            this.mapView();
                            break;
                        case 52:
                            this.macroView();
                            break;
                        case 53:
                            this.switchStyle(Lb.fromAsset("midlands"));
                            break;
                        case 54:
                            this.switchStyle(Lb.fromAsset("desert"));
                            break;
                        case 55:
                            this.switchStyle(Lb.fromAsset("frost"));
                            break;
                        case 56:
                            this.switchStyle(Lb.fromAsset("harvest"));
                            break;
                        case 57:
                            this.switchStyle(Lb.fromAsset("innsmouth"));
                            break;
                        case 67:
                            this.showStyle();
                            break;
                        case 71:
                            this.toggleGableRoofs();
                            break;
                        case 76:
                            this.loadExternal();
                            break;
                        case 84:
                            this.toggleTrees();
                            break;
                        case 87:
                            this.toggleWindows();
                            break;
                        case 88:
                            this.export();
                            break;
                        case 192:
                            this.setMode(this.navMode == this.modeFree ? this.modeRotate : this.modeFree)
                    }
                },
                onWheel: function (a) {
                    this.navMode.onWheel(0 > a.delta ? -.5 : 0 < a.delta ? .5 : 0)
                },
                onMouseDown: function (a) {
                    "mouseDown" == a.type && (this.btnLeft = !0);
                    "rightMouseDown" == a.type && (this.btnRight = !0);
                    this.stage.window.set_mouseLock(this.btnRight);
                    this.prevMouseX = this.get_mouseX();
                    this.prevMouseY = this.get_mouseY();
                    this.tapOK = !0
                },
                onMouseMove: function (a) {
                    if (this.btnLeft || this.btnRight) {
                        a = this.get_mouseX() - this.prevMouseX;
                        var b = this.get_mouseY() - this.prevMouseY;
                        if (this.navMode == this.modeOrtho) this.navMode.onMouse(a / this.rHeight, b / this.rHeight);
                        else {
                            var c = T.__cast(this.camera.get_lens(), ed).get_fieldOfView() / this.rHeight;
                            this.navMode.onMouse(a * c, b * c)
                        }
                        this.prevMouseX = this.get_mouseX();
                        this.prevMouseY = this.get_mouseY();
                        this.tapOK = !1
                    }
                },
                onMouseUp: function (a) {
                    "mouseUp" == a.type && (this.btnLeft = !1);
                    "rightMouseUp" == a.type &&
                    (this.btnRight = !1);
                    this.stage.window.set_mouseLock(this.btnRight)
                },
                onTap: function (a) {
                    this.tapOK && GetParamName === "" && this.loadSample()
                },
                onContext: function (a) {
                    var b = this;
                    a = new td;
                    var c = new td;
                    c.addItem("Ground", function () {
                        b.groundView(!1)
                    });
                    c.addItem("Default", function () {
                        b.defaultView(!0)
                    });
                    c.addItem("Map", p(this, this.mapView));
                    c.addItem("Macro", p(this, this.macroView));
                    var d = new td;
                    d.addItem("Rotation", function () {
                        b.setMode(b.navMode == b.modeRotate ? b.modeFree : b.modeRotate)
                    }, this.navMode == this.modeRotate);
                    d.addItem("Fly-through",
                        function () {
                            b.setMode(b.navMode == b.modeFly ? b.modeFree : b.modeFly)
                        }, this.navMode == this.modeFly);
                    a.addItem("New view", p(this, GetParamName != ""? null:this.loadSample));
                    a.addItem("Import *.json or *.pb", p(this, GetParamName != ""? null:this.loadExternal));
                    a.addItem("Export as OBJ", p(this, this.export));
                    a.addSeparator();
                    a.addSubmenu("View", c);
                    a.addSubmenu("Animation", d);

                    a.addSeparator();
                    a.addItem("Shuffle styles", p(this, this.toggleShuffleStyle), Va.shuffleStyles);
                    a.addItem("Trees", p(this, this.toggleTrees), Ka.showTrees);
                    a.addItem("Gable roofs", p(this, this.toggleGableRoofs), Ka.gableRoofs);
                    a.addItem("Windows", p(this, this.toggleWindows), Ka.showWindows);
                    a.addItem("Style...", p(this, this.showStyle));

                    a.addSeparator();
                    a.addItem("Fullscreen", p(this, this.toggleFullscreen), 2 != this.stage.get_displayState());
                    a.addItem("About", function () {
                        null == Ma.findForm(AboutDialogForm) && Ma.showDialog(new AboutDialogForm)
                    });
                    Ma.showMenu(a)
                },
                switchStyle: function (a) {
                    aa.setPalette(a, !0);
                    this.load(null, null)
                },
                showStyle: function () {
                    var a = this,
                        b = new nc(function (b) {
                            a.switchStyle(b)
                        }, "Midlands midlands Desert desert Frost frost Harvest harvest Innsmouth innsmouth Night night Random random".split(" "));
                    b.getName = function (a) {
                        return Qf.get(a.getColor("sky1")) + "-" + Qf.get(a.getColor("ground")) + "-" + Qf.get(a.getColor("roofs1"))
                    };
                    b.onNullAsset = function (a, b) {
                        b.loadPalette(aa.getRandom())
                    };
                    aa.fillForm(b);
                    Ma.showDialog(b, "Style")
                },
                loadPresetStyle: function () {
                    aa.setPalette(Lb.fromAsset(yb.random(Va.schemes)))
                },
                loadFromExchangeOrSample: function () {
                    var a = null;
                    try {
                        var b = Qe.getLocalStorage();
                        if (null != b) {
                            a = b.getItem("{{LOCALSTORAGE_TOWN_BUF}}");
                            null != a && b.removeItem("{{LOCALSTORAGE_TOWN_BUF}}")
                        }
                    } catch (c) {
                        GetParamName = "";
                        Ia.lastError = c
                    }
                    if (null == a) {
                        GetParamName = "";
                        this.loadSample();
                        return
                    }
                    var d = a.charAt(0),
                        e = a.substring(1);
                    if ("p" === d) {
                        var f = new Uint8Array(e.length);
                        for (var h = 0; h < e.length;) f[h] = e.charCodeAt(h) & 255, ++h;
                        !1 === this.load("mfcg.pb", f.buffer) && this.loadSample()
                    } else if ("j" === d) {
                        !1 === this.load("mfcg.json", e) && this.loadSample()
                    } else {
                        GetParamName = "";
                        Ma.showMessage("Invalid exchange data");
                        this.loadSample()
                    }

                    if(GetParamName != ""){
                        document.title = document.title + ' | ' + GetParamName;

                        const url = new URL(window.location.href);
                        url.searchParams.delete('name');
                        window.history.replaceState({}, '', url);

                        params.meta.about.params["Map Name"] = GetParamName;
                    }
                },
                loadSample: function () {
                    Va.shuffleStyles && this.loadPresetStyle();
                    Va.lastSample = yb.random(yb.difference(Va.samples, [Va.lastSample]));
                    this.load(Va.lastSample, mc.getText(Va.lastSample))
                },
                loadExternal: function () {
                    var a = this,
                        b = new Of;
                    b.addEventListener("select", function (c) {
                        b.addEventListener("complete", function (c) {
                            a.load(b.get_name(), b.data)
                        });
                        b.load()
                    });
                    var c = [new ti("Cities", "*.json;*.pb;")];
                    b.browse(c)
                },
                load: function (a, b) {
                    if (null != a) try {
                        var c = DataGeo.decodeCityFile(a, b);
                        new bc(a, c)
                    } catch (d) {
                        Ia.lastError = d;
                        a = fa.caught(d).unwrap();
                        Ma.showMessage(n.string(a));
                        return !1
                    }
                    Va.view.reset(bc.instance);
                    null != a && (this.defaultView(!0), this.modeFly.runner = null);
                    this.updateFog();
                    return !0
                },
                updateFog: function () {
                    this.navMode == this.modeStare ? Va.view.disableFog() : this.navMode == this.modeOrtho ? Va.view.enableOrthFog() : Va.view.enableFog()
                },
                toggleShuffleStyle: function () {
                    Fb.set("shuffleStyles",
                        Va.shuffleStyles = !Va.shuffleStyles)
                },
                toggleTrees: function () {
                    Fb.set("showTrees", Ka.showTrees = !Ka.showTrees);
                    this.load(null, null)
                },
                toggleGableRoofs: function () {
                    Fb.set("gableRoofs", Ka.gableRoofs = !Ka.gableRoofs);
                    this.load(null, null)
                },
                toggleWindows: function () {
                    Fb.set("showWindows", Ka.showWindows = !Ka.showWindows);
                    this.load(null, null)
                },
                toggleFullscreen: function () {
                    this.stage.set_displayState(2 == this.stage.get_displayState() ? 1 : 2)
                },
                "export": function () {
                    var a = bc.instance.name + ".obj",
                        b = tl.export(Va.view.buildings);
                    Og.saveText(b, a, "text/plain")
                },
                goToPrimarySource: function (inNewWindow = true) {
                    const adr = FuncProto.paramsUrlString(params.routes.primary_source);
                    if (inNewWindow) {
                        window.open(adr, "_blank")
                    } else {
                        window.open(adr, "_self")
                    }
                },
                goToGithub: function (inNewWindow = true) {
                    const adr = FuncProto.paramsUrlString(params.routes.github);
                    if (inNewWindow) {
                        window.open(adr, "_blank")
                    } else {
                        window.open(adr, "_self")
                    }
                },
                goToHomepage: function (inNewWindow = true) {
                    const adr = FuncProto.paramsUrlString(params.routes.homepage);
                    if (inNewWindow) {
                        window.open(adr, "_blank")
                    } else {
                        window.open(adr, "_self")
                    }
                },
                goToCave: function (inNewWindow = true) {
                    const adr = FuncProto.paramsUrlString(params.routes.cave);
                    if (inNewWindow) {
                        window.open(adr, "_blank")
                    } else {
                        window.open(adr, "_self")
                    }
                },
                goToDwellings: function (inNewWindow = true) {
                    const adr = FuncProto.paramsUrlString(params.routes.dwellings);
                    if (inNewWindow) {
                        window.open(adr, "_blank")
                    } else {
                        window.open(adr, "_self")
                    }
                },
                goToMfcg: function (inNewWindow = true) {
                    const adr = FuncProto.paramsUrlString(params.routes.mfcg);
                    if (inNewWindow) {
                        window.open(adr, "_blank")
                    } else {
                        window.open(adr, "_self")
                    }
                },
                goToVillage: function (inNewWindow = true) {
                    const adr = FuncProto.paramsUrlString(params.routes.village);
                    if (inNewWindow) {
                        window.open(adr, "_blank")
                    } else {
                        window.open(adr, "_self")
                    }
                },
                goToViewer: function (inNewWindow = true) {
                    const adr = FuncProto.paramsUrlString(params.routes.viewer);
                    if (inNewWindow) {
                        window.open(adr, "_blank")
                    } else {
                        window.open(adr, "_self")
                    }
                },
                __class__: Va
            });
            var wc = function (a, b) {
                this.getLevel = function (a,
                                          b) {
                    return 0
                };
                this.camera = a;
                null != b && (this.getLevel = b)
            };
            g["toytown2.scenes.navmodes.NavMode"] = wc;
            wc.__name__ = "toytown2.scenes.navmodes.NavMode";
            wc.prototype = {
                activate: function () {
                },
                onKey: function (a, b) {
                    return !1
                },
                onMouse: function (a, b) {
                },
                onWheel: function (a) {
                },
                update: function (a) {
                },
                __class__: wc
            };
            var Ni = function (a, b) {
                this.vSpeed = 0;
                wc.call(this, a, b)
            };
            g["toytown2.scenes.navmodes.NavModeFly"] = Ni;
            Ni.__name__ = "toytown2.scenes.navmodes.NavModeFly";
            Ni.__super__ = wc;
            Ni.prototype = l(wc.prototype, {
                activate: function () {
                    null == this.runner && (this.runner = new wk((E = bc.instance, p(E, E.getRoute))))
                },
                onKey: function (a, b) {
                    switch (a) {
                        case 107:
                            this.vSpeed = b ? 10 : 0;
                            break;
                        case 109:
                            this.vSpeed = b ? -10 : 0;
                            break;
                        default:
                            return !1
                    }
                    return !0
                },
                update: function (a) {
                    null != this.runner && (null == this.runner.obj && (this.runner.speed = 10, this.runner.run(this.camera)), this.runner.yPos = hc.gate(this.runner.yPos + a * this.vSpeed, 2, 40), this.runner.update(a))
                },
                onWheel: function (a) {
                    this.runner.speed = hc.gate(this.runner.speed *
                        Math.pow(1.2, a), 2, 50)
                },
                __class__: Ni
            });
            var Li = function (a, b) {
                this.acc = 1;
                this.grounded = !1;
                this.aSpeed = 0;
                this.speed = new Q;
                wc.call(this, a, b)
            };
            g["toytown2.scenes.navmodes.NavModeFree"] = Li;
            Li.__name__ = "toytown2.scenes.navmodes.NavModeFree";
            Li.__super__ = wc;
            Li.prototype = l(wc.prototype, {
                onKey: function (a, b) {
                    switch (a) {
                        case 32:
                        case 107:
                            this.speed.y = b ? 20 : 0;
                            this.grounded = !1;
                            break;
                        case 37:
                        case 65:
                            this.speed.x = b ? -20 : -20 == this.speed.x ? 0 : this.speed.x;
                            break;
                        case 38:
                        case 87:
                            this.speed.z = b ? 20 : 0;
                            break;
                        case 39:
                        case 68:
                            this.speed.x = b ? 20 : 20 == this.speed.x ? 0 : this.speed.x;
                            break;
                        case 40:
                        case 83:
                            this.speed.z = b ? -20 : 0;
                            break;
                        case 69:
                            this.aSpeed = b ? -45 : -45 == this.aSpeed ? 0 : this.aSpeed;
                            break;
                        case 81:
                            this.aSpeed = b ? 45 : 45 == this.aSpeed ? 0 : this.aSpeed;
                            break;
                        case 109:
                            this.speed.y = b ? -20 : 0;
                            break;
                        default:
                            return !1
                    }
                    return !0
                },
                onMouse: function (a, b) {
                    var c = this.camera;
                    c.set_rotationY(c.get_rotationY() + a);
                    this.camera.set_rotationX(hc.gate(this.camera.get_rotationX() + b, -90, 90))
                },
                onWheel: function (a) {
                    0 < this.speed.get_length() &&
                    (this.acc = hc.gate(this.acc * Math.pow(1.2, a), .2, 5))
                },
                update: function (a) {
                    this.camera.translateLocal(new Q(0, 0, 1), this.acc * this.speed.z * a);
                    this.camera.translateLocal(new Q(1, 0, 0), this.acc * this.speed.x * a);
                    var b = this.camera;
                    b.set_rotationY(b.get_rotationY() - this.aSpeed * a);
                    b = this.camera;
                    b.set_y(b.get_y() + a * this.acc * this.speed.y);
                    a = this.getLevel(this.camera.get_x(), this.camera.get_z());
                    if (this.camera.get_y() < a + 2 || this.grounded) this.camera.set_y(a + 2), this.grounded = !0
                },
                __class__: Li
            });
            var Ki = function (a, b) {
                this.ZERO =
                    new Q;
                this.keyShift = !1;
                this.speed = new ba;
                this.rotation = this.tilt = this.sx = this.sy = 0;
                this.distance = Ka.radius / 2;
                wc.call(this, a, b)
            };
            g["toytown2.scenes.navmodes.NavModeOrtho"] = Ki;
            Ki.__name__ = "toytown2.scenes.navmodes.NavModeOrtho";
            Ki.__super__ = wc;
            Ki.prototype = l(wc.prototype, {
                activate: function () {
                    this.rotation = (-this.camera.get_rotationY() - 90) / 180 * Math.PI;
                    this.tilt = this.camera.get_rotationX() / 180 * Math.PI;
                    this.sy = this.sx = 0
                },
                onKey: function (a, b) {
                    switch (a) {
                        case 16:
                            this.keyShift = b;
                            break;
                        case 37:
                        case 65:
                            this.speed.x = b ? -.785 : 0;
                            break;
                        case 39:
                        case 68:
                            this.speed.x = b ? .785 : 0;
                            break;
                        case 40:
                        case 83:
                            this.speed.y = b ? .785 : 0;
                            break;
                        case 38:
                        case 87:
                            this.speed.y = b ? -.785 : 0;
                            break;
                        default:
                            return !1
                    }
                    return !0
                },
                onMouse: function (a, b) {
                    this.keyShift ? (this.sy += b, this.sx -= a) : (this.rotation -= a * Math.PI, this.tilt += b * Math.PI)
                },
                onWheel: function (a) {
                    var b = this.camera.get_lens(),
                        c = b.get_projectionHeight();
                    c = hc.gate(c * Math.pow(1.1, -a), 2, Ka.radius / 2);
                    b.set_projectionHeight(c)
                },
                update: function (a) {
                    this.rotation += this.speed.x *
                        a;
                    this.tilt -= this.speed.y * a;
                    this.tilt = hc.gate(this.tilt, 0, Math.PI / 2);
                    a = Math.cos(this.tilt) * this.distance;
                    var b = Math.sin(this.tilt) * this.distance,
                        c = Math.sin(this.rotation) * a;
                    this.camera.set_x(Math.cos(this.rotation) * a);
                    this.camera.set_y(b);
                    this.camera.set_z(c);
                    this.camera.lookAt(this.ZERO);
                    if (0 != this.sx || 0 != this.sy) a = this.camera.get_lens(), this.camera.translateLocal(new Q(0, 1, 0), this.sy * a.get_projectionHeight()), this.camera.translateLocal(new Q(1, 0, 0), this.sx * a.get_projectionHeight())
                },
                __class__: Ki
            });
            var Ji = function (a, b) {
                this.speed = new Q(22.5, 0, 0);
                wc.call(this, a, b)
            };
            g["toytown2.scenes.navmodes.NavModeRotate"] = Ji;
            Ji.__name__ = "toytown2.scenes.navmodes.NavModeRotate";
            Ji.__super__ = wc;
            Ji.prototype = l(wc.prototype, {
                onKey: function (a, b) {
                    switch (a) {
                        case 37:
                            this.speed.x = -22.5;
                            break;
                        case 39:
                            this.speed.x = 22.5;
                            break;
                        case 107:
                            this.speed.y = b ? 20 : 0;
                            break;
                        case 109:
                            this.speed.y = b ? -20 : 0;
                            break;
                        default:
                            return !1
                    }
                    return !0
                },
                onMouse: function (a, b) {
                    var c = this.camera;
                    c.set_rotationY(c.get_rotationY() +
                        a);
                    this.camera.set_rotationX(hc.gate(this.camera.get_rotationX() + b, -90, 90))
                },
                onWheel: function (a) {
                    var b = this.camera.get_position().clone();
                    b.scaleBy(Math.pow(1.2, -a));
                    b.get_length() > Ka.radius && b.scaleBy(Ka.radius / b.get_length());
                    this.camera.set_position(b)
                },
                update: function (a) {
                    var b = this.speed.x * a,
                        c = this.camera.get_x(),
                        d = this.camera.get_z(),
                        e = Math.sqrt(c * c + d * d);
                    c = Math.atan2(d, c) + b / 180 * Math.PI;
                    this.camera.set_x(e * Math.cos(c));
                    this.camera.set_z(e * Math.sin(c));
                    e = this.camera;
                    e.set_rotationY(e.get_rotationY() -
                        b);
                    e = this.camera;
                    e.set_y(e.get_y() + a * this.speed.y);
                    a = this.getLevel(this.camera.get_x(), this.camera.get_z());
                    this.camera.get_y() < a + 2 && this.camera.set_y(a + 2)
                },
                __class__: Ji
            });
            var Mi = function (a, b) {
                this.speed = new ba;
                this.aSpeed = 0;
                this.ySpeed = 1;
                wc.call(this, a, b)
            };
            g["toytown2.scenes.navmodes.NavModeStare"] = Mi;
            Mi.__name__ = "toytown2.scenes.navmodes.NavModeStare";
            Mi.__super__ = wc;
            Mi.prototype = l(wc.prototype, {
                onKey: function (a, b) {
                    switch (a) {
                        case 37:
                        case 65:
                            this.speed.x = b ? -50 : 0;
                            break;
                        case 39:
                        case 68:
                            this.speed.x =
                                b ? 50 : 0;
                            break;
                        case 69:
                            this.aSpeed = b ? -22.5 : -22.5 == this.aSpeed ? 0 : this.aSpeed;
                            break;
                        case 81:
                            this.aSpeed = b ? 22.5 : 22.5 == this.aSpeed ? 0 : this.aSpeed;
                            break;
                        case 40:
                        case 83:
                            this.speed.y = b ? 50 : 0;
                            break;
                        case 38:
                        case 87:
                            this.speed.y = b ? -50 : 0;
                            break;
                        case 107:
                            this.ySpeed = b ? .8333333333333334 : 1;
                            break;
                        case 109:
                            this.ySpeed = b ? 1.2 : 1;
                            break;
                        default:
                            return !1
                    }
                    return !0
                },
                onMouse: function (a, b) {
                    var c = T.__cast(this.camera.get_lens(), ed).get_fieldOfView(),
                        d = this.camera;
                    d.set_x(d.get_x() - a * this.camera.get_y() / c);
                    d = this.camera;
                    d.set_z(d.get_z() +
                        b * this.camera.get_y() / c)
                },
                onWheel: function (a) {
                    this.camera.set_y(hc.gate(this.camera.get_y() * Math.pow(1.2, -a), 2, Ka.radius))
                },
                update: function (a) {
                    var b = this.camera;
                    b.set_rotationY(b.get_rotationY() - this.aSpeed * a);
                    this.camera.set_y(Math.max(this.camera.get_y() * Math.pow(this.ySpeed, a), 2));
                    if (0 < this.speed.get_length()) {
                        var c = T.__cast(this.camera.get_lens(), ed).get_fieldOfView();
                        b = this.camera;
                        b.set_x(b.get_x() + a * this.speed.x * this.camera.get_y() / c);
                        b = this.camera;
                        b.set_z(b.get_z() - a * this.speed.y * this.camera.get_y() /
                            c)
                    }
                },
                __class__: Mi
            });
            var Oi = function () {
            };
            g["toytown2.utils3d.Elevation"] = Oi;
            Oi.__name__ = "toytown2.utils3d.Elevation";
            Oi.__isInterface__ = !0;
            Oi.prototype = {
                __class__: Oi
            };
            var Fi = function () {
                Ca.call(this);
                this.iCount = this.dCount = 0;
                this.fa = new Xc
            };
            g["toytown2.utils3d.FaceCollector"] = Fi;
            Fi.__name__ = "toytown2.utils3d.FaceCollector";
            Fi.__super__ = Ca;
            Fi.prototype = l(Ca.prototype, {
                manage: function () {
                    if (65535 < this.fa.data.get_length() / 13) {
                        var a = this.fa.subGeometryTill(this.iCount,
                            this.dCount);
                        this.addSubGeometry(a)
                    }
                    this.iCount = this.fa.indices.get_length();
                    this.dCount = this.fa.data.get_length()
                },
                flush: function () {
                    var a = this.fa.subGeometry();
                    this.addSubGeometry(a);
                    this.fa = null
                },
                __class__: Fi
            });
            var wk = function (a) {
                this.speed = 1;
                this.yPos = 2;
                this.getRoute = a;
                a = a(null, null);
                this.road = a.road;
                this.path2D = a.path;
                this.updatePath()
            };
            g["toytown2.utils3d.PathRunner"] = wk;
            wk.__name__ = "toytown2.utils3d.PathRunner";
            wk.prototype = {
                run: function (a) {
                    this.obj = a;
                    this.progress = this.segment =
                        0;
                    a.set_position(this.point2vec(this.path2D[this.segment], this.yPos));
                    a.lookAt(this.point2vec(this.path2D[this.segment + 1], this.yPos))
                },
                update: function (a) {
                    for (this.progress += this.speed * a; this.progress > this.segments[this.segment];)
                        if (this.progress -= this.segments[this.segment], this.segment++, this.segment == this.segments.length - 1) {
                            a = this.path2D[this.segment + 1];
                            var b = this.getRoute(a, this.road);
                            null != b && (this.road = b.road, b = b.path, b.shift(), b.unshift(a), b.unshift(this.path2D[this.segment]), this.path2D = b,
                                this.segment = 0, this.updatePath())
                        } else this.segment == this.segments.length && (a = this.getRoute(null, null), this.road = a.road, this.path2D = a.path, this.segment = 0, this.updatePath());
                    a = this.progress / this.segments[this.segment];
                    b = this.path2D[this.segment + 1];
                    this.obj.set_position(this.point2vec(vc.lerp(this.path2D[this.segment], b, a), this.yPos));
                    this.segment < this.segments.length - 1 ? this.obj.lookAt(this.point2vec(vc.lerp(b, this.path2D[this.segment + 2], a), 2)) : this.obj.lookAt(this.point2vec(b, 2))
                },
                updatePath: function () {
                    for (var a = [], b = 1, c = this.path2D.length; b < c;) {
                        var d = b++;
                        a.push(ba.distance(this.path2D[d - 1], this.path2D[d]))
                    }
                    this.segments = a
                },
                point2vec: function (a, b) {
                    return new Q(a.x, b, a.y)
                },
                __class__: wk
            };
            var Ci = function (a, b, c, d) {
                this.noise = new re(a);
                this.w = b;
                this.d = c;
                this.h = d
            };
            g["toytown2.utils3d.PerlinNoiseElevation"] = Ci;
            Ci.__name__ = "toytown2.utils3d.PerlinNoiseElevation";
            Ci.__interfaces__ = [Oi];
            Ci.prototype = {
                getLevel: function (a, b) {
                    return this.noise.noiseHigh(a / this.w + .5, b / this.d + .5, 4, 4) * this.h
                },
                __class__: Ci
            };
            var Di = function (a, b, c, d, e, f) {
                Ca.call(this);
                this.elevation = a;
                this.w = b;
                this.d = c;
                this.h = d;
                a = new Xc;
                for (var h = [], r = 0, m = f + 1; r < m;) {
                    var g = r++;
                    g = (g / f - .5) * c;
                    for (var q = [], k = 0, n = e + 1; k < n;) {
                        var l = k++;
                        l = (l / e - .5) * b;
                        var p = this.getLevel(l, g);
                        q.push(new Q(l, p, g))
                    }
                    h.push(q)
                }
                b = h;
                h = [];
                r = 0;
                for (m = f + 1; r < m;) {
                    g = r++;
                    q = [];
                    k = 0;
                    for (n = e + 1; k < n;) l = k++, c = b[g][l], g < f && l < e ? (p = b[g][l], l = b[g + 1][l].subtract(p).crossProduct(b[g + 1][l + 1].subtract(p))) : l = new Q(0, 1, 0), q.push(a.addVertex(c.x, c.y, c.z, l.x, l.y, l.z, .25, .5 + c.y / d));
                    h.push(q)
                }
                d = h;
                h = 0;
                for (r = f; h < r;)
                    for (g = h++, m = 0, q = e; m < q;) l = m++, a.addTri(d[g][l], d[g + 1][l], d[g + 1][l + 1]), a.addTri(d[g][l], d[g + 1][l + 1], d[g][l + 1]);
                this.addSubGeometry(a.subGeometry())
            };
            g["toytown2.utils3d.Terrain"] = Di;
            Di.__name__ = "toytown2.utils3d.Terrain";
            Di.__super__ = Ca;
            Di.prototype = l(Ca.prototype, {
                getLevel: function (a, b) {
                    return this.elevation.getLevel(a, b)
                },
                __class__: Di
            });
            var yb = function () {
            };
            g["utils.ArrayExtender"] = yb;
            yb.__name__ = "utils.ArrayExtender";
            yb.revert = function (a) {
                a =
                    a.slice();
                a.reverse();
                return a
            };
            yb.random = function (a) {
                return a[(x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 * a.length | 0]
            };
            yb.weighted = function (a, b) {
                for (var c = (x.seed = 48271 * x.seed % 2147483647 | 0) / 2147483647 * yb.sum(b), d = 0, e = 0, f = a.length; e < f;) {
                    var h = e++;
                    if (c <= (d += b[h])) return a[h]
                }
                return a[0]
            };
            yb.max = function (a, b) {
                for (var c = a[0], d = b(c), e = 1, f = a.length; e < f;) {
                    var h = e++;
                    h = a[h];
                    var r = b(h);
                    r > d && (c = h, d = r)
                }
                return c
            };
            yb.sum = function (a) {
                for (var b = 0, c = 0; c < a.length;) {
                    var d = a[c];
                    ++c;
                    b += d
                }
                return b
            };
            yb.add = function (a,
                               b) {
                return -1 == a.indexOf(b) ? (a.push(b), !0) : !1
            };
            yb.intersect = function (a, b) {
                for (var c = [], d = 0; d < a.length;) {
                    var e = a[d];
                    ++d;
                    -
                        1 != b.indexOf(e) && c.push(e)
                }
                return c
            };
            yb.addAll = HaxeShared.addAll;
            yb.difference = function (a, b) {
                for (var c = [], d = 0; d < a.length;) {
                    var e = a[d];
                    ++d;
                    -
                        1 == b.indexOf(e) && c.push(e)
                }
                return c
            };
            var Qf = function () {
            };
            g["utils.ColorNames"] = Qf;
            Qf.__name__ = "utils.ColorNames";
            Qf.get = function (a) {
                for (var b = a >>> 16, c = a >>>
                    8 & 255, d = a & 255, e = "", f = 1E10, h = Qf.values.h, r = Object.keys(h), m = r.length, g = 0; g < m;) {
                    var q = r[g++],
                        k = q;
                    a = h[q];
                    q = a >> 16;
                    var n = a >> 8 & 255;
                    a &= 255;
                    q = (b - q) * (b - q) + (c - n) * (c - n) + (d - a) * (d - a);
                    f > J.toFloat(q) && (f = J.toFloat(q), e = k)
                }
                return e
            };
            var hc = function () {
            };
            g["utils.MathUtils"] = hc;
            hc.__name__ = "utils.MathUtils";
            hc.gate = function (a, b, c) {
                return a < b ? b : a < c ? a : c
            };
            hc.gatei = function (a, b, c) {
                return a < b ? b : a < c ? a : c
            };
            var Cb = v["utils.ParamType"] = {
                __ename__: "utils.ParamType",
                __constructs__: null,
                COLOR: {
                    _hx_name: "COLOR",
                    _hx_index: 0,
                    __enum__: "utils.ParamType",
                    toString: q
                },
                MULTI: {
                    _hx_name: "MULTI",
                    _hx_index: 1,
                    __enum__: "utils.ParamType",
                    toString: q
                },
                FONT: {
                    _hx_name: "FONT",
                    _hx_index: 2,
                    __enum__: "utils.ParamType",
                    toString: q
                },
                FLOAT: {
                    _hx_name: "FLOAT",
                    _hx_index: 3,
                    __enum__: "utils.ParamType",
                    toString: q
                },
                INT: {
                    _hx_name: "INT",
                    _hx_index: 4,
                    __enum__: "utils.ParamType",
                    toString: q
                },
                STRING: {
                    _hx_name: "STRING",
                    _hx_index: 5,
                    __enum__: "utils.ParamType",
                    toString: q
                },
                BOOL: {
                    _hx_name: "BOOL",
                    _hx_index: 6,
                    __enum__: "utils.ParamType",
                    toString: q
                }
            };
            Cb.__constructs__ = [Cb.COLOR, Cb.MULTI, Cb.FONT, Cb.FLOAT, Cb.INT, Cb.STRING, Cb.BOOL];
            var Lb = function () {
                this.params = []
            };
            g["utils.Palette"] = Lb;
            Lb.__name__ = "utils.Palette";
            Lb.float2str = function (a) {
                a = null == a ? "null" : "" + a;
                -
                    1 == a.indexOf(".") && (a += ".0");
                return a
            };
            Lb.font2format = function (a) {
                if (null == a) return null;
                var b = null != a.face ? a.face : null != a.embedded && mc.exists(a.embedded) ? mc.getFont(a.embedded).name :
                    "_serif";
                return new Ne(b, a.size, 0, a.bold, a.italic)
            };
            Lb.fromData = function (a) {
                for (var b = new Lb, c = M.fields(a), d = 0; d < c.length;) {
                    var e = c[d++],
                        f = e;
                    e = a[e];
                    if ("number" == typeof e && (e | 0) === e) b.setInt(f, e);
                    else if ("number" == typeof e) b.setFloat(f, e);
                    else if ("boolean" == typeof e) b.setBool(f, e);
                    else if ("string" == typeof e) {
                        if (7 == e.length && "#" == e.charAt(0)) {
                            var h = n.parseInt("0x" + ja.substr(e, 1, null));
                            if (null != h) {
                                b.setColor(f, h);
                                continue
                            }
                        }
                        h = parseFloat(e);
                        if (isNaN(h)) switch (e) {
                            case "false":
                                b.setBool(f, !1);
                                break;
                            case "true":
                                b.setBool(f,
                                    !0);
                                break;
                            default:
                                b.setString(f, e)
                        } else -1 == e.indexOf(".") ? b.setInt(f, h | 0) : b.setFloat(f, h)
                    } else if (e instanceof Array) {
                        h = [];
                        for (var r = 0; r < e.length;) {
                            var m = e[r];
                            ++r;
                            m = n.parseInt("0x" + ja.substr(m, 1, null));
                            null != m && h.push(m)
                        }
                        b.setMulti(f, h)
                    } else null != e && b.setFont(f, e)
                }
                return b
            };
            Lb.fromJSON = function (a) {
                a = JSON.parse(a);
                return Lb.fromData(a)
            };
            Lb.fromAsset = function (a) {
                return Lb.fromJSON(mc.getText(a))
            };
            Lb.prototype = {
                getColor: function (a, b) {
                    null == b && (b = 0);
                    for (var c = 0, d = this.params; c < d.length;) {
                        var e = d[c];
                        ++c;
                        if (e.id == a) {
                            if (e.type == Cb.COLOR) return e.color;
                            if (e.type == Cb.MULTI) return e.multi[0];
                            break
                        }
                    }
                    return b
                },
                getMulti: function (a, b) {
                    null == b && (b = 0);
                    for (var c = 0, d = this.params; c < d.length;) {
                        var e = d[c];
                        ++c;
                        if (e.id == a) {
                            if (e.type == Cb.MULTI) return e.multi;
                            if (e.type == Cb.COLOR) return [e.color];
                            break
                        }
                    }
                    return [b]
                },
                getFont: function (a, b) {
                    for (var c = 0, d = this.params; c < d.length;) {
                        var e = d[c];
                        ++c;
                        if (e.id == a && e.type == Cb.FONT) return e.font
                    }
                    return b
                },
                getFloat: function (a, b) {
                    null == b && (b = 0);
                    for (var c = 0, d = this.params; c < d.length;) {
                        var e =
                            d[c];
                        ++c;
                        if (e.id == a && e.type == Cb.FLOAT) return e.float
                    }
                    return b
                },
                getInt: function (a, b) {
                    null == b && (b = 0);
                    for (var c = 0, d = this.params; c < d.length;) {
                        var e = d[c];
                        ++c;
                        if (e.id == a && e.type == Cb.INT) return e.int
                    }
                    return b
                },
                getString: function (a, b) {
                    for (var c = 0, d = this.params; c < d.length;) {
                        var e = d[c];
                        ++c;
                        if (e.id == a && e.type == Cb.STRING) return e.string
                    }
                    return b
                },
                getBool: function (a, b) {
                    null == b && (b = !1);
                    for (var c = 0, d = this.params; c < d.length;) {
                        var e = d[c];
                        ++c;
                        if (e.id == a && e.type == Cb.BOOL) return e.bool
                    }
                    return b
                },
                setColor: function (a,
                                    b) {
                    this.params.push({
                        id: a,
                        type: Cb.COLOR,
                        color: b
                    })
                },
                setMulti: function (a, b) {
                    this.params.push({
                        id: a,
                        type: Cb.MULTI,
                        multi: b
                    })
                },
                setFont: function (a, b) {
                    this.params.push({
                        id: a,
                        type: Cb.FONT,
                        font: b
                    })
                },
                setFloat: function (a, b) {
                    this.params.push({
                        id: a,
                        type: Cb.FLOAT,
                        float: b
                    })
                },
                setInt: function (a, b) {
                    this.params.push({
                        id: a,
                        type: Cb.INT,
                        int: b
                    })
                },
                setString: function (a, b) {
                    this.params.push({
                        id: a,
                        type: Cb.STRING,
                        string: b
                    })
                },
                setBool: function (a, b) {
                    this.params.push({
                        id: a,
                        type: Cb.BOOL,
                        bool: b
                    })
                },
                data: function () {
                    for (var a = {}, b = 0,
                             c = this.params; b < c.length;) {
                        var d = c[b];
                        ++b;
                        switch (d.type._hx_index) {
                            case 0:
                                a[d.id] = "#" + R.hex(d.color, 6);
                                break;
                            case 1:
                                var e = d.id,
                                    f = [],
                                    h = 0;
                                for (d = d.multi; h < d.length;) {
                                    var r = d[h];
                                    ++h;
                                    f.push("#" + R.hex(r, 6))
                                }
                                a[e] = f;
                                break;
                            case 2:
                                a[d.id] = d.font;
                                break;
                            case 3:
                                a[d.id] = Lb.float2str(d.float);
                                break;
                            case 4:
                                a[d.id] = null == d.int ? "null" : "" + d.int;
                                break;
                            case 5:
                                a[d.id] = d.string;
                                break;
                            case 6:
                                a[d.id] = null == d.bool ? "null" : "" + d.bool
                        }
                    }
                    return a
                },
                json: function () {
                    return JSON.stringify(this.data(), null, "  ")
                },
                __class__: Lb
            };
            var re =
                function (a) {
                    for (var b = [], c = 0; 256 > c;) {
                        var d = c++;
                        b.push(re.permutation[(d + a) % 256])
                    }
                    this.p = b;
                    this.p = this.p.concat(this.p);
                    if (null == re.ease) {
                        b = [];
                        for (c = 0; 4096 > c;) d = c++, a = d / 4096, b.push(a * a * a * (a * (6 * a - 15) + 10));
                        re.ease = b
                    }
                };
            g["utils.PerlinNoise"] = re;
            re.__name__ = "utils.PerlinNoise";
            re.prototype = {
                noise: function (a, b, c) {
                    null == c && (c = 1);
                    a *= c;
                    b *= c;
                    var d = Math.floor(a),
                        e = d + 1;
                    c = a - d;
                    var f = re.ease[4096 * c | 0];
                    a = Math.floor(b);
                    var h = a + 1,
                        r = b - a,
                        m = re.ease[4096 * r | 0];
                    b = this.p[this.p[e] + a];
                    var g = this.p[this.p[d] +
                    h];
                    e = this.p[this.p[e] + h];
                    switch (this.p[this.p[d] + a] & 3) {
                        case 0:
                            d = c + r;
                            break;
                        case 1:
                            d = c - r;
                            break;
                        case 2:
                            d = -c + r;
                            break;
                        case 3:
                            d = -c - r;
                            break;
                        default:
                            d = 0
                    }
                    a = c - 1;
                    switch (b & 3) {
                        case 0:
                            b = a + r;
                            break;
                        case 1:
                            b = a - r;
                            break;
                        case 2:
                            b = -a + r;
                            break;
                        case 3:
                            b = -a - r;
                            break;
                        default:
                            b = 0
                    }
                    h = d + (b - d) * f;
                    b = r - 1;
                    switch (g & 3) {
                        case 0:
                            d = c + b;
                            break;
                        case 1:
                            d = c - b;
                            break;
                        case 2:
                            d = -c + b;
                            break;
                        case 3:
                            d = -c - b;
                            break;
                        default:
                            d = 0
                    }
                    a = c - 1;
                    b = r - 1;
                    switch (e & 3) {
                        case 0:
                            b = a + b;
                            break;
                        case 1:
                            b = a - b;
                            break;
                        case 2:
                            b = -a + b;
                            break;
                        case 3:
                            b = -a - b;
                            break;
                        default:
                            b = 0
                    }
                    return h + (d + (b -
                        d) * f - h) * m
                },
                noiseHigh: function (a, b, c, d, e) {
                    null == e && (e = .5);
                    null == d && (d = 1);
                    for (var f = this.noise(a, b, d), h = e, r = 1; r < c;) r++, f += this.noise(a, b, d *= 2) * h, h *= e;
                    return f
                },
                __class__: re
            };
            var x = function () {
            };
            g["utils.Random"] = x;
            x.__name__ = "utils.Random";
            x.reset = function (a) {
                null == a && (a = -1);
                x.seed = -1 != a ? a : (new Date).getTime() % 2147483647 | 0
            };
            var Gd = function (a) {
                null == a && (a = []);
                this.valueClasses = a;
                this.slots = Rc.NIL;
                this.priorityBased = !1
            };
            g["msignal.Signal"] = Gd;
            Gd.__name__ = "msignal.Signal";
            Gd.prototype = {
                add: function (a) {
                    return this.registerListener(a)
                },
                addOnce: function (a) {
                    return this.registerListener(a, !0)
                },
                addWithPriority: function (a, b) {
                    null == b && (b = 0);
                    return this.registerListener(a, !1, b)
                },
                addOnceWithPriority: function (a, b) {
                    null == b && (b = 0);
                    return this.registerListener(a, !0, b)
                },
                remove: function (a) {
                    var b = this.slots.find(a);
                    if (null == b) return null;
                    this.slots = this.slots.filterNot(a);
                    return b
                },
                removeAll: function () {
                    this.slots = Rc.NIL
                },
                registerListener: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    return this.registrationPossible(a,
                        b) ? (a = this.createSlot(a, b, c), this.priorityBased || 0 == c || (this.priorityBased = !0), this.slots = this.priorityBased || 0 != c ? this.slots.insertWithPriority(a) : this.slots.prepend(a), a) : this.slots.find(a)
                },
                registrationPossible: function (a, b) {
                    return this.slots.nonEmpty && null != this.slots.find(a) ? !1 : !0
                },
                createSlot: function (a, b, c) {
                    return null
                },
                get_numListeners: function () {
                    return this.slots.get_length()
                },
                __class__: Gd,
                __properties__: {
                    get_numListeners: "get_numListeners"
                }
            };
            var ac = function (a) {
                Gd.call(this, [a])
            };
            g["msignal.Signal1"] =
                ac;
            ac.__name__ = "msignal.Signal1";
            ac.__super__ = Gd;
            ac.prototype = l(Gd.prototype, {
                dispatch: function (a) {
                    for (var b = this.slots; b.nonEmpty;) b.head.execute(a), b = b.tail
                },
                createSlot: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    return new Pi(this, a, b, c)
                },
                __class__: ac
            });
            var Rc = function (a, b) {
                this.nonEmpty = !1;
                null == a && null == b ? this.nonEmpty = !1 : null != a && (this.head = a, this.tail = null == b ? Rc.NIL : b, this.nonEmpty = !0)
            };
            g["msignal.SlotList"] = Rc;
            Rc.__name__ = "msignal.SlotList";
            Rc.prototype = {
                get_length: function () {
                    if (!this.nonEmpty) return 0;
                    if (this.tail == Rc.NIL) return 1;
                    for (var a = 0, b = this; b.nonEmpty;) ++a, b = b.tail;
                    return a
                },
                prepend: function (a) {
                    return new Rc(a, this)
                },
                insertWithPriority: function (a) {
                    if (!this.nonEmpty) return new Rc(a);
                    var b = a.priority;
                    if (b >= this.head.priority) return this.prepend(a);
                    for (var c = new Rc(this.head), d = c, e = this.tail; e.nonEmpty;) {
                        if (b > e.head.priority) return d.tail = e.prepend(a), c;
                        d = d.tail = new Rc(e.head);
                        e = e.tail
                    }
                    d.tail = new Rc(a);
                    return c
                },
                filterNot: function (a) {
                    if (!this.nonEmpty || null == a) return this;
                    if (this.head.listener ==
                        a) return this.tail;
                    for (var b = new Rc(this.head), c = b, d = this.tail; d.nonEmpty;) {
                        if (d.head.listener == a) return c.tail = d.tail, b;
                        c = c.tail = new Rc(d.head);
                        d = d.tail
                    }
                    return this
                },
                find: function (a) {
                    if (!this.nonEmpty) return null;
                    for (var b = this; b.nonEmpty;) {
                        if (b.head.listener == a) return b.head;
                        b = b.tail
                    }
                    return null
                },
                __class__: Rc,
                __properties__: {
                    get_length: "get_length"
                }
            };
            var eb = function () {
            };
            g["utils.Updater"] = eb;
            eb.__name__ = "utils.Updater";
            eb.__properties__ = {
                get_tick: "get_tick"
            };
            eb.get_tick =
                function () {
                    null == eb.source && eb.useTimer(60);
                    return eb._tick
                };
            eb.fire = function () {
                var a = Na.getTimer();
                0 == eb.lastTime ? eb._tick.dispatch(0) : eb._tick.dispatch((a - eb.lastTime) / 1E3 * eb.timeScale);
                eb.lastTime = a
            };
            eb.useTimer = function (a) {
                null != eb.source && eb.source.stop();
                eb.source = new Qi(a)
            };
            eb.useEnterFrame = function (a) {
                null != eb.source && eb.source.stop();
                eb.source = new Ri(a)
            };
            eb.stop = function () {
                null != eb.source && (eb.source.stop(), eb.source = null)
            };
            var Rf = function () {
            };
            g["utils.RecurringEventDispatcher"] =
                Rf;
            Rf.__name__ = "utils.RecurringEventDispatcher";
            Rf.prototype = {
                stop: function () {
                },
                __class__: Rf
            };
            var Qi = function (a) {
                this.timer = new Si(a);
                this.timer.addEventListener("timer", p(this, this.onTimer));
                this.timer.start()
            };
            g["utils._Updater.TimerEventDispatcher"] = Qi;
            Qi.__name__ = "utils._Updater.TimerEventDispatcher";
            Qi.__super__ = Rf;
            Qi.prototype = l(Rf.prototype, {
                onTimer: function (a) {
                    eb.fire();
                    a.updateAfterEvent()
                },
                stop: function () {
                    this.timer.stop()
                },
                __class__: Qi
            });
            var Ri = function (a) {
                this.dispObj =
                    a;
                a.addEventListener("enterFrame", p(this, this.onEnterFrame))
            };
            g["utils._Updater.FrameEventDispatcher"] = Ri;
            Ri.__name__ = "utils._Updater.FrameEventDispatcher";
            Ri.__super__ = Rf;
            Ri.prototype = l(Rf.prototype, {
                onEnterFrame: function (a) {
                    eb.fire()
                },
                stop: function () {
                    this.dispObj.removeEventListener("enterFrame", p(this, this.onEnterFrame))
                },
                __class__: Ri
            });
            var ul = function () {
            };
            g["utils3d.Rotation"] = ul;
            ul.__name__ = "utils3d.Rotation";
            ul.smooth = function (a, b, c, d, e) {
                null ==
                a && (a = new Xc);
                var f = 0,
                    h = 0,
                    r = 0;
                null != d && (f = d.x, h = d.y, r = d.z);
                if (null == c) {
                    c = new ba;
                    d = [];
                    for (var m = 0, g = b.length; m < g;) m++, d.push(c);
                    c = d
                }
                d = [];
                m = 0;
                for (g = e; m < g;) {
                    var q = m++;
                    d.push(ba.polar(1, 2 * Math.PI * q / e))
                }
                var k = d,
                    n = [];
                d = 0;
                for (m = b.length; d < m;) {
                    q = d++;
                    var l = b[q];
                    g = 0;
                    for (var p = e; g < p;) q = g++, q = k[q], n.push(new Q(f + l.x * q.x, h + l.y, r + l.x * q.y))
                }
                d = 1;
                for (m = b.length; d < m;) {
                    q = d++;
                    f = n.slice((q - 1) * e, (q + 1) * e);
                    g = [];
                    p = 0;
                    for (h = e; p < h;) p++, g.push(c[q - 1]);
                    h = 0;
                    for (r = e; h < r;) h++, g.push(c[q]);
                    l = b[q - 1].subtract(b[q]);
                    h = new ba(-l.y, l.x);
                    h.normalize(1);
                    r = [];
                    for (p = 0; p < k.length;) q = k[p], ++p, r.push(new Q(h.x * q.x, h.y, h.x * q.y));
                    q = r;
                    q = q.concat(q);
                    h = [];
                    r = 0;
                    for (p = e; r < p;) {
                        l = r++;
                        var y = (l + 1) % e;
                        h.push([l, y, e + y]);
                        h.push([l, e + y, e + l])
                    }
                    a.addTriangulation(f, q, g, h)
                }
                return a
            };
            var Hd = v["haxe.StackItem"] = {
                __ename__: "haxe.StackItem",
                __constructs__: null,
                CFunction: {
                    _hx_name: "CFunction",
                    _hx_index: 0,
                    __enum__: "haxe.StackItem",
                    toString: q
                },
                Module: (E = function (a) {
                    return {
                        _hx_index: 1,
                        m: a,
                        __enum__: "haxe.StackItem",
                        toString: q
                    }
                }, E._hx_name = "Module", E.__params__ = ["m"],
                    E),
                FilePos: (E = function (a, b, c, d) {
                    return {
                        _hx_index: 2,
                        s: a,
                        file: b,
                        line: c,
                        column: d,
                        __enum__: "haxe.StackItem",
                        toString: q
                    }
                }, E._hx_name = "FilePos", E.__params__ = ["s", "file", "line", "column"], E),
                Method: (E = function (a, b) {
                    return {
                        _hx_index: 3,
                        classname: a,
                        method: b,
                        __enum__: "haxe.StackItem",
                        toString: q
                    }
                }, E._hx_name = "Method", E.__params__ = ["classname", "method"], E),
                LocalFunction: (E = function (a) {
                    return {
                        _hx_index: 4,
                        v: a,
                        __enum__: "haxe.StackItem",
                        toString: q
                    }
                }, E._hx_name = "LocalFunction", E.__params__ = ["v"], E)
            };
            Hd.__constructs__ = [Hd.CFunction, Hd.Module, Hd.FilePos, Hd.Method, Hd.LocalFunction];
            var Pe = {
                    callStack: function () {
                        return Ia.toHaxe(Ia.callStack())
                    },
                    exceptionStack: function (a) {
                        null == a && (a = !1);
                        var b = Ia.toHaxe(Ia.exceptionStack());
                        return a ? b : Pe.subtract(b, Pe.callStack())
                    },
                    toString: function (a) {
                        for (var b = new ab, c = 0; c < a.length;) {
                            var d = a[c];
                            ++c;
                            b.b += "\nCalled from ";
                            Pe.itemToString(b, d)
                        }
                        return b.b
                    },
                    subtract: function (a, b) {
                        for (var c = -1, d = -1; ++d < a.length;) {
                            for (var e = 0, f = b.length; e < f;) {
                                var h = e++;
                                if (Pe.equalItems(a[d], b[h])) {
                                    if (0 >
                                    c && (c = d), ++d, d >= a.length) break
                                } else c = -1
                            }
                            if (0 <= c) break
                        }
                        return 0 <= c ? a.slice(0, c) : a
                    },
                    equalItems: function (a, b) {
                        if (null == a) return null == b ? !0 : !1;
                        switch (a._hx_index) {
                            case 0:
                                return null == b ? !1 : 0 == b._hx_index ? !0 : !1;
                            case 1:
                                return null == b ? !1 : 1 == b._hx_index ? a.m == b.m : !1;
                            case 2:
                                if (null == b) return !1;
                                if (2 == b._hx_index) {
                                    var c = b.s,
                                        d = b.line,
                                        e = b.column,
                                        f = a.column,
                                        h = a.line,
                                        r = a.s;
                                    return a.file == b.file && h == d && f == e ? Pe.equalItems(r, c) : !1
                                }
                                return !1;
                            case 3:
                                return null == b ? !1 : 3 == b._hx_index ? (c = b.method, d = a.method, a.classname ==
                                b.classname ? d == c : !1) : !1;
                            case 4:
                                return null == b ? !1 : 4 == b._hx_index ? a.v == b.v : !1
                        }
                    },
                    itemToString: function (a, b) {
                        switch (b._hx_index) {
                            case 0:
                                a.b += "a C function";
                                break;
                            case 1:
                                b = b.m;
                                a.b += "module ";
                                a.b += null == b ? "null" : "" + b;
                                break;
                            case 2:
                                var c = b.s,
                                    d = b.file,
                                    e = b.line;
                                b = b.column;
                                null != c && (Pe.itemToString(a, c), a.b += " (");
                                a.b += null == d ? "null" : "" + d;
                                a.b += " line ";
                                a.b += null == e ? "null" : "" + e;
                                null != b && (a.b += " column ", a.b += null == b ? "null" : "" + b);
                                null != c && (a.b += ")");
                                break;
                            case 3:
                                c = b.classname;
                                b = b.method;
                                a.b += n.string(null == c ?
                                    "<unknown>" : c);
                                a.b += ".";
                                a.b += null == b ? "null" : "" + b;
                                break;
                            case 4:
                                b = b.v, a.b += "local function #", a.b += null == b ? "null" : "" + b
                        }
                    }
                },
                Xa = function (a, b) {
                    this.high = a;
                    this.low = b
                };
            g["haxe._Int64.___Int64"] = Xa;
            Xa.__name__ = "haxe._Int64.___Int64";
            Xa.prototype = {
                __class__: Xa
            };
            var Ia = function () {
            };
            g["haxe.NativeStackTrace"] = Ia;
            Ia.__name__ = "haxe.NativeStackTrace";
            Ia.saveStack = function (a) {
                Ia.lastError = a
            };
            Ia.callStack = function () {
                var a = Error(""),
                    b = Ia.tryHaxeStack(a);
                if ("undefined" == typeof b) {
                    try {
                        throw a;
                    } catch (c) {
                    }
                    b = a.stack
                }
                return Ia.normalize(b,
                    2)
            };
            Ia.exceptionStack = function () {
                return Ia.normalize(Ia.tryHaxeStack(Ia.lastError))
            };
            Ia.toHaxe = function (a, b) {
                null == b && (b = 0);
                if (null == a) return [];
                if ("string" == typeof a) {
                    a = a.split("\n");
                    "Error" == a[0] && a.shift();
                    for (var c = [], d = 0, e = a.length; d < e;) {
                        var f = d++;
                        if (!(b > f)) {
                            var h = a[f];
                            f = h.match(/^    at ([$A-Za-z0-9_. ]+) \(([^)]+):([0-9]+):([0-9]+)\)$/);
                            if (null != f) {
                                h = f[1].split(".");
                                "$hxClasses" == h[0] && h.shift();
                                var r = h.pop(),
                                    m = f[2],
                                    g = n.parseInt(f[3]);
                                f = n.parseInt(f[4]);
                                c.push(Hd.FilePos("Anonymous function" ==
                                r ? Hd.LocalFunction() : "Global code" == r ? null : Hd.Method(h.join("."), r), m, g, f))
                            } else c.push(Hd.Module(R.trim(h)))
                        }
                    }
                    return c
                }
                return 0 < b && Array.isArray(a) ? a.slice(b) : a
            };
            Ia.tryHaxeStack = function (a) {
                if (null == a) return [];
                var b = Error.prepareStackTrace;
                Error.prepareStackTrace = Ia.prepareHxStackTrace;
                a = a.stack;
                Error.prepareStackTrace = b;
                return a
            };
            Ia.prepareHxStackTrace = function (a, b) {
                a = [];
                for (var c = 0; c < b.length;) {
                    var d = b[c];
                    ++c;
                    null != Ia.wrapCallSite && (d = Ia.wrapCallSite(d));
                    var e = null,
                        f = d.getFunctionName();
                    if (null !=
                        f) {
                        var h = f.lastIndexOf(".");
                        0 <= h ? (e = f.substring(0, h), f = f.substring(h + 1), e = Hd.Method(e, f)) : e = Hd.Method(null, f)
                    }
                    f = d.getFileName();
                    h = null == f ? -1 : f.indexOf("file:");
                    null != Ia.wrapCallSite && 0 < h && (f = f.substring(h + 6));
                    a.push(Hd.FilePos(e, f, d.getLineNumber(), d.getColumnNumber()))
                }
                return a
            };
            Ia.normalize = function (a, b) {
                null == b && (b = 0);
                if (Array.isArray(a) && 0 < b) return a.slice(b);
                if ("string" == typeof a) {
                    switch (a.substring(0, 6)) {
                        case "Error\n":
                        case "Error:":
                            ++b
                    }
                    return Ia.skipLines(a, b)
                }
                return a
            };
            Ia.skipLines = function (a,
                                     b, c) {
                null == c && (c = 0);
                return 0 < b ? (c = a.indexOf("\n", c), 0 > c ? "" : Ia.skipLines(a, --b, c + 1)) : a.substring(c)
            };
            var Sc = function () {
                this.buf = new ab;
                this.cache = [];
                this.useCache = Sc.USE_CACHE;
                this.useEnumIndex = Sc.USE_ENUM_INDEX;
                this.shash = new Ha;
                this.scount = 0
            };
            g["haxe.Serializer"] = Sc;
            Sc.__name__ = "haxe.Serializer";
            Sc.run = function (a) {
                var b = new Sc;
                b.serialize(a);
                return b.toString()
            };
            Sc.prototype = {
                toString: function () {
                    return this.buf.b
                },
                serializeString: function (a) {
                    var b = this.shash.h[a];
                    null != b ? (this.buf.b += "R", this.buf.b +=
                        null == b ? "null" : "" + b) : (this.shash.h[a] = this.scount++, this.buf.b += "y", a = encodeURIComponent(a), this.buf.b += n.string(a.length), this.buf.b += ":", this.buf.b += null == a ? "null" : "" + a)
                },
                serializeRef: function (a) {
                    for (var b = typeof a, c = 0, d = this.cache.length; c < d;) {
                        var e = c++,
                            f = this.cache[e];
                        if (typeof f == b && f == a) return this.buf.b += "r", this.buf.b += null == e ? "null" : "" + e, !0
                    }
                    this.cache.push(a);
                    return !1
                },
                serializeFields: function (a) {
                    for (var b = 0, c = M.fields(a); b < c.length;) {
                        var d = c[b];
                        ++b;
                        this.serializeString(d);
                        this.serialize(M.field(a,
                            d))
                    }
                    this.buf.b += "g"
                },
                serialize: function (a) {
                    var b = y.typeof(a);
                    switch (b._hx_index) {
                        case 0:
                            this.buf.b += "n";
                            break;
                        case 1:
                            if (0 == a) {
                                this.buf.b += "z";
                                break
                            }
                            this.buf.b += "i";
                            this.buf.b += null == a ? "null" : "" + a;
                            break;
                        case 2:
                            isNaN(a) ? this.buf.b += "k" : isFinite(a) ? (this.buf.b += "d", this.buf.b += null == a ? "null" : "" + a) : this.buf.b += 0 > a ? "m" : "p";
                            break;
                        case 3:
                            this.buf.b += a ? "t" : "f";
                            break;
                        case 4:
                            T.__instanceof(a, Ol) ? (a = a.__name__, this.buf.b += "A", this.serializeString(a)) : T.__instanceof(a, Pl) ? (this.buf.b += "B", this.serializeString(a.__ename__)) :
                                this.useCache && this.serializeRef(a) || (this.buf.b += "o", this.serializeFields(a));
                            break;
                        case 5:
                            throw fa.thrown("Cannot serialize function");
                        case 6:
                            b = b.c;
                            if (b == String) {
                                this.serializeString(a);
                                break
                            }
                            if (this.useCache && this.serializeRef(a)) break;
                            switch (b) {
                                case Array:
                                    var c = 0;
                                    this.buf.b += "a";
                                    for (var d = 0, e = a.length; d < e;) b = d++, null == a[b] ? ++c : (0 < c && (1 == c ? this.buf.b += "n" : (this.buf.b += "u", this.buf.b += null == c ? "null" : "" + c), c = 0), this.serialize(a[b]));
                                    0 < c && (1 == c ? this.buf.b += "n" : (this.buf.b += "u", this.buf.b += null == c ?
                                        "null" : "" + c));
                                    this.buf.b += "h";
                                    break;
                                case Date:
                                    this.buf.b += "v";
                                    this.buf.b += n.string(a.getTime());
                                    break;
                                case Db:
                                    this.buf.b += "q";
                                    for (b = a.keys(); b.hasNext();) c = b.next(), this.buf.b += ":", this.buf.b += null == c ? "null" : "" + c, this.serialize(a.h[c]);
                                    this.buf.b += "h";
                                    break;
                                case Da:
                                    this.buf.b += "l";
                                    for (a = a.h; null != a;) b = a.item, a = a.next, this.serialize(b);
                                    this.buf.b += "h";
                                    break;
                                case N:
                                    this.buf.b += "M";
                                    for (b = a.keys(); b.hasNext();) {
                                        c = b.next();
                                        var f = M.field(c, "__id__");
                                        M.deleteField(c, "__id__");
                                        this.serialize(c);
                                        c.__id__ =
                                            f;
                                        this.serialize(a.h[c.__id__])
                                    }
                                    this.buf.b += "h";
                                    break;
                                case Ha:
                                    this.buf.b += "b";
                                    c = Object.keys(a.h);
                                    f = c.length;
                                    for (d = 0; d < f;) b = c[d++], this.serializeString(b), this.serialize(a.h[b]);
                                    this.buf.b += "h";
                                    break;
                                case nb:
                                    this.buf.b += "s";
                                    this.buf.b += n.string(Math.ceil(8 * a.length / 6));
                                    this.buf.b += ":";
                                    b = 0;
                                    c = a.length - 2;
                                    f = Sc.BASE64_CODES;
                                    if (null == f) {
                                        f = Array(Sc.BASE64.length);
                                        d = 0;
                                        for (e = Sc.BASE64.length; d < e;) {
                                            var h = d++;
                                            f[h] = ja.cca(Sc.BASE64, h)
                                        }
                                        Sc.BASE64_CODES = f
                                    }
                                    for (; b < c;) d = a.b[b++], e = a.b[b++], h = a.b[b++], this.buf.b += String.fromCodePoint(f[d >>
                                    2]), this.buf.b += String.fromCodePoint(f[(d << 4 | e >> 4) & 63]), this.buf.b += String.fromCodePoint(f[(e << 2 | h >> 6) & 63]), this.buf.b += String.fromCodePoint(f[h & 63]);
                                    b == c ? (d = a.b[b++], e = a.b[b++], this.buf.b += String.fromCodePoint(f[d >> 2]), this.buf.b += String.fromCodePoint(f[(d << 4 | e >> 4) & 63]), this.buf.b += String.fromCodePoint(f[e << 2 & 63])) : b == c + 1 && (d = a.b[b++], this.buf.b += String.fromCodePoint(f[d >> 2]), this.buf.b += String.fromCodePoint(f[d << 4 & 63]));
                                    break;
                                default:
                                    this.useCache && this.cache.pop(), null != a.hxSerialize ? (this.buf.b +=
                                        "C", this.serializeString(b.__name__), this.useCache && this.cache.push(a), a.hxSerialize(this), this.buf.b += "g") : (this.buf.b += "c", this.serializeString(b.__name__), this.useCache && this.cache.push(a), this.serializeFields(a))
                            }
                            break;
                        case 7:
                            b = b.e;
                            if (this.useCache) {
                                if (this.serializeRef(a)) break;
                                this.cache.pop()
                            }
                            this.buf.b += n.string(this.useEnumIndex ? "j" : "w");
                            this.serializeString(b.__ename__);
                            this.useEnumIndex ? (this.buf.b += ":", this.buf.b += n.string(a._hx_index)) : (b = a, this.serializeString(v[b.__enum__].__constructs__[b._hx_index]._hx_name));
                            this.buf.b += ":";
                            c = y.enumParameters(a);
                            this.buf.b += n.string(c.length);
                            for (b = 0; b < c.length;) f = c[b], ++b, this.serialize(f);
                            this.useCache && this.cache.push(a);
                            break;
                        default:
                            throw fa.thrown("Cannot serialize " + n.string(a));
                    }
                },
                __class__: Sc
            };
            var se = function (a) {
                var b = this;
                this.id = setInterval(function () {
                    b.run()
                }, a)
            };
            g["haxe.Timer"] = se;
            se.__name__ = "haxe.Timer";
            se.delay = function (a, b) {
                var c = new se(b);
                c.run = function () {
                    c.stop();
                    a()
                };
                return c
            };
            se.prototype = {
                stop: function () {
                    null != this.id && (clearInterval(this.id), this.id =
                        null)
                },
                run: function () {
                },
                __class__: se
            };
            var Ti = function () {
            };
            g["haxe._Unserializer.DefaultResolver"] = Ti;
            Ti.__name__ = "haxe._Unserializer.DefaultResolver";
            Ti.prototype = {
                resolveClass: function (a) {
                    return g[a]
                },
                resolveEnum: function (a) {
                    return v[a]
                },
                __class__: Ti
            };
            var Dc = function (a) {
                this.buf = a;
                this.length = this.buf.length;
                this.pos = 0;
                this.scache = [];
                this.cache = [];
                a = Dc.DEFAULT_RESOLVER;
                null == a && (a = new Ti, Dc.DEFAULT_RESOLVER = a);
                this.resolver = a
            };
            g["haxe.Unserializer"] = Dc;
            Dc.__name__ = "haxe.Unserializer";
            Dc.initCodes =
                function () {
                    for (var a = [], b = 0, c = Dc.BASE64.length; b < c;) {
                        var d = b++;
                        a[Dc.BASE64.charCodeAt(d)] = d
                    }
                    return a
                };
            Dc.run = function (a) {
                return (new Dc(a)).unserialize()
            };
            Dc.prototype = {
                setResolver: function (a) {
                    null == a ? (null == Sf.instance && (Sf.instance = new Sf), this.resolver = Sf.instance) : this.resolver = a
                },
                readDigits: function () {
                    for (var a = 0, b = !1, c = this.pos; ;) {
                        var d = this.buf.charCodeAt(this.pos);
                        if (d != d) break;
                        if (45 == d) {
                            if (this.pos != c) break;
                            b = !0
                        } else {
                            if (48 > d || 57 < d) break;
                            a = 10 * a + (d - 48)
                        }
                        this.pos++
                    }
                    b && (a *= -1);
                    return a
                },
                readFloat: function () {
                    for (var a =
                        this.pos; ;) {
                        var b = this.buf.charCodeAt(this.pos);
                        if (b != b) break;
                        if (43 <= b && 58 > b || 101 == b || 69 == b) this.pos++;
                        else break
                    }
                    return parseFloat(ja.substr(this.buf, a, this.pos - a))
                },
                unserializeObject: function (a) {
                    for (; ;) {
                        if (this.pos >= this.length) throw fa.thrown("Invalid object");
                        if (103 == this.buf.charCodeAt(this.pos)) break;
                        var b = this.unserialize();
                        if ("string" != typeof b) throw fa.thrown("Invalid object key");
                        var c = this.unserialize();
                        a[b] = c
                    }
                    this.pos++
                },
                unserializeEnum: function (a, b) {
                    if (58 != this.buf.charCodeAt(this.pos++)) throw fa.thrown("Invalid enum format");
                    var c = this.readDigits();
                    if (0 == c) return y.createEnum(a, b);
                    for (var d = []; 0 < c--;) d.push(this.unserialize());
                    return y.createEnum(a, b, d)
                },
                unserialize: function () {
                    switch (this.buf.charCodeAt(this.pos++)) {
                        case 65:
                            var a = this.unserialize(),
                                b = this.resolver.resolveClass(a);
                            if (null == b) throw fa.thrown("Class not found " + a);
                            return b;
                        case 66:
                            a = this.unserialize();
                            b = this.resolver.resolveEnum(a);
                            if (null == b) throw fa.thrown("Enum not found " + a);
                            return b;
                        case 67:
                            a = this.unserialize();
                            b = this.resolver.resolveClass(a);
                            if (null ==
                                b) throw fa.thrown("Class not found " + a);
                            b = Object.create(b.prototype);
                            this.cache.push(b);
                            b.hxUnserialize(this);
                            if (103 != this.buf.charCodeAt(this.pos++)) throw fa.thrown("Invalid custom data");
                            return b;
                        case 77:
                            a = new N;
                            this.cache.push(a);
                            for (var c; 104 != this.buf.charCodeAt(this.pos);) b = this.unserialize(), a.set(b, this.unserialize());
                            this.pos++;
                            return a;
                        case 82:
                            a = this.readDigits();
                            if (0 > a || a >= this.scache.length) throw fa.thrown("Invalid string reference");
                            return this.scache[a];
                        case 97:
                            b = [];
                            for (this.cache.push(b); ;) {
                                c =
                                    this.buf.charCodeAt(this.pos);
                                if (104 == c) {
                                    this.pos++;
                                    break
                                }
                                117 == c ? (this.pos++, a = this.readDigits(), b[b.length + a - 1] = null) : b.push(this.unserialize())
                            }
                            return b;
                        case 98:
                            a = new Ha;
                            for (this.cache.push(a); 104 != this.buf.charCodeAt(this.pos);) b = this.unserialize(), c = this.unserialize(), a.h[b] = c;
                            this.pos++;
                            return a;
                        case 99:
                            a = this.unserialize();
                            b = this.resolver.resolveClass(a);
                            if (null == b) throw fa.thrown("Class not found " + a);
                            b = Object.create(b.prototype);
                            this.cache.push(b);
                            this.unserializeObject(b);
                            return b;
                        case 100:
                            return this.readFloat();
                        case 102:
                            return !1;
                        case 105:
                            return this.readDigits();
                        case 106:
                            a = this.unserialize();
                            c = this.resolver.resolveEnum(a);
                            if (null == c) throw fa.thrown("Enum not found " + a);
                            this.pos++;
                            for (var d = this.readDigits(), e = c.__constructs__, f = Array(e.length), h = 0, r = e.length; h < r;) b = h++, f[b] = e[b]._hx_name;
                            b = f[d];
                            if (null == b) throw fa.thrown("Unknown enum index " + a + "@" + d);
                            b = this.unserializeEnum(c, b);
                            this.cache.push(b);
                            return b;
                        case 107:
                            return NaN;
                        case 108:
                            b = new Da;
                            for (this.cache.push(b); 104 != this.buf.charCodeAt(this.pos);) b.add(this.unserialize());
                            this.pos++;
                            return b;
                        case 109:
                            return -Infinity;
                        case 110:
                            return null;
                        case 111:
                            return b = {}, this.cache.push(b), this.unserializeObject(b), b;
                        case 112:
                            return Infinity;
                        case 113:
                            a = new Db;
                            this.cache.push(a);
                            for (c = this.buf.charCodeAt(this.pos++); 58 == c;) b = this.readDigits(), c = this.unserialize(), a.h[b] = c, c = this.buf.charCodeAt(this.pos++);
                            if (104 != c) throw fa.thrown("Invalid IntMap format");
                            return a;
                        case 114:
                            a = this.readDigits();
                            if (0 > a || a >= this.cache.length) throw fa.thrown("Invalid reference");
                            return this.cache[a];
                        case 115:
                            a = this.readDigits();
                            c = this.buf;
                            if (58 != this.buf.charCodeAt(this.pos++) || this.length - this.pos < a) throw fa.thrown("Invalid bytes length");
                            d = Dc.CODES;
                            null == d && (d = Dc.initCodes(), Dc.CODES = d);
                            b = this.pos;
                            e = a & 3;
                            f = b + (a - e);
                            h = new nb(new ArrayBuffer(3 * (a >> 2) + (2 <= e ? e - 1 : 0)));
                            for (r = 0; b < f;) {
                                var m = d[c.charCodeAt(b++)],
                                    g = d[c.charCodeAt(b++)];
                                h.b[r++] = (m << 2 | g >> 4) & 255;
                                m = d[c.charCodeAt(b++)];
                                h.b[r++] = (g << 4 | m >> 2) & 255;
                                g = d[c.charCodeAt(b++)];
                                h.b[r++] = (m << 6 | g) & 255
                            }
                            2 <= e && (m = d[c.charCodeAt(b++)], g = d[c.charCodeAt(b++)],
                                h.b[r++] = (m << 2 | g >> 4) & 255, 3 == e && (m = d[c.charCodeAt(b++)], h.b[r++] = (g << 4 | m >> 2) & 255));
                            this.pos += a;
                            this.cache.push(h);
                            return h;
                        case 116:
                            return !0;
                        case 118:
                            return 48 <= this.buf.charCodeAt(this.pos) && 57 >= this.buf.charCodeAt(this.pos) && 48 <= this.buf.charCodeAt(this.pos + 1) && 57 >= this.buf.charCodeAt(this.pos + 1) && 48 <= this.buf.charCodeAt(this.pos + 2) && 57 >= this.buf.charCodeAt(this.pos + 2) && 48 <= this.buf.charCodeAt(this.pos + 3) && 57 >= this.buf.charCodeAt(this.pos + 3) && 45 == this.buf.charCodeAt(this.pos + 4) ? (b = ja.strDate(ja.substr(this.buf,
                                this.pos, 19)), this.pos += 19) : b = new Date(this.readFloat()), this.cache.push(b), b;
                        case 119:
                            a = this.unserialize();
                            c = this.resolver.resolveEnum(a);
                            if (null == c) throw fa.thrown("Enum not found " + a);
                            b = this.unserializeEnum(c, this.unserialize());
                            this.cache.push(b);
                            return b;
                        case 120:
                            throw fa.thrown(this.unserialize());
                        case 121:
                            a = this.readDigits();
                            if (58 != this.buf.charCodeAt(this.pos++) || this.length - this.pos < a) throw fa.thrown("Invalid string length");
                            b = ja.substr(this.buf, this.pos, a);
                            this.pos += a;
                            b = decodeURIComponent(b.split("+").join(" "));
                            this.scache.push(b);
                            return b;
                        case 122:
                            return 0
                    }
                    this.pos--;
                    throw fa.thrown("Invalid char " + this.buf.charAt(this.pos) + " at position " + this.pos);
                },
                __class__: Dc
            };
            var Sf = function () {
            };
            g["haxe._Unserializer.NullResolver"] = Sf;
            Sf.__name__ = "haxe._Unserializer.NullResolver";
            Sf.prototype = {
                resolveClass: function (a) {
                    return null
                },
                resolveEnum: function (a) {
                    return null
                },
                __class__: Sf
            };
            var Bg = function (a, b, c) {
                fa.call(this, String(a), b, c);
                this.value = a;
                this.__skipStack++
            };
            g["haxe.ValueException"] = Bg;
            Bg.__name__ = "haxe.ValueException";
            Bg.__super__ = fa;
            Bg.prototype = l(fa.prototype, {
                unwrap: function () {
                    return this.value
                },
                __class__: Bg
            });
            var Tf = function () {
                this.a1 = 1;
                this.a2 = 0
            };
            g["haxe.crypto.Adler32"] = Tf;
            Tf.__name__ = "haxe.crypto.Adler32";
            Tf.read = function (a) {
                var b = new Tf,
                    c = a.readByte(),
                    d = a.readByte(),
                    e = a.readByte();
                a = a.readByte();
                b.a1 = e << 8 | a;
                b.a2 = c << 8 | d;
                return b
            };
            Tf.prototype = {
                update: function (a, b, c) {
                    var d = this.a1,
                        e = this.a2,
                        f = b;
                    for (b += c; f < b;) c = f++, d = (d + a.b[c]) % 65521, e = (e + d) % 65521;
                    this.a1 = d;
                    this.a2 = e
                },
                equals: function (a) {
                    return a.a1 == this.a1 ?
                        a.a2 == this.a2 : !1
                },
                __class__: Tf
            };
            var nb = function (a) {
                this.length = a.byteLength;
                this.b = new Uint8Array(a);
                this.b.bufferValue = a;
                a.hxBytes = this;
                a.bytes = this.b
            };
            g["haxe.io.Bytes"] = nb;
            nb.__name__ = "haxe.io.Bytes";
            nb.ofString = function (a, b) {
                b = [];
                for (var c = 0; c < a.length;) {
                    var d = a.charCodeAt(c++);
                    55296 <= d && 56319 >= d && (d = d - 55232 << 10 | a.charCodeAt(c++) & 1023);
                    127 >= d ? b.push(d) : (2047 >= d ? b.push(192 | d >> 6) : (65535 >= d ? b.push(224 | d >> 12) : (b.push(240 | d >> 18), b.push(128 | d >> 12 & 63)), b.push(128 | d >> 6 & 63)), b.push(128 | d & 63))
                }
                return new nb((new Uint8Array(b)).buffer)
            };
            nb.ofData = function (a) {
                var b = a.hxBytes;
                return null != b ? b : new nb(a)
            };
            nb.prototype = {
                blit: function (a, b, c, d) {
                    if (0 > a || 0 > c || 0 > d || a + d > this.length || c + d > b.length) throw fa.thrown(Id.OutsideBounds);
                    0 == c && d == b.b.byteLength ? this.b.set(b.b, a) : this.b.set(b.b.subarray(c, c + d), a)
                },
                getString: function (a, b, c) {
                    if (0 > a || 0 > b || a + b > this.length) throw fa.thrown(Id.OutsideBounds);
                    c = "";
                    var d = this.b,
                        e = xc.fromCharCode,
                        f = a;
                    for (a += b; f < a;)
                        if (b = d[f++], 128 > b) {
                            if (0 == b) break;
                            c += e(b)
                        } else if (224 > b) c += e((b & 63) << 6 | d[f++] & 127);
                        else if (240 > b) {
                            var h =
                                d[f++];
                            c += e((b & 31) << 12 | (h & 127) << 6 | d[f++] & 127)
                        } else {
                            h = d[f++];
                            var r = d[f++];
                            b = (b & 15) << 18 | (h & 127) << 12 | (r & 127) << 6 | d[f++] & 127;
                            c += e((b >> 10) + 55232);
                            c += e(b & 1023 | 56320)
                        }
                    return c
                },
                toString: function () {
                    return this.getString(0, this.length)
                },
                __class__: nb
            };
            var cc = function () {
            };
            g["haxe.ds.ArraySort"] = cc;
            cc.__name__ = "haxe.ds.ArraySort";
            cc.sort = function (a, b) {
                cc.rec(a, b, 0, a.length)
            };
            cc.rec = function (a, b, c, d) {
                var e = c + d >> 1;
                if (12 > d - c) {
                    if (!(d <= c))
                        for (e = c + 1; e < d;)
                            for (var f = e++; f > c;) {
                                if (0 > b(a[f], a[f - 1])) cc.swap(a, f - 1, f);
                                else break;
                                --f
                            }
                } else cc.rec(a, b, c, e), cc.rec(a, b, e, d), cc.doMerge(a, b, c, e, d, e - c, d - e)
            };
            cc.doMerge = function (a, b, c, d, e, f, h) {
                if (0 != f && 0 != h)
                    if (2 == f + h) 0 > b(a[d], a[c]) && cc.swap(a, d, c);
                    else {
                        if (f > h) {
                            var r = f >> 1;
                            var m = c + r;
                            var g = cc.lower(a, b, d, e, m);
                            var q = g - d
                        } else q = h >> 1, g = d + q, m = cc.upper(a, b, c, d, g), r = m - c;
                        cc.rotate(a, b, m, d, g);
                        d = m + q;
                        cc.doMerge(a, b, c, m, d, r, q);
                        cc.doMerge(a, b, d, g, e, f - r, h - q)
                    }
            };
            cc.rotate = function (a, b, c, d, e) {
                if (c != d && d != e)
                    for (b = cc.gcd(e - c, d - c); 0 != b--;) {
                        for (var f = a[c + b], h = d - c, r = c + b, m = c + b + h; m != c + b;) a[r] = a[m], r = m, m = e -
                        m > h ? m + h : c + (h - (e - m));
                        a[r] = f
                    }
            };
            cc.gcd = function (a, b) {
                for (; 0 != b;) {
                    var c = a % b;
                    a = b;
                    b = c
                }
                return a
            };
            cc.upper = function (a, b, c, d, e) {
                d -= c;
                for (var f, h; 0 < d;) f = d >> 1, h = c + f, 0 > b(a[e], a[h]) ? d = f : (c = h + 1, d = d - f - 1);
                return c
            };
            cc.lower = function (a, b, c, d, e) {
                d -= c;
                for (var f, h; 0 < d;) f = d >> 1, h = c + f, 0 > b(a[h], a[e]) ? (c = h + 1, d = d - f - 1) : d = f;
                return c
            };
            cc.swap = function (a, b, c) {
                var d = a[b];
                a[b] = a[c];
                a[c] = d
            };
            var Db = function () {
                this.h = {}
            };
            g["haxe.ds.IntMap"] = Db;
            Db.__name__ = "haxe.ds.IntMap";
            Db.__interfaces__ = [hb];
            Db.prototype = {
                set: function (a, b) {
                    this.h[a] =
                        b
                },
                remove: function (a) {
                    if (!this.h.hasOwnProperty(a)) return !1;
                    delete this.h[a];
                    return !0
                },
                keys: function () {
                    var a = [],
                        b;
                    for (b in this.h) this.h.hasOwnProperty(b) && a.push(+b);
                    return new yf(a)
                },
                iterator: function () {
                    return {
                        ref: this.h,
                        it: this.keys(),
                        hasNext: function () {
                            return this.it.hasNext()
                        },
                        next: function () {
                            var a = this.it.next();
                            return this.ref[a]
                        }
                    }
                },
                __class__: Db
            };
            var lh = function (a, b) {
                this.item = a;
                this.next = b
            };
            g["haxe.ds._List.ListNode"] = lh;
            lh.__name__ = "haxe.ds._List.ListNode";
            lh.prototype = {
                __class__: lh
            };
            var Rj =
                function (a) {
                    this.head = a
                };
            g["haxe.ds._List.ListIterator"] = Rj;
            Rj.__name__ = "haxe.ds._List.ListIterator";
            Rj.prototype = {
                hasNext: function () {
                    return null != this.head
                },
                next: function () {
                    var a = this.head.item;
                    this.head = this.head.next;
                    return a
                },
                __class__: Rj
            };
            var Ha = function () {
                this.h = Object.create(null)
            };
            g["haxe.ds.StringMap"] = Ha;
            Ha.__name__ = "haxe.ds.StringMap";
            Ha.__interfaces__ = [hb];
            Ha.prototype = {
                set: function (a, b) {
                    this.h[a] = b
                },
                remove: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.h, a) ? (delete this.h[a],
                        !0) : !1
                },
                __class__: Ha
            };
            var Uf = function (a, b, c) {
                fa.call(this, a, b);
                this.posInfos = null == c ? {

                    className: "(unknown)",
                    methodName: "(unknown)"
                } : c;
                this.__skipStack++
            };
            g["haxe.exceptions.PosException"] = Uf;
            Uf.__name__ = "haxe.exceptions.PosException";
            Uf.__super__ = fa;
            Uf.prototype = l(fa.prototype, {
                toString: function () {
                    return "" + fa.prototype.toString.call(this) + " in " + this.posInfos.className + "." + this.posInfos.methodName
                },
                __class__: Uf
            });
            var Ui = function (a, b, c) {
                null == a && (a = "Not implemented");
                Uf.call(this, a, b, c);
                this.__skipStack++
            };
            g["haxe.exceptions.NotImplementedException"] = Ui;
            Ui.__name__ = "haxe.exceptions.NotImplementedException";
            Ui.__super__ = Uf;
            Ui.prototype = l(Uf.prototype, {
                __class__: Ui
            });
            var Vi = function () {
                this.size = this.pos = 0
            };
            g["haxe.io.BytesBuffer"] = Vi;
            Vi.__name__ = "haxe.io.BytesBuffer";
            Vi.prototype = {
                addByte: function (a) {
                    this.pos == this.size && this.grow(1);
                    this.view.setUint8(this.pos++, a)
                },
                add: function (a) {
                    this.pos + a.length > this.size &&
                    this.grow(a.length);
                    if (0 != this.size) {
                        var b = new Uint8Array(a.b.buffer, a.b.byteOffset, a.length);
                        this.u8.set(b, this.pos);
                        this.pos += a.length
                    }
                },
                addBytes: function (a, b, c) {
                    if (0 > b || 0 > c || b + c > a.length) throw fa.thrown(Id.OutsideBounds);
                    this.pos + c > this.size && this.grow(c);
                    0 != this.size && (a = new Uint8Array(a.b.buffer, a.b.byteOffset + b, c), this.u8.set(a, this.pos), this.pos += c)
                },
                grow: function (a) {
                    var b = this.pos + a;
                    for (a = 0 == this.size ? 16 : this.size; a < b;) a = 3 * a >> 1;
                    b = new ArrayBuffer(a);
                    var c = new Uint8Array(b);
                    0 < this.size && c.set(this.u8);
                    this.size = a;
                    this.buffer = b;
                    this.u8 = c;
                    this.view = new DataView(this.buffer)
                },
                getBytes: function () {
                    if (0 == this.size) return new nb(new ArrayBuffer(0));
                    var a = new nb(this.buffer);
                    a.length = this.pos;
                    return a
                },
                __class__: Vi
            };
            var Wi = function () {
            };
            g["haxe.io.Input"] = Wi;
            Wi.__name__ = "haxe.io.Input";
            Wi.prototype = {
                readByte: function () {
                    throw new Ui(null, null, {

                        className: "haxe.io.Input",
                        methodName: "readByte"
                    });
                },
                readBytes: function (a, b, c) {
                    var d = c,
                        e = a.b;
                    if (0 > b || 0 > c || b + c > a.length) throw fa.thrown(Id.OutsideBounds);
                    try {
                        for (; 0 < d;) e[b] = this.readByte(), ++b, --d
                    } catch (f) {
                        if (Ia.lastError = f, !(fa.caught(f).unwrap() instanceof Sg)) throw f;
                    }
                    return c - d
                },
                readFullBytes: function (a, b, c) {
                    for (; 0 < c;) {
                        var d = this.readBytes(a, b, c);
                        if (0 == d) throw fa.thrown(Id.Blocked);
                        b += d;
                        c -= d
                    }
                },
                read: function (a) {
                    for (var b = new nb(new ArrayBuffer(a)), c = 0; 0 < a;) {
                        var d = this.readBytes(b, c, a);
                        if (0 == d) throw fa.thrown(Id.Blocked);
                        c += d;
                        a -= d
                    }
                    return b
                },
                readInt16: function () {
                    var a = this.readByte(),
                        b = this.readByte();
                    a = this.bigEndian ? b | a << 8 : a | b << 8;
                    return 0 != (a & 32768) ?
                        a - 65536 : a
                },
                readUInt16: function () {
                    var a = this.readByte(),
                        b = this.readByte();
                    return this.bigEndian ? b | a << 8 : a | b << 8
                },
                readInt32: function () {
                    var a = this.readByte(),
                        b = this.readByte(),
                        c = this.readByte(),
                        d = this.readByte();
                    return this.bigEndian ? d | c << 8 | b << 16 | a << 24 : a | b << 8 | c << 16 | d << 24
                },
                readString: function (a, b) {
                    var c = new nb(new ArrayBuffer(a));
                    this.readFullBytes(c, 0, a);
                    return c.getString(0, a, b)
                },
                __class__: Wi
            };
            var Xi = function (a, b, c) {
                null == b && (b = 0);
                null == c && (c = a.length - b);
                if (0 > b || 0 > c || b + c > a.length) throw fa.thrown(Id.OutsideBounds);
                this.b = a.b;
                this.pos = b;
                this.totlen = this.len = c
            };
            g["haxe.io.BytesInput"] = Xi;
            Xi.__name__ = "haxe.io.BytesInput";
            Xi.__super__ = Wi;
            Xi.prototype = l(Wi.prototype, {
                readByte: function () {
                    if (0 == this.len) throw fa.thrown(new Sg);
                    this.len--;
                    return this.b[this.pos++]
                },
                readBytes: function (a, b, c) {
                    if (0 > b || 0 > c || b + c > a.length) throw fa.thrown(Id.OutsideBounds);
                    if (0 == this.len && 0 < c) throw fa.thrown(new Sg);
                    this.len < c && (c = this.len);
                    var d = this.b;
                    a = a.b;
                    for (var e = 0, f = c; e < f;) {
                        var h = e++;
                        a[b + h] = d[this.pos + h]
                    }
                    this.pos += c;
                    this.len -= c;
                    return c
                },
                __class__: Xi
            });
            var Ml = v["haxe.io.Encoding"] = {
                __ename__: "haxe.io.Encoding",
                __constructs__: null,
                UTF8: {
                    _hx_name: "UTF8",
                    _hx_index: 0,
                    __enum__: "haxe.io.Encoding",
                    toString: q
                },
                RawNative: {
                    _hx_name: "RawNative",
                    _hx_index: 1,
                    __enum__: "haxe.io.Encoding",
                    toString: q
                }
            };
            Ml.__constructs__ = [Ml.UTF8, Ml.RawNative];
            var Sg = function () {
            };
            g["haxe.io.Eof"] = Sg;
            Sg.__name__ = "haxe.io.Eof";
            Sg.prototype = {
                toString: function () {
                    return "Eof"
                },
                __class__: Sg
            };
            var Id = v["haxe.io.Error"] = {
                __ename__: "haxe.io.Error",
                __constructs__: null,
                Blocked: {
                    _hx_name: "Blocked",
                    _hx_index: 0,
                    __enum__: "haxe.io.Error",
                    toString: q
                },
                Overflow: {
                    _hx_name: "Overflow",
                    _hx_index: 1,
                    __enum__: "haxe.io.Error",
                    toString: q
                },
                OutsideBounds: {
                    _hx_name: "OutsideBounds",
                    _hx_index: 2,
                    __enum__: "haxe.io.Error",
                    toString: q
                },
                Custom: (E = function (a) {
                    return {
                        _hx_index: 3,
                        e: a,
                        __enum__: "haxe.io.Error",
                        toString: q
                    }
                }, E._hx_name = "Custom", E.__params__ = ["e"], E)
            };
            Id.__constructs__ = [Id.Blocked, Id.Overflow, Id.OutsideBounds, Id.Custom];
            var Ul = {
                    fromBytes: function (a, b, c) {
                        null == b && (b = 0);
                        null == c && (c = a.length - b >> 2);
                        return new Float32Array(a.b.bufferValue,
                            b, c)
                    }
                },
                Yc = function (a) {
                    switch (a) {
                        case ".":
                        case "..":
                            this.dir = a;
                            this.file = "";
                            return
                    }
                    var b = a.lastIndexOf("/"),
                        c = a.lastIndexOf("\\");
                    b < c ? (this.dir = ja.substr(a, 0, c), a = ja.substr(a, c + 1, null), this.backslash = !0) : c < b ? (this.dir = ja.substr(a, 0, b), a = ja.substr(a, b + 1, null)) : this.dir = null;
                    b = a.lastIndexOf(".");
                    -
                        1 != b ? (this.ext = ja.substr(a, b + 1, null), this.file = ja.substr(a, 0, b)) : (this.ext = null, this.file = a)
                };
            g["haxe.io.Path"] = Yc;
            Yc.__name__ = "haxe.io.Path";
            Yc.withoutDirectory = function (a) {
                a = new Yc(a);
                a.dir = null;
                return a.toString()
            };
            Yc.directory = function (a) {
                a = new Yc(a);
                return null == a.dir ? "" : a.dir
            };
            Yc.extension = function (a) {
                a = new Yc(a);
                return null == a.ext ? "" : a.ext
            };
            Yc.prototype = {
                toString: function () {
                    return (null == this.dir ? "" : this.dir + (this.backslash ? "\\" : "/")) + this.file + (null == this.ext ? "" : "." + this.ext)
                },
                __class__: Yc
            };
            var yf = function (a) {
                this.current = 0;
                this.array = a
            };
            g["haxe.iterators.ArrayIterator"] = yf;
            yf.__name__ = "haxe.iterators.ArrayIterator";
            yf.prototype = {
                hasNext: function () {
                    return this.current < this.array.length
                },
                next: function () {
                    return this.array[this.current++]
                },
                __class__: yf
            };
            var Vf = v["haxe.zip.ExtraField"] = {
                __ename__: "haxe.zip.ExtraField",
                __constructs__: null,
                FUnknown: (E = function (a, b) {
                    return {
                        _hx_index: 0,
                        tag: a,
                        bytes: b,
                        __enum__: "haxe.zip.ExtraField",
                        toString: q
                    }
                }, E._hx_name = "FUnknown", E.__params__ = ["tag", "bytes"], E),
                FInfoZipUnicodePath: (E = function (a, b) {
                    return {
                        _hx_index: 1,
                        name: a,
                        crc: b,
                        __enum__: "haxe.zip.ExtraField",
                        toString: q
                    }
                }, E._hx_name = "FInfoZipUnicodePath", E.__params__ = ["name", "crc"], E),
                FUtf8: {
                    _hx_name: "FUtf8",
                    _hx_index: 2,
                    __enum__: "haxe.zip.ExtraField",
                    toString: q
                }
            };
            Vf.__constructs__ = [Vf.FUnknown, Vf.FInfoZipUnicodePath, Vf.FUtf8];
            var Jd = v["haxe.zip.Huffman"] = {
                __ename__: "haxe.zip.Huffman",
                __constructs__: null,
                Found: (E = function (a) {
                    return {
                        _hx_index: 0,
                        i: a,
                        __enum__: "haxe.zip.Huffman",
                        toString: q
                    }
                }, E._hx_name = "Found", E.__params__ = ["i"], E),
                NeedBit: (E = function (a, b) {
                    return {
                        _hx_index: 1,
                        left: a,
                        right: b,
                        __enum__: "haxe.zip.Huffman",
                        toString: q
                    }
                }, E._hx_name = "NeedBit", E.__params__ = ["left", "right"], E),
                NeedBits: (E = function (a, b) {
                    return {
                        _hx_index: 2,
                        n: a,
                        table: b,
                        __enum__: "haxe.zip.Huffman",
                        toString: q
                    }
                }, E._hx_name = "NeedBits", E.__params__ = ["n", "table"], E)
            };
            Jd.__constructs__ = [Jd.Found, Jd.NeedBit, Jd.NeedBits];
            var xk = function () {
            };
            g["haxe.zip.HuffTools"] = xk;
            xk.__name__ = "haxe.zip.HuffTools";
            xk.prototype = {
                treeDepth: function (a) {
                    switch (a._hx_index) {
                        case 0:
                            return 0;
                        case 1:
                            var b = a.right;
                            a = this.treeDepth(a.left);
                            b = this.treeDepth(b);
                            return 1 + (a < b ? a : b);
                        case 2:
                            throw fa.thrown("assert");
                    }
                },
                treeCompress: function (a) {
                    var b = this.treeDepth(a);
                    if (0 == b) return a;
                    if (1 == b) {
                        if (1 == a._hx_index) return b = a.right,
                            Jd.NeedBit(this.treeCompress(a.left), this.treeCompress(b));
                        throw fa.thrown("assert");
                    }
                    for (var c = [], d = 0, e = 1 << b; d < e;) d++, c.push(Jd.Found(-1));
                    this.treeWalk(c, 0, 0, b, a);
                    return Jd.NeedBits(b, c)
                },
                treeWalk: function (a, b, c, d, e) {
                    if (1 == e._hx_index) {
                        var f = e.left,
                            h = e.right;
                        0 < d ? (this.treeWalk(a, b, c + 1, d - 1, f), this.treeWalk(a, b | 1 << c, c + 1, d - 1, h)) : a[b] = this.treeCompress(e)
                    } else a[b] = this.treeCompress(e)
                },
                treeMake: function (a, b, c, d) {
                    if (d > b) throw fa.thrown("Invalid huffman");
                    var e = c << 5 | d;
                    if (a.h.hasOwnProperty(e)) return Jd.Found(a.h[e]);
                    c <<= 1;
                    ++d;
                    return Jd.NeedBit(this.treeMake(a, b, c, d), this.treeMake(a, b, c | 1, d))
                },
                make: function (a, b, c, d) {
                    if (1 == c) return Jd.NeedBit(Jd.Found(0), Jd.Found(0));
                    var e = [],
                        f = [];
                    if (32 < d) throw fa.thrown("Invalid huffman");
                    for (var h = 0, r = d; h < r;) h++, e.push(0), f.push(0);
                    h = 0;
                    for (r = c; h < r;) {
                        var m = h++;
                        m = a[m + b];
                        if (m >= d) throw fa.thrown("Invalid huffman");
                        e[m]++
                    }
                    var g = 0;
                    h = 1;
                    for (r = d - 1; h < r;) m = h++, g = g + e[m] << 1, f[m] = g;
                    e = new Db;
                    h = 0;
                    for (r = c; h < r;) m = h++, c = a[m + b], 0 != c && (g = f[c - 1], f[c - 1] = g + 1, e.h[g << 5 | c] = m);
                    return this.treeCompress(Jd.NeedBit(this.treeMake(e,
                        d, 0, 1), this.treeMake(e, d, 1, 1)))
                },
                __class__: xk
            };
            var yk = function (a) {
                this.buffer = new nb(new ArrayBuffer(65536));
                this.pos = 0;
                a && (this.crc = new Tf)
            };
            g["haxe.zip._InflateImpl.Window"] = yk;
            yk.__name__ = "haxe.zip._InflateImpl.Window";
            yk.prototype = {
                slide: function () {
                    null != this.crc && this.crc.update(this.buffer, 0, 32768);
                    var a = new nb(new ArrayBuffer(65536));
                    this.pos -= 32768;
                    a.blit(0, this.buffer, 32768, this.pos);
                    this.buffer = a
                },
                addBytes: function (a, b, c) {
                    65536 < this.pos + c && this.slide();
                    this.buffer.blit(this.pos, a, b, c);
                    this.pos +=
                        c
                },
                addByte: function (a) {
                    65536 == this.pos && this.slide();
                    this.buffer.b[this.pos] = a & 255;
                    this.pos++
                },
                getLastChar: function () {
                    return this.buffer.b[this.pos - 1]
                },
                available: function () {
                    return this.pos
                },
                checksum: function () {
                    null != this.crc && this.crc.update(this.buffer, 0, this.pos);
                    return this.crc
                },
                __class__: yk
            };
            var Qb = v["haxe.zip._InflateImpl.State"] = {
                __ename__: "haxe.zip._InflateImpl.State",
                __constructs__: null,
                Head: {
                    _hx_name: "Head",
                    _hx_index: 0,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: q
                },
                Block: {
                    _hx_name: "Block",
                    _hx_index: 1,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: q
                },
                CData: {
                    _hx_name: "CData",
                    _hx_index: 2,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: q
                },
                Flat: {
                    _hx_name: "Flat",
                    _hx_index: 3,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: q
                },
                Crc: {
                    _hx_name: "Crc",
                    _hx_index: 4,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: q
                },
                Dist: {
                    _hx_name: "Dist",
                    _hx_index: 5,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: q
                },
                DistOne: {
                    _hx_name: "DistOne",
                    _hx_index: 6,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: q
                },
                Done: {
                    _hx_name: "Done",
                    _hx_index: 7,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: q
                }
            };
            Qb.__constructs__ = [Qb.Head, Qb.Block, Qb.CData, Qb.Flat, Qb.Crc, Qb.Dist, Qb.DistOne, Qb.Done];
            var pc = function (a, b, c) {
                null == c && (c = !0);
                null == b && (b = !0);
                this.isFinal = !1;
                this.htools = new xk;
                this.huffman = this.buildFixedHuffman();
                this.huffdist = null;
                this.dist = this.len = 0;
                this.state = b ? Qb.Head : Qb.Block;
                this.input = a;
                this.needed = this.nbits = this.bits = 0;
                this.output = null;
                this.outpos = 0;
                this.lengths = [];
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.window = new yk(c)
            };
            g["haxe.zip.InflateImpl"] = pc;
            pc.__name__ = "haxe.zip.InflateImpl";
            pc.prototype = {
                buildFixedHuffman: function () {
                    if (null != pc.FIXED_HUFFMAN) return pc.FIXED_HUFFMAN;
                    for (var a = [], b = 0; 288 > b;) {
                        var c = b++;
                        a.push(143 >= c ? 8 : 255 >= c ? 9 : 279 >= c ? 7 : 8)
                    }
                    pc.FIXED_HUFFMAN = this.htools.make(a, 0, 288, 10);
                    return pc.FIXED_HUFFMAN
                },
                readBytes: function (a, b, c) {
                    this.needed = c;
                    this.outpos = b;
                    this.output = a;
                    if (0 < c)
                        for (; this.inflateLoop();) ;
                    return c - this.needed
                },
                getBits: function (a) {
                    for (; this.nbits < a;) this.bits |= this.input.readByte() << this.nbits, this.nbits += 8;
                    var b = this.bits & (1 << a) - 1;
                    this.nbits -= a;
                    this.bits >>= a;
                    return b
                },
                getBit: function () {
                    0 == this.nbits && (this.nbits = 8, this.bits = this.input.readByte());
                    var a = 1 == (this.bits & 1);
                    this.nbits--;
                    this.bits >>= 1;
                    return a
                },
                getRevBits: function (a) {
                    return 0 == a ? 0 : this.getBit() ? 1 << a - 1 | this.getRevBits(a - 1) : this.getRevBits(a - 1)
                },
                resetBits: function () {
                    this.nbits = this.bits = 0
                },
                addBytes: function (a, b, c) {
                    this.window.addBytes(a, b, c);
                    this.output.blit(this.outpos, a, b, c);
                    this.needed -= c;
                    this.outpos += c
                },
                addByte: function (a) {
                    this.window.addByte(a);
                    this.output.b[this.outpos] = a & 255;
                    this.needed--;
                    this.outpos++
                },
                addDistOne: function (a) {
                    for (var b = this.window.getLastChar(), c = 0; c < a;) c++,
                        this.addByte(b)
                },
                addDist: function (a, b) {
                    this.addBytes(this.window.buffer, this.window.pos - a, b)
                },
                applyHuffman: function (a) {
                    switch (a._hx_index) {
                        case 0:
                            var b = a.i;
                            return b;
                        case 1:
                            return b = a.left, a = a.right, this.applyHuffman(this.getBit() ? a : b);
                        case 2:
                            return b = a.n, this.applyHuffman(a.table[this.getBits(b)])
                    }
                },
                inflateLengths: function (a, b) {
                    for (var c = 0, d = 0; c < b;) {
                        var e = this.applyHuffman(this.huffman);
                        switch (e) {
                            case 0:
                            case 1:
                            case 2:
                            case 3:
                            case 4:
                            case 5:
                            case 6:
                            case 7:
                            case 8:
                            case 9:
                            case 10:
                            case 11:
                            case 12:
                            case 13:
                            case 14:
                            case 15:
                                d =
                                    e;
                                a[c] = e;
                                ++c;
                                break;
                            case 16:
                                e = c + 3 + this.getBits(2);
                                if (e > b) throw fa.thrown("Invalid data");
                                for (; c < e;) a[c] = d, ++c;
                                break;
                            case 17:
                                c += 3 + this.getBits(3);
                                if (c > b) throw fa.thrown("Invalid data");
                                break;
                            case 18:
                                c += 11 + this.getBits(7);
                                if (c > b) throw fa.thrown("Invalid data");
                                break;
                            default:
                                throw fa.thrown("Invalid data");
                        }
                    }
                },
                inflateLoop: function () {
                    switch (this.state._hx_index) {
                        case 0:
                            var a = this.input.readByte();
                            if (8 != (a & 15)) throw fa.thrown("Invalid data");
                            var b = this.input.readByte(),
                                c = 0 != (b & 32);
                            if (0 != ((a << 8) + b) % 31) throw fa.thrown("Invalid data");
                            if (c) throw fa.thrown("Unsupported dictionary");
                            this.state = Qb.Block;
                            return !0;
                        case 1:
                            switch (this.isFinal = this.getBit(), this.getBits(2)) {
                                case 0:
                                    this.len = this.input.readUInt16();
                                    if (this.input.readUInt16() != 65535 - this.len) throw fa.thrown("Invalid data");
                                    this.state = Qb.Flat;
                                    a = this.inflateLoop();
                                    this.resetBits();
                                    return a;
                                case 1:
                                    return this.huffman = this.buildFixedHuffman(), this.huffdist = null, this.state = Qb.CData, !0;
                                case 2:
                                    a = this.getBits(5) + 257;
                                    b = this.getBits(5) + 1;
                                    var d = this.getBits(4) + 4;
                                    c = 0;
                                    for (var e = d; c < e;) {
                                        var f =
                                            c++;
                                        this.lengths[pc.CODE_LENGTHS_POS[f]] = this.getBits(3)
                                    }
                                    c = d;
                                    for (e = 19; c < e;) f = c++, this.lengths[pc.CODE_LENGTHS_POS[f]] = 0;
                                    this.huffman = this.htools.make(this.lengths, 0, 19, 8);
                                    d = [];
                                    c = 0;
                                    for (e = a + b; c < e;) c++, d.push(0);
                                    this.inflateLengths(d, a + b);
                                    this.huffdist = this.htools.make(d, a, b, 16);
                                    this.huffman = this.htools.make(d, 0, a, 16);
                                    this.state = Qb.CData;
                                    return !0;
                                default:
                                    throw fa.thrown("Invalid data");
                            }
                        case 2:
                            b = this.applyHuffman(this.huffman);
                            if (256 > b) return this.addByte(b), 0 < this.needed;
                            if (256 == b) this.state = this.isFinal ?
                                Qb.Crc : Qb.Block;
                            else {
                                b -= 257;
                                a = pc.LEN_EXTRA_BITS_TBL[b];
                                if (-1 == a) throw fa.thrown("Invalid data");
                                this.len = pc.LEN_BASE_VAL_TBL[b] + this.getBits(a);
                                b = null == this.huffdist ? this.getRevBits(5) : this.applyHuffman(this.huffdist);
                                a = pc.DIST_EXTRA_BITS_TBL[b];
                                if (-1 == a) throw fa.thrown("Invalid data");
                                this.dist = pc.DIST_BASE_VAL_TBL[b] + this.getBits(a);
                                if (this.dist > this.window.available()) throw fa.thrown("Invalid data");
                                this.state = 1 == this.dist ? Qb.DistOne : Qb.Dist
                            }
                            return !0;
                        case 3:
                            return a = this.len < this.needed ? this.len :
                                this.needed, b = this.input.read(a), this.len -= a, this.addBytes(b, 0, a), 0 == this.len && (this.state = this.isFinal ? Qb.Crc : Qb.Block), 0 < this.needed;
                        case 4:
                            a = this.window.checksum();
                            if (null == a) return this.state = Qb.Done, !0;
                            b = Tf.read(this.input);
                            if (!a.equals(b)) throw fa.thrown("Invalid CRC");
                            this.state = Qb.Done;
                            return !0;
                        case 5:
                            for (; 0 < this.len && 0 < this.needed;) a = this.len < this.dist ? this.len : this.dist, a = this.needed < a ? this.needed : a, this.addDist(this.dist, a), this.len -= a;
                            0 == this.len && (this.state = Qb.CData);
                            return 0 < this.needed;
                        case 6:
                            return a = this.len < this.needed ? this.len : this.needed, this.addDistOne(a), this.len -= a, 0 == this.len && (this.state = Qb.CData), 0 < this.needed;
                        case 7:
                            return !1
                    }
                },
                __class__: pc
            };
            var Tg = function (a) {
                this.i = a
            };
            g["haxe.zip.Reader"] = Tg;
            Tg.__name__ = "haxe.zip.Reader";
            Tg.readZip = function (a) {
                return (new Tg(a)).read()
            };
            Tg.prototype = {
                readZipDate: function () {
                    var a = this.i.readUInt16(),
                        b = a >> 11 & 31,
                        c = a >> 5 & 63;
                    a &= 31;
                    var d = this.i.readUInt16();
                    return new Date((d >> 9) + 1980, (d >> 5 & 15) - 1, d & 31, b, c, a << 1)
                },
                readExtraFields: function (a) {
                    for (var b =
                        new Da; 0 < a;) {
                        if (4 > a) throw fa.thrown("Invalid extra fields data");
                        var c = this.i.readUInt16(),
                            d = this.i.readUInt16();
                        if (a < d) throw fa.thrown("Invalid extra fields data");
                        if (28789 == c) {
                            var e = this.i.readByte();
                            if (1 != e) {
                                var f = new Vi;
                                f.addByte(e);
                                f.add(this.i.read(d - 1));
                                b.add(Vf.FUnknown(c, f.getBytes()))
                            } else c = this.i.readInt32(), e = this.i.read(d - 5).toString(), b.add(Vf.FInfoZipUnicodePath(e, c))
                        } else b.add(Vf.FUnknown(c, this.i.read(d)));
                        a -= 4 + d
                    }
                    return b
                },
                readEntryHeader: function () {
                    var a = this.i,
                        b = a.readInt32();
                    if (33639248 == b || 101010256 == b) return null;
                    if (67324752 != b) throw fa.thrown("Invalid Zip Data");
                    a.readUInt16();
                    b = a.readUInt16();
                    var c = 0 != (b & 2048);
                    if (0 != (b & 63473)) throw fa.thrown("Unsupported flags " + b);
                    var d = a.readUInt16(),
                        e = 0 != d;
                    if (e && 8 != d) throw fa.thrown("Unsupported compression " + d);
                    d = this.readZipDate();
                    var f = a.readInt32(),
                        h = a.readInt32(),
                        r = a.readInt32(),
                        m = a.readInt16(),
                        g = a.readInt16();
                    a = a.readString(m);
                    g = this.readExtraFields(g);
                    c && g.push(Vf.FUtf8);
                    0 != (b & 8) && (f = null);
                    return {
                        fileName: a,
                        fileSize: r,
                        fileTime: d,
                        compressed: e,
                        dataSize: h,
                        data: null,
                        crc32: f,
                        extraFields: g
                    }
                },
                read: function () {
                    for (var a = new Da, b = null; ;) {
                        var c = this.readEntryHeader();
                        if (null == c) break;
                        if (null == c.crc32) {
                            if (c.compressed) {
                                null == b && (b = new nb(new ArrayBuffer(65536)));
                                for (var d = new Vi, e = new pc(this.i, !1, !1); ;) {
                                    var f = e.readBytes(b, 0, 65536);
                                    d.addBytes(b, 0, f);
                                    if (65536 > f) break
                                }
                                c.data = d.getBytes()
                            } else c.data = this.i.read(c.dataSize);
                            c.crc32 = this.i.readInt32();
                            134695760 == c.crc32 && (c.crc32 = this.i.readInt32());
                            c.dataSize = this.i.readInt32();
                            c.fileSize =
                                this.i.readInt32();
                            c.dataSize = c.fileSize;
                            c.compressed = !1
                        } else c.data = this.i.read(c.dataSize);
                        a.add(c)
                    }
                    return a
                },
                __class__: Tg
            };
            var T = function () {
            };
            g["js.Boot"] = T;
            T.__name__ = "js.Boot";
            T.getClass = function (a) {
                if (null == a) return null;
                if (a instanceof Array) return Array;
                var b = a.__class__;
                if (null != b) return b;
                a = T.__nativeClassName(a);
                return null != a ? T.__resolveNativeClass(a) : null
            };
            T.__string_rec = function (a, b) {
                if (null == a) return "null";
                if (5 <= b.length) return "<...>";
                var c = typeof a;
                "function" == c && (a.__name__ || a.__ename__) &&
                (c = "object");
                switch (c) {
                    case "function":
                        return "<function>";
                    case "object":
                        if (a.__enum__) {
                            var d = v[a.__enum__].__constructs__[a._hx_index];
                            c = d._hx_name;
                            if (d.__params__) {
                                b += "\t";
                                var e = [],
                                    f = 0;
                                for (d = d.__params__; f < d.length;) {
                                    var h = d[f];
                                    f += 1;
                                    e.push(T.__string_rec(a[h], b))
                                }
                                return c + "(" + e.join(",") + ")"
                            }
                            return c
                        }
                        if (a instanceof Array) {
                            c = "[";
                            b += "\t";
                            e = 0;
                            for (f = a.length; e < f;) d = e++, c += (0 < d ? "," : "") + T.__string_rec(a[d], b);
                            return c + "]"
                        }
                        try {
                            e = a.toString
                        } catch (r) {
                            return Ia.lastError = r, "???"
                        }
                        if (null != e && e != Object.toString &&
                            "function" == typeof e && (c = a.toString(), "[object Object]" != c)) return c;
                        c = "{\n";
                        b += "\t";
                        e = null != a.hasOwnProperty;
                        f = null;
                        for (f in a) e && !a.hasOwnProperty(f) || "prototype" == f || "__class__" == f || "__super__" == f || "__interfaces__" == f || "__properties__" == f || (2 != c.length && (c += ", \n"), c += b + f + " : " + T.__string_rec(a[f], b));
                        b = b.substring(1);
                        return c + ("\n" + b + "}");
                    case "string":
                        return a;
                    default:
                        return String(a)
                }
            };
            T.__interfLoop = function (a, b) {
                if (null == a) return !1;
                if (a == b) return !0;
                var c = a.__interfaces__;
                if (null != c)
                    for (var d =
                        0, e = c.length; d < e;) {
                        var f = d++;
                        f = c[f];
                        if (f == b || T.__interfLoop(f, b)) return !0
                    }
                return T.__interfLoop(a.__super__, b)
            };
            T.__instanceof = function (a, b) {
                if (null == b) return !1;
                switch (b) {
                    case Array:
                        return a instanceof Array;
                    case Vl:
                        return "boolean" == typeof a;
                    case Wl:
                        return null != a;
                    case Xl:
                        return "number" == typeof a;
                    case Nl:
                        return "number" == typeof a ? (a | 0) === a : !1;
                    case String:
                        return "string" == typeof a;
                    default:
                        if (null != a)
                            if ("function" == typeof b) {
                                if (T.__downcastCheck(a, b)) return !0
                            } else {
                                if ("object" == typeof b && T.__isNativeObj(b) &&
                                    a instanceof b) return !0
                            }
                        else return !1;
                        return b == Ol && null != a.__name__ || b == Pl && null != a.__ename__ ? !0 : null != a.__enum__ ? v[a.__enum__] == b : !1
                }
            };
            T.__downcastCheck = function (a, b) {
                return a instanceof b ? !0 : b.__isInterface__ ? T.__interfLoop(T.getClass(a), b) : !1
            };
            T.__cast = function (a, b) {
                if (null == a || T.__instanceof(a, b)) return a;
                throw fa.thrown("Cannot cast " + n.string(a) + " to " + n.string(b));
            };
            T.__nativeClassName = function (a) {
                a = T.__toStr.call(a).slice(8, -1);
                return "Object" == a || "Function" == a || "Math" == a || "JSON" == a ? null :
                    a
            };
            T.__isNativeObj = function (a) {
                return null != T.__nativeClassName(a)
            };
            T.__resolveNativeClass = function (a) {
                return F[a]
            };
            var Qe = function () {
            };
            g["js.Browser"] = Qe;
            Qe.__name__ = "js.Browser";
            Qe.__properties__ = {
                get_supported: "get_supported"
            };
            Qe.get_supported = function () {
                return "undefined" != typeof window && "undefined" != typeof window.location ? "string" == typeof window.location.protocol : !1
            };
            Qe.getLocalStorage = function () {
                try {
                    var a = window.localStorage;
                    a.getItem("");
                    if (0 == a.length) {
                        var b = "_hx_" + Math.random();
                        a.setItem(b,
                            b);
                        a.removeItem(b)
                    }
                    return a
                } catch (c) {
                    return Ia.lastError = c, null
                }
            };
            var vl = function () {
            };
            g["js.html._CanvasElement.CanvasUtil"] = vl;
            vl.__name__ = "js.html._CanvasElement.CanvasUtil";
            vl.getContextWebGL = function (a, b) {
                var c = a.getContext("webgl", b);
                if (null != c) return c;
                c = a.getContext("experimental-webgl", b);
                return null != c ? c : null
            };
            var Oj = function () {
                this.connected = !0;
                this.buttons = [];
                this.axes = []
            };
            g["lime._internal.backend.html5.GameDeviceData"] = Oj;
            Oj.__name__ = "lime._internal.backend.html5.GameDeviceData";
            Oj.prototype = {
                __class__: Oj
            };
            var Ak = function (a) {
                this.parent = a;
                this.id = -1;
                this.gain = 1;
                this.position = new zk
            };
            g["lime._internal.backend.html5.HTML5AudioSource"] = Ak;
            Ak.__name__ = "lime._internal.backend.html5.HTML5AudioSource";
            Ak.prototype = {
                dispose: function () {
                },
                init: function () {
                },
                play: function () {
                    if (!this.playing && null != this.parent.buffer && null != this.parent.buffer.__srcHowl) {
                        this.playing = !0;
                        var a = this.getCurrentTime();
                        this.completed = !1;
                        var b = this.parent.buffer.__srcHowl._volume;
                        this.parent.buffer.__srcHowl._volume = this.parent.get_gain();
                        this.id = this.parent.buffer.__srcHowl.play();
                        this.parent.buffer.__srcHowl._volume = b;
                        this.setPosition(this.parent.get_position());
                        this.parent.buffer.__srcHowl.on("end", p(this, this.howl_onEnd), this.id);
                        this.setCurrentTime(a)
                    }
                },
                stop: function () {
                    this.playing = !1;
                    null != this.parent.buffer && null != this.parent.buffer.__srcHowl && (this.parent.buffer.__srcHowl.stop(this.id), this.parent.buffer.__srcHowl.off("end", p(this, this.howl_onEnd), this.id))
                },
                howl_onEnd: function () {
                    this.playing = !1;
                    0 < this.loops ? (this.loops--,
                        this.stop(), this.play()) : (null != this.parent.buffer && null != this.parent.buffer.__srcHowl && (this.parent.buffer.__srcHowl.stop(this.id), this.parent.buffer.__srcHowl.off("end", p(this, this.howl_onEnd), this.id)), this.completed = !0, this.parent.onComplete.dispatch())
                },
                getCurrentTime: function () {
                    if (-1 == this.id) return 0;
                    if (this.completed) return this.getLength();
                    if (null != this.parent.buffer && null != this.parent.buffer.__srcHowl) {
                        var a = (1E3 * this.parent.buffer.__srcHowl.seek(this.id) | 0) - this.parent.offset;
                        return 0 >
                        a ? 0 : a
                    }
                    return 0
                },
                setCurrentTime: function (a) {
                    if (null != this.parent.buffer && null != this.parent.buffer.__srcHowl) {
                        var b = (a + this.parent.offset) / 1E3;
                        0 > b && (b = 0);
                        this.parent.buffer.__srcHowl.seek(b, this.id)
                    }
                    return a
                },
                getGain: function () {
                    return this.gain
                },
                setGain: function (a) {
                    null != this.parent.buffer && null != this.parent.buffer.__srcHowl && -1 != this.id && this.parent.buffer.__srcHowl.volume(a, this.id);
                    return this.gain = a
                },
                getLength: function () {
                    return 0 != this.length ? this.length : null != this.parent.buffer && null != this.parent.buffer.__srcHowl ?
                        1E3 * this.parent.buffer.__srcHowl.duration() | 0 : 0
                },
                setLength: function (a) {
                    return this.length = a
                },
                setLoops: function (a) {
                    return this.loops = a
                },
                getPosition: function () {
                    return this.position
                },
                setPosition: function (a) {
                    this.position.x = a.x;
                    this.position.y = a.y;
                    this.position.z = a.z;
                    this.position.w = a.w;
                    null != this.parent.buffer && null != this.parent.buffer.__srcHowl && null != this.parent.buffer.__srcHowl.pos && this.parent.buffer.__srcHowl.pos(this.position.x, this.position.y, this.position.z, this.id);
                    return this.position
                },
                __class__: Ak
            };
            var ta = function () {
                this.validStatus0 = (new ra("Tizen", "gi")).match(window.navigator.userAgent)
            };
            g["lime._internal.backend.html5.HTML5HTTPRequest"] = ta;
            ta.__name__ = "lime._internal.backend.html5.HTML5HTTPRequest";
            ta.loadImage = function (a) {
                var b = new Kc;
                ta.activeRequests < ta.requestLimit ? (ta.activeRequests++, ta.__loadImage(a, b, 0)) : ta.requestQueue.add({
                    instance: null,
                    uri: a,
                    promise: b,
                    type: "IMAGE",
                    options: 0
                });
                return b.future
            };
            ta.loadImageFromBytes = function (a, b) {
                var c = URL.createObjectURL(new Blob([a.b.bufferValue], {
                    type: b
                }));
                return null != c ? (a = new Kc, ta.activeRequests < ta.requestLimit ? (ta.activeRequests++, ta.__loadImage(c, a, 1)) : ta.requestQueue.add({
                    instance: null,
                    uri: c,
                    promise: a,
                    type: "IMAGE",
                    options: 1
                }), a.future) : ta.loadImage("data:" + b + ";base64," + $d.encode(a))
            };
            ta.processQueue = function () {
                if (ta.activeRequests < ta.requestLimit && 0 < ta.requestQueue.length) {
                    ta.activeRequests++;
                    var a = ta.requestQueue.pop();
                    switch (a.type) {
                        case "BINARY":
                            a.instance.__loadData(a.uri, a.promise);
                            break;
                        case "IMAGE":
                            ta.__loadImage(a.uri, a.promise,
                                a.options);
                            break;
                        case "TEXT":
                            a.instance.__loadText(a.uri, a.promise);
                            break;
                        default:
                            ta.activeRequests--
                    }
                }
            };
            ta.__fixHostname = function (a) {
                return null == a ? "" : a
            };
            ta.__fixPort = function (a, b) {
                if (null == a || "" == a) switch (b) {
                    case "ftp:":
                        return "21";
                    case "gopher:":
                        return "70";
                    case "http:":
                        return "80";
                    case "https:":
                        return "443";
                    case "ws:":
                        return "80";
                    case "wss:":
                        return "443";
                    default:
                        return ""
                }
                return a
            };
            ta.__fixProtocol = function (a) {
                return null == a || "" == a ? "http:" : a
            };
            ta.__isInMemoryURI = function (a) {
                return R.startsWith(a, "data:") ?
                    !0 : R.startsWith(a, "blob:")
            };
            ta.__isSameOrigin = function (a) {
                if (null == a || "" == a || ta.__isInMemoryURI(a)) return !0;
                null == ta.originElement && (ta.originElement = window.document.createElement("a"), ta.originHostname = ta.__fixHostname(F.location.hostname), ta.originProtocol = ta.__fixProtocol(F.location.protocol), ta.originPort = ta.__fixPort(F.location.port, ta.originProtocol));
                var b = ta.originElement;
                b.href = a;
                "" == b.hostname && (b.href = b.href);
                var c = ta.__fixHostname(b.hostname);
                a = ta.__fixProtocol(b.protocol);
                b = ta.__fixPort(b.port,
                    a);
                c = "" == c || c == ta.originHostname;
                b = "" == b || b == ta.originPort;
                return "file:" != a && c ? b : !1
            };
            ta.__loadImage = function (a, b, c) {
                var d = new window.Image;
                ta.__isSameOrigin(a) || (d.crossOrigin = "Anonymous");
                null == ta.supportsImageProgress && (ta.supportsImageProgress = "onprogress" in d);
                if (ta.supportsImageProgress || ta.__isInMemoryURI(a)) d.addEventListener("load", function (e) {
                    ta.__revokeBlobURI(a, c);
                    e = new ae(null, d.width, d.height);
                    e.__srcImage = d;
                    ta.activeRequests--;
                    ta.processQueue();
                    b.complete(new qb(e))
                }, !1), d.addEventListener("progress",
                    function (a) {
                        b.progress(a.loaded, a.total)
                    }, !1), d.addEventListener("error", function (d) {
                    ta.__revokeBlobURI(a, c);
                    ta.activeRequests--;
                    ta.processQueue();
                    b.error(new Wf(d.detail, null))
                }, !1), d.src = a;
                else {
                    var e = new XMLHttpRequest;
                    e.onload = function (a) {
                        ta.activeRequests--;
                        ta.processQueue();
                        (new qb).__fromBytes(nb.ofData(e.response), function (a) {
                            b.complete(a)
                        })
                    };
                    e.onerror = function (a) {
                        b.error(new Wf(a.message, null))
                    };
                    e.onprogress = function (a) {
                        a.lengthComputable && b.progress(a.loaded, a.total)
                    };
                    e.open("GET", a, !0);
                    e.responseType = "arraybuffer";
                    e.overrideMimeType("text/plain; charset=x-user-defined");
                    e.send(null)
                }
            };
            ta.__revokeBlobURI = function (a, b) {
                0 != (b & 1) && URL.revokeObjectURL(a)
            };
            ta.prototype = {
                init: function (a) {
                    this.parent = a
                },
                load: function (a, b, c) {
                    this.request = new XMLHttpRequest;
                    "POST" == this.parent.method ? this.request.upload.addEventListener("progress", b, !1) : this.request.addEventListener("progress", b, !1);
                    this.request.onreadystatechange = c;
                    b = "";
                    if (null == this.parent.data) {
                        c = Object.keys(this.parent.formData.h);
                        for (var d =
                            c.length, e = 0; e < d;) {
                            var f = c[e++];
                            0 < b.length && (b += "&");
                            var h = this.parent.formData.h[f];
                            if (-1 < f.indexOf("[]") && h instanceof Array) {
                                var r = [];
                                for (h = G(h); h.hasNext();) {
                                    var m = h.next();
                                    r.push(encodeURIComponent(m))
                                }
                                r = r.join("&amp;" + f + "=");
                                b += encodeURIComponent(f) + "=" + r
                            } else r = encodeURIComponent(f) + "=", f = n.string(h), b += r + encodeURIComponent(f)
                        }
                        "GET" == this.parent.method && "" != b && (a = -1 < a.indexOf("?") ? a + ("&" + b) : a + ("?" + b), b = "")
                    }
                    this.request.open(n.string(this.parent.method), a, !0);
                    0 < this.parent.timeout && (this.request.timeout =
                        this.parent.timeout);
                    this.binary && (this.request.responseType = "arraybuffer");
                    a = null;
                    r = 0;
                    for (c = this.parent.headers; r < c.length;) d = c[r], ++r, "Content-Type" == d.name ? a = d.value : this.request.setRequestHeader(d.name, d.value);
                    null != this.parent.contentType && (a = this.parent.contentType);
                    null == a && (null != this.parent.data ? a = "application/octet-stream" : "" != b && (a = "application/x-www-form-urlencoded"));
                    null != a && this.request.setRequestHeader("Content-Type", a);
                    this.parent.withCredentials && (this.request.withCredentials = !0);
                    null != this.parent.data ? this.request.send(this.parent.data.b.bufferValue) : this.request.send(b)
                },
                loadData: function (a) {
                    var b = new Kc;
                    ta.activeRequests < ta.requestLimit ? (ta.activeRequests++, this.__loadData(a, b)) : ta.requestQueue.add({
                        instance: this,
                        uri: a,
                        promise: b,
                        type: "BINARY",
                        options: 0
                    });
                    return b.future
                },
                loadText: function (a) {
                    var b = new Kc;
                    ta.activeRequests < ta.requestLimit ? (ta.activeRequests++, this.__loadText(a, b)) : ta.requestQueue.add({
                        instance: this,
                        uri: a,
                        promise: b,
                        type: "TEXT",
                        options: 0
                    });
                    return b.future
                },
                processResponse: function () {
                    if (this.parent.enableResponseHeaders) {
                        this.parent.responseHeaders = [];
                        for (var a, b, c = 0, d = this.request.getAllResponseHeaders().split("\n"); c < d.length;) b = d[c], ++c, a = R.trim(ja.substr(b, 0, b.indexOf(":"))), b = R.trim(ja.substr(b, b.indexOf(":") + 1, null)), "" != a && this.parent.responseHeaders.push(new Yi(a, b))
                    }
                    this.parent.responseStatus = this.request.status
                },
                __loadData: function (a, b) {
                    var c = this;
                    this.binary = !0;
                    this.load(a, function (a) {
                        b.progress(a.loaded, a.total)
                    }, function (a) {
                        4 == c.request.readyState &&
                        (a = null, "" == c.request.responseType ? null != c.request.responseText && (a = nb.ofString(c.request.responseText)) : null != c.request.response && (a = nb.ofData(c.request.response)), null != c.request.status && (200 <= c.request.status && 400 > c.request.status || c.validStatus0 && 0 == c.request.status) ? (c.processResponse(), b.complete(a)) : (c.processResponse(), b.error(new Wf(c.request.status, a))), c.request = null, ta.activeRequests--, ta.processQueue())
                    })
                },
                __loadText: function (a, b) {
                    var c = this;
                    this.binary = !1;
                    this.load(a, function (a) {
                        b.progress(a.loaded,
                            a.total)
                    }, function (a) {
                        4 == c.request.readyState && (null != c.request.status && (200 <= c.request.status && 400 > c.request.status || c.validStatus0 && 0 == c.request.status) ? (c.processResponse(), b.complete(c.request.responseText)) : (c.processResponse(), b.error(new Wf(c.request.status, c.request.responseText))), c.request = null, ta.activeRequests--, ta.processQueue())
                    })
                },
                __class__: ta
            };
            var Aa = function (a) {
                this.imeCompositionActive = !1;
                this.unusedTouchesPool = new Da;
                this.scale = 1;
                this.currentTouches = new Db;
                this.parent = a;
                this.cursor =
                    zb.DEFAULT;
                this.cacheMouseY = this.cacheMouseX = 0;
                var b = a.__attributes;
                Object.prototype.hasOwnProperty.call(b, "context") || (b.context = {});
                this.renderType = b.context.type;
                Object.prototype.hasOwnProperty.call(b, "element") && (a.element = b.element);
                var c = a.element;
                Object.prototype.hasOwnProperty.call(b, "allowHighDPI") && b.allowHighDPI && "dom" != this.renderType && (this.scale = window.devicePixelRatio);
                a.__scale = this.scale;
                this.setWidth = Object.prototype.hasOwnProperty.call(b, "width") ? b.width : 0;
                this.setHeight = Object.prototype.hasOwnProperty.call(b,
                    "height") ? b.height : 0;
                a.__width = this.setWidth;
                a.__height = this.setHeight;
                a.id = Aa.windowID++;
                c instanceof HTMLCanvasElement ? this.canvas = c : "dom" == this.renderType ? this.div = window.document.createElement("div") : this.canvas = window.document.createElement("canvas");
                if (null != this.canvas) {
                    var d = this.canvas.style;
                    d.setProperty("-webkit-transform", "translateZ(0)", null);
                    d.setProperty("transform", "translateZ(0)", null)
                } else null != this.div && (d = this.div.style, d.setProperty("-webkit-transform", "translate3D(0,0,0)", null),
                    d.setProperty("transform", "translate3D(0,0,0)", null), d.position = "relative", d.overflow = "hidden", d.setProperty("-webkit-user-select", "none", null), d.setProperty("-moz-user-select", "none", null), d.setProperty("-ms-user-select", "none", null), d.setProperty("-o-user-select", "none", null));
                0 == a.__width && 0 == a.__height && (null != c ? (a.__width = c.clientWidth, a.__height = c.clientHeight) : (a.__width = window.innerWidth, a.__height = window.innerHeight), this.cacheElementWidth = a.__width, this.cacheElementHeight = a.__height, this.resizeElement = !0);
                null != this.canvas ? (this.canvas.width = Math.round(a.__width * this.scale), this.canvas.height = Math.round(a.__height * this.scale), this.canvas.style.width = a.__width + "px", this.canvas.style.height = a.__height + "px") : (this.div.style.width = a.__width + "px", this.div.style.height = a.__height + "px");
                if (Object.prototype.hasOwnProperty.call(b, "resizable") && b.resizable || !Object.prototype.hasOwnProperty.call(b, "width") && 0 == this.setWidth && 0 == this.setHeight) a.__resizable = !0;
                this.updateSize();
                if (null != c) {
                    null != this.canvas ?
                        c != this.canvas && c.appendChild(this.canvas) : c.appendChild(this.div);
                    b = "mousedown mouseenter mouseleave mousemove mouseup wheel".split(" ");
                    for (d = 0; d < b.length;) {
                        var e = b[d];
                        ++d;
                        c.addEventListener(e, p(this, this.handleMouseEvent), !0)
                    }
                    c.addEventListener("contextmenu", p(this, this.handleContextMenuEvent), !0);
                    c.addEventListener("dragstart", p(this, this.handleDragEvent), !0);
                    c.addEventListener("dragover", p(this, this.handleDragEvent), !0);
                    c.addEventListener("drop", p(this, this.handleDragEvent), !0);
                    c.addEventListener("touchstart",
                        p(this, this.handleTouchEvent), !0);
                    c.addEventListener("touchmove", p(this, this.handleTouchEvent), !0);
                    c.addEventListener("touchend", p(this, this.handleTouchEvent), !0);
                    c.addEventListener("touchcancel", p(this, this.handleTouchEvent), !0);
                    c.addEventListener("gamepadconnected", p(this, this.handleGamepadEvent), !0);
                    c.addEventListener("gamepaddisconnected", p(this, this.handleGamepadEvent), !0)
                }
                this.createContext();
                "webgl" == a.context.type && (this.canvas.addEventListener("webglcontextlost", p(this, this.handleContextEvent),
                    !1), this.canvas.addEventListener("webglcontextrestored", p(this, this.handleContextEvent), !1))
            };
            g["lime._internal.backend.html5.HTML5Window"] = Aa;
            Aa.__name__ = "lime._internal.backend.html5.HTML5Window";
            Aa.prototype = {
                close: function () {
                    var a = this.parent.element;
                    if (null != a) {
                        null != this.canvas ? (a != this.canvas && a.removeChild(this.canvas), this.canvas = null) : null != this.div && (a.removeChild(this.div), this.div = null);
                        for (var b = "mousedown mouseenter mouseleave mousemove mouseup wheel".split(" "), c = 0; c < b.length;) {
                            var d =
                                b[c];
                            ++c;
                            a.removeEventListener(d, p(this, this.handleMouseEvent), !0)
                        }
                        a.removeEventListener("contextmenu", p(this, this.handleContextMenuEvent), !0);
                        a.removeEventListener("dragstart", p(this, this.handleDragEvent), !0);
                        a.removeEventListener("dragover", p(this, this.handleDragEvent), !0);
                        a.removeEventListener("drop", p(this, this.handleDragEvent), !0);
                        a.removeEventListener("touchstart", p(this, this.handleTouchEvent), !0);
                        a.removeEventListener("touchmove", p(this, this.handleTouchEvent), !0);
                        a.removeEventListener("touchend",
                            p(this, this.handleTouchEvent), !0);
                        a.removeEventListener("touchcancel", p(this, this.handleTouchEvent), !0);
                        a.removeEventListener("gamepadconnected", p(this, this.handleGamepadEvent), !0);
                        a.removeEventListener("gamepaddisconnected", p(this, this.handleGamepadEvent), !0)
                    }
                    this.parent.application.__removeWindow(this.parent)
                },
                createContext: function () {
                    var a = new Bk,
                        b = this.parent.__attributes.context;
                    a.window = this.parent;
                    a.attributes = b;
                    if (null != this.div) a.dom = this.div, a.type = "dom", a.version = "";
                    else if (null != this.canvas) {
                        var c =
                                null,
                            d = "canvas" == this.renderType,
                            e = "opengl" == this.renderType || "opengles" == this.renderType || "webgl" == this.renderType,
                            f = !Object.prototype.hasOwnProperty.call(b, "version") || "1" != b.version,
                            h = !1;
                        if (e || !d && (!Object.prototype.hasOwnProperty.call(b, "hardware") || b.hardware)) {
                            d = Object.prototype.hasOwnProperty.call(b, "background") && null == b.background;
                            e = Object.prototype.hasOwnProperty.call(b, "colorDepth") ? b.colorDepth : 16;
                            var r = Object.prototype.hasOwnProperty.call(b, "antialiasing") && 0 < b.antialiasing,
                                m = Object.prototype.hasOwnProperty.call(b,
                                    "depth") ? b.depth : !0;
                            b = Object.prototype.hasOwnProperty.call(b, "stencil") && b.stencil;
                            b = {
                                alpha: d || 16 < e,
                                antialias: r,
                                depth: m,
                                premultipliedAlpha: !0,
                                stencil: b,
                                preserveDrawingBuffer: !1,
                                failIfMajorPerformanceCaveat: !1
                            };
                            d = ["webgl", "experimental-webgl"];
                            f && d.unshift("webgl2");
                            for (f = 0; f < d.length && (e = d[f], ++f, c = this.canvas.getContext(e, b), null != c && "webgl2" == e && (h = !0), null == c);) ;
                        }
                        null == c ? (a.canvas2D = this.canvas.getContext("2d"), a.type = "canvas", a.version = "") : (a.webgl = Gb.fromWebGL2RenderContext(c), h && (a.webgl2 = c),
                        null == te.context && (te.context = c, te.type = "webgl", te.version = h ? 2 : 1), a.type = "webgl", a.version = h ? "2" : "1")
                    }
                    this.parent.context = a
                },
                focusTextInput: function () {
                    var a = this;
                    this.__focusPending || (this.__focusPending = !0, se.delay(function () {
                        a.__focusPending = !1;
                        a.textInputEnabled && Aa.textInput.focus()
                    }, 20))
                },
                getFrameRate: function () {
                    return null == this.parent.application ? 0 : 0 > this.parent.application.__backend.framePeriod ? 60 : 1E3 == this.parent.application.__backend.framePeriod ? 0 : 1E3 / this.parent.application.__backend.framePeriod
                },
                handleContextEvent: function (a) {
                    switch (a.type) {
                        case "webglcontextlost":
                            a.cancelable && a.preventDefault();
                            this.parent.context = null;
                            this.parent.onRenderContextLost.dispatch();
                            break;
                        case "webglcontextrestored":
                            this.createContext(), this.parent.onRenderContextRestored.dispatch(this.parent.context)
                    }
                },
                handleContextMenuEvent: function (a) {
                    (this.parent.onMouseUp.canceled || this.parent.onMouseDown.canceled) && a.cancelable && a.preventDefault()
                },
                handleCutOrCopyEvent: function (a) {
                    var b = Vb.get_text();
                    null == b && (b = "");
                    a.clipboardData.setData("text/plain",
                        b);
                    a.cancelable && a.preventDefault()
                },
                handleDragEvent: function (a) {
                    switch (a.type) {
                        case "dragover":
                            return a.preventDefault(), !1;
                        case "dragstart":
                            if ("img" == T.__cast(a.target, HTMLElement).nodeName.toLowerCase() && a.cancelable) return a.preventDefault(), !1;
                            break;
                        case "drop":
                            if (null != a.dataTransfer && 0 < a.dataTransfer.files.length) return this.parent.onDropFile.dispatch(a.dataTransfer.files), a.preventDefault(), !1
                    }
                    return !0
                },
                handleFocusEvent: function (a) {
                    this.textInputEnabled && (null == a.relatedTarget || this.isDescendent(a.relatedTarget)) &&
                    this.focusTextInput()
                },
                handleFullscreenEvent: function (a) {
                    if (null != (document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement)) this.isFullscreen = !0, this.parent.__fullscreen = !0, this.requestedFullscreen && (this.requestedFullscreen = !1, this.parent.onFullscreen.dispatch());
                    else {
                        this.isFullscreen = !1;
                        this.parent.__fullscreen = !1;
                        this.parent.onRestore.dispatch();
                        a = ["fullscreenchange", "mozfullscreenchange", "webkitfullscreenchange", "MSFullscreenChange"];
                        for (var b = ["fullscreenerror", "mozfullscreenerror", "webkitfullscreenerror", "MSFullscreenError"], c = 0, d = a.length; c < d;) {
                            var e = c++;
                            window.document.removeEventListener(a[e], p(this, this.handleFullscreenEvent), !1);
                            window.document.removeEventListener(b[e], p(this, this.handleFullscreenEvent), !1)
                        }
                    }
                },
                handleGamepadEvent: function (a) {
                    switch (a.type) {
                        case "gamepadconnected":
                            Hb.__connect(a.gamepad.index);
                            "standard" == a.gamepad.mapping && Mb.__connect(a.gamepad.index);
                            break;
                        case "gamepaddisconnected":
                            Hb.__disconnect(a.gamepad.index), Mb.__disconnect(a.gamepad.index)
                    }
                },
                handleInputEvent: function (a) {
                    this.imeCompositionActive || Aa.textInput.value == Aa.dummyCharacter || (a = R.replace(Aa.textInput.value, Aa.dummyCharacter, ""), 0 < a.length && this.parent.onTextInput.dispatch(a), Aa.textInput.value =
                        Aa.dummyCharacter)
                },
                handleMouseEvent: function (a) {
                    if ("wheel" != a.type) {
                        if (null != this.parent.element)
                            if (null != this.canvas) {
                                var b = this.canvas.getBoundingClientRect();
                                var c = this.parent.__width / b.width * (a.clientX - b.left);
                                b = this.parent.__height / b.height * (a.clientY - b.top)
                            } else null != this.div ? (b = this.div.getBoundingClientRect(), c = a.clientX - b.left, b = a.clientY - b.top) : (b = this.parent.element.getBoundingClientRect(), c = this.parent.__width / b.width * (a.clientX - b.left), b = this.parent.__height / b.height * (a.clientY - b.top));
                        else c = a.clientX, b = a.clientY;
                        switch (a.type) {
                            case "mousedown":
                                a.currentTarget == this.parent.element && window.addEventListener("mouseup", p(this, this.handleMouseEvent));
                                this.parent.clickCount = a.detail;
                                this.parent.onMouseDown.dispatch(c, b, a.button);
                                this.parent.clickCount = 0;
                                this.parent.onMouseDown.canceled && a.cancelable && a.preventDefault();
                                break;
                            case "mouseenter":
                                a.target == this.parent.element && (this.parent.onEnter.dispatch(), this.parent.onEnter.canceled && a.cancelable && a.preventDefault());
                                break;
                            case "mouseleave":
                                a.target ==
                                this.parent.element && (this.parent.onLeave.dispatch(), this.parent.onLeave.canceled && a.cancelable && a.preventDefault());
                                break;
                            case "mousemove":
                                if (c != this.cacheMouseX || b != this.cacheMouseY) this.parent.onMouseMove.dispatch(c, b), this.parent.onMouseMoveRelative.dispatch(c - this.cacheMouseX, b - this.cacheMouseY), (this.parent.onMouseMove.canceled || this.parent.onMouseMoveRelative.canceled) && a.cancelable && a.preventDefault();
                                break;
                            case "mouseup":
                                window.removeEventListener("mouseup", p(this, this.handleMouseEvent)),
                                a.currentTarget == this.parent.element && a.stopPropagation(), this.parent.clickCount = a.detail, this.parent.onMouseUp.dispatch(c, b, a.button), this.parent.clickCount = 0, this.parent.onMouseUp.canceled && a.cancelable && a.preventDefault()
                        }
                        this.cacheMouseX = c;
                        this.cacheMouseY = b
                    } else {
                        switch (a.deltaMode) {
                            case 0:
                                c = Re.PIXELS;
                                break;
                            case 1:
                                c = Re.LINES;
                                break;
                            case 2:
                                c = Re.PAGES;
                                break;
                            default:
                                c = Re.UNKNOWN
                        }
                        this.parent.onMouseWheel.dispatch(a.deltaX, -a.deltaY, c);
                        this.parent.onMouseWheel.canceled && a.cancelable && a.preventDefault()
                    }
                },
                handlePasteEvent: function (a) {
                    if (-1 < a.clipboardData.types.indexOf("text/plain")) {
                        var b = a.clipboardData.getData("text/plain");
                        Vb.set_text(b);
                        this.textInputEnabled && this.parent.onTextInput.dispatch(b);
                        a.cancelable && a.preventDefault()
                    }
                },
                handleResizeEvent: function (a) {
                    this.primaryTouch = null;
                    this.updateSize()
                },
                handleTouchEvent: function (a) {
                    a.cancelable && a.preventDefault();
                    var b = null;
                    null != this.parent.element && (b = null != this.canvas ? this.canvas.getBoundingClientRect() : null != this.div ? this.div.getBoundingClientRect() :
                        this.parent.element.getBoundingClientRect());
                    var c = this.setWidth,
                        d = this.setHeight;
                    if (0 == c || 0 == d) null != b ? (c = b.width, d = b.height) : d = c = 1;
                    for (var e, f, h, r, m, g = 0, q = a.changedTouches; g < q.length;) {
                        var k = q[g];
                        ++g;
                        null != b ? (f = c / b.width * (k.clientX - b.left), h = d / b.height * (k.clientY - b.top)) : (f = k.clientX, h = k.clientY);
                        if ("touchstart" == a.type) e = this.unusedTouchesPool.pop(), null == e ? e = new Ab(f / c, h / d, k.identifier, 0, 0, k.force, this.parent.id) : (e.x = f / c, e.y = h / d, e.id = k.identifier, e.dx = 0, e.dy = 0, e.pressure = k.force, e.device = this.parent.id),
                            this.currentTouches.h[k.identifier] = e, Ab.onStart.dispatch(e), null == this.primaryTouch && (this.primaryTouch = e), e == this.primaryTouch && this.parent.onMouseDown.dispatch(f, h, 0);
                        else if (e = this.currentTouches.h[k.identifier], null != e) switch (r = e.x, m = e.y, e.x = f / c, e.y = h / d, e.dx = e.x - r, e.dy = e.y - m, e.pressure = k.force, a.type) {
                            case "touchcancel":
                                Ab.onCancel.dispatch(e);
                                this.currentTouches.remove(k.identifier);
                                this.unusedTouchesPool.add(e);
                                e == this.primaryTouch && (this.primaryTouch = null);
                                break;
                            case "touchend":
                                Ab.onEnd.dispatch(e);
                                this.currentTouches.remove(k.identifier);
                                this.unusedTouchesPool.add(e);
                                e == this.primaryTouch && (this.parent.onMouseUp.dispatch(f, h, 0), this.primaryTouch = null);
                                break;
                            case "touchmove":
                                Ab.onMove.dispatch(e), e == this.primaryTouch && this.parent.onMouseMove.dispatch(f, h)
                        }
                    }
                },
                isDescendent: function (a) {
                    if (a == this.parent.element) return !0;
                    for (; null != a;) {
                        if (a.parentNode == this.parent.element) return !0;
                        a = a.parentNode
                    }
                    return !1
                },
                readPixels: function (a) {
                    if (null != this.canvas) {
                        var b = new Mc(0, 0, this.canvas.width, this.canvas.height);
                        null == a ? a = b : a.intersection(b, a);
                        if (0 < a.width && 0 < a.height) return b = window.document.createElement("canvas"), b.width = a.width | 0, b.height = a.height | 0, b.getContext("2d").drawImage(this.canvas, -a.x, -a.y), qb.fromCanvas(b)
                    }
                    return null
                },
                setClipboard: function (a) {
                    null == Aa.textArea && (Aa.textArea = window.document.createElement("textarea"), Aa.textArea.style.height = "0px", Aa.textArea.style.left = "-100px", Aa.textArea.style.opacity = "0", Aa.textArea.style.position = "fixed", Aa.textArea.style.top = "-100px", Aa.textArea.style.width =
                        "0px", window.document.body.appendChild(Aa.textArea));
                    Aa.textArea.value = a;
                    Aa.textArea.focus();
                    Aa.textArea.select();
                    window.document.queryCommandEnabled("copy") && window.document.execCommand("copy");
                    this.textInputEnabled && this.focusTextInput()
                },
                setCursor: function (a) {
                    if (this.cursor != a) {
                        if (null == a) this.parent.element.style.cursor = "none";
                        else {
                            switch (a._hx_index) {
                                case 0:
                                    var b = "default";
                                    break;
                                case 1:
                                    b = "crosshair";
                                    break;
                                case 3:
                                    b = "move";
                                    break;
                                case 4:
                                    b = "pointer";
                                    break;
                                case 5:
                                    b = "nesw-resize";
                                    break;
                                case 6:
                                    b = "ns-resize";
                                    break;
                                case 7:
                                    b = "nwse-resize";
                                    break;
                                case 8:
                                    b = "ew-resize";
                                    break;
                                case 9:
                                    b = "text";
                                    break;
                                case 10:
                                    b = "wait";
                                    break;
                                case 11:
                                    b = "wait";
                                    break;
                                default:
                                    b = "auto"
                            }
                            this.parent.element.style.cursor = b
                        }
                        this.cursor = a
                    }
                    return this.cursor
                },
                setFullscreen: function (a) {
                    var b;
                    a ? this.requestedFullscreen || this.isFullscreen || (this.requestedFullscreen = !0, (b = this.parent.element, p(b, b.requestFullscreen)) ? (document.addEventListener("fullscreenchange", p(this, this.handleFullscreenEvent), !1), document.addEventListener("fullscreenerror", p(this, this.handleFullscreenEvent), !1), this.parent.element.requestFullscreen()) : this.parent.element.mozRequestFullScreen ? (document.addEventListener("mozfullscreenchange", p(this, this.handleFullscreenEvent), !1), document.addEventListener("mozfullscreenerror", p(this, this.handleFullscreenEvent), !1), this.parent.element.mozRequestFullScreen()) : this.parent.element.webkitRequestFullscreen ? (document.addEventListener("webkitfullscreenchange", p(this, this.handleFullscreenEvent), !1), document.addEventListener("webkitfullscreenerror", p(this, this.handleFullscreenEvent), !1), this.parent.element.webkitRequestFullscreen()) : this.parent.element.msRequestFullscreen && (document.addEventListener("MSFullscreenChange", p(this, this.handleFullscreenEvent), !1), document.addEventListener("MSFullscreenError", p(this, this.handleFullscreenEvent), !1), this.parent.element.msRequestFullscreen())) : this.isFullscreen && (this.requestedFullscreen = !1, document.exitFullscreen ? document.exitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitExitFullscreen ? document.webkitExitFullscreen() : document.msExitFullscreen && document.msExitFullscreen());
                    return a
                },
                setMouseLock: function (a) {
                },
                setTextInputEnabled: function (a) {
                    if (a) {
                        if (null == Aa.textInput) {
                            Aa.textInput = window.document.createElement("input");
                            var b = 0 <= F.navigator.userAgent.indexOf("Android") ? "password" : "text";
                            Aa.textInput.type = b;
                            Aa.textInput.style.position = "absolute";
                            Aa.textInput.style.opacity =
                                "0";
                            Aa.textInput.style.color = "transparent";
                            Aa.textInput.value = Aa.dummyCharacter;
                            Aa.textInput.autocapitalize = "off";
                            Aa.textInput.autocorrect = "off";
                            Aa.textInput.autocomplete = "off";
                            Aa.textInput.style.left = "0px";
                            Aa.textInput.style.top = "50%";
                            (new ra("(iPad|iPhone|iPod).*OS 8_", "gi")).match(window.navigator.userAgent) ? (Aa.textInput.style.fontSize = "0px", Aa.textInput.style.width = "0px", Aa.textInput.style.height = "0px") : (Aa.textInput.style.width = "1px", Aa.textInput.style.height = "1px");
                            Aa.textInput.style.pointerEvents =
                                "none";
                            Aa.textInput.style.zIndex = "-10000000"
                        }
                        null == Aa.textInput.parentNode && this.parent.element.appendChild(Aa.textInput);
                        this.textInputEnabled || (Aa.textInput.addEventListener("input", p(this, this.handleInputEvent), !0), Aa.textInput.addEventListener("blur", p(this, this.handleFocusEvent), !0), Aa.textInput.addEventListener("cut", p(this, this.handleCutOrCopyEvent), !0), Aa.textInput.addEventListener("copy", p(this, this.handleCutOrCopyEvent), !0), Aa.textInput.addEventListener("paste", p(this, this.handlePasteEvent),
                            !0), Aa.textInput.addEventListener("compositionstart", p(this, this.handleCompositionstartEvent), !0), Aa.textInput.addEventListener("compositionend", p(this, this.handleCompositionendEvent), !0));
                        Aa.textInput.focus();
                        Aa.textInput.select()
                    } else null != Aa.textInput && (Aa.textInput.blur(), Aa.textInput.removeEventListener("input", p(this, this.handleInputEvent), !0), Aa.textInput.removeEventListener("blur", p(this, this.handleFocusEvent), !0), Aa.textInput.removeEventListener("cut", p(this, this.handleCutOrCopyEvent), !0),
                        Aa.textInput.removeEventListener("copy", p(this, this.handleCutOrCopyEvent), !0), Aa.textInput.removeEventListener("paste", p(this, this.handlePasteEvent), !0), Aa.textInput.removeEventListener("compositionstart", p(this, this.handleCompositionstartEvent), !0), Aa.textInput.removeEventListener("compositionend", p(this, this.handleCompositionendEvent), !0));
                    return this.textInputEnabled = a
                },
                setTextInputRect: function (a) {
                    return this.textInputRect = a
                },
                handleCompositionstartEvent: function (a) {
                    this.imeCompositionActive = !0
                },
                handleCompositionendEvent: function (a) {
                    this.imeCompositionActive = !1;
                    this.handleInputEvent(a)
                },
                updateSize: function () {
                    if (this.parent.__resizable) {
                        if (null != this.parent.element) {
                            var a = this.parent.element.clientWidth;
                            var b = this.parent.element.clientHeight
                        } else a = window.innerWidth, b = window.innerHeight;
                        if (a != this.cacheElementWidth || b != this.cacheElementHeight) {
                            this.cacheElementWidth = a;
                            this.cacheElementHeight = b;
                            var c = this.resizeElement || 0 == this.setWidth && 0 == this.setHeight;
                            if (null != this.parent.element && (null ==
                                this.div || null != this.div && c))
                                if (c) {
                                    if (this.parent.__width != a || this.parent.__height != b) this.parent.__width = a, this.parent.__height = b, null != this.canvas ? this.parent.element != this.canvas && (this.canvas.width = Math.round(a * this.scale), this.canvas.height = Math.round(b * this.scale), this.canvas.style.width = a + "px", this.canvas.style.height = b + "px") : (this.div.style.width = a + "px", this.div.style.height = b + "px"), this.parent.onResize.dispatch(a, b)
                                } else {
                                    c = 0 != this.setWidth ? a / this.setWidth : 1;
                                    var d = 0 != this.setHeight ? b / this.setHeight :
                                            1,
                                        e = a,
                                        f = b,
                                        h = 0,
                                        r = 0;
                                    c < d ? (f = Math.floor(this.setHeight * c), r = Math.floor((b - f) / 2)) : (e = Math.floor(this.setWidth * d), h = Math.floor((a - e) / 2));
                                    null != this.canvas ? this.parent.element != this.canvas && (this.canvas.style.width = e + "px", this.canvas.style.height = f + "px", this.canvas.style.marginLeft = h + "px", this.canvas.style.marginTop = r + "px") : (this.div.style.width = e + "px", this.div.style.height = f + "px", this.div.style.marginLeft = h + "px", this.div.style.marginTop = r + "px")
                                }
                        }
                    }
                },
                __class__: Aa
            };
            var $d = function () {
            };
            g["lime._internal.format.Base64"] =
                $d;
            $d.__name__ = "lime._internal.format.Base64";
            $d.encode = function (a) {
                var b = [],
                    c = $d.DICTIONARY,
                    d = $d.EXTENDED_DICTIONARY,
                    e = a.length,
                    f = Math.floor(e / 3),
                    h = 2 * f;
                b.length = 2 * Math.ceil(e / 3);
                for (var r = 0, m = 0, g; m < h;) g = a.b[r] << 16 | a.b[r + 1] << 8 | a.b[r + 2], b[m] = d[g >> 12 & 4095], b[m + 1] = d[g & 4095], r += 3, m += 2;
                switch (e - 3 * f) {
                    case 1:
                        g = a.b[r] << 16;
                        b[m] = d[g >> 12 & 4095];
                        b[m + 1] = "==";
                        break;
                    case 2:
                        g = a.b[r] << 16 | a.b[r + 1] << 8, b[m] = d[g >> 12 & 4095], b[m + 1] = c[g >> 6 & 63] + "="
                }
                return b.join("")
            };
            var wl = function () {
            };
            g["lime._internal.format.Deflate"] = wl;
            wl.__name__ = "lime._internal.format.Deflate";
            wl.decompress = function (a) {
                a = pako.inflateRaw(a.b.bufferValue);
                return nb.ofData(a)
            };
            var xl = function () {
            };
            g["lime._internal.format.GZip"] = xl;
            xl.__name__ = "lime._internal.format.GZip";
            xl.decompress = function (a) {
                a = pako.ungzip(a.b.bufferValue);
                return nb.ofData(a)
            };
            var yl = function () {
            };
            g["lime._internal.format.LZMA"] = yl;
            yl.__name__ = "lime._internal.format.LZMA";
            yl.decompress = function (a) {
                return null
            };
            var zl = function () {
            };
            g["lime._internal.format.Zlib"] = zl;
            zl.__name__ =
                "lime._internal.format.Zlib";
            zl.decompress = function (a) {
                a = pako.inflate(a.b.bufferValue);
                return nb.ofData(a)
            };
            var Ba = function () {
            };
            g["lime._internal.graphics.ImageCanvasUtil"] = Ba;
            Ba.__name__ = "lime._internal.graphics.ImageCanvasUtil";
            Ba.colorTransform = function (a, b, c) {
                Ba.convertToData(a);
                Rb.colorTransform(a, b, c)
            };
            Ba.convertToCanvas = function (a, b) {
                null == b && (b = !1);
                var c = a.buffer;
                null != c.__srcImage ? (null == c.__srcCanvas && (Ba.createCanvas(a, c.__srcImage.width, c.__srcImage.height), c.__srcContext.drawImage(c.__srcImage,
                    0, 0)), c.__srcImage = null) : null == c.__srcCanvas && null != c.data ? (a.set_transparent(!0), Ba.createCanvas(a, c.width, c.height), Ba.createImageData(a), c.__srcContext.putImageData(c.__srcImageData, 0, 0)) : a.type == qc.DATA && null != c.__srcImageData && a.dirty && (c.__srcContext.putImageData(c.__srcImageData, 0, 0), a.dirty = !1);
                b ? (c.data = null, c.__srcImageData = null) : null == c.data && null != c.__srcImageData && (c.data = c.__srcImageData.data);
                a.type = qc.CANVAS
            };
            Ba.convertToData = function (a, b) {
                null == b && (b = !1);
                var c = a.buffer;
                null != c.__srcImage &&
                Ba.convertToCanvas(a);
                if (null != c.__srcCanvas && null == c.data) Ba.createImageData(a), a.type == qc.CANVAS && (a.dirty = !1);
                else if (a.type == qc.CANVAS && null != c.__srcCanvas && a.dirty) {
                    if (null == c.__srcImageData) Ba.createImageData(a);
                    else {
                        c.__srcImageData = c.__srcContext.getImageData(0, 0, c.width, c.height);
                        var d = c.__srcImageData.data.buffer;
                        d = null != d ? new Uint8Array(d) : null;
                        c.data = d
                    }
                    a.dirty = !1
                }
                b && (a.buffer.__srcCanvas = null, a.buffer.__srcContext = null);
                a.type = qc.DATA
            };
            Ba.copyChannel = function (a, b, c, d, e, f) {
                Ba.convertToData(b);
                Ba.convertToData(a);
                Rb.copyChannel(a, b, c, d, e, f)
            };
            Ba.copyPixels = function (a, b, c, d, e, f, h) {
                null == h && (h = !1);
                null == d || d.x >= a.width || d.y >= a.height || null == c || 1 > c.width || 1 > c.height || (null != e && e.get_transparent() && (null == f && (f = new mf), b = b.clone(), b.copyChannel(e, new Mc(c.x + f.x, c.y + f.y, c.width, c.height), new mf(c.x, c.y), Xf.ALPHA, Xf.ALPHA)), Ba.convertToCanvas(a, !0), h || a.get_transparent() && b.get_transparent() && a.buffer.__srcContext.clearRect(d.x + a.offsetX, d.y + a.offsetY, c.width + a.offsetX, c.height + a.offsetY), Ba.convertToCanvas(b),
                null != b.buffer.get_src() && (a.buffer.__srcContext.globalCompositeOperation = "source-over", a.buffer.__srcContext.drawImage(b.buffer.get_src(), c.x + b.offsetX | 0, c.y + b.offsetY | 0, c.width | 0, c.height | 0, d.x + a.offsetX | 0, d.y + a.offsetY | 0, c.width | 0, c.height | 0)), a.dirty = !0, a.version++)
            };
            Ba.createCanvas = function (a, b, c) {
                var d = a.buffer;
                null == d.__srcCanvas && (d.__srcCanvas = window.document.createElement("canvas"), d.__srcCanvas.width = b, d.__srcCanvas.height = c, a.get_transparent() ? d.__srcContext = d.__srcCanvas.getContext("2d") :
                    (a.get_transparent() || d.__srcCanvas.setAttribute("moz-opaque", "true"), d.__srcContext = d.__srcCanvas.getContext("2d", {
                        alpha: !1
                    })))
            };
            Ba.createImageData = function (a) {
                a = a.buffer;
                if (null == a.__srcImageData) {
                    null == a.data ? a.__srcImageData = a.__srcContext.getImageData(0, 0, a.width, a.height) : (a.__srcImageData = a.__srcContext.createImageData(a.width, a.height), a.__srcImageData.data.set(a.data));
                    var b = a.__srcImageData.data.buffer;
                    b = null != b ? new Uint8Array(b) : null;
                    a.data = b
                }
            };
            Ba.fillRect = function (a, b, c, d) {
                Ba.convertToCanvas(a);
                if (1 == d) {
                    d = c >> 16 & 255;
                    var e = c >> 8 & 255;
                    var f = c & 255;
                    c = a.get_transparent() ? c >> 24 & 255 : 255
                } else d = c >> 24 & 255, e = c >> 16 & 255, f = c >> 8 & 255, c = a.get_transparent() ? c & 255 : 255;
                0 == b.x && 0 == b.y && b.width == a.width && b.height == a.height && a.get_transparent() && 0 == c ? a.buffer.__srcCanvas.width = a.buffer.width : (255 > c && a.buffer.__srcContext.clearRect(b.x + a.offsetX, b.y + a.offsetY, b.width + a.offsetX, b.height + a.offsetY), 0 < c && (a.buffer.__srcContext.fillStyle = "rgba(" + d + ", " + e + ", " + f + ", " + c / 255 + ")", a.buffer.__srcContext.fillRect(b.x + a.offsetX,
                    b.y + a.offsetY, b.width + a.offsetX, b.height + a.offsetY)), a.dirty = !0, a.version++)
            };
            Ba.getPixel = function (a, b, c, d) {
                Ba.convertToData(a);
                return Rb.getPixel(a, b, c, d)
            };
            Ba.setPixel = function (a, b, c, d, e) {
                Ba.convertToData(a);
                Rb.setPixel(a, b, c, d, e)
            };
            Ba.sync = function (a, b) {
                null != a && (a.type != qc.CANVAS || null == a.buffer.__srcCanvas && null == a.buffer.data ? a.type == qc.DATA && Ba.convertToData(a, b) : Ba.convertToCanvas(a, b))
            };
            var Rb = function () {
            };
            g["lime._internal.graphics.ImageDataUtil"] = Rb;
            Rb.__name__ = "lime._internal.graphics.ImageDataUtil";
            Rb.colorTransform = function (a, b, c) {
                var d = a.buffer.data;
                if (null != d) {
                    var e = a.buffer.format,
                        f = a.buffer.premultiplied;
                    b = new ue(a, b);
                    var h = ec.getAlphaTable(c),
                        r = ec.getRedTable(c),
                        m = ec.getGreenTable(c);
                    c = ec.getBlueTable(c);
                    for (var g, q, k = 0, n = 0, l = b.height; n < l;) {
                        g = n++;
                        g = b.byteOffset + b.stride * g;
                        for (var p = 0, y = b.width; p < y;) {
                            q = p++;
                            q = g + 4 * q;
                            var v = e,
                                t = f;
                            null == t && (t = !1);
                            null == v && (v = 0);
                            switch (v) {
                                case 0:
                                    k = (d[q] & 255) << 24 | (d[q + 1] & 255) << 16 | (d[q + 2] & 255) << 8 | d[q + 3] & 255;
                                    break;
                                case 1:
                                    k = (d[q + 1] & 255) << 24 | (d[q + 2] & 255) << 16 | (d[q +
                                    3] & 255) << 8 | d[q] & 255;
                                    break;
                                case 2:
                                    k = (d[q + 2] & 255) << 24 | (d[q + 1] & 255) << 16 | (d[q] & 255) << 8 | d[q + 3] & 255
                            }
                            t && 0 != (k & 255) && 255 != (k & 255) && (K.unmult = 255 / (k & 255), k = (K.__clamp[Math.round((k >>> 24 & 255) * K.unmult)] & 255) << 24 | (K.__clamp[Math.round((k >>> 16 & 255) * K.unmult)] & 255) << 16 | (K.__clamp[Math.round((k >>> 8 & 255) * K.unmult)] & 255) << 8 | k & 255);
                            k = (r[k >>> 24 & 255] & 255) << 24 | (m[k >>> 16 & 255] & 255) << 16 | (c[k >>> 8 & 255] & 255) << 8 | h[k & 255] & 255;
                            v = e;
                            t = f;
                            null == t && (t = !1);
                            null == v && (v = 0);
                            t && (0 == (k & 255) ? 0 != k && (k = 0) : 255 != (k & 255) && (K.a16 = K.__alpha16[k &
                            255], k = ((k >>> 24 & 255) * K.a16 >> 16 & 255) << 24 | ((k >>> 16 & 255) * K.a16 >> 16 & 255) << 16 | ((k >>> 8 & 255) * K.a16 >> 16 & 255) << 8 | k & 255));
                            switch (v) {
                                case 0:
                                    d[q] = k >>> 24 & 255;
                                    d[q + 1] = k >>> 16 & 255;
                                    d[q + 2] = k >>> 8 & 255;
                                    d[q + 3] = k & 255;
                                    break;
                                case 1:
                                    d[q] = k & 255;
                                    d[q + 1] = k >>> 24 & 255;
                                    d[q + 2] = k >>> 16 & 255;
                                    d[q + 3] = k >>> 8 & 255;
                                    break;
                                case 2:
                                    d[q] = k >>> 8 & 255, d[q + 1] = k >>> 16 & 255, d[q + 2] = k >>> 24 & 255, d[q + 3] = k & 255
                            }
                        }
                    }
                    a.dirty = !0;
                    a.version++
                }
            };
            Rb.copyChannel = function (a, b, c, d, e, f) {
                switch (f._hx_index) {
                    case 0:
                        var h = 0;
                        break;
                    case 1:
                        h = 1;
                        break;
                    case 2:
                        h = 2;
                        break;
                    case 3:
                        h = 3
                }
                switch (e._hx_index) {
                    case 0:
                        var r =
                            0;
                        break;
                    case 1:
                        r = 1;
                        break;
                    case 2:
                        r = 2;
                        break;
                    case 3:
                        r = 3
                }
                e = b.buffer.data;
                f = a.buffer.data;
                if (null != e && null != f) {
                    c = new ue(b, c);
                    d = new ue(a, new Mc(d.x, d.y, c.width, c.height));
                    var m = b.buffer.format,
                        g = a.buffer.format;
                    b = b.buffer.premultiplied;
                    for (var q = a.buffer.premultiplied, k, n, l = 0, p = 0, y = 0, v = 0, t = d.height; v < t;) {
                        n = v++;
                        k = c.byteOffset + c.stride * n;
                        n = d.byteOffset + d.stride * n;
                        for (var B = 0, E = d.width; B < E;) {
                            B++;
                            var z = m,
                                x = b;
                            null == x && (x = !1);
                            null == z && (z = 0);
                            switch (z) {
                                case 0:
                                    l = (e[k] & 255) << 24 | (e[k + 1] & 255) << 16 | (e[k + 2] & 255) << 8 | e[k +
                                    3] & 255;
                                    break;
                                case 1:
                                    l = (e[k + 1] & 255) << 24 | (e[k + 2] & 255) << 16 | (e[k + 3] & 255) << 8 | e[k] & 255;
                                    break;
                                case 2:
                                    l = (e[k + 2] & 255) << 24 | (e[k + 1] & 255) << 16 | (e[k] & 255) << 8 | e[k + 3] & 255
                            }
                            x && 0 != (l & 255) && 255 != (l & 255) && (K.unmult = 255 / (l & 255), l = (K.__clamp[Math.round((l >>> 24 & 255) * K.unmult)] & 255) << 24 | (K.__clamp[Math.round((l >>> 16 & 255) * K.unmult)] & 255) << 16 | (K.__clamp[Math.round((l >>> 8 & 255) * K.unmult)] & 255) << 8 | l & 255);
                            z = g;
                            x = q;
                            null == x && (x = !1);
                            null == z && (z = 0);
                            switch (z) {
                                case 0:
                                    p = (f[n] & 255) << 24 | (f[n + 1] & 255) << 16 | (f[n + 2] & 255) << 8 | f[n + 3] & 255;
                                    break;
                                case 1:
                                    p = (f[n + 1] & 255) << 24 | (f[n + 2] & 255) << 16 | (f[n + 3] & 255) << 8 | f[n] & 255;
                                    break;
                                case 2:
                                    p = (f[n + 2] & 255) << 24 | (f[n + 1] & 255) << 16 | (f[n] & 255) << 8 | f[n + 3] & 255
                            }
                            x && 0 != (p & 255) && 255 != (p & 255) && (K.unmult = 255 / (p & 255), p = (K.__clamp[Math.round((p >>> 24 & 255) * K.unmult)] & 255) << 24 | (K.__clamp[Math.round((p >>> 16 & 255) * K.unmult)] & 255) << 16 | (K.__clamp[Math.round((p >>> 8 & 255) * K.unmult)] & 255) << 8 | p & 255);
                            switch (r) {
                                case 0:
                                    y = l >>> 24 & 255;
                                    break;
                                case 1:
                                    y = l >>> 16 & 255;
                                    break;
                                case 2:
                                    y = l >>> 8 & 255;
                                    break;
                                case 3:
                                    y = l & 255
                            }
                            switch (h) {
                                case 0:
                                    p = (y & 255) << 24 | (p >>>
                                        16 & 255) << 16 | (p >>> 8 & 255) << 8 | p & 255;
                                    break;
                                case 1:
                                    p = (p >>> 24 & 255) << 24 | (y & 255) << 16 | (p >>> 8 & 255) << 8 | p & 255;
                                    break;
                                case 2:
                                    p = (p >>> 24 & 255) << 24 | (p >>> 16 & 255) << 16 | (y & 255) << 8 | p & 255;
                                    break;
                                case 3:
                                    p = (p >>> 24 & 255) << 24 | (p >>> 16 & 255) << 16 | (p >>> 8 & 255) << 8 | y & 255
                            }
                            z = g;
                            x = q;
                            null == x && (x = !1);
                            null == z && (z = 0);
                            x && (0 == (p & 255) ? 0 != p && (p = 0) : 255 != (p & 255) && (K.a16 = K.__alpha16[p & 255], p = ((p >>> 24 & 255) * K.a16 >> 16 & 255) << 24 | ((p >>> 16 & 255) * K.a16 >> 16 & 255) << 16 | ((p >>> 8 & 255) * K.a16 >> 16 & 255) << 8 | p & 255));
                            switch (z) {
                                case 0:
                                    f[n] = p >>> 24 & 255;
                                    f[n + 1] = p >>> 16 & 255;
                                    f[n +
                                    2] = p >>> 8 & 255;
                                    f[n + 3] = p & 255;
                                    break;
                                case 1:
                                    f[n] = p & 255;
                                    f[n + 1] = p >>> 24 & 255;
                                    f[n + 2] = p >>> 16 & 255;
                                    f[n + 3] = p >>> 8 & 255;
                                    break;
                                case 2:
                                    f[n] = p >>> 8 & 255, f[n + 1] = p >>> 16 & 255, f[n + 2] = p >>> 24 & 255, f[n + 3] = p & 255
                            }
                            k += 4;
                            n += 4
                        }
                    }
                    a.dirty = !0;
                    a.version++
                }
            };
            Rb.copyPixels = function (a, b, c, d, e, f, h) {
                null == h && (h = !1);
                if (a.width == b.width && a.height == b.height && c.width == b.width && c.height == b.height && 0 == c.x && 0 == c.y && 0 == d.x && 0 == d.y && null == e && null == f && 0 == h && a.get_format() == b.get_format()) a.buffer.data.set(b.buffer.data);
                else {
                    var r = b.buffer.data,
                        m = a.buffer.data;
                    if (null == r || null == m) return;
                    c = new ue(b, c);
                    var g = new Mc(d.x, d.y, c.width, c.height);
                    g = new ue(a, g);
                    var q = b.buffer.format,
                        k = a.buffer.format,
                        n = 0,
                        l = 0,
                        p = b.buffer.premultiplied,
                        y = a.buffer.premultiplied,
                        v = b.buffer.bitsPerPixel / 8 | 0,
                        t = a.buffer.bitsPerPixel / 8 | 0,
                        B = null != e && e.get_transparent(),
                        z = h || B && !a.get_transparent() || !h && !a.get_transparent() && b.get_transparent();
                    if (B)
                        if (t = e.buffer.data, b = e.buffer.format, h = 0, e = new ue(e, new Mc(c.x + (null == f ? 0 : f.x), c.y + (null == f ? 0 : f.y), c.width, c.height)), g.clip(d.x | 0, d.y | 0, e.width,
                            e.height), z)
                            for (z = 0, v = g.height; z < v;)
                                for (B = z++, d = c.byteOffset + c.stride * B, f = g.byteOffset + g.stride * B, B = e.byteOffset + e.stride * B, N = 0, U = g.width; N < U;) {
                                    N++;
                                    var E = q;
                                    var x = p;
                                    null == x && (x = !1);
                                    null == E && (E = 0);
                                    switch (E) {
                                        case 0:
                                            n = (r[d] & 255) << 24 | (r[d + 1] & 255) << 16 | (r[d + 2] & 255) << 8 | r[d + 3] & 255;
                                            break;
                                        case 1:
                                            n = (r[d + 1] & 255) << 24 | (r[d + 2] & 255) << 16 | (r[d + 3] & 255) << 8 | r[d] & 255;
                                            break;
                                        case 2:
                                            n = (r[d + 2] & 255) << 24 | (r[d + 1] & 255) << 16 | (r[d] & 255) << 8 | r[d + 3] & 255
                                    }
                                    x && 0 != (n & 255) && 255 != (n & 255) && (K.unmult = 255 / (n & 255), n = (K.__clamp[Math.round((n >>>
                                        24 & 255) * K.unmult)] & 255) << 24 | (K.__clamp[Math.round((n >>> 16 & 255) * K.unmult)] & 255) << 16 | (K.__clamp[Math.round((n >>> 8 & 255) * K.unmult)] & 255) << 8 | n & 255);
                                    E = k;
                                    x = y;
                                    null == x && (x = !1);
                                    null == E && (E = 0);
                                    switch (E) {
                                        case 0:
                                            l = (m[f] & 255) << 24 | (m[f + 1] & 255) << 16 | (m[f + 2] & 255) << 8 | m[f + 3] & 255;
                                            break;
                                        case 1:
                                            l = (m[f + 1] & 255) << 24 | (m[f + 2] & 255) << 16 | (m[f + 3] & 255) << 8 | m[f] & 255;
                                            break;
                                        case 2:
                                            l = (m[f + 2] & 255) << 24 | (m[f + 1] & 255) << 16 | (m[f] & 255) << 8 | m[f + 3] & 255
                                    }
                                    x && 0 != (l & 255) && 255 != (l & 255) && (K.unmult = 255 / (l & 255), l = (K.__clamp[Math.round((l >>> 24 & 255) * K.unmult)] &
                                        255) << 24 | (K.__clamp[Math.round((l >>> 16 & 255) * K.unmult)] & 255) << 16 | (K.__clamp[Math.round((l >>> 8 & 255) * K.unmult)] & 255) << 8 | l & 255);
                                    E = b;
                                    x = !1;
                                    null == x && (x = !1);
                                    null == E && (E = 0);
                                    switch (E) {
                                        case 0:
                                            h = (t[B] & 255) << 24 | (t[B + 1] & 255) << 16 | (t[B + 2] & 255) << 8 | t[B + 3] & 255;
                                            break;
                                        case 1:
                                            h = (t[B + 1] & 255) << 24 | (t[B + 2] & 255) << 16 | (t[B + 3] & 255) << 8 | t[B] & 255;
                                            break;
                                        case 2:
                                            h = (t[B + 2] & 255) << 24 | (t[B + 1] & 255) << 16 | (t[B] & 255) << 8 | t[B + 3] & 255
                                    }
                                    x && 0 != (h & 255) && 255 != (h & 255) && (K.unmult = 255 / (h & 255), h = (K.__clamp[Math.round((h >>> 24 & 255) * K.unmult)] & 255) << 24 | (K.__clamp[Math.round((h >>>
                                        16 & 255) * K.unmult)] & 255) << 16 | (K.__clamp[Math.round((h >>> 8 & 255) * K.unmult)] & 255) << 8 | h & 255);
                                    x = (h & 255) / 255 * ((n & 255) / 255);
                                    if (0 < x) {
                                        var A = (l & 255) / 255;
                                        var u = 1 - x;
                                        E = x + A * u;
                                        J = K.__clamp[Math.round(((n >>> 24 & 255) * x + (l >>> 24 & 255) * A * u) / E)];
                                        l = (J & 255) << 24 | (l >>> 16 & 255) << 16 | (l >>> 8 & 255) << 8 | l & 255;
                                        J = K.__clamp[Math.round(((n >>> 16 & 255) * x + (l >>> 16 & 255) * A * u) / E)];
                                        l = (l >>> 24 & 255) << 24 | (J & 255) << 16 | (l >>> 8 & 255) << 8 | l & 255;
                                        x = K.__clamp[Math.round(((n >>> 8 & 255) * x + (l >>> 8 & 255) * A * u) / E)];
                                        l = (l >>> 24 & 255) << 24 | (l >>> 16 & 255) << 16 | (x & 255) << 8 | l & 255;
                                        E = K.__clamp[Math.round(255 *
                                            E)];
                                        l = (l >>> 24 & 255) << 24 | (l >>> 16 & 255) << 16 | (l >>> 8 & 255) << 8 | E & 255;
                                        E = k;
                                        x = y;
                                        null == x && (x = !1);
                                        null == E && (E = 0);
                                        x && (0 == (l & 255) ? 0 != l && (l = 0) : 255 != (l & 255) && (K.a16 = K.__alpha16[l & 255], l = ((l >>> 24 & 255) * K.a16 >> 16 & 255) << 24 | ((l >>> 16 & 255) * K.a16 >> 16 & 255) << 16 | ((l >>> 8 & 255) * K.a16 >> 16 & 255) << 8 | l & 255));
                                        switch (E) {
                                            case 0:
                                                m[f] = l >>> 24 & 255;
                                                m[f + 1] = l >>> 16 & 255;
                                                m[f + 2] = l >>> 8 & 255;
                                                m[f + 3] = l & 255;
                                                break;
                                            case 1:
                                                m[f] = l & 255;
                                                m[f + 1] = l >>> 24 & 255;
                                                m[f + 2] = l >>> 16 & 255;
                                                m[f + 3] = l >>> 8 & 255;
                                                break;
                                            case 2:
                                                m[f] = l >>> 8 & 255, m[f + 1] = l >>> 16 & 255, m[f + 2] = l >>> 24 & 255, m[f + 3] =
                                                    l & 255
                                        }
                                    }
                                    d += 4;
                                    f += 4;
                                    B += 4
                                } else
                            for (z = 0, v = g.height; z < v;)
                                for (B = z++, d = c.byteOffset + c.stride * B, f = g.byteOffset + g.stride * B, B = e.byteOffset + e.stride * B, N = 0, U = g.width; N < U;) {
                                    N++;
                                    E = q;
                                    x = p;
                                    null == x && (x = !1);
                                    null == E && (E = 0);
                                    switch (E) {
                                        case 0:
                                            n = (r[d] & 255) << 24 | (r[d + 1] & 255) << 16 | (r[d + 2] & 255) << 8 | r[d + 3] & 255;
                                            break;
                                        case 1:
                                            n = (r[d + 1] & 255) << 24 | (r[d + 2] & 255) << 16 | (r[d + 3] & 255) << 8 | r[d] & 255;
                                            break;
                                        case 2:
                                            n = (r[d + 2] & 255) << 24 | (r[d + 1] & 255) << 16 | (r[d] & 255) << 8 | r[d + 3] & 255
                                    }
                                    x && 0 != (n & 255) && 255 != (n & 255) && (K.unmult = 255 / (n & 255), n = (K.__clamp[Math.round((n >>>
                                        24 & 255) * K.unmult)] & 255) << 24 | (K.__clamp[Math.round((n >>> 16 & 255) * K.unmult)] & 255) << 16 | (K.__clamp[Math.round((n >>> 8 & 255) * K.unmult)] & 255) << 8 | n & 255);
                                    E = b;
                                    x = !1;
                                    null == x && (x = !1);
                                    null == E && (E = 0);
                                    switch (E) {
                                        case 0:
                                            h = (t[B] & 255) << 24 | (t[B + 1] & 255) << 16 | (t[B + 2] & 255) << 8 | t[B + 3] & 255;
                                            break;
                                        case 1:
                                            h = (t[B + 1] & 255) << 24 | (t[B + 2] & 255) << 16 | (t[B + 3] & 255) << 8 | t[B] & 255;
                                            break;
                                        case 2:
                                            h = (t[B + 2] & 255) << 24 | (t[B + 1] & 255) << 16 | (t[B] & 255) << 8 | t[B + 3] & 255
                                    }
                                    x && 0 != (h & 255) && 255 != (h & 255) && (K.unmult = 255 / (h & 255), h = (K.__clamp[Math.round((h >>> 24 & 255) * K.unmult)] &
                                        255) << 24 | (K.__clamp[Math.round((h >>> 16 & 255) * K.unmult)] & 255) << 16 | (K.__clamp[Math.round((h >>> 8 & 255) * K.unmult)] & 255) << 8 | h & 255);
                                    J = Math.round((h & 255) / 255 * (n & 255));
                                    n = (n >>> 24 & 255) << 24 | (n >>> 16 & 255) << 16 | (n >>> 8 & 255) << 8 | J & 255;
                                    E = k;
                                    x = y;
                                    null == x && (x = !1);
                                    null == E && (E = 0);
                                    x && (0 == (n & 255) ? 0 != n && (n = 0) : 255 != (n & 255) && (K.a16 = K.__alpha16[n & 255], n = ((n >>> 24 & 255) * K.a16 >> 16 & 255) << 24 | ((n >>> 16 & 255) * K.a16 >> 16 & 255) << 16 | ((n >>> 8 & 255) * K.a16 >> 16 & 255) << 8 | n & 255));
                                    switch (E) {
                                        case 0:
                                            m[f] = n >>> 24 & 255;
                                            m[f + 1] = n >>> 16 & 255;
                                            m[f + 2] = n >>> 8 & 255;
                                            m[f + 3] =
                                                n & 255;
                                            break;
                                        case 1:
                                            m[f] = n & 255;
                                            m[f + 1] = n >>> 24 & 255;
                                            m[f + 2] = n >>> 16 & 255;
                                            m[f + 3] = n >>> 8 & 255;
                                            break;
                                        case 2:
                                            m[f] = n >>> 8 & 255, m[f + 1] = n >>> 16 & 255, m[f + 2] = n >>> 24 & 255, m[f + 3] = n & 255
                                    }
                                    d += 4;
                                    f += 4;
                                    B += 4
                                } else if (z)
                        for (z = 0, v = g.height; z < v;) {
                            B = z++;
                            d = c.byteOffset + c.stride * B;
                            f = g.byteOffset + g.stride * B;
                            for (var N = 0, U = g.width; N < U;) {
                                N++;
                                E = q;
                                x = p;
                                null == x && (x = !1);
                                null == E && (E = 0);
                                switch (E) {
                                    case 0:
                                        n = (r[d] & 255) << 24 | (r[d + 1] & 255) << 16 | (r[d + 2] & 255) << 8 | r[d + 3] & 255;
                                        break;
                                    case 1:
                                        n = (r[d + 1] & 255) << 24 | (r[d + 2] & 255) << 16 | (r[d + 3] & 255) << 8 | r[d] & 255;
                                        break;
                                    case 2:
                                        n =
                                            (r[d + 2] & 255) << 24 | (r[d + 1] & 255) << 16 | (r[d] & 255) << 8 | r[d + 3] & 255
                                }
                                x && 0 != (n & 255) && 255 != (n & 255) && (K.unmult = 255 / (n & 255), n = (K.__clamp[Math.round((n >>> 24 & 255) * K.unmult)] & 255) << 24 | (K.__clamp[Math.round((n >>> 16 & 255) * K.unmult)] & 255) << 16 | (K.__clamp[Math.round((n >>> 8 & 255) * K.unmult)] & 255) << 8 | n & 255);
                                E = k;
                                x = y;
                                null == x && (x = !1);
                                null == E && (E = 0);
                                switch (E) {
                                    case 0:
                                        l = (m[f] & 255) << 24 | (m[f + 1] & 255) << 16 | (m[f + 2] & 255) << 8 | m[f + 3] & 255;
                                        break;
                                    case 1:
                                        l = (m[f + 1] & 255) << 24 | (m[f + 2] & 255) << 16 | (m[f + 3] & 255) << 8 | m[f] & 255;
                                        break;
                                    case 2:
                                        l = (m[f + 2] & 255) <<
                                            24 | (m[f + 1] & 255) << 16 | (m[f] & 255) << 8 | m[f + 3] & 255
                                }
                                x && 0 != (l & 255) && 255 != (l & 255) && (K.unmult = 255 / (l & 255), l = (K.__clamp[Math.round((l >>> 24 & 255) * K.unmult)] & 255) << 24 | (K.__clamp[Math.round((l >>> 16 & 255) * K.unmult)] & 255) << 16 | (K.__clamp[Math.round((l >>> 8 & 255) * K.unmult)] & 255) << 8 | l & 255);
                                x = (n & 255) / 255;
                                A = (l & 255) / 255;
                                u = 1 - x;
                                E = x + A * u;
                                if (0 == E) l = 0;
                                else {
                                    var J = K.__clamp[Math.round(((n >>> 24 & 255) * x + (l >>> 24 & 255) * A * u) / E)];
                                    l = (J & 255) << 24 | (l >>> 16 & 255) << 16 | (l >>> 8 & 255) << 8 | l & 255;
                                    J = K.__clamp[Math.round(((n >>> 16 & 255) * x + (l >>> 16 & 255) * A * u) /
                                        E)];
                                    l = (l >>> 24 & 255) << 24 | (J & 255) << 16 | (l >>> 8 & 255) << 8 | l & 255;
                                    x = K.__clamp[Math.round(((n >>> 8 & 255) * x + (l >>> 8 & 255) * A * u) / E)];
                                    l = (l >>> 24 & 255) << 24 | (l >>> 16 & 255) << 16 | (x & 255) << 8 | l & 255;
                                    E = K.__clamp[Math.round(255 * E)];
                                    l = (l >>> 24 & 255) << 24 | (l >>> 16 & 255) << 16 | (l >>> 8 & 255) << 8 | E & 255
                                }
                                E = k;
                                x = y;
                                null == x && (x = !1);
                                null == E && (E = 0);
                                x && (0 == (l & 255) ? 0 != l && (l = 0) : 255 != (l & 255) && (K.a16 = K.__alpha16[l & 255], l = ((l >>> 24 & 255) * K.a16 >> 16 & 255) << 24 | ((l >>> 16 & 255) * K.a16 >> 16 & 255) << 16 | ((l >>> 8 & 255) * K.a16 >> 16 & 255) << 8 | l & 255));
                                switch (E) {
                                    case 0:
                                        m[f] = l >>> 24 & 255;
                                        m[f + 1] = l >>> 16 & 255;
                                        m[f + 2] = l >>> 8 & 255;
                                        m[f + 3] = l & 255;
                                        break;
                                    case 1:
                                        m[f] = l & 255;
                                        m[f + 1] = l >>> 24 & 255;
                                        m[f + 2] = l >>> 16 & 255;
                                        m[f + 3] = l >>> 8 & 255;
                                        break;
                                    case 2:
                                        m[f] = l >>> 8 & 255, m[f + 1] = l >>> 16 & 255, m[f + 2] = l >>> 24 & 255, m[f + 3] = l & 255
                                }
                                d += 4;
                                f += 4
                            }
                        } else if (q == k && p == y && v == t)
                        for (z = 0, v = g.height; z < v;) B = z++, d = c.byteOffset + c.stride * B, f = g.byteOffset + g.stride * B, m.set(r.subarray(d, d + g.width * t), f);
                    else
                        for (z = 0, v = g.height; z < v;)
                            for (B = z++, d = c.byteOffset + c.stride * B, f = g.byteOffset + g.stride * B, N = 0, U = g.width; N < U;) {
                                N++;
                                E = q;
                                x = p;
                                null == x && (x = !1);
                                null == E &&
                                (E = 0);
                                switch (E) {
                                    case 0:
                                        n = (r[d] & 255) << 24 | (r[d + 1] & 255) << 16 | (r[d + 2] & 255) << 8 | r[d + 3] & 255;
                                        break;
                                    case 1:
                                        n = (r[d + 1] & 255) << 24 | (r[d + 2] & 255) << 16 | (r[d + 3] & 255) << 8 | r[d] & 255;
                                        break;
                                    case 2:
                                        n = (r[d + 2] & 255) << 24 | (r[d + 1] & 255) << 16 | (r[d] & 255) << 8 | r[d + 3] & 255
                                }
                                x && 0 != (n & 255) && 255 != (n & 255) && (K.unmult = 255 / (n & 255), n = (K.__clamp[Math.round((n >>> 24 & 255) * K.unmult)] & 255) << 24 | (K.__clamp[Math.round((n >>> 16 & 255) * K.unmult)] & 255) << 16 | (K.__clamp[Math.round((n >>> 8 & 255) * K.unmult)] & 255) << 8 | n & 255);
                                E = k;
                                x = y;
                                null == x && (x = !1);
                                null == E && (E = 0);
                                x && (0 ==
                                (n & 255) ? 0 != n && (n = 0) : 255 != (n & 255) && (K.a16 = K.__alpha16[n & 255], n = ((n >>> 24 & 255) * K.a16 >> 16 & 255) << 24 | ((n >>> 16 & 255) * K.a16 >> 16 & 255) << 16 | ((n >>> 8 & 255) * K.a16 >> 16 & 255) << 8 | n & 255));
                                switch (E) {
                                    case 0:
                                        m[f] = n >>> 24 & 255;
                                        m[f + 1] = n >>> 16 & 255;
                                        m[f + 2] = n >>> 8 & 255;
                                        m[f + 3] = n & 255;
                                        break;
                                    case 1:
                                        m[f] = n & 255;
                                        m[f + 1] = n >>> 24 & 255;
                                        m[f + 2] = n >>> 16 & 255;
                                        m[f + 3] = n >>> 8 & 255;
                                        break;
                                    case 2:
                                        m[f] = n >>> 8 & 255, m[f + 1] = n >>> 16 & 255, m[f + 2] = n >>> 24 & 255, m[f + 3] = n & 255
                                }
                                d += 4;
                                f += 4
                            }
                }
                a.dirty = !0;
                a.version++
            };
            Rb.fillRect = function (a, b, c, d) {
                switch (d) {
                    case 1:
                        c = (c >>> 16 & 255) << 24 |
                            (c >>> 8 & 255) << 16 | (c & 255) << 8 | c >>> 24 & 255;
                        break;
                    case 2:
                        c = (c >>> 8 & 255) << 24 | (c >>> 16 & 255) << 16 | (c >>> 24 & 255) << 8 | c & 255
                }
                a.get_transparent() || (c = (c >>> 24 & 255) << 24 | (c >>> 16 & 255) << 16 | (c >>> 8 & 255) << 8 | 255);
                var e = a.buffer.data;
                if (null != e) {
                    d = a.buffer.format;
                    var f = a.buffer.premultiplied;
                    f && (0 == (c & 255) ? 0 != c && (c = 0) : 255 != (c & 255) && (K.a16 = K.__alpha16[c & 255], c = ((c >>> 24 & 255) * K.a16 >> 16 & 255) << 24 | ((c >>> 16 & 255) * K.a16 >> 16 & 255) << 16 | ((c >>> 8 & 255) * K.a16 >> 16 & 255) << 8 | c & 255));
                    b = new ue(a, b);
                    for (var h, r = 0, m = b.height; r < m;) {
                        f = r++;
                        h = b.byteOffset +
                            b.stride * f;
                        for (var g = 0, q = b.width; g < q;) {
                            f = g++;
                            var k = h + 4 * f,
                                n = d;
                            f = !1;
                            null == f && (f = !1);
                            null == n && (n = 0);
                            f && (0 == (c & 255) ? 0 != c && (c = 0) : 255 != (c & 255) && (K.a16 = K.__alpha16[c & 255], c = ((c >>> 24 & 255) * K.a16 >> 16 & 255) << 24 | ((c >>> 16 & 255) * K.a16 >> 16 & 255) << 16 | ((c >>> 8 & 255) * K.a16 >> 16 & 255) << 8 | c & 255));
                            switch (n) {
                                case 0:
                                    e[k] = c >>> 24 & 255;
                                    e[k + 1] = c >>> 16 & 255;
                                    e[k + 2] = c >>> 8 & 255;
                                    e[k + 3] = c & 255;
                                    break;
                                case 1:
                                    e[k] = c & 255;
                                    e[k + 1] = c >>> 24 & 255;
                                    e[k + 2] = c >>> 16 & 255;
                                    e[k + 3] = c >>> 8 & 255;
                                    break;
                                case 2:
                                    e[k] = c >>> 8 & 255, e[k + 1] = c >>> 16 & 255, e[k + 2] = c >>> 24 & 255, e[k + 3] = c &
                                        255
                            }
                        }
                    }
                    a.dirty = !0;
                    a.version++
                }
            };
            Rb.getPixel = function (a, b, c, d) {
                var e = 0,
                    f = a.buffer.data;
                b = 4 * (c + a.offsetY) * a.buffer.width + 4 * (b + a.offsetX);
                c = a.buffer.format;
                a = a.buffer.premultiplied;
                null == a && (a = !1);
                null == c && (c = 0);
                switch (c) {
                    case 0:
                        e = (f[b] & 255) << 24 | (f[b + 1] & 255) << 16 | (f[b + 2] & 255) << 8 | f[b + 3] & 255;
                        break;
                    case 1:
                        e = (f[b + 1] & 255) << 24 | (f[b + 2] & 255) << 16 | (f[b + 3] & 255) << 8 | f[b] & 255;
                        break;
                    case 2:
                        e = (f[b + 2] & 255) << 24 | (f[b + 1] & 255) << 16 | (f[b] & 255) << 8 | f[b + 3] & 255
                }
                a && 0 != (e & 255) && 255 != (e & 255) && (K.unmult = 255 / (e & 255), e = (K.__clamp[Math.round((e >>>
                    24 & 255) * K.unmult)] & 255) << 24 | (K.__clamp[Math.round((e >>> 16 & 255) * K.unmult)] & 255) << 16 | (K.__clamp[Math.round((e >>> 8 & 255) * K.unmult)] & 255) << 8 | e & 255);
                e = (e >>> 24 & 255) << 24 | (e >>> 16 & 255) << 16 | (e >>> 8 & 255) << 8 | 0;
                switch (d) {
                    case 1:
                        return (e & 255) << 24 | (e >>> 24 & 255) << 16 | (e >>> 16 & 255) << 8 | e >>> 8 & 255;
                    case 2:
                        return (e >>> 8 & 255) << 24 | (e >>> 16 & 255) << 16 | (e >>> 24 & 255) << 8 | e & 255;
                    default:
                        return e
                }
            };
            Rb.multiplyAlpha = function (a) {
                var b = a.buffer.data;
                if (null != b && a.buffer.transparent) {
                    for (var c = a.buffer.format, d = 0, e = 0, f = b.length / 4 | 0; e < f;) {
                        var h =
                                e++,
                            r = 4 * h,
                            m = c,
                            g = !1;
                        null == g && (g = !1);
                        null == m && (m = 0);
                        switch (m) {
                            case 0:
                                d = (b[r] & 255) << 24 | (b[r + 1] & 255) << 16 | (b[r + 2] & 255) << 8 | b[r + 3] & 255;
                                break;
                            case 1:
                                d = (b[r + 1] & 255) << 24 | (b[r + 2] & 255) << 16 | (b[r + 3] & 255) << 8 | b[r] & 255;
                                break;
                            case 2:
                                d = (b[r + 2] & 255) << 24 | (b[r + 1] & 255) << 16 | (b[r] & 255) << 8 | b[r + 3] & 255
                        }
                        g && 0 != (d & 255) && 255 != (d & 255) && (K.unmult = 255 / (d & 255), d = (K.__clamp[Math.round((d >>> 24 & 255) * K.unmult)] & 255) << 24 | (K.__clamp[Math.round((d >>> 16 & 255) * K.unmult)] & 255) << 16 | (K.__clamp[Math.round((d >>> 8 & 255) * K.unmult)] & 255) << 8 | d & 255);
                        h *=
                            4;
                        r = c;
                        m = !0;
                        null == m && (m = !1);
                        null == r && (r = 0);
                        m && (0 == (d & 255) ? 0 != d && (d = 0) : 255 != (d & 255) && (K.a16 = K.__alpha16[d & 255], d = ((d >>> 24 & 255) * K.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * K.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * K.a16 >> 16 & 255) << 8 | d & 255));
                        switch (r) {
                            case 0:
                                b[h] = d >>> 24 & 255;
                                b[h + 1] = d >>> 16 & 255;
                                b[h + 2] = d >>> 8 & 255;
                                b[h + 3] = d & 255;
                                break;
                            case 1:
                                b[h] = d & 255;
                                b[h + 1] = d >>> 24 & 255;
                                b[h + 2] = d >>> 16 & 255;
                                b[h + 3] = d >>> 8 & 255;
                                break;
                            case 2:
                                b[h] = d >>> 8 & 255, b[h + 1] = d >>> 16 & 255, b[h + 2] = d >>> 24 & 255, b[h + 3] = d & 255
                        }
                    }
                    a.buffer.premultiplied = !0;
                    a.dirty = !0;
                    a.version++
                }
            };
            Rb.setFormat = function (a, b) {
                var c = a.buffer.data;
                if (null != c) {
                    var d = c.length / 4 | 0;
                    switch (a.get_format()) {
                        case 0:
                            var e = 0;
                            var f = 1;
                            var h = 2;
                            var r = 3;
                            break;
                        case 1:
                            e = 1;
                            f = 2;
                            h = 3;
                            r = 0;
                            break;
                        case 2:
                            e = 2, f = 1, h = 0, r = 3
                    }
                    switch (b) {
                        case 0:
                            var m = 0;
                            var g = 1;
                            var n = 2;
                            var k = 3;
                            break;
                        case 1:
                            m = 1;
                            g = 2;
                            n = 3;
                            k = 0;
                            break;
                        case 2:
                            m = 2, g = 1, n = 0, k = 3
                    }
                    for (var q = 0; q < d;) {
                        var l = 4 * q++;
                        var p = c[l + e];
                        var y = c[l + f];
                        var v = c[l + h];
                        var t = c[l + r];
                        c[l + m] = p;
                        c[l + g] = y;
                        c[l + n] = v;
                        c[l + k] = t
                    }
                    a.buffer.format = b;
                    a.dirty = !0;
                    a.version++
                }
            };
            Rb.setPixel = function (a, b, c, d, e) {
                switch (e) {
                    case 1:
                        d =
                            (d >>> 16 & 255) << 24 | (d >>> 8 & 255) << 16 | (d & 255) << 8 | d >>> 24 & 255;
                        break;
                    case 2:
                        d = (d >>> 8 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 24 & 255) << 8 | d & 255
                }
                var f = 0,
                    h = a.buffer.data,
                    r = 4 * (c + a.offsetY) * a.buffer.width + 4 * (b + a.offsetX);
                e = a.buffer.format;
                var m = a.buffer.premultiplied;
                null == m && (m = !1);
                null == e && (e = 0);
                switch (e) {
                    case 0:
                        f = (h[r] & 255) << 24 | (h[r + 1] & 255) << 16 | (h[r + 2] & 255) << 8 | h[r + 3] & 255;
                        break;
                    case 1:
                        f = (h[r + 1] & 255) << 24 | (h[r + 2] & 255) << 16 | (h[r + 3] & 255) << 8 | h[r] & 255;
                        break;
                    case 2:
                        f = (h[r + 2] & 255) << 24 | (h[r + 1] & 255) << 16 | (h[r] & 255) << 8 | h[r + 3] & 255
                }
                m &&
                0 != (f & 255) && 255 != (f & 255) && (K.unmult = 255 / (f & 255), f = (K.__clamp[Math.round((f >>> 24 & 255) * K.unmult)] & 255) << 24 | (K.__clamp[Math.round((f >>> 16 & 255) * K.unmult)] & 255) << 16 | (K.__clamp[Math.round((f >>> 8 & 255) * K.unmult)] & 255) << 8 | f & 255);
                d = (d >>> 24 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 8 & 255) << 8 | f & 255;
                h = a.buffer.data;
                r = 4 * (c + a.offsetY) * a.buffer.width + 4 * (b + a.offsetX);
                e = a.buffer.format;
                m = a.buffer.premultiplied;
                null == m && (m = !1);
                null == e && (e = 0);
                m && (0 == (d & 255) ? 0 != d && (d = 0) : 255 != (d & 255) && (K.a16 = K.__alpha16[d & 255], d = ((d >>> 24 & 255) * K.a16 >>
                    16 & 255) << 24 | ((d >>> 16 & 255) * K.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * K.a16 >> 16 & 255) << 8 | d & 255));
                switch (e) {
                    case 0:
                        h[r] = d >>> 24 & 255;
                        h[r + 1] = d >>> 16 & 255;
                        h[r + 2] = d >>> 8 & 255;
                        h[r + 3] = d & 255;
                        break;
                    case 1:
                        h[r] = d & 255;
                        h[r + 1] = d >>> 24 & 255;
                        h[r + 2] = d >>> 16 & 255;
                        h[r + 3] = d >>> 8 & 255;
                        break;
                    case 2:
                        h[r] = d >>> 8 & 255, h[r + 1] = d >>> 16 & 255, h[r + 2] = d >>> 24 & 255, h[r + 3] = d & 255
                }
                a.dirty = !0;
                a.version++
            };
            Rb.unmultiplyAlpha = function (a) {
                var b = a.buffer.data;
                if (null != b) {
                    for (var c = a.buffer.format, d = 0, e = 0, f = b.length / 4 | 0; e < f;) {
                        var h = e++,
                            r = 4 * h,
                            m = c,
                            g = !0;
                        null == g && (g = !1);
                        null == m && (m = 0);
                        switch (m) {
                            case 0:
                                d = (b[r] & 255) << 24 | (b[r + 1] & 255) << 16 | (b[r + 2] & 255) << 8 | b[r + 3] & 255;
                                break;
                            case 1:
                                d = (b[r + 1] & 255) << 24 | (b[r + 2] & 255) << 16 | (b[r + 3] & 255) << 8 | b[r] & 255;
                                break;
                            case 2:
                                d = (b[r + 2] & 255) << 24 | (b[r + 1] & 255) << 16 | (b[r] & 255) << 8 | b[r + 3] & 255
                        }
                        g && 0 != (d & 255) && 255 != (d & 255) && (K.unmult = 255 / (d & 255), d = (K.__clamp[Math.round((d >>> 24 & 255) * K.unmult)] & 255) << 24 | (K.__clamp[Math.round((d >>> 16 & 255) * K.unmult)] & 255) << 16 | (K.__clamp[Math.round((d >>> 8 & 255) * K.unmult)] & 255) << 8 | d & 255);
                        h *= 4;
                        r = c;
                        m = !1;
                        null == m && (m = !1);
                        null == r &&
                        (r = 0);
                        m && (0 == (d & 255) ? 0 != d && (d = 0) : 255 != (d & 255) && (K.a16 = K.__alpha16[d & 255], d = ((d >>> 24 & 255) * K.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * K.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * K.a16 >> 16 & 255) << 8 | d & 255));
                        switch (r) {
                            case 0:
                                b[h] = d >>> 24 & 255;
                                b[h + 1] = d >>> 16 & 255;
                                b[h + 2] = d >>> 8 & 255;
                                b[h + 3] = d & 255;
                                break;
                            case 1:
                                b[h] = d & 255;
                                b[h + 1] = d >>> 24 & 255;
                                b[h + 2] = d >>> 16 & 255;
                                b[h + 3] = d >>> 8 & 255;
                                break;
                            case 2:
                                b[h] = d >>> 8 & 255, b[h + 1] = d >>> 16 & 255, b[h + 2] = d >>> 24 & 255, b[h + 3] = d & 255
                        }
                    }
                    a.buffer.premultiplied = !1;
                    a.dirty = !0;
                    a.version++
                }
            };
            var ue = function (a, b) {
                this.image = a;
                null == b ? this.rect = a.get_rect() : (0 > b.x && (b.x = 0), 0 > b.y && (b.y = 0), b.x + b.width > a.width && (b.width = a.width - b.x), b.y + b.height > a.height && (b.height = a.height - b.y), 0 > b.width && (b.width = 0), 0 > b.height && (b.height = 0), this.rect = b);
                this.stride = a.buffer.get_stride();
                this.__update()
            };
            g["lime._internal.graphics._ImageDataUtil.ImageDataView"] = ue;
            ue.__name__ = "lime._internal.graphics._ImageDataUtil.ImageDataView";
            ue.prototype = {
                clip: function (a, b, c, d) {
                    null == this.tempRect && (this.tempRect = new Mc);
                    this.tempRect.setTo(a, b, c, d);
                    this.rect.intersection(this.tempRect, this.rect);
                    this.__update()
                },
                __update: function () {
                    this.x = Math.ceil(this.rect.x);
                    this.y = Math.ceil(this.rect.y);
                    this.width = Math.floor(this.rect.width);
                    this.height = Math.floor(this.rect.height);
                    this.byteOffset = this.stride * (this.y + this.image.offsetY) + 4 * (this.x + this.image.offsetX)
                },
                __class__: ue
            };
            var Jb = function (a, b) {
                null == b && (b = !1);
                if (null != a)
                    if (b) b = new Kc, b.future = this, Ec.queue({
                        promise: b,
                        work: a
                    });
                    else try {
                        this.value = a(), this.isComplete = !0
                    } catch (c) {
                        Ia.lastError = c, this.error =
                            fa.caught(c).unwrap(), this.isError = !0
                    }
            };
            g["lime.app.Future"] = Jb;
            Jb.__name__ = "lime.app.Future";
            Jb.withValue = function (a) {
                var b = new Jb;
                b.isComplete = !0;
                b.value = a;
                return b
            };
            Jb.prototype = {
                onComplete: function (a) {
                    null != a && (this.isComplete ? a(this.value) : this.isError || (null == this.__completeListeners && (this.__completeListeners = []), this.__completeListeners.push(a)));
                    return this
                },
                onError: function (a) {
                    null != a && (this.isError ? a(this.error) : this.isComplete || (null == this.__errorListeners && (this.__errorListeners = []),
                        this.__errorListeners.push(a)));
                    return this
                },
                onProgress: function (a) {
                    null != a && (null == this.__progressListeners && (this.__progressListeners = []), this.__progressListeners.push(a));
                    return this
                },
                then: function (a) {
                    if (this.isComplete) return a(this.value);
                    if (this.isError) {
                        var b = new Jb;
                        b.isError = !0;
                        b.error = this.error;
                        return b
                    }
                    var c = new Kc;
                    this.onError(p(c, c.error));
                    this.onProgress(p(c, c.progress));
                    this.onComplete(function (b) {
                        b = a(b);
                        b.onError(p(c, c.error));
                        b.onComplete(p(c, c.complete))
                    });
                    return c.future
                },
                __class__: Jb
            };
            var Ec = function () {
            };
            g["lime.app._Future.FutureWork"] = Ec;
            Ec.__name__ = "lime.app._Future.FutureWork";
            Ec.queue = function (a) {
                null == Ec.threadPool && (Ec.threadPool = new Ck, Ec.threadPool.doWork.add(Ec.threadPool_doWork), Ec.threadPool.onComplete.add(Ec.threadPool_onComplete), Ec.threadPool.onError.add(Ec.threadPool_onError));
                Ec.threadPool.queue(a)
            };
            Ec.threadPool_doWork = function (a) {
                try {
                    var b = a.work();
                    Ec.threadPool.sendComplete({
                        promise: a.promise,
                        result: b
                    })
                } catch (c) {
                    Ia.lastError = c, b = fa.caught(c).unwrap(), Ec.threadPool.sendError({
                        promise: a.promise,
                        error: b
                    })
                }
            };
            Ec.threadPool_onComplete = function (a) {
                a.promise.complete(a.result)
            };
            Ec.threadPool_onError = function (a) {
                a.promise.error(a.error)
            };
            var Kc = function () {
                this.future = new Jb
            };
            g["lime.app.Promise"] = Kc;
            Kc.__name__ = "lime.app.Promise";
            Kc.prototype = {
                complete: function (a) {
                    if (!this.future.isError && (this.future.isComplete = !0, this.future.value = a, null != this.future.__completeListeners)) {
                        for (var b = 0, c = this.future.__completeListeners; b < c.length;) {
                            var d = c[b];
                            ++b;
                            d(a)
                        }
                        this.future.__completeListeners = null
                    }
                    return this
                },
                completeWith: function (a) {
                    a.onComplete(p(this, this.complete));
                    a.onError(p(this, this.error));
                    a.onProgress(p(this, this.progress));
                    return this
                },
                error: function (a) {
                    if (!this.future.isComplete && (this.future.isError = !0, this.future.error = a, null != this.future.__errorListeners)) {
                        for (var b = 0, c = this.future.__errorListeners; b < c.length;) {
                            var d = c[b];
                            ++b;
                            d(a)
                        }
                        this.future.__errorListeners = null
                    }
                    return this
                },
                progress: function (a, b) {
                    if (!this.future.isError && !this.future.isComplete && null != this.future.__progressListeners)
                        for (var c =
                            0, d = this.future.__progressListeners; c < d.length;) {
                            var e = d[c];
                            ++c;
                            e(a, b)
                        }
                    return this
                },
                __class__: Kc
            };
            var Yf = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_Dynamic_Void"] = Yf;
            Yf.__name__ = "lime.app._Event_Dynamic_Void";
            Yf.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f,
                                0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);) ;
                },
                __class__: Yf
            };
            var Dk = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_Float_Float_Float_Void"] = Dk;
            Dk.__name__ = "lime.app._Event_Float_Float_Float_Void";
            Dk.prototype = {
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a, b, c) {
                    this.canceled = !1;
                    for (var d = this.__listeners, e = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled);) ;
                },
                __class__: Dk
            };
            var Ek = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_Float_Float_Int_Void"] = Ek;
            Ek.__name__ = "lime.app._Event_Float_Float_Int_Void";
            Ek.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function () {
                    this.canceled = !0
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a, b, c) {
                    this.canceled = !1;
                    for (var d = this.__listeners, e = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled);) ;
                },
                __class__: Ek
            };
            var Ug = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_Float_Float_Void"] = Ug;
            Ug.__name__ = "lime.app._Event_Float_Float_Void";
            Ug.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a,
                                    b) {
                    this.canceled = !1;
                    for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled);) ;
                },
                __class__: Ug
            };
            var Fk = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_Float_Float_lime_ui_MouseButton_Void"] = Fk;
            Fk.__name__ = "lime.app._Event_Float_Float_lime_ui_MouseButton_Void";
            Fk.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f,
                                0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function () {
                    this.canceled = !0
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a, b, c) {
                    this.canceled = !1;
                    for (var d = this.__listeners, e = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled);) ;
                },
                __class__: Fk
            };
            var Gk = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void"] = Gk;
            Gk.__name__ = "lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void";
            Gk.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function () {
                    this.canceled = !0
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a, b, c) {
                    this.canceled = !1;
                    for (var d = this.__listeners, e = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled);) ;
                },
                __class__: Gk
            };
            var Hk = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_Int_Float_Float_Void"] = Hk;
            Hk.__name__ = "lime.app._Event_Int_Float_Float_Void";
            Hk.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                __class__: Hk
            };
            var Ik = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_Int_Float_Void"] = Ik;
            Ik.__name__ = "lime.app._Event_Int_Float_Void";
            Ik.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <=
                    --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a, b) {
                    this.canceled = !1;
                    for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled);) ;
                },
                __class__: Ik
            };
            var Zi = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_Int_Int_Void"] = Zi;
            Zi.__name__ = "lime.app._Event_Int_Int_Void";
            Zi.prototype = {
                add: function (a, b, c) {
                    null ==
                    c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a, b) {
                    this.canceled = !1;
                    for (var c =
                        this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled);) ;
                },
                __class__: Zi
            };
            var Ze = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_Int_Void"] = Ze;
            Ze.__name__ = "lime.app._Event_Int_Void";
            Ze.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f,
                                0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);) ;
                },
                __class__: Ze
            };
            var Jk = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_Int_lime_ui_JoystickHatPosition_Void"] = Jk;
            Jk.__name__ = "lime.app._Event_Int_lime_ui_JoystickHatPosition_Void";
            Jk.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                __class__: Jk
            };
            var Kk = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_String_Int_Int_Void"] = Kk;
            Kk.__name__ = "lime.app._Event_String_Int_Int_Void";
            Kk.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                __class__: Kk
            };
            var $i = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_String_Void"] = $i;
            $i.__name__ = "lime.app._Event_String_Void";
            $i.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function () {
                    this.canceled = !0
                },
                has: function (a) {
                    for (var b =
                        0, c = this.__listeners; b < c.length;) {
                        var d = c[b];
                        ++b;
                        if (d == a) return !0
                    }
                    return !1
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);) ;
                },
                __class__: $i
            };
            var Wb = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_Void_Void"] = Wb;
            Wb.__name__ = "lime.app._Event_Void_Void";
            Wb.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b,
                        1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function () {
                    this.canceled = !1;
                    for (var a = this.__listeners, b = this.__repeat, c = 0; c < a.length && (a[c](), b[c] ? ++c : this.remove(a[c]), !this.canceled);) ;
                },
                __class__: Wb
            };
            var aj = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_lime_graphics_RenderContext_Void"] = aj;
            aj.__name__ = "lime.app._Event_lime_graphics_RenderContext_Void";
            aj.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function () {
                    this.canceled = !0
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);) ;
                },
                __class__: aj
            };
            var Lk = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_lime_ui_GamepadAxis_Float_Void"] = Lk;
            Lk.__name__ = "lime.app._Event_lime_ui_GamepadAxis_Float_Void";
            Lk.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f,
                                0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a, b) {
                    this.canceled = !1;
                    for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled);) ;
                },
                __class__: Lk
            };
            var bj = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_lime_ui_GamepadButton_Void"] = bj;
            bj.__name__ = "lime.app._Event_lime_ui_GamepadButton_Void";
            bj.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b =
                        this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);) ;
                },
                __class__: bj
            };
            var Mk = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_lime_ui_Gamepad_Void"] = Mk;
            Mk.__name__ = "lime.app._Event_lime_ui_Gamepad_Void";
            Mk.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);) ;
                },
                __class__: Mk
            };
            var Nk = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_lime_ui_Joystick_Void"] = Nk;
            Nk.__name__ = "lime.app._Event_lime_ui_Joystick_Void";
            Nk.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);) ;
                },
                __class__: Nk
            };
            var cj = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"] = cj;
            cj.__name__ = "lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void";
            cj.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function () {
                    this.canceled = !0
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a, b) {
                    this.canceled = !1;
                    for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled);) ;
                },
                __class__: cj
            };
            var Zf = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_lime_ui_Touch_Void"] =
                Zf;
            Zf.__name__ = "lime.app._Event_lime_ui_Touch_Void";
            Zf.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b,
                        1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);) ;
                },
                __class__: Zf
            };
            var Pj = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            g["lime.app._Event_lime_ui_Window_Void"] = Pj;
            Pj.__name__ = "lime.app._Event_lime_ui_Window_Void";
            Pj.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, e = this.__priorities.length; d < e;) {
                        var f =
                            d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]),
                        !this.canceled);) ;
                },
                __class__: Pj
            };
            var qb = function (a, b, c, d, e, f, h) {
                null == e && (e = -1);
                null == d && (d = -1);
                null == c && (c = 0);
                null == b && (b = 0);
                this.offsetX = b;
                this.offsetY = c;
                this.width = d;
                this.height = e;
                this.version = 0;
                null == h && (h = qc.CANVAS);
                this.type = h;
                if (null == a) {
                    if (0 < d && 0 < e) switch (this.type._hx_index) {
                        case 0:
                            this.buffer = new ae(null, d, e);
                            Ba.createCanvas(this, d, e);
                            null != f && 0 != f && this.fillRect(new Mc(0, 0, d, e), f);
                            break;
                        case 1:
                            a = d * e * 4, a = null != a ? new Uint8Array(a) : null, this.buffer = new ae(a, d, e), null != f && 0 != f && this.fillRect(new Mc(0,
                                0, d, e), f)
                    }
                } else this.__fromImageBuffer(a)
            };
            g["lime.graphics.Image"] = qb;
            qb.__name__ = "lime.graphics.Image";
            qb.fromCanvas = function (a) {
                if (null == a) return null;
                var b = new ae(null, a.width, a.height);
                b.set_src(a);
                a = new qb(b);
                a.type = qc.CANVAS;
                return a
            };
            qb.fromFile = function (a) {
                if (null == a) return null;
                var b = new qb;
                return b.__fromFile(a) ? b : null
            };
            qb.loadFromBytes = function (a) {
                if (null == a) return Jb.withValue(null);
                if (qb.__isPNG(a)) var b = "image/png";
                else if (qb.__isJPG(a)) b = "image/jpeg";
                else if (qb.__isGIF(a)) b = "image/gif";
                else if (qb.__isWebP(a)) b = "image/webp";
                else return Jb.withValue(null);
                return ta.loadImageFromBytes(a, b)
            };
            qb.loadFromFile = function (a) {
                return null == a ? Jb.withValue(null) : ta.loadImage(a)
            };
            qb.__isGIF = function (a) {
                if (null == a || 6 > a.length) return !1;
                a = a.getString(0, 6);
                return "GIF87a" != a ? "GIF89a" == a : !0
            };
            qb.__isJPG = function (a) {
                return null == a || 4 > a.length ? !1 : 255 == a.b[0] && 216 == a.b[1] && 255 == a.b[a.length - 2] ? 217 == a.b[a.length - 1] : !1
            };
            qb.__isPNG = function (a) {
                return null == a || 8 > a.length ? !1 : 137 == a.b[0] && 80 == a.b[1] && 78 == a.b[2] &&
                71 == a.b[3] && 13 == a.b[4] && 10 == a.b[5] && 26 == a.b[6] ? 10 == a.b[7] : !1
            };
            qb.__isWebP = function (a) {
                return null == a || 16 > a.length ? !1 : "RIFF" == a.getString(0, 4) ? "WEBP" == a.getString(8, 4) : !1
            };
            qb.prototype = {
                clone: function () {
                    if (null != this.buffer) {
                        this.type == qc.CANVAS ? Ba.convertToCanvas(this) : Ba.convertToData(this);
                        var a = new qb(this.buffer.clone(), this.offsetX, this.offsetY, this.width, this.height, null, this.type);
                        a.version = this.version;
                        return a
                    }
                    return new qb(null, this.offsetX, this.offsetY, this.width, this.height, null, this.type)
                },
                colorTransform: function (a, b) {
                    a = this.__clipRect(a);
                    if (null != this.buffer && null != a) switch (this.type._hx_index) {
                        case 0:
                            Ba.colorTransform(this, a, b);
                            break;
                        case 1:
                            Ba.convertToData(this);
                            Rb.colorTransform(this, a, b);
                            break;
                        case 2:
                            a.offset(this.offsetX, this.offsetY), this.buffer.__srcBitmapData.colorTransform(a.__toFlashRectangle(), ec.__toFlashColorTransform(b))
                    }
                },
                copyChannel: function (a, b, c, d, e) {
                    b = this.__clipRect(b);
                    if (null != this.buffer && null != b && !(e == Xf.ALPHA && !this.get_transparent() || 0 >= b.width || 0 >= b.height)) switch (b.x +
                    b.width > a.width && (b.width = a.width - b.x), b.y + b.height > a.height && (b.height = a.height - b.y), this.type._hx_index) {
                        case 0:
                            Ba.copyChannel(this, a, b, c, d, e);
                            break;
                        case 1:
                            Ba.convertToData(this);
                            Ba.convertToData(a);
                            Rb.copyChannel(this, a, b, c, d, e);
                            break;
                        case 2:
                            switch (d._hx_index) {
                                case 0:
                                    var f = 1;
                                    break;
                                case 1:
                                    f = 2;
                                    break;
                                case 2:
                                    f = 4;
                                    break;
                                case 3:
                                    f = 8
                            }
                            switch (e._hx_index) {
                                case 0:
                                    var h = 1;
                                    break;
                                case 1:
                                    h = 2;
                                    break;
                                case 2:
                                    h = 4;
                                    break;
                                case 3:
                                    h = 8
                            }
                            b.offset(a.offsetX, a.offsetY);
                            c.offset(this.offsetX, this.offsetY);
                            this.buffer.__srcBitmapData.copyChannel(a.buffer.get_src(),
                                b.__toFlashRectangle(), c.__toFlashPoint(), f, h)
                    }
                },
                copyPixels: function (a, b, c, d, e, f) {
                    null == f && (f = !1);
                    if (null != this.buffer && null != a && !(0 >= b.width || 0 >= b.height || 0 >= this.width || 0 >= this.height)) switch (b.x + b.width > a.width && (b.width = a.width - b.x), b.y + b.height > a.height && (b.height = a.height - b.y), 0 > b.x && (b.width += b.x, b.x = 0), 0 > b.y && (b.height += b.y, b.y = 0), c.x + b.width > this.width && (b.width = this.width - c.x), c.y + b.height > this.height && (b.height = this.height - c.y), 0 > c.x && (b.width += c.x, b.x -= c.x, c.x = 0), 0 > c.y && (b.height += c.y,
                        b.y -= c.y, c.y = 0), a == this && c.x < b.get_right() && c.y < b.get_bottom() && (a = this.clone()), d == a && (null == e || 0 == e.x && 0 == e.y) && (e = d = null), this.type._hx_index) {
                        case 0:
                            null != d ? (Ba.convertToData(this), Ba.convertToData(a), null != d && Ba.convertToData(d), Rb.copyPixels(this, a, b, c, d, e, f)) : (Ba.convertToCanvas(this), Ba.convertToCanvas(a), Ba.copyPixels(this, a, b, c, d, e, f));
                            break;
                        case 1:
                            Ba.convertToData(this);
                            Ba.convertToData(a);
                            null != d && Ba.convertToData(d);
                            Rb.copyPixels(this, a, b, c, d, e, f);
                            break;
                        case 2:
                            b.offset(a.offsetX, a.offsetY),
                                c.offset(this.offsetX, this.offsetY), null != d && null != e && e.offset(d.offsetX, d.offsetY), this.buffer.__srcBitmapData.copyPixels(a.buffer.__srcBitmapData, b.__toFlashRectangle(), c.__toFlashPoint(), null != d ? d.buffer.get_src() : null, null != e ? e.__toFlashPoint() : null, f)
                    }
                },
                fillRect: function (a, b, c) {
                    a = this.__clipRect(a);
                    if (null != this.buffer && null != a) switch (this.type._hx_index) {
                        case 0:
                            Ba.fillRect(this, a, b, c);
                            break;
                        case 1:
                            Ba.convertToData(this);
                            if (0 == this.buffer.data.length) break;
                            Rb.fillRect(this, a, b, c);
                            break;
                        case 2:
                            a.offset(this.offsetX,
                                this.offsetY);
                            if (null == c) b = (b & 255) << 24 | (b >>> 24 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 8 & 255;
                            else switch (c) {
                                case 1:
                                    break;
                                case 2:
                                    b = (b & 255) << 24 | (b >>> 8 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 24 & 255;
                                    break;
                                default:
                                    b = (b & 255) << 24 | (b >>> 24 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 8 & 255
                            }
                            this.buffer.__srcBitmapData.fillRect(a.__toFlashRectangle(), b)
                    }
                },
                getPixel: function (a, b, c) {
                    if (null == this.buffer || 0 > a || 0 > b || a >= this.width || b >= this.height) return 0;
                    switch (this.type._hx_index) {
                        case 0:
                            return Ba.getPixel(this, a, b, c);
                        case 1:
                            return Ba.convertToData(this),
                                Rb.getPixel(this, a, b, c);
                        case 2:
                            a = this.buffer.__srcBitmapData.getPixel(a + this.offsetX, b + this.offsetY);
                            if (null == c) return (a >>> 16 & 255) << 24 | (a >>> 8 & 255) << 16 | (a & 255) << 8 | a >>> 24 & 255;
                            switch (c) {
                                case 1:
                                    return a;
                                case 2:
                                    return (a & 255) << 24 | (a >>> 8 & 255) << 16 | (a >>> 16 & 255) << 8 | a >>> 24 & 255;
                                default:
                                    return (a >>> 16 & 255) << 24 | (a >>> 8 & 255) << 16 | (a & 255) << 8 | a >>> 24 & 255
                            }
                        default:
                            return 0
                    }
                },
                setPixel: function (a, b, c, d) {
                    if (!(null == this.buffer || 0 > a || 0 > b || a >= this.width || b >= this.height)) switch (this.type._hx_index) {
                        case 0:
                            Ba.setPixel(this, a,
                                b, c, d);
                            break;
                        case 1:
                            Ba.convertToData(this);
                            Rb.setPixel(this, a, b, c, d);
                            break;
                        case 2:
                            if (null == d) c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255;
                            else switch (d) {
                                case 1:
                                    break;
                                case 2:
                                    c = (c & 255) << 24 | (c >>> 8 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 24 & 255;
                                    break;
                                default:
                                    c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255
                            }
                            this.buffer.__srcBitmapData.setPixel(a + this.offsetX, b + this.offsetX, c)
                    }
                },
                __clipRect: function (a) {
                    return null == a || 0 > a.x && (a.width -= -a.x, a.x = 0, 0 >= a.x + a.width) || 0 > a.y && (a.height -= -a.y, a.y = 0, 0 >=
                    a.y + a.height) || a.x + a.width >= this.width && (a.width -= a.x + a.width - this.width, 0 >= a.width) || a.y + a.height >= this.height && (a.height -= a.y + a.height - this.height, 0 >= a.height) ? null : a
                },
                __fromBase64: function (a, b, c) {
                    var d = this,
                        e = new window.Image;
                    e.addEventListener("load", function (a) {
                        d.buffer = new ae(null, e.width, e.height);
                        d.buffer.__srcImage = e;
                        d.offsetX = 0;
                        d.offsetY = 0;
                        d.width = d.buffer.width;
                        d.height = d.buffer.height;
                        null != c && c(d)
                    }, !1);
                    e.src = "data:" + b + ";base64," + a
                },
                __fromBytes: function (a, b) {
                    if (qb.__isPNG(a)) var c = "image/png";
                    else if (qb.__isJPG(a)) c = "image/jpeg";
                    else if (qb.__isGIF(a)) c = "image/gif";
                    else return !1;
                    this.__fromBase64($d.encode(a), c, b);
                    return !0
                },
                __fromFile: function (a, b, c) {
                    var d = this,
                        e = new window.Image;
                    ta.__isSameOrigin(a) || (e.crossOrigin = "Anonymous");
                    e.onload = function (a) {
                        d.buffer = new ae(null, e.width, e.height);
                        d.buffer.__srcImage = e;
                        d.width = e.width;
                        d.height = e.height;
                        null != b && b(d)
                    };
                    e.onerror = function (a) {
                        null != c && c()
                    };
                    e.src = a;
                    return !0
                },
                __fromImageBuffer: function (a) {
                    this.buffer = a;
                    null != a && (-1 == this.width && (this.width =
                        a.width), -1 == this.height && (this.height = a.height))
                },
                get_data: function () {
                    null == this.buffer.data && 0 < this.buffer.width && 0 < this.buffer.height && Ba.convertToData(this);
                    return this.buffer.data
                },
                get_format: function () {
                    return this.buffer.format
                },
                set_format: function (a) {
                    this.buffer.format != a && 1 == this.type._hx_index && Rb.setFormat(this, a);
                    return this.buffer.format = a
                },
                get_premultiplied: function () {
                    return this.buffer.premultiplied
                },
                set_premultiplied: function (a) {
                    if (a && !this.buffer.premultiplied) switch (this.type._hx_index) {
                        case 0:
                        case 1:
                            Ba.convertToData(this),
                                Rb.multiplyAlpha(this)
                    } else !a && this.buffer.premultiplied && 1 == this.type._hx_index && (Ba.convertToData(this), Rb.unmultiplyAlpha(this));
                    return a
                },
                get_rect: function () {
                    return new Mc(0, 0, this.width, this.height)
                },
                get_src: function () {
                    null != this.buffer.__srcCanvas || null == this.buffer.data && this.type != qc.DATA || Ba.convertToCanvas(this);
                    return this.buffer.get_src()
                },
                get_transparent: function () {
                    return null == this.buffer ? !1 : this.buffer.transparent
                },
                set_transparent: function (a) {
                    return null == this.buffer ? !1 : this.buffer.transparent =
                        a
                },
                __class__: qb,
                __properties__: {
                    set_transparent: "set_transparent",
                    get_transparent: "get_transparent",
                    get_src: "get_src",
                    get_rect: "get_rect",
                    set_premultiplied: "set_premultiplied",
                    get_premultiplied: "get_premultiplied",
                    set_format: "set_format",
                    get_format: "get_format",
                    get_data: "get_data"
                }
            };
            var ae = function (a, b, c, d, e) {
                null == d && (d = 32);
                null == c && (c = 0);
                null == b && (b = 0);
                this.data = a;
                this.width = b;
                this.height = c;
                this.bitsPerPixel = d;
                this.format = null == e ? 0 : e;
                this.premultiplied = !1;
                this.transparent = !0
            };
            g["lime.graphics.ImageBuffer"] =
                ae;
            ae.__name__ = "lime.graphics.ImageBuffer";
            ae.prototype = {
                clone: function () {
                    var a = new ae(this.data, this.width, this.height, this.bitsPerPixel);
                    if (null != this.data) {
                        var b = this.data.byteLength,
                            c = null,
                            d = null,
                            e = null,
                            f = null,
                            h = null;
                        b = null != b ? new Uint8Array(b) : null != c ? new Uint8Array(c) : null != d ? new Uint8Array(d.__array) : null != e ? new Uint8Array(e) : null != f ? null == h ? new Uint8Array(f, 0) : new Uint8Array(f, 0, h) : null;
                        a.data = b;
                        d = c = b = null;
                        e = this.data;
                        h = f = null;
                        b = null != b ? new Uint8Array(b) : null != c ? new Uint8Array(c) : null != d ?
                            new Uint8Array(d.__array) : null != e ? new Uint8Array(e) : null != f ? null == h ? new Uint8Array(f, 0) : new Uint8Array(f, 0, h) : null;
                        a.data.set(b)
                    } else null != this.__srcImageData ? (a.__srcCanvas = window.document.createElement("canvas"), a.__srcContext = a.__srcCanvas.getContext("2d"), a.__srcCanvas.width = this.__srcImageData.width, a.__srcCanvas.height = this.__srcImageData.height, a.__srcImageData = a.__srcContext.createImageData(this.__srcImageData.width, this.__srcImageData.height), b = new Uint8ClampedArray(this.__srcImageData.data),
                        a.__srcImageData.data.set(b)) : null != this.__srcCanvas ? (a.__srcCanvas = window.document.createElement("canvas"), a.__srcContext = a.__srcCanvas.getContext("2d"), a.__srcCanvas.width = this.__srcCanvas.width, a.__srcCanvas.height = this.__srcCanvas.height, a.__srcContext.drawImage(this.__srcCanvas, 0, 0)) : a.__srcImage = this.__srcImage;
                    a.bitsPerPixel = this.bitsPerPixel;
                    a.format = this.format;
                    a.premultiplied = this.premultiplied;
                    a.transparent = this.transparent;
                    return a
                },
                get_src: function () {
                    return null != this.__srcImage ? this.__srcImage :
                        this.__srcCanvas
                },
                set_src: function (a) {
                    a instanceof Image ? this.__srcImage = a : a instanceof HTMLCanvasElement && (this.__srcCanvas = a, this.__srcContext = this.__srcCanvas.getContext("2d"));
                    return a
                },
                get_stride: function () {
                    return this.width * (this.bitsPerPixel / 8 | 0)
                },
                __class__: ae,
                __properties__: {
                    get_stride: "get_stride",
                    set_src: "set_src",
                    get_src: "get_src"
                }
            };
            var Xf = v["lime.graphics.ImageChannel"] = {
                __ename__: "lime.graphics.ImageChannel",
                __constructs__: null,
                RED: {
                    _hx_name: "RED",
                    _hx_index: 0,
                    __enum__: "lime.graphics.ImageChannel",
                    toString: q
                },
                GREEN: {
                    _hx_name: "GREEN",
                    _hx_index: 1,
                    __enum__: "lime.graphics.ImageChannel",
                    toString: q
                },
                BLUE: {
                    _hx_name: "BLUE",
                    _hx_index: 2,
                    __enum__: "lime.graphics.ImageChannel",
                    toString: q
                },
                ALPHA: {
                    _hx_name: "ALPHA",
                    _hx_index: 3,
                    __enum__: "lime.graphics.ImageChannel",
                    toString: q
                }
            };
            Xf.__constructs__ = [Xf.RED, Xf.GREEN, Xf.BLUE, Xf.ALPHA];
            var qc = v["lime.graphics.ImageType"] = {
                __ename__: "lime.graphics.ImageType",
                __constructs__: null,
                CANVAS: {
                    _hx_name: "CANVAS",
                    _hx_index: 0,
                    __enum__: "lime.graphics.ImageType",
                    toString: q
                },
                DATA: {
                    _hx_name: "DATA",
                    _hx_index: 1,
                    __enum__: "lime.graphics.ImageType",
                    toString: q
                },
                FLASH: {
                    _hx_name: "FLASH",
                    _hx_index: 2,
                    __enum__: "lime.graphics.ImageType",
                    toString: q
                },
                CUSTOM: {
                    _hx_name: "CUSTOM",
                    _hx_index: 3,
                    __enum__: "lime.graphics.ImageType",
                    toString: q
                }
            };
            qc.__constructs__ = [qc.CANVAS, qc.DATA, qc.FLASH, qc.CUSTOM];
            var Bk = function () {
            };
            g["lime.graphics.RenderContext"] = Bk;
            Bk.__name__ = "lime.graphics.RenderContext";
            Bk.prototype = {
                __class__: Bk
            };
            var Yl = {
                    uniform2fv: function (a, b, c, d, e) {
                        null != d ? a.uniform2fv(b, c, d, e) : a.uniform2fv(b, c)
                    }
                },
                Gb = {
                    bufferData: function (a, b, c, d) {
                        a.bufferData(b, c, d)
                    },
                    texImage2D: function (a, b, c, d, e, f, h, r, m, g) {
                        null != r ? a.texImage2D(b, c, d, e, f, h, r, m, g) : a.texImage2D(b, c, d, e, f, h)
                    },
                    uniformMatrix2fv: function (a, b, c, d) {
                        a.uniformMatrix2fv(b, c, d)
                    },
                    uniformMatrix3fv: function (a, b, c, d) {
                        a.uniformMatrix3fv(b, c, d)
                    },
                    uniformMatrix4fv: function (a, b, c, d) {
                        a.uniformMatrix4fv(b, c, d)
                    },
                    fromWebGL2RenderContext: function (a) {
                        return a
                    }
                },
                Al = function (a) {
                };
            g["lime.graphics.cairo.Cairo"] = Al;
            Al.__name__ = "lime.graphics.cairo.Cairo";
            Al.prototype = {
                clip: function () {
                },
                identityMatrix: function () {
                },
                newPath: function () {
                },
                paint: function () {
                },
                rectangle: function (a, b, c, d) {
                },
                restore: function () {
                },
                save: function () {
                },
                setOperator: function (a) {
                    return a
                },
                setSourceRGB: function (a, b, c) {
                },
                set_matrix: function (a) {
                    return a
                },
                __class__: Al,
                __properties__: {
                    set_matrix: "set_matrix"
                }
            };
            var Zl = {
                    flush: function (a) {
                    }
                },
                te = function () {
                };
            g["lime.graphics.opengl.GL"] = te;
            te.__name__ = "lime.graphics.opengl.GL";
            var Bl = function () {
                this.STACK_UNDERFLOW = 1284;
                this.STACK_OVERFLOW = 1283;
                this.CONTEXT_FLAG_DEBUG_BIT =
                    2;
                this.DEBUG_OUTPUT = 37600;
                this.DEBUG_SEVERITY_LOW = 37192;
                this.DEBUG_SEVERITY_MEDIUM = 37191;
                this.DEBUG_SEVERITY_HIGH = 37190;
                this.DEBUG_LOGGED_MESSAGES = 37189;
                this.MAX_DEBUG_LOGGED_MESSAGES = 37188;
                this.MAX_DEBUG_MESSAGE_LENGTH = 37187;
                this.MAX_LABEL_LENGTH = 33512;
                this.SAMPLER = 33510;
                this.QUERY = 33507;
                this.PROGRAM = 33506;
                this.SHADER = 33505;
                this.BUFFER = 33504;
                this.DEBUG_GROUP_STACK_DEPTH = 33389;
                this.MAX_DEBUG_GROUP_STACK_DEPTH = 33388;
                this.DEBUG_SEVERITY_NOTIFICATION = 33387;
                this.DEBUG_TYPE_POP_GROUP = 33386;
                this.DEBUG_TYPE_PUSH_GROUP =
                    33385;
                this.DEBUG_TYPE_MARKER = 33384;
                this.DEBUG_TYPE_OTHER = 33361;
                this.DEBUG_TYPE_PERFORMANCE = 33360;
                this.DEBUG_TYPE_PORTABILITY = 33359;
                this.DEBUG_TYPE_UNDEFINED_BEHAVIOR = 33358;
                this.DEBUG_TYPE_DEPRECATED_BEHAVIOR = 33357;
                this.DEBUG_TYPE_ERROR = 33356;
                this.DEBUG_SOURCE_OTHER = 33355;
                this.DEBUG_SOURCE_APPLICATION = 33354;
                this.DEBUG_SOURCE_THIRD_PARTY = 33353;
                this.DEBUG_SOURCE_SHADER_COMPILER = 33352;
                this.DEBUG_SOURCE_WINDOW_SYSTEM = 33351;
                this.DEBUG_SOURCE_API = 33350;
                this.DEBUG_CALLBACK_USER_PARAM = 33349;
                this.DEBUG_CALLBACK_FUNCTION =
                    33348;
                this.DEBUG_NEXT_LOGGED_MESSAGE_LENGTH = 33347;
                this.DEBUG_OUTPUT_SYNCHRONOUS = 33346
            };
            g["lime.graphics.opengl.ext.KHR_debug"] = Bl;
            Bl.__name__ = "lime.graphics.opengl.ext.KHR_debug";
            Bl.prototype = {
                __class__: Bl
            };
            var ec = {
                    getAlphaTable: function (a) {
                        null == ec.__alphaTable && (ec.__alphaTable = new Uint8Array(256));
                        ec.__alphaTable[0] = 0;
                        for (var b = 1; 256 > b;) {
                            var c = b++;
                            var d = Math.floor(c * a[18] + 255 * a[19]);
                            255 < d && (d = 255);
                            0 > d && (d = 0);
                            ec.__alphaTable[c] = d
                        }
                        return ec.__alphaTable
                    },
                    getBlueTable: function (a) {
                        null == ec.__blueTable &&
                        (ec.__blueTable = new Uint8Array(256));
                        for (var b, c = 0; 256 > c;) {
                            var d = c++;
                            b = Math.floor(d * a[12] + 255 * a[14]);
                            255 < b && (b = 255);
                            0 > b && (b = 0);
                            ec.__blueTable[d] = b
                        }
                        return ec.__blueTable
                    },
                    getGreenTable: function (a) {
                        null == ec.__greenTable && (ec.__greenTable = new Uint8Array(256));
                        for (var b, c = 0; 256 > c;) {
                            var d = c++;
                            b = Math.floor(d * a[6] + 255 * a[9]);
                            255 < b && (b = 255);
                            0 > b && (b = 0);
                            ec.__greenTable[d] = b
                        }
                        return ec.__greenTable
                    },
                    getRedTable: function (a) {
                        null == ec.__redTable && (ec.__redTable = new Uint8Array(256));
                        for (var b, c = 0; 256 > c;) {
                            var d = c++;
                            b = Math.floor(d * a[0] + 255 * a[4]);
                            255 < b && (b = 255);
                            0 > b && (b = 0);
                            ec.__redTable[d] = b
                        }
                        return ec.__redTable
                    },
                    __toFlashColorTransform: function (a) {
                        return null
                    }
                },
                Ya = {
                    _new: function (a) {
                        if (null == a || 16 != a.length) a = Ya.__identity, a = null != a ? new Float32Array(a) : null;
                        return a
                    },
                    append: function (a, b) {
                        var c = a[0],
                            d = a[4],
                            e = a[8],
                            f = a[12],
                            h = a[1],
                            r = a[5],
                            m = a[9],
                            g = a[13],
                            n = a[2],
                            k = a[6],
                            q = a[10],
                            l = a[14],
                            p = a[3],
                            y = a[7],
                            v = a[11],
                            t = a[15],
                            B = Ya.get(b, 0),
                            E = Ya.get(b, 4),
                            z = Ya.get(b, 8),
                            x = Ya.get(b, 12),
                            A = Ya.get(b, 1),
                            u = Ya.get(b, 5),
                            N = Ya.get(b, 9),
                            U = Ya.get(b,
                                13),
                            J = Ya.get(b, 2),
                            I = Ya.get(b, 6),
                            D = Ya.get(b, 10),
                            ma = Ya.get(b, 14),
                            ca = Ya.get(b, 3),
                            F = Ya.get(b, 7),
                            w = Ya.get(b, 11);
                        b = Ya.get(b, 15);
                        a[0] = c * B + h * E + n * z + p * x;
                        a[1] = c * A + h * u + n * N + p * U;
                        a[2] = c * J + h * I + n * D + p * ma;
                        a[3] = c * ca + h * F + n * w + p * b;
                        a[4] = d * B + r * E + k * z + y * x;
                        a[5] = d * A + r * u + k * N + y * U;
                        a[6] = d * J + r * I + k * D + y * ma;
                        a[7] = d * ca + r * F + k * w + y * b;
                        a[8] = e * B + m * E + q * z + v * x;
                        a[9] = e * A + m * u + q * N + v * U;
                        a[10] = e * J + m * I + q * D + v * ma;
                        a[11] = e * ca + m * F + q * w + v * b;
                        a[12] = f * B + g * E + l * z + t * x;
                        a[13] = f * A + g * u + l * N + t * U;
                        a[14] = f * J + g * I + l * D + t * ma;
                        a[15] = f * ca + g * F + l * w + t * b
                    },
                    createOrtho: function (a, b, c, d,
                                           e, f, h) {
                        var r = 1 / (c - b),
                            m = 1 / (e - d),
                            g = 1 / (h - f);
                        a[0] = 2 * r;
                        a[1] = 0;
                        a[2] = 0;
                        a[3] = 0;
                        a[4] = 0;
                        a[5] = 2 * m;
                        a[6] = 0;
                        a[7] = 0;
                        a[8] = 0;
                        a[9] = 0;
                        a[10] = -2 * g;
                        a[11] = 0;
                        a[12] = -(b + c) * r;
                        a[13] = -(d + e) * m;
                        a[14] = -(f + h) * g;
                        a[15] = 1
                    },
                    identity: function (a) {
                        a[0] = 1;
                        a[1] = 0;
                        a[2] = 0;
                        a[3] = 0;
                        a[4] = 0;
                        a[5] = 1;
                        a[6] = 0;
                        a[7] = 0;
                        a[8] = 0;
                        a[9] = 0;
                        a[10] = 1;
                        a[11] = 0;
                        a[12] = 0;
                        a[13] = 0;
                        a[14] = 0;
                        a[15] = 1
                    },
                    get: function (a, b) {
                        return a[b]
                    },
                    set: function (a, b, c) {
                        return a[b] = c
                    }
                },
                K = {},
                Mc = function (a, b, c, d) {
                    null == d && (d = 0);
                    null == c && (c = 0);
                    null == b && (b = 0);
                    null == a && (a = 0);
                    this.x = a;
                    this.y = b;
                    this.width =
                        c;
                    this.height = d
                };
            g["lime.math.Rectangle"] = Mc;
            Mc.__name__ = "lime.math.Rectangle";
            Mc.prototype = {
                intersection: function (a, b) {
                    null == b && (b = new Mc);
                    var c = this.x < a.x ? a.x : this.x,
                        d = this.get_right() > a.get_right() ? a.get_right() : this.get_right();
                    if (d <= c) return b.setEmpty(), b;
                    var e = this.y < a.y ? a.y : this.y;
                    a = this.get_bottom() > a.get_bottom() ? a.get_bottom() : this.get_bottom();
                    if (a <= e) return b.setEmpty(), b;
                    b.x = c;
                    b.y = e;
                    b.width = d - c;
                    b.height = a - e;
                    return b
                },
                offset: function (a, b) {
                    this.x += a;
                    this.y += b
                },
                setEmpty: function () {
                    this.x =
                        this.y = this.width = this.height = 0
                },
                setTo: function (a, b, c, d) {
                    this.x = a;
                    this.y = b;
                    this.width = c;
                    this.height = d
                },
                __toFlashRectangle: function () {
                    return null
                },
                get_bottom: function () {
                    return this.y + this.height
                },
                get_right: function () {
                    return this.x + this.width
                },
                __class__: Mc,
                __properties__: {
                    get_right: "get_right",
                    get_bottom: "get_bottom"
                }
            };
            var mf = function (a, b) {
                null == b && (b = 0);
                null == a && (a = 0);
                this.x = a;
                this.y = b
            };
            g["lime.math.Vector2"] = mf;
            mf.__name__ = "lime.math.Vector2";
            mf.prototype = {
                offset: function (a, b) {
                    this.x += a;
                    this.y += b
                },
                __toFlashPoint: function () {
                    return null
                },
                __class__: mf
            };
            var zk = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 0);
                this.w = d;
                this.x = a;
                this.y = b;
                this.z = c
            };
            g["lime.math.Vector4"] = zk;
            zk.__name__ = "lime.math.Vector4";
            zk.prototype = {
                __class__: zk
            };
            var Xb = function () {
            };
            g["lime.media.AudioBuffer"] = Xb;
            Xb.__name__ = "lime.media.AudioBuffer";
            Xb.fromBytes = function (a) {
                if (null == a) return null;
                var b = new Xb;
                b.set_src(new Howl({
                    src: ["data:" + Xb.__getCodec(a) + ";base64," + $d.encode(a)],
                    html5: !0,
                    preload: !1
                }));
                return b
            };
            Xb.fromFile = function (a) {
                if (null == a) return null;
                var b = new Xb;
                b.__srcHowl = new Howl({
                    src: [a],
                    preload: !1
                });
                return b
            };
            Xb.fromFiles = function (a) {
                var b = new Xb;
                b.__srcHowl = new Howl({
                    src: a,
                    preload: !1
                });
                return b
            };
            Xb.loadFromFile = function (a) {
                var b = new Kc,
                    c = Xb.fromFile(a);
                null != c ? null != c && (c.__srcHowl.on("load", function () {
                    b.complete(c)
                }), c.__srcHowl.on("loaderror", function (a, c) {
                    b.error(c)
                }), c.__srcHowl.load()) : b.error(null);
                return b.future
            };
            Xb.loadFromFiles = function (a) {
                var b = new Kc,
                    c = Xb.fromFiles(a);
                null != c ? (c.__srcHowl.on("load", function () {
                    b.complete(c)
                }), c.__srcHowl.on("loaderror", function () {
                    b.error(null)
                }), c.__srcHowl.load()) : b.error(null);
                return b.future
            };
            Xb.__getCodec = function (a) {
                switch (a.getString(0, 4)) {
                    case "OggS":
                        return "audio/ogg";
                    case "RIFF":
                        if ("WAVE" == a.getString(8, 4)) return "audio/wav";
                        var b = a.b[1],
                            c = a.b[2];
                        switch (a.b[0]) {
                            case 73:
                                if (68 == b && 51 == c) return "audio/mp3";
                                break;
                            case 255:
                                switch (b) {
                                    case 243:
                                    case 250:
                                    case 251:
                                        return "audio/mp3"
                                }
                        }
                        break;
                    case "fLaC":
                        return "audio/flac";
                    default:
                        switch (b =
                            a.b[1], c = a.b[2], a.b[0]) {
                            case 73:
                                if (68 == b && 51 == c) return "audio/mp3";
                                break;
                            case 255:
                                switch (b) {
                                    case 243:
                                    case 250:
                                    case 251:
                                        return "audio/mp3"
                                }
                        }
                }
                ua.error("Unsupported sound format", {

                    className: "lime.media.AudioBuffer",
                    methodName: "__getCodec"
                });
                return null
            };
            Xb.prototype = {
                set_src: function (a) {
                    return this.__srcHowl = a
                },
                __class__: Xb,
                __properties__: {
                    set_src: "set_src"
                }
            };
            var Pk = function (a) {
                if ("custom" != a) {
                    if (null == a || "web" == a) try {
                        window.AudioContext = window.AudioContext ||
                            window.webkitAudioContext, this.web = new window.AudioContext, this.type = "web"
                    } catch (b) {
                        Ia.lastError = b
                    }
                    null == this.web && "web" != a && (this.html5 = new Ok, this.type = "html5")
                } else this.type = "custom"
            };
            g["lime.media.AudioContext"] = Pk;
            Pk.__name__ = "lime.media.AudioContext";
            Pk.prototype = {
                __class__: Pk
            };
            var fe = function () {
            };
            g["lime.media.AudioManager"] = fe;
            fe.__name__ = "lime.media.AudioManager";
            fe.init = function (a) {
                if (null == fe.context) {
                    if (null == a && (fe.context = new Pk, a = fe.context, "openal" == a.type)) {
                        var b = a.openal,
                            c = b.openDevice();
                        c = b.createContext(c);
                        b.makeContextCurrent(c);
                        b.processContext(c)
                    }
                    fe.context = a
                }
            };
            var Cl = function (a, b, c, d) {
                null == d && (d = 0);
                null == b && (b = 0);
                this.onComplete = new Wb;
                this.buffer = a;
                this.offset = b;
                this.__backend = new Ak(this);
                null != c && 0 != c && this.set_length(c);
                this.set_loops(d);
                null != a && this.init()
            };
            g["lime.media.AudioSource"] = Cl;
            Cl.__name__ = "lime.media.AudioSource";
            Cl.prototype = {
                dispose: function () {
                    this.__backend.dispose()
                },
                init: function () {
                    this.__backend.init()
                },
                play: function () {
                    this.__backend.play()
                },
                stop: function () {
                    this.__backend.stop()
                },
                get_currentTime: function () {
                    return this.__backend.getCurrentTime()
                },
                set_currentTime: function (a) {
                    return this.__backend.setCurrentTime(a)
                },
                get_gain: function () {
                    return this.__backend.getGain()
                },
                set_gain: function (a) {
                    return this.__backend.setGain(a)
                },
                set_length: function (a) {
                    return this.__backend.setLength(a)
                },
                set_loops: function (a) {
                    return this.__backend.setLoops(a)
                },
                get_position: function () {
                    return this.__backend.getPosition()
                },
                set_position: function (a) {
                    return this.__backend.setPosition(a)
                },
                __class__: Cl,
                __properties__: {
                    set_loops: "set_loops",
                    set_length: "set_length",
                    set_position: "set_position",
                    get_position: "get_position",
                    set_gain: "set_gain",
                    get_gain: "get_gain",
                    set_currentTime: "set_currentTime",
                    get_currentTime: "get_currentTime"
                }
            };
            var Ok = function () {
            };
            g["lime.media.HTML5AudioContext"] = Ok;
            Ok.__name__ = "lime.media.HTML5AudioContext";
            Ok.prototype = {
                __class__: Ok
            };
            var Dl = function () {
            };
            g["lime.media.OpenALAudioContext"] = Dl;
            Dl.__name__ = "lime.media.OpenALAudioContext";
            Dl.prototype = {
                createContext: function (a, b) {
                    return Se.createContext(a, b)
                },
                makeContextCurrent: function (a) {
                    return Se.makeContextCurrent(a)
                },
                openDevice: function (a) {
                    return Se.openDevice(a)
                },
                processContext: function (a) {
                    Se.processContext(a)
                },
                __class__: Dl
            };
            var Se = function () {
            };
            g["lime.media.openal.ALC"] = Se;
            Se.__name__ = "lime.media.openal.ALC";
            Se.createContext = function (a, b) {
                return null
            };
            Se.makeContextCurrent = function (a) {
                return !1
            };
            Se.openDevice = function (a) {
                return null
            };
            Se.processContext = function (a) {
            };
            var dj = function () {
            };
            g["lime.net._IHTTPRequest"] = dj;
            dj.__name__ = "lime.net._IHTTPRequest";
            dj.__isInterface__ = !0;
            dj.prototype = {
                __class__: dj
            };
            var Kd =
                function (a) {
                    this.uri = a;
                    this.contentType = "application/x-www-form-urlencoded";
                    this.followRedirects = !0;
                    this.enableResponseHeaders = !1;
                    this.formData = new Ha;
                    this.headers = [];
                    this.method = "GET";
                    this.timeout = 3E4;
                    this.withCredentials = !1;
                    this.manageCookies = !0;
                    this.__backend = new ta;
                    this.__backend.init(this)
                };
            g["lime.net._HTTPRequest.AbstractHTTPRequest"] = Kd;
            Kd.__name__ = "lime.net._HTTPRequest.AbstractHTTPRequest";
            Kd.__interfaces__ = [dj];
            Kd.prototype = {
                __class__: Kd
            };
            var Te = function (a) {
                Kd.call(this, a)
            };
            g["lime.net._HTTPRequest_Bytes"] =
                Te;
            Te.__name__ = "lime.net._HTTPRequest_Bytes";
            Te.__super__ = Kd;
            Te.prototype = l(Kd.prototype, {
                fromBytes: function (a) {
                    return a
                },
                load: function (a) {
                    var b = this;
                    null != a && (this.uri = a);
                    var c = new Kc;
                    a = this.__backend.loadData(this.uri);
                    a.onProgress(p(c, c.progress));
                    a.onError(function (a) {
                        b.responseData = a.responseData;
                        c.error(a.error)
                    });
                    a.onComplete(function (a) {
                        b.responseData = b.fromBytes(a);
                        c.complete(b.responseData)
                    });
                    return c.future
                },
                __class__: Te
            });
            var $f = function (a) {
                Kd.call(this, a)
            };
            g["lime.net._HTTPRequest_String"] =
                $f;
            $f.__name__ = "lime.net._HTTPRequest_String";
            $f.__super__ = Kd;
            $f.prototype = l(Kd.prototype, {
                load: function (a) {
                    var b = this;
                    null != a && (this.uri = a);
                    var c = new Kc;
                    a = this.__backend.loadText(this.uri);
                    a.onProgress(p(c, c.progress));
                    a.onError(function (a) {
                        b.responseData = a.responseData;
                        c.error(a.error)
                    });
                    a.onComplete(function (a) {
                        b.responseData = a;
                        c.complete(b.responseData)
                    });
                    return c.future
                },
                __class__: $f
            });
            var Wf = function (a, b) {
                this.error = a;
                this.responseData = b
            };
            g["lime.net._HTTPRequestErrorResponse"] = Wf;
            Wf.__name__ =
                "lime.net._HTTPRequestErrorResponse";
            Wf.prototype = {
                __class__: Wf
            };
            var Yi = function (a, b) {
                null == b && (b = "");
                this.name = a;
                this.value = b
            };
            g["lime.net.HTTPRequestHeader"] = Yi;
            Yi.__name__ = "lime.net.HTTPRequestHeader";
            Yi.prototype = {
                __class__: Yi
            };
            var ej = function (a) {
                Kd.call(this, a)
            };
            g["lime.net._HTTPRequest_lime_utils_Bytes"] = ej;
            ej.__name__ = "lime.net._HTTPRequest_lime_utils_Bytes";
            ej.__super__ = Te;
            ej.prototype = l(Te.prototype, {
                fromBytes: function (a) {
                    return nf.fromBytes(a)
                },
                __class__: ej
            });
            var fj = function (a) {
                Kd.call(this,
                    a)
            };
            g["lime.net._HTTPRequest_openfl_utils_ByteArray"] = fj;
            fj.__name__ = "lime.net._HTTPRequest_openfl_utils_ByteArray";
            fj.__super__ = Te;
            fj.prototype = l(Te.prototype, {
                fromBytes: function (a) {
                    return Ue.fromBytes(a)
                },
                __class__: fj
            });
            var Vb = function () {
            };
            g["lime.system.Clipboard"] = Vb;
            Vb.__name__ = "lime.system.Clipboard";
            Vb.__properties__ = {
                set_text: "set_text",
                get_text: "get_text"
            };
            Vb.__update = function () {
                var a = Vb._text;
                Vb._text = null;
                Vb.__updated = !0;
                Vb._text != a && Vb.onUpdate.dispatch()
            };
            Vb.get_text = function () {
                Vb.__update();
                return Vb._text
            };
            Vb.set_text = function (a) {
                var b = Vb._text;
                Vb._text = a;
                var c = ca.current.__window;
                null != c && c.__backend.setClipboard(a);
                Vb._text != b && Vb.onUpdate.dispatch();
                return a
            };
            var gj = v["lime.system.Endian"] = {
                __ename__: "lime.system.Endian",
                __constructs__: null,
                LITTLE_ENDIAN: {
                    _hx_name: "LITTLE_ENDIAN",
                    _hx_index: 0,
                    __enum__: "lime.system.Endian",
                    toString: q
                },
                BIG_ENDIAN: {
                    _hx_name: "BIG_ENDIAN",
                    _hx_index: 1,
                    __enum__: "lime.system.Endian",
                    toString: q
                }
            };
            gj.__constructs__ = [gj.LITTLE_ENDIAN, gj.BIG_ENDIAN];
            var ge = function (a,
                               b) {
                this.onUpdate = new Dk;
                this.type = a;
                this.id = b
            };
            g["lime.system.Sensor"] = ge;
            ge.__name__ = "lime.system.Sensor";
            ge.registerSensor = function (a, b) {
                a = new ge(a, b);
                ge.sensors.push(a);
                return ge.sensorByID.h[b] = a
            };
            ge.prototype = {
                __class__: ge
            };
            var Kl = v["lime.system.SensorType"] = {
                __ename__: "lime.system.SensorType",
                __constructs__: null,
                ACCELEROMETER: {
                    _hx_name: "ACCELEROMETER",
                    _hx_index: 0,
                    __enum__: "lime.system.SensorType",
                    toString: q
                }
            };
            Kl.__constructs__ = [Kl.ACCELEROMETER];
            var Yb = function () {
            };
            g["lime.system.System"] = Yb;
            Yb.__name__ = "lime.system.System";
            Yb.__properties__ = {
                get_endianness: "get_endianness"
            };
            Yb.embed = u.lime.embed = function (a, b, c, d, e) {
                if (null != Yb.__applicationEntryPoint && Object.prototype.hasOwnProperty.call(Yb.__applicationEntryPoint.h, a)) {
                    var f = "string" == typeof b ? window.document.getElementById(b) : null == b ? window.document.createElement("div") : b;
                    null == f ? window.console.log("[lime.embed] ERROR: Cannot find target element: " + n.string(b)) : (null == c && (c = 0), null == d && (d = 0), null == e && (e = {}), Object.prototype.hasOwnProperty.call(e,
                        "background") && "string" == typeof e.background && (b = R.replace(n.string(e.background), "#", ""), -1 < b.indexOf("0x") ? e.background = n.parseInt(b) : e.background = n.parseInt("0x" + b)), e.element = f, e.width = c, e.height = d, Yb.__applicationEntryPoint.h[a](e))
                }
            };
            Yb.exit = function (a) {
                var b = ca.current;
                if (null != b && (b.onExit.dispatch(a), b.onExit.canceled)) return;
                null != b && null != b.__window && b.__window.close()
            };
            Yb.getTimer = function () {
                return window.performance.now() | 0
            };
            Yb.openURL = function (a, b) {
                null == b && (b = "_blank");
                null != a && window.open(a,
                    b)
            };
            Yb.__registerEntryPoint = function (a, b) {
                null == Yb.__applicationEntryPoint && (Yb.__applicationEntryPoint = new Ha);
                Yb.__applicationEntryPoint.h[a] = b
            };
            Yb.get_endianness = function () {
                if (null == Yb.__endianness) {
                    var a = new ArrayBuffer(2),
                        b = null,
                        c = null,
                        d = null,
                        e = null,
                        f = null,
                        h = b = null != b ? new Uint8Array(b) : null != c ? new Uint8Array(c) : null != d ? new Uint8Array(d.__array) : null != e ? new Uint8Array(e) : null != a ? null == f ? new Uint8Array(a, 0) : new Uint8Array(a, 0, f) : null;
                    f = e = d = c = b = null;
                    b = null != b ? new Uint16Array(b) : null != c ? new Uint16Array(c) :
                        null != d ? new Uint16Array(d.__array) : null != e ? new Uint16Array(e) : null != a ? null == f ? new Uint16Array(a, 0) : new Uint16Array(a, 0, f) : null;
                    h[0] = 170;
                    h[1] = 187;
                    Yb.__endianness = 43707 == b[0] ? gj.BIG_ENDIAN : gj.LITTLE_ENDIAN
                }
                return Yb.__endianness
            };
            var Ck = function (a, b) {
                null == b && (b = 1);
                null == a && (a = 0);
                this.onRun = new Yf;
                this.onError = new Yf;
                this.onComplete = new Yf;
                this.doWork = new Yf;
                this.minThreads = a;
                this.maxThreads = b;
                this.currentThreads = 0
            };
            g["lime.system.ThreadPool"] = Ck;
            Ck.__name__ = "lime.system.ThreadPool";
            Ck.prototype = {
                queue: function (a) {
                    this.runWork(a)
                },
                sendComplete: function (a) {
                    this.onComplete.dispatch(a)
                },
                sendError: function (a) {
                    this.onError.dispatch(a)
                },
                runWork: function (a) {
                    this.onRun.dispatch(a);
                    this.doWork.dispatch(a)
                },
                __class__: Ck
            };
            var Mb = function (a) {
                this.onDisconnect = new Wb;
                this.onButtonUp = new bj;
                this.onButtonDown = new bj;
                this.onAxisMove = new Lk;
                this.id = a;
                this.connected = !0
            };
            g["lime.ui.Gamepad"] = Mb;
            Mb.__name__ = "lime.ui.Gamepad";
            Mb.__connect = function (a) {
                if (!Mb.devices.h.hasOwnProperty(a)) {
                    var b = new Mb(a);
                    Mb.devices.h[a] = b;
                    Mb.onConnect.dispatch(b)
                }
            };
            Mb.__disconnect = function (a) {
                var b = Mb.devices.h[a];
                null != b && (b.connected = !1);
                Mb.devices.remove(a);
                null != b && b.onDisconnect.dispatch()
            };
            Mb.prototype = {
                __class__: Mb
            };
            var Hb = function (a) {
                this.onTrackballMove = new Hk;
                this.onHatMove = new Jk;
                this.onDisconnect = new Wb;
                this.onButtonUp = new Ze;
                this.onButtonDown = new Ze;
                this.onAxisMove = new Ik;
                this.id = a;
                this.connected = !0
            };
            g["lime.ui.Joystick"] = Hb;
            Hb.__name__ = "lime.ui.Joystick";
            Hb.__connect = function (a) {
                if (!Hb.devices.h.hasOwnProperty(a)) {
                    var b = new Hb(a);
                    Hb.devices.h[a] =
                        b;
                    Hb.onConnect.dispatch(b)
                }
            };
            Hb.__disconnect = function (a) {
                var b = Hb.devices.h[a];
                null != b && (b.connected = !1);
                Hb.devices.remove(a);
                null != b && b.onDisconnect.dispatch()
            };
            Hb.__getDeviceData = function () {
                var a = null;
                try {
                    a = navigator.getGamepads ? navigator.getGamepads() : navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : null
                } catch (b) {
                    Ia.lastError = b
                }
                return a
            };
            Hb.prototype = {
                __class__: Hb
            };
            var bb = {
                    __properties__: {
                        get_shiftKey: "get_shiftKey",
                        get_metaKey: "get_metaKey",
                        get_ctrlKey: "get_ctrlKey",
                        get_altKey: "get_altKey"
                    },
                    get_altKey: function (a) {
                        return 0 >= (a & 256) ? 0 < (a & 512) : !0
                    },
                    get_ctrlKey: function (a) {
                        return 0 >= (a & 64) ? 0 < (a & 128) : !0
                    },
                    get_metaKey: function (a) {
                        return 0 >= (a & 1024) ? 0 < (a & 2048) : !0
                    },
                    get_shiftKey: function (a) {
                        return 0 >= (a & 1) ? 0 < (a & 2) : !0
                    }
                },
                zb = v["lime.ui.MouseCursor"] = {
                    __ename__: "lime.ui.MouseCursor",
                    __constructs__: null,
                    ARROW: {
                        _hx_name: "ARROW",
                        _hx_index: 0,
                        __enum__: "lime.ui.MouseCursor",
                        toString: q
                    },
                    CROSSHAIR: {
                        _hx_name: "CROSSHAIR",
                        _hx_index: 1,
                        __enum__: "lime.ui.MouseCursor",
                        toString: q
                    },
                    DEFAULT: {
                        _hx_name: "DEFAULT",
                        _hx_index: 2,
                        __enum__: "lime.ui.MouseCursor",
                        toString: q
                    },
                    MOVE: {
                        _hx_name: "MOVE",
                        _hx_index: 3,
                        __enum__: "lime.ui.MouseCursor",
                        toString: q
                    },
                    POINTER: {
                        _hx_name: "POINTER",
                        _hx_index: 4,
                        __enum__: "lime.ui.MouseCursor",
                        toString: q
                    },
                    RESIZE_NESW: {
                        _hx_name: "RESIZE_NESW",
                        _hx_index: 5,
                        __enum__: "lime.ui.MouseCursor",
                        toString: q
                    },
                    RESIZE_NS: {
                        _hx_name: "RESIZE_NS",
                        _hx_index: 6,
                        __enum__: "lime.ui.MouseCursor",
                        toString: q
                    },
                    RESIZE_NWSE: {
                        _hx_name: "RESIZE_NWSE",
                        _hx_index: 7,
                        __enum__: "lime.ui.MouseCursor",
                        toString: q
                    },
                    RESIZE_WE: {
                        _hx_name: "RESIZE_WE",
                        _hx_index: 8,
                        __enum__: "lime.ui.MouseCursor",
                        toString: q
                    },
                    TEXT: {
                        _hx_name: "TEXT",
                        _hx_index: 9,
                        __enum__: "lime.ui.MouseCursor",
                        toString: q
                    },
                    WAIT: {
                        _hx_name: "WAIT",
                        _hx_index: 10,
                        __enum__: "lime.ui.MouseCursor",
                        toString: q
                    },
                    WAIT_ARROW: {
                        _hx_name: "WAIT_ARROW",
                        _hx_index: 11,
                        __enum__: "lime.ui.MouseCursor",
                        toString: q
                    },
                    CUSTOM: {
                        _hx_name: "CUSTOM",
                        _hx_index: 12,
                        __enum__: "lime.ui.MouseCursor",
                        toString: q
                    }
                };
            zb.__constructs__ = [zb.ARROW, zb.CROSSHAIR, zb.DEFAULT, zb.MOVE, zb.POINTER, zb.RESIZE_NESW, zb.RESIZE_NS, zb.RESIZE_NWSE, zb.RESIZE_WE,
                zb.TEXT, zb.WAIT, zb.WAIT_ARROW, zb.CUSTOM
            ];
            var Re = v["lime.ui.MouseWheelMode"] = {
                __ename__: "lime.ui.MouseWheelMode",
                __constructs__: null,
                PIXELS: {
                    _hx_name: "PIXELS",
                    _hx_index: 0,
                    __enum__: "lime.ui.MouseWheelMode",
                    toString: q
                },
                LINES: {
                    _hx_name: "LINES",
                    _hx_index: 1,
                    __enum__: "lime.ui.MouseWheelMode",
                    toString: q
                },
                PAGES: {
                    _hx_name: "PAGES",
                    _hx_index: 2,
                    __enum__: "lime.ui.MouseWheelMode",
                    toString: q
                },
                UNKNOWN: {
                    _hx_name: "UNKNOWN",
                    _hx_index: 3,
                    __enum__: "lime.ui.MouseWheelMode",
                    toString: q
                }
            };
            Re.__constructs__ = [Re.PIXELS, Re.LINES,
                Re.PAGES, Re.UNKNOWN
            ];
            var Ab = function (a, b, c, d, e, f, h) {
                this.x = a;
                this.y = b;
                this.id = c;
                this.dx = d;
                this.dy = e;
                this.pressure = f;
                this.device = h
            };
            g["lime.ui.Touch"] = Ab;
            Ab.__name__ = "lime.ui.Touch";
            Ab.prototype = {
                __class__: Ab
            };
            var ag = function (a, b) {
                this.clickCount = 0;
                this.onTextInput = new $i;
                this.onTextEdit = new Kk;
                this.onRestore = new Wb;
                this.onResize = new Zi;
                this.onRenderContextRestored = new aj;
                this.onRenderContextLost = new Wb;
                this.onRender = new aj;
                this.onMove = new Ug;
                this.onMouseWheel = new Gk;
                this.onMouseUp = new Ek;
                this.onMouseMoveRelative =
                    new Ug;
                this.onMouseMove = new Ug;
                this.onMouseDown = new Fk;
                this.onMinimize = new Wb;
                this.onLeave = new Wb;
                this.onKeyUp = new cj;
                this.onKeyDown = new cj;
                this.onFullscreen = new Wb;
                this.onFocusOut = new Wb;
                this.onFocusIn = new Wb;
                this.onExpose = new Wb;
                this.onEnter = new Wb;
                this.onDropFile = new $i;
                this.onDeactivate = new Wb;
                this.onClose = new Wb;
                this.onActivate = new Wb;
                this.application = a;
                this.__attributes = null != b ? b : {};
                Object.prototype.hasOwnProperty.call(this.__attributes, "parameters") && (this.parameters = this.__attributes.parameters);
                this.__height = this.__width = 0;
                this.__fullscreen = !1;
                this.__scale = 1;
                this.__y = this.__x = 0;
                this.__title = Object.prototype.hasOwnProperty.call(this.__attributes, "title") ? this.__attributes.title : "";
                this.id = -1;
                this.__backend = new Aa(this)
            };
            g["lime.ui.Window"] = ag;
            ag.__name__ = "lime.ui.Window";
            ag.prototype = {
                close: function () {
                    this.__backend.close()
                },
                readPixels: function (a) {
                    return this.__backend.readPixels(a)
                },
                set_cursor: function (a) {
                    return this.__backend.setCursor(a)
                },
                set_mouseLock: function (a) {
                    this.__backend.setMouseLock(a);
                    return a
                },
                set_fullscreen: function (a) {
                    return this.__fullscreen = this.__backend.setFullscreen(a)
                },
                setTextInputRect: function (a) {
                    return this.__backend.setTextInputRect(a)
                },
                __class__: ag,
                __properties__: {
                    set_mouseLock: "set_mouseLock",
                    set_fullscreen: "set_fullscreen",
                    set_cursor: "set_cursor"
                }
            };
            var Ld = function () {
                this.data = new Ha;
                this.paths = []
            };
            g["lime.utils.AssetBundle"] = Ld;
            Ld.__name__ = "lime.utils.AssetBundle";
            Ld.fromBytes = function (a) {
                a = new Xi(a);
                return Ld.__extractBundle(a)
            };
            Ld.loadFromBytes = function (a) {
                return Jb.withValue(Ld.fromBytes(a))
            };
            Ld.loadFromFile = function (a) {
                return nf.loadFromFile(a).then(Ld.loadFromBytes)
            };
            Ld.__extractBundle =
                function (a) {
                    var b = Tg.readZip(a);
                    a = new Ld;
                    for (b = b.h; null != b;) {
                        var c = b.item;
                        b = b.next;
                        if (c.compressed) {
                            var d = a.data,
                                e = c.fileName,
                                f = nf.decompress(c.data, hj.DEFLATE);
                            d.h[e] = f
                        } else a.data.h[c.fileName] = c.data;
                        a.paths.push(c.fileName)
                    }
                    return a
                };
            Ld.prototype = {
                __class__: Ld
            };
            var Qk = function () {
                this.enabled = !0;
                this.audio = new Ha;
                this.font = new Ha;
                this.image = new Ha;
                this.version = 121622
            };
            g["lime.utils.AssetCache"] = Qk;
            Qk.__name__ = "lime.utils.AssetCache";
            Qk.prototype = {
                exists: function (a, b) {
                    return ("IMAGE" == b || null == b) &&
                    Object.prototype.hasOwnProperty.call(this.image.h, a) || ("FONT" == b || null == b) && Object.prototype.hasOwnProperty.call(this.font.h, a) || ("SOUND" == b || "MUSIC" == b || null == b) && Object.prototype.hasOwnProperty.call(this.audio.h, a) ? !0 : !1
                },
                set: function (a, b, c) {
                    switch (b) {
                        case "FONT":
                            this.font.h[a] = c;
                            break;
                        case "IMAGE":
                            if (!(c instanceof qb)) throw fa.thrown("Cannot cache non-Image asset: " + n.string(c) + " as Image");
                            this.image.h[a] = c;
                            break;
                        case "MUSIC":
                        case "SOUND":
                            if (!(c instanceof Xb)) throw fa.thrown("Cannot cache non-AudioBuffer asset: " +
                                n.string(c) + " as AudioBuffer");
                            this.audio.h[a] = c;
                            break;
                        default:
                            throw fa.thrown(b + " assets are not cachable");
                    }
                },
                clear: function (a) {
                    if (null == a) this.audio = new Ha, this.font = new Ha, this.image = new Ha;
                    else {
                        var b = this.audio.h;
                        b = Object.keys(b);
                        for (var c = b.length, d = 0; d < c;) {
                            var e = b[d++];
                            if (R.startsWith(e, a)) {
                                var f = this.audio;
                                Object.prototype.hasOwnProperty.call(f.h, e) && delete f.h[e]
                            }
                        }
                        b = this.font.h;
                        b = Object.keys(b);
                        c = b.length;
                        for (d = 0; d < c;) e = b[d++], R.startsWith(e, a) && (f = this.font, Object.prototype.hasOwnProperty.call(f.h,
                            e) && delete f.h[e]);
                        b = this.image.h;
                        b = Object.keys(b);
                        c = b.length;
                        for (d = 0; d < c;) e = b[d++], R.startsWith(e, a) && (f = this.image, Object.prototype.hasOwnProperty.call(f.h, e) && delete f.h[e])
                    }
                },
                __class__: Qk
            };
            var sb = function () {
                this.types = new Ha;
                this.sizes = new Ha;
                this.preload = new Ha;
                this.paths = new Ha;
                this.pathGroups = new Ha;
                this.classTypes = new Ha;
                this.cachedText = new Ha;
                this.cachedImages = new Ha;
                this.cachedFonts = new Ha;
                this.cachedBytes = new Ha;
                this.cachedAudioBuffers = new Ha;
                this.onChange = new Wb;
                this.bytesTotal = this.bytesLoaded =
                    0
            };
            g["lime.utils.AssetLibrary"] = sb;
            sb.__name__ = "lime.utils.AssetLibrary";
            sb.fromBundle = function (a) {
                if (Object.prototype.hasOwnProperty.call(a.data.h, "library.json")) {
                    var b = Jc.fromBytes(a.data.h["library.json"]);
                    if (null != b) {
                        if (null == b.libraryType) var c = new sb;
                        else if (c = g[b.libraryType], null != c) c = y.createInstance(c, b.libraryArgs);
                        else return ua.warn("Could not find library type: " + b.libraryType, {

                                className: "lime.utils.AssetLibrary",
                                methodName: "fromBundle"
                            }),
                                null;
                        c.__fromBundle(a, b);
                        return c
                    }
                } else return c = new sb, c.__fromBundle(a), c;
                return null
            };
            sb.fromManifest = function (a) {
                if (null == a) return null;
                if (null == a.libraryType) var b = new sb;
                else if (b = g[a.libraryType], null != b) b = y.createInstance(b, a.libraryArgs);
                else return ua.warn("Could not find library type: " + a.libraryType, {

                        className: "lime.utils.AssetLibrary",
                        methodName: "fromManifest"
                    }), null;
                b.__fromManifest(a);
                return b
            };
            sb.prototype = {
                exists: function (a, b) {
                    b =
                        null != b ? T.__cast(b, String) : null;
                    a = this.types.h[a];
                    return null == a || a != b && ("SOUND" != b && "MUSIC" != b || "MUSIC" != a && "SOUND" != a) && "BINARY" != b && null != b && ("BINARY" != a || "TEXT" != b) ? !1 : !0
                },
                getAsset: function (a, b) {
                    switch (b) {
                        case "BINARY":
                            return this.getBytes(a);
                        case "FONT":
                            return this.getFont(a);
                        case "IMAGE":
                            return this.getImage(a);
                        case "MUSIC":
                        case "SOUND":
                            return this.getAudioBuffer(a);
                        case "TEMPLATE":
                            throw fa.thrown("Not sure how to get template: " + a);
                        case "TEXT":
                            return this.getText(a);
                        default:
                            throw fa.thrown("Unknown asset type: " +
                                b);
                    }
                },
                getAudioBuffer: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a) ? this.cachedAudioBuffers.h[a] : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? Xb.fromBytes(T.__cast(y.createInstance(this.classTypes.h[a], []), nb)) : Xb.fromFile(this.getPath(a))
                },
                getBytes: function (a) {
                    if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a)) return this.cachedBytes.h[a];
                    if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a)) {
                        var b = nf.ofString(this.cachedText.h[a]);
                        return this.cachedBytes.h[a] = b
                    }
                    return Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? T.__cast(y.createInstance(this.classTypes.h[a], []), nb) : nf.fromFile(this.getPath(a))
                },
                getFont: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a) ? this.cachedFonts.h[a] : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? T.__cast(y.createInstance(this.classTypes.h[a], []), fb) : fb.fromFile(this.getPath(a))
                },
                getImage: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedImages.h,
                        a) ? this.cachedImages.h[a] : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? T.__cast(y.createInstance(this.classTypes.h[a], []), qb) : qb.fromFile(this.getPath(a))
                },
                getPath: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.paths.h, a) ? this.paths.h[a] : Object.prototype.hasOwnProperty.call(this.pathGroups.h, a) ? this.pathGroups.h[a][0] : null
                },
                getText: function (a) {
                    if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a)) return this.cachedText.h[a];
                    a = this.getBytes(a);
                    return null == a ? null :
                        a.getString(0, a.length)
                },
                isLocal: function (a, b) {
                    if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) return !0;
                    b = T.__cast(b, String);
                    if (null == b) return Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) || Object.prototype.hasOwnProperty.call(this.cachedText.h, a) || Object.prototype.hasOwnProperty.call(this.cachedImages.h, a) || Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a) ? !0 : Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a);
                    switch (b) {
                        case "FONT":
                            return Object.prototype.hasOwnProperty.call(this.cachedFonts.h,
                                a);
                        case "IMAGE":
                            return Object.prototype.hasOwnProperty.call(this.cachedImages.h, a);
                        case "MUSIC":
                        case "SOUND":
                            return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a);
                        default:
                            return Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) ? !0 : Object.prototype.hasOwnProperty.call(this.cachedText.h, a)
                    }
                },
                load: function () {
                    if (this.loaded) return Jb.withValue(this);
                    if (null == this.promise) {
                        this.promise = new Kc;
                        this.bytesLoadedCache = new Ha;
                        this.assetsLoaded = 0;
                        this.assetsTotal = 1;
                        for (var a = Object.keys(this.preload.h),
                                 b = a.length, c = 0; c < b;) {
                            var d = a[c++];
                            if (this.preload.h[d]) {
                                ua.verbose("Preloading asset: " + d + " [" + this.types.h[d] + "]", {

                                    className: "lime.utils.AssetLibrary",
                                    methodName: "load"
                                });
                                var e = this.types.h[d];
                                if (null != e) switch (e) {
                                    case "BINARY":
                                        this.assetsTotal++;
                                        e = this.loadBytes(d);
                                        e.onProgress(function (a, b) {
                                            return function (c, d) {
                                                b[0].load_onProgress(a[0], c, d)
                                            }
                                        }([d], [this]));
                                        e.onError(function (a, b) {
                                            return function (c) {
                                                b[0].load_onError(a[0], c)
                                            }
                                        }([d], [this]));
                                        e.onComplete(function (a,
                                                               b) {
                                            return function (c) {
                                                b[0].loadBytes_onComplete(a[0], c)
                                            }
                                        }([d], [this]));
                                        break;
                                    case "FONT":
                                        this.assetsTotal++;
                                        e = this.loadFont(d);
                                        e.onProgress(function (a, b) {
                                            return function (c, d) {
                                                b[0].load_onProgress(a[0], c, d)
                                            }
                                        }([d], [this]));
                                        e.onError(function (a, b) {
                                            return function (c) {
                                                b[0].load_onError(a[0], c)
                                            }
                                        }([d], [this]));
                                        e.onComplete(function (a, b) {
                                            return function (c) {
                                                b[0].loadFont_onComplete(a[0], c)
                                            }
                                        }([d], [this]));
                                        break;
                                    case "IMAGE":
                                        this.assetsTotal++;
                                        e = this.loadImage(d);
                                        e.onProgress(function (a, b) {
                                            return function (c,
                                                             d) {
                                                b[0].load_onProgress(a[0], c, d)
                                            }
                                        }([d], [this]));
                                        e.onError(function (a, b) {
                                            return function (c) {
                                                b[0].load_onError(a[0], c)
                                            }
                                        }([d], [this]));
                                        e.onComplete(function (a, b) {
                                            return function (c) {
                                                b[0].loadImage_onComplete(a[0], c)
                                            }
                                        }([d], [this]));
                                        break;
                                    case "MUSIC":
                                    case "SOUND":
                                        this.assetsTotal++;
                                        e = this.loadAudioBuffer(d);
                                        e.onProgress(function (a, b) {
                                            return function (c, d) {
                                                b[0].load_onProgress(a[0], c, d)
                                            }
                                        }([d], [this]));
                                        e.onError(function (a, b) {
                                            return function (c) {
                                                b[0].loadAudioBuffer_onError(a[0], c)
                                            }
                                        }([d], [this]));
                                        e.onComplete(function (a,
                                                               b) {
                                            return function (c) {
                                                b[0].loadAudioBuffer_onComplete(a[0], c)
                                            }
                                        }([d], [this]));
                                        break;
                                    case "TEXT":
                                        this.assetsTotal++, e = this.loadText(d), e.onProgress(function (a, b) {
                                            return function (c, d) {
                                                b[0].load_onProgress(a[0], c, d)
                                            }
                                        }([d], [this])), e.onError(function (a, b) {
                                            return function (c) {
                                                b[0].load_onError(a[0], c)
                                            }
                                        }([d], [this])), e.onComplete(function (a, b) {
                                            return function (c) {
                                                b[0].loadText_onComplete(a[0], c)
                                            }
                                        }([d], [this]))
                                }
                            }
                        }
                        this.__assetLoaded(null)
                    }
                    return this.promise.future
                },
                loadAudioBuffer: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h,
                        a) ? Jb.withValue(this.cachedAudioBuffers.h[a]) : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? Jb.withValue(Xb.fromBytes(T.__cast(y.createInstance(this.classTypes.h[a], []), nb))) : Object.prototype.hasOwnProperty.call(this.pathGroups.h, a) ? Xb.loadFromFiles(this.pathGroups.h[a]) : Xb.loadFromFile(this.paths.h[a])
                },
                loadBytes: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) ? Jb.withValue(this.cachedBytes.h[a]) : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? Jb.withValue(y.createInstance(this.classTypes.h[a],
                        [])) : nf.loadFromFile(this.getPath(a))
                },
                loadFont: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a) ? Jb.withValue(this.cachedFonts.h[a]) : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? (a = y.createInstance(this.classTypes.h[a], []), a.__loadFromName(a.name)) : fb.loadFromName(this.getPath(a))
                },
                loadImage: function (a) {
                    var b = this;
                    return Object.prototype.hasOwnProperty.call(this.cachedImages.h, a) ? Jb.withValue(this.cachedImages.h[a]) : Object.prototype.hasOwnProperty.call(this.classTypes.h,
                        a) ? Jb.withValue(y.createInstance(this.classTypes.h[a], [])) : Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) ? qb.loadFromBytes(this.cachedBytes.h[a]).then(function (c) {
                        var d = b.cachedBytes;
                        Object.prototype.hasOwnProperty.call(d.h, a) && delete d.h[a];
                        b.cachedImages.h[a] = c;
                        return Jb.withValue(c)
                    }) : qb.loadFromFile(this.getPath(a))
                },
                loadText: function (a) {
                    if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a)) return Jb.withValue(this.cachedText.h[a]);
                    if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h,
                        a) || Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
                        var b = this.getBytes(a);
                        if (null == b) return Jb.withValue(null);
                        b = b.getString(0, b.length);
                        this.cachedText.h[a] = b;
                        return Jb.withValue(b)
                    }
                    return (new $f).load(this.getPath(a))
                },
                unload: function () {
                    this.cachedBytes.h = Object.create(null);
                    this.cachedFonts.h = Object.create(null);
                    this.cachedImages.h = Object.create(null);
                    this.cachedAudioBuffers.h = Object.create(null);
                    this.cachedText.h = Object.create(null)
                },
                __assetLoaded: function (a) {
                    this.assetsLoaded++;
                    null !=
                    a && ua.verbose("Loaded asset: " + a + " [" + this.types.h[a] + "] (" + (this.assetsLoaded - 1) + "/" + (this.assetsTotal - 1) + ")", {

                        className: "lime.utils.AssetLibrary",
                        methodName: "__assetLoaded"
                    });
                    if (null != a) {
                        var b = Object.prototype.hasOwnProperty.call(this.sizes.h, a) ? this.sizes.h[a] : 0;
                        if (Object.prototype.hasOwnProperty.call(this.bytesLoadedCache.h, a)) {
                            var c = this.bytesLoadedCache.h[a];
                            c < b && (this.bytesLoaded += b - c)
                        } else this.bytesLoaded += b;
                        this.bytesLoadedCache.h[a] =
                            b
                    }
                    this.assetsLoaded < this.assetsTotal ? this.promise.progress(this.bytesLoaded, this.bytesTotal) : (this.loaded = !0, this.promise.progress(this.bytesTotal, this.bytesTotal), this.promise.complete(this))
                },
                __cacheBreak: function (a) {
                    return za.__cacheBreak(a)
                },
                __fromBundle: function (a, b) {
                    if (null != b) {
                        var c = 0;
                        for (b = b.assets; c < b.length;) {
                            var d = b[c];
                            ++c;
                            var e = Object.prototype.hasOwnProperty.call(d, "id") ? d.id : d.path;
                            var f = a.data.h[d.path];
                            if (Object.prototype.hasOwnProperty.call(d, "type")) {
                                var h = d.type;
                                "TEXT" == h ? this.cachedText.h[e] =
                                    null != f ? n.string(f) : null : this.cachedBytes.h[e] = f;
                                this.types.h[e] = d.type
                            } else this.cachedBytes.h[e] = f, this.types.h[e] = "BINARY"
                        }
                    } else
                        for (c = 0, b = a.paths; c < b.length;) e = b[c], ++c, this.cachedBytes.h[e] = a.data.h[e], this.types.h[e] = "BINARY"
                },
                __fromManifest: function (a) {
                    var b = 2 <= a.version,
                        c = a.rootPath;
                    null == c && (c = "");
                    "" != c && (c += "/");
                    for (var d = 0, e = a.assets; d < e.length;) {
                        var f = e[d];
                        ++d;
                        var h = b && Object.prototype.hasOwnProperty.call(f, "size") ? f.size : 100;
                        var r = Object.prototype.hasOwnProperty.call(f, "id") ? f.id : f.path;
                        if (Object.prototype.hasOwnProperty.call(f, "path")) {
                            var m = this.paths;
                            var q = this.__cacheBreak(this.__resolvePath(c + n.string(M.field(f, "path"))));
                            m.h[r] = q
                        }
                        if (Object.prototype.hasOwnProperty.call(f, "pathGroup")) {
                            m = M.field(f, "pathGroup");
                            q = 0;
                            for (var l = m.length; q < l;) {
                                var k = q++;
                                m[k] = this.__cacheBreak(this.__resolvePath(c + m[k]))
                            }
                            this.pathGroups.h[r] = m
                        }
                        this.sizes.h[r] = h;
                        this.types.h[r] = f.type;
                        Object.prototype.hasOwnProperty.call(f, "preload") && (this.preload.h[r] = M.field(f, "preload"));
                        Object.prototype.hasOwnProperty.call(f,
                            "className") && (h = M.field(f, "className"), h = g[h], this.classTypes.h[r] = h)
                    }
                    d = this.bytesTotal = 0;
                    for (e = a.assets; d < e.length;) f = e[d], ++d, r = Object.prototype.hasOwnProperty.call(f, "id") ? f.id : f.path, Object.prototype.hasOwnProperty.call(this.preload.h, r) && this.preload.h[r] && Object.prototype.hasOwnProperty.call(this.sizes.h, r) && (this.bytesTotal += this.sizes.h[r])
                },
                __resolvePath: function (a) {
                    a = R.replace(a, "\\", "/");
                    var b = a.indexOf(":");
                    R.startsWith(a, "http") && 0 < b ? (b += 3, a = ja.substr(a, 0, b) + R.replace(ja.substr(a, b,
                        null), "//", "/")) : a = R.replace(a, "//", "/");
                    if (-1 < a.indexOf("./")) {
                        a = a.split("/");
                        b = [];
                        for (var c = 0, d = a.length; c < d;) {
                            var e = c++;
                            ".." == a[e] ? 0 == e || ".." == b[e - 1] ? b.push("..") : b.pop() : "." == a[e] ? 0 == e && b.push(".") : b.push(a[e])
                        }
                        a = b.join("/")
                    }
                    return a
                },
                loadAudioBuffer_onComplete: function (a, b) {
                    this.cachedAudioBuffers.h[a] = b;
                    if (Object.prototype.hasOwnProperty.call(this.pathGroups.h, a))
                        for (var c = this.pathGroups.h[a], d = Object.keys(this.pathGroups.h), e = d.length, f = 0; f < e;) {
                            var h = d[f++];
                            if (h != a)
                                for (var r = 0; r < c.length;) {
                                    var m =
                                        c[r];
                                    ++r;
                                    if (-1 < this.pathGroups.h[h].indexOf(m)) {
                                        this.cachedAudioBuffers.h[h] = b;
                                        break
                                    }
                                }
                        }
                    this.__assetLoaded(a)
                },
                loadAudioBuffer_onError: function (a, b) {
                    null != b && "" != b ? ua.warn('Could not load "' + a + '": ' + n.string(b), {

                        className: "lime.utils.AssetLibrary",
                        methodName: "loadAudioBuffer_onError"
                    }) : ua.warn('Could not load "' + a + '"', {

                        className: "lime.utils.AssetLibrary",
                        methodName: "loadAudioBuffer_onError"
                    });
                    this.loadAudioBuffer_onComplete(a, new Xb)
                },
                loadBytes_onComplete: function (a, b) {
                    this.cachedBytes.h[a] = b;
                    this.__assetLoaded(a)
                },
                loadFont_onComplete: function (a, b) {
                    this.cachedFonts.h[a] = b;
                    this.__assetLoaded(a)
                },
                loadImage_onComplete: function (a, b) {
                    this.cachedImages.h[a] = b;
                    this.__assetLoaded(a)
                },
                loadText_onComplete: function (a, b) {
                    this.cachedText.h[a] = b;
                    this.__assetLoaded(a)
                },
                load_onError: function (a, b) {
                    null != b && "" != b ? this.promise.error('Error loading asset "' + a + '": ' + n.string(b)) : this.promise.error('Error loading asset "' +
                        a + '"')
                },
                load_onProgress: function (a, b, c) {
                    if (0 < b) {
                        var d = this.sizes.h[a];
                        0 < c ? (b /= c, 1 < b && (b = 1), b = Math.floor(b * d)) : b > d && (b = d);
                        Object.prototype.hasOwnProperty.call(this.bytesLoadedCache.h, a) ? (d = this.bytesLoadedCache.h[a], b != d && (this.bytesLoaded += b - d)) : this.bytesLoaded += b;
                        this.bytesLoadedCache.h[a] = b;
                        this.promise.progress(this.bytesLoaded, this.bytesTotal)
                    }
                },
                __class__: sb
            };
            var Jc = function () {
                this.assets = [];
                this.libraryArgs = [];
                this.version = 2
            };
            g["lime.utils.AssetManifest"] = Jc;
            Jc.__name__ = "lime.utils.AssetManifest";
            Jc.fromBytes = function (a, b) {
                return null != a ? Jc.parse(a.getString(0, a.length), b) : null
            };
            Jc.loadFromFile = function (a, b) {
                a = Jc.__resolvePath(a);
                b = Jc.__resolveRootPath(b, a);
                return null == a ? null : nf.loadFromFile(a).then(function (a) {
                    return Jb.withValue(Jc.fromBytes(a, b))
                })
            };
            Jc.parse = function (a, b) {
                if (null == a || "" == a) return null;
                a = JSON.parse(a);
                var c = new Jc;
                Object.prototype.hasOwnProperty.call(a, "name") && (c.name = a.name);
                Object.prototype.hasOwnProperty.call(a, "libraryType") && (c.libraryType = a.libraryType);
                Object.prototype.hasOwnProperty.call(a,
                    "libraryArgs") && (c.libraryArgs = a.libraryArgs);
                if (Object.prototype.hasOwnProperty.call(a, "assets")) {
                    var d = a.assets;
                    Object.prototype.hasOwnProperty.call(a, "version") && 2 >= a.version ? c.assets = Dc.run(d) : c.assets = d
                }
                Object.prototype.hasOwnProperty.call(a, "rootPath") && (c.rootPath = a.rootPath);
                null != b && "" != b && (c.rootPath = null == c.rootPath || "" == c.rootPath ? b : b + "/" + c.rootPath);
                return c
            };
            Jc.__resolvePath = function (a) {
                if (null == a) return null;
                var b = a.indexOf("?");
                var c = -1 < b ? ja.substr(a, 0, b) : a;
                for (c = R.replace(c, "\\",
                    "/"); R.endsWith(c, "/");) c = ja.substr(c, 0, c.length - 1);
                return R.endsWith(c, ".bundle") ? -1 < b ? c + "/library.json" + ja.substr(a, b, null) : c + "/library.json" : a
            };
            Jc.__resolveRootPath = function (a, b) {
                if (null != a) return a;
                a = b.indexOf("?");
                a = -1 < a ? ja.substr(b, 0, a) : b;
                for (a = R.replace(a, "\\", "/"); R.endsWith(a, "/");) {
                    if ("/" == a) return a;
                    a = ja.substr(a, 0, a.length - 1)
                }
                return R.endsWith(a, ".bundle") ? a : Yc.directory(a)
            };
            Jc.prototype = {
                __class__: Jc
            };
            var za = function () {
            };
            g["lime.utils.Assets"] = za;
            za.__name__ = "lime.utils.Assets";
            za.exists =
                function (a, b) {
                    null == b && (b = "BINARY");
                    var c = a.indexOf(":"),
                        d = a.substring(0, c);
                    a = a.substring(c + 1);
                    d = za.getLibrary(d);
                    return null != d ? d.exists(a, b) : !1
                };
            za.getAsset = function (a, b, c) {
                if (c && za.cache.enabled) switch (b) {
                    case "FONT":
                        var d = za.cache.font.h[a];
                        if (null != d) return d;
                        break;
                    case "IMAGE":
                        d = za.cache.image.h[a];
                        if (za.isValidImage(d)) return d;
                        break;
                    case "MUSIC":
                    case "SOUND":
                        d = za.cache.audio.h[a];
                        if (za.isValidAudio(d)) return d;
                        break;
                    case "TEMPLATE":
                        throw fa.thrown("Not sure how to get template: " + a);
                    case "BINARY":
                    case "TEXT":
                        c = !1;
                        break;
                    default:
                        return null
                }
                var e = a.indexOf(":");
                d = a.substring(0, e);
                e = a.substring(e + 1);
                var f = za.getLibrary(d);
                if (null != f)
                    if (f.exists(e, b)) {
                        if (f.isLocal(e, b)) return d = f.getAsset(e, b), c && za.cache.enabled && za.cache.set(a, b, d), d;
                        ua.error(b + ' asset "' + a + '" exists, but only asynchronously', {

                            className: "lime.utils.Assets",
                            methodName: "getAsset"
                        })
                    } else ua.error("There is no " + b + ' asset with an ID of "' + a + '"', {
                        className: "lime.utils.Assets",
                        methodName: "getAsset"
                    });
                else ua.error(za.__libraryNotFound(d), {

                    className: "lime.utils.Assets",
                    methodName: "getAsset"
                });
                return null
            };
            za.getBytes = function (a) {
                return za.getAsset(a, "BINARY", !1)
            };
            za.getFont = function (a, b) {
                null == b && (b = !0);
                return za.getAsset(a, "FONT", b)
            };
            za.getLibrary = function (a) {
                if (null == a || "" == a) a = "default";
                return za.libraries.h[a]
            };
            za.getText = function (a) {
                return za.getAsset(a, "TEXT", !1)
            };
            za.isLocal = function (a, b, c) {
                null == c && (c = !0);
                if (c && za.cache.enabled &&
                    za.cache.exists(a, b)) return !0;
                var d = a.indexOf(":");
                c = a.substring(0, d);
                a = a.substring(d + 1);
                c = za.getLibrary(c);
                return null != c ? c.isLocal(a, b) : !1
            };
            za.isValidAudio = function (a) {
                return null != a
            };
            za.isValidImage = function (a) {
                return null != a ? null != a.buffer : !1
            };
            za.loadLibrary = function (a) {
                var b = new Kc,
                    c = za.getLibrary(a);
                if (null != c) return c.load();
                c = a;
                var d = null;
                if (Object.prototype.hasOwnProperty.call(za.bundlePaths.h, a)) Ld.loadFromFile(za.bundlePaths.h[a]).onComplete(function (c) {
                    null == c ? b.error('Cannot load bundle for library "' +
                        a + '"') : (c = sb.fromBundle(c), null == c ? b.error('Cannot open library "' + a + '"') : (za.libraries.h[a] = c, c.onChange.add((E = za.onChange, p(E, E.dispatch))), b.completeWith(c.load())))
                }).onError(function (c) {
                    b.error('There is no asset library with an ID of "' + a + '"')
                });
                else Object.prototype.hasOwnProperty.call(za.libraryPaths.h, a) ? (c = za.libraryPaths.h[a], d = Yc.directory(c)) : (R.endsWith(c, ".bundle") ? (d = c, c += "/library.json") : d = Yc.directory(c), c = za.__cacheBreak(c)), Jc.loadFromFile(c, d).onComplete(function (c) {
                    null == c ?
                        b.error('Cannot parse asset manifest for library "' + a + '"') : (c = sb.fromManifest(c), null == c ? b.error('Cannot open library "' + a + '"') : (za.libraries.h[a] = c, c.onChange.add((E = za.onChange, p(E, E.dispatch))), b.completeWith(c.load())))
                }).onError(function (c) {
                    b.error('There is no asset library with an ID of "' + a + '"')
                });
                return b.future
            };
            za.registerLibrary = function (a, b) {
                if (null == a || "" == a) a = "default";
                if (Object.prototype.hasOwnProperty.call(za.libraries.h, a)) {
                    if (za.libraries.h[a] == b) return;
                    za.unloadLibrary(a)
                }
                null !=
                b && b.onChange.add(za.library_onChange);
                za.libraries.h[a] = b
            };
            za.unloadLibrary = function (a) {
                if (null == a || "" == a) a = "default";
                var b = za.libraries.h[a];
                null != b && (za.cache.clear(a + ":"), b.onChange.remove(za.library_onChange), b.unload());
                b = za.libraries;
                Object.prototype.hasOwnProperty.call(b.h, a) && delete b.h[a]
            };
            za.__cacheBreak = function (a) {
                0 < za.cache.version && (a = -1 < a.indexOf("?") ? a + ("&" + za.cache.version) : a + ("?" + za.cache.version));
                return a
            };
            za.__libraryNotFound = function (a) {
                if (null == a || "" == a) a = "default";
                return null ==
                ca.current || null == ca.current.__preloader || ca.current.__preloader.complete ? 'There is no asset library named "' + a + '"' : 'There is no asset library named "' + a + '", or it is not yet preloaded'
            };
            za.library_onChange = function () {
                za.cache.clear();
                za.onChange.dispatch()
            };
            var Rk = function (a, b) {
                this.bytes = a;
                this.offset = b
            };
            g["lime.utils.BytePointerData"] = Rk;
            Rk.__name__ = "lime.utils.BytePointerData";
            Rk.prototype = {
                __class__: Rk
            };
            var nf = {
                    _new: function (a, b) {
                        return new nb(b)
                    },
                    decompress: function (a, b) {
                        switch (b._hx_index) {
                            case 0:
                                return wl.decompress(a);
                            case 1:
                                return xl.decompress(a);
                            case 2:
                                return yl.decompress(a);
                            case 3:
                                return zl.decompress(a)
                        }
                    },
                    fromBytes: function (a) {
                        return null == a ? null : nf._new(a.length, a.b.bufferValue)
                    },
                    fromFile: function (a) {
                        return null
                    },
                    loadFromFile: function (a) {
                        return (new ej).load(a)
                    },
                    ofString: function (a) {
                        a = nb.ofString(a);
                        return nf._new(a.length, a.b.bufferValue)
                    }
                },
                hj = v["lime.utils.CompressionAlgorithm"] = {
                    __ename__: "lime.utils.CompressionAlgorithm",
                    __constructs__: null,
                    DEFLATE: {
                        _hx_name: "DEFLATE",
                        _hx_index: 0,
                        __enum__: "lime.utils.CompressionAlgorithm",
                        toString: q
                    },
                    GZIP: {
                        _hx_name: "GZIP",
                        _hx_index: 1,
                        __enum__: "lime.utils.CompressionAlgorithm",
                        toString: q
                    },
                    LZMA: {
                        _hx_name: "LZMA",
                        _hx_index: 2,
                        __enum__: "lime.utils.CompressionAlgorithm",
                        toString: q
                    },
                    ZLIB: {
                        _hx_name: "ZLIB",
                        _hx_index: 3,
                        __enum__: "lime.utils.CompressionAlgorithm",
                        toString: q
                    }
                };
            hj.__constructs__ = [hj.DEFLATE, hj.GZIP, hj.LZMA, hj.ZLIB];
            var Vg = {
                    toArrayBufferView: function (a) {
                        return a
                    }
                },
                ua = function () {
                };
            g["lime.utils.Log"] = ua;
            ua.__name__ = "lime.utils.Log";
            ua.debug = function (a, b) {
                4 <= ua.level && console.debug("[" +
                    b.className + "] " + n.string(a))
            };
            ua.error = function (a, b) {
                if (1 <= ua.level) {
                    a = "[" + b.className + "] ERROR: " + n.string(a);
                    if (ua.throwErrors) throw fa.thrown(a);
                    console.error(a)
                }
            };
            ua.info = function (a, b) {
                3 <= ua.level && console.info("[" + b.className + "] " + n.string(a))
            };
            ua.verbose = function (a, b) {
                5 <= ua.level && (a = "[" + b.className + "] " + n.string(a), console.log(a))
            };
            ua.warn = function (a, b) {
                2 <= ua.level && console.warn("[" + b.className + "] WARNING: " + n.string(a))
            };
            var Qj = function () {
                this.bytesTotalCache = new Ha;
                this.bytesLoadedCache2 =
                    new Ha;
                this.bytesLoadedCache = new N;
                this.onProgress = new Zi;
                this.onComplete = new Wb;
                this.bytesTotal = this.bytesLoaded = 0;
                this.libraries = [];
                this.libraryNames = [];
                this.onProgress.add(p(this, this.update))
            };
            g["lime.utils.Preloader"] = Qj;
            Qj.__name__ = "lime.utils.Preloader";
            Qj.prototype = {
                addLibrary: function (a) {
                    this.libraries.push(a)
                },
                addLibraryName: function (a) {
                    -1 == this.libraryNames.indexOf(a) && this.libraryNames.push(a)
                },
                load: function () {
                    for (var a = this, b = 0, c = this.libraries; b < c.length;) {
                        var d = c[b];
                        ++b;
                        this.bytesTotal +=
                            d.bytesTotal
                    }
                    this.loadedLibraries = -1;
                    this.preloadStarted = !1;
                    b = 0;
                    for (c = this.libraries; b < c.length;) d = [c[b]], ++b, ua.verbose("Preloading asset library", {

                        className: "lime.utils.Preloader",
                        methodName: "load"
                    }), d[0].load().onProgress(function (b) {
                        return function (c, d) {
                            a.bytesLoaded = null == a.bytesLoadedCache.h.__keys__[b[0].__id__] ? a.bytesLoaded + c : a.bytesLoaded + (c - a.bytesLoadedCache.h[b[0].__id__]);
                            a.bytesLoadedCache.set(b[0], c);
                            a.simulateProgress || a.onProgress.dispatch(a.bytesLoaded,
                                a.bytesTotal)
                        }
                    }(d)).onComplete(function (b) {
                        return function (c) {
                            a.bytesLoaded = null == a.bytesLoadedCache.h.__keys__[b[0].__id__] ? a.bytesLoaded + b[0].bytesTotal : a.bytesLoaded + ((b[0].bytesTotal | 0) - a.bytesLoadedCache.h[b[0].__id__]);
                            a.loadedAssetLibrary()
                        }
                    }(d)).onError(function () {
                        return function (a) {
                            ua.error(a, {

                                className: "lime.utils.Preloader",
                                methodName: "load"
                            })
                        }
                    }());
                    b = 0;
                    for (c = this.libraryNames; b < c.length;) ++b, this.bytesTotal += 200;
                    this.loadedLibraries++;
                    this.preloadStarted = !0;
                    this.updateProgress()
                },
                loadedAssetLibrary: function (a) {
                    this.loadedLibraries++;
                    var b = this.loadedLibraries;
                    this.preloadStarted || ++b;
                    var c = this.libraries.length + this.libraryNames.length;
                    null != a ? ua.verbose("Loaded asset library: " + a + " [" + b + "/" + c + "]", {

                        className: "lime.utils.Preloader",
                        methodName: "loadedAssetLibrary"
                    }) : ua.verbose("Loaded asset library [" + b + "/" + c + "]", {

                        className: "lime.utils.Preloader",
                        methodName: "loadedAssetLibrary"
                    });
                    this.updateProgress()
                },
                start: function () {
                    this.complete || this.simulateProgress || !this.preloadComplete || (this.complete = !0, this.onComplete.dispatch())
                },
                update: function (a, b) {
                },
                updateProgress: function () {
                    var a = this;
                    this.simulateProgress || this.onProgress.dispatch(this.bytesLoaded, this.bytesTotal);
                    if (this.loadedLibraries == this.libraries.length && !this.initLibraryNames) {
                        this.initLibraryNames = !0;
                        for (var b = 0, c = this.libraryNames; b < c.length;) {
                            var d = [c[b]];
                            ++b;
                            ua.verbose("Preloading asset library: " + d[0], {
                                className: "lime.utils.Preloader",
                                methodName: "updateProgress"
                            });
                            za.loadLibrary(d[0]).onProgress(function (b) {
                                return function (c, d) {
                                    0 < d && (Object.prototype.hasOwnProperty.call(a.bytesTotalCache.h, b[0]) || (a.bytesTotalCache.h[b[0]] = d, a.bytesTotal += d - 200), c > d && (c = d), Object.prototype.hasOwnProperty.call(a.bytesLoadedCache2.h, b[0]) ? a.bytesLoaded += c - a.bytesLoadedCache2.h[b[0]] : a.bytesLoaded += c, a.bytesLoadedCache2.h[b[0]] = c, a.simulateProgress || a.onProgress.dispatch(a.bytesLoaded, a.bytesTotal))
                                }
                            }(d)).onComplete(function (b) {
                                return function (c) {
                                    c =
                                        200;
                                    Object.prototype.hasOwnProperty.call(a.bytesTotalCache.h, b[0]) && (c = a.bytesTotalCache.h[b[0]]);
                                    Object.prototype.hasOwnProperty.call(a.bytesLoadedCache2.h, b[0]) ? a.bytesLoaded += c - a.bytesLoadedCache2.h[b[0]] : a.bytesLoaded += c;
                                    a.loadedAssetLibrary(b[0])
                                }
                            }(d)).onError(function () {
                                return function (a) {
                                    ua.error(a, {

                                        className: "lime.utils.Preloader",
                                        methodName: "updateProgress"
                                    })
                                }
                            }())
                        }
                    }
                    this.simulateProgress || this.loadedLibraries != this.libraries.length + this.libraryNames.length ||
                    (this.preloadComplete || (this.preloadComplete = !0, ua.verbose("Preload complete", {

                        className: "lime.utils.Preloader",
                        methodName: "updateProgress"
                    })), this.start())
                },
                __class__: Qj
            };
            var Wd = function () {
                Gd.call(this)
            };
            g["msignal.Signal0"] = Wd;
            Wd.__name__ = "msignal.Signal0";
            Wd.__super__ = Gd;
            Wd.prototype = l(Gd.prototype, {
                dispatch: function () {
                    for (var a = this.slots; a.nonEmpty;) a.head.execute(), a = a.tail
                },
                createSlot: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    return new ij(this,
                        a, b, c)
                },
                __class__: Wd
            });
            var Gg = function (a, b) {
                Gd.call(this, [a, b])
            };
            g["msignal.Signal2"] = Gg;
            Gg.__name__ = "msignal.Signal2";
            Gg.__super__ = Gd;
            Gg.prototype = l(Gd.prototype, {
                dispatch: function (a, b) {
                    for (var c = this.slots; c.nonEmpty;) c.head.execute(a, b), c = c.tail
                },
                createSlot: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    return new jj(this, a, b, c)
                },
                __class__: Gg
            });
            var Md = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = !1);
                this.signal = a;
                this.set_listener(b);
                this.once = c;
                this.priority = d;
                this.enabled = !0
            };
            g["msignal.Slot"] =
                Md;
            Md.__name__ = "msignal.Slot";
            Md.prototype = {
                remove: function () {
                    this.signal.remove(this.listener)
                },
                set_listener: function (a) {
                    return this.listener = a
                },
                __class__: Md,
                __properties__: {
                    set_listener: "set_listener"
                }
            };
            var ij = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = !1);
                Md.call(this, a, b, c, d)
            };
            g["msignal.Slot0"] = ij;
            ij.__name__ = "msignal.Slot0";
            ij.__super__ = Md;
            ij.prototype = l(Md.prototype, {
                execute: function () {
                    this.enabled && (this.once && this.remove(), this.listener())
                },
                __class__: ij
            });
            var Pi = function (a, b, c, d) {
                null ==
                d && (d = 0);
                null == c && (c = !1);
                Md.call(this, a, b, c, d)
            };
            g["msignal.Slot1"] = Pi;
            Pi.__name__ = "msignal.Slot1";
            Pi.__super__ = Md;
            Pi.prototype = l(Md.prototype, {
                execute: function (a) {
                    this.enabled && (this.once && this.remove(), null != this.param && (a = this.param), this.listener(a))
                },
                __class__: Pi
            });
            var jj = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = !1);
                Md.call(this, a, b, c, d)
            };
            g["msignal.Slot2"] = jj;
            jj.__name__ = "msignal.Slot2";
            jj.__super__ = Md;
            jj.prototype = l(Md.prototype, {
                execute: function (a, b) {
                    this.enabled && (this.once && this.remove(),
                    null != this.param1 && (a = this.param1), null != this.param2 && (b = this.param2), this.listener(a, b))
                },
                __class__: jj
            });
            var Na = function () {
            };
            g["openfl.Lib"] = Na;
            Na.__name__ = "openfl.Lib";
            Na.__properties__ = {
                get_current: "get_current"
            };
            Na.getTimer = function () {
                return Yb.getTimer()
            };
            Na.getURL = function (a, b) {
                Na.navigateToURL(a, b)
            };
            Na.navigateToURL = function (a, b) {
                null == b && (b = "_blank");
                var c = a.url;
                if (y.typeof(a.data) == Ga.TObject) {
                    for (var d = "", e = M.fields(a.data), f = 0; f < e.length;) {
                        var h = e[f];
                        ++f;
                        0 < d.length && (d += "&");
                        var r = encodeURIComponent(h) +
                            "=";
                        h = n.string(M.field(a.data, h));
                        d += r + encodeURIComponent(h)
                    }
                    c = -1 < c.indexOf("?") ? c + ("&" + d) : c + ("?" + d)
                }
                Yb.openURL(c, b)
            };
            Na.setTimeout = function (a, b, c) {
                var d = ++Na.__lastTimerID,
                    e = Na.__timers;
                b = se.delay(function () {
                    Na.__timers.remove(d);
                    a.apply(a, null == c ? [] : c)
                }, b);
                e.h[d] = b;
                return d
            };
            Na.get_current = function () {
                null == gc.current && (gc.current = new $e);
                return gc.current
            };
            var ve = function () {
            };
            g["openfl._Vector.IVector"] = ve;
            ve.__name__ = "openfl._Vector.IVector";
            ve.__isInterface__ = !0;
            ve.prototype = {
                __class__: ve,
                __properties__: {
                    get_length: "get_length"
                }
            };
            var rg = function (a, b, c) {
                null == b && (b = !1);
                null == a && (a = 0);
                null == c && (c = []);
                this.__array = c;
                0 < a && this.set_length(a);
                this.fixed = b
            };
            g["openfl._Vector.BoolVector"] = rg;
            rg.__name__ = "openfl._Vector.BoolVector";
            rg.__interfaces__ = [ve];
            rg.prototype = {
                get: function (a) {
                    return a >= this.__array.length ? !1 : this.__array[a]
                },
                set: function (a, b) {
                    return !this.fixed || a < this.__array.length ? this.__array[a] = b : b
                },
                toJSON: function () {
                    return this.__array
                },
                get_length: function () {
                    return this.__array.length
                },
                set_length: function (a) {
                    if (!this.fixed) {
                        var b =
                            this.__array.length;
                        0 > a && (a = 0);
                        if (a > b)
                            for (; b < a;) {
                                var c = b++;
                                this.__array[c] = !1
                            } else
                            for (; this.__array.length > a;) this.__array.pop()
                    }
                    return this.__array.length
                },
                __class__: rg,
                __properties__: {
                    set_length: "set_length",
                    get_length: "get_length"
                }
            };
            var xd = function (a, b, c, d) {
                null == d && (d = !1);
                null == b && (b = !1);
                null == a && (a = 0);
                if (d) {
                    if (this.__array = [], null != c) {
                        d = 0;
                        for (var e = c.length; d < e;) {
                            var f = d++;
                            this.__array[f] = c[f]
                        }
                    }
                } else null == c && (c = []), this.__array = c;
                0 < a && this.set_length(a);
                this.fixed = b
            };
            g["openfl._Vector.FloatVector"] =
                xd;
            xd.__name__ = "openfl._Vector.FloatVector";
            xd.__interfaces__ = [ve];
            xd.prototype = {
                concat: function (a) {
                    return null == a ? new xd(0, !1, this.__array.slice()) : 0 < a.__array.length ? new xd(0, !1, this.__array.concat(a.__array)) : new xd(0, !1, this.__array.slice())
                },
                copy: function () {
                    return new xd(0, this.fixed, this.__array.slice())
                },
                get: function (a) {
                    return this.__array[a]
                },
                insertAt: function (a, b) {
                    (!this.fixed || a < this.__array.length) && this.__array.splice(a, 0, b)
                },
                push: function (a) {
                    return this.fixed ? this.__array.length : this.__array.push(a)
                },
                set: function (a, b) {
                    return !this.fixed || a < this.__array.length ? this.__array[a] = b : b
                },
                slice: function (a, b) {
                    null == a && (a = 0);
                    null == b && (b = 16777215);
                    return new xd(0, !1, this.__array.slice(a, b))
                },
                splice: function (a, b) {
                    return new xd(0, !1, this.__array.splice(a, b))
                },
                toJSON: function () {
                    return this.__array
                },
                get_length: function () {
                    return this.__array.length
                },
                set_length: function (a) {
                    if (a != this.__array.length && !this.fixed) {
                        var b = this.__array.length;
                        0 > a && (a = 0);
                        if (a > b)
                            for (; b < a;) {
                                var c = b++;
                                this.__array[c] = 0
                            } else
                            for (; this.__array.length >
                                   a;) this.__array.pop()
                    }
                    return this.__array.length
                },
                __class__: xd,
                __properties__: {
                    set_length: "set_length",
                    get_length: "get_length"
                }
            };
            var kj = function (a, b, c) {
                null == b && (b = !1);
                null == a && (a = 0);
                null == c && (c = []);
                this.__array = c;
                0 < a && this.set_length(a);
                this.fixed = b
            };
            g["openfl._Vector.FunctionVector"] = kj;
            kj.__name__ = "openfl._Vector.FunctionVector";
            kj.__interfaces__ = [ve];
            kj.prototype = {
                toJSON: function () {
                    return this.__array
                },
                get_length: function () {
                    return this.__array.length
                },
                set_length: function (a) {
                    if (!this.fixed) {
                        var b =
                            this.__array.length;
                        0 > a && (a = 0);
                        if (a > b)
                            for (; b < a;) {
                                var c = b++;
                                this.__array[c] = null
                            } else
                            for (; this.__array.length > a;) this.__array.pop()
                    }
                    return this.__array.length
                },
                __class__: kj,
                __properties__: {
                    set_length: "set_length",
                    get_length: "get_length"
                }
            };
            var bf = function (a, b, c) {
                null == b && (b = !1);
                null == a && (a = 0);
                null == c && (c = []);
                this.__array = c;
                0 < a && this.set_length(a);
                this.fixed = b
            };
            g["openfl._Vector.IntVector"] = bf;
            bf.__name__ = "openfl._Vector.IntVector";
            bf.__interfaces__ = [ve];
            bf.prototype = {
                get: function (a) {
                    return this.__array[a]
                },
                insertAt: function (a, b) {
                    (!this.fixed || a < this.__array.length) && this.__array.splice(a, 0, b)
                },
                push: function (a) {
                    return this.fixed ? this.__array.length : this.__array.push(a)
                },
                set: function (a, b) {
                    return !this.fixed || a < this.__array.length ? this.__array[a] = b : b
                },
                slice: function (a, b) {
                    null == a && (a = 0);
                    null == b && (b = 16777215);
                    return new bf(0, !1, this.__array.slice(a, b))
                },
                splice: function (a, b) {
                    return new bf(0, !1, this.__array.splice(a, b))
                },
                toJSON: function () {
                    return this.__array
                },
                get_length: function () {
                    return this.__array.length
                },
                set_length: function (a) {
                    if (!this.fixed) {
                        var b = this.__array.length;
                        0 > a && (a = 0);
                        if (a > b)
                            for (; b < a;) {
                                var c = b++;
                                this.__array[c] = 0
                            } else
                            for (; this.__array.length > a;) this.__array.pop()
                    }
                    return this.__array.length
                },
                __class__: bf,
                __properties__: {
                    set_length: "set_length",
                    get_length: "get_length"
                }
            };
            var Pd = function (a, b, c, d) {
                null == d && (d = !1);
                null == b && (b = !1);
                null == a && (a = 0);
                if (d) {
                    if (this.__array = [], null != c) {
                        d = 0;
                        for (var e = c.length; d < e;) {
                            var f = d++;
                            this.__array[f] = c[f]
                        }
                    }
                } else null == c && (c = []), this.__array = c;
                0 < a && this.set_length(a);
                this.fixed = b
            };
            g["openfl._Vector.ObjectVector"] = Pd;
            Pd.__name__ = "openfl._Vector.ObjectVector";
            Pd.__interfaces__ = [ve];
            Pd.prototype = {
                concat: function (a) {
                    return null == a ? new Pd(0, !1, this.__array.slice()) : 0 < a.__array.length ? new Pd(0, !1, this.__array.concat(a.__array)) : new Pd(0, !1, this.__array.slice())
                },
                get: function (a) {
                    return this.__array[a]
                },
                indexOf: function (a, b) {
                    null == b && (b = 0);
                    for (var c = this.__array.length; b < c;) {
                        var d = b++;
                        if (this.__array[d] == a) return d
                    }
                    return -1
                },
                insertAt: function (a, b) {
                    (!this.fixed || a < this.__array.length) &&
                    this.__array.splice(a, 0, b)
                },
                iterator: function () {
                    return new yf(this.__array)
                },
                pop: function () {
                    return this.fixed ? null : this.__array.pop()
                },
                push: function (a) {
                    return this.fixed ? this.__array.length : this.__array.push(a)
                },
                removeAt: function (a) {
                    return !this.fixed || a < this.__array.length ? this.__array.splice(a, 1)[0] : null
                },
                set: function (a, b) {
                    return !this.fixed || a < this.__array.length ? this.__array[a] = b : b
                },
                sort: function (a) {
                    this.__array.sort(a)
                },
                splice: function (a, b) {
                    return new Pd(0, !1, this.__array.splice(a, b))
                },
                toJSON: function () {
                    return this.__array
                },
                unshift: function (a) {
                    this.fixed || this.__array.unshift(a)
                },
                get_length: function () {
                    return this.__array.length
                },
                set_length: function (a) {
                    if (!this.fixed) {
                        var b = this.__array.length;
                        0 > a && (a = 0);
                        if (a > b)
                            for (; b < a;) b++, this.__array.push(null);
                        else
                            for (; this.__array.length > a;) this.__array.pop()
                    }
                    return this.__array.length
                },
                __class__: Pd,
                __properties__: {
                    set_length: "set_length",
                    get_length: "get_length"
                }
            };
            var og = function () {
                ca.call(this);
                null == gc.application && (gc.application = this);
                null == gc.current && (gc.current = new $e);
                gc.current.__loaderInfo = Nd.create(null);
                gc.current.__loaderInfo.content = gc.current
            };
            g["openfl.display.Application"] = og;
            og.__name__ = "openfl.display.Application";
            og.__super__ = ca;
            og.prototype = l(ca.prototype, {
                createWindow: function (a) {
                    var b = new Wg(this, a);
                    this.__windows.push(b);
                    this.__windowByID.h[b.id] = b;
                    var c = this;
                    b.onClose.add(function () {
                        c.__onWindowClose(b)
                    }, !1, -1E4);
                    null == this.__window && (this.__window = b, b.onActivate.add(p(this, this.onWindowActivate)), b.onRenderContextLost.add(p(this, this.onRenderContextLost)),
                        b.onRenderContextRestored.add(p(this, this.onRenderContextRestored)), b.onDeactivate.add(p(this, this.onWindowDeactivate)), b.onDropFile.add(p(this, this.onWindowDropFile)), b.onEnter.add(p(this, this.onWindowEnter)), b.onExpose.add(p(this, this.onWindowExpose)), b.onFocusIn.add(p(this, this.onWindowFocusIn)), b.onFocusOut.add(p(this, this.onWindowFocusOut)), b.onFullscreen.add(p(this, this.onWindowFullscreen)), b.onKeyDown.add(p(this, this.onKeyDown)), b.onKeyUp.add(p(this, this.onKeyUp)), b.onLeave.add(p(this, this.onWindowLeave)),
                        b.onMinimize.add(p(this, this.onWindowMinimize)), b.onMouseDown.add(p(this, this.onMouseDown)), b.onMouseMove.add(p(this, this.onMouseMove)), b.onMouseMoveRelative.add(p(this, this.onMouseMoveRelative)), b.onMouseUp.add(p(this, this.onMouseUp)), b.onMouseWheel.add(p(this, this.onMouseWheel)), b.onMove.add(p(this, this.onWindowMove)), b.onRender.add(p(this, this.render)), b.onResize.add(p(this, this.onWindowResize)), b.onRestore.add(p(this, this.onWindowRestore)), b.onTextEdit.add(p(this, this.onTextEdit)), b.onTextInput.add(p(this,
                        this.onTextInput)), this.onWindowCreate());
                    this.onCreateWindow.dispatch(b);
                    return b
                },
                exec: function () {
                    return ca.prototype.exec.call(this)
                },
                __checkForAllWindowsClosed: function () {
                    0 < this.__windows.length || ca.prototype.__checkForAllWindowsClosed.call(this)
                },
                __onModuleExit: function (a) {
                    this.onExit.canceled || (gc.application == this && (gc.application = null), ca.prototype.__onModuleExit.call(this, a))
                },
                __class__: og
            });
            var Jg = function (a, b, c) {
                null == c && (c = !1);
                da.call(this);
                this.__drawableType = 2;
                this.__bitmapData = a;
                this.pixelSnapping =
                    b;
                this.smoothing = c;
                null == b && (this.pixelSnapping = 1)
            };
            g["openfl.display.Bitmap"] = Jg;
            Jg.__name__ = "openfl.display.Bitmap";
            Jg.__super__ = da;
            Jg.prototype = l(da.prototype, {
                __enterFrame: function (a) {
                    null == this.__bitmapData || null == this.__bitmapData.image || this.__bitmapData.image.version == this.__imageVersion || this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty())
                },
                __getBounds: function (a, b) {
                    var c = ha.__pool.get();
                    null != this.__bitmapData ? c.setTo(0, 0, this.__bitmapData.width, this.__bitmapData.height) :
                        c.setTo(0, 0, 0, 0);
                    c.__transform(c, b);
                    a.__expand(c.x, c.y, c.width, c.height);
                    ha.__pool.release(c)
                },
                __hitTest: function (a, b, c, d, e, f) {
                    if (!f.get_visible() || this.__isMask || null == this.__bitmapData || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b)) return !1;
                    this.__getRenderTransform();
                    var h = this.__renderTransform,
                        r = h.a * h.d - h.b * h.c;
                    c = 0 == r ? -h.tx : 1 / r * (h.c * (h.ty - b) + h.d * (a - h.tx));
                    h = this.__renderTransform;
                    r = h.a * h.d - h.b * h.c;
                    a = 0 == r ? -h.ty : 1 / r * (h.a * (b - h.ty) + h.b * (h.tx - a));
                    if (0 < c && 0 < a && c <= this.__bitmapData.width &&
                        a <= this.__bitmapData.height) {
                        if (null != this.__scrollRect && !this.__scrollRect.contains(c, a)) return !1;
                        null == d || e || d.push(f);
                        return !0
                    }
                    return !1
                },
                __hitTestMask: function (a, b) {
                    if (null == this.__bitmapData) return !1;
                    this.__getRenderTransform();
                    var c = this.__renderTransform,
                        d = c.a * c.d - c.b * c.c,
                        e = 0 == d ? -c.tx : 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx));
                    c = this.__renderTransform;
                    d = c.a * c.d - c.b * c.c;
                    a = 0 == d ? -c.ty : 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a));
                    return 0 < e && 0 < a && e <= this.__bitmapData.width && a <= this.__bitmapData.height ? !0 : !1
                },
                get_bitmapData: function () {
                    return this.__bitmapData
                },
                set_height: function (a) {
                    null != this.__bitmapData ? this.set_scaleY(a / this.__bitmapData.height) : this.set_scaleY(0);
                    return a
                },
                set_width: function (a) {
                    null != this.__bitmapData ? this.set_scaleX(a / this.__bitmapData.width) : this.set_scaleX(0);
                    return a
                },
                __class__: Jg,
                __properties__: l(da.prototype.__properties__, {
                    get_bitmapData: "get_bitmapData"
                })
            });
            var mb = function (a, b, c, d) {
                null == d && (d = -1);
                null == c && (c = !0);
                this.__drawableType = 0;
                this.transparent = c;
                null == a && (a = 0);
                null == b && (b = 0);
                0 > a && (a = 0);
                0 > b && (b = 0);
                this.width = a;
                this.height =
                    b;
                this.rect = new ha(0, 0, a, b);
                this.__textureWidth = a;
                this.__textureHeight = b;
                0 < a && 0 < b && (c ? 0 == (d & -16777216) && (d = 0) : d = -16777216 | d & 16777215, this.image = new qb(null, 0, 0, a, b, d << 8 | d >>> 24 & 255), this.image.set_transparent(c), this.readable = this.__isValid = !0);
                this.__renderTransform = new la;
                this.__worldAlpha = 1;
                this.__worldTransform = new la;
                this.__worldColorTransform = new ib;
                this.__renderable = !0
            };
            g["openfl.display.BitmapData"] = mb;
            mb.__name__ = "openfl.display.BitmapData";
            mb.__interfaces__ = [S];
            mb.fromCanvas = function (a, b) {
                null ==
                b && (b = !0);
                if (null == a) return null;
                var c = new mb(0, 0, b, 0);
                c.__fromImage(qb.fromCanvas(a));
                c.image.set_transparent(b);
                return c
            };
            mb.prototype = {
                colorTransform: function (a, b) {
                    this.readable && this.image.colorTransform(a.__toLimeRectangle(), b.__toLimeColorMatrix())
                },
                copyPixels: function (a, b, c, d, e, f) {
                    null == f && (f = !1);
                    this.readable && null != a && (null != e && (mb.__tempVector.x = e.x, mb.__tempVector.y = e.y), this.image.copyPixels(a.image, b.__toLimeRectangle(), c.__toLimeVector2(), null != d ? d.image : null, null != e ? mb.__tempVector :
                        null, f))
                },
                dispose: function () {
                    this.image = null;
                    this.height = this.width = 0;
                    this.rect = null;
                    this.readable = this.__isValid = !1;
                    this.__textureContext = this.__texture = this.__framebufferContext = this.__framebuffer = this.__vertexBuffer = this.__surface = null
                },
                draw: function (a, b, c, d, e, f) {
                    null == f && (f = !1);
                    if (null != a) {
                        var h = !0,
                            r = null;
                        a instanceof da && (r = T.__cast(a, da), r.get_visible() || (h = !1, r.set_visible(!0)));
                        a.__update(!1, !0);
                        var m = la.__pool.get();
                        m.copyFrom(a.__renderTransform);
                        m.invert();
                        null != b && m.concat(b);
                        b = null;
                        null !=
                        e && (b = la.__pool.get(), b.copyFrom(m), b.invert());
                        var g = new ib;
                        g.__copyFrom(a.__worldColorTransform);
                        g.__invert();
                        if (this.readable || null == Na.get_current().stage.context3D) {
                            if (null != c) {
                                var q = ha.__pool.get(),
                                    k = la.__pool.get();
                                a.__getBounds(q, k);
                                var n = Math.ceil(q.width),
                                    l = Math.ceil(q.height);
                                k.tx = -q.x;
                                k.ty = -q.y;
                                n = new mb(n, l, !0, 0);
                                n.draw(a, k);
                                n.colorTransform(n.rect, c);
                                n.__renderTransform.identity();
                                n.__renderTransform.tx = q.x;
                                n.__renderTransform.ty = q.y;
                                n.__renderTransform.concat(a.__renderTransform);
                                n.__worldAlpha =
                                    a.__worldAlpha;
                                n.__worldColorTransform.__copyFrom(a.__worldColorTransform);
                                a = n;
                                ha.__pool.release(q);
                                la.__pool.release(k)
                            }
                            Ba.convertToCanvas(this.image);
                            c = new we(this.image.buffer.__srcContext);
                            c.__allowSmoothing = f;
                            c.__overrideBlendMode = d;
                            c.__worldTransform = m;
                            c.__worldAlpha = 1 / a.__worldAlpha;
                            c.__worldColorTransform = g;
                            null != e && c.__pushMaskRect(e, b);
                            this.__drawCanvas(a, c)
                        } else null == this.__textureContext && (this.__textureContext = ca.current.__window.context), null != c && g.__combine(c), c = new Ra(Na.get_current().stage.context3D,
                            this), c.__allowSmoothing = f, c.__pixelRatio = Na.get_current().stage.window.__scale, c.__overrideBlendMode = d, c.__worldTransform = m, c.__worldAlpha = 1 / a.__worldAlpha, c.__worldColorTransform = g, c.__resize(this.width, this.height), null != e && c.__pushMaskRect(e, b), this.__drawGL(a, c);
                        null != e && (c.__popMaskRect(), la.__pool.release(b));
                        la.__pool.release(m);
                        null == r || h || r.set_visible(!1)
                    }
                },
                fillRect: function (a, b) {
                    this.__fillRect(a, b, !0)
                },
                getIndexBuffer: function (a, b) {
                    if (null == this.__indexBuffer || this.__indexBufferContext !=
                        a.__context || null != b && null == this.__indexBufferGrid || null != this.__indexBufferGrid && !this.__indexBufferGrid.equals(b)) {
                        this.__indexBufferContext = a.__context;
                        this.__indexBuffer = null;
                        if (null != b) {
                            null == this.__indexBufferGrid && (this.__indexBufferGrid = new ha);
                            this.__indexBufferGrid.copyFrom(b);
                            var c = b.width;
                            b = b.height;
                            0 != c && 0 != b ? (this.__indexBufferData = new Uint16Array(54), this.__indexBufferData[0] = 0, this.__indexBufferData[1] = 1, this.__indexBufferData[2] = 2, this.__indexBufferData[3] = 2, this.__indexBufferData[4] =
                                1, this.__indexBufferData[5] = 3, this.__indexBufferData[6] = 4, this.__indexBufferData[7] = 0, this.__indexBufferData[8] = 5, this.__indexBufferData[9] = 5, this.__indexBufferData[10] = 0, this.__indexBufferData[11] = 2, this.__indexBufferData[12] = 6, this.__indexBufferData[13] = 4, this.__indexBufferData[14] = 7, this.__indexBufferData[15] = 7, this.__indexBufferData[16] = 4, this.__indexBufferData[17] = 5, this.__indexBufferData[18] = 8, this.__indexBufferData[19] = 9, this.__indexBufferData[20] = 0, this.__indexBufferData[21] = 0, this.__indexBufferData[22] =
                                9, this.__indexBufferData[23] = 1, this.__indexBufferData[24] = 10, this.__indexBufferData[25] = 8, this.__indexBufferData[26] = 4, this.__indexBufferData[27] = 4, this.__indexBufferData[28] = 8, this.__indexBufferData[29] = 0, this.__indexBufferData[30] = 11, this.__indexBufferData[31] = 10, this.__indexBufferData[32] = 6, this.__indexBufferData[33] = 6, this.__indexBufferData[34] = 10, this.__indexBufferData[35] = 4, this.__indexBufferData[36] = 12, this.__indexBufferData[37] = 13, this.__indexBufferData[38] = 8, this.__indexBufferData[39] = 8,
                                this.__indexBufferData[40] = 13, this.__indexBufferData[41] = 9, this.__indexBufferData[42] = 14, this.__indexBufferData[43] = 12, this.__indexBufferData[44] = 10, this.__indexBufferData[45] = 10, this.__indexBufferData[46] = 12, this.__indexBufferData[47] = 8, this.__indexBufferData[48] = 15, this.__indexBufferData[49] = 14, this.__indexBufferData[50] = 11, this.__indexBufferData[51] = 11, this.__indexBufferData[52] = 14, this.__indexBufferData[53] = 10, this.__indexBuffer = a.createIndexBuffer(54)) : 0 == c && 0 != b ? (this.__indexBufferData = new Uint16Array(18),
                                this.__indexBufferData[0] = 0, this.__indexBufferData[1] = 1, this.__indexBufferData[2] = 2, this.__indexBufferData[3] = 2, this.__indexBufferData[4] = 1, this.__indexBufferData[5] = 3, this.__indexBufferData[6] = 4, this.__indexBufferData[7] = 5, this.__indexBufferData[8] = 0, this.__indexBufferData[9] = 0, this.__indexBufferData[10] = 5, this.__indexBufferData[11] = 1, this.__indexBufferData[12] = 6, this.__indexBufferData[13] = 7, this.__indexBufferData[14] = 4, this.__indexBufferData[15] = 4, this.__indexBufferData[16] = 7, this.__indexBufferData[17] =
                                5, this.__indexBuffer = a.createIndexBuffer(18)) : 0 != c && 0 == b && (this.__indexBufferData = new Uint16Array(18), this.__indexBufferData[0] = 0, this.__indexBufferData[1] = 1, this.__indexBufferData[2] = 2, this.__indexBufferData[3] = 2, this.__indexBufferData[4] = 1, this.__indexBufferData[5] = 3, this.__indexBufferData[6] = 4, this.__indexBufferData[7] = 0, this.__indexBufferData[8] = 5, this.__indexBufferData[9] = 5, this.__indexBufferData[10] = 0, this.__indexBufferData[11] = 2, this.__indexBufferData[12] = 6, this.__indexBufferData[13] = 4, this.__indexBufferData[14] =
                                7, this.__indexBufferData[15] = 7, this.__indexBufferData[16] = 4, this.__indexBufferData[17] = 5, this.__indexBuffer = a.createIndexBuffer(18))
                        } else this.__indexBufferGrid = null;
                        null == this.__indexBuffer && (this.__indexBufferData = new Uint16Array(6), this.__indexBufferData[0] = 0, this.__indexBufferData[1] = 1, this.__indexBufferData[2] = 2, this.__indexBufferData[3] = 2, this.__indexBufferData[4] = 1, this.__indexBufferData[5] = 3, this.__indexBuffer = a.createIndexBuffer(6));
                        this.__indexBuffer.uploadFromTypedArray(this.__indexBufferData)
                    }
                    return this.__indexBuffer
                },
                getVertexBuffer: function (a, b, c) {
                    if (null == this.__vertexBuffer || this.__vertexBufferContext != a.__context || null != b && null == this.__vertexBufferGrid || null != this.__vertexBufferGrid && !this.__vertexBufferGrid.equals(b) || null != c && (this.__vertexBufferWidth != c.get_width() || this.__vertexBufferHeight != c.get_height() || this.__vertexBufferScaleX != c.get_scaleX() || this.__vertexBufferScaleY != c.get_scaleY())) {
                        this.__uvRect = new ha(0, 0, this.width, this.height);
                        this.__vertexBufferContext = a.__context;
                        this.__vertexBuffer = null;
                        null != c && (this.__vertexBufferWidth = c.get_width(), this.__vertexBufferHeight = c.get_height(), this.__vertexBufferScaleX = c.get_scaleX(), this.__vertexBufferScaleY = c.get_scaleY());
                        if (null != b && null != c) {
                            null == this.__vertexBufferGrid && (this.__vertexBufferGrid = new ha);
                            this.__vertexBufferGrid.copyFrom(b);
                            this.__vertexBufferWidth = c.get_width();
                            this.__vertexBufferHeight = c.get_height();
                            this.__vertexBufferScaleX = c.get_scaleX();
                            this.__vertexBufferScaleY = c.get_scaleY();
                            var d = b.width,
                                e = b.height;
                            if (0 != d && 0 != e) {
                                this.__vertexBufferData =
                                    new Float32Array(224);
                                var f = b.x,
                                    h = b.y,
                                    r = this.width - d - f,
                                    m = this.height - e - h;
                                b = f / this.width;
                                var g = h / this.height;
                                d /= this.width;
                                e /= this.height;
                                f /= c.get_scaleX();
                                h /= c.get_scaleY();
                                r /= c.get_scaleX();
                                var n = m / c.get_scaleY();
                                m = c.get_width() / c.get_scaleX() - f - r;
                                r = c.get_height() / c.get_scaleY() - h - n;
                                this.__vertexBufferData[0] = f;
                                this.__vertexBufferData[1] = h;
                                this.__vertexBufferData[3] = 1 * b;
                                this.__vertexBufferData[4] = 1 * g;
                                this.__vertexBufferData[15] = h;
                                this.__vertexBufferData[18] = 1 * g;
                                this.__vertexBufferData[28] = f;
                                this.__vertexBufferData[31] =
                                    1 * b;
                                this.__vertexBufferData[56] = f + m;
                                this.__vertexBufferData[57] = h;
                                this.__vertexBufferData[59] = 1 * (b + d);
                                this.__vertexBufferData[60] = 1 * g;
                                this.__vertexBufferData[70] = f + m;
                                this.__vertexBufferData[73] = 1 * (b + d);
                                this.__vertexBufferData[84] = this.width;
                                this.__vertexBufferData[85] = h;
                                this.__vertexBufferData[87] = 1;
                                this.__vertexBufferData[88] = 1 * g;
                                this.__vertexBufferData[98] = this.width;
                                this.__vertexBufferData[101] = 1;
                                this.__vertexBufferData[112] = f;
                                this.__vertexBufferData[113] = h + r;
                                this.__vertexBufferData[115] = 1 * b;
                                this.__vertexBufferData[116] =
                                    1 * (g + e);
                                this.__vertexBufferData[127] = h + r;
                                this.__vertexBufferData[130] = 1 * (g + e);
                                this.__vertexBufferData[140] = f + m;
                                this.__vertexBufferData[141] = h + r;
                                this.__vertexBufferData[143] = 1 * (b + d);
                                this.__vertexBufferData[144] = 1 * (g + e);
                                this.__vertexBufferData[154] = this.width;
                                this.__vertexBufferData[155] = h + r;
                                this.__vertexBufferData[157] = 1;
                                this.__vertexBufferData[158] = 1 * (g + e);
                                this.__vertexBufferData[168] = f;
                                this.__vertexBufferData[169] = this.height;
                                this.__vertexBufferData[171] = 1 * b;
                                this.__vertexBufferData[172] = 1;
                                this.__vertexBufferData[183] =
                                    this.height;
                                this.__vertexBufferData[186] = 1;
                                this.__vertexBufferData[196] = f + m;
                                this.__vertexBufferData[197] = this.height;
                                this.__vertexBufferData[199] = 1 * (b + d);
                                this.__vertexBufferData[200] = 1;
                                this.__vertexBufferData[210] = this.width;
                                this.__vertexBufferData[211] = this.height;
                                this.__vertexBufferData[213] = 1;
                                this.__vertexBufferData[214] = 1;
                                this.__vertexBuffer = a.createVertexBuffer(16, 14)
                            } else 0 == d && 0 != e ? (this.__vertexBufferData = new Float32Array(112), h = b.y, m = this.height - e - h, g = h / this.height, e /= this.height, h /= c.get_scaleY(),
                                n = m / c.get_scaleY(), r = c.get_height() / c.get_scaleY() - h - n, c = c.get_width() / c.get_scaleX(), this.__vertexBufferData[0] = c, this.__vertexBufferData[1] = h, this.__vertexBufferData[3] = 1, this.__vertexBufferData[4] = 1 * g, this.__vertexBufferData[15] = h, this.__vertexBufferData[18] = 1 * g, this.__vertexBufferData[28] = c, this.__vertexBufferData[31] = 1, this.__vertexBufferData[56] = c, this.__vertexBufferData[57] = h + r, this.__vertexBufferData[59] = 1, this.__vertexBufferData[60] = 1 * (g + e), this.__vertexBufferData[71] = h + r, this.__vertexBufferData[74] =
                                1 * (g + e), this.__vertexBufferData[84] = c, this.__vertexBufferData[85] = this.height, this.__vertexBufferData[87] = 1, this.__vertexBufferData[88] = 1, this.__vertexBufferData[99] = this.height, this.__vertexBufferData[102] = 1, this.__vertexBuffer = a.createVertexBuffer(8, 14)) : 0 == e && 0 != d && (this.__vertexBufferData = new Float32Array(112), f = b.x, r = this.width - d - f, b = f / this.width, d /= this.width, f /= c.get_scaleX(), r /= c.get_scaleX(), m = c.get_width() / c.get_scaleX() - f - r, c = c.get_height() / c.get_scaleY(), this.__vertexBufferData[0] = f, this.__vertexBufferData[1] =
                                c, this.__vertexBufferData[3] = 1 * b, this.__vertexBufferData[4] = 1, this.__vertexBufferData[15] = c, this.__vertexBufferData[18] = 1, this.__vertexBufferData[28] = f, this.__vertexBufferData[31] = 1 * b, this.__vertexBufferData[56] = f + m, this.__vertexBufferData[57] = c, this.__vertexBufferData[59] = 1 * (b + d), this.__vertexBufferData[60] = 1, this.__vertexBufferData[70] = f + m, this.__vertexBufferData[73] = 1 * (b + d), this.__vertexBufferData[84] = this.width, this.__vertexBufferData[85] = c, this.__vertexBufferData[87] = 1, this.__vertexBufferData[88] =
                                1, this.__vertexBufferData[98] = this.width, this.__vertexBufferData[101] = 1, this.__vertexBuffer = a.createVertexBuffer(8, 14))
                        } else this.__vertexBufferGrid = null;
                        null == this.__vertexBuffer && (this.__vertexBufferData = new Float32Array(56), this.__vertexBufferData[0] = this.width, this.__vertexBufferData[1] = this.height, this.__vertexBufferData[3] = 1, this.__vertexBufferData[4] = 1, this.__vertexBufferData[15] = this.height, this.__vertexBufferData[18] = 1, this.__vertexBufferData[28] = this.width, this.__vertexBufferData[31] = 1,
                            this.__vertexBuffer = a.createVertexBuffer(3, 14));
                        this.__vertexBuffer.uploadFromTypedArray(Vg.toArrayBufferView(this.__vertexBufferData))
                    }
                    return this.__vertexBuffer
                },
                getPixel: function (a, b) {
                    return this.readable ? this.image.getPixel(a, b, 1) : 0
                },
                getTexture: function (a) {
                    if (!this.__isValid) return null;
                    if (null == this.__texture || this.__textureContext != a.__context) this.__textureContext = a.__context, this.__texture = a.createRectangleTexture(this.width, this.height, 1, !1), this.__textureVersion = -1;
                    Ba.sync(this.image, !1);
                    null != this.image && this.image.version > this.__textureVersion && (null != this.__surface && Zl.flush(this.__surface), a = this.image, Ua.__supportsBGRA || 0 == a.get_format() || (a = a.clone(), a.set_format(0)), this.__texture.__uploadFromImage(a), this.__textureVersion = this.image.version, this.__textureWidth = a.buffer.width, this.__textureHeight = a.buffer.height);
                    this.readable || null == this.image || (this.image = this.__surface = null);
                    return this.__texture
                },
                setPixel: function (a, b, c) {
                    this.readable && this.image.setPixel(a, b, c, 1)
                },
                __drawCanvas: function (a,
                                        b) {
                    var c = this.image.buffer;
                    b.__allowSmoothing || b.applySmoothing(c.__srcContext, !1);
                    b.__render(a);
                    b.__allowSmoothing || b.applySmoothing(c.__srcContext, !0);
                    c.__srcContext.setTransform(1, 0, 0, 1, 0, 0);
                    c.__srcImageData = null;
                    c.data = null;
                    this.image.dirty = !0;
                    this.image.version++
                },
                __drawGL: function (a, b) {
                    var c = b.__context3D,
                        d = c.__state.renderToTexture,
                        e = c.__state.renderToTextureDepthStencil,
                        f = c.__state.renderToTextureAntiAlias,
                        h = c.__state.renderToTextureSurfaceSelector;
                    c.setRenderToTexture(this.getTexture(c),
                        !0);
                    b.__render(a);
                    null != d ? c.setRenderToTexture(d, e, f, h) : c.setRenderToBackBuffer()
                },
                __fillRect: function (a, b, c) {
                    if (null != a)
                        if (this.transparent && 0 == (b & -16777216) && (b = 0), c && null != this.__texture && null != this.__texture.__glFramebuffer && "opengl" == Na.get_current().stage.__renderer.__type) {
                            c = Na.get_current().stage.__renderer.__context3D;
                            var d = !this.rect.equals(a),
                                e = c.__state.renderToTexture,
                                f = c.__state.renderToTextureDepthStencil,
                                h = c.__state.renderToTextureAntiAlias,
                                r = c.__state.renderToTextureSurfaceSelector;
                            c.setRenderToTexture(this.__texture);
                            d && c.setScissorRectangle(a);
                            c.clear((b >>> 16 & 255) / 255, (b >>> 8 & 255) / 255, (b & 255) / 255, this.transparent ? (b >>> 24 & 255) / 255 : 1, 0, 0, 1);
                            d && c.setScissorRectangle(null);
                            null != e ? c.setRenderToTexture(e, f, h, r) : c.setRenderToBackBuffer()
                        } else this.readable && this.image.fillRect(a.__toLimeRectangle(), b, 1)
                },
                __fromImage: function (a) {
                    null != a && null != a.buffer && (this.image = a, this.width = a.width, this.height = a.height, this.rect = new ha(0, 0, a.width, a.height), this.__textureWidth = this.width, this.__textureHeight =
                        this.height, this.__isValid = this.readable = !0)
                },
                __getBounds: function (a, b) {
                    var c = ha.__pool.get();
                    this.rect.__transform(c, b);
                    a.__expand(c.x, c.y, c.width, c.height);
                    ha.__pool.release(c)
                },
                __setUVRect: function (a, b, c, d, e) {
                    if (null != this.getVertexBuffer(a) && (d != this.__uvRect.width || e != this.__uvRect.height || b != this.__uvRect.x || c != this.__uvRect.y)) {
                        null == this.__uvRect && (this.__uvRect = new ha);
                        this.__uvRect.setTo(b, c, d, e);
                        a = 0 < this.__textureWidth ? b / this.__textureWidth : 0;
                        c = 0 < this.__textureHeight ? c / this.__textureHeight :
                            0;
                        b = 0 < this.__textureWidth ? d / this.__textureWidth : 0;
                        var f = 0 < this.__textureHeight ? e / this.__textureHeight : 0;
                        this.__vertexBufferData[0] = d;
                        this.__vertexBufferData[1] = e;
                        this.__vertexBufferData[3] = a + b;
                        this.__vertexBufferData[4] = c + f;
                        this.__vertexBufferData[15] = e;
                        this.__vertexBufferData[17] = a;
                        this.__vertexBufferData[18] = c + f;
                        this.__vertexBufferData[28] = d;
                        this.__vertexBufferData[31] = a + b;
                        this.__vertexBufferData[32] = c;
                        this.__vertexBufferData[45] = a;
                        this.__vertexBufferData[46] = c;
                        this.__vertexBuffer.uploadFromTypedArray(Vg.toArrayBufferView(this.__vertexBufferData))
                    }
                },
                __update: function (a, b) {
                    this.__updateTransforms()
                },
                __updateTransforms: function (a) {
                    null == a ? this.__worldTransform.identity() : this.__worldTransform.copyFrom(a);
                    this.__renderTransform.copyFrom(this.__worldTransform)
                },
                __class__: mb
            };
            var Fc = function () {
                O.call(this);
                this.__allowSmoothing = !0;
                this.__pixelRatio = 1;
                this.__tempColorTransform = new ib;
                this.__worldAlpha = 1
            };
            g["openfl.display.DisplayObjectRenderer"] = Fc;
            Fc.__name__ = "openfl.display.DisplayObjectRenderer";
            Fc.__super__ = O;
            Fc.prototype = l(O.prototype, {
                __clear: function () {
                },
                __getAlpha: function (a) {
                    return a * this.__worldAlpha
                },
                __popMaskObject: function (a, b) {
                },
                __pushMaskObject: function (a, b) {
                },
                __render: function (a) {
                },
                __renderEvent: function (a) {
                    if (null != a.__customRenderEvent && a.__renderable) {
                        a.__customRenderEvent.allowSmoothing = this.__allowSmoothing;
                        a.__customRenderEvent.objectMatrix.copyFrom(a.__renderTransform);
                        a.__customRenderEvent.objectColorTransform.__copyFrom(a.__worldColorTransform);
                        a.__customRenderEvent.renderer = this;
                        switch (this.__type) {
                            case "cairo":
                                a.__customRenderEvent.type =
                                    "renderCairo";
                                break;
                            case "canvas":
                                a.__customRenderEvent.type = "renderCanvas";
                                break;
                            case "dom":
                                a.__customRenderEvent.type = null != a.stage && a.__worldVisible ? "renderDOM" : "clearDOM";
                                break;
                            case "opengl":
                                this.__cleared || this.__clear();
                                this.setShader(a.__worldShader);
                                this.__context3D.__flushGL();
                                a.__customRenderEvent.type = "renderOpenGL";
                                break;
                            default:
                                return
                        }
                        this.__setBlendMode(a.__worldBlendMode);
                        this.__pushMaskObject(a);
                        a.dispatchEvent(a.__customRenderEvent);
                        this.__popMaskObject(a);
                        "opengl" == this.__type &&
                        this.setViewport()
                    }
                },
                __resize: function (a, b) {
                },
                __setBlendMode: function (a) {
                },
                __shouldCacheHardware: function (a, b) {
                    if (null == a) return null;
                    switch (a.__drawableType) {
                        case 4:
                        case 5:
                            if (1 == b) return !0;
                            b = this.__shouldCacheHardware_DisplayObject(a, b);
                            if (1 == b) return !0;
                            if (null != a.__children) {
                                var c = 0;
                                for (a = a.__children; c < a.length;) {
                                    var d = a[c];
                                    ++c;
                                    b = this.__shouldCacheHardware_DisplayObject(d, b);
                                    if (1 == b) return !0
                                }
                            }
                            return b;
                        case 7:
                            return 1 == b ? !0 : !1;
                        case 9:
                            return !0;
                        default:
                            return this.__shouldCacheHardware_DisplayObject(a,
                                b)
                    }
                },
                __shouldCacheHardware_DisplayObject: function (a, b) {
                    return 1 == b || null != a.__filters ? !0 : 0 == b || null != a.__graphics && !tb.isCompatible(a.__graphics) ? !1 : null
                },
                __updateCacheBitmap: function (a, b) {
                    if (null == a) return !1;
                    switch (a.__drawableType) {
                        case 2:
                            var c = a;
                            if (null == c.__bitmapData || null == c.__filters && "opengl" == this.__type && null == c.__cacheBitmap) return !1;
                            b = null != c.__bitmapData.image && c.__bitmapData.image.version != c.__imageVersion;
                            break;
                        case 7:
                            var d = a;
                            if (null == d.__filters && "opengl" == this.__type && null == d.__cacheBitmap &&
                                !d.__domRender) return !1;
                            b && (d.__renderDirty = !0);
                            b = b || d.__dirty;
                            break;
                        case 9:
                            if (null == a.__filters && "opengl" == this.__type && null == a.__cacheBitmap) return !1
                    }
                    if (a.__isCacheBitmapRender) return !1;
                    d = ib.__pool.get();
                    d.__copyFrom(a.__worldColorTransform);
                    null != this.__worldColorTransform && d.__combine(this.__worldColorTransform);
                    var e = !1;
                    if (a.get_cacheAsBitmap() || "opengl" != this.__type && !d.__isDefault(!0)) {
                        e = null;
                        var f = (b = null == a.__cacheBitmap || a.__renderDirty && (b || null != a.__children && 0 < a.__children.length) || a.opaqueBackground !=
                                a.__cacheBitmapBackground) || null != a.__graphics && a.__graphics.__softwareDirty || !a.__cacheBitmapColorTransform.__equals(d, !0),
                            h = b || null != a.__graphics && a.__graphics.__hardwareDirty,
                            r = this.__type;
                        if (f || h) "opengl" == r && 0 == this.__shouldCacheHardware(a, null) && (r = "canvas"), !f || "canvas" != r && "cairo" != r || (b = !0), h && "opengl" == r && (b = !0);
                        f = b || !a.__cacheBitmap.__worldTransform.equals(a.__worldTransform);
                        c = null != a.__filters;
                        if ("dom" == this.__type && !c) return !1;
                        if (c && !b)
                            for (var m = 0, g = a.__filters; m < g.length;) {
                                var n = g[m];
                                ++m;
                                if (n.__renderDirty) {
                                    b = !0;
                                    break
                                }
                            }
                        null == a.__cacheBitmapMatrix && (a.__cacheBitmapMatrix = new la);
                        m = null != a.__cacheAsBitmapMatrix ? a.__cacheAsBitmapMatrix : a.__renderTransform;
                        b || m.a == a.__cacheBitmapMatrix.a && m.b == a.__cacheBitmapMatrix.b && m.c == a.__cacheBitmapMatrix.c && m.d == a.__cacheBitmapMatrix.d || (b = !0);
                        !b && "opengl" != this.__type && null != a.__cacheBitmapData && null != a.__cacheBitmapData.image && a.__cacheBitmapData.image.version < a.__cacheBitmapData.__textureVersion && (b = !0);
                        if (!b)
                            for (h = a; null != h;) {
                                if (null !=
                                    h.get_scrollRect()) {
                                    f = !0;
                                    break
                                }
                                h = h.parent
                            }
                        a.__cacheBitmapMatrix.copyFrom(m);
                        a.__cacheBitmapMatrix.tx = 0;
                        var k = h = a.__cacheBitmapMatrix.ty = 0,
                            q = 0,
                            l = 0,
                            p = n = 0;
                        g = this.__pixelRatio;
                        if (f || b) e = ha.__pool.get(), a.__getFilterBounds(e, a.__cacheBitmapMatrix), q = 0 < e.width ? Math.ceil((e.width + 1) * g) : 0, l = 0 < e.height ? Math.ceil((e.height + 1) * g) : 0, n = 0 < e.x ? Math.ceil(e.x) : Math.floor(e.x), p = 0 < e.y ? Math.ceil(e.y) : Math.floor(e.y), null != a.__cacheBitmapData ? q > a.__cacheBitmapData.width || l > a.__cacheBitmapData.height ? (h = Math.ceil(Math.max(1.25 *
                            q, a.__cacheBitmapData.width)), k = Math.ceil(Math.max(1.25 * l, a.__cacheBitmapData.height)), b = !0) : (h = a.__cacheBitmapData.width, k = a.__cacheBitmapData.height) : (h = q, k = l);
                        if (b)
                            if (f = !0, a.__cacheBitmapBackground = a.opaqueBackground, .5 <= q && .5 <= l) {
                                var y = null != a.opaqueBackground && (h != q || k != l),
                                    v = null != a.opaqueBackground ? -16777216 | a.opaqueBackground : 0,
                                    t = y ? 0 : v,
                                    B = "opengl" == this.__type;
                                null == a.__cacheBitmapData || h > a.__cacheBitmapData.width || k > a.__cacheBitmapData.height ? (a.__cacheBitmapData = new mb(h, k, !0, t), null == a.__cacheBitmap &&
                                (a.__cacheBitmap = new Jg), a.__cacheBitmap.__bitmapData = a.__cacheBitmapData, a.__cacheBitmapRenderer = null) : a.__cacheBitmapData.__fillRect(a.__cacheBitmapData.rect, t, B);
                                y && (e.setTo(0, 0, q, l), a.__cacheBitmapData.__fillRect(e, v, B))
                            } else return ib.__pool.release(d), a.__cacheBitmap = null, a.__cacheBitmapData = null, a.__cacheBitmapData2 = null, a.__cacheBitmapData3 = null, a.__cacheBitmapRenderer = null, 7 == a.__drawableType && (d = a, null != d.__cacheBitmap && (d.__cacheBitmap.__renderTransform.tx -= d.__offsetX * g, d.__cacheBitmap.__renderTransform.ty -=
                                d.__offsetY * g)), !0;
                        else a.__cacheBitmapData = a.__cacheBitmap.get_bitmapData(), a.__cacheBitmapData2 = null, a.__cacheBitmapData3 = null;
                        if (f || b) a.__cacheBitmap.__worldTransform.copyFrom(a.__worldTransform), m == a.__renderTransform ? (a.__cacheBitmap.__renderTransform.identity(), a.__cacheBitmap.__renderTransform.scale(1 / g, 1 / g), a.__cacheBitmap.__renderTransform.tx = a.__renderTransform.tx + n, a.__cacheBitmap.__renderTransform.ty = a.__renderTransform.ty + p) : (a.__cacheBitmap.__renderTransform.copyFrom(a.__cacheBitmapMatrix),
                            a.__cacheBitmap.__renderTransform.invert(), a.__cacheBitmap.__renderTransform.concat(a.__renderTransform), a.__cacheBitmap.__renderTransform.a *= 1 / g, a.__cacheBitmap.__renderTransform.d *= 1 / g, a.__cacheBitmap.__renderTransform.tx += n, a.__cacheBitmap.__renderTransform.ty += p);
                        a.__cacheBitmap.smoothing = this.__allowSmoothing;
                        a.__cacheBitmap.__renderable = a.__renderable;
                        a.__cacheBitmap.__worldAlpha = a.__worldAlpha;
                        a.__cacheBitmap.__worldBlendMode = a.__worldBlendMode;
                        a.__cacheBitmap.__worldShader = a.__worldShader;
                        a.__cacheBitmap.set_mask(a.__mask);
                        if (b) {
                            if (null == a.__cacheBitmapRenderer || r != a.__cacheBitmapRenderer.__type) "opengl" == r ? a.__cacheBitmapRenderer = new Ra(T.__cast(this, Ra).__context3D, a.__cacheBitmapData) : (null == a.__cacheBitmapData.image && (a.__cacheBitmapData = new mb(h, k, !0, null != a.opaqueBackground ? -16777216 | a.opaqueBackground : 0), a.__cacheBitmap.__bitmapData = a.__cacheBitmapData), Ba.convertToCanvas(a.__cacheBitmapData.image), a.__cacheBitmapRenderer = new we(a.__cacheBitmapData.image.buffer.__srcContext)),
                                a.__cacheBitmapRenderer.__worldTransform = new la, a.__cacheBitmapRenderer.__worldColorTransform = new ib;
                            null == a.__cacheBitmapColorTransform && (a.__cacheBitmapColorTransform = new ib);
                            a.__cacheBitmapRenderer.__stage = a.stage;
                            a.__cacheBitmapRenderer.__allowSmoothing = this.__allowSmoothing;
                            a.__cacheBitmapRenderer.__setBlendMode(10);
                            a.__cacheBitmapRenderer.__worldAlpha = 1 / a.__worldAlpha;
                            a.__cacheBitmapRenderer.__worldTransform.copyFrom(a.__renderTransform);
                            a.__cacheBitmapRenderer.__worldTransform.invert();
                            a.__cacheBitmapRenderer.__worldTransform.concat(a.__cacheBitmapMatrix);
                            a.__cacheBitmapRenderer.__worldTransform.tx -= n;
                            a.__cacheBitmapRenderer.__worldTransform.ty -= p;
                            a.__cacheBitmapRenderer.__worldTransform.scale(g, g);
                            a.__cacheBitmapRenderer.__pixelRatio = g;
                            a.__cacheBitmapRenderer.__worldColorTransform.__copyFrom(d);
                            a.__cacheBitmapRenderer.__worldColorTransform.__invert();
                            a.__isCacheBitmapRender = !0;
                            if ("opengl" == a.__cacheBitmapRenderer.__type) {
                                y = a.__cacheBitmapRenderer;
                                v = y.__context3D;
                                t = v.__state.renderToTexture;
                                B = v.__state.renderToTextureDepthStencil;
                                var E = v.__state.renderToTextureAntiAlias,
                                    z = v.__state.renderToTextureSurfaceSelector,
                                    x = this.__blendMode;
                                this.__suspendClipAndMask();
                                y.__copyShader(this);
                                a.__cacheBitmapData.__setUVRect(v, 0, 0, q, l);
                                y.__setRenderTarget(a.__cacheBitmapData);
                                null != a.__cacheBitmapData.image && (a.__cacheBitmapData.__textureVersion = a.__cacheBitmapData.image.version + 1);
                                a.__cacheBitmapData.__drawGL(a, y);
                                if (c) {
                                    var A = !1;
                                    m = 0;
                                    for (g = a.__filters; m < g.length;) n = g[m], ++m, n.__preserveObject && (A = !0);
                                    c = a.__cacheBitmapData;
                                    p = null;
                                    null == a.__cacheBitmapData2 || h > a.__cacheBitmapData2.width ||
                                    k > a.__cacheBitmapData2.height ? a.__cacheBitmapData2 = new mb(h, k, !0, 0) : (a.__cacheBitmapData2.fillRect(a.__cacheBitmapData2.rect, 0), null != a.__cacheBitmapData2.image && (a.__cacheBitmapData2.__textureVersion = a.__cacheBitmapData2.image.version + 1));
                                    a.__cacheBitmapData2.__setUVRect(v, 0, 0, q, l);
                                    r = a.__cacheBitmapData2;
                                    A && (null == a.__cacheBitmapData3 || h > a.__cacheBitmapData3.width || k > a.__cacheBitmapData3.height ? a.__cacheBitmapData3 = new mb(h, k, !0, 0) : (a.__cacheBitmapData3.fillRect(a.__cacheBitmapData3.rect, 0), null !=
                                    a.__cacheBitmapData3.image && (a.__cacheBitmapData3.__textureVersion = a.__cacheBitmapData3.image.version + 1)), a.__cacheBitmapData3.__setUVRect(v, 0, 0, q, l), p = a.__cacheBitmapData3);
                                    y.__setBlendMode(10);
                                    y.__worldAlpha = 1;
                                    y.__worldTransform.identity();
                                    y.__worldColorTransform.__identity();
                                    m = 0;
                                    for (g = a.__filters; m < g.length;) {
                                        n = g[m];
                                        ++m;
                                        n.__preserveObject && (y.__setRenderTarget(p), y.__renderFilterPass(c, y.__defaultDisplayShader, n.__smooth));
                                        k = 0;
                                        for (q = n.__numShaderPasses; k < q;) h = k++, h = n.__initShader(y, h, n.__preserveObject ?
                                            p : null), y.__setBlendMode(n.__shaderBlendMode), y.__setRenderTarget(r), y.__renderFilterPass(c, h, n.__smooth), h = c, c = r, r = h;
                                        n.__renderDirty = !1
                                    }
                                    a.__cacheBitmap.__bitmapData = c
                                }
                                this.__blendMode = 10;
                                this.__setBlendMode(x);
                                this.__copyShader(y);
                                null != t ? v.setRenderToTexture(t, B, E, z) : v.setRenderToBackBuffer();
                                this.__resumeClipAndMask(y);
                                this.setViewport();
                                a.__cacheBitmapColorTransform.__copyFrom(d)
                            } else {
                                a.__cacheBitmapData.__drawCanvas(a, a.__cacheBitmapRenderer);
                                if (c) {
                                    A = q = !1;
                                    m = 0;
                                    for (g = a.__filters; m < g.length;) n =
                                        g[m], ++m, n.__needSecondBitmapData && (q = !0), n.__preserveObject && (A = !0);
                                    c = a.__cacheBitmapData;
                                    p = null;
                                    q ? (null == a.__cacheBitmapData2 || null == a.__cacheBitmapData2.image || h > a.__cacheBitmapData2.width || k > a.__cacheBitmapData2.height ? a.__cacheBitmapData2 = new mb(h, k, !0, 0) : a.__cacheBitmapData2.fillRect(a.__cacheBitmapData2.rect, 0), r = a.__cacheBitmapData2) : r = c;
                                    A && (null == a.__cacheBitmapData3 || null == a.__cacheBitmapData3.image || h > a.__cacheBitmapData3.width || k > a.__cacheBitmapData3.height ? a.__cacheBitmapData3 = new mb(h,
                                        k, !0, 0) : a.__cacheBitmapData3.fillRect(a.__cacheBitmapData3.rect, 0), p = a.__cacheBitmapData3);
                                    null == a.__tempPoint && (a.__tempPoint = new ba);
                                    k = a.__tempPoint;
                                    m = 0;
                                    for (g = a.__filters; m < g.length;) n = g[m], ++m, n.__preserveObject && p.copyPixels(c, c.rect, k), h = n.__applyFilter(r, c, c.rect, k), n.__preserveObject && h.draw(p, null, null != a.__objectTransform ? a.__objectTransform.__colorTransform : null), n.__renderDirty = !1, q && h == r && (h = c, c = r, r = h);
                                    a.__cacheBitmapData != c && (h = a.__cacheBitmapData, a.__cacheBitmapData = c, a.__cacheBitmapData2 =
                                        h, a.__cacheBitmap.__bitmapData = a.__cacheBitmapData, a.__cacheBitmapRenderer = null);
                                    a.__cacheBitmap.__imageVersion = a.__cacheBitmapData.__textureVersion
                                }
                                a.__cacheBitmapColorTransform.__copyFrom(d);
                                a.__cacheBitmapColorTransform.__isDefault(!0) || (a.__cacheBitmapColorTransform.alphaMultiplier = 1, a.__cacheBitmapData.colorTransform(a.__cacheBitmapData.rect, a.__cacheBitmapColorTransform))
                            }
                            a.__isCacheBitmapRender = !1
                        }
                        (f || b) && ha.__pool.release(e);
                        e = f
                    } else null != a.__cacheBitmap && ("dom" == this.__type && this.__renderDrawableClear(a.__cacheBitmap),
                        a.__cacheBitmap = null, a.__cacheBitmapData = null, a.__cacheBitmapData2 = null, a.__cacheBitmapData3 = null, a.__cacheBitmapColorTransform = null, a.__cacheBitmapRenderer = null, e = !0);
                    ib.__pool.release(d);
                    e && 7 == a.__drawableType && (d = a, null != d.__cacheBitmap && (d.__cacheBitmap.__renderTransform.tx -= d.__offsetX, d.__cacheBitmap.__renderTransform.ty -= d.__offsetY));
                    return e
                },
                __class__: Fc
            });
            var lj = function (a) {
                Fc.call(this)
            };
            g["openfl.display.CairoRenderer"] = lj;
            lj.__name__ = "openfl.display.CairoRenderer";
            lj.__super__ = Fc;
            lj.prototype =
                l(Fc.prototype, {
                    applyMatrix: function (a, b) {
                        null == b && (b = this.cairo);
                        this.__matrix.copyFrom(a);
                        this.cairo == b && null != this.__worldTransform && this.__matrix.concat(this.__worldTransform);
                        this.__matrix3.a = this.__matrix.a;
                        this.__matrix3.b = this.__matrix.b;
                        this.__matrix3.c = this.__matrix.c;
                        this.__matrix3.d = this.__matrix.d;
                        this.__roundPixels ? (this.__matrix3.tx = Math.round(this.__matrix.tx), this.__matrix3.ty = Math.round(this.__matrix.ty)) : (this.__matrix3.tx = this.__matrix.tx, this.__matrix3.ty = this.__matrix.ty);
                        b.set_matrix(this.__matrix3)
                    },
                    __clear: function () {
                        if (null != this.cairo && (this.cairo.identityMatrix(), null != this.__stage && this.__stage.__clearBeforeRender)) {
                            var a = this.__blendMode;
                            this.__setBlendMode(10);
                            this.cairo.setSourceRGB(this.__stage.__colorSplit[0], this.__stage.__colorSplit[1], this.__stage.__colorSplit[2]);
                            this.cairo.paint();
                            this.__setBlendMode(a)
                        }
                    },
                    __popMask: function () {
                        this.cairo.restore()
                    },
                    __popMaskObject: function (a, b) {
                        null == b && (b = !0);
                        a.__isCacheBitmapRender || null == a.__mask || this.__popMask();
                        b && null != a.__scrollRect && this.__popMaskRect()
                    },
                    __popMaskRect: function () {
                        this.cairo.restore()
                    },
                    __pushMask: function (a) {
                        this.cairo.save();
                        this.applyMatrix(a.__renderTransform, this.cairo);
                        this.cairo.newPath();
                        this.__renderDrawableMask(a);
                        this.cairo.clip()
                    },
                    __pushMaskObject: function (a, b) {
                        null == b && (b = !0);
                        b && null != a.__scrollRect && this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
                        a.__isCacheBitmapRender || null == a.__mask || this.__pushMask(a.__mask)
                    },
                    __pushMaskRect: function (a, b) {
                        this.cairo.save();
                        this.applyMatrix(b, this.cairo);
                        this.cairo.newPath();
                        this.cairo.rectangle(a.x, a.y, a.width, a.height);
                        this.cairo.clip()
                    },
                    __render: function (a) {
                        null != this.cairo && this.__renderDrawable(a)
                    },
                    __renderDrawable: function (a) {
                        if (null != a) switch (a.__drawableType) {
                            case 6:
                                !a.__renderable || 0 >= a.__worldAlpha || null == a.__currentState || (this.__pushMaskObject(a), this.__renderDrawable(a.__currentState), this.__popMaskObject(a), this.__renderEvent(a))
                        }
                    },
                    __renderDrawableMask: function (a) {
                        if (null != a) switch (a.__drawableType) {
                            case 2:
                                this.cairo.rectangle(0, 0, a.get_width(), a.get_height());
                                break;
                            case 6:
                                this.__renderDrawableMask(a.__currentState)
                        }
                    },
                    __setBlendMode: function (a) {
                        null != this.__overrideBlendMode && (a = this.__overrideBlendMode);
                        this.__blendMode != a && (this.__blendMode = a, this.__setBlendModeCairo(this.cairo, a))
                    },
                    __setBlendModeCairo: function (a, b) {
                        switch (b) {
                            case 0:
                                a.setOperator(12);
                                break;
                            case 2:
                                a.setOperator(17);
                                break;
                            case 3:
                                a.setOperator(23);
                                break;
                            case 5:
                                a.setOperator(21);
                                break;
                            case 7:
                                a.setOperator(2);
                                break;
                            case 8:
                                a.setOperator(18);
                                break;
                            case 9:
                                a.setOperator(14);
                                break;
                            case 11:
                                a.setOperator(16);
                                break;
                            case 12:
                                a.setOperator(15);
                                break;
                            default:
                                a.setOperator(2)
                        }
                    },
                    __class__: lj
                });
            var we = function (a) {
                Fc.call(this);
                this.context = a;
                this.__tempMatrix = new la;
                this.__type = "canvas"
            };
            g["openfl.display.CanvasRenderer"] = we;
            we.__name__ = "openfl.display.CanvasRenderer";
            we.__super__ = Fc;
            we.prototype = l(Fc.prototype, {
                applySmoothing: function (a, b) {
                    a.imageSmoothingEnabled = b
                },
                setTransform: function (a, b) {
                    null == b ? b = this.context : this.context == b && null != this.__worldTransform && (this.__tempMatrix.copyFrom(a), this.__tempMatrix.concat(this.__worldTransform),
                        a = this.__tempMatrix);
                    this.__roundPixels ? b.setTransform(a.a, a.b, a.c, a.d, a.tx | 0, a.ty | 0) : b.setTransform(a.a, a.b, a.c, a.d, a.tx, a.ty)
                },
                __clear: function () {
                    if (null != this.__stage) {
                        var a = this.__blendMode;
                        this.__blendMode = null;
                        this.__setBlendMode(10);
                        this.context.setTransform(1, 0, 0, 1, 0, 0);
                        this.context.globalAlpha = 1;
                        !this.__stage.__transparent && this.__stage.__clearBeforeRender ? (this.context.fillStyle = this.__stage.__colorString, this.context.fillRect(0, 0, this.__stage.stageWidth * this.__stage.window.__scale, this.__stage.stageHeight *
                            this.__stage.window.__scale)) : this.__stage.__transparent && this.__stage.__clearBeforeRender && this.context.clearRect(0, 0, this.__stage.stageWidth * this.__stage.window.__scale, this.__stage.stageHeight * this.__stage.window.__scale);
                        this.__setBlendMode(a)
                    }
                },
                __popMask: function () {
                    this.context.restore()
                },
                __popMaskObject: function (a, b) {
                    null == b && (b = !0);
                    a.__isCacheBitmapRender || null == a.__mask || this.__popMask();
                    b && null != a.__scrollRect && this.__popMaskRect()
                },
                __popMaskRect: function () {
                    this.context.restore()
                },
                __pushMask: function (a) {
                    this.context.save();
                    this.setTransform(a.__renderTransform, this.context);
                    this.context.beginPath();
                    this.__renderDrawableMask(a);
                    this.context.closePath();
                    this.context.clip()
                },
                __pushMaskObject: function (a, b) {
                    null == b && (b = !0);
                    b && null != a.__scrollRect && this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
                    a.__isCacheBitmapRender || null == a.__mask || this.__pushMask(a.__mask)
                },
                __pushMaskRect: function (a, b) {
                    this.context.save();
                    this.setTransform(b, this.context);
                    this.context.beginPath();
                    this.context.rect(a.x, a.y, a.width, a.height);
                    this.context.clip()
                },
                __render: function (a) {
                    this.__renderDrawable(a)
                },
                __renderDrawable: function (a) {
                    if (null != a) switch (a.__drawableType) {
                        case 0:
                            mj.renderDrawable(a, this);
                            break;
                        case 2:
                            Xg.renderDrawable(a, this);
                            break;
                        case 3:
                            of.renderDrawable(a, this);
                            break;
                        case 4:
                        case 5:
                            nj.renderDrawable(a, this);
                            break;
                        case 6:
                            oj.renderDrawable(a, this);
                            break;
                        case 7:
                            P.renderDrawable(a, this);
                            break;
                        case 8:
                            pf.renderDrawable(a, this);
                            break;
                        case 9:
                            xe.renderDrawable(a, this)
                    }
                },
                __renderDrawableMask: function (a) {
                    if (null != a) switch (a.__drawableType) {
                        case 0:
                            mj.renderDrawableMask(a,
                                this);
                            break;
                        case 2:
                            Xg.renderDrawableMask(a, this);
                            break;
                        case 3:
                            of.renderDrawableMask(a, this);
                            break;
                        case 4:
                        case 5:
                            nj.renderDrawableMask(a, this);
                            break;
                        case 6:
                            oj.renderDrawableMask(a, this);
                            break;
                        case 7:
                            P.renderDrawableMask(a, this);
                            break;
                        case 8:
                            pf.renderDrawableMask(a, this);
                            break;
                        case 9:
                            xe.renderDrawableMask(a, this)
                    }
                },
                __setBlendMode: function (a) {
                    null != this.__overrideBlendMode && (a = this.__overrideBlendMode);
                    this.__blendMode != a && (this.__blendMode = a, this.__setBlendModeContext(this.context, a))
                },
                __setBlendModeContext: function (a,
                                                 b) {
                    switch (b) {
                        case 0:
                            a.globalCompositeOperation = "lighter";
                            break;
                        case 2:
                            a.globalCompositeOperation = "darken";
                            break;
                        case 3:
                            a.globalCompositeOperation = "difference";
                            break;
                        case 5:
                            a.globalCompositeOperation = "hard-light";
                            break;
                        case 8:
                            a.globalCompositeOperation = "lighten";
                            break;
                        case 9:
                            a.globalCompositeOperation = "multiply";
                            break;
                        case 11:
                            a.globalCompositeOperation = "overlay";
                            break;
                        case 12:
                            a.globalCompositeOperation = "screen";
                            break;
                        default:
                            a.globalCompositeOperation = "source-over"
                    }
                },
                __class__: we
            });
            var $l = {
                    toString: function (a) {
                        switch (a) {
                            case 0:
                                return "none";
                            case 1:
                                return "round";
                            case 2:
                                return "square";
                            default:
                                return null
                        }
                    }
                },
                pj = function (a) {
                    da.call(this);
                    this.__drawableType = 10;
                    this.__element = a
                };
            g["openfl.display.DOMElement"] = pj;
            pj.__name__ = "openfl.display.DOMElement";
            pj.__super__ = da;
            pj.prototype = l(da.prototype, {
                __class__: pj
            });
            var Yg = function (a) {
                Fc.call(this);
                this.element = a;
                da.__supportDOM = !0;
                a = window.getComputedStyle(document.documentElement, "");
                a = (Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/) || "" === a.OLink && ["", "o"])[1];
                "WebKit|Moz|MS|O".match(new RegExp("(" +
                    a + ")", "i"));
                a[0].toUpperCase();
                a.substr(1);
                this.__vendorPrefix = a;
                this.__transformProperty = "webkit" == a ? "-webkit-transform" : "transform";
                this.__transformOriginProperty = "webkit" == a ? "-webkit-transform-origin" : "transform-origin";
                this.__clipRects = [];
                this.__z = this.__numClipRects = 0;
                this.__type = "dom";
                this.__canvasRenderer = new we(null);
                this.__canvasRenderer.__isDOM = !0
            };
            g["openfl.display.DOMRenderer"] = Yg;
            Yg.__name__ = "openfl.display.DOMRenderer";
            Yg.__super__ = Fc;
            Yg.prototype = l(Fc.prototype, {
                __applyStyle: function (a,
                                        b, c, d) {
                    var e = a.__style;
                    if (b && a.__renderTransformChanged) {
                        b = a.__renderTransform;
                        var f = this.__roundPixels;
                        null == f && (f = !1);
                        e.setProperty(this.__transformProperty, f ? "matrix3d(" + b.a + ", " + b.b + ", 0, 0, " + b.c + ", " + b.d + ", 0, 0, 0, 0, 1, 0, " + (b.tx | 0) + ", " + (b.ty | 0) + ", 0, 1)" : "matrix3d(" + b.a + ", " + b.b + ", 0, 0, " + b.c + ", " + b.d + ", 0, 0, 0, 0, 1, 0, " + b.tx + ", " + b.ty + ", 0, 1)", null)
                    }
                    a.__worldZ != ++this.__z && (a.__worldZ = this.__z, e.setProperty("z-index", null == a.__worldZ ? "null" : "" + a.__worldZ, null));
                    c && a.__worldAlphaChanged &&
                    (1 > a.__worldAlpha ? e.setProperty("opacity", null == a.__worldAlpha ? "null" : "" + a.__worldAlpha, null) : e.removeProperty("opacity"));
                    d && a.__worldClipChanged && (null == a.__worldClip ? e.removeProperty("clip") : (a = a.__worldClip, e.setProperty("clip", "rect(" + a.y + "px, " + a.get_right() + "px, " + a.get_bottom() + "px, " + a.x + "px)", null)))
                },
                __initializeElement: function (a, b) {
                    var c = a.__style = b.style;
                    c.setProperty("position", "absolute", null);
                    c.setProperty("top", "0", null);
                    c.setProperty("left", "0", null);
                    c.setProperty(this.__transformOriginProperty,
                        "0 0 0", null);
                    this.element.appendChild(b);
                    a.__worldAlphaChanged = !0;
                    a.__renderTransformChanged = !0;
                    a.__worldVisibleChanged = !0;
                    a.__worldClipChanged = !0;
                    a.__worldClip = null;
                    a.__worldZ = -1
                },
                __popMask: function () {
                    this.__popMaskRect()
                },
                __popMaskObject: function (a, b) {
                    null == b && (b = !0);
                    null != a.__mask && this.__popMask();
                    b && null != a.__scrollRect && this.__popMaskRect()
                },
                __popMaskRect: function () {
                    0 < this.__numClipRects && (this.__numClipRects--, this.__currentClipRect = 0 < this.__numClipRects ? this.__clipRects[this.__numClipRects -
                    1] : null)
                },
                __pushMask: function (a) {
                    this.__pushMaskRect(a.getBounds(a), a.__renderTransform)
                },
                __pushMaskObject: function (a, b) {
                    null == b && (b = !0);
                    b && null != a.__scrollRect && this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
                    null != a.__mask && this.__pushMask(a.__mask)
                },
                __pushMaskRect: function (a, b) {
                    this.__numClipRects == this.__clipRects.length && (this.__clipRects[this.__numClipRects] = new ha);
                    var c = this.__clipRects[this.__numClipRects];
                    a.__transform(c, b);
                    0 < this.__numClipRects && (a = this.__clipRects[this.__numClipRects -
                    1], c.__contract(a.x, a.y, a.width, a.height));
                    0 > c.height && (c.height = 0);
                    0 > c.width && (c.width = 0);
                    this.__currentClipRect = c;
                    this.__numClipRects++
                },
                __render: function (a) {
                    this.element.style.background = this.__stage.__transparent ? "none" : this.__stage.__colorString;
                    this.__z = 1;
                    this.__renderDrawable(a)
                },
                __renderDrawable: function (a) {
                    if (null != a) switch (a.__drawableType) {
                        case 2:
                            cb.renderDrawable(a, this);
                            break;
                        case 3:
                            Gc.renderDrawable(a, this);
                            break;
                        case 4:
                        case 5:
                            qj.renderDrawable(a, this);
                            break;
                        case 6:
                            rj.renderDrawable(a,
                                this);
                            break;
                        case 7:
                            Ve.renderDrawable(a, this);
                            break;
                        case 8:
                            ye.renderDrawable(a, this);
                            break;
                        case 9:
                            We.renderDrawable(a, this);
                            break;
                        case 10:
                            null != a.stage && a.__worldVisible && a.__renderable ? (a.__active || (this.__initializeElement(a, a.__element), a.__active = !0), this.__updateClip(a), this.__applyStyle(a, !0, !0, !0)) : a.__active && (this.element.removeChild(a.__element), a.__active = !1), Gc.renderDrawable(a, this)
                    }
                },
                __renderDrawableClear: function (a) {
                    if (null != a) switch (a.__drawableType) {
                        case 2:
                            cb.renderDrawableClear(a,
                                this);
                            break;
                        case 3:
                            Gc.renderDrawableClear(a, this);
                            break;
                        case 4:
                        case 5:
                            qj.renderDrawableClear(a, this);
                            break;
                        case 6:
                            rj.renderDrawableClear(a, this);
                            break;
                        case 7:
                            Ve.renderDrawableClear(a, this);
                            break;
                        case 8:
                            ye.renderDrawableClear(a, this);
                            break;
                        case 9:
                            We.renderDrawableClear(a, this)
                    }
                },
                __setBlendMode: function (a) {
                    null != this.__overrideBlendMode && (a = this.__overrideBlendMode);
                    this.__blendMode != a && (this.__blendMode = a)
                },
                __updateClip: function (a) {
                    if (null == this.__currentClipRect) a.__worldClipChanged = null != a.__worldClip,
                        a.__worldClip = null;
                    else {
                        null == a.__worldClip && (a.__worldClip = new ha);
                        var b = ha.__pool.get(),
                            c = la.__pool.get();
                        c.copyFrom(a.__renderTransform);
                        c.invert();
                        this.__currentClipRect.__transform(b, c);
                        b.equals(a.__worldClip) ? a.__worldClipChanged = !1 : (a.__worldClip.copyFrom(b), a.__worldClipChanged = !0);
                        ha.__pool.release(b);
                        la.__pool.release(c)
                    }
                },
                __class__: Yg
            });
            var vd = function (a) {
                this.byteCode = a;
                this.precisionHint = 1;
                this.__glSourceDirty = !0;
                this.__numPasses = 1;
                this.__data = Ql._new(a)
            };
            g["openfl.display.Shader"] = vd;
            vd.__name__ = "openfl.display.Shader";
            vd.prototype = {
                __clearUseArray: function () {
                    for (var a = 0, b = this.__paramBool; a < b.length;) {
                        var c = b[a];
                        ++a;
                        c.__useArray = !1
                    }
                    a = 0;
                    for (b = this.__paramFloat; a < b.length;) c = b[a], ++a, c.__useArray = !1;
                    a = 0;
                    for (b = this.__paramInt; a < b.length;) c = b[a], ++a, c.__useArray = !1
                },
                __createGLShader: function (a, b) {
                    var c = this.__context.gl,
                        d = c.createShader(b);
                    c.shaderSource(d, a);
                    c.compileShader(d);
                    var e = c.getShaderInfoLog(d),
                        f = null != e && "" != R.trim(e),
                        h = c.getShaderParameter(d, c.COMPILE_STATUS);
                    if (f ||
                        0 == h) b = (0 == h ? "Error" : "Info") + (b == c.VERTEX_SHADER ? " compiling vertex shader" : " compiling fragment shader"), b = b + ("\n" + e) + ("\n" + a), 0 == h ? ua.error(b, {

                        className: "openfl.display.Shader",
                        methodName: "__createGLShader"
                    }) : f && ua.debug(b, {

                        className: "openfl.display.Shader",
                        methodName: "__createGLShader"
                    });
                    return d
                },
                __createGLProgram: function (a, b) {
                    var c = this.__context.gl;
                    a = this.__createGLShader(a, c.VERTEX_SHADER);
                    var d = this.__createGLShader(b, c.FRAGMENT_SHADER);
                    b = c.createProgram();
                    for (var e = 0, f = this.__paramFloat; e < f.length;) {
                        var h = f[e];
                        ++e;
                        if (-1 < h.name.indexOf("Position") && R.startsWith(h.name, "openfl_")) {
                            c.bindAttribLocation(b, 0, h.name);
                            break
                        }
                    }
                    c.attachShader(b, a);
                    c.attachShader(b, d);
                    c.linkProgram(b);
                    0 == c.getProgramParameter(b, c.LINK_STATUS) && (c = "Unable to initialize the shader program\n" + c.getProgramInfoLog(b), ua.error(c, {
                        className: "openfl.display.Shader",
                        methodName: "__createGLProgram"
                    }));
                    return b
                },
                __disable: function () {
                    null != this.program && this.__disableGL()
                },
                __disableGL: function () {
                    for (var a = this.__context.gl, b = 0, c = 0, d = this.__inputBitmapData; c < d.length;) {
                        var e = d[c];
                        ++c;
                        e.__disableGL(this.__context, b);
                        ++b;
                        if (b == a.MAX_TEXTURE_IMAGE_UNITS) break
                    }
                    c = 0;
                    for (d = this.__paramBool; c < d.length;) b = d[c], ++c, b.__disableGL(this.__context);
                    c = 0;
                    for (d = this.__paramFloat; c < d.length;) b = d[c], ++c, b.__disableGL(this.__context);
                    c = 0;
                    for (d = this.__paramInt; c < d.length;) b = d[c], ++c,
                        b.__disableGL(this.__context);
                    this.__context.__bindGLArrayBuffer(null);
                    "opengl" == this.__context.__context.type && a.disable(a.TEXTURE_2D)
                },
                __enable: function () {
                    this.__init();
                    null != this.program && this.__enableGL()
                },
                __enableGL: function () {
                    for (var a = 0, b = this.__context.gl, c = 0, d = this.__inputBitmapData; c < d.length;) {
                        var e = d[c];
                        ++c;
                        b.uniform1i(e.index, a);
                        ++a
                    }
                    "opengl" == this.__context.__context.type && 0 < a && b.enable(b.TEXTURE_2D)
                },
                __init: function () {
                    null == this.__data && (this.__data = Ql._new(null));
                    null == this.__glFragmentSource ||
                    null == this.__glVertexSource || null != this.program && !this.__glSourceDirty || this.__initGL()
                },
                __initGL: function () {
                    if (this.__glSourceDirty || null == this.__paramBool) this.__glSourceDirty = !1, this.program = null, this.__inputBitmapData = [], this.__paramBool = [], this.__paramFloat = [], this.__paramInt = [], this.__processGLData(this.get_glVertexSource(), "attribute"), this.__processGLData(this.get_glVertexSource(), "uniform"), this.__processGLData(this.get_glFragmentSource(), "uniform");
                    if (null != this.__context && null == this.program) {
                        var a =
                                this.__context.gl,
                            b = 1 == this.precisionHint ? "precision mediump float;\n" : "precision lowp float;\n",
                            c = b + this.get_glVertexSource();
                        b += this.get_glFragmentSource();
                        var d = c + b;
                        Object.prototype.hasOwnProperty.call(this.__context.__programs.h, d) ? this.program = this.__context.__programs.h[d] : (this.program = this.__context.createProgram(1), this.program.__glProgram = this.__createGLProgram(c, b), this.__context.__programs.h[d] = this.program);
                        if (null != this.program) {
                            this.glProgram = this.program.__glProgram;
                            c = 0;
                            for (b = this.__inputBitmapData; c <
                            b.length;) d = b[c], ++c, d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
                            c = 0;
                            for (b = this.__paramBool; c < b.length;) d = b[c], ++c, d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
                            c = 0;
                            for (b = this.__paramFloat; c < b.length;) d = b[c], ++c, d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
                            c = 0;
                            for (b = this.__paramInt; c < b.length;) d = b[c], ++c, d.index =
                                d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name)
                        }
                    }
                },
                __processGLData: function (a, b) {
                    var c = 0,
                        d;
                    for (d = "uniform" == b ? new ra("uniform ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", "") : new ra("attribute ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", ""); d.matchSub(a, c);) {
                        var e = d.matched(1);
                        var f = d.matched(2);
                        if (!R.startsWith(f, "gl_")) {
                            c = "uniform" == b;
                            if (R.startsWith(e, "sampler")) {
                                e = new sj;
                                e.name = f;
                                e.__isUniform = c;
                                this.__inputBitmapData.push(e);
                                switch (f) {
                                    case "bitmap":
                                        this.__bitmap = e;
                                        break;
                                    case "openfl_Texture":
                                        this.__texture = e
                                }
                                this.__data[f] = e;
                                this.__isGenerated && (this[f] = e)
                            } else if (!Object.prototype.hasOwnProperty.call(this.__data, f) || null == M.field(this.__data, f)) {
                                switch (e) {
                                    case "bool":
                                        var h = 0;
                                        break;
                                    case "bvec2":
                                        h = 1;
                                        break;
                                    case "bvec3":
                                        h = 2;
                                        break;
                                    case "bvec4":
                                        h = 3;
                                        break;
                                    case "dvec2":
                                    case "vec2":
                                        h = 5;
                                        break;
                                    case "dvec3":
                                    case "vec3":
                                        h = 6;
                                        break;
                                    case "dvec4":
                                    case "vec4":
                                        h = 7;
                                        break;
                                    case "double":
                                    case "float":
                                        h = 4;
                                        break;
                                    case "mat2":
                                    case "mat2x2":
                                        h = 12;
                                        break;
                                    case "mat2x3":
                                        h = 13;
                                        break;
                                    case "mat2x4":
                                        h =
                                            14;
                                        break;
                                    case "mat3x2":
                                        h = 15;
                                        break;
                                    case "mat3":
                                    case "mat3x3":
                                        h = 16;
                                        break;
                                    case "mat3x4":
                                        h = 17;
                                        break;
                                    case "mat4x2":
                                        h = 18;
                                        break;
                                    case "mat4x3":
                                        h = 19;
                                        break;
                                    case "mat4":
                                    case "mat4x4":
                                        h = 20;
                                        break;
                                    case "int":
                                    case "uint":
                                        h = 8;
                                        break;
                                    case "ivec2":
                                    case "uvec2":
                                        h = 9;
                                        break;
                                    case "ivec3":
                                    case "uvec3":
                                        h = 10;
                                        break;
                                    case "ivec4":
                                    case "uvec4":
                                        h = 11;
                                        break;
                                    default:
                                        h = null
                                }
                                switch (h) {
                                    case 1:
                                    case 5:
                                    case 9:
                                        e = 2;
                                        break;
                                    case 2:
                                    case 6:
                                    case 10:
                                        e = 3;
                                        break;
                                    case 3:
                                    case 7:
                                    case 11:
                                    case 12:
                                        e = 4;
                                        break;
                                    case 16:
                                        e = 9;
                                        break;
                                    case 20:
                                        e = 16;
                                        break;
                                    default:
                                        e =
                                            1
                                }
                                switch (h) {
                                    case 12:
                                        var r = 2;
                                        break;
                                    case 16:
                                        r = 3;
                                        break;
                                    case 20:
                                        r = 4;
                                        break;
                                    default:
                                        r = 1
                                }
                                switch (h) {
                                    case 0:
                                    case 1:
                                    case 2:
                                    case 3:
                                        var m = new bg;
                                        m.set_name(f);
                                        m.type = h;
                                        m.__arrayLength = r;
                                        m.__isBool = !0;
                                        m.__isUniform = c;
                                        m.__length = e;
                                        this.__paramBool.push(m);
                                        "openfl_HasColorTransform" == f && (this.__hasColorTransform = m);
                                        this.__data[f] = m;
                                        this.__isGenerated && (this[f] = m);
                                        break;
                                    case 8:
                                    case 9:
                                    case 10:
                                    case 11:
                                        m = new bg;
                                        m.set_name(f);
                                        m.type = h;
                                        m.__arrayLength = r;
                                        m.__isInt = !0;
                                        m.__isUniform = c;
                                        m.__length = e;
                                        this.__paramInt.push(m);
                                        this.__data[f] = m;
                                        this.__isGenerated && (this[f] = m);
                                        break;
                                    default:
                                        m = new bg;
                                        m.set_name(f);
                                        m.type = h;
                                        m.__arrayLength = r;
                                        0 < r && (h = r * r, h = null != h ? new Float32Array(h) : null, m.__uniformMatrix = h);
                                        m.__isFloat = !0;
                                        m.__isUniform = c;
                                        m.__length = e;
                                        this.__paramFloat.push(m);
                                        if (R.startsWith(f, "openfl_")) switch (f) {
                                            case "openfl_Alpha":
                                                this.__alpha = m;
                                                break;
                                            case "openfl_ColorMultiplier":
                                                this.__colorMultiplier = m;
                                                break;
                                            case "openfl_ColorOffset":
                                                this.__colorOffset = m;
                                                break;
                                            case "openfl_Matrix":
                                                this.__matrix = m;
                                                break;
                                            case "openfl_Position":
                                                this.__position =
                                                    m;
                                                break;
                                            case "openfl_TextureCoord":
                                                this.__textureCoord = m;
                                                break;
                                            case "openfl_TextureSize":
                                                this.__textureSize = m
                                        }
                                        this.__data[f] = m;
                                        this.__isGenerated && (this[f] = m)
                                }
                            }
                            f = d.matchedPos();
                            c = f.pos + f.len
                        }
                    }
                },
                __update: function () {
                    null != this.program && this.__updateGL()
                },
                __updateFromBuffer: function (a, b) {
                    null != this.program && this.__updateGLFromBuffer(a, b)
                },
                __updateGL: function () {
                    for (var a = 0, b = 0, c = this.__inputBitmapData; b < c.length;) {
                        var d = c[b];
                        ++b;
                        d.__updateGL(this.__context, a);
                        ++a
                    }
                    b = 0;
                    for (c = this.__paramBool; b < c.length;) a =
                        c[b], ++b, a.__updateGL(this.__context);
                    b = 0;
                    for (c = this.__paramFloat; b < c.length;) a = c[b], ++b, a.__updateGL(this.__context);
                    b = 0;
                    for (c = this.__paramInt; b < c.length;) a = c[b], ++b, a.__updateGL(this.__context)
                },
                __updateGLFromBuffer: function (a, b) {
                    for (var c = 0, d, e, f, h, r, m = 0, g = a.inputCount; m < g;) r = m++, d = a.inputRefs[r], e = a.inputs[r], f = a.inputFilter[r], h = a.inputMipFilter[r], r = a.inputWrap[r], null != e && (d.__updateGL(this.__context, c, e, f, h, r), ++c);
                    m = this.__context.gl;
                    0 < a.paramDataLength ? (null == a.paramDataBuffer && (a.paramDataBuffer =
                        m.createBuffer()), this.__context.__bindGLArrayBuffer(a.paramDataBuffer), Gb.bufferData(m, m.ARRAY_BUFFER, a.paramData, m.DYNAMIC_DRAW)) : this.__context.__bindGLArrayBuffer(null);
                    e = d = c = 0;
                    f = a.paramBoolCount;
                    h = a.paramFloatCount;
                    var n = a.paramData,
                        k = null,
                        q = null,
                        l = null;
                    m = 0;
                    for (g = a.paramCount; m < g;) {
                        r = m++;
                        var p = !1;
                        if (r < f) {
                            var y = a.paramRefs_Bool[c];
                            for (var v = 0, t = a.overrideBoolCount; v < t;) {
                                var B = v++;
                                if (y.name == a.overrideBoolNames[B]) {
                                    k = a.overrideBoolValues[B];
                                    p = !0;
                                    break
                                }
                            }
                            p ? y.__updateGL(this.__context, k) : y.__updateGLFromBuffer(this.__context,
                                n, a.paramPositions[r], a.paramLengths[r], b);
                            ++c
                        } else if (r < f + h) {
                            y = a.paramRefs_Float[d];
                            v = 0;
                            for (t = a.overrideFloatCount; v < t;)
                                if (B = v++, y.name == a.overrideFloatNames[B]) {
                                    q = a.overrideFloatValues[B];
                                    p = !0;
                                    break
                                }
                            p ? y.__updateGL(this.__context, q) : y.__updateGLFromBuffer(this.__context, n, a.paramPositions[r], a.paramLengths[r], b);
                            ++d
                        } else {
                            y = a.paramRefs_Int[e];
                            v = 0;
                            for (t = a.overrideIntCount; v < t;)
                                if (B = v++, y.name == a.overrideIntNames[B]) {
                                    l = a.overrideIntValues[B];
                                    p = !0;
                                    break
                                }
                            p ? y.__updateGL(this.__context, l) : y.__updateGLFromBuffer(this.__context,
                                n, a.paramPositions[r], a.paramLengths[r], b);
                            ++e
                        }
                    }
                },
                get_glFragmentSource: function () {
                    return this.__glFragmentSource
                },
                get_glVertexSource: function () {
                    return this.__glVertexSource
                },
                __class__: vd,
                __properties__: {
                    get_glVertexSource: "get_glVertexSource",
                    get_glFragmentSource: "get_glFragmentSource"
                }
            };
            var tj = function (a) {
                null == this.__glFragmentSource && (this.__glFragmentSource = "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0) {\n\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t} else if (openfl_HasColorTransform) {\n\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\n\t\t}\n\n\t\t}");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}");
                vd.call(this, a);
                this.__isGenerated = !0;
                this.__initGL()
            };
            g["openfl.display.DisplayObjectShader"] = tj;
            tj.__name__ = "openfl.display.DisplayObjectShader";
            tj.__super__ = vd;
            tj.prototype = l(vd.prototype, {
                __class__: tj
            });
            var Sk = function (a, b) {
                O.call(this);
                this.name = a;
                this.frame = b
            };
            g["openfl.display.FrameLabel"] = Sk;
            Sk.__name__ = "openfl.display.FrameLabel";
            Sk.__super__ = O;
            Sk.prototype = l(O.prototype, {
                __class__: Sk
            });
            var Tc = function (a) {
                this.__dirty = !0;
                this.__owner = a;
                this.__commands = new Hc;
                this.__positionY = this.__positionX =
                    this.__strokePadding = 0;
                this.__renderTransform = new la;
                this.__usedShaderBuffers = new Da;
                this.__worldTransform = new la;
                this.__height = this.__width = 0;
                this.__bitmapScale = 1;
                this.__shaderBufferPool = new xa(function () {
                    return new uj
                });
                this.moveTo(0, 0)
            };
            g["openfl.display.Graphics"] = Tc;
            Tc.__name__ = "openfl.display.Graphics";
            Tc.prototype = {
                beginFill: function (a, b) {
                    null == b && (b = 1);
                    null == a && (a = 0);
                    this.__commands.beginFill(a & 16777215, b);
                    0 < b && (this.__visible = !0)
                },
                beginGradientFill: function (a, b, c, d, e, f, h, r) {
                    null == r && (r = 0);
                    null == h && (h = 1);
                    null == f && (f = 0);
                    if (null != b && 0 != b.length) {
                        if (null == c) {
                            c = [];
                            for (var m = 0, g = b.length; m < g;) m++, c.push(1)
                        }
                        if (null == d)
                            for (d = [], m = 0, g = b.length; m < g;) {
                                var n = m++;
                                d.push(Math.ceil(n / (b.length - 1) * 255))
                            }
                        if (!(c.length < b.length || d.length < b.length))
                            for (this.__commands.beginGradientFill(a, b, c, d, e, f, h, r), m = 0; m < c.length;)
                                if (a = c[m], ++m, 0 < a) {
                                    this.__visible = !0;
                                    break
                                }
                    }
                },
                clear: function () {
                    for (var a = this.__usedShaderBuffers.h; null != a;) {
                        var b = a.item;
                        a = a.next;
                        this.__shaderBufferPool.release(b)
                    }
                    this.__usedShaderBuffers.clear();
                    this.__commands.clear();
                    this.__strokePadding = 0;
                    null != this.__bounds && (this.set___dirty(!0), this.__transformDirty = !0, this.__bounds = null);
                    this.__visible = !1;
                    this.__positionY = this.__positionX = 0;
                    this.moveTo(0, 0)
                },
                curveTo: function (a, b, c, d) {
                    this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
                    this.__inflateBounds(this.__positionX + this.__strokePadding, this.__positionY + this.__strokePadding);
                    var e = a < c && a > this.__positionX || a > c && a < this.__positionX ? c : this.__calculateBezierQuadPoint((this.__positionX -
                        a) / (this.__positionX - 2 * a + c), this.__positionX, a, c);
                    var f = b < d && b > this.__positionY || b > d && b < this.__positionY ? d : this.__calculateBezierQuadPoint((this.__positionY - b) / (this.__positionY - 2 * b + d), this.__positionY, b, d);
                    this.__inflateBounds(e - this.__strokePadding, f - this.__strokePadding);
                    this.__inflateBounds(e + this.__strokePadding, f + this.__strokePadding);
                    this.__positionX = c;
                    this.__positionY = d;
                    this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
                    this.__inflateBounds(this.__positionX +
                        this.__strokePadding, this.__positionY + this.__strokePadding);
                    this.__commands.curveTo(a, b, c, d);
                    this.set___dirty(!0)
                },
                drawCircle: function (a, b, c) {
                    0 >= c || (this.__inflateBounds(a - c - this.__strokePadding, b - c - this.__strokePadding), this.__inflateBounds(a + c + this.__strokePadding, b + c + this.__strokePadding), this.__commands.drawCircle(a, b, c), this.set___dirty(!0))
                },
                drawRect: function (a, b, c, d) {
                    if (0 != c || 0 != d) {
                        var e = 0 > c ? -1 : 1,
                            f = 0 > d ? -1 : 1;
                        this.__inflateBounds(a - this.__strokePadding * e, b - this.__strokePadding * f);
                        this.__inflateBounds(a +
                            c + this.__strokePadding * e, b + d + this.__strokePadding * f);
                        this.__commands.drawRect(a, b, c, d);
                        this.set___dirty(!0)
                    }
                },
                drawRoundRect: function (a, b, c, d, e, f) {
                    if (0 != c || 0 != d) {
                        var h = 0 > c ? -1 : 1,
                            r = 0 > d ? -1 : 1;
                        this.__inflateBounds(a - this.__strokePadding * h, b - this.__strokePadding * r);
                        this.__inflateBounds(a + c + this.__strokePadding * h, b + d + this.__strokePadding * r);
                        this.__commands.drawRoundRect(a, b, c, d, e, f);
                        this.set___dirty(!0)
                    }
                },
                drawRoundRectComplex: function (a, b, c, d, e, f, h, r) {
                    if (!(0 >= c || 0 >= d)) {
                        this.__inflateBounds(a - this.__strokePadding,
                            b - this.__strokePadding);
                        this.__inflateBounds(a + c + this.__strokePadding, b + d + this.__strokePadding);
                        var m = a + c,
                            g = b + d;
                        c = c < d ? 2 * c : 2 * d;
                        e < c || (e = c);
                        f < c || (f = c);
                        h < c || (h = c);
                        r < c || (r = c);
                        c = 1 - Math.sin(Math.PI / 180 * 45);
                        d = 1 - Math.tan(Math.PI / 180 * 22.5);
                        var n = r * c,
                            k = r * d;
                        this.moveTo(m, g - r);
                        this.curveTo(m, g - k, m - n, g - n);
                        this.curveTo(m - k, g, m - r, g);
                        n = h * c;
                        k = h * d;
                        this.lineTo(a + h, g);
                        this.curveTo(a + k, g, a + n, g - n);
                        this.curveTo(a, g - k, a, g - h);
                        n = e * c;
                        k = e * d;
                        this.lineTo(a, b + e);
                        this.curveTo(a, b + k, a + n, b + n);
                        this.curveTo(a + k, b, a + e, b);
                        n = f * c;
                        k = f * d;
                        this.lineTo(m - f, b);
                        this.curveTo(m - k, b, m - n, b + n);
                        this.curveTo(m, b + k, m, b + f);
                        this.lineTo(m, g - r);
                        this.set___dirty(!0)
                    }
                },
                lineTo: function (a, b) {
                    isFinite(a) && isFinite(b) && (this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding), this.__inflateBounds(this.__positionX + this.__strokePadding, this.__positionY + this.__strokePadding), this.__positionX = a, this.__positionY = b, this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding), this.__inflateBounds(this.__positionX +
                        2 * this.__strokePadding, this.__positionY + this.__strokePadding), this.__commands.lineTo(a, b), this.set___dirty(!0))
                },
                moveTo: function (a, b) {
                    this.__positionX = a;
                    this.__positionY = b;
                    this.__commands.moveTo(a, b)
                },
                __calculateBezierQuadPoint: function (a, b, c, d) {
                    var e = 1 - a;
                    return e * e * b + 2 * e * a * c + a * a * d
                },
                __cleanup: function () {
                    null != this.__bounds && null != this.__canvas && (this.set___dirty(!0), this.__transformDirty = !0);
                    this.__context = this.__canvas = this.__bitmap = null
                },
                __getBounds: function (a, b) {
                    if (null != this.__bounds) {
                        var c = ha.__pool.get();
                        this.__bounds.__transform(c, b);
                        a.__expand(c.x, c.y, c.width, c.height);
                        ha.__pool.release(c)
                    }
                },
                __hitTest: function (a, b, c, d) {
                    if (null == this.__bounds) return !1;
                    var e = d.a * d.d - d.b * d.c,
                        f = 0 == e ? -d.tx : 1 / e * (d.c * (d.ty - b) + d.d * (a - d.tx));
                    e = d.a * d.d - d.b * d.c;
                    a = 0 == e ? -d.ty : 1 / e * (d.a * (b - d.ty) + d.b * (d.tx - a));
                    return f > this.__bounds.x && a > this.__bounds.y && this.__bounds.contains(f, a) ? c ? z.hitTest(this, f, a) : !0 : !1
                },
                __inflateBounds: function (a, b) {
                    null == this.__bounds ? (this.__bounds = new ha(a, b, 0, 0), this.__transformDirty = !0) : (a < this.__bounds.x &&
                    (this.__bounds.width += this.__bounds.x - a, this.__bounds.x = a, this.__transformDirty = !0), b < this.__bounds.y && (this.__bounds.height += this.__bounds.y - b, this.__bounds.y = b, this.__transformDirty = !0), a > this.__bounds.x + this.__bounds.width && (this.__bounds.width = a - this.__bounds.x), b > this.__bounds.y + this.__bounds.height && (this.__bounds.height = b - this.__bounds.y))
                },
                __update: function (a, b) {
                    if (!(null == this.__bounds || 0 >= this.__bounds.width || 0 >= this.__bounds.height)) {
                        var c = this.__owner.__renderTransform;
                        if (null != c) {
                            var d =
                                    b,
                                e = b;
                            null == this.__owner.__worldScale9Grid && (d = 0 == c.b ? Math.abs(c.a) : Math.sqrt(c.a * c.a + c.b * c.b), e = 0 == c.c ? Math.abs(c.d) : Math.sqrt(c.c * c.c + c.d * c.d), null != a && (d = 0 == a.b ? d * a.a : d * Math.sqrt(a.a * a.a + a.b * a.b), e = 0 == a.c ? e * a.d : e * Math.sqrt(a.c * a.c + a.d * a.d)));
                            a = this.__bounds.width * d;
                            e *= this.__bounds.height;
                            if (1 > a || 1 > e) (1 <= this.__width || 1 <= this.__height) && this.set___dirty(!0), this.__height = this.__width = 0;
                            else {
                                null != Tc.maxTextureWidth && a > Tc.maxTextureWidth && (a = Tc.maxTextureWidth);
                                null != Tc.maxTextureWidth && e > Tc.maxTextureHeight &&
                                (e = Tc.maxTextureHeight);
                                if (null != this.__owner.__worldScale9Grid) {
                                    this.__renderTransform.a = b;
                                    this.__renderTransform.d = b;
                                    d = 1 / b;
                                    var f = 1 / b
                                } else this.__renderTransform.a = a / this.__bounds.width, this.__renderTransform.d = e / this.__bounds.height, d = 1 / this.__renderTransform.a, f = 1 / this.__renderTransform.d;
                                this.__worldTransform.a = d * c.a;
                                this.__worldTransform.b = d * c.b;
                                this.__worldTransform.c = f * c.c;
                                this.__worldTransform.d = f * c.d;
                                f = this.__bounds.x;
                                var h = this.__bounds.y;
                                d = f * c.a + h * c.c + c.tx;
                                c = f * c.b + h * c.d + c.ty;
                                1 < b ? (b = 1 / b,
                                    this.__worldTransform.tx = Math.round(d / b) * b, this.__worldTransform.ty = Math.round(c / b) * b) : (this.__worldTransform.tx = Math.round(d), this.__worldTransform.ty = Math.round(c));
                                b = this.__worldTransform;
                                f = b.a * b.d - b.b * b.c;
                                this.__renderTransform.tx = 0 == f ? -b.tx : 1 / f * (b.c * (b.ty - c) + b.d * (d - b.tx));
                                b = this.__worldTransform;
                                f = b.a * b.d - b.b * b.c;
                                this.__renderTransform.ty = 0 == f ? -b.ty : 1 / f * (b.a * (c - b.ty) + b.b * (b.tx - d));
                                a = Math.ceil(a + 1);
                                e = Math.ceil(e + 1);
                                a == this.__width && e == this.__height || this.set___dirty(!0);
                                this.__width = a;
                                this.__height =
                                    e
                            }
                        }
                    }
                },
                set___dirty: function (a) {
                    if (a && null != this.__owner) {
                        var b = this.__owner;
                        b.__renderDirty || (b.__renderDirty = !0, b.__setParentRenderDirty())
                    }
                    a && (this.__hardwareDirty = this.__softwareDirty = !0);
                    return this.__dirty = a
                },
                __class__: Tc,
                __properties__: {
                    set___dirty: "set___dirty"
                }
            };
            var vj = function (a) {
                null == this.__glFragmentSource && (this.__glFragmentSource = "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (bitmap, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0) {\n\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t} else if (openfl_HasColorTransform) {\n\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\n\t\t}\n\n\t\t}");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}");
                vd.call(this, a);
                this.__isGenerated = !0;
                this.__initGL()
            };
            g["openfl.display.GraphicsShader"] = vj;
            vj.__name__ = "openfl.display.GraphicsShader";
            vj.__super__ = vd;
            vj.prototype = l(vd.prototype, {
                __class__: vj
            });
            var Tk = function () {
            };
            g["openfl.display.ITileContainer"] = Tk;
            Tk.__name__ = "openfl.display.ITileContainer";
            Tk.__isInterface__ = !0;
            var am = {
                    toString: function (a) {
                        switch (a) {
                            case 0:
                                return "bevel";
                            case 1:
                                return "miter";
                            case 2:
                                return "round";
                            default:
                                return null
                        }
                    }
                },
                Uk = function () {
                    oa.call(this);
                    this.__drawableType = 4;
                    this.contentLoaderInfo =
                        Nd.create(this);
                    this.uncaughtErrorEvents = this.contentLoaderInfo.uncaughtErrorEvents;
                    this.__unloaded = !0
                };
            g["openfl.display.Loader"] = Uk;
            Uk.__name__ = "openfl.display.Loader";
            Uk.__super__ = oa;
            Uk.prototype = l(oa.prototype, {
                addChild: function (a) {
                    throw new Fa("Error #2069: The Loader class does not implement this method.", 2069);
                },
                addChildAt: function (a, b) {
                    throw new Fa("Error #2069: The Loader class does not implement this method.", 2069);
                },
                removeChild: function (a) {
                    if (a == this.content) return oa.prototype.removeChild.call(this,
                        this.content);
                    throw new Fa("Error #2069: The Loader class does not implement this method.", 2069);
                },
                removeChildAt: function (a) {
                    throw new Fa("Error #2069: The Loader class does not implement this method.", 2069);
                },
                __class__: Uk
            });
            var Nd = function () {
                O.call(this);
                this.applicationDomain = cg.currentDomain;
                this.bytesTotal = this.bytesLoaded = 0;
                this.childAllowsParent = !0;
                this.parameters = {}
            };
            g["openfl.display.LoaderInfo"] = Nd;
            Nd.__name__ = "openfl.display.LoaderInfo";
            Nd.create = function (a) {
                var b = new Nd;
                b.uncaughtErrorEvents =
                    new wj;
                null != a ? b.loader = a : b.url = Nd.__rootURL;
                return b
            };
            Nd.__super__ = O;
            Nd.prototype = l(O.prototype, {
                __complete: function () {
                    this.__completed || (this.bytesLoaded < this.bytesTotal && (this.bytesLoaded = this.bytesTotal), this.__update(this.bytesLoaded, this.bytesTotal), this.__completed = !0, this.dispatchEvent(new V("complete")))
                },
                __update: function (a, b) {
                    this.bytesLoaded = a;
                    this.bytesTotal = b;
                    this.dispatchEvent(new dg("progress", !1, !1, a, b))
                },
                __class__: Nd
            });
            var $e = function () {
                Ja.call(this);
                this.__enabled = !0
            };
            g["openfl.display.MovieClip"] =
                $e;
            $e.__name__ = "openfl.display.MovieClip";
            $e.__super__ = Ja;
            $e.prototype = l(Ja.prototype, {
                gotoAndStop: function (a, b) {
                    null != this.__timeline && this.__timeline.__gotoAndStop(a, b)
                },
                __enterFrame: function (a) {
                    null != this.__timeline && this.__timeline.__enterFrame(a);
                    for (var b = 0, c = this.__children; b < c.length;) {
                        var d = c[b];
                        ++b;
                        d.__enterFrame(a)
                    }
                },
                __tabTest: function (a) {
                    this.__enabled && Ja.prototype.__tabTest.call(this, a)
                },
                __onMouseDown: function (a) {
                    this.__enabled && this.__hasDown && this.gotoAndStop("_down");
                    this.__mouseIsDown = !0;
                    null != this.stage && this.stage.addEventListener("mouseUp", p(this, this.__onMouseUp), !0)
                },
                __onMouseUp: function (a) {
                    this.__mouseIsDown = !1;
                    null != this.stage && this.stage.removeEventListener("mouseUp", p(this, this.__onMouseUp));
                    this.__buttonMode && (wd.__eq(a.target, this) && this.__enabled && this.__hasOver ? this.gotoAndStop("_over") : this.__enabled && this.__hasUp && this.gotoAndStop("_up"))
                },
                __onRollOut: function (a) {
                    this.__enabled && (this.__mouseIsDown && this.__hasOver ? this.gotoAndStop("_over") : this.__hasUp && this.gotoAndStop("_up"))
                },
                __onRollOver: function (a) {
                    this.__enabled && this.__hasOver && this.gotoAndStop("_over")
                },
                set_buttonMode: function (a) {
                    if (this.__buttonMode != a) {
                        if (a) {
                            this.__hasUp = this.__hasOver = this.__hasDown = !1;
                            for (var b = 0, c = this.get_currentLabels(); b < c.length;) {
                                var d = c[b];
                                ++b;
                                switch (d.name) {
                                    case "_down":
                                        this.__hasDown = !0;
                                        break;
                                    case "_over":
                                        this.__hasOver = !0;
                                        break;
                                    case "_up":
                                        this.__hasUp = !0
                                }
                            }
                            if (this.__hasDown || this.__hasOver || this.__hasUp) this.addEventListener("rollOver", p(this, this.__onRollOver)), this.addEventListener("rollOut",
                                p(this, this.__onRollOut)), this.addEventListener("mouseDown", p(this, this.__onMouseDown))
                        } else this.removeEventListener("rollOver", p(this, this.__onRollOver)), this.removeEventListener("rollOut", p(this, this.__onRollOut)), this.removeEventListener("mouseDown", p(this, this.__onMouseDown));
                        this.__buttonMode = a
                    }
                    return a
                },
                get_currentLabels: function () {
                    return null != this.__timeline ? this.__timeline.__currentLabels.slice() : []
                },
                __class__: $e,
                __properties__: l(Ja.prototype.__properties__, {
                    get_currentLabels: "get_currentLabels"
                })
            });
            var Ra = function (a, b) {
                Fc.call(this);
                this.__context3D = a;
                this.__context = a.__context;
                this.__gl = this.gl = a.__context.webgl;
                this.__defaultRenderTarget = b;
                this.__flipped = null == this.__defaultRenderTarget;
                null == Tc.maxTextureWidth && (Tc.maxTextureWidth = Tc.maxTextureHeight = this.__gl.getParameter(this.__gl.MAX_TEXTURE_SIZE));
                this.__matrix = Ya._new();
                this.__values = [];
                this.__softwareRenderer = new we(null);
                this.__type = "opengl";
                this.__setBlendMode(10);
                this.__context3D.__setGLBlend(!0);
                this.__clipRects = [];
                this.__maskObjects = [];
                this.__numClipRects = 0;
                this.__projection = Ya._new();
                this.__projectionFlipped = Ya._new();
                this.__stencilReference = 0;
                this.__tempRect = new ha;
                this.__defaultDisplayShader = new tj;
                this.__defaultGraphicsShader = new vj;
                this.__defaultShader = this.__defaultDisplayShader;
                this.__initShader(this.__defaultShader);
                this.__scrollRectMasks = new xa(function () {
                    return new je
                });
                this.__maskShader = new qf
            };
            g["openfl.display.OpenGLRenderer"] = Ra;
            Ra.__name__ = "openfl.display.OpenGLRenderer";
            Ra.__super__ = Fc;
            Ra.prototype = l(Fc.prototype, {
                applyAlpha: function (a) {
                    Ra.__alphaValue[0] = a * this.__worldAlpha;
                    null != this.__currentShaderBuffer ? this.__currentShaderBuffer.addFloatOverride("openfl_Alpha", Ra.__alphaValue) : null != this.__currentShader && null != this.__currentShader.__alpha && (this.__currentShader.__alpha.value = Ra.__alphaValue)
                },
                applyBitmapData: function (a, b, c) {
                    null == c && (c = !1);
                    null != this.__currentShaderBuffer ? null != a && (Ra.__textureSizeValue[0] = a.__textureWidth, Ra.__textureSizeValue[1] = a.__textureHeight, this.__currentShaderBuffer.addFloatOverride("openfl_TextureSize",
                        Ra.__textureSizeValue)) : null != this.__currentShader && (null != this.__currentShader.__bitmap && (this.__currentShader.__bitmap.input = a, this.__currentShader.__bitmap.filter = b && this.__allowSmoothing ? 4 : 5, this.__currentShader.__bitmap.mipFilter = 2, this.__currentShader.__bitmap.wrap = c ? 2 : 0), null != this.__currentShader.__texture && (this.__currentShader.__texture.input = a, this.__currentShader.__texture.filter = b && this.__allowSmoothing ? 4 : 5, this.__currentShader.__texture.mipFilter = 2, this.__currentShader.__texture.wrap =
                        c ? 2 : 0), null != this.__currentShader.__textureSize && (null != a ? (Ra.__textureSizeValue[0] = a.__textureWidth, Ra.__textureSizeValue[1] = a.__textureHeight, this.__currentShader.__textureSize.value = Ra.__textureSizeValue) : this.__currentShader.__textureSize.value = null))
                },
                applyColorTransform: function (a) {
                    var b = null != a && !a.__isDefault(!0);
                    this.applyHasColorTransform(b);
                    b ? (a.__setArrays(Ra.__colorMultipliersValue, Ra.__colorOffsetsValue), null != this.__currentShaderBuffer ? (this.__currentShaderBuffer.addFloatOverride("openfl_ColorMultiplier",
                        Ra.__colorMultipliersValue), this.__currentShaderBuffer.addFloatOverride("openfl_ColorOffset", Ra.__colorOffsetsValue)) : null != this.__currentShader && (null != this.__currentShader.__colorMultiplier && (this.__currentShader.__colorMultiplier.value = Ra.__colorMultipliersValue), null != this.__currentShader.__colorOffset && (this.__currentShader.__colorOffset.value = Ra.__colorOffsetsValue))) : null != this.__currentShaderBuffer ? (this.__currentShaderBuffer.addFloatOverride("openfl_ColorMultiplier", Ra.__emptyColorValue),
                        this.__currentShaderBuffer.addFloatOverride("openfl_ColorOffset", Ra.__emptyColorValue)) : null != this.__currentShader && (null != this.__currentShader.__colorMultiplier && (this.__currentShader.__colorMultiplier.value = Ra.__emptyColorValue), null != this.__currentShader.__colorOffset && (this.__currentShader.__colorOffset.value = Ra.__emptyColorValue))
                },
                applyHasColorTransform: function (a) {
                    Ra.__hasColorTransformValue[0] = a;
                    null != this.__currentShaderBuffer ? this.__currentShaderBuffer.addBoolOverride("openfl_HasColorTransform",
                        Ra.__hasColorTransformValue) : null != this.__currentShader && null != this.__currentShader.__hasColorTransform && (this.__currentShader.__hasColorTransform.value = Ra.__hasColorTransformValue)
                },
                applyMatrix: function (a) {
                    null != this.__currentShaderBuffer ? this.__currentShaderBuffer.addFloatOverride("openfl_Matrix", a) : null != this.__currentShader && null != this.__currentShader.__matrix && (this.__currentShader.__matrix.value = a)
                },
                setShader: function (a) {
                    this.__currentShaderBuffer = null;
                    this.__currentShader != a && (null == a ? (this.__currentShader =
                        null, this.__context3D.setProgram(null)) : (this.__currentShader = a, this.__initShader(a), this.__context3D.setProgram(a.program), this.__context3D.__flushGLProgram(), this.__currentShader.__enable(), this.__context3D.__state.shader = a))
                },
                setViewport: function () {
                    this.__gl.viewport(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight)
                },
                updateShader: function () {
                    null != this.__currentShader && (null != this.__currentShader.__position && (this.__currentShader.__position.__useArray = !0), null != this.__currentShader.__textureCoord &&
                    (this.__currentShader.__textureCoord.__useArray = !0), this.__context3D.setProgram(this.__currentShader.program), this.__context3D.__flushGLProgram(), this.__context3D.__flushGLTextures(), this.__currentShader.__update())
                },
                useAlphaArray: function () {
                    null != this.__currentShader && null != this.__currentShader.__alpha && (this.__currentShader.__alpha.__useArray = !0)
                },
                useColorTransformArray: function () {
                    null != this.__currentShader && (null != this.__currentShader.__colorMultiplier && (this.__currentShader.__colorMultiplier.__useArray = !0), null != this.__currentShader.__colorOffset && (this.__currentShader.__colorOffset.__useArray = !0))
                },
                __clear: function () {
                    null == this.__stage || this.__stage.__transparent ? this.__context3D.clear(0, 0, 0, 0, 0, 0, 1) : this.__context3D.clear(this.__stage.__colorSplit[0], this.__stage.__colorSplit[1], this.__stage.__colorSplit[2], 1, 0, 0, 1);
                    this.__cleared = !0
                },
                __clearShader: function () {
                    null != this.__currentShader && (null == this.__currentShaderBuffer ? null != this.__currentShader.__bitmap && (this.__currentShader.__bitmap.input =
                        null) : this.__currentShaderBuffer.clearOverride(), null != this.__currentShader.__texture && (this.__currentShader.__texture.input = null), null != this.__currentShader.__textureSize && (this.__currentShader.__textureSize.value = null), null != this.__currentShader.__hasColorTransform && (this.__currentShader.__hasColorTransform.value = null), null != this.__currentShader.__position && (this.__currentShader.__position.value = null), null != this.__currentShader.__matrix && (this.__currentShader.__matrix.value = null), this.__currentShader.__clearUseArray())
                },
                __copyShader: function (a) {
                    this.__currentShader = a.__currentShader;
                    this.__currentShaderBuffer = a.__currentShaderBuffer;
                    this.__currentDisplayShader = a.__currentDisplayShader;
                    this.__currentGraphicsShader = a.__currentGraphicsShader
                },
                __getMatrix: function (a, b) {
                    var c = la.__pool.get();
                    c.copyFrom(a);
                    c.concat(this.__worldTransform);
                    if (0 == b || 1 == b && 0 == c.b && 0 == c.c && 1.001 > c.a && .999 < c.a && 1.001 > c.d && .999 < c.d) c.tx = Math.round(c.tx), c.ty = Math.round(c.ty);
                    Ya.identity(this.__matrix);
                    Ya.set(this.__matrix, 0, c.a);
                    Ya.set(this.__matrix,
                        1, c.b);
                    Ya.set(this.__matrix, 4, c.c);
                    Ya.set(this.__matrix, 5, c.d);
                    Ya.set(this.__matrix, 12, c.tx);
                    Ya.set(this.__matrix, 13, c.ty);
                    Ya.append(this.__matrix, this.__flipped ? this.__projectionFlipped : this.__projection);
                    this.__values[0] = Ya.get(this.__matrix, 0);
                    this.__values[1] = Ya.get(this.__matrix, 1);
                    this.__values[2] = Ya.get(this.__matrix, 2);
                    this.__values[3] = Ya.get(this.__matrix, 3);
                    this.__values[4] = Ya.get(this.__matrix, 4);
                    this.__values[5] = Ya.get(this.__matrix, 5);
                    this.__values[6] = Ya.get(this.__matrix, 6);
                    this.__values[7] =
                        Ya.get(this.__matrix, 7);
                    this.__values[8] = Ya.get(this.__matrix, 8);
                    this.__values[9] = Ya.get(this.__matrix, 9);
                    this.__values[10] = Ya.get(this.__matrix, 10);
                    this.__values[11] = Ya.get(this.__matrix, 11);
                    this.__values[12] = Ya.get(this.__matrix, 12);
                    this.__values[13] = Ya.get(this.__matrix, 13);
                    this.__values[14] = Ya.get(this.__matrix, 14);
                    this.__values[15] = Ya.get(this.__matrix, 15);
                    la.__pool.release(c);
                    return this.__values
                },
                __initShader: function (a) {
                    return null != a ? (null == a.__context && (a.__context = this.__context3D, a.__init()),
                        a) : this.__defaultShader
                },
                __initDisplayShader: function (a) {
                    return null != a ? (null == a.__context && (a.__context = this.__context3D, a.__init()), a) : this.__defaultDisplayShader
                },
                __initGraphicsShader: function (a) {
                    return null != a ? (null == a.__context && (a.__context = this.__context3D, a.__init()), a) : this.__defaultGraphicsShader
                },
                __initShaderBuffer: function (a) {
                    return null != a ? this.__initGraphicsShader(a.shader) : this.__defaultGraphicsShader
                },
                __popMask: function () {
                    if (0 != this.__stencilReference) {
                        var a = this.__maskObjects.pop();
                        1 < this.__stencilReference ? (this.__context3D.setStencilActions(2, 1, 0, 0, 5), this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 255), this.__context3D.setColorMask(!1, !1, !1, !1), this.__renderDrawableMask(a), this.__stencilReference--, this.__context3D.setStencilActions(2, 1, 5, 5, 5), this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0), this.__context3D.setColorMask(!0, !0, !0, !0)) : (this.__stencilReference = 0, this.__context3D.setStencilActions(), this.__context3D.setStencilReferenceValue(0,
                            0, 0))
                    }
                },
                __popMaskObject: function (a, b) {
                    null == b && (b = !0);
                    null != a.__mask && this.__popMask();
                    b && null != a.__scrollRect && (0 != a.__renderTransform.b || 0 != a.__renderTransform.c ? (this.__scrollRectMasks.release(this.__maskObjects[this.__maskObjects.length - 1]), this.__popMask()) : this.__popMaskRect())
                },
                __popMaskRect: function () {
                    0 < this.__numClipRects && (this.__numClipRects--, 0 < this.__numClipRects ? this.__scissorRect(this.__clipRects[this.__numClipRects - 1]) : this.__scissorRect())
                },
                __pushMask: function (a) {
                    0 == this.__stencilReference &&
                    (this.__context3D.clear(0, 0, 0, 0, 0, 0, 4), this.__updatedStencil = !0);
                    this.__context3D.setStencilActions(2, 1, 2, 5, 5);
                    this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 255);
                    this.__context3D.setColorMask(!1, !1, !1, !1);
                    this.__renderDrawableMask(a);
                    this.__maskObjects.push(a);
                    this.__stencilReference++;
                    this.__context3D.setStencilActions(2, 1, 5, 5, 5);
                    this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0);
                    this.__context3D.setColorMask(!0, !0, !0, !0)
                },
                __pushMaskObject: function (a,
                                            b) {
                    null == b && (b = !0);
                    b && null != a.__scrollRect && (0 != a.__renderTransform.b || 0 != a.__renderTransform.c ? (b = this.__scrollRectMasks.get(), b.get_graphics().clear(), b.get_graphics().beginFill(65280), b.get_graphics().drawRect(a.__scrollRect.x, a.__scrollRect.y, a.__scrollRect.width, a.__scrollRect.height), b.__renderTransform.copyFrom(a.__renderTransform), this.__pushMask(b)) : this.__pushMaskRect(a.__scrollRect, a.__renderTransform));
                    null != a.__mask && this.__pushMask(a.__mask)
                },
                __pushMaskRect: function (a, b) {
                    this.__numClipRects ==
                    this.__clipRects.length && (this.__clipRects[this.__numClipRects] = new ha);
                    var c = la.__pool.get();
                    c.copyFrom(b);
                    c.concat(this.__worldTransform);
                    b = this.__clipRects[this.__numClipRects];
                    a.__transform(b, c);
                    0 < this.__numClipRects && (a = this.__clipRects[this.__numClipRects - 1], b.__contract(a.x, a.y, a.width, a.height));
                    0 > b.height && (b.height = 0);
                    0 > b.width && (b.width = 0);
                    la.__pool.release(c);
                    this.__scissorRect(b);
                    this.__numClipRects++
                },
                __render: function (a) {
                    this.__context3D.setColorMask(!0, !0, !0, !0);
                    this.__context3D.setCulling(3);
                    this.__context3D.setDepthTest(!1, 0);
                    this.__context3D.setStencilActions();
                    this.__context3D.setStencilReferenceValue(0, 0, 0);
                    this.__context3D.setScissorRectangle(null);
                    this.__blendMode = null;
                    this.__setBlendMode(10);
                    if (null == this.__defaultRenderTarget) {
                        if (Ra.__scissorRectangle.setTo(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight), this.__context3D.setScissorRectangle(Ra.__scissorRectangle), this.__upscaled = 1 != this.__worldTransform.a || 1 != this.__worldTransform.d, this.__renderDrawable(a),
                        0 < this.__offsetX || 0 < this.__offsetY) 0 < this.__offsetX && (Ra.__scissorRectangle.setTo(0, 0, this.__offsetX, this.__height), this.__context3D.setScissorRectangle(Ra.__scissorRectangle), this.__context3D.__flushGL(), this.__gl.clearColor(0, 0, 0, 1), this.__gl.clear(this.__gl.COLOR_BUFFER_BIT), Ra.__scissorRectangle.setTo(this.__offsetX + this.__displayWidth, 0, this.__width, this.__height), this.__context3D.setScissorRectangle(Ra.__scissorRectangle), this.__context3D.__flushGL(), this.__gl.clearColor(0, 0, 0, 1), this.__gl.clear(this.__gl.COLOR_BUFFER_BIT)),
                        0 < this.__offsetY && (Ra.__scissorRectangle.setTo(0, 0, this.__width, this.__offsetY), this.__context3D.setScissorRectangle(Ra.__scissorRectangle), this.__context3D.__flushGL(), this.__gl.clearColor(0, 0, 0, 1), this.__gl.clear(this.__gl.COLOR_BUFFER_BIT), Ra.__scissorRectangle.setTo(0, this.__offsetY + this.__displayHeight, this.__width, this.__height), this.__context3D.setScissorRectangle(Ra.__scissorRectangle), this.__context3D.__flushGL(), this.__gl.clearColor(0, 0, 0, 1), this.__gl.clear(this.__gl.COLOR_BUFFER_BIT)),
                            this.__context3D.setScissorRectangle(null)
                    } else {
                        Ra.__scissorRectangle.setTo(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight);
                        this.__context3D.setScissorRectangle(Ra.__scissorRectangle);
                        var b = a.__mask,
                            c = a.__scrollRect;
                        a.__mask = null;
                        a.__scrollRect = null;
                        this.__renderDrawable(a);
                        a.__mask = b;
                        a.__scrollRect = c
                    }
                    this.__context3D.present()
                },
                __renderDrawable: function (a) {
                    if (null != a) switch (a.__drawableType) {
                        case 0:
                            xj.renderDrawable(a, this);
                            break;
                        case 2:
                            ld.renderDrawable(a, this);
                            break;
                        case 3:
                            rf.renderDrawable(a,
                                this);
                            break;
                        case 4:
                        case 5:
                            yj.renderDrawable(a, this);
                            break;
                        case 6:
                            zj.renderDrawable(a, this);
                            break;
                        case 7:
                            ze.renderDrawable(a, this);
                            break;
                        case 8:
                            md.renderDrawable(a, this);
                            break;
                        case 9:
                            L.renderDrawable(a, this)
                    }
                },
                __renderDrawableMask: function (a) {
                    if (null != a) switch (a.__drawableType) {
                        case 0:
                            xj.renderDrawableMask(a, this);
                            break;
                        case 2:
                            ld.renderDrawableMask(a, this);
                            break;
                        case 3:
                            rf.renderDrawableMask(a, this);
                            break;
                        case 4:
                        case 5:
                            yj.renderDrawableMask(a, this);
                            break;
                        case 6:
                            zj.renderDrawableMask(a, this);
                            break;
                        case 7:
                            ze.renderDrawableMask(a,
                                this);
                            break;
                        case 8:
                            md.renderDrawableMask(a, this);
                            break;
                        case 9:
                            L.renderDrawableMask(a, this)
                    }
                },
                __renderFilterPass: function (a, b, c, d) {
                    null == d && (d = !0);
                    if (null != a && null != b && null != this.__defaultRenderTarget) {
                        var e = this.__context3D.__state.renderToTexture,
                            f = this.__context3D.__state.renderToTextureDepthStencil,
                            h = this.__context3D.__state.renderToTextureAntiAlias,
                            r = this.__context3D.__state.renderToTextureSurfaceSelector;
                        this.__context3D.setRenderToTexture(this.__defaultRenderTarget.getTexture(this.__context3D),
                            !1);
                        d && this.__context3D.clear(0, 0, 0, 0, 0, 0, 1);
                        b = this.__initShader(b);
                        this.setShader(b);
                        this.applyAlpha(1);
                        this.applyBitmapData(a, c);
                        this.applyColorTransform(null);
                        this.applyMatrix(this.__getMatrix(a.__renderTransform, 1));
                        this.updateShader();
                        c = a.getVertexBuffer(this.__context3D);
                        null != b.__position && this.__context3D.setVertexBufferAt(b.__position.index, c, 0, 3);
                        null != b.__textureCoord && this.__context3D.setVertexBufferAt(b.__textureCoord.index, c, 3, 2);
                        a = a.getIndexBuffer(this.__context3D);
                        this.__context3D.drawTriangles(a);
                        null != e ? this.__context3D.setRenderToTexture(e, f, h, r) : this.__context3D.setRenderToBackBuffer();
                        this.__clearShader()
                    }
                },
                __resize: function (a, b) {
                    this.__width = a;
                    this.__height = b;
                    a = null == this.__defaultRenderTarget ? this.__stage.stageWidth : this.__defaultRenderTarget.width;
                    b = null == this.__defaultRenderTarget ? this.__stage.stageHeight : this.__defaultRenderTarget.height;
                    if (null == this.__defaultRenderTarget) {
                        var c = this.__worldTransform;
                        c = Math.round(0 * c.a + 0 * c.c + c.tx)
                    } else c = 0;
                    this.__offsetX = c;
                    null == this.__defaultRenderTarget ?
                        (c = this.__worldTransform, c = Math.round(0 * c.b + 0 * c.d + c.ty)) : c = 0;
                    this.__offsetY = c;
                    null == this.__defaultRenderTarget ? (c = this.__worldTransform, c = Math.round(a * c.a + 0 * c.c + c.tx - this.__offsetX)) : c = a;
                    this.__displayWidth = c;
                    null == this.__defaultRenderTarget ? (c = this.__worldTransform, c = Math.round(0 * c.b + b * c.d + c.ty - this.__offsetY)) : c = b;
                    this.__displayHeight = c;
                    Ya.createOrtho(this.__projection, 0, this.__displayWidth + 2 * this.__offsetX, 0, this.__displayHeight + 2 * this.__offsetY, -1E3, 1E3);
                    Ya.createOrtho(this.__projectionFlipped,
                        0, this.__displayWidth + 2 * this.__offsetX, this.__displayHeight + 2 * this.__offsetY, 0, -1E3, 1E3)
                },
                __resumeClipAndMask: function (a) {
                    0 < this.__stencilReference ? (this.__context3D.setStencilActions(2, 1, 5, 5, 5), this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0)) : (this.__context3D.setStencilActions(), this.__context3D.setStencilReferenceValue(0, 0, 0));
                    0 < this.__numClipRects ? this.__scissorRect(this.__clipRects[this.__numClipRects - 1]) : this.__scissorRect()
                },
                __scissorRect: function (a) {
                    if (null != a) {
                        var b =
                                Math.floor(a.x),
                            c = Math.floor(a.y),
                            d = 0 < a.width ? Math.ceil(a.get_right()) - b : 0,
                            e = 0 < a.height ? Math.ceil(a.get_bottom()) - c : 0;
                        this.__context3D.__backBufferWantsBestResolution && (b = Math.floor(a.x / this.__pixelRatio), c = Math.floor(a.y / this.__pixelRatio), d = 0 < a.width ? Math.ceil(a.get_right() / this.__pixelRatio) - b : 0, e = 0 < a.height ? Math.ceil(a.get_bottom() / this.__pixelRatio) - c : 0);
                        0 > d && (d = 0);
                        0 > e && (e = 0);
                        Ra.__scissorRectangle.setTo(b, c, d, e);
                        this.__context3D.setScissorRectangle(Ra.__scissorRectangle)
                    } else this.__context3D.setScissorRectangle(null)
                },
                __setBlendMode: function (a) {
                    null != this.__overrideBlendMode && (a = this.__overrideBlendMode);
                    if (this.__blendMode != a) switch (this.__blendMode = a, a) {
                        case 0:
                            this.__context3D.setBlendFactors(2, 2);
                            break;
                        case 9:
                            this.__context3D.setBlendFactors(1, 5);
                            break;
                        case 12:
                            this.__context3D.setBlendFactors(2, 6);
                            break;
                        case 14:
                            this.__context3D.setBlendFactors(2, 2);
                            this.__context3D.__setGLBlendEquation(this.__gl.FUNC_REVERSE_SUBTRACT);
                            break;
                        default:
                            this.__context3D.setBlendFactors(2, 5)
                    }
                },
                __setRenderTarget: function (a) {
                    this.__defaultRenderTarget =
                        a;
                    this.__flipped = null == a;
                    null != a && this.__resize(a.width, a.height)
                },
                __setShaderBuffer: function (a) {
                    this.setShader(a.shader);
                    this.__currentShaderBuffer = a
                },
                __suspendClipAndMask: function () {
                    0 < this.__stencilReference && (this.__context3D.setStencilActions(), this.__context3D.setStencilReferenceValue(0, 0, 0));
                    0 < this.__numClipRects && this.__scissorRect()
                },
                __updateShaderBuffer: function (a) {
                    null != this.__currentShader && null != this.__currentShaderBuffer && this.__currentShader.__updateFromBuffer(this.__currentShaderBuffer,
                        a)
                },
                __class__: Ra
            });
            var kh = function (a) {
                this.onComplete = new Wb;
                this.display = a;
                null != a && (a.addEventListener("unload", p(this, this.display_onUnload)), Na.get_current().addChild(a))
            };
            g["openfl.display.Preloader"] = kh;
            kh.__name__ = "openfl.display.Preloader";
            kh.prototype = {
                start: function () {
                    this.ready = !0;
                    Na.get_current().get_loaderInfo().__complete();
                    if (null != this.display) {
                        var a = new V("complete", !0, !0);
                        this.display.dispatchEvent(a);
                        a.isDefaultPrevented() || this.display.dispatchEvent(new V("unload"))
                    } else this.complete ||
                    (this.complete = !0, this.onComplete.dispatch())
                },
                update: function (a, b) {
                    Na.get_current().get_loaderInfo().__update(a, b);
                    null != this.display && this.display.dispatchEvent(new dg("progress", !0, !0, a, b))
                },
                display_onUnload: function (a) {
                    null != this.display && (this.display.removeEventListener("unload", p(this, this.display_onUnload)), this.display.parent == Na.get_current() && Na.get_current().removeChild(this.display), Na.get_current().stage.set_focus(null), this.display = null);
                    this.ready && !this.complete && (this.complete = !0,
                        this.onComplete.dispatch())
                },
                __class__: kh
            };
            var pg = function () {
                Ja.call(this);
                var a = this.getBackgroundColor(),
                    b = 0;
                70 > .299 * (a >> 16 & 255) + .587 * (a >> 8 & 255) + .114 * (a & 255) && (b = 16777215);
                a = this.getHeight() / 2 - 3.5;
                var c = this.getWidth() - 60;
                this.outline = new je;
                this.outline.get_graphics().beginFill(b, .07);
                this.outline.get_graphics().drawRect(0, 0, c, 7);
                this.outline.set_x(30);
                this.outline.set_y(a);
                this.outline.set_alpha(0);
                this.addChild(this.outline);
                this.progress = new je;
                this.progress.get_graphics().beginFill(b, .35);
                this.progress.get_graphics().drawRect(0, 0, c - 4, 3);
                this.progress.set_x(32);
                this.progress.set_y(a + 2);
                this.progress.set_scaleX(0);
                this.progress.set_alpha(0);
                this.addChild(this.progress);
                this.startAnimation = Na.getTimer() + 100;
                this.endAnimation = this.startAnimation + 1E3;
                this.addEventListener("addedToStage", p(this, this.this_onAddedToStage))
            };
            g["openfl.display.DefaultPreloader"] = pg;
            pg.__name__ = "openfl.display.DefaultPreloader";
            pg.__super__ = Ja;
            pg.prototype = l(Ja.prototype, {
                getBackgroundColor: function () {
                    var a =
                        Na.get_current().stage.window.context.attributes;
                    return Object.prototype.hasOwnProperty.call(a, "background") && null != a.background ? a.background : 0
                },
                getHeight: function () {
                    var a = Na.get_current().stage.window.__height;
                    return 0 < a ? a : Na.get_current().stage.stageHeight
                },
                getWidth: function () {
                    var a = Na.get_current().stage.window.__width;
                    return 0 < a ? a : Na.get_current().stage.stageWidth
                },
                onInit: function () {
                    this.addEventListener("enterFrame", p(this, this.this_onEnterFrame))
                },
                onLoaded: function () {
                    this.removeEventListener("enterFrame",
                        p(this, this.this_onEnterFrame));
                    this.dispatchEvent(new V("unload"))
                },
                onUpdate: function (a, b) {
                    var c = 0;
                    0 < b && (c = a / b, 1 < c && (c = 1));
                    this.progress.set_scaleX(c)
                },
                this_onAddedToStage: function (a) {
                    this.removeEventListener("addedToStage", p(this, this.this_onAddedToStage));
                    this.onInit();
                    this.onUpdate(this.get_loaderInfo().bytesLoaded, this.get_loaderInfo().bytesTotal);
                    this.addEventListener("progress", p(this, this.this_onProgress));
                    this.addEventListener("complete", p(this, this.this_onComplete))
                },
                this_onComplete: function (a) {
                    a.preventDefault();
                    this.removeEventListener("progress", p(this, this.this_onProgress));
                    this.removeEventListener("complete", p(this, this.this_onComplete));
                    this.onLoaded()
                },
                this_onEnterFrame: function (a) {
                    a = (Na.getTimer() - this.startAnimation) / (this.endAnimation - this.startAnimation);
                    0 > a && (a = 0);
                    1 < a && (a = 1);
                    this.outline.set_alpha(this.progress.set_alpha(a))
                },
                this_onProgress: function (a) {
                    this.onUpdate(a.bytesLoaded | 0, a.bytesTotal | 0)
                },
                __class__: pg
            });
            var Ql = {
                    _new: function (a) {
                        return {}
                    }
                },
                sj = function () {
                    this.channels = 0;
                    this.filter = 5;
                    this.index = this.height = 0;
                    this.mipFilter = 2;
                    this.wrap = this.width = 0
                };
            g["openfl.display.ShaderInput"] = sj;
            sj.__name__ = "openfl.display.ShaderInput";
            sj.prototype = {
                __disableGL: function (a, b) {
                    0 > b || a.setTextureAt(b, null)
                },
                __updateGL: function (a, b, c, d, e, f) {
                    c = null != c ? c : this.input;
                    d = null != d ? d : this.filter;
                    e = null != e ? e : this.mipFilter;
                    f = null != f ? f : this.wrap;
                    null != c ? (a.setTextureAt(b, c.getTexture(a)), a.setSamplerStateAt(b, f, d, e)) : a.setTextureAt(b, null)
                },
                __class__: sj
            };
            var bg = function () {
                this.index = 0
            };
            g["openfl.display.ShaderParameter"] =
                bg;
            bg.__name__ = "openfl.display.ShaderParameter";
            bg.prototype = {
                __disableGL: function (a) {
                    if (!(0 > this.index || (a = a.gl, this.__isUniform)))
                        for (var b = 0, c = this.__arrayLength; b < c;) {
                            var d = b++;
                            a.disableVertexAttribArray(this.index + d)
                        }
                },
                __updateGL: function (a, b) {
                    if (!(0 > this.index)) {
                        a = a.gl;
                        b = null != b ? b : this.value;
                        var c = this.__isBool ? b : null,
                            d = this.__isFloat ? b : null,
                            e = this.__isInt ? b : null;
                        if (this.__isUniform)
                            if (null != b && b.length >= this.__length) switch (this.type) {
                                case 0:
                                    a.uniform1i(this.index, c[0] ? 1 : 0);
                                    break;
                                case 1:
                                    a.uniform2i(this.index,
                                        c[0] ? 1 : 0, c[1] ? 1 : 0);
                                    break;
                                case 2:
                                    a.uniform3i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0);
                                    break;
                                case 3:
                                    a.uniform4i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0, c[3] ? 1 : 0);
                                    break;
                                case 4:
                                    a.uniform1f(this.index, d[0]);
                                    break;
                                case 5:
                                    a.uniform2f(this.index, d[0], d[1]);
                                    break;
                                case 6:
                                    a.uniform3f(this.index, d[0], d[1], d[2]);
                                    break;
                                case 7:
                                    a.uniform4f(this.index, d[0], d[1], d[2], d[3]);
                                    break;
                                case 8:
                                    a.uniform1i(this.index, e[0]);
                                    break;
                                case 9:
                                    a.uniform2i(this.index, e[0], e[1]);
                                    break;
                                case 10:
                                    a.uniform3i(this.index, e[0], e[1], e[2]);
                                    break;
                                case 11:
                                    a.uniform4i(this.index, e[0], e[1], e[2], e[3]);
                                    break;
                                case 12:
                                    this.__uniformMatrix[0] = d[0];
                                    this.__uniformMatrix[1] = d[1];
                                    this.__uniformMatrix[2] = d[2];
                                    this.__uniformMatrix[3] = d[3];
                                    Gb.uniformMatrix2fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 16:
                                    this.__uniformMatrix[0] = d[0];
                                    this.__uniformMatrix[1] = d[1];
                                    this.__uniformMatrix[2] = d[2];
                                    this.__uniformMatrix[3] = d[3];
                                    this.__uniformMatrix[4] = d[4];
                                    this.__uniformMatrix[5] = d[5];
                                    this.__uniformMatrix[6] = d[6];
                                    this.__uniformMatrix[7] = d[7];
                                    this.__uniformMatrix[8] =
                                        d[8];
                                    Gb.uniformMatrix3fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 20:
                                    this.__uniformMatrix[0] = d[0], this.__uniformMatrix[1] = d[1], this.__uniformMatrix[2] = d[2], this.__uniformMatrix[3] = d[3], this.__uniformMatrix[4] = d[4], this.__uniformMatrix[5] = d[5], this.__uniformMatrix[6] = d[6], this.__uniformMatrix[7] = d[7], this.__uniformMatrix[8] = d[8], this.__uniformMatrix[9] = d[9], this.__uniformMatrix[10] = d[10], this.__uniformMatrix[11] = d[11], this.__uniformMatrix[12] = d[12], this.__uniformMatrix[13] = d[13], this.__uniformMatrix[14] =
                                        d[14], this.__uniformMatrix[15] = d[15], Gb.uniformMatrix4fv(a, this.index, !1, this.__uniformMatrix)
                            } else switch (this.type) {
                                case 4:
                                    a.uniform1f(this.index, 0);
                                    break;
                                case 5:
                                    a.uniform2f(this.index, 0, 0);
                                    break;
                                case 6:
                                    a.uniform3f(this.index, 0, 0, 0);
                                    break;
                                case 7:
                                    a.uniform4f(this.index, 0, 0, 0, 0);
                                    break;
                                case 0:
                                case 8:
                                    a.uniform1i(this.index, 0);
                                    break;
                                case 1:
                                case 9:
                                    a.uniform2i(this.index, 0, 0);
                                    break;
                                case 2:
                                case 10:
                                    a.uniform3i(this.index, 0, 0, 0);
                                    break;
                                case 3:
                                case 11:
                                    a.uniform4i(this.index, 0, 0, 0, 0);
                                    break;
                                case 12:
                                    this.__uniformMatrix[0] =
                                        0;
                                    this.__uniformMatrix[1] = 0;
                                    this.__uniformMatrix[2] = 0;
                                    this.__uniformMatrix[3] = 0;
                                    Gb.uniformMatrix2fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 16:
                                    this.__uniformMatrix[0] = 0;
                                    this.__uniformMatrix[1] = 0;
                                    this.__uniformMatrix[2] = 0;
                                    this.__uniformMatrix[3] = 0;
                                    this.__uniformMatrix[4] = 0;
                                    this.__uniformMatrix[5] = 0;
                                    this.__uniformMatrix[6] = 0;
                                    this.__uniformMatrix[7] = 0;
                                    this.__uniformMatrix[8] = 0;
                                    Gb.uniformMatrix3fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 20:
                                    this.__uniformMatrix[0] = 0, this.__uniformMatrix[1] =
                                        0, this.__uniformMatrix[2] = 0, this.__uniformMatrix[3] = 0, this.__uniformMatrix[4] = 0, this.__uniformMatrix[5] = 0, this.__uniformMatrix[6] = 0, this.__uniformMatrix[7] = 0, this.__uniformMatrix[8] = 0, this.__uniformMatrix[9] = 0, this.__uniformMatrix[10] = 0, this.__uniformMatrix[11] = 0, this.__uniformMatrix[12] = 0, this.__uniformMatrix[13] = 0, this.__uniformMatrix[14] = 0, this.__uniformMatrix[15] = 0, Gb.uniformMatrix4fv(a, this.index, !1, this.__uniformMatrix)
                            } else if (this.__useArray || null != b && b.length != this.__length)
                            for (f = 0, h = this.__arrayLength; f <
                            h;) r = f++, a.enableVertexAttribArray(this.index + r);
                        else {
                            for (var f = 0, h = this.__arrayLength; f < h;) {
                                var r = f++;
                                a.disableVertexAttribArray(this.index + r)
                            }
                            if (null != b) switch (this.type) {
                                case 0:
                                    a.vertexAttrib1f(this.index, c[0] ? 1 : 0);
                                    break;
                                case 1:
                                    a.vertexAttrib2f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0);
                                    break;
                                case 2:
                                    a.vertexAttrib3f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0);
                                    break;
                                case 3:
                                    a.vertexAttrib4f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0, c[3] ? 1 : 0);
                                    break;
                                case 4:
                                    a.vertexAttrib1f(this.index, d[0]);
                                    break;
                                case 5:
                                    a.vertexAttrib2f(this.index,
                                        d[0], d[1]);
                                    break;
                                case 6:
                                    a.vertexAttrib3f(this.index, d[0], d[1], d[2]);
                                    break;
                                case 7:
                                    a.vertexAttrib4f(this.index, d[0], d[1], d[2], d[3]);
                                    break;
                                case 8:
                                    a.vertexAttrib1f(this.index, e[0]);
                                    break;
                                case 9:
                                    a.vertexAttrib2f(this.index, e[0], e[1]);
                                    break;
                                case 10:
                                    a.vertexAttrib3f(this.index, e[0], e[1], e[2]);
                                    break;
                                case 11:
                                    a.vertexAttrib4f(this.index, e[0], e[1], e[2], e[3]);
                                    break;
                                case 12:
                                    a.vertexAttrib2f(this.index + 0, d[0], d[1]);
                                    a.vertexAttrib2f(this.index + 1, d[2], d[3]);
                                    break;
                                case 16:
                                    a.vertexAttrib3f(this.index + 0, d[0], d[1], d[2]);
                                    a.vertexAttrib3f(this.index + 1, d[3], d[4], d[5]);
                                    a.vertexAttrib3f(this.index + 2, d[6], d[7], d[8]);
                                    break;
                                case 20:
                                    a.vertexAttrib4f(this.index + 0, d[0], d[1], d[2], d[3]), a.vertexAttrib4f(this.index + 1, d[4], d[5], d[6], d[7]), a.vertexAttrib4f(this.index + 2, d[8], d[9], d[10], d[11]), a.vertexAttrib4f(this.index + 3, d[12], d[13], d[14], d[15])
                            } else switch (this.type) {
                                case 0:
                                case 4:
                                case 8:
                                    a.vertexAttrib1f(this.index, 0);
                                    break;
                                case 1:
                                case 5:
                                case 9:
                                    a.vertexAttrib2f(this.index, 0, 0);
                                    break;
                                case 2:
                                case 6:
                                case 10:
                                    a.vertexAttrib3f(this.index,
                                        0, 0, 0);
                                    break;
                                case 3:
                                case 7:
                                case 11:
                                    a.vertexAttrib4f(this.index, 0, 0, 0, 0);
                                    break;
                                case 12:
                                    a.vertexAttrib2f(this.index + 0, 0, 0);
                                    a.vertexAttrib2f(this.index + 1, 0, 0);
                                    break;
                                case 16:
                                    a.vertexAttrib3f(this.index + 0, 0, 0, 0);
                                    a.vertexAttrib3f(this.index + 1, 0, 0, 0);
                                    a.vertexAttrib3f(this.index + 2, 0, 0, 0);
                                    break;
                                case 20:
                                    a.vertexAttrib4f(this.index + 0, 0, 0, 0, 0), a.vertexAttrib4f(this.index + 1, 0, 0, 0, 0), a.vertexAttrib4f(this.index + 2, 0, 0, 0, 0), a.vertexAttrib4f(this.index + 3, 0, 0, 0, 0)
                            }
                        }
                    }
                },
                __updateGLFromBuffer: function (a, b, c, d, e) {
                    if (!(0 >
                        this.index))
                        if (a = a.gl, this.__isUniform) {
                            if (d >= this.__length) switch (this.type) {
                                case 4:
                                    a.uniform1f(this.index, b[c]);
                                    break;
                                case 5:
                                    a.uniform2f(this.index, b[c], b[c + 1]);
                                    break;
                                case 6:
                                    a.uniform3f(this.index, b[c], b[c + 1], b[c + 2]);
                                    break;
                                case 7:
                                    a.uniform4f(this.index, b[c], b[c + 1], b[c + 2], b[c + 3]);
                                    break;
                                case 0:
                                case 8:
                                    a.uniform1i(this.index, b[c] | 0);
                                    break;
                                case 1:
                                case 9:
                                    a.uniform2i(this.index, b[c] | 0, b[c + 1] | 0);
                                    break;
                                case 2:
                                case 10:
                                    a.uniform3i(this.index, b[c] | 0, b[c + 1] | 0, b[c + 2] | 0);
                                    break;
                                case 3:
                                case 11:
                                    a.uniform4i(this.index,
                                        b[c] | 0, b[c + 1] | 0, b[c + 2] | 0, b[c + 3] | 0);
                                    break;
                                case 12:
                                    this.__uniformMatrix[0] = b[c];
                                    this.__uniformMatrix[1] = b[c + 1];
                                    this.__uniformMatrix[2] = b[c + 2];
                                    this.__uniformMatrix[3] = b[c + 3];
                                    Gb.uniformMatrix2fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 16:
                                    this.__uniformMatrix[0] = b[c];
                                    this.__uniformMatrix[1] = b[c + 1];
                                    this.__uniformMatrix[2] = b[c + 2];
                                    this.__uniformMatrix[3] = b[c + 3];
                                    this.__uniformMatrix[4] = b[c + 4];
                                    this.__uniformMatrix[5] = b[c + 5];
                                    this.__uniformMatrix[6] = b[c + 6];
                                    this.__uniformMatrix[7] = b[c + 7];
                                    this.__uniformMatrix[8] =
                                        b[c + 8];
                                    Gb.uniformMatrix3fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 20:
                                    this.__uniformMatrix[0] = b[c], this.__uniformMatrix[1] = b[c + 1], this.__uniformMatrix[2] = b[c + 2], this.__uniformMatrix[3] = b[c + 3], this.__uniformMatrix[4] = b[c + 4], this.__uniformMatrix[5] = b[c + 5], this.__uniformMatrix[6] = b[c + 6], this.__uniformMatrix[7] = b[c + 7], this.__uniformMatrix[8] = b[c + 8], this.__uniformMatrix[9] = b[c + 9], this.__uniformMatrix[10] = b[c + 10], this.__uniformMatrix[11] = b[c + 11], this.__uniformMatrix[12] = b[c + 12], this.__uniformMatrix[13] =
                                        b[c + 13], this.__uniformMatrix[14] = b[c + 14], this.__uniformMatrix[15] = b[c + 15], Gb.uniformMatrix4fv(a, this.index, !1, this.__uniformMatrix)
                            }
                        } else if (this.__internal || 0 != d && d != this.__length) {
                            b = a.FLOAT;
                            this.__isBool ? b = a.INT : this.__isInt && (b = a.INT);
                            f = 0;
                            for (h = this.__arrayLength; f < h;) r = f++, a.enableVertexAttribArray(this.index + r);
                            if (0 < d)
                                for (f = 0, h = this.__arrayLength; f < h;) r = f++, a.vertexAttribPointer(this.index + r, this.__length, b, !1, 4 * this.__length, 4 * (c + e * this.__length + r * this.__arrayLength))
                        } else {
                            for (var f = 0, h = this.__arrayLength; f <
                            h;) {
                                var r = f++;
                                a.disableVertexAttribArray(this.index + r)
                            }
                            if (0 < d) switch (this.type) {
                                case 0:
                                case 4:
                                case 8:
                                    a.vertexAttrib1f(this.index, b[c]);
                                    break;
                                case 1:
                                case 5:
                                case 9:
                                    a.vertexAttrib2f(this.index, b[c], b[c + 1]);
                                    break;
                                case 2:
                                case 6:
                                case 10:
                                    a.vertexAttrib3f(this.index, b[c], b[c + 1], b[c + 2]);
                                    break;
                                case 3:
                                case 7:
                                case 11:
                                    a.vertexAttrib4f(this.index, b[c], b[c + 1], b[c + 2], b[c + 3]);
                                    break;
                                case 12:
                                    a.vertexAttrib2f(this.index + 0, b[c], b[c + 1]);
                                    a.vertexAttrib2f(this.index + 1, b[c + 2], b[c + 2 + 1]);
                                    break;
                                case 16:
                                    a.vertexAttrib3f(this.index +
                                        0, b[c], b[c + 1], b[c + 2]);
                                    a.vertexAttrib3f(this.index + 1, b[c + 3], b[c + 3 + 1], b[c + 3 + 2]);
                                    a.vertexAttrib3f(this.index + 2, b[c + 6], b[c + 6 + 1], b[c + 6 + 2]);
                                    break;
                                case 20:
                                    a.vertexAttrib4f(this.index + 0, b[c], b[c + 1], b[c + 2], b[c + 3]), a.vertexAttrib4f(this.index + 1, b[c + 4], b[c + 4 + 1], b[c + 4 + 2], b[c + 4 + 3]), a.vertexAttrib4f(this.index + 2, b[c + 8], b[c + 8 + 1], b[c + 8 + 2], b[c + 8 + 3]), a.vertexAttrib4f(this.index + 3, b[c + 12], b[c + 12 + 1], b[c + 12 + 2], b[c + 12 + 3])
                            } else switch (this.type) {
                                case 0:
                                case 4:
                                case 8:
                                    a.vertexAttrib1f(this.index, 0);
                                    break;
                                case 1:
                                case 5:
                                case 9:
                                    a.vertexAttrib2f(this.index,
                                        0, 0);
                                    break;
                                case 2:
                                case 6:
                                case 10:
                                    a.vertexAttrib3f(this.index, 0, 0, 0);
                                    break;
                                case 3:
                                case 7:
                                case 11:
                                    a.vertexAttrib4f(this.index, 0, 0, 0, 0);
                                    break;
                                case 12:
                                    a.vertexAttrib2f(this.index + 0, 0, 0);
                                    a.vertexAttrib2f(this.index + 1, 0, 0);
                                    break;
                                case 16:
                                    a.vertexAttrib3f(this.index + 0, 0, 0, 0);
                                    a.vertexAttrib3f(this.index + 1, 0, 0, 0);
                                    a.vertexAttrib3f(this.index + 2, 0, 0, 0);
                                    break;
                                case 20:
                                    a.vertexAttrib4f(this.index + 0, 0, 0, 0, 0), a.vertexAttrib4f(this.index + 1, 0, 0, 0, 0), a.vertexAttrib4f(this.index + 2, 0, 0, 0, 0), a.vertexAttrib4f(this.index +
                                        3, 0, 0, 0, 0)
                            }
                        }
                },
                set_name: function (a) {
                    this.__internal = R.startsWith(a, "openfl_");
                    return this.name = a
                },
                __class__: bg,
                __properties__: {
                    set_name: "set_name"
                }
            };
            var eg = function (a, b, c, d) {
                X.call(this);
                this.__drawableType = 6;
                this.enabled = !0;
                this.trackAsMenu = !1;
                this.useHandCursor = !0;
                this.__upState = null != a ? a : new da;
                this.__overState = b;
                this.__downState = c;
                this.set_hitTestState(null != d ? d : new da);
                this.addEventListener("mouseDown", p(this, this.__this_onMouseDown));
                this.addEventListener("mouseOut", p(this, this.__this_onMouseOut));
                this.addEventListener("mouseOver", p(this, this.__this_onMouseOver));
                this.addEventListener("mouseUp", p(this, this.__this_onMouseUp));
                this.__tabEnabled = !0;
                this.set___currentState(this.__upState);
                null != eg.__constructor && (a = eg.__constructor, eg.__constructor = null, a(this))
            };
            g["openfl.display.SimpleButton"] = eg;
            eg.__name__ = "openfl.display.SimpleButton";
            eg.__super__ = X;
            eg.prototype = l(X.prototype, {
                __getBounds: function (a, b) {
                    X.prototype.__getBounds.call(this, a, b);
                    var c = la.__pool.get(),
                        d = this.__currentState.__transform;
                    c.a = d.a * b.a + d.b * b.c;
                    c.b = d.a * b.b + d.b * b.d;
                    c.c = d.c * b.a + d.d * b.c;
                    c.d = d.c * b.b + d.d * b.d;
                    c.tx = d.tx * b.a + d.ty * b.c + b.tx;
                    c.ty = d.tx * b.b + d.ty * b.d + b.ty;
                    this.__currentState.__getBounds(a, c);
                    la.__pool.release(c)
                },
                __getRenderBounds: function (a, b) {
                    if (null != this.__scrollRect) X.prototype.__getRenderBounds.call(this, a, b);
                    else {
                        X.prototype.__getBounds.call(this, a, b);
                        var c = la.__pool.get(),
                            d = this.__currentState.__transform;
                        c.a = d.a * b.a + d.b * b.c;
                        c.b = d.a * b.b + d.b * b.d;
                        c.c = d.c * b.a + d.d * b.c;
                        c.d = d.c * b.b + d.d * b.d;
                        c.tx = d.tx * b.a + d.ty * b.c +
                            b.tx;
                        c.ty = d.tx * b.b + d.ty * b.d + b.ty;
                        this.__currentState.__getRenderBounds(a, c);
                        la.__pool.release(c)
                    }
                },
                __getCursor: function () {
                    return this.useHandCursor && !this.__ignoreEvent && this.enabled ? "button" : null
                },
                __hitTest: function (a, b, c, d, e, f) {
                    var h = !1;
                    null != this.get_hitTestState() ? this.get_hitTestState().__hitTest(a, b, c, d, e, f) && (null != d && (0 == d.length ? d[0] = f : d[d.length - 1] = f), h = !e || this.mouseEnabled) : null != this.__currentState && (!f.get_visible() || this.__isMask || e && !this.mouseEnabled || null != this.get_mask() && !this.get_mask().__hitTestMask(a,
                        b) ? h = !1 : this.__currentState.__hitTest(a, b, c, d, e, f) && (h = e));
                    if (null != d)
                        for (; 1 < d.length && d[d.length - 1] == d[d.length - 2];) d.pop();
                    return h
                },
                __hitTestMask: function (a, b) {
                    var c = !1;
                    this.__currentState.__hitTestMask(a, b) && (c = !0);
                    return c
                },
                __setStageReference: function (a) {
                    X.prototype.__setStageReference.call(this, a);
                    null != this.__currentState && this.__currentState.__setStageReference(a);
                    null != this.get_hitTestState() && this.get_hitTestState() != this.__currentState && this.get_hitTestState().__setStageReference(a)
                },
                __setTransformDirty: function () {
                    X.prototype.__setTransformDirty.call(this);
                    null != this.__currentState && this.__currentState.__setTransformDirty();
                    null != this.get_hitTestState() && this.get_hitTestState() != this.__currentState && this.get_hitTestState().__setTransformDirty()
                },
                __update: function (a, b) {
                    X.prototype.__update.call(this, a, b);
                    b && (null != this.__currentState && this.__currentState.__update(a, !0), null != this.get_hitTestState() && this.get_hitTestState() != this.__currentState && this.get_hitTestState().__update(a,
                        !0))
                },
                __updateTransforms: function (a) {
                    X.prototype.__updateTransforms.call(this, a);
                    null != this.__currentState && this.__currentState.__updateTransforms();
                    null != this.get_hitTestState() && this.get_hitTestState() != this.__currentState && this.get_hitTestState().__updateTransforms()
                },
                get_downState: function () {
                    return this.__downState
                },
                get_hitTestState: function () {
                    return this.__hitTestState
                },
                set_hitTestState: function (a) {
                    null != this.__hitTestState && this.__hitTestState != a && this.__hitTestState != this.get_downState() &&
                    this.__hitTestState != this.get_upState() && this.__hitTestState != this.get_overState() && (this.__hitTestState.__renderParent = null);
                    null != a && (a.__renderParent = this, a.__renderDirty || (a.__renderDirty = !0, a.__setParentRenderDirty()));
                    return this.__hitTestState = a
                },
                get_overState: function () {
                    return this.__overState
                },
                get_upState: function () {
                    return this.__upState
                },
                set___currentState: function (a) {
                    null != this.__currentState && this.__currentState != this.get_hitTestState() && (this.__currentState.__renderParent = null);
                    null !=
                    a && null != a.parent && a.parent.removeChild(a);
                    da.__supportDOM && null == this.__previousStates && (this.__previousStates = D.toObjectVector(null));
                    if (a != this.__currentState) {
                        if (da.__supportDOM) {
                            null != this.__currentState && (this.__currentState.__setStageReference(null), this.__previousStates.push(this.__currentState));
                            var b = this.__previousStates.indexOf(a, 0);
                            if (-1 < b) {
                                var c = this.__previousStates;
                                c.__tempIndex = b;
                                b = 0;
                                for (var d = []; b < d.length;) {
                                    var e = d[b++];
                                    c.insertAt(c.__tempIndex, e);
                                    c.__tempIndex++
                                }
                                c.splice(c.__tempIndex,
                                    1)
                            }
                        }
                        null != a && (a.__renderParent = this, a.__renderDirty || (a.__renderDirty = !0, a.__setParentRenderDirty()));
                        this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty())
                    }
                    return this.__currentState = a
                },
                __this_onMouseDown: function (a) {
                    this.enabled && this.set___currentState(this.get_downState())
                },
                __this_onMouseOut: function (a) {
                    this.__ignoreEvent = !1;
                    this.get_upState() != this.__currentState && this.set___currentState(this.get_upState())
                },
                __this_onMouseOver: function (a) {
                    a.buttonDown && (this.__ignoreEvent = !0);
                    this.get_overState() != this.__currentState && null != this.get_overState() && !this.__ignoreEvent && this.enabled && this.set___currentState(this.get_overState())
                },
                __this_onMouseUp: function (a) {
                    this.__ignoreEvent = !1;
                    this.enabled && null != this.get_overState() ? this.set___currentState(this.get_overState()) : this.set___currentState(this.get_upState())
                },
                __class__: eg,
                __properties__: l(X.prototype.__properties__, {
                    set___currentState: "set___currentState",
                    get_upState: "get_upState",
                    get_overState: "get_overState",
                    set_hitTestState: "set_hitTestState",
                    get_hitTestState: "get_hitTestState",
                    get_downState: "get_downState"
                })
            });
            var fg = function (a, b) {
                oa.call(this);
                this.__drawableType = 5;
                this.set_name(null);
                this.__color = -1;
                this.__colorSplit = [255, 255, 255];
                this.__colorString = "#FFFFFF";
                this.__contentsScaleFactor = 1;
                this.__deltaTime = this.__currentTabOrderIndex = 0;
                this.__displayState = 2;
                this.__logicalHeight = this.__logicalWidth = this.__lastClickTime = this.__mouseY = this.__mouseX = 0;
                this.__displayMatrix = new la;
                this.__displayRect = new ha;
                this.__renderDirty = !0;
                this.stage3Ds =
                    D.toObjectVector(null);
                this.stage3Ds.push(new sf(this));
                this.stage3Ds.push(new sf(this));
                this.stage3Ds.push(new sf(this));
                this.stage3Ds.push(new sf(this));
                this.stage = this;
                this.align = 6;
                this.allowsFullScreenInteractive = this.allowsFullScreen = !0;
                this.__quality = 1;
                this.__scaleMode = 2;
                this.showDefaultContextMenu = !0;
                this.softKeyboardRect = new ha;
                this.stageFocusRect = !0;
                this.__macKeyboard = /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent) || /Mac/.test(navigator.platform);
                this.__clearBeforeRender = !0;
                this.__forceRender = !1;
                this.__stack = [];
                this.__rollOutStack = [];
                this.__mouseOutStack = [];
                this.__touchData = new Db;
                null == Na.get_current().__loaderInfo && (Na.get_current().__loaderInfo = Nd.create(null), Na.get_current().__loaderInfo.content = Na.get_current());
                this.__uncaughtErrorEvents = Na.get_current().__loaderInfo.uncaughtErrorEvents;
                this.application = a.application;
                this.window = a;
                this.set_color(b);
                this.__contentsScaleFactor = a.__scale;
                this.__wasFullscreen = a.__fullscreen;
                this.__resize();
                null == Na.get_current().stage &&
                this.stage.addChild(Na.get_current())
            };
            g["openfl.display.Stage"] = fg;
            fg.__name__ = "openfl.display.Stage";
            fg.__interfaces__ = [U];
            fg.__super__ = oa;
            fg.prototype = l(oa.prototype, {
                localToGlobal: function (a) {
                    return a.clone()
                },
                __broadcastEvent: function (a) {
                    if (Object.prototype.hasOwnProperty.call(da.__broadcastEvents.h, a.type))
                        for (var b = da.__broadcastEvents.h[a.type], c = 0; c < b.length;) {
                            var d = b[c];
                            ++c;
                            if (d.stage == this || null == d.stage)
                                if (this.__uncaughtErrorEvents.__enabled) try {
                                    d.__dispatch(a)
                                } catch (e) {
                                    Ia.lastError =
                                        e, d = fa.caught(e).unwrap(), this.__handleError(d)
                                } else d.__dispatch(a)
                        }
                },
                __createRenderer: function () {
                    var a = this.window.__width * this.window.__scale | 0,
                        b = this.window.__height * this.window.__scale | 0;
                    switch (this.window.context.type) {
                        case "canvas":
                            this.__renderer = new we(this.window.context.canvas2D);
                            break;
                        case "dom":
                            this.__renderer = new Yg(this.window.context.dom);
                            break;
                        case "opengl":
                        case "opengles":
                        case "webgl":
                            this.context3D = new Sa(this), this.context3D.configureBackBuffer(this.stageWidth, this.stageHeight,
                                0, !0, !0, !0), this.context3D.present(), this.__renderer = new Ra(this.context3D)
                    }
                    if (null != this.__renderer) {
                        var c = this.get_quality();
                        this.__renderer.__allowSmoothing = 2 != c;
                        this.__renderer.__pixelRatio = this.window.__scale;
                        this.__renderer.__worldTransform = this.__displayMatrix;
                        this.__renderer.__stage = this;
                        this.__renderer.__resize(a, b)
                    }
                },
                __dispatchEvent: function (a) {
                    if (this.__uncaughtErrorEvents.__enabled) try {
                        var b = oa.prototype.__dispatchEvent.call(this, a)
                    } catch (c) {
                        Ia.lastError = c, a = fa.caught(c).unwrap(), this.__handleError(a),
                            b = !1
                    } else b = oa.prototype.__dispatchEvent.call(this, a);
                    return b
                },
                __dispatchPendingMouseEvent: function () {
                    this.__pendingMouseEvent && (this.__onMouse("mouseMove", this.__pendingMouseX, this.__pendingMouseY, 0), this.__pendingMouseEvent = !1)
                },
                __dispatchStack: function (a, b) {
                    if (this.__uncaughtErrorEvents.__enabled) try {
                        var c = b.length;
                        if (0 == c) {
                            a.eventPhase = 2;
                            var d = a.target;
                            d.__dispatch(a)
                        } else {
                            a.eventPhase = 1;
                            a.target = b[b.length - 1];
                            for (var e = 0, f = c - 1; e < f;) {
                                var h = e++;
                                b[h].__dispatch(a);
                                if (a.__isCanceled) return
                            }
                            a.eventPhase =
                                2;
                            d = a.target;
                            d.__dispatch(a);
                            if (!a.__isCanceled && a.bubbles)
                                for (a.eventPhase = 3, h = c - 2; 0 <= h;) {
                                    b[h].__dispatch(a);
                                    if (a.__isCanceled) break;
                                    --h
                                }
                        }
                    } catch (r) {
                        Ia.lastError = r, a = fa.caught(r).unwrap(), this.__handleError(a)
                    } else if (c = b.length, 0 == c) a.eventPhase = 2, d = a.target, d.__dispatch(a);
                    else {
                        a.eventPhase = 1;
                        a.target = b[b.length - 1];
                        e = 0;
                        for (f = c - 1; e < f;)
                            if (h = e++, b[h].__dispatch(a), a.__isCanceled) return;
                        a.eventPhase = 2;
                        d = a.target;
                        d.__dispatch(a);
                        if (!a.__isCanceled && a.bubbles)
                            for (a.eventPhase = 3, h = c - 2; 0 <= h;) {
                                b[h].__dispatch(a);
                                if (a.__isCanceled) break;
                                --h
                            }
                    }
                },
                __dispatchTarget: function (a, b) {
                    if (this.__uncaughtErrorEvents.__enabled) try {
                        return a.__dispatchEvent(b)
                    } catch (c) {
                        return Ia.lastError = c, a = fa.caught(c).unwrap(), this.__handleError(a), !1
                    } else return a.__dispatchEvent(b)
                },
                __drag: function (a) {
                    var b = this.__dragObject.parent;
                    if (null != b) {
                        b = b.__getWorldTransform();
                        var c = b.a * b.d - b.b * b.c;
                        if (0 == c) a.x = -b.tx, a.y = -b.ty;
                        else {
                            var d = 1 / c * (b.c * (b.ty - a.y) + b.d * (a.x - b.tx));
                            a.y = 1 / c * (b.a * (a.y - b.ty) + b.b * (b.tx - a.x));
                            a.x = d
                        }
                    }
                    b = a.x + this.__dragOffsetX;
                    a = a.y + this.__dragOffsetY;
                    null != this.__dragBounds && (b < this.__dragBounds.x ? b = this.__dragBounds.x : b > this.__dragBounds.get_right() && (b = this.__dragBounds.get_right()), a < this.__dragBounds.y ? a = this.__dragBounds.y : a > this.__dragBounds.get_bottom() && (a = this.__dragBounds.get_bottom()));
                    this.__dragObject.set_x(b);
                    this.__dragObject.set_y(a)
                },
                __getInteractive: function (a) {
                    null != a && a.push(this);
                    return !0
                },
                __globalToLocal: function (a, b) {
                    a != b && b.copyFrom(a);
                    return b
                },
                __handleError: function (a) {
                    var b = new Aj("uncaughtError",
                        !0, !0, a);
                    try {
                        Na.get_current().__loaderInfo.uncaughtErrorEvents.dispatchEvent(b)
                    } catch (d) {
                        Ia.lastError = d
                    }
                    if (!b.__preventDefault) {
                        b = Pe.toString(Pe.exceptionStack());
                        console.log(b);
                        b = n.string(a);
                        console.log(b);
                        try {
                            if (null != a && Object.prototype.hasOwnProperty.call(a, "stack") && null != a.stack && "" != a.stack) console.log(a.stack), a.stack = a.stack;
                            else {
                                var c = Pe.toString(Pe.callStack());
                                console.log(c)
                            }
                        } catch (d) {
                            Ia.lastError = d
                        }
                        throw a;
                    }
                },
                __onKey: function (a, b, c) {
                    this.__dispatchPendingMouseEvent();
                    $a.__altKey = bb.get_altKey(c);
                    $a.__commandKey = bb.get_metaKey(c);
                    $a.__controlKey = bb.get_ctrlKey(c) && !bb.get_metaKey(c);
                    $a.__ctrlKey = bb.get_ctrlKey(c);
                    $a.__shiftKey = bb.get_shiftKey(c);
                    var d = [];
                    null == this.__focus ? this.__getInteractive(d) : this.__focus.__getInteractive(d);
                    if (0 < d.length) {
                        switch (b) {
                            case 1073741908:
                            case 1073741909:
                            case 1073741910:
                            case 1073741911:
                            case 1073741912:
                            case 1073741913:
                            case 1073741914:
                            case 1073741915:
                            case 1073741916:
                            case 1073741917:
                            case 1073741918:
                            case 1073741919:
                            case 1073741920:
                            case 1073741921:
                            case 1073741922:
                            case 1073741923:
                            case 1073742044:
                                var e =
                                    3;
                                break;
                            case 1073742048:
                            case 1073742049:
                            case 1073742050:
                            case 1073742051:
                                e = 1;
                                break;
                            case 1073742052:
                            case 1073742053:
                            case 1073742054:
                            case 1073742055:
                                e = 2;
                                break;
                            default:
                                e = 0
                        }
                        switch (b) {
                            case 8:
                                b = 8;
                                break;
                            case 9:
                                b = 9;
                                break;
                            case 13:
                                b = 13;
                                break;
                            case 27:
                                b = 27;
                                break;
                            case 32:
                                b = 32;
                                break;
                            case 33:
                                b = 49;
                                break;
                            case 34:
                                b = 222;
                                break;
                            case 35:
                                b = 51;
                                break;
                            case 36:
                                b = 52;
                                break;
                            case 37:
                                b = 53;
                                break;
                            case 38:
                                b = 55;
                                break;
                            case 39:
                                b = 222;
                                break;
                            case 40:
                                b = 57;
                                break;
                            case 41:
                                b = 48;
                                break;
                            case 42:
                                b = 56;
                                break;
                            case 44:
                                b = 188;
                                break;
                            case 45:
                                b = 189;
                                break;
                            case 46:
                                b = 190;
                                break;
                            case 47:
                                b = 191;
                                break;
                            case 48:
                                b = 48;
                                break;
                            case 49:
                                b = 49;
                                break;
                            case 50:
                                b = 50;
                                break;
                            case 51:
                                b = 51;
                                break;
                            case 52:
                                b = 52;
                                break;
                            case 53:
                                b = 53;
                                break;
                            case 54:
                                b = 54;
                                break;
                            case 55:
                                b = 55;
                                break;
                            case 56:
                                b = 56;
                                break;
                            case 57:
                                b = 57;
                                break;
                            case 58:
                                b = 186;
                                break;
                            case 59:
                                b = 186;
                                break;
                            case 60:
                                b = 60;
                                break;
                            case 61:
                                b = 187;
                                break;
                            case 62:
                                b = 190;
                                break;
                            case 63:
                                b = 191;
                                break;
                            case 64:
                                b = 50;
                                break;
                            case 91:
                                b = 219;
                                break;
                            case 92:
                                b = 220;
                                break;
                            case 93:
                                b = 221;
                                break;
                            case 94:
                                b = 54;
                                break;
                            case 95:
                                b = 189;
                                break;
                            case 96:
                                b = 192;
                                break;
                            case 97:
                                b = 65;
                                break;
                            case 98:
                                b = 66;
                                break;
                            case 99:
                                b = 67;
                                break;
                            case 100:
                                b = 68;
                                break;
                            case 101:
                                b = 69;
                                break;
                            case 102:
                                b = 70;
                                break;
                            case 103:
                                b = 71;
                                break;
                            case 104:
                                b = 72;
                                break;
                            case 105:
                                b = 73;
                                break;
                            case 106:
                                b = 74;
                                break;
                            case 107:
                                b = 75;
                                break;
                            case 108:
                                b = 76;
                                break;
                            case 109:
                                b = 77;
                                break;
                            case 110:
                                b = 78;
                                break;
                            case 111:
                                b = 79;
                                break;
                            case 112:
                                b = 80;
                                break;
                            case 113:
                                b = 81;
                                break;
                            case 114:
                                b = 82;
                                break;
                            case 115:
                                b = 83;
                                break;
                            case 116:
                                b = 84;
                                break;
                            case 117:
                                b = 85;
                                break;
                            case 118:
                                b = 86;
                                break;
                            case 119:
                                b = 87;
                                break;
                            case 120:
                                b = 88;
                                break;
                            case 121:
                                b = 89;
                                break;
                            case 122:
                                b = 90;
                                break;
                            case 127:
                                b =
                                    46;
                                break;
                            case 1073741881:
                                b = 20;
                                break;
                            case 1073741882:
                                b = 112;
                                break;
                            case 1073741883:
                                b = 113;
                                break;
                            case 1073741884:
                                b = 114;
                                break;
                            case 1073741885:
                                b = 115;
                                break;
                            case 1073741886:
                                b = 116;
                                break;
                            case 1073741887:
                                b = 117;
                                break;
                            case 1073741888:
                                b = 118;
                                break;
                            case 1073741889:
                                b = 119;
                                break;
                            case 1073741890:
                                b = 120;
                                break;
                            case 1073741891:
                                b = 121;
                                break;
                            case 1073741892:
                                b = 122;
                                break;
                            case 1073741893:
                                b = 123;
                                break;
                            case 1073741894:
                                b = 301;
                                break;
                            case 1073741895:
                                b = 145;
                                break;
                            case 1073741896:
                                b = 19;
                                break;
                            case 1073741897:
                                b = 45;
                                break;
                            case 1073741898:
                                b = 36;
                                break;
                            case 1073741899:
                                b = 33;
                                break;
                            case 1073741901:
                                b = 35;
                                break;
                            case 1073741902:
                                b = 34;
                                break;
                            case 1073741903:
                                b = 39;
                                break;
                            case 1073741904:
                                b = 37;
                                break;
                            case 1073741905:
                                b = 40;
                                break;
                            case 1073741906:
                                b = 38;
                                break;
                            case 1073741907:
                                b = 144;
                                break;
                            case 1073741908:
                                b = 111;
                                break;
                            case 1073741909:
                                b = 106;
                                break;
                            case 1073741910:
                                b = 109;
                                break;
                            case 1073741911:
                                b = 107;
                                break;
                            case 1073741912:
                                b = 13;
                                break;
                            case 1073741913:
                                b = 97;
                                break;
                            case 1073741914:
                                b = 98;
                                break;
                            case 1073741915:
                                b = 99;
                                break;
                            case 1073741916:
                                b = 100;
                                break;
                            case 1073741917:
                                b = 101;
                                break;
                            case 1073741918:
                                b =
                                    102;
                                break;
                            case 1073741919:
                                b = 103;
                                break;
                            case 1073741920:
                                b = 104;
                                break;
                            case 1073741921:
                                b = 105;
                                break;
                            case 1073741922:
                                b = 96;
                                break;
                            case 1073741923:
                                b = 110;
                                break;
                            case 1073741925:
                                b = 302;
                                break;
                            case 1073741928:
                                b = 124;
                                break;
                            case 1073741929:
                                b = 125;
                                break;
                            case 1073741930:
                                b = 126;
                                break;
                            case 1073741982:
                                b = 13;
                                break;
                            case 1073742044:
                                b = 110;
                                break;
                            case 1073742048:
                                b = 17;
                                break;
                            case 1073742049:
                                b = 16;
                                break;
                            case 1073742050:
                                b = 18;
                                break;
                            case 1073742051:
                                b = 15;
                                break;
                            case 1073742052:
                                b = 17;
                                break;
                            case 1073742053:
                                b = 16;
                                break;
                            case 1073742054:
                                b = 18;
                                break;
                            case 1073742055:
                                b = 15
                        }
                        var f = El.__getCharCode(b, bb.get_shiftKey(c));
                        if ("keyUp" == a && (32 == b || 13 == b) && this.__focus instanceof Ja) {
                            var h = T.__cast(this.__focus, Ja);
                            if (h.get_buttonMode() && 1 == h.focusRect) {
                                var r = ba.__pool.get(),
                                    m = ba.__pool.get();
                                m.x = this.__mouseX;
                                m.y = this.__mouseY;
                                h = $a.__create("click", 0, this.__mouseX, this.__mouseY, h.__globalToLocal(m, r), h);
                                this.__dispatchStack(h, d);
                                h.__updateAfterEventFlag && this.__renderAfterEvent();
                                ba.__pool.release(m);
                                ba.__pool.release(r)
                            }
                        }
                        e = new Bj(a, !0, !0, f, b, e, this.__macKeyboard ?
                            bb.get_ctrlKey(c) || bb.get_metaKey(c) : bb.get_ctrlKey(c), bb.get_altKey(c), bb.get_shiftKey(c), bb.get_ctrlKey(c), bb.get_metaKey(c));
                        d.reverse();
                        this.__dispatchStack(e, d);
                        if (e.__preventDefault) "keyDown" == a ? this.window.onKeyDown.cancel() : this.window.onKeyUp.cancel();
                        else if ("keyDown" == a && 9 == b) {
                            d = [];
                            this.__tabTest(d);
                            f = -1;
                            a = null;
                            b = bb.get_shiftKey(c) ? -1 : 1;
                            if (1 < d.length) {
                                cc.sort(d, function (a, b) {
                                    return a.get_tabIndex() - b.get_tabIndex()
                                });
                                if (-1 != d[d.length - 1].get_tabIndex())
                                    for (m = 0; m < d.length;) {
                                        if (-1 < d[m].get_tabIndex()) {
                                            0 <
                                            m && d.splice(0, m);
                                            break
                                        }
                                        ++m
                                    }
                                if (null != this.get_focus()) {
                                    m = this.get_focus();
                                    for (r = d.indexOf(m); -1 == r && null != m;) {
                                        f = m.parent;
                                        if (null != f && f.get_tabChildren()) {
                                            m = f.getChildIndex(m);
                                            if (-1 == m) {
                                                m = f;
                                                continue
                                            }
                                            for (m += b; bb.get_shiftKey(c) ? 0 <= m : m < f.get_numChildren();) {
                                                h = f.getChildAt(m);
                                                if (h instanceof X && (r = T.__cast(h, X), r = d.indexOf(r), -1 != r)) {
                                                    b = 0;
                                                    break
                                                }
                                                m += b
                                            }
                                        } else bb.get_shiftKey(c) && (r = d.indexOf(f), -1 != r && (b = 0));
                                        m = f
                                    }
                                    f = 0 > r ? 0 : r + b
                                } else f = this.__currentTabOrderIndex
                            } else 1 == d.length && (a = d[0], this.get_focus() == a && (a =
                                null));
                            r = 0 <= f && f < d.length;
                            1 == d.length || 0 == d.length && null != this.get_focus() ? f = 0 : 1 < d.length && (0 > f && (f += d.length), f %= d.length, a = d[f], a == this.get_focus() && (f += b, 0 > f && (f += d.length), f %= d.length, a = d[f]));
                            b = null;
                            null != this.get_focus() && (b = new tf("keyFocusChange", !0, !0, a, bb.get_shiftKey(c), 0), d = [], this.get_focus().__getInteractive(d), d.reverse(), this.__dispatchStack(b, d), b.isDefaultPrevented() && this.window.onKeyDown.cancel());
                            null != b && b.isDefaultPrevented() || (this.__currentTabOrderIndex = f, null != a && this.set_focus(a),
                            r && this.window.onKeyDown.cancel())
                        }
                        e.__updateAfterEventFlag && this.__renderAfterEvent()
                    }
                },
                __onLimeCreateWindow: function (a) {
                    if (this.window == a) {
                        var b = this;
                        a.onActivate.add(function () {
                            b.__onLimeWindowActivate(a)
                        });
                        var c = this;
                        a.onClose.add(function () {
                            c.__onLimeWindowClose(a)
                        }, !1, -9E3);
                        var d = this;
                        a.onDeactivate.add(function () {
                            d.__onLimeWindowDeactivate(a)
                        });
                        var e = this;
                        var f = function (b) {
                            e.__onLimeWindowDropFile(a, b)
                        };
                        a.onDropFile.add(f);
                        var h = this;
                        a.onEnter.add(function () {
                            h.__onLimeWindowEnter(a)
                        });
                        var r =
                            this;
                        a.onExpose.add(function () {
                            r.__onLimeWindowExpose(a)
                        });
                        var m = this;
                        a.onFocusIn.add(function () {
                            m.__onLimeWindowFocusIn(a)
                        });
                        var g = this;
                        a.onFocusOut.add(function () {
                            g.__onLimeWindowFocusOut(a)
                        });
                        var n = this;
                        a.onFullscreen.add(function () {
                            n.__onLimeWindowFullscreen(a)
                        });
                        var k = this;
                        f = function (b, c) {
                            k.__onLimeKeyDown(a, b, c)
                        };
                        a.onKeyDown.add(f);
                        var q = this;
                        f = function (b, c) {
                            q.__onLimeKeyUp(a, b, c)
                        };
                        a.onKeyUp.add(f);
                        var l = this;
                        a.onLeave.add(function () {
                            l.__onLimeWindowLeave(a)
                        });
                        var y = this;
                        a.onMinimize.add(function () {
                            y.__onLimeWindowMinimize(a)
                        });
                        var v = this;
                        f = function (b, c, d) {
                            v.__onLimeMouseDown(a, b, c, d)
                        };
                        a.onMouseDown.add(f);
                        var t = this;
                        f = function (b, c) {
                            t.__onLimeMouseMove(a, b, c)
                        };
                        a.onMouseMove.add(f);
                        var B = this;
                        f = function (b, c) {
                            B.__onLimeMouseMoveRelative(a, b, c)
                        };
                        a.onMouseMoveRelative.add(f);
                        var E = this;
                        f = function (b, c, d) {
                            E.__onLimeMouseUp(a, b, c, d)
                        };
                        a.onMouseUp.add(f);
                        var z = this;
                        f = function (b, c, d) {
                            z.__onLimeMouseWheel(a, b, c, d)
                        };
                        a.onMouseWheel.add(f);
                        var x = this;
                        f = function (b, c) {
                            x.__onLimeWindowMove(a, b, c)
                        };
                        a.onMove.add(f);
                        a.onRender.add(p(this, this.__onLimeRender));
                        a.onRenderContextLost.add(p(this, this.__onLimeRenderContextLost));
                        a.onRenderContextRestored.add(p(this, this.__onLimeRenderContextRestored));
                        var A = this;
                        f = function (b, c) {
                            A.__onLimeWindowResize(a, b, c)
                        };
                        a.onResize.add(f);
                        var u = this;
                        a.onRestore.add(function () {
                            u.__onLimeWindowRestore(a)
                        });
                        var N = this;
                        f = function (b, c, d) {
                            N.__onLimeTextEdit(a, b, c, d)
                        };
                        a.onTextEdit.add(f);
                        var U = this;
                        f = function (b) {
                            U.__onLimeTextInput(a, b)
                        };
                        a.onTextInput.add(f);
                        this.__onLimeWindowCreate(a)
                    }
                },
                __onLimeGamepadAxisMove: function (a, b,
                                                   c) {
                    if (this.__uncaughtErrorEvents.__enabled) try {
                        Za.__onGamepadAxisMove(a, b, c)
                    } catch (d) {
                        Ia.lastError = d, a = fa.caught(d).unwrap(), this.__handleError(a)
                    } else Za.__onGamepadAxisMove(a, b, c)
                },
                __onLimeGamepadButtonDown: function (a, b) {
                    if (this.__uncaughtErrorEvents.__enabled) try {
                        Za.__onGamepadButtonDown(a, b)
                    } catch (c) {
                        Ia.lastError = c, a = fa.caught(c).unwrap(), this.__handleError(a)
                    } else Za.__onGamepadButtonDown(a, b)
                },
                __onLimeGamepadButtonUp: function (a, b) {
                    if (this.__uncaughtErrorEvents.__enabled) try {
                        Za.__onGamepadButtonUp(a,
                            b)
                    } catch (c) {
                        Ia.lastError = c, a = fa.caught(c).unwrap(), this.__handleError(a)
                    } else Za.__onGamepadButtonUp(a, b)
                },
                __onLimeGamepadConnect: function (a) {
                    if (this.__uncaughtErrorEvents.__enabled) try {
                        Za.__onGamepadConnect(a)
                    } catch (h) {
                        Ia.lastError = h;
                        var b = fa.caught(h).unwrap();
                        this.__handleError(b)
                    } else Za.__onGamepadConnect(a);
                    var c = this;
                    b = function (b, d) {
                        c.__onLimeGamepadAxisMove(a, b, d)
                    };
                    a.onAxisMove.add(b);
                    var d = this;
                    b = function (b) {
                        d.__onLimeGamepadButtonDown(a, b)
                    };
                    a.onButtonDown.add(b);
                    var e = this;
                    b = function (b) {
                        e.__onLimeGamepadButtonUp(a,
                            b)
                    };
                    a.onButtonUp.add(b);
                    var f = this;
                    a.onDisconnect.add(function () {
                        f.__onLimeGamepadDisconnect(a)
                    })
                },
                __onLimeGamepadDisconnect: function (a) {
                    if (this.__uncaughtErrorEvents.__enabled) try {
                        Za.__onGamepadDisconnect(a)
                    } catch (b) {
                        Ia.lastError = b, a = fa.caught(b).unwrap(), this.__handleError(a)
                    } else Za.__onGamepadDisconnect(a)
                },
                __onLimeKeyDown: function (a, b, c) {
                    null != this.window && this.window == a && this.__onKey("keyDown", b, c)
                },
                __onLimeKeyUp: function (a, b, c) {
                    null != this.window && this.window == a && this.__onKey("keyUp", b, c)
                },
                __onLimeModuleExit: function (a) {
                    null != this.window && (a = new V("deactivate"), this.__broadcastEvent(a))
                },
                __onLimeMouseDown: function (a, b, c, d) {
                    if (null != this.window && this.window == a) {
                        this.__dispatchPendingMouseEvent();
                        switch (d) {
                            case 1:
                                var e = "middleMouseDown";
                                break;
                            case 2:
                                e = "rightMouseDown";
                                break;
                            default:
                                e = "mouseDown"
                        }
                        this.__onMouse(e, b * a.__scale | 0, c * a.__scale | 0, d);
                        this.showDefaultContextMenu || 2 != d || a.onMouseDown.cancel()
                    }
                },
                __onLimeMouseMove: function (a, b, c) {
                    null != this.window && this.window == a && (this.__pendingMouseEvent = !0, this.__pendingMouseX = b * a.__scale | 0, this.__pendingMouseY = c * a.__scale | 0)
                },
                __onLimeMouseMoveRelative: function (a, b, c) {
                },
                __onLimeMouseUp: function (a, b, c, d) {
                    if (null != this.window && this.window == a) {
                        this.__dispatchPendingMouseEvent();
                        switch (d) {
                            case 1:
                                var e = "middleMouseUp";
                                break;
                            case 2:
                                e = "rightMouseUp";
                                break;
                            default:
                                e = "mouseUp"
                        }
                        this.__onMouse(e, b * a.__scale | 0, c * a.__scale | 0, d);
                        this.showDefaultContextMenu || 2 != d || a.onMouseUp.cancel()
                    }
                },
                __onLimeMouseWheel: function (a, b, c, d) {
                    null != this.window && this.window == a && (this.__dispatchPendingMouseEvent(),
                        d == Re.PIXELS ? this.__onMouseWheel(b * a.__scale | 0, c * a.__scale | 0, d) : this.__onMouseWheel(b | 0, c | 0, d))
                },
                __renderAfterEvent: function () {
                    this.__render(this.window.context)
                },
                __render: function (a) {
                    a = !1;
                    var b = null != this.__renderer && (this.__renderDirty || this.__forceRender);
                    if (this.__invalidated && b) {
                        this.__invalidated = !1;
                        var c = new V("render");
                        this.__broadcastEvent(c)
                    }
                    this.__update(!1, !0);
                    if (null != this.__renderer) {
                        if (null != this.context3D) {
                            for (c = this.stage3Ds.iterator(); c.hasNext();) {
                                var d = c.next();
                                this.context3D.__renderStage3D(d)
                            }
                            this.context3D.__present &&
                            (b = !0)
                        }
                        b ? (null == this.context3D && this.__renderer.__clear(), this.__renderer.__render(this)) : null == this.context3D && (a = !0);
                        null != this.context3D && (this.context3D.__present ? (this.__renderer.__cleared || this.__renderer.__clear(), this.context3D.__present = !1, this.context3D.__cleared = !1) : a = !0);
                        this.__renderer.__cleared = !1
                    }
                    return a
                },
                __onLimeRender: function (a) {
                    this.__rendering || (this.__rendering = !0, this.__broadcastEvent(new V("enterFrame")), this.__broadcastEvent(new V("frameConstructed")), this.__broadcastEvent(new V("exitFrame")),
                        this.__renderable = !0, this.__enterFrame(this.__deltaTime), this.__deltaTime = 0, this.__render(a) && this.window.onRender.cancel(), this.__rendering = !1)
                },
                __onLimeRenderContextLost: function () {
                    this.context3D = this.__renderer = null;
                    for (var a = this.stage3Ds.iterator(); a.hasNext();) a.next().__lostContext()
                },
                __onLimeRenderContextRestored: function (a) {
                    this.__createRenderer();
                    for (a = this.stage3Ds.iterator(); a.hasNext();) a.next().__restoreContext()
                },
                __onLimeTextEdit: function (a, b, c, d) {
                },
                __onLimeTextInput: function (a, b) {
                    if (null !=
                        this.window && this.window == a) {
                        var c = [];
                        null == this.__focus ? this.__getInteractive(c) : this.__focus.__getInteractive(c);
                        b = new be("textInput", !0, !0, b);
                        0 < c.length ? (c.reverse(), this.__dispatchStack(b, c)) : this.__dispatchEvent(b);
                        b.isDefaultPrevented() && a.onTextInput.cancel()
                    }
                },
                __onLimeTouchCancel: function (a) {
                    var b = this.__primaryTouch == a;
                    b && (this.__primaryTouch = null);
                    this.__onTouch("touchEnd", a, b)
                },
                __onLimeTouchMove: function (a) {
                    this.__onTouch("touchMove", a, this.__primaryTouch == a)
                },
                __onLimeTouchEnd: function (a) {
                    var b =
                        this.__primaryTouch == a;
                    b && (this.__primaryTouch = null);
                    this.__onTouch("touchEnd", a, b)
                },
                __onLimeTouchStart: function (a) {
                    null == this.__primaryTouch && (this.__primaryTouch = a);
                    this.__onTouch("touchBegin", a, this.__primaryTouch == a)
                },
                __onLimeUpdate: function (a) {
                    this.__deltaTime = a;
                    this.__dispatchPendingMouseEvent()
                },
                __onLimeWindowActivate: function (a) {
                },
                __onLimeWindowClose: function (a) {
                    this.window == a && (this.window = null);
                    this.__primaryTouch = null;
                    a = new V("deactivate");
                    this.__broadcastEvent(a)
                },
                __onLimeWindowCreate: function (a) {
                    null !=
                    this.window && this.window == a && null != a.context && this.__createRenderer()
                },
                __onLimeWindowDeactivate: function (a) {
                },
                __onLimeWindowDropFile: function (a, b) {
                },
                __onLimeWindowEnter: function (a) {
                },
                __onLimeWindowExpose: function (a) {
                    null != this.window && this.window == a && (this.__renderDirty = !0)
                },
                __onLimeWindowFocusIn: function (a) {
                    null != this.window && this.window == a && (this.__renderDirty = !0, a = new V("activate"), this.__broadcastEvent(a), this.set_focus(this.__cacheFocus))
                },
                __onLimeWindowFocusOut: function (a) {
                    null != this.window &&
                    this.window == a && (this.__primaryTouch = null, a = new V("deactivate"), this.__broadcastEvent(a), a = this.get_focus(), this.set_focus(null), this.__cacheFocus = a, $a.__altKey = !1, $a.__commandKey = !1, $a.__ctrlKey = !1, $a.__shiftKey = !1)
                },
                __onLimeWindowFullscreen: function (a) {
                    null != this.window && this.window == a && (this.__resize(), this.__wasFullscreen || (this.__wasFullscreen = !0, 2 == this.__displayState && (this.__displayState = 1), this.__dispatchEvent(new Be("fullScreen", !1, !1, !0, !0))))
                },
                __onLimeWindowLeave: function (a) {
                    null == this.window ||
                    this.window != a || $a.__buttonDown || (this.__dispatchPendingMouseEvent(), a = new V("mouseLeave"), this.__dispatchEvent(a))
                },
                __onLimeWindowMinimize: function (a) {
                },
                __onLimeWindowMove: function (a, b, c) {
                },
                __onLimeWindowResize: function (a, b, c) {
                    null != this.window && this.window == a && (this.__resize(), this.__wasFullscreen && !a.__fullscreen && (this.__wasFullscreen = !1, this.__displayState = 2, this.__dispatchEvent(new Be("fullScreen", !1, !1, !1, !0))))
                },
                __onLimeWindowRestore: function (a) {
                    null != this.window && this.window == a && this.__wasFullscreen &&
                    !a.__fullscreen && (this.__wasFullscreen = !1, this.__displayState = 2, this.__dispatchEvent(new Be("fullScreen", !1, !1, !1, !0)))
                },
                __onMouse: function (a, b, c, d) {
                    if (!(2 < d)) {
                        var e = ba.__pool.get();
                        e.setTo(b, c);
                        b = this.__displayMatrix;
                        c = b.a * b.d - b.b * b.c;
                        if (0 == c) e.x = -b.tx, e.y = -b.ty;
                        else {
                            var f = 1 / c * (b.c * (b.ty - e.y) + b.d * (e.x - b.tx));
                            e.y = 1 / c * (b.a * (e.y - b.ty) + b.b * (b.tx - e.x));
                            e.x = f
                        }
                        this.__mouseX = e.x;
                        this.__mouseY = e.y;
                        b = [];
                        this.__hitTest(this.__mouseX, this.__mouseY, !0, b, !0, this) ? f = b[b.length - 1] : (f = this, b = [this]);
                        null == f && (f =
                            this);
                        var h = null;
                        switch (a) {
                            case "middleMouseDown":
                                this.__mouseDownMiddle = f;
                                break;
                            case "middleMouseUp":
                                this.__mouseDownMiddle == f && (h = "middleClick");
                                this.__mouseDownMiddle = null;
                                break;
                            case "mouseDown":
                                null != this.get_focus() ? this.get_focus() != f && (c = new tf("mouseFocusChange", !0, !0, f, !1, 0), this.get_focus().dispatchEvent(c), c.isDefaultPrevented() || (f.__allowMouseFocus() ? this.set_focus(f) : this.set_focus(null))) : f.__allowMouseFocus() ? this.set_focus(f) : this.set_focus(null);
                                this.__mouseDownLeft = f;
                                $a.__buttonDown = !0;
                                break;
                            case "mouseUp":
                                if (null != this.__mouseDownLeft) {
                                    $a.__buttonDown = !1;
                                    if (this.__mouseDownLeft == f) h = "click";
                                    else {
                                        var r = $a.__create("releaseOutside", 1, this.__mouseX, this.__mouseY, new ba(this.__mouseX, this.__mouseY), this);
                                        this.__mouseDownLeft.dispatchEvent(r)
                                    }
                                    this.__mouseDownLeft = null
                                }
                                break;
                            case "rightMouseDown":
                                this.__mouseDownRight = f;
                                break;
                            case "rightMouseUp":
                                this.__mouseDownRight == f && (h = "rightClick"), this.__mouseDownRight = null
                        }
                        c = ba.__pool.get();
                        r = $a.__create(a, d, this.__mouseX, this.__mouseY, f.__globalToLocal(e,
                            c), f);
                        this.__dispatchStack(r, b);
                        r.__updateAfterEventFlag && this.__renderAfterEvent();
                        null != h && (r = $a.__create(h, d, this.__mouseX, this.__mouseY, f.__globalToLocal(e, c), f), this.__dispatchStack(r, b), r.__updateAfterEventFlag && this.__renderAfterEvent(), "mouseUp" == a && f.doubleClickEnabled && (a = Na.getTimer(), 500 > a - this.__lastClickTime && f == this.__lastClickTarget ? (r = $a.__create("doubleClick", d, this.__mouseX, this.__mouseY, f.__globalToLocal(e, c), f), this.__dispatchStack(r, b), r.__updateAfterEventFlag && this.__renderAfterEvent(),
                            this.__lastClickTime = 0, this.__lastClickTarget = null) : (this.__lastClickTarget = f, this.__lastClickTime = a)));
                        if ("auto" == Vk.__cursor && !Vk.__hidden) {
                            r = null;
                            if (null != this.__mouseDownLeft) r = this.__mouseDownLeft.__getCursor();
                            else
                                for (a = 0; a < b.length;)
                                    if (r = b[a], ++a, r = r.__getCursor(), null != r && null != this.window) {
                                        this.window.set_cursor(bm.toLimeCursor(r));
                                        break
                                    }
                            null == r && null != this.window && this.window.set_cursor(zb.ARROW)
                        }
                        f != this.__mouseOverTarget && null != this.__mouseOverTarget && (r = $a.__create("mouseOut", d, this.__mouseX,
                            this.__mouseY, this.__mouseOverTarget.__globalToLocal(e, c), this.__mouseOverTarget), this.__dispatchStack(r, this.__mouseOutStack), r.__updateAfterEventFlag && this.__renderAfterEvent());
                        for (a = 0; a < this.__rollOutStack.length;) h = this.__rollOutStack[a], -1 == b.indexOf(h) ? (ja.remove(this.__rollOutStack, h), r = $a.__create("rollOut", d, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(e, c), h), r.bubbles = !1, this.__dispatchTarget(h, r), r.__updateAfterEventFlag && this.__renderAfterEvent()) : ++a;
                        for (a = 0; a <
                        b.length;) h = b[a], ++a, -1 == this.__rollOutStack.indexOf(h) && null != this.__mouseOverTarget && (h.hasEventListener("rollOver") && (r = $a.__create("rollOver", d, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(e, c), h), r.bubbles = !1, this.__dispatchTarget(h, r), r.__updateAfterEventFlag && this.__renderAfterEvent()), (h.hasEventListener("rollOut") || h.hasEventListener("rollOver")) && this.__rollOutStack.push(h));
                        f != this.__mouseOverTarget && (null != f && (r = $a.__create("mouseOver", d, this.__mouseX, this.__mouseY,
                            f.__globalToLocal(e, c), f), this.__dispatchStack(r, b), r.__updateAfterEventFlag && this.__renderAfterEvent()), this.__mouseOverTarget = f, this.__mouseOutStack = b);
                        null != this.__dragObject && (this.__drag(e), d = null, this.__mouseOverTarget == this.__dragObject ? (f = this.__dragObject.mouseEnabled, a = this.__dragObject.mouseChildren, this.__dragObject.mouseEnabled = !1, this.__dragObject.mouseChildren = !1, b = [], this.__hitTest(this.__mouseX, this.__mouseY, !0, b, !0, this) && (d = b[b.length - 1]), this.__dragObject.mouseEnabled = f, this.__dragObject.mouseChildren =
                            a) : this.__mouseOverTarget != this && (d = this.__mouseOverTarget), this.__dragObject.dropTarget = d);
                        ba.__pool.release(e);
                        ba.__pool.release(c)
                    }
                },
                __onMouseWheel: function (a, b, c) {
                    var d = this.__mouseX,
                        e = this.__mouseY;
                    a = [];
                    if (this.__hitTest(this.__mouseX, this.__mouseY, !0, a, !0, this)) var f = a[a.length - 1];
                    else f = this, a = [this];
                    null == f && (f = this);
                    c = ba.__pool.get();
                    c.setTo(d, e);
                    d = this.__displayMatrix;
                    e = d.a * d.d - d.b * d.c;
                    if (0 == e) c.x = -d.tx, c.y = -d.ty;
                    else {
                        var h = 1 / e * (d.c * (d.ty - c.y) + d.d * (c.x - d.tx));
                        c.y = 1 / e * (d.a * (c.y - d.ty) + d.b *
                            (d.tx - c.x));
                        c.x = h
                    }
                    b |= 0;
                    b = $a.__create("mouseWheel", 0, this.__mouseX, this.__mouseY, f.__globalToLocal(c, c), f, b);
                    b.cancelable = !0;
                    this.__dispatchStack(b, a);
                    b.isDefaultPrevented() && this.window.onMouseWheel.cancel();
                    b.__updateAfterEventFlag && this.__renderAfterEvent();
                    ba.__pool.release(c)
                },
                __onTouch: function (a, b, c) {
                    var d = ba.__pool.get();
                    d.setTo(Math.round(b.x * this.window.__width * this.window.__scale), Math.round(b.y * this.window.__height * this.window.__scale));
                    var e = this.__displayMatrix,
                        f = e.a * e.d - e.b * e.c;
                    if (0 ==
                        f) d.x = -e.tx, d.y = -e.ty;
                    else {
                        var h = 1 / f * (e.c * (e.ty - d.y) + e.d * (d.x - e.tx));
                        d.y = 1 / f * (e.a * (d.y - e.ty) + e.b * (e.tx - d.x));
                        d.x = h
                    }
                    e = d.x;
                    f = d.y;
                    h = [];
                    if (this.__hitTest(e, f, !1, h, !0, this)) var r = h[h.length - 1];
                    else r = this, h = [this];
                    null == r && (r = this);
                    var m = b.id;
                    if (this.__touchData.h.hasOwnProperty(m)) var g = this.__touchData.h[m];
                    else g = uf.__pool.get(), g.reset(), g.touch = b, this.__touchData.h[m] = g;
                    var n = null,
                        k = !1;
                    switch (a) {
                        case "touchBegin":
                            g.touchDownTarget = r;
                            break;
                        case "touchEnd":
                            g.touchDownTarget == r && (n = "touchTap"), g.touchDownTarget =
                                null, k = !0
                    }
                    var q = ba.__pool.get();
                    a = $c.__create(a, null, e, f, r.__globalToLocal(d, q), r);
                    a.touchPointID = m;
                    a.isPrimaryTouchPoint = c;
                    a.pressure = b.pressure;
                    this.__dispatchStack(a, h);
                    a.__updateAfterEventFlag && this.__renderAfterEvent();
                    null != n && (a = $c.__create(n, null, e, f, r.__globalToLocal(d, q), r), a.touchPointID = m, a.isPrimaryTouchPoint = c, a.pressure = b.pressure, this.__dispatchStack(a, h), a.__updateAfterEventFlag && this.__renderAfterEvent());
                    n = g.touchOverTarget;
                    r != n && null != n && (a = $c.__create("touchOut", null, e, f, n.__globalToLocal(d,
                        q), n), a.touchPointID = m, a.isPrimaryTouchPoint = c, a.pressure = b.pressure, this.__dispatchTarget(n, a), a.__updateAfterEventFlag && this.__renderAfterEvent());
                    for (var l = g.rollOutStack, p, y = 0; y < l.length;) p = l[y], -1 == h.indexOf(p) ? (ja.remove(l, p), a = $c.__create("touchRollOut", null, e, f, n.__globalToLocal(d, q), n), a.touchPointID = m, a.isPrimaryTouchPoint = c, a.bubbles = !1, a.pressure = b.pressure, this.__dispatchTarget(p, a), a.__updateAfterEventFlag && this.__renderAfterEvent()) : ++y;
                    for (y = 0; y < h.length;) p = h[y], ++y, -1 == l.indexOf(p) &&
                    (p.hasEventListener("touchRollOver") && (a = $c.__create("touchRollOver", null, e, f, n.__globalToLocal(d, q), p), a.touchPointID = m, a.isPrimaryTouchPoint = c, a.bubbles = !1, a.pressure = b.pressure, this.__dispatchTarget(p, a), a.__updateAfterEventFlag && this.__renderAfterEvent()), p.hasEventListener("touchRollOut") && l.push(p));
                    r != n && (null != r && (a = $c.__create("touchOver", null, e, f, r.__globalToLocal(d, q), r), a.touchPointID = m, a.isPrimaryTouchPoint = c, a.bubbles = !0, a.pressure = b.pressure, this.__dispatchTarget(r, a), a.__updateAfterEventFlag &&
                    this.__renderAfterEvent()), g.touchOverTarget = r);
                    ba.__pool.release(d);
                    ba.__pool.release(q);
                    k && (this.__touchData.remove(m), g.reset(), uf.__pool.release(g))
                },
                __registerLimeModule: function (a) {
                    a.onCreateWindow.add(p(this, this.__onLimeCreateWindow));
                    a.onUpdate.add(p(this, this.__onLimeUpdate));
                    a.onExit.add(p(this, this.__onLimeModuleExit), !1, 0);
                    for (a = Mb.devices.iterator(); a.hasNext();) {
                        var b = a.next();
                        this.__onLimeGamepadConnect(b)
                    }
                    Mb.onConnect.add(p(this, this.__onLimeGamepadConnect));
                    Ab.onStart.add(p(this,
                        this.__onLimeTouchStart));
                    Ab.onMove.add(p(this, this.__onLimeTouchMove));
                    Ab.onEnd.add(p(this, this.__onLimeTouchEnd));
                    Ab.onCancel.add(p(this, this.__onLimeTouchCancel))
                },
                __resize: function () {
                    var a = this.stageWidth,
                        b = this.stageHeight,
                        c = this.window.__width * this.window.__scale | 0,
                        d = this.window.__height * this.window.__scale | 0;
                    this.__displayMatrix.identity();
                    if (null != this.get_fullScreenSourceRect() && this.window.__fullscreen) {
                        this.stageWidth = this.get_fullScreenSourceRect().width | 0;
                        this.stageHeight = this.get_fullScreenSourceRect().height |
                            0;
                        var e = c / this.stageWidth,
                            f = d / this.stageHeight;
                        this.__displayMatrix.translate(-this.get_fullScreenSourceRect().x, -this.get_fullScreenSourceRect().y);
                        this.__displayMatrix.scale(e, f);
                        this.__displayRect.setTo(this.get_fullScreenSourceRect().get_left(), this.get_fullScreenSourceRect().get_right(), this.get_fullScreenSourceRect().get_top(), this.get_fullScreenSourceRect().get_bottom())
                    } else if (0 == this.__logicalWidth || 0 == this.__logicalHeight || 2 == this.get_scaleMode() || 0 == c || 0 == d) this.stageWidth = Math.round(c /
                        this.window.__scale), this.stageHeight = Math.round(d / this.window.__scale), this.__displayMatrix.scale(this.window.__scale, this.window.__scale), this.__displayRect.setTo(0, 0, this.stageWidth, this.stageHeight);
                    else switch (this.stageWidth = this.__logicalWidth, this.stageHeight = this.__logicalHeight, this.get_scaleMode()) {
                            case 0:
                                e = c / this.stageWidth;
                                f = d / this.stageHeight;
                                this.__displayMatrix.scale(e, f);
                                this.__displayRect.setTo(0, 0, this.stageWidth, this.stageHeight);
                                break;
                            case 1:
                                e = c / this.stageWidth;
                                f = d / this.stageHeight;
                                e = Math.max(e, f);
                                f = this.stageWidth * e;
                                var h = this.stageHeight * e;
                                f = this.stageWidth - Math.round((f - c) / e);
                                h = this.stageHeight - Math.round((h - d) / e);
                                var r = Math.round((this.stageWidth - f) / 2),
                                    m = Math.round((this.stageHeight - h) / 2);
                                this.__displayMatrix.translate(-r, -m);
                                this.__displayMatrix.scale(e, e);
                                this.__displayRect.setTo(r, m, f, h);
                                break;
                            default:
                                e = c / this.stageWidth, f = d / this.stageHeight, e = Math.min(e, f), f = this.stageWidth * e, h = this.stageHeight * e, f = this.stageWidth - Math.round((f - c) / e), h = this.stageHeight - Math.round((h -
                                    d) / e), r = Math.round((this.stageWidth - f) / 2), m = Math.round((this.stageHeight - h) / 2), this.__displayMatrix.translate(-r, -m), this.__displayMatrix.scale(e, e), this.__displayRect.setTo(r, m, f, h)
                        }
                    null != this.context3D && this.context3D.configureBackBuffer(this.stageWidth, this.stageHeight, 0, !0, !0, !0);
                    for (e = this.stage3Ds.iterator(); e.hasNext();) e.next().__resize(c, d);
                    null != this.__renderer && this.__renderer.__resize(c, d);
                    this.__renderDirty = !0;
                    if (this.stageWidth != a || this.stageHeight != b) this.__setTransformDirty(), a = new V("resize"),
                        this.__dispatchEvent(a)
                },
                __setLogicalSize: function (a, b) {
                    this.__logicalWidth = a;
                    this.__logicalHeight = b;
                    this.__resize()
                },
                __unregisterLimeModule: function (a) {
                    a.onCreateWindow.remove(p(this, this.__onLimeCreateWindow));
                    a.onUpdate.remove(p(this, this.__onLimeUpdate));
                    a.onExit.remove(p(this, this.__onLimeModuleExit));
                    Mb.onConnect.remove(p(this, this.__onLimeGamepadConnect));
                    Ab.onStart.remove(p(this, this.__onLimeTouchStart));
                    Ab.onMove.remove(p(this, this.__onLimeTouchMove));
                    Ab.onEnd.remove(p(this, this.__onLimeTouchEnd));
                    Ab.onCancel.remove(p(this, this.__onLimeTouchCancel))
                },
                __update: function (a, b) {
                    a ? this.__transformDirty && (oa.prototype.__update.call(this, !0, b), b && (this.__transformDirty = !1)) : this.__transformDirty || this.__renderDirty ? (oa.prototype.__update.call(this, !1, b), b && da.__supportDOM && (this.__wasDirty = !0)) : !this.__renderDirty && this.__wasDirty && (oa.prototype.__update.call(this, !1, b), b && (this.__wasDirty = !1))
                },
                set_color: function (a) {
                    null == a ? (this.__transparent = !0, a = 0) : this.__transparent = !1;
                    this.__color != a && (this.__colorSplit[0] =
                        ((a & 16711680) >>> 16) / 255, this.__colorSplit[1] = ((a & 65280) >>> 8) / 255, this.__colorSplit[2] = (a & 255) / 255, this.__colorString = "#" + R.hex(a & 16777215, 6), this.__renderDirty = !0, this.__color = -16777216 | a & 16777215);
                    return a
                },
                get_focus: function () {
                    return this.__focus
                },
                get_displayState: function () {
                    return this.__displayState
                },
                set_displayState: function (a) {
                    null != this.window && (2 == a ? this.window.__fullscreen && this.window.set_fullscreen(!1) : this.window.__fullscreen || this.window.set_fullscreen(!0));
                    return this.__displayState = a
                },
                set_focus: function (a) {
                    if (a != this.__focus) {
                        var b = this.__focus;
                        this.__cacheFocus = this.__focus = a;
                        if (null != b) {
                            var c = new tf("focusOut", !0, !1, a, !1, 0),
                                d = [];
                            b.__getInteractive(d);
                            d.reverse();
                            this.__dispatchStack(c, d)
                        }
                        null != a && (c = new tf("focusIn", !0, !1, b, !1, 0),
                            d = [], a.__getInteractive(d), d.reverse(), this.__dispatchStack(c, d))
                    }
                    return a
                },
                get_frameRate: function () {
                    return null != this.window ? this.window.__backend.getFrameRate() : 0
                },
                get_fullScreenSourceRect: function () {
                    return null == this.__fullScreenSourceRect ? null : this.__fullScreenSourceRect.clone()
                },
                set_height: function (a) {
                    return this.get_height()
                },
                get_mouseX: function () {
                    return this.__mouseX
                },
                get_mouseY: function () {
                    return this.__mouseY
                },
                get_quality: function () {
                    return this.__quality
                },
                set_rotation: function (a) {
                    return 0
                },
                get_scaleMode: function () {
                    return this.__scaleMode
                },
                set_scaleMode: function (a) {
                    a != this.__scaleMode && (this.__scaleMode = a, this.__resize());
                    return a
                },
                set_scaleX: function (a) {
                    return 0
                },
                set_scaleY: function (a) {
                    return 0
                },
                get_tabEnabled: function () {
                    return !1
                },
                get_tabIndex: function () {
                    return -1
                },
                set_transform: function (a) {
                    return this.get_transform()
                },
                set_width: function (a) {
                    return this.get_width()
                },
                set_x: function (a) {
                    return 0
                },
                set_y: function (a) {
                    return 0
                },
                __class__: fg,
                __properties__: l(oa.prototype.__properties__, {
                    set_color: "set_color",
                    set_scaleMode: "set_scaleMode",
                    get_scaleMode: "get_scaleMode",
                    get_quality: "get_quality",
                    get_fullScreenSourceRect: "get_fullScreenSourceRect",
                    get_frameRate: "get_frameRate",
                    set_focus: "set_focus",
                    get_focus: "get_focus"
                })
            });
            var sf = function (a) {
                O.call(this);
                this.__stage = a;
                this.__height = 0;
                this.__projectionTransform = new xb;
                this.__renderTransform = new xb;
                this.__y = this.__x = this.__width = 0;
                this.visible = !0;
                0 < a.stageWidth && 0 < a.stageHeight && this.__resize(a.stageWidth, a.stageHeight)
            };
            g["openfl.display.Stage3D"] = sf;
            sf.__name__ =
                "openfl.display.Stage3D";
            sf.__super__ = O;
            sf.prototype = l(O.prototype, {
                requestContext3D: function (a, b) {
                    this.__contextLost ? this.__contextRequested = !0 : null != this.context3D ? (this.__contextRequested = !0, se.delay(p(this, this.__dispatchCreate), 1)) : this.__contextRequested || (this.__contextRequested = !0, se.delay(p(this, this.__createContext), 1))
                },
                __createContext: function () {
                    var a = this.__stage,
                        b = a.__renderer;
                    if ("cairo" == b.__type || "canvas" == b.__type) this.__dispatchError();
                    else if ("opengl" == b.__type) this.context3D = a.context3D,
                        this.__dispatchCreate();
                    else if ("dom" == b.__type)
                        if (null == a.context3D) {
                            this.__canvas = window.document.createElement("canvas");
                            this.__canvas.width = a.stageWidth;
                            this.__canvas.height = a.stageHeight;
                            var c = a.window.context.attributes,
                                d = Object.prototype.hasOwnProperty.call(c, "background") && null == c.background,
                                e = Object.prototype.hasOwnProperty.call(c, "colorDepth") ? c.colorDepth : 32;
                            c = Object.prototype.hasOwnProperty.call(c, "antialiasing") && 0 < c.antialiasing;
                            this.__webgl = vl.getContextWebGL(this.__canvas, {
                                alpha: d ||
                                    16 < e,
                                antialias: c,
                                depth: !0,
                                premultipliedAlpha: !0,
                                stencil: !0,
                                preserveDrawingBuffer: !1
                            });
                            null != this.__webgl && (null == te.context && (te.context = this.__webgl, te.type = "webgl", te.version = 1), a.context3D = new Sa(a), a.context3D.configureBackBuffer(a.window.__width, a.window.__height, 0, !0, !0, !0), a.context3D.present(), b.element.appendChild(this.__canvas), this.__style = this.__canvas.style, this.__style.setProperty("position", "absolute", null), this.__style.setProperty("top", "0", null), this.__style.setProperty("left", "0",
                                null), this.__style.setProperty(b.__transformOriginProperty, "0 0 0", null), this.__style.setProperty("z-index", "-1", null));
                            null != a.context3D && (this.context3D = a.context3D);
                            this.__dispatchCreate()
                        } else this.__dispatchError()
                },
                __dispatchError: function () {
                    this.__contextRequested = !1;
                    this.dispatchEvent(new nd("error", !1, !1, "Context3D not available"))
                },
                __dispatchCreate: function () {
                    this.__contextRequested && (this.__contextRequested = !1, this.dispatchEvent(new V("context3DCreate")))
                },
                __lostContext: function () {
                    this.__contextLost = !0;
                    null != this.context3D && (this.context3D.__dispose(), this.__contextRequested = !0)
                },
                __resize: function (a, b) {
                    if (a != this.__width || b != this.__height) null != this.__canvas && (this.__canvas.width = a, this.__canvas.height = b), this.__projectionTransform.copyRawDataFrom(D.toFloatVector(null, null, null, [2 / (0 < a ? a : 1), 0, 0, 0, 0, -2 / (0 < b ? b : 1), 0, 0, 0, 0, -.001, 0, -1, 1, 0, 1])), this.__renderTransform.identity(), this.__renderTransform.appendTranslation(this.__x, this.__y, 0), this.__renderTransform.append(this.__projectionTransform), this.__width =
                        a, this.__height = b
                },
                __restoreContext: function () {
                    this.__contextLost = !1;
                    this.__createContext()
                },
                get_x: function () {
                    return this.__x
                },
                set_x: function (a) {
                    if (this.__x == a) return a;
                    this.__x = a;
                    this.__renderTransform.identity();
                    this.__renderTransform.appendTranslation(this.__x, this.__y, 0);
                    this.__renderTransform.append(this.__projectionTransform);
                    return a
                },
                get_y: function () {
                    return this.__y
                },
                set_y: function (a) {
                    if (this.__y == a) return a;
                    this.__y = a;
                    this.__renderTransform.identity();
                    this.__renderTransform.appendTranslation(this.__x,
                        this.__y, 0);
                    this.__renderTransform.append(this.__projectionTransform);
                    return a
                },
                __class__: sf,
                __properties__: {
                    set_y: "set_y",
                    get_y: "get_y",
                    set_x: "set_x",
                    get_x: "get_x"
                }
            });
            var Zg = function (a, b, c, d, e, f, h, r) {
                null == r && (r = 0);
                null == h && (h = 0);
                null == f && (f = 0);
                null == e && (e = 1);
                null == d && (d = 1);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 0);
                this.__id = a;
                this.__matrix = new la;
                0 != b && this.set_x(b);
                0 != c && this.set_y(c);
                1 != d && this.set_scaleX(d);
                1 != e && this.set_scaleY(e);
                0 != f && this.set_rotation(f);
                this.__dirty = !0;
                this.__length =
                    0;
                this.__originX = h;
                this.__originY = r;
                this.__alpha = 1;
                this.__blendMode = null;
                this.__visible = !0
            };
            g["openfl.display.Tile"] = Zg;
            Zg.__name__ = "openfl.display.Tile";
            Zg.prototype = {
                getBounds: function (a) {
                    var b = new ha;
                    this.__findTileRect(b);
                    var c = la.__pool.get();
                    if (null != a && a != this) {
                        c.copyFrom(this.__getWorldTransform());
                        var d = la.__pool.get();
                        d.copyFrom(a.__getWorldTransform());
                        d.invert();
                        c.concat(d);
                        la.__pool.release(d)
                    } else c.identity();
                    this.__getBounds(b, c);
                    la.__pool.release(c);
                    return b
                },
                __getBounds: function (a,
                                       b) {
                    a.__transform(a, b)
                },
                __findTileRect: function (a) {
                    if (null == this.get_tileset())
                        if (null != this.parent) {
                            var b = this.parent.__findTileset();
                            null == b ? a.setTo(0, 0, 0, 0) : (b = b.getRect(this.get_id()), null == b ? a.setTo(0, 0, 0, 0) : a.copyFrom(b))
                        } else a.setTo(0, 0, 0, 0);
                    else a.copyFrom(this.get_tileset().getRect(this.get_id()));
                    a.x = 0;
                    a.y = 0
                },
                __findTileset: function () {
                    return null != this.get_tileset() ? this.get_tileset() : this.parent instanceof $g ? this.parent.get_tileset() : null == this.parent ? null : this.parent.__findTileset()
                },
                __getWorldTransform: function () {
                    var a = this.get_matrix().clone();
                    null != this.parent && a.concat(this.parent.__getWorldTransform());
                    return a
                },
                __setRenderDirty: function () {
                    this.__dirty || (this.__dirty = !0, null != this.parent && this.parent.__setRenderDirty())
                },
                get_alpha: function () {
                    return this.__alpha
                },
                set_alpha: function (a) {
                    a != this.__alpha && (this.__alpha = a, this.__setRenderDirty());
                    return a
                },
                get_colorTransform: function () {
                    return this.__colorTransform
                },
                get_height: function () {
                    var a = ha.__pool.get();
                    this.__findTileRect(a);
                    this.__getBounds(a, this.get_matrix());
                    var b = a.height;
                    ha.__pool.release(a);
                    return b
                },
                set_height: function (a) {
                    var b = ha.__pool.get();
                    this.__findTileRect(b);
                    0 != b.height && this.set_scaleY(a / b.height);
                    ha.__pool.release(b);
                    return a
                },
                get_id: function () {
                    return this.__id
                },
                get_matrix: function () {
                    return this.__matrix
                },
                get_originX: function () {
                    return this.__originX
                },
                set_originX: function (a) {
                    a != this.__originX && (this.__originX = a, this.__setRenderDirty());
                    return a
                },
                get_originY: function () {
                    return this.__originY
                },
                set_originY: function (a) {
                    a !=
                    this.__originY && (this.__originY = a, this.__setRenderDirty());
                    return a
                },
                get_rotation: function () {
                    if (null == this.__rotation)
                        if (0 == this.__matrix.b && 0 == this.__matrix.c) this.__rotationSine = this.__rotation = 0, this.__rotationCosine = 1;
                        else {
                            var a = Math.atan2(this.__matrix.d, this.__matrix.c) - Math.PI / 2;
                            this.__rotation = 180 / Math.PI * a;
                            this.__rotationSine = Math.sin(a);
                            this.__rotationCosine = Math.cos(a)
                        }
                    return this.__rotation
                },
                set_rotation: function (a) {
                    if (a != this.__rotation) {
                        this.__rotation = a;
                        var b = Math.PI / 180 * a;
                        this.__rotationSine =
                            Math.sin(b);
                        this.__rotationCosine = Math.cos(b);
                        b = this.get_scaleX();
                        var c = this.get_scaleY();
                        this.__matrix.a = this.__rotationCosine * b;
                        this.__matrix.b = this.__rotationSine * b;
                        this.__matrix.c = -this.__rotationSine * c;
                        this.__matrix.d = this.__rotationCosine * c;
                        this.__setRenderDirty()
                    }
                    return a
                },
                get_scaleX: function () {
                    null == this.__scaleX && (0 == this.get_matrix().b ? this.__scaleX = this.__matrix.a : this.__scaleX = Math.sqrt(this.__matrix.a * this.__matrix.a + this.__matrix.b * this.__matrix.b));
                    return this.__scaleX
                },
                set_scaleX: function (a) {
                    if (a !=
                        this.__scaleX) {
                        this.__scaleX = a;
                        if (0 == this.__matrix.b) this.__matrix.a = a;
                        else {
                            this.get_rotation();
                            var b = this.__rotationSine * a;
                            this.__matrix.a = this.__rotationCosine * a;
                            this.__matrix.b = b
                        }
                        this.__setRenderDirty()
                    }
                    return a
                },
                get_scaleY: function () {
                    null == this.__scaleY && (this.__scaleY = 0 == this.__matrix.c ? this.get_matrix().d : Math.sqrt(this.__matrix.c * this.__matrix.c + this.__matrix.d * this.__matrix.d));
                    return this.__scaleY
                },
                set_scaleY: function (a) {
                    if (a != this.__scaleY) {
                        this.__scaleY = a;
                        if (0 == this.__matrix.c) this.__matrix.d =
                            a;
                        else {
                            this.get_rotation();
                            var b = this.__rotationCosine * a;
                            this.__matrix.c = -this.__rotationSine * a;
                            this.__matrix.d = b
                        }
                        this.__setRenderDirty()
                    }
                    return a
                },
                get_shader: function () {
                    return this.__shader
                },
                get_tileset: function () {
                    return this.__tileset
                },
                set_tileset: function (a) {
                    a != this.__tileset && (this.__tileset = a, this.__setRenderDirty());
                    return a
                },
                get_visible: function () {
                    return this.__visible
                },
                get_width: function () {
                    var a = ha.__pool.get();
                    this.__findTileRect(a);
                    this.__getBounds(a, this.get_matrix());
                    var b = a.width;
                    ha.__pool.release(a);
                    return b
                },
                set_width: function (a) {
                    var b = ha.__pool.get();
                    this.__findTileRect(b);
                    0 != b.width && this.set_scaleX(a / b.width);
                    ha.__pool.release(b);
                    return a
                },
                get_x: function () {
                    return this.__matrix.tx
                },
                set_x: function (a) {
                    a != this.__matrix.tx && (this.__matrix.tx = a, this.__setRenderDirty());
                    return a
                },
                get_y: function () {
                    return this.__matrix.ty
                },
                set_y: function (a) {
                    a != this.__matrix.ty && (this.__matrix.ty = a, this.__setRenderDirty());
                    return a
                },
                __class__: Zg,
                __properties__: {
                    set_y: "set_y",
                    get_y: "get_y",
                    set_x: "set_x",
                    get_x: "get_x",
                    set_width: "set_width",
                    get_width: "get_width",
                    get_visible: "get_visible",
                    set_tileset: "set_tileset",
                    get_tileset: "get_tileset",
                    get_shader: "get_shader",
                    set_scaleY: "set_scaleY",
                    get_scaleY: "get_scaleY",
                    set_scaleX: "set_scaleX",
                    get_scaleX: "get_scaleX",
                    set_rotation: "set_rotation",
                    get_rotation: "get_rotation",
                    set_originY: "set_originY",
                    get_originY: "get_originY",
                    set_originX: "set_originX",
                    get_originX: "get_originX",
                    get_matrix: "get_matrix",
                    get_id: "get_id",
                    set_height: "set_height",
                    get_height: "get_height",
                    get_colorTransform: "get_colorTransform",
                    set_alpha: "set_alpha",
                    get_alpha: "get_alpha"
                }
            };
            var ah = function (a, b, c, d, e, f, h) {
                null == h && (h = 0);
                null == f && (f = 0);
                null == e && (e = 0);
                null == d && (d = 1);
                null == c && (c = 1);
                null == b && (b = 0);
                null == a && (a = 0);
                Zg.call(this, -1, a, b, c, d, e, f, h);
                this.__tiles = [];
                this.__length = 0
            };
            g["openfl.display.TileContainer"] = ah;
            ah.__name__ = "openfl.display.TileContainer";
            ah.__interfaces__ = [Tk];
            ah.__super__ = Zg;
            ah.prototype = l(Zg.prototype, {
                getBounds: function (a) {
                    for (var b = new ha, c, d = 0, e = this.__tiles; d < e.length;) c = e[d], ++d, c = c.getBounds(a), b.__expand(c.x,
                        c.y, c.width, c.height);
                    return b
                },
                get_height: function () {
                    for (var a = ha.__pool.get(), b, c = 0, d = this.__tiles; c < d.length;) b = d[c], ++c, b = b.getBounds(this), a.__expand(b.x, b.y, b.width, b.height);
                    this.__getBounds(a, this.get_matrix());
                    c = a.height;
                    ha.__pool.release(a);
                    return c
                },
                set_height: function (a) {
                    for (var b = ha.__pool.get(), c, d = 0, e = this.__tiles; d < e.length;) c = e[d], ++d, c = c.getBounds(this), b.__expand(c.x, c.y, c.width, c.height);
                    0 != b.height && this.set_scaleY(a / b.height);
                    ha.__pool.release(b);
                    return a
                },
                get_width: function () {
                    for (var a =
                        ha.__pool.get(), b, c = 0, d = this.__tiles; c < d.length;) b = d[c], ++c, b = b.getBounds(this), a.__expand(b.x, b.y, b.width, b.height);
                    this.__getBounds(a, this.get_matrix());
                    c = a.width;
                    ha.__pool.release(a);
                    return c
                },
                set_width: function (a) {
                    for (var b = ha.__pool.get(), c, d = 0, e = this.__tiles; d < e.length;) c = e[d], ++d, c = c.getBounds(this), b.__expand(c.x, c.y, c.width, c.height);
                    0 != b.width && this.set_scaleX(a / b.width);
                    ha.__pool.release(b);
                    return a
                },
                __class__: ah
            });
            var $g = function (a, b, c, d) {
                null == d && (d = !0);
                da.call(this);
                this.__drawableType =
                    9;
                this.__tileset = c;
                this.smoothing = d;
                this.tileColorTransformEnabled = this.tileBlendModeEnabled = this.tileAlphaEnabled = !0;
                this.__group = new ah;
                this.__group.set_tileset(c);
                this.__width = a;
                this.__height = b
            };
            g["openfl.display.Tilemap"] = $g;
            $g.__name__ = "openfl.display.Tilemap";
            $g.__interfaces__ = [Tk];
            $g.__super__ = da;
            $g.prototype = l(da.prototype, {
                __enterFrame: function (a) {
                    this.__group.__dirty && !this.__renderDirty && (this.__renderDirty = !0, this.__setParentRenderDirty())
                },
                __getBounds: function (a, b) {
                    var c = ha.__pool.get();
                    c.setTo(0, 0, this.__width, this.__height);
                    c.__transform(c, b);
                    a.__expand(c.x, c.y, c.width, c.height);
                    ha.__pool.release(c)
                },
                __hitTest: function (a, b, c, d, e, f) {
                    if (!f.get_visible() || this.__isMask || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b)) return !1;
                    this.__getRenderTransform();
                    var h = this.__renderTransform,
                        r = h.a * h.d - h.b * h.c;
                    c = 0 == r ? -h.tx : 1 / r * (h.c * (h.ty - b) + h.d * (a - h.tx));
                    h = this.__renderTransform;
                    r = h.a * h.d - h.b * h.c;
                    a = 0 == r ? -h.ty : 1 / r * (h.a * (b - h.ty) + h.b * (h.tx - a));
                    return 0 < c && 0 < a && c <= this.__width && a <= this.__height ?
                        (null == d || e || d.push(f), !0) : !1
                },
                get_height: function () {
                    return this.__height * Math.abs(this.get_scaleY())
                },
                set_height: function (a) {
                    this.__height = a | 0;
                    return this.__height * Math.abs(this.get_scaleY())
                },
                get_width: function () {
                    return this.__width * Math.abs(this.__scaleX)
                },
                set_width: function (a) {
                    this.__width = a | 0;
                    return this.__width * Math.abs(this.__scaleX)
                },
                __class__: $g
            });
            var Fl = function (a, b) {
                this.__bitmapData = a;
                this.rectData = D.toFloatVector(null);
                this.__data = [];
                if (null != b)
                    for (a = 0; a < b.length;) {
                        var c = b[a];
                        ++a;
                        this.addRect(c)
                    }
            };
            g["openfl.display.Tileset"] = Fl;
            Fl.__name__ = "openfl.display.Tileset";
            Fl.prototype = {
                addRect: function (a) {
                    if (null == a) return -1;
                    this.rectData.push(a.x);
                    this.rectData.push(a.y);
                    this.rectData.push(a.width);
                    this.rectData.push(a.height);
                    a = new Cj(a);
                    a.__update(this.__bitmapData);
                    this.__data.push(a);
                    return this.__data.length - 1
                },
                getRect: function (a) {
                    return a < this.__data.length && 0 <= a ? new ha(this.__data[a].x, this.__data[a].y, this.__data[a].width, this.__data[a].height) : null
                },
                __class__: Fl
            };
            var Cj = function (a) {
                null !=
                a && (this.x = a.x | 0, this.y = a.y | 0, this.width = a.width | 0, this.height = a.height | 0)
            };
            g["openfl.display._Tileset.TileData"] = Cj;
            Cj.__name__ = "openfl.display._Tileset.TileData";
            Cj.prototype = {
                __update: function (a) {
                    if (null != a) {
                        var b = a.width;
                        a = a.height;
                        this.__uvX = this.x / b;
                        this.__uvY = this.y / a;
                        this.__uvWidth = (this.x + this.width) / b;
                        this.__uvHeight = (this.y + this.height) / a
                    }
                },
                __class__: Cj
            };
            var Gl = function () {
                this.__totalFrames = this.__framesLoaded = 1;
                this.__currentLabels = [];
                this.__currentFrame = 1;
                this.__lastFrameUpdate = this.__lastFrameScriptEval = -1
            };
            g["openfl.display.Timeline"] = Gl;
            Gl.__name__ = "openfl.display.Timeline";
            Gl.prototype = {
                enterFrame: function (a) {
                },
                __enterFrame: function (a) {
                    if (this.__isPlaying) {
                        a = this.__getNextFrame(a);
                        if (this.__lastFrameScriptEval == a) return;
                        if (null != this.__frameScripts) {
                            if (a < this.__currentFrame) {
                                if (!this.__evaluateFrameScripts(this.__totalFrames)) return;
                                this.__currentFrame = 1
                            }
                            if (!this.__evaluateFrameScripts(a)) return
                        } else this.__currentFrame = a
                    }
                    this.__updateSymbol(this.__currentFrame)
                },
                __evaluateFrameScripts: function (a) {
                    if (null ==
                        this.__frameScripts) return !0;
                    var b = this.__currentFrame;
                    for (a += 1; b < a;) {
                        var c = b++;
                        if (c != this.__lastFrameScriptEval && (this.__currentFrame = this.__lastFrameScriptEval = c, this.__frameScripts.h.hasOwnProperty(c) && (this.__updateSymbol(c), (0, this.__frameScripts.h[c])(this.__scope), this.__currentFrame != c) || !this.__isPlaying)) return !1
                    }
                    return !0
                },
                __getNextFrame: function (a) {
                    null != this.frameRate ? (this.__timeElapsed += a, a = this.__currentFrame + Math.floor(this.__timeElapsed / this.__frameTime), 1 > a && (a = 1), a > this.__totalFrames &&
                    (a = Math.floor((a - 1) % this.__totalFrames) + 1), this.__timeElapsed %= this.__frameTime) : (a = this.__currentFrame + 1, a > this.__totalFrames && (a = 1));
                    return a
                },
                __goto: function (a) {
                    1 > a ? a = 1 : a > this.__totalFrames && (a = this.__totalFrames);
                    this.__lastFrameScriptEval = -1;
                    this.__currentFrame = a;
                    this.__updateSymbol(this.__currentFrame);
                    this.__evaluateFrameScripts(this.__currentFrame)
                },
                __gotoAndStop: function (a, b) {
                    this.__stop();
                    this.__goto(this.__resolveFrameReference(a))
                },
                __stop: function () {
                    this.__isPlaying = !1
                },
                __resolveFrameReference: function (a) {
                    if ("number" ==
                        typeof a && (a | 0) === a) return a;
                    if ("string" == typeof a) {
                        for (var b = 0, c = this.__currentLabels; b < c.length;) {
                            var d = c[b];
                            ++b;
                            if (d.name == a) return d.frame
                        }
                        throw new zf("Error #2109: Frame label " + a + " not found in scene.");
                    }
                    throw fa.thrown("Invalid type for frame " + a.__name__);
                },
                __updateFrameLabel: function () {
                    this.__currentFrameLabel = this.__currentLabel = null;
                    for (var a = 0, b = this.__currentLabels; a < b.length;) {
                        var c = b[a];
                        ++a;
                        if (c.frame < this.__currentFrame) this.__currentLabel = c.name;
                        else if (c.frame == this.__currentFrame) this.__currentFrameLabel =
                            this.__currentLabel = c.name;
                        else break
                    }
                },
                __updateSymbol: function (a) {
                    this.__currentFrame != this.__lastFrameUpdate && (this.__updateFrameLabel(), this.enterFrame(a), this.__lastFrameUpdate = this.__currentFrame)
                },
                __class__: Gl
            };
            var Wg = function (a, b) {
                ag.call(this, a, b);
                this.stage = new fg(this, Object.prototype.hasOwnProperty.call(b.context, "background") ? b.context.background : 16777215);
                if (Object.prototype.hasOwnProperty.call(b, "parameters")) try {
                    this.stage.get_loaderInfo().parameters = b.parameters
                } catch (c) {
                    Ia.lastError =
                        c
                }
                this.stage.__setLogicalSize(b.width, b.height);
                Object.prototype.hasOwnProperty.call(b, "resizable") && !b.resizable && this.stage.set_scaleMode(3);
                a.addModule(this.stage)
            };
            g["openfl.display.Window"] = Wg;
            Wg.__name__ = "openfl.display.Window";
            Wg.__super__ = ag;
            Wg.prototype = l(ag.prototype, {
                close: function () {
                    ag.prototype.close.call(this);
                    this.onClose.canceled || null == this.stage || (this.application.removeModule(this.stage), this.stage = null)
                },
                __class__: Wg
            });
            var Xg = function () {
            };
            g["openfl.display._internal.CanvasBitmap"] =
                Xg;
            Xg.__name__ = "openfl.display._internal.CanvasBitmap";
            Xg.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a, !1);
                null != a.__bitmapData && null != a.__bitmapData.image && (a.__imageVersion = a.__bitmapData.image.version);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    if (!(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || (v = b.__getAlpha(a.__worldAlpha), 0 >= v))) {
                        if (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            t = b.context;
                            b.setTransform(a.__renderTransform, t);
                            var c = a.opaqueBackground;
                            t.fillStyle = "rgb(" + (c >>> 16 & 255) + "," + (c >>> 8 & 255) + "," + (c & 255) + ")";
                            t.fillRect(0, 0, a.get_width(), a.get_height());
                            b.__popMaskObject(a)
                        }
                        if (null != a.__graphics && a.__renderable && (v = b.__getAlpha(a.__worldAlpha), !(0 >= v))) {
                            var d = a.__graphics;
                            if (null != d) {
                                z.render(d, b);
                                var e = d.__width,
                                    f = d.__height;
                                c = d.__canvas;
                                if (null != c && d.__visible && 1 <= e && 1 <= f) {
                                    var h = d.__worldTransform;
                                    t = b.context;
                                    B = a.__scrollRect;
                                    var r = a.__worldScale9Grid;
                                    if (null == B ||
                                        0 < B.width && 0 < B.height) {
                                        b.__setBlendMode(a.__worldBlendMode);
                                        b.__pushMaskObject(a);
                                        t.globalAlpha = v;
                                        if (null != r && 0 == h.b && 0 == h.c) {
                                            var m = b.__pixelRatio;
                                            v = la.__pool.get();
                                            v.translate(h.tx, h.ty);
                                            b.setTransform(v, t);
                                            la.__pool.release(v);
                                            v = d.__bounds;
                                            var g = d.__renderTransform.a / d.__bitmapScale,
                                                n = d.__renderTransform.d / d.__bitmapScale,
                                                k = g * h.a,
                                                q = n * h.d;
                                            h = Math.max(1, Math.round(r.x * g));
                                            d = Math.round(r.y * n);
                                            B = Math.max(1, Math.round((v.get_right() - r.get_right()) * g));
                                            var l = Math.round((v.get_bottom() - r.get_bottom()) *
                                                n);
                                            g = Math.round(r.width * g);
                                            r = Math.round(r.height * n);
                                            n = Math.round(h / m);
                                            var p = Math.round(d / m),
                                                y = Math.round(B / m);
                                            m = Math.round(l / m);
                                            k = v.width * k - n - y;
                                            v = v.height * q - p - m;
                                            b.applySmoothing(t, !1);
                                            0 != g && 0 != r ? (t.drawImage(c, 0, 0, h, d, 0, 0, n, p), t.drawImage(c, h, 0, g, d, n, 0, k, p), t.drawImage(c, h + g, 0, B, d, n + k, 0, y, p), t.drawImage(c, 0, d, h, r, 0, p, n, v), t.drawImage(c, h, d, g, r, n, p, k, v), t.drawImage(c, h + g, d, B, r, n + k, p, y, v), t.drawImage(c, 0, d + r, h, l, 0, p + v, n, m), t.drawImage(c, h, d + r, g, l, n, p + v, k, m), t.drawImage(c, h + g, d + r, B, l, n + k, p + v, y, m)) : 0 ==
                                            g && 0 != r ? (f = n + k + y, t.drawImage(c, 0, 0, e, d, 0, 0, f, p), t.drawImage(c, 0, d, e, r, 0, p, f, v), t.drawImage(c, 0, d + r, e, l, 0, p + v, f, m)) : 0 == r && 0 != g && (e = p + v + m, t.drawImage(c, 0, 0, h, f, 0, 0, n, e), t.drawImage(c, h, 0, g, f, n, 0, k, e), t.drawImage(c, h + g, 0, B, f, n + k, 0, y, e))
                                        } else b.setTransform(h, t), t.drawImage(c, 0, 0, e, f);
                                        b.__popMaskObject(a)
                                    }
                                }
                            }
                        }
                    }
                    a.__renderable && (v = b.__getAlpha(a.__worldAlpha), 0 < v && null != a.__bitmapData && a.__bitmapData.__isValid && a.__bitmapData.readable && (t = b.context, b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a,
                        !1), Ba.convertToCanvas(a.__bitmapData.image), t.globalAlpha = v, B = a.__scrollRect, b.setTransform(a.__renderTransform, t), b.__allowSmoothing && a.smoothing || (t.imageSmoothingEnabled = !1), null == B ? t.drawImage(a.__bitmapData.image.get_src(), 0, 0, a.__bitmapData.image.width, a.__bitmapData.image.height) : t.drawImage(a.__bitmapData.image.get_src(), B.x, B.y, B.width, B.height, B.x, B.y, B.width, B.height), b.__allowSmoothing && a.smoothing || (t.imageSmoothingEnabled = !0), b.__popMaskObject(a, !1)))
                } else if (c = a.__cacheBitmap, c.__renderable) {
                    var v =
                        b.__getAlpha(c.__worldAlpha);
                    if (0 < v && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable) {
                        var t = b.context;
                        b.__setBlendMode(c.__worldBlendMode);
                        b.__pushMaskObject(c, !1);
                        Ba.convertToCanvas(c.__bitmapData.image);
                        t.globalAlpha = v;
                        var B = c.__scrollRect;
                        b.setTransform(c.__renderTransform, t);
                        b.__allowSmoothing && c.smoothing || (t.imageSmoothingEnabled = !1);
                        null == B ? t.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height) : t.drawImage(c.__bitmapData.image.get_src(),
                            B.x, B.y, B.width, B.height, B.x, B.y, B.width, B.height);
                        b.__allowSmoothing && c.smoothing || (t.imageSmoothingEnabled = !0);
                        b.__popMaskObject(c, !1)
                    }
                }
                b.__renderEvent(a)
            };
            Xg.renderDrawableMask = function (a, b) {
                b.context.rect(0, 0, a.get_width(), a.get_height())
            };
            var mj = function () {
            };
            g["openfl.display._internal.CanvasBitmapData"] = mj;
            mj.__name__ = "openfl.display._internal.CanvasBitmapData";
            mj.renderDrawable = function (a, b) {
                if (a.readable) {
                    var c = a.image;
                    c.type == qc.DATA && Ba.convertToCanvas(c);
                    var d = b.context;
                    d.globalAlpha = 1;
                    b.setTransform(a.__renderTransform, d);
                    d.drawImage(c.get_src(), 0, 0, c.width, c.height)
                }
            };
            mj.renderDrawableMask = function (a, b) {
            };
            var of = function () {
            };
            g["openfl.display._internal.CanvasDisplayObject"] = of;
            of.__name__ = "openfl.display._internal.CanvasDisplayObject";
            of.renderDrawable = function (a, b) {
                if (null == a.get_mask() || 0 < a.get_mask().get_width() && 0 < a.get_mask().get_height())
                    if (b.__updateCacheBitmap(a, !1), null != a.__cacheBitmap && !a.__isCacheBitmapRender) {
                        var c = a.__cacheBitmap;
                        if (c.__renderable) {
                            var d = b.__getAlpha(c.__worldAlpha);
                            if (0 < d && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable) {
                                var e = b.context;
                                b.__setBlendMode(c.__worldBlendMode);
                                b.__pushMaskObject(c, !1);
                                Ba.convertToCanvas(c.__bitmapData.image);
                                e.globalAlpha = d;
                                var f = c.__scrollRect;
                                b.setTransform(c.__renderTransform, e);
                                b.__allowSmoothing && c.smoothing || (e.imageSmoothingEnabled = !1);
                                null == f ? e.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height) : e.drawImage(c.__bitmapData.image.get_src(), f.x, f.y, f.width,
                                    f.height, f.x, f.y, f.width, f.height);
                                b.__allowSmoothing && c.smoothing || (e.imageSmoothingEnabled = !0);
                                b.__popMaskObject(c, !1)
                            }
                        }
                    } else if (!(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || (d = b.__getAlpha(a.__worldAlpha), 0 >= d || (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height() && (b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a), e = b.context, b.setTransform(a.__renderTransform, e), c = a.opaqueBackground, e.fillStyle = "rgb(" + (c >>> 16 & 255) + "," + (c >>> 8 & 255) +
                        "," + (c & 255) + ")", e.fillRect(0, 0, a.get_width(), a.get_height()), b.__popMaskObject(a)), null == a.__graphics || !a.__renderable || (d = b.__getAlpha(a.__worldAlpha), 0 >= d))))) {
                        var h = a.__graphics;
                        if (null != h) {
                            z.render(h, b);
                            var r = h.__width,
                                m = h.__height;
                            c = h.__canvas;
                            if (null != c && h.__visible && 1 <= r && 1 <= m) {
                                var g = h.__worldTransform;
                                e = b.context;
                                f = a.__scrollRect;
                                var n = a.__worldScale9Grid;
                                if (null == f || 0 < f.width && 0 < f.height) {
                                    b.__setBlendMode(a.__worldBlendMode);
                                    b.__pushMaskObject(a);
                                    e.globalAlpha = d;
                                    if (null != n && 0 == g.b && 0 == g.c) {
                                        var k =
                                            b.__pixelRatio;
                                        d = la.__pool.get();
                                        d.translate(g.tx, g.ty);
                                        b.setTransform(d, e);
                                        la.__pool.release(d);
                                        d = h.__bounds;
                                        var q = h.__renderTransform.a / h.__bitmapScale,
                                            l = h.__renderTransform.d / h.__bitmapScale,
                                            p = q * g.a,
                                            y = l * g.d;
                                        g = Math.max(1, Math.round(n.x * q));
                                        h = Math.round(n.y * l);
                                        f = Math.max(1, Math.round((d.get_right() - n.get_right()) * q));
                                        var v = Math.round((d.get_bottom() - n.get_bottom()) * l);
                                        q = Math.round(n.width * q);
                                        n = Math.round(n.height * l);
                                        l = Math.round(g / k);
                                        var t = Math.round(h / k),
                                            B = Math.round(f / k);
                                        k = Math.round(v / k);
                                        p = d.width *
                                            p - l - B;
                                        d = d.height * y - t - k;
                                        b.applySmoothing(e, !1);
                                        0 != q && 0 != n ? (e.drawImage(c, 0, 0, g, h, 0, 0, l, t), e.drawImage(c, g, 0, q, h, l, 0, p, t), e.drawImage(c, g + q, 0, f, h, l + p, 0, B, t), e.drawImage(c, 0, h, g, n, 0, t, l, d), e.drawImage(c, g, h, q, n, l, t, p, d), e.drawImage(c, g + q, h, f, n, l + p, t, B, d), e.drawImage(c, 0, h + n, g, v, 0, t + d, l, k), e.drawImage(c, g, h + n, q, v, l, t + d, p, k), e.drawImage(c, g + q, h + n, f, v, l + p, t + d, B, k)) : 0 == q && 0 != n ? (m = l + p + B, e.drawImage(c, 0, 0, r, h, 0, 0, m, t), e.drawImage(c, 0, h, r, n, 0, t, m, d), e.drawImage(c, 0, h + n, r, v, 0, t + d, m, k)) : 0 == n && 0 != q && (r = t + d + k,
                                            e.drawImage(c, 0, 0, g, m, 0, 0, l, r), e.drawImage(c, g, 0, q, m, l, 0, p, r), e.drawImage(c, g + q, 0, f, m, l + p, 0, B, r))
                                    } else b.setTransform(g, e), e.drawImage(c, 0, 0, r, m);
                                    b.__popMaskObject(a)
                                }
                            }
                        }
                    }
                b.__renderEvent(a)
            };
            of.renderDrawableMask = function (a, b) {
                null != a.__graphics && z.renderMask(a.__graphics, b)
            };
            var nj = function () {
            };
            g["openfl.display._internal.CanvasDisplayObjectContainer"] = nj;
            nj.__name__ = "openfl.display._internal.CanvasDisplayObjectContainer";
            nj.renderDrawable = function (a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext();) {
                    var d =
                        c.next();
                    null == d.stage && d.__cleanup()
                }
                a.__removedChildren.set_length(0);
                if (!(!a.__renderable || 0 >= a.__worldAlpha || null != a.get_mask() && (0 >= a.get_mask().get_width() || 0 >= a.get_mask().get_height())) && (of.renderDrawable(a, b), null == a.__cacheBitmap || a.__isCacheBitmapRender)) {
                    b.__pushMaskObject(a);
                    if (null != b.__stage) {
                        c = 0;
                        for (d = a.__children; c < d.length;) {
                            var e = d[c];
                            ++c;
                            b.__renderDrawable(e);
                            e.__renderDirty = !1
                        }
                        a.__renderDirty = !1
                    } else
                        for (c = 0, d = a.__children; c < d.length;) e = d[c], ++c, b.__renderDrawable(e);
                    b.__popMaskObject(a)
                }
            };
            nj.renderDrawableMask = function (a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext();) {
                    var d = c.next();
                    null == d.stage && d.__cleanup()
                }
                a.__removedChildren.set_length(0);
                null != a.__graphics && z.renderMask(a.__graphics, b);
                c = 0;
                for (a = a.__children; c < a.length;) d = a[c], ++c, b.__renderDrawableMask(d)
            };
            var Hc = function () {
                null == Hc.empty ? (this.types = [], this.b = [], this.i = [], this.f = [], this.o = [], this.ff = [], this.ii = [], this.copyOnWrite = !0) : this.clear()
            };
            g["openfl.display._internal.DrawCommandBuffer"] = Hc;
            Hc.__name__ = "openfl.display._internal.DrawCommandBuffer";
            Hc.prototype = {
                beginBitmapFill: function (a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(Z.BEGIN_BITMAP_FILL);
                    this.o.push(a);
                    this.o.push(b);
                    this.b.push(c);
                    this.b.push(d)
                },
                beginFill: function (a, b) {
                    this.prepareWrite();
                    this.types.push(Z.BEGIN_FILL);
                    this.i.push(a);
                    this.f.push(b)
                },
                beginGradientFill: function (a, b, c, d, e, f, h, r) {
                    this.prepareWrite();
                    this.types.push(Z.BEGIN_GRADIENT_FILL);
                    this.o.push(a);
                    this.ii.push(b);
                    this.ff.push(c);
                    this.ii.push(d);
                    this.o.push(e);
                    this.o.push(f);
                    this.o.push(h);
                    this.f.push(r)
                },
                beginShaderFill: function (a) {
                    this.prepareWrite();
                    this.types.push(Z.BEGIN_SHADER_FILL);
                    this.o.push(a)
                },
                clear: function () {
                    this.types = Hc.empty.types;
                    this.b = Hc.empty.b;
                    this.i = Hc.empty.i;
                    this.f = Hc.empty.f;
                    this.o = Hc.empty.o;
                    this.ff = Hc.empty.ff;
                    this.ii = Hc.empty.ii;
                    this.copyOnWrite = !0
                },
                cubicCurveTo: function (a, b, c, d, e, f) {
                    this.prepareWrite();
                    this.types.push(Z.CUBIC_CURVE_TO);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c);
                    this.f.push(d);
                    this.f.push(e);
                    this.f.push(f)
                },
                curveTo: function (a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(Z.CURVE_TO);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c);
                    this.f.push(d)
                },
                drawCircle: function (a, b, c) {
                    this.prepareWrite();
                    this.types.push(Z.DRAW_CIRCLE);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c)
                },
                drawEllipse: function (a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(Z.DRAW_ELLIPSE);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c);
                    this.f.push(d)
                },
                drawQuads: function (a, b, c) {
                    this.prepareWrite();
                    this.types.push(Z.DRAW_QUADS);
                    this.o.push(a);
                    this.o.push(b);
                    this.o.push(c)
                },
                drawRect: function (a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(Z.DRAW_RECT);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c);
                    this.f.push(d)
                },
                drawRoundRect: function (a, b, c, d, e, f) {
                    this.prepareWrite();
                    this.types.push(Z.DRAW_ROUND_RECT);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c);
                    this.f.push(d);
                    this.f.push(e);
                    this.o.push(f)
                },
                drawTriangles: function (a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(Z.DRAW_TRIANGLES);
                    this.o.push(a);
                    this.o.push(b);
                    this.o.push(c);
                    this.o.push(d)
                },
                lineBitmapStyle: function (a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(Z.LINE_BITMAP_STYLE);
                    this.o.push(a);
                    this.o.push(b);
                    this.b.push(c);
                    this.b.push(d)
                },
                lineGradientStyle: function (a, b, c, d, e, f, h, r) {
                    this.prepareWrite();
                    this.types.push(Z.LINE_GRADIENT_STYLE);
                    this.o.push(a);
                    this.ii.push(b);
                    this.ff.push(c);
                    this.ii.push(d);
                    this.o.push(e);
                    this.o.push(f);
                    this.o.push(h);
                    this.f.push(r)
                },
                lineStyle: function (a, b, c, d, e, f, h, r) {
                    this.prepareWrite();
                    this.types.push(Z.LINE_STYLE);
                    this.o.push(a);
                    this.i.push(b);
                    this.f.push(c);
                    this.b.push(d);
                    this.o.push(e);
                    this.o.push(f);
                    this.o.push(h);
                    this.f.push(r)
                },
                lineTo: function (a, b) {
                    this.prepareWrite();
                    this.types.push(Z.LINE_TO);
                    this.f.push(a);
                    this.f.push(b)
                },
                moveTo: function (a, b) {
                    this.prepareWrite();
                    this.types.push(Z.MOVE_TO);
                    this.f.push(a);
                    this.f.push(b)
                },
                prepareWrite: function () {
                    this.copyOnWrite && (this.types = this.types.slice(), this.b = this.b.slice(), this.i = this.i.slice(), this.f = this.f.slice(), this.o = this.o.slice(), this.ff = this.ff.slice(), this.ii = this.ii.slice(), this.copyOnWrite = !1)
                },
                windingEvenOdd: function () {
                    this.prepareWrite();
                    this.types.push(Z.WINDING_EVEN_ODD)
                },
                windingNonZero: function () {
                    this.prepareWrite();
                    this.types.push(Z.WINDING_NON_ZERO)
                },
                get_length: function () {
                    return this.types.length
                },
                __class__: Hc,
                __properties__: {
                    get_length: "get_length"
                }
            };
            var z = function () {
            };
            g["openfl.display._internal.CanvasGraphics"] = z;
            z.__name__ = "openfl.display._internal.CanvasGraphics";
            z.closePath = function (a) {
                null == a && (a = !1);
                null != z.context.strokeStyle && (a || z.context.closePath(), z.context.stroke(), a && z.context.closePath(), z.context.beginPath())
            };
            z.createBitmapFill = function (a, b, c) {
                Ba.convertToCanvas(a.image);
                z.setSmoothing(c);
                return z.context.createPattern(a.image.get_src(),
                    b ? "repeat" : "no-repeat")
            };
            z.createGradientPattern = function (a, b, c, d, e, f, h, r) {
                f = null;
                h = !1;
                null == e && (e = la.__pool.get(), e.identity(), h = !0);
                switch (a) {
                    case 0:
                        f = z.context.createLinearGradient(-819.2, 0, 819.2, 0);
                        z.pendingMatrix = e.clone();
                        z.inversePendingMatrix = e.clone();
                        z.inversePendingMatrix.invert();
                        break;
                    case 1:
                        1 < r ? r = 1 : -1 > r && (r = -1), f = z.context.createRadialGradient(819.2 * r, 0, 0, 0, 0, 819.2), z.pendingMatrix = e.clone(), z.inversePendingMatrix = e.clone(), z.inversePendingMatrix.invert()
                }
                for (var m, g, n, k = 0, q = b.length; k <
                q;) n = k++, m = b[n], a = c[n], r = (m & 16711680) >>> 16, g = (m & 65280) >>> 8, m &= 255, n = d[n] / 255, 0 > n && (n = 0), 1 < n && (n = 1), f.addColorStop(n, "rgba(" + r + ", " + g + ", " + m + ", " + a + ")");
                h && la.__pool.release(e);
                return f
            };
            z.createTempPatternCanvas = function (a, b, c, d) {
                var e = window.document.createElement("canvas"),
                    f = e.getContext("2d");
                e.width = c;
                e.height = d;
                a = a.image.get_src();
                f.fillStyle = f.createPattern(a, b ? "repeat" : "no-repeat");
                f.beginPath();
                f.moveTo(0, 0);
                f.lineTo(0, d);
                f.lineTo(c, d);
                f.lineTo(c, 0);
                f.lineTo(0, 0);
                f.closePath();
                z.hitTesting ||
                f.fill(z.windingRule);
                return e
            };
            z.drawRoundRect = function (a, b, c, d, e, f) {
                null == f && (f = e);
                e *= .5;
                f *= .5;
                e > c / 2 && (e = c / 2);
                f > d / 2 && (f = d / 2);
                c = a + c;
                d = b + d;
                var h = -e + .7071067811865476 * e,
                    r = -e + .41421356237309503 * e,
                    m = -f + .7071067811865476 * f,
                    g = -f + .41421356237309503 * f;
                z.context.moveTo(c, d - f);
                z.context.quadraticCurveTo(c, d + g, c + h, d + m);
                z.context.quadraticCurveTo(c + r, d, c - e, d);
                z.context.lineTo(a + e, d);
                z.context.quadraticCurveTo(a - r, d, a - h, d + m);
                z.context.quadraticCurveTo(a, d + g, a, d - f);
                z.context.lineTo(a, b + f);
                z.context.quadraticCurveTo(a,
                    b - g, a - h, b - m);
                z.context.quadraticCurveTo(a - r, b, a + e, b);
                z.context.lineTo(c - e, b);
                z.context.quadraticCurveTo(c + r, b, c + h, b - m);
                z.context.quadraticCurveTo(c, b - g, c, b + f);
                z.context.lineTo(c, d - f)
            };
            z.endFill = function () {
                z.context.beginPath();
                z.playCommands(z.fillCommands, !1);
                z.fillCommands.clear()
            };
            z.endStroke = function () {
                z.context.beginPath();
                z.playCommands(z.strokeCommands, !0);
                z.context.closePath();
                z.strokeCommands.clear()
            };
            z.hitTest = function (a, b, c) {
                z.bounds = a.__bounds;
                z.graphics = a;
                if (0 == a.__commands.get_length() ||
                    null == z.bounds || 0 >= z.bounds.width || 0 >= z.bounds.height) return !1;
                z.hitTesting = !0;
                var d = a.__renderTransform,
                    e = b * d.b + c * d.d + d.ty;
                b = b * d.a + c * d.c + d.tx - (z.bounds.x * d.a + z.bounds.y * d.c + d.tx);
                c = e - (z.bounds.x * d.b + z.bounds.y * d.d + d.ty);
                e = a.__canvas;
                var f = a.__context;
                a.__canvas = z.hitTestCanvas;
                a.__context = z.hitTestContext;
                z.context = a.__context;
                z.context.setTransform(d.a, d.b, d.c, d.d, d.tx, d.ty);
                z.fillCommands.clear();
                z.strokeCommands.clear();
                z.hasFill = !1;
                z.hasStroke = !1;
                z.bitmapFill = null;
                z.bitmapRepeat = !1;
                z.windingRule =
                    "evenodd";
                d = new ce(a.__commands);
                for (var h = 0, r = a.__commands.types; h < r.length;) {
                    var m = r[h];
                    ++h;
                    switch (m._hx_index) {
                        case 0:
                        case 1:
                        case 2:
                        case 3:
                            z.endFill();
                            if (z.hasFill && z.context.isPointInPath(b, c, z.windingRule)) return d.destroy(), a.__canvas = e, a.__context = f, !0;
                            z.endStroke();
                            if (z.hasStroke && z.context.isPointInStroke(b, c)) return d.destroy(), a.__canvas = e, a.__context = f, !0;
                            if (m == Z.BEGIN_BITMAP_FILL) {
                                switch (d.prev._hx_index) {
                                    case 0:
                                        d.oPos += 2;
                                        d.bPos += 2;
                                        break;
                                    case 1:
                                        d.iPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 2:
                                        d.oPos +=
                                            4;
                                        d.iiPos += 2;
                                        d.ffPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 3:
                                        d.oPos += 1;
                                        break;
                                    case 4:
                                        d.fPos += 6;
                                        break;
                                    case 5:
                                        d.fPos += 4;
                                        break;
                                    case 6:
                                        d.fPos += 3;
                                        break;
                                    case 7:
                                        d.fPos += 4;
                                        break;
                                    case 8:
                                        d.oPos += 3;
                                        break;
                                    case 9:
                                        d.fPos += 4;
                                        break;
                                    case 10:
                                        d.fPos += 5;
                                        d.oPos += 1;
                                        break;
                                    case 12:
                                        d.oPos += 4;
                                        break;
                                    case 14:
                                        d.oPos += 2;
                                        d.bPos += 2;
                                        break;
                                    case 15:
                                        d.oPos += 4;
                                        d.iiPos += 2;
                                        d.ffPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 16:
                                        d.oPos += 4;
                                        d.iPos += 1;
                                        d.fPos += 2;
                                        d.bPos += 1;
                                        break;
                                    case 17:
                                        d.fPos += 2;
                                        break;
                                    case 18:
                                        d.fPos += 2;
                                        break;
                                    case 19:
                                        d.oPos += 1;
                                        break;
                                    case 20:
                                        d.oPos += 1
                                }
                                d.prev = Z.BEGIN_BITMAP_FILL;
                                m = d;
                                z.fillCommands.beginBitmapFill(m.buffer.o[m.oPos], m.buffer.o[m.oPos + 1], m.buffer.b[m.bPos], m.buffer.b[m.bPos + 1]);
                                z.strokeCommands.beginBitmapFill(m.buffer.o[m.oPos], m.buffer.o[m.oPos + 1], m.buffer.b[m.bPos], m.buffer.b[m.bPos + 1])
                            } else if (m == Z.BEGIN_GRADIENT_FILL) {
                                switch (d.prev._hx_index) {
                                    case 0:
                                        d.oPos += 2;
                                        d.bPos += 2;
                                        break;
                                    case 1:
                                        d.iPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 2:
                                        d.oPos += 4;
                                        d.iiPos += 2;
                                        d.ffPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 3:
                                        d.oPos += 1;
                                        break;
                                    case 4:
                                        d.fPos += 6;
                                        break;
                                    case 5:
                                        d.fPos += 4;
                                        break;
                                    case 6:
                                        d.fPos += 3;
                                        break;
                                    case 7:
                                        d.fPos += 4;
                                        break;
                                    case 8:
                                        d.oPos += 3;
                                        break;
                                    case 9:
                                        d.fPos += 4;
                                        break;
                                    case 10:
                                        d.fPos += 5;
                                        d.oPos += 1;
                                        break;
                                    case 12:
                                        d.oPos += 4;
                                        break;
                                    case 14:
                                        d.oPos += 2;
                                        d.bPos += 2;
                                        break;
                                    case 15:
                                        d.oPos += 4;
                                        d.iiPos += 2;
                                        d.ffPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 16:
                                        d.oPos += 4;
                                        d.iPos += 1;
                                        d.fPos += 2;
                                        d.bPos += 1;
                                        break;
                                    case 17:
                                        d.fPos += 2;
                                        break;
                                    case 18:
                                        d.fPos += 2;
                                        break;
                                    case 19:
                                        d.oPos += 1;
                                        break;
                                    case 20:
                                        d.oPos += 1
                                }
                                d.prev = Z.BEGIN_GRADIENT_FILL;
                                m = d;
                                z.fillCommands.beginGradientFill(m.buffer.o[m.oPos], m.buffer.ii[m.iiPos], m.buffer.ff[m.ffPos], m.buffer.ii[m.iiPos +
                                1], m.buffer.o[m.oPos + 1], m.buffer.o[m.oPos + 2], m.buffer.o[m.oPos + 3], m.buffer.f[m.fPos]);
                                z.strokeCommands.beginGradientFill(m.buffer.o[m.oPos], m.buffer.ii[m.iiPos], m.buffer.ff[m.ffPos], m.buffer.ii[m.iiPos + 1], m.buffer.o[m.oPos + 1], m.buffer.o[m.oPos + 2], m.buffer.o[m.oPos + 3], m.buffer.f[m.fPos])
                            } else if (m == Z.BEGIN_SHADER_FILL) {
                                switch (d.prev._hx_index) {
                                    case 0:
                                        d.oPos += 2;
                                        d.bPos += 2;
                                        break;
                                    case 1:
                                        d.iPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 2:
                                        d.oPos += 4;
                                        d.iiPos += 2;
                                        d.ffPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 3:
                                        d.oPos += 1;
                                        break;
                                    case 4:
                                        d.fPos +=
                                            6;
                                        break;
                                    case 5:
                                        d.fPos += 4;
                                        break;
                                    case 6:
                                        d.fPos += 3;
                                        break;
                                    case 7:
                                        d.fPos += 4;
                                        break;
                                    case 8:
                                        d.oPos += 3;
                                        break;
                                    case 9:
                                        d.fPos += 4;
                                        break;
                                    case 10:
                                        d.fPos += 5;
                                        d.oPos += 1;
                                        break;
                                    case 12:
                                        d.oPos += 4;
                                        break;
                                    case 14:
                                        d.oPos += 2;
                                        d.bPos += 2;
                                        break;
                                    case 15:
                                        d.oPos += 4;
                                        d.iiPos += 2;
                                        d.ffPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 16:
                                        d.oPos += 4;
                                        d.iPos += 1;
                                        d.fPos += 2;
                                        d.bPos += 1;
                                        break;
                                    case 17:
                                        d.fPos += 2;
                                        break;
                                    case 18:
                                        d.fPos += 2;
                                        break;
                                    case 19:
                                        d.oPos += 1;
                                        break;
                                    case 20:
                                        d.oPos += 1
                                }
                                d.prev = Z.BEGIN_SHADER_FILL;
                                m = d;
                                z.fillCommands.beginShaderFill(m.buffer.o[m.oPos]);
                                z.strokeCommands.beginShaderFill(m.buffer.o[m.oPos])
                            } else {
                                switch (d.prev._hx_index) {
                                    case 0:
                                        d.oPos +=
                                            2;
                                        d.bPos += 2;
                                        break;
                                    case 1:
                                        d.iPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 2:
                                        d.oPos += 4;
                                        d.iiPos += 2;
                                        d.ffPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 3:
                                        d.oPos += 1;
                                        break;
                                    case 4:
                                        d.fPos += 6;
                                        break;
                                    case 5:
                                        d.fPos += 4;
                                        break;
                                    case 6:
                                        d.fPos += 3;
                                        break;
                                    case 7:
                                        d.fPos += 4;
                                        break;
                                    case 8:
                                        d.oPos += 3;
                                        break;
                                    case 9:
                                        d.fPos += 4;
                                        break;
                                    case 10:
                                        d.fPos += 5;
                                        d.oPos += 1;
                                        break;
                                    case 12:
                                        d.oPos += 4;
                                        break;
                                    case 14:
                                        d.oPos += 2;
                                        d.bPos += 2;
                                        break;
                                    case 15:
                                        d.oPos += 4;
                                        d.iiPos += 2;
                                        d.ffPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 16:
                                        d.oPos += 4;
                                        d.iPos += 1;
                                        d.fPos += 2;
                                        d.bPos += 1;
                                        break;
                                    case 17:
                                        d.fPos += 2;
                                        break;
                                    case 18:
                                        d.fPos +=
                                            2;
                                        break;
                                    case 19:
                                        d.oPos += 1;
                                        break;
                                    case 20:
                                        d.oPos += 1
                                }
                                d.prev = Z.BEGIN_FILL;
                                m = d;
                                z.fillCommands.beginFill(m.buffer.i[m.iPos], 1);
                                z.strokeCommands.beginFill(m.buffer.i[m.iPos], 1)
                            }
                            break;
                        case 4:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos +=
                                        5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = Z.CUBIC_CURVE_TO;
                            m = d;
                            z.fillCommands.cubicCurveTo(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3], m.buffer.f[m.fPos + 4], m.buffer.f[m.fPos + 5]);
                            z.strokeCommands.cubicCurveTo(m.buffer.f[m.fPos],
                                m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3], m.buffer.f[m.fPos + 4], m.buffer.f[m.fPos + 5]);
                            break;
                        case 5:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = Z.CURVE_TO;
                            m = d;
                            z.fillCommands.curveTo(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3]);
                            z.strokeCommands.curveTo(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3]);
                            break;
                        case 6:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos +=
                                        2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos +=
                                        2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = Z.DRAW_CIRCLE;
                            m = d;
                            z.fillCommands.drawCircle(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2]);
                            z.strokeCommands.drawCircle(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2]);
                            break;
                        case 7:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = Z.DRAW_ELLIPSE;
                            m = d;
                            z.fillCommands.drawEllipse(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3]);
                            z.strokeCommands.drawEllipse(m.buffer.f[m.fPos],
                                m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3]);
                            break;
                        case 9:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos +=
                                        2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = Z.DRAW_RECT;
                            m = d;
                            z.fillCommands.drawRect(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3]);
                            z.strokeCommands.drawRect(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3]);
                            break;
                        case 10:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = Z.DRAW_ROUND_RECT;
                            m = d;
                            z.fillCommands.drawRoundRect(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3], m.buffer.f[m.fPos + 4], m.buffer.o[m.oPos]);
                            z.strokeCommands.drawRoundRect(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3], m.buffer.f[m.fPos + 4], m.buffer.o[m.oPos]);
                            break;
                        case 13:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos +=
                                        1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = Z.END_FILL;
                            z.endFill();
                            if (z.hasFill &&
                                z.context.isPointInPath(b, c, z.windingRule)) return d.destroy(), a.__canvas = e, a.__context = f, !0;
                            z.endStroke();
                            if (z.hasStroke && z.context.isPointInStroke(b, c)) return d.destroy(), a.__canvas = e, a.__context = f, !0;
                            z.hasFill = !1;
                            z.bitmapFill = null;
                            break;
                        case 14:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = Z.LINE_BITMAP_STYLE;
                            m = d;
                            z.strokeCommands.lineBitmapStyle(m.buffer.o[m.oPos], m.buffer.o[m.oPos + 1], m.buffer.b[m.bPos], m.buffer.b[m.bPos + 1]);
                            break;
                        case 15:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos +=
                                        2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos +=
                                        2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = Z.LINE_GRADIENT_STYLE;
                            m = d;
                            z.strokeCommands.lineGradientStyle(m.buffer.o[m.oPos], m.buffer.ii[m.iiPos], m.buffer.ff[m.ffPos], m.buffer.ii[m.iiPos + 1], m.buffer.o[m.oPos + 1], m.buffer.o[m.oPos + 2], m.buffer.o[m.oPos + 3], m.buffer.f[m.fPos]);
                            break;
                        case 16:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos +=
                                        4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = Z.LINE_STYLE;
                            m = d;
                            z.strokeCommands.lineStyle(m.buffer.o[m.oPos], m.buffer.i[m.iPos], 1, m.buffer.b[m.bPos],
                                m.buffer.o[m.oPos + 1], m.buffer.o[m.oPos + 2], m.buffer.o[m.oPos + 3], m.buffer.f[m.fPos + 1]);
                            break;
                        case 17:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos +=
                                        4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = Z.LINE_TO;
                            m = d;
                            z.fillCommands.lineTo(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1]);
                            z.strokeCommands.lineTo(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1]);
                            break;
                        case 18:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos +=
                                        1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = Z.MOVE_TO;
                            m = d;
                            z.fillCommands.moveTo(m.buffer.f[m.fPos], m.buffer.f[m.fPos +
                            1]);
                            z.strokeCommands.moveTo(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1]);
                            break;
                        case 21:
                            z.windingRule = "evenodd";
                            break;
                        case 22:
                            z.windingRule = "nonzero";
                            break;
                        default:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos +=
                                        4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = m
                    }
                }
                h = !1;
                0 < z.fillCommands.get_length() && z.endFill();
                z.hasFill && z.context.isPointInPath(b, c, z.windingRule) && (h = !0);
                0 < z.strokeCommands.get_length() && z.endStroke();
                z.hasStroke && z.context.isPointInStroke(b, c) && (h = !0);
                d.destroy();
                a.__canvas = e;
                a.__context = f;
                return h
            };
            z.normalizeUVT = function (a, b) {
                null == b && (b = !1);
                for (var c = -Infinity, d, e = a.get_length(), f = 1, h = e + 1; f < h;) d = f++, b && 0 == d % 3 || (d = a.get(d - 1), c < d && (c = d));
                if (!b) return {
                    max: c,
                    uvt: a
                };
                var r = D.toFloatVector(null);
                f = 1;
                for (h = e + 1; f < h;) d = f++, b && 0 == d % 3 || r.push(a.get(d - 1));
                return {
                    max: c,
                    uvt: r
                }
            };
            z.playCommands = function (a, b) {
                null == b && (b = !1);
                z.bounds = z.graphics.__bounds;
                var c = z.bounds.x,
                    d = z.bounds.y,
                    e = 0,
                    f = 0,
                    h = !1,
                    r = 0,
                    m = 0,
                    g = !1;
                z.windingRule = "evenodd";
                z.setSmoothing(!0);
                var n = !1,
                    k = new ce(a),
                    q, l, p, y = null,
                    v = null,
                    t = 0,
                    B = a.types;
                a: for (; t <
                          B.length;) {
                    var E = B[t];
                    ++t;
                    switch (E._hx_index) {
                        case 0:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.BEGIN_BITMAP_FILL;
                            var x = k;
                            z.bitmapFill = x.buffer.o[x.oPos];
                            z.context.fillStyle = z.createBitmapFill(x.buffer.o[x.oPos], x.buffer.b[x.bPos], x.buffer.b[x.bPos + 1]);
                            z.hasFill = !0;
                            null != x.buffer.o[x.oPos + 1] ? (z.pendingMatrix = x.buffer.o[x.oPos + 1], z.inversePendingMatrix = x.buffer.o[x.oPos + 1].clone(), z.inversePendingMatrix.invert()) : (z.pendingMatrix = null,
                                z.inversePendingMatrix = null);
                            break;
                        case 1:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos +=
                                        4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.BEGIN_FILL;
                            var A = k;
                            if (.005 > A.buffer.f[A.fPos]) z.hasFill = !1;
                            else {
                                if (1 == A.buffer.f[A.fPos]) {
                                    var u = R.hex(A.buffer.i[A.iPos] & 16777215, 6);
                                    z.context.fillStyle = "#" + u
                                } else {
                                    var N = (A.buffer.i[A.iPos] & 16711680) >>> 16;
                                    var U = (A.buffer.i[A.iPos] & 65280) >>> 8;
                                    var J = A.buffer.i[A.iPos] & 255;
                                    z.context.fillStyle = "rgba(" + N + ", " + U + ", " + J + ", " + A.buffer.f[A.fPos] + ")"
                                }
                                z.bitmapFill = null;
                                z.setSmoothing(!0);
                                z.hasFill = !0
                            }
                            break;
                        case 2:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos +=
                                        1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.BEGIN_GRADIENT_FILL;
                            var I = k;
                            z.context.fillStyle = z.createGradientPattern(I.buffer.o[I.oPos], I.buffer.ii[I.iiPos], I.buffer.ff[I.ffPos], I.buffer.ii[I.iiPos + 1], I.buffer.o[I.oPos + 1], I.buffer.o[I.oPos + 2], I.buffer.o[I.oPos + 3], I.buffer.f[I.fPos]);
                            z.bitmapFill = null;
                            z.setSmoothing(!0);
                            z.hasFill = !0;
                            break;
                        case 3:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos +=
                                        1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.BEGIN_SHADER_FILL;
                            var ma = k,
                                ca = ma.buffer.o[ma.oPos];
                            0 < ca.inputCount && (z.bitmapFill = ca.inputs[0], z.context.fillStyle = z.createBitmapFill(z.bitmapFill, 0 != ca.inputWrap[0], 5 != ca.inputFilter[0]), z.hasFill = !0, z.pendingMatrix = null, z.inversePendingMatrix = null);
                            break;
                        case 4:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos +=
                                        4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.CUBIC_CURVE_TO;
                            var F = k;
                            n = !0;
                            z.context.bezierCurveTo(F.buffer.f[F.fPos] - c, F.buffer.f[F.fPos + 1] - d, F.buffer.f[F.fPos +
                            2] - c, F.buffer.f[F.fPos + 3] - d, F.buffer.f[F.fPos + 4] - c, F.buffer.f[F.fPos + 5] - d);
                            break;
                        case 5:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos +=
                                        4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.CURVE_TO;
                            var w = k;
                            n = !0;
                            z.context.quadraticCurveTo(w.buffer.f[w.fPos] - c, w.buffer.f[w.fPos + 1] - d, w.buffer.f[w.fPos + 2] - c, w.buffer.f[w.fPos + 3] - d);
                            break;
                        case 6:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos +=
                                        1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.DRAW_CIRCLE;
                            var G = k;
                            n = !0;
                            z.context.moveTo(G.buffer.f[G.fPos] -
                                c + G.buffer.f[G.fPos + 2], G.buffer.f[G.fPos + 1] - d);
                            z.context.arc(G.buffer.f[G.fPos] - c, G.buffer.f[G.fPos + 1] - d, G.buffer.f[G.fPos + 2], 0, 2 * Math.PI, !0);
                            break;
                        case 7:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos +=
                                        4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.DRAW_ELLIPSE;
                            var da = k;
                            n = !0;
                            var gb = da.buffer.f[da.fPos];
                            var O = da.buffer.f[da.fPos + 1];
                            var K = da.buffer.f[da.fPos + 2];
                            var L = da.buffer.f[da.fPos + 3];
                            gb -= c;
                            O -= d;
                            var M = K / 2 * .5522848;
                            var P = L / 2 * .5522848;
                            var Q = gb + K;
                            var vb = O + L;
                            var X = gb + K / 2;
                            var H = O + L / 2;
                            z.context.moveTo(gb,
                                H);
                            z.context.bezierCurveTo(gb, H - P, X - M, O, X, O);
                            z.context.bezierCurveTo(X + M, O, Q, H - P, Q, H);
                            z.context.bezierCurveTo(Q, H + P, X + M, vb, X, vb);
                            z.context.bezierCurveTo(X - M, vb, gb, H + P, gb, H);
                            break;
                        case 8:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos +=
                                        5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.DRAW_QUADS;
                            var S = k,
                                V = S.buffer.o[S.oPos],
                                he = S.buffer.o[S.oPos + 1],
                                oa = S.buffer.o[S.oPos + 2],
                                qa = null != he,
                                Y = !1,
                                aa = !1,
                                Qd = qa ? he.get_length() : Math.floor(V.get_length() / 4);
                            if (0 == Qd) return;
                            null != oa && (oa.get_length() >= 6 * Qd ? aa = Y = !0 : oa.get_length() >= 4 * Qd ? Y = !0 : oa.get_length() >= 2 * Qd && (aa = !0));
                            var W = ha.__pool.get(),
                                rb = la.__pool.get(),
                                fa = z.graphics.__renderTransform;
                            z.context.save();
                            for (var Da = 0, ja = Qd; Da < ja;) {
                                var ia = Da++;
                                var ka = qa ? 4 * he.get(ia) : 4 * ia;
                                if (!(0 > ka || (W.setTo(V.get(ka), V.get(ka + 1), V.get(ka + 2), V.get(ka + 3)), 0 >= W.width || 0 >= W.height))) {
                                    if (Y && aa) {
                                        var ea = 6 * ia;
                                        rb.setTo(oa.get(ea), oa.get(ea + 1), oa.get(ea + 2), oa.get(ea + 3), oa.get(ea + 4), oa.get(ea + 5))
                                    } else Y ? (ea = 4 * ia, rb.setTo(oa.get(ea), oa.get(ea + 1), oa.get(ea + 2), oa.get(ea + 3), W.x, W.y)) :
                                        aa ? (ea = 2 * ia, rb.tx = oa.get(ea), rb.ty = oa.get(ea + 1)) : (rb.tx = W.x, rb.ty = W.y);
                                    rb.tx += e - c;
                                    rb.ty += f - d;
                                    rb.concat(fa);
                                    z.context.setTransform(rb.a, rb.b, rb.c, rb.d, rb.tx, rb.ty);
                                    null != z.bitmapFill ? z.context.drawImage(z.bitmapFill.image.get_src(), W.x, W.y, W.width, W.height, 0, 0, W.width, W.height) : z.context.fillRect(0, 0, W.width, W.height)
                                }
                            }
                            ha.__pool.release(W);
                            la.__pool.release(rb);
                            z.context.restore();
                            break;
                        case 9:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos +=
                                        4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.DRAW_RECT;
                            var T = k;
                            var na = !1;
                            if (null != z.bitmapFill && !z.hitTesting) {
                                var Ja = p = l = q = 0;
                                var ra = !0;
                                if (null != z.pendingMatrix)
                                    if (0 != z.pendingMatrix.b || 0 != z.pendingMatrix.c) ra = !1;
                                    else {
                                        null == y && (y = ba.__pool.get());
                                        null == v && (v = ba.__pool.get());
                                        y.setTo(T.buffer.f[T.fPos], T.buffer.f[T.fPos + 1]);
                                        var pa = z.inversePendingMatrix,
                                            sa = y.x,
                                            ta = y.y;
                                        y.x = sa * pa.a + ta * pa.c + pa.tx;
                                        y.y = sa * pa.b + ta * pa.d + pa.ty;
                                        v.setTo(T.buffer.f[T.fPos] + T.buffer.f[T.fPos + 2], T.buffer.f[T.fPos + 1] + T.buffer.f[T.fPos + 3]);
                                        var pd = z.inversePendingMatrix,
                                            za = v.x,
                                            Ba = v.y;
                                        v.x = za * pd.a + Ba * pd.c + pd.tx;
                                        v.y = za * pd.b + Ba * pd.d + pd.ty;
                                        q = y.y;
                                        Ja = y.x;
                                        p = v.y;
                                        l = v.x
                                    }
                                else q = T.buffer.f[T.fPos + 1], Ja = T.buffer.f[T.fPos], p = T.buffer.f[T.fPos + 1] + T.buffer.f[T.fPos + 3], l = T.buffer.f[T.fPos] + T.buffer.f[T.fPos + 2];
                                ra && 0 <= q && 0 <= Ja && l <= z.bitmapFill.width && p <= z.bitmapFill.height && (na = !0, z.hitTesting || z.context.drawImage(z.bitmapFill.image.get_src(), Ja, q, l - Ja, p - q, T.buffer.f[T.fPos] - c, T.buffer.f[T.fPos + 1] - d, T.buffer.f[T.fPos + 2], T.buffer.f[T.fPos + 3]))
                            }
                            na || (n = !0, z.context.rect(T.buffer.f[T.fPos] - c, T.buffer.f[T.fPos +
                            1] - d, T.buffer.f[T.fPos + 2], T.buffer.f[T.fPos + 3]));
                            break;
                        case 10:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.DRAW_ROUND_RECT;
                            var ua = k;
                            n = !0;
                            z.drawRoundRect(ua.buffer.f[ua.fPos] - c, ua.buffer.f[ua.fPos + 1] - d, ua.buffer.f[ua.fPos + 2], ua.buffer.f[ua.fPos + 3], ua.buffer.f[ua.fPos + 4], ua.buffer.o[ua.oPos]);
                            break;
                        case 12:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos +=
                                        1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.DRAW_TRIANGLES;
                            var Aa = k,
                                ya = Aa.buffer.o[Aa.oPos],
                                xa = Aa.buffer.o[Aa.oPos + 1],
                                va = Aa.buffer.o[Aa.oPos + 2],
                                Ib = null,
                                Ea = null == z.bitmapFill;
                            if (Ea && null != va) break a;
                            if (!Ea) {
                                if (null == va) {
                                    va = D.toFloatVector(null);
                                    for (var Ga = 0, Uc = ya.get_length() / 2 | 0; Ga < Uc;) {
                                        var Ha = Ga++;
                                        va.push(ya.get(2 * Ha) - c / z.bitmapFill.width);
                                        va.push(ya.get(2 * Ha + 1) - d / z.bitmapFill.height)
                                    }
                                }
                                var Ia = va.get_length() != ya.get_length(),
                                    fb = z.normalizeUVT(va, Ia),
                                    Ka = fb.max;
                                va = fb.uvt;
                                Ib = 1 < Ka ? z.createTempPatternCanvas(z.bitmapFill, z.bitmapRepeat, z.bounds.width | 0, z.bounds.height | 0) : z.createTempPatternCanvas(z.bitmapFill,
                                    z.bitmapRepeat, z.bitmapFill.width, z.bitmapFill.height)
                            }
                            for (var Fa = 0, Ra = xa.get_length(), Ma, Na, Pa, Ta, db, Wa, Xa, Ya, Za, La, ub, Oa, pb, Qa, Sa, ab, bb, hb, Ua, Va, $a, eb, kb, lb, mb, nb, Rd, ob; Fa < Ra;) {
                                Ma = Fa;
                                Na = Fa + 1;
                                Pa = Fa + 2;
                                Ta = 2 * xa.get(Ma);
                                db = 2 * xa.get(Ma) + 1;
                                Wa = 2 * xa.get(Na);
                                Xa = 2 * xa.get(Na) + 1;
                                Ya = 2 * xa.get(Pa);
                                Za = 2 * xa.get(Pa) + 1;
                                La = ya.get(Ta) - c;
                                ub = ya.get(db) - d;
                                Oa = ya.get(Wa) - c;
                                pb = ya.get(Xa) - d;
                                Qa = ya.get(Ya) - c;
                                Sa = ya.get(Za) - d;
                                switch (Aa.buffer.o[Aa.oPos + 3]) {
                                    case 0:
                                        if (0 > (Oa - La) * (Sa - ub) - (pb - ub) * (Qa - La)) {
                                            Fa += 3;
                                            continue
                                        }
                                        break;
                                    case 2:
                                        if (!(0 >
                                            (Oa - La) * (Sa - ub) - (pb - ub) * (Qa - La))) {
                                            Fa += 3;
                                            continue
                                        }
                                }
                                Ea ? (z.context.beginPath(), z.context.moveTo(La, ub), z.context.lineTo(Oa, pb), z.context.lineTo(Qa, Sa), z.context.closePath(), z.hitTesting || z.context.fill(z.windingRule), Fa += 3) : (ab = va.get(Ta) * Ib.width, hb = va.get(Wa) * Ib.width, Va = va.get(Ya) * Ib.width, bb = va.get(db) * Ib.height, Ua = va.get(Xa) * Ib.height, $a = va.get(Za) * Ib.height, eb = ab * ($a - Ua) - hb * $a + Va * Ua + (hb - Va) * bb, 0 == eb ? (Fa += 3, z.context.restore()) : (z.context.save(), z.context.beginPath(), z.context.moveTo(La, ub), z.context.lineTo(Oa,
                                    pb), z.context.lineTo(Qa, Sa), z.context.closePath(), z.context.clip(), kb = -(bb * (Qa - Oa) - Ua * Qa + $a * Oa + (Ua - $a) * La) / eb, lb = (Ua * Sa + bb * (pb - Sa) - $a * pb + ($a - Ua) * ub) / eb, mb = (ab * (Qa - Oa) - hb * Qa + Va * Oa + (hb - Va) * La) / eb, nb = -(hb * Sa + ab * (pb - Sa) - Va * pb + (Va - hb) * ub) / eb, Rd = (ab * ($a * Oa - Ua * Qa) + bb * (hb * Qa - Va * Oa) + (Va * Ua - hb * $a) * La) / eb, ob = (ab * ($a * pb - Ua * Sa) + bb * (hb * Sa - Va * pb) + (Va * Ua - hb * $a) * ub) / eb, z.context.transform(kb, lb, mb, nb, Rd, ob), z.context.drawImage(Ib, 0, 0, Ib.width, Ib.height), z.context.restore(), Fa += 3))
                            }
                            break;
                        case 14:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos +=
                                        2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos +=
                                        2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.LINE_BITMAP_STYLE;
                            var ib = k;
                            b && z.hasStroke && z.closePath(!0);
                            z.context.moveTo(e - c, f - d);
                            z.context.strokeStyle = z.createBitmapFill(ib.buffer.o[ib.oPos], ib.buffer.b[ib.bPos], ib.buffer.b[ib.bPos + 1]);
                            z.hasStroke = !0;
                            break;
                        case 15:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos +=
                                        3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.LINE_GRADIENT_STYLE;
                            var $b = k;
                            b && z.hasStroke && z.closePath(!0);
                            z.context.moveTo(e - c, f - d);
                            z.context.strokeStyle = z.createGradientPattern($b.buffer.o[$b.oPos],
                                $b.buffer.ii[$b.iiPos], $b.buffer.ff[$b.ffPos], $b.buffer.ii[$b.iiPos + 1], $b.buffer.o[$b.oPos + 1], $b.buffer.o[$b.oPos + 2], $b.buffer.o[$b.oPos + 3], $b.buffer.f[$b.fPos]);
                            z.setSmoothing(!0);
                            z.hasStroke = !0;
                            break;
                        case 16:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos +=
                                        4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.LINE_STYLE;
                            var Ca = k;
                            b && z.hasStroke && z.closePath(!0);
                            z.context.moveTo(e - c, f - d);
                            if (null == Ca.buffer.o[Ca.oPos]) z.hasStroke = !1;
                            else {
                                z.context.lineWidth = 0 < Ca.buffer.o[Ca.oPos] ? Ca.buffer.o[Ca.oPos] :
                                    1;
                                var qb = null == Ca.buffer.o[Ca.oPos + 3] ? "round" : (null == Ca.buffer.o[Ca.oPos + 3] ? "null" : am.toString(Ca.buffer.o[Ca.oPos + 3])).toLowerCase();
                                z.context.lineJoin = qb;
                                var sb = null == Ca.buffer.o[Ca.oPos + 2] ? "round" : 0 == Ca.buffer.o[Ca.oPos + 2] ? "butt" : (null == Ca.buffer.o[Ca.oPos + 2] ? "null" : $l.toString(Ca.buffer.o[Ca.oPos + 2])).toLowerCase();
                                z.context.lineCap = sb;
                                z.context.miterLimit = Ca.buffer.f[Ca.fPos + 1];
                                if (1 == Ca.buffer.f[Ca.fPos]) {
                                    var tb = R.hex(Ca.buffer.i[Ca.iPos] & 16777215, 6);
                                    z.context.strokeStyle = "#" + tb
                                } else N = (Ca.buffer.i[Ca.iPos] &
                                    16711680) >>> 16, U = (Ca.buffer.i[Ca.iPos] & 65280) >>> 8, J = Ca.buffer.i[Ca.iPos] & 255, z.context.strokeStyle = "rgba(" + N + ", " + U + ", " + J + ", " + Ca.buffer.f[Ca.fPos] + ")";
                                z.setSmoothing(!0);
                                z.hasStroke = !0
                            }
                            break;
                        case 17:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.LINE_TO;
                            var jb = k;
                            n = !0;
                            z.context.lineTo(jb.buffer.f[jb.fPos] - c, jb.buffer.f[jb.fPos + 1] - d);
                            e = jb.buffer.f[jb.fPos];
                            f = jb.buffer.f[jb.fPos + 1];
                            e == r && f == m && (h = !0);
                            break;
                        case 18:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos +=
                                        2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos +=
                                        2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = Z.MOVE_TO;
                            var cb = k;
                            z.context.moveTo(cb.buffer.f[cb.fPos] - c, cb.buffer.f[cb.fPos + 1] - d);
                            e = cb.buffer.f[cb.fPos];
                            f = cb.buffer.f[cb.fPos + 1];
                            g && cb.buffer.f[cb.fPos] != r && cb.buffer.f[cb.fPos + 1] != m && (h = !0);
                            r = cb.buffer.f[cb.fPos];
                            m = cb.buffer.f[cb.fPos + 1];
                            g = !0;
                            break;
                        case 21:
                            z.windingRule = "evenodd";
                            break;
                        case 22:
                            z.windingRule = "nonzero";
                            break;
                        default:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos +=
                                        4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = E
                    }
                }
                null !=
                y && ba.__pool.release(y);
                null != v && ba.__pool.release(v);
                k.destroy();
                if (n) {
                    if (b && z.hasStroke) {
                        if (z.hasFill) {
                            if (e != r || f != m) z.context.lineTo(r - c, m - d), h = !0;
                            h && z.closePath(!0)
                        } else h && e == r && f == m && z.closePath(!0);
                        z.hitTesting || z.context.stroke()
                    }
                    b || !z.hasFill && null == z.bitmapFill || (z.context.translate(-z.bounds.x, -z.bounds.y), null != z.pendingMatrix ? (z.context.transform(z.pendingMatrix.a, z.pendingMatrix.b, z.pendingMatrix.c, z.pendingMatrix.d, z.pendingMatrix.tx, z.pendingMatrix.ty), z.hitTesting || z.context.fill(z.windingRule),
                        z.context.transform(z.inversePendingMatrix.a, z.inversePendingMatrix.b, z.inversePendingMatrix.c, z.inversePendingMatrix.d, z.inversePendingMatrix.tx, z.inversePendingMatrix.ty)) : z.hitTesting || z.context.fill(z.windingRule), z.context.translate(z.bounds.x, z.bounds.y), z.context.closePath())
                }
            };
            z.render = function (a, b) {
                a.__update(b.__worldTransform, b.__pixelRatio);
                if (a.__softwareDirty) {
                    z.hitTesting = !1;
                    z.graphics = a;
                    z.allowSmoothing = b.__allowSmoothing;
                    z.worldAlpha = b.__getAlpha(a.__owner.__worldAlpha);
                    z.bounds =
                        a.__bounds;
                    var c = a.__width,
                        d = a.__height;
                    if (!a.__visible || 0 == a.__commands.get_length() || null == z.bounds || 1 > c || 1 > d) a.__canvas = null, a.__context = null, a.__bitmap = null;
                    else {
                        null == a.__canvas && (a.__canvas = window.document.createElement("canvas"), a.__context = a.__canvas.getContext("2d"));
                        z.context = a.__context;
                        var e = a.__renderTransform,
                            f = a.__canvas,
                            h = b.__pixelRatio,
                            r = c * h | 0,
                            m = d * h | 0;
                        b.__setBlendModeContext(z.context, 10);
                        b.__isDOM ? (f.width == r && f.height == m ? z.context.clearRect(0, 0, r, m) : (f.width = r, f.height = m, f.style.width =
                            c + "px", f.style.height = d + "px"), c = a.__renderTransform, z.context.setTransform(c.a * h, c.b * h, c.c * h, c.d * h, c.tx * h, c.ty * h)) : (f.width == r && f.height == m ? (z.context.closePath(), z.context.setTransform(1, 0, 0, 1, 0, 0), z.context.clearRect(0, 0, r, m)) : (f.width = c, f.height = d), z.context.setTransform(e.a, e.b, e.c, e.d, e.tx, e.ty));
                        z.fillCommands.clear();
                        z.strokeCommands.clear();
                        z.hasFill = !1;
                        z.hasStroke = !1;
                        z.bitmapFill = null;
                        h = z.bitmapRepeat = !1;
                        d = c = 0;
                        z.windingRule = "evenodd";
                        e = new ce(a.__commands);
                        f = 0;
                        for (r = a.__commands.types; f <
                        r.length;) switch (m = r[f], ++f, m._hx_index) {
                            case 0:
                            case 1:
                            case 2:
                            case 3:
                                z.endFill();
                                z.endStroke();
                                if (m == Z.BEGIN_BITMAP_FILL) {
                                    switch (e.prev._hx_index) {
                                        case 0:
                                            e.oPos += 2;
                                            e.bPos += 2;
                                            break;
                                        case 1:
                                            e.iPos += 1;
                                            e.fPos += 1;
                                            break;
                                        case 2:
                                            e.oPos += 4;
                                            e.iiPos += 2;
                                            e.ffPos += 1;
                                            e.fPos += 1;
                                            break;
                                        case 3:
                                            e.oPos += 1;
                                            break;
                                        case 4:
                                            e.fPos += 6;
                                            break;
                                        case 5:
                                            e.fPos += 4;
                                            break;
                                        case 6:
                                            e.fPos += 3;
                                            break;
                                        case 7:
                                            e.fPos += 4;
                                            break;
                                        case 8:
                                            e.oPos += 3;
                                            break;
                                        case 9:
                                            e.fPos += 4;
                                            break;
                                        case 10:
                                            e.fPos += 5;
                                            e.oPos += 1;
                                            break;
                                        case 12:
                                            e.oPos += 4;
                                            break;
                                        case 14:
                                            e.oPos +=
                                                2;
                                            e.bPos += 2;
                                            break;
                                        case 15:
                                            e.oPos += 4;
                                            e.iiPos += 2;
                                            e.ffPos += 1;
                                            e.fPos += 1;
                                            break;
                                        case 16:
                                            e.oPos += 4;
                                            e.iPos += 1;
                                            e.fPos += 2;
                                            e.bPos += 1;
                                            break;
                                        case 17:
                                            e.fPos += 2;
                                            break;
                                        case 18:
                                            e.fPos += 2;
                                            break;
                                        case 19:
                                            e.oPos += 1;
                                            break;
                                        case 20:
                                            e.oPos += 1
                                    }
                                    e.prev = Z.BEGIN_BITMAP_FILL;
                                    m = e;
                                    z.fillCommands.beginBitmapFill(m.buffer.o[m.oPos], m.buffer.o[m.oPos + 1], m.buffer.b[m.bPos], m.buffer.b[m.bPos + 1]);
                                    z.strokeCommands.beginBitmapFill(m.buffer.o[m.oPos], m.buffer.o[m.oPos + 1], m.buffer.b[m.bPos], m.buffer.b[m.bPos + 1])
                                } else if (m == Z.BEGIN_GRADIENT_FILL) {
                                    switch (e.prev._hx_index) {
                                        case 0:
                                            e.oPos +=
                                                2;
                                            e.bPos += 2;
                                            break;
                                        case 1:
                                            e.iPos += 1;
                                            e.fPos += 1;
                                            break;
                                        case 2:
                                            e.oPos += 4;
                                            e.iiPos += 2;
                                            e.ffPos += 1;
                                            e.fPos += 1;
                                            break;
                                        case 3:
                                            e.oPos += 1;
                                            break;
                                        case 4:
                                            e.fPos += 6;
                                            break;
                                        case 5:
                                            e.fPos += 4;
                                            break;
                                        case 6:
                                            e.fPos += 3;
                                            break;
                                        case 7:
                                            e.fPos += 4;
                                            break;
                                        case 8:
                                            e.oPos += 3;
                                            break;
                                        case 9:
                                            e.fPos += 4;
                                            break;
                                        case 10:
                                            e.fPos += 5;
                                            e.oPos += 1;
                                            break;
                                        case 12:
                                            e.oPos += 4;
                                            break;
                                        case 14:
                                            e.oPos += 2;
                                            e.bPos += 2;
                                            break;
                                        case 15:
                                            e.oPos += 4;
                                            e.iiPos += 2;
                                            e.ffPos += 1;
                                            e.fPos += 1;
                                            break;
                                        case 16:
                                            e.oPos += 4;
                                            e.iPos += 1;
                                            e.fPos += 2;
                                            e.bPos += 1;
                                            break;
                                        case 17:
                                            e.fPos += 2;
                                            break;
                                        case 18:
                                            e.fPos +=
                                                2;
                                            break;
                                        case 19:
                                            e.oPos += 1;
                                            break;
                                        case 20:
                                            e.oPos += 1
                                    }
                                    e.prev = Z.BEGIN_GRADIENT_FILL;
                                    m = e;
                                    z.fillCommands.beginGradientFill(m.buffer.o[m.oPos], m.buffer.ii[m.iiPos], m.buffer.ff[m.ffPos], m.buffer.ii[m.iiPos + 1], m.buffer.o[m.oPos + 1], m.buffer.o[m.oPos + 2], m.buffer.o[m.oPos + 3], m.buffer.f[m.fPos]);
                                    z.strokeCommands.beginGradientFill(m.buffer.o[m.oPos], m.buffer.ii[m.iiPos], m.buffer.ff[m.ffPos], m.buffer.ii[m.iiPos + 1], m.buffer.o[m.oPos + 1], m.buffer.o[m.oPos + 2], m.buffer.o[m.oPos + 3], m.buffer.f[m.fPos])
                                } else if (m == Z.BEGIN_SHADER_FILL) {
                                    switch (e.prev._hx_index) {
                                        case 0:
                                            e.oPos +=
                                                2;
                                            e.bPos += 2;
                                            break;
                                        case 1:
                                            e.iPos += 1;
                                            e.fPos += 1;
                                            break;
                                        case 2:
                                            e.oPos += 4;
                                            e.iiPos += 2;
                                            e.ffPos += 1;
                                            e.fPos += 1;
                                            break;
                                        case 3:
                                            e.oPos += 1;
                                            break;
                                        case 4:
                                            e.fPos += 6;
                                            break;
                                        case 5:
                                            e.fPos += 4;
                                            break;
                                        case 6:
                                            e.fPos += 3;
                                            break;
                                        case 7:
                                            e.fPos += 4;
                                            break;
                                        case 8:
                                            e.oPos += 3;
                                            break;
                                        case 9:
                                            e.fPos += 4;
                                            break;
                                        case 10:
                                            e.fPos += 5;
                                            e.oPos += 1;
                                            break;
                                        case 12:
                                            e.oPos += 4;
                                            break;
                                        case 14:
                                            e.oPos += 2;
                                            e.bPos += 2;
                                            break;
                                        case 15:
                                            e.oPos += 4;
                                            e.iiPos += 2;
                                            e.ffPos += 1;
                                            e.fPos += 1;
                                            break;
                                        case 16:
                                            e.oPos += 4;
                                            e.iPos += 1;
                                            e.fPos += 2;
                                            e.bPos += 1;
                                            break;
                                        case 17:
                                            e.fPos += 2;
                                            break;
                                        case 18:
                                            e.fPos +=
                                                2;
                                            break;
                                        case 19:
                                            e.oPos += 1;
                                            break;
                                        case 20:
                                            e.oPos += 1
                                    }
                                    e.prev = Z.BEGIN_SHADER_FILL;
                                    m = e;
                                    z.fillCommands.beginShaderFill(m.buffer.o[m.oPos]);
                                    z.strokeCommands.beginShaderFill(m.buffer.o[m.oPos])
                                } else {
                                    switch (e.prev._hx_index) {
                                        case 0:
                                            e.oPos += 2;
                                            e.bPos += 2;
                                            break;
                                        case 1:
                                            e.iPos += 1;
                                            e.fPos += 1;
                                            break;
                                        case 2:
                                            e.oPos += 4;
                                            e.iiPos += 2;
                                            e.ffPos += 1;
                                            e.fPos += 1;
                                            break;
                                        case 3:
                                            e.oPos += 1;
                                            break;
                                        case 4:
                                            e.fPos += 6;
                                            break;
                                        case 5:
                                            e.fPos += 4;
                                            break;
                                        case 6:
                                            e.fPos += 3;
                                            break;
                                        case 7:
                                            e.fPos += 4;
                                            break;
                                        case 8:
                                            e.oPos += 3;
                                            break;
                                        case 9:
                                            e.fPos += 4;
                                            break;
                                        case 10:
                                            e.fPos +=
                                                5;
                                            e.oPos += 1;
                                            break;
                                        case 12:
                                            e.oPos += 4;
                                            break;
                                        case 14:
                                            e.oPos += 2;
                                            e.bPos += 2;
                                            break;
                                        case 15:
                                            e.oPos += 4;
                                            e.iiPos += 2;
                                            e.ffPos += 1;
                                            e.fPos += 1;
                                            break;
                                        case 16:
                                            e.oPos += 4;
                                            e.iPos += 1;
                                            e.fPos += 2;
                                            e.bPos += 1;
                                            break;
                                        case 17:
                                            e.fPos += 2;
                                            break;
                                        case 18:
                                            e.fPos += 2;
                                            break;
                                        case 19:
                                            e.oPos += 1;
                                            break;
                                        case 20:
                                            e.oPos += 1
                                    }
                                    e.prev = Z.BEGIN_FILL;
                                    m = e;
                                    z.fillCommands.beginFill(m.buffer.i[m.iPos], m.buffer.f[m.fPos]);
                                    z.strokeCommands.beginFill(m.buffer.i[m.iPos], m.buffer.f[m.fPos])
                                }
                                break;
                            case 4:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos += 2;
                                        break;
                                    case 19:
                                        e.oPos +=
                                            1;
                                        break;
                                    case 20:
                                        e.oPos += 1
                                }
                                e.prev = Z.CUBIC_CURVE_TO;
                                m = e;
                                z.fillCommands.cubicCurveTo(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3], m.buffer.f[m.fPos + 4], m.buffer.f[m.fPos + 5]);
                                h ? z.strokeCommands.cubicCurveTo(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3], m.buffer.f[m.fPos + 4], m.buffer.f[m.fPos + 5]) : (c = m.buffer.f[m.fPos + 4], d = m.buffer.f[m.fPos + 5]);
                                break;
                            case 5:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos +=
                                            1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos += 2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos +=
                                            1
                                }
                                e.prev = Z.CURVE_TO;
                                m = e;
                                z.fillCommands.curveTo(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3]);
                                h ? z.strokeCommands.curveTo(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3]) : (c = m.buffer.f[m.fPos + 2], d = m.buffer.f[m.fPos + 3]);
                                break;
                            case 6:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos +=
                                            4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos += 2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos += 1
                                }
                                e.prev = Z.DRAW_CIRCLE;
                                m = e;
                                z.fillCommands.drawCircle(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos +
                                2]);
                                h && z.strokeCommands.drawCircle(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2]);
                                break;
                            case 7:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos +=
                                            2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos += 2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos += 1
                                }
                                e.prev = Z.DRAW_ELLIPSE;
                                m = e;
                                z.fillCommands.drawEllipse(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3]);
                                h && z.strokeCommands.drawEllipse(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3]);
                                break;
                            case 8:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos +=
                                            2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos +=
                                            2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos += 1
                                }
                                e.prev = Z.DRAW_QUADS;
                                m = e;
                                z.fillCommands.drawQuads(m.buffer.o[m.oPos], m.buffer.o[m.oPos + 1], m.buffer.o[m.oPos + 2]);
                                break;
                            case 9:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos +=
                                            1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos += 2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos += 1
                                }
                                e.prev = Z.DRAW_RECT;
                                m = e;
                                z.fillCommands.drawRect(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3]);
                                h && z.strokeCommands.drawRect(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos +
                                3]);
                                break;
                            case 10:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos += 2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos += 1
                                }
                                e.prev = Z.DRAW_ROUND_RECT;
                                m = e;
                                z.fillCommands.drawRoundRect(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3], m.buffer.f[m.fPos + 4], m.buffer.o[m.oPos]);
                                h && z.strokeCommands.drawRoundRect(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1], m.buffer.f[m.fPos + 2], m.buffer.f[m.fPos + 3], m.buffer.f[m.fPos + 4], m.buffer.o[m.oPos]);
                                break;
                            case 12:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos +=
                                            2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos +=
                                            2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos += 1
                                }
                                e.prev = Z.DRAW_TRIANGLES;
                                m = e;
                                z.fillCommands.drawTriangles(m.buffer.o[m.oPos], m.buffer.o[m.oPos + 1], m.buffer.o[m.oPos + 2], m.buffer.o[m.oPos + 3]);
                                break;
                            case 13:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos +=
                                            4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos += 2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos += 1
                                }
                                e.prev = Z.END_FILL;
                                z.endFill();
                                z.endStroke();
                                h = z.hasFill = !1;
                                z.bitmapFill = null;
                                d = c = 0;
                                break;
                            case 14:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 2:
                                        e.oPos +=
                                            4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos += 2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos += 1
                                }
                                e.prev = Z.LINE_BITMAP_STYLE;
                                m = e;
                                h || 0 == c && 0 == d || (z.strokeCommands.moveTo(c, d), d = c = 0);
                                h = !0;
                                z.strokeCommands.lineBitmapStyle(m.buffer.o[m.oPos], m.buffer.o[m.oPos + 1], m.buffer.b[m.bPos], m.buffer.b[m.bPos + 1]);
                                break;
                            case 15:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos +=
                                            5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos += 2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos += 1
                                }
                                e.prev = Z.LINE_GRADIENT_STYLE;
                                m = e;
                                h || 0 == c && 0 == d || (z.strokeCommands.moveTo(c, d), d = c = 0);
                                h = !0;
                                z.strokeCommands.lineGradientStyle(m.buffer.o[m.oPos], m.buffer.ii[m.iiPos], m.buffer.ff[m.ffPos], m.buffer.ii[m.iiPos + 1], m.buffer.o[m.oPos +
                                1], m.buffer.o[m.oPos + 2], m.buffer.o[m.oPos + 3], m.buffer.f[m.fPos]);
                                break;
                            case 16:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos +=
                                            2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos += 2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos += 1
                                }
                                e.prev = Z.LINE_STYLE;
                                m = e;
                                h || null == m.buffer.o[m.oPos] || 0 == c && 0 == d || (z.strokeCommands.moveTo(c, d), d = c = 0);
                                h = null != m.buffer.o[m.oPos];
                                z.strokeCommands.lineStyle(m.buffer.o[m.oPos], m.buffer.i[m.iPos], m.buffer.f[m.fPos], m.buffer.b[m.bPos], m.buffer.o[m.oPos + 1], m.buffer.o[m.oPos + 2], m.buffer.o[m.oPos + 3], m.buffer.f[m.fPos + 1]);
                                break;
                            case 17:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos +=
                                            2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos +=
                                            2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos += 1
                                }
                                e.prev = Z.LINE_TO;
                                m = e;
                                z.fillCommands.lineTo(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1]);
                                h ? z.strokeCommands.lineTo(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1]) : (c = m.buffer.f[m.fPos], d = m.buffer.f[m.fPos + 1]);
                                break;
                            case 18:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos +=
                                            4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos += 2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos += 1
                                }
                                e.prev = Z.MOVE_TO;
                                m = e;
                                z.fillCommands.moveTo(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1]);
                                h ? z.strokeCommands.moveTo(m.buffer.f[m.fPos], m.buffer.f[m.fPos + 1]) : (c = m.buffer.f[m.fPos],
                                    d = m.buffer.f[m.fPos + 1]);
                                break;
                            case 19:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos +=
                                            4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos += 2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos += 1
                                }
                                e.prev = Z.OVERRIDE_BLEND_MODE;
                                m = e;
                                b.__setBlendModeContext(z.context, m.buffer.o[m.oPos]);
                                break;
                            case 21:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos +=
                                            3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos += 2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos += 1
                                }
                                e.prev = Z.WINDING_EVEN_ODD;
                                z.fillCommands.windingEvenOdd();
                                z.windingRule = "evenodd";
                                break;
                            case 22:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos +=
                                            1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos += 2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos +=
                                            1
                                }
                                e.prev = Z.WINDING_NON_ZERO;
                                z.fillCommands.windingNonZero();
                                z.windingRule = "nonzero";
                                break;
                            default:
                                switch (e.prev._hx_index) {
                                    case 0:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 1:
                                        e.iPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 2:
                                        e.oPos += 4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 3:
                                        e.oPos += 1;
                                        break;
                                    case 4:
                                        e.fPos += 6;
                                        break;
                                    case 5:
                                        e.fPos += 4;
                                        break;
                                    case 6:
                                        e.fPos += 3;
                                        break;
                                    case 7:
                                        e.fPos += 4;
                                        break;
                                    case 8:
                                        e.oPos += 3;
                                        break;
                                    case 9:
                                        e.fPos += 4;
                                        break;
                                    case 10:
                                        e.fPos += 5;
                                        e.oPos += 1;
                                        break;
                                    case 12:
                                        e.oPos += 4;
                                        break;
                                    case 14:
                                        e.oPos += 2;
                                        e.bPos += 2;
                                        break;
                                    case 15:
                                        e.oPos +=
                                            4;
                                        e.iiPos += 2;
                                        e.ffPos += 1;
                                        e.fPos += 1;
                                        break;
                                    case 16:
                                        e.oPos += 4;
                                        e.iPos += 1;
                                        e.fPos += 2;
                                        e.bPos += 1;
                                        break;
                                    case 17:
                                        e.fPos += 2;
                                        break;
                                    case 18:
                                        e.fPos += 2;
                                        break;
                                    case 19:
                                        e.oPos += 1;
                                        break;
                                    case 20:
                                        e.oPos += 1
                                }
                                e.prev = m
                        }
                        0 < z.fillCommands.get_length() && z.endFill();
                        0 < z.strokeCommands.get_length() && z.endStroke();
                        e.destroy();
                        a.__bitmap = mb.fromCanvas(a.__canvas)
                    }
                    a.__softwareDirty = !1;
                    a.set___dirty(!1)
                }
            };
            z.renderMask = function (a, b) {
                if (0 != a.__commands.get_length()) {
                    z.context = b.context;
                    b = new ce(a.__commands);
                    var c = 0;
                    for (a = a.__commands.types; c <
                    a.length;) {
                        var d = a[c];
                        ++c;
                        switch (d._hx_index) {
                            case 4:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = Z.CUBIC_CURVE_TO;
                                d = b;
                                z.context.bezierCurveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2] - 0, d.buffer.f[d.fPos + 3] - 0, d.buffer.f[d.fPos + 4] - 0, d.buffer.f[d.fPos + 5] - 0);
                                break;
                            case 5:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos +=
                                            1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = Z.CURVE_TO;
                                d = b;
                                z.context.quadraticCurveTo(d.buffer.f[d.fPos] -
                                    0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2] - 0, d.buffer.f[d.fPos + 3] - 0);
                                break;
                            case 6:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = Z.DRAW_CIRCLE;
                                d = b;
                                z.context.arc(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], 0, 2 * Math.PI, !0);
                                break;
                            case 7:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = Z.DRAW_ELLIPSE;
                                var e = b;
                                d = e.buffer.f[e.fPos];
                                var f = e.buffer.f[e.fPos + 1];
                                var h = e.buffer.f[e.fPos +
                                2];
                                var r = e.buffer.f[e.fPos + 3];
                                d -= 0;
                                f -= 0;
                                e = h / 2 * .5522848;
                                var m = r / 2 * .5522848;
                                var g = d + h;
                                var n = f + r;
                                h = d + h / 2;
                                r = f + r / 2;
                                z.context.moveTo(d, r);
                                z.context.bezierCurveTo(d, r - m, h - e, f, h, f);
                                z.context.bezierCurveTo(h + e, f, g, r - m, g, r);
                                z.context.bezierCurveTo(g, r + m, h + e, n, h, n);
                                z.context.bezierCurveTo(h - e, n, d, r + m, d, r);
                                break;
                            case 9:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = Z.DRAW_RECT;
                                d = b;
                                z.context.beginPath();
                                z.context.rect(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos +
                                1] - 0, d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3]);
                                z.context.closePath();
                                break;
                            case 10:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = Z.DRAW_ROUND_RECT;
                                d = b;
                                z.drawRoundRect(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3], d.buffer.f[d.fPos + 4], d.buffer.o[d.oPos]);
                                break;
                            case 17:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos +=
                                            1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = Z.LINE_TO;
                                d = b;
                                z.context.lineTo(d.buffer.f[d.fPos] -
                                    0, d.buffer.f[d.fPos + 1] - 0);
                                break;
                            case 18:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos +=
                                            4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = Z.MOVE_TO;
                                d = b;
                                z.context.moveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0);
                                break;
                            default:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos +=
                                            3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = d
                        }
                    }
                    b.destroy()
                }
            };
            z.setSmoothing = function (a) {
                z.allowSmoothing || (a = !1);
                z.context.imageSmoothingEnabled != a && (z.context.imageSmoothingEnabled = a)
            };
            var oj = function () {
            };
            g["openfl.display._internal.CanvasSimpleButton"] =
                oj;
            oj.__name__ = "openfl.display._internal.CanvasSimpleButton";
            oj.renderDrawable = OpenflShared.renderDrawableSimple;
            oj.renderDrawableMask = function (a, b) {
                b.__renderDrawableMask(a.__currentState)
            };
            var P = function () {
            };
            g["openfl.display._internal.CanvasTextField"] = P;
            P.__name__ = "openfl.display._internal.CanvasTextField";
            P.renderDrawable = function (a, b) {
                b.__isDOM && !a.__renderedOnCanvasWhileOnDOM &&
                (a.__renderedOnCanvasWhileOnDOM = !0, 1 == a.get_type() && a.replaceText(0, a.__text.length, a.__text), a.__isHTML && a.__updateText(ya.parse(a.__text, a.get_multiline(), a.__styleSheet, a.__textFormat, a.__textEngine.textFormatRanges)), a.__dirty = !0, a.__layoutDirty = !0, a.__renderDirty || (a.__renderDirty = !0, a.__setParentRenderDirty()));
                if (null == a.get_mask() || 0 < a.get_mask().get_width() && 0 < a.get_mask().get_height())
                    if (b.__updateCacheBitmap(a, a.__dirty), null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                        var c = a.__textEngine,
                            d = !(c.background || c.border),
                            e = d ? c.textBounds : c.bounds,
                            f = a.__graphics,
                            h = 0;
                        if (a.__dirty) {
                            a.__updateLayout();
                            null == f.__bounds && (f.__bounds = new ha);
                            if (0 == a.get_text().length) {
                                var r = c.bounds.width - 4,
                                    m = a.get_defaultTextFormat().align;
                                h = 3 == m ? 0 : 4 == m ? r : r / 2;
                                switch (m) {
                                    case 0:
                                        h += a.get_defaultTextFormat().leftMargin / 2;
                                        h -= a.get_defaultTextFormat().rightMargin / 2;
                                        h += a.get_defaultTextFormat().indent / 2;
                                        h += a.get_defaultTextFormat().blockIndent / 2;
                                        break;
                                    case 2:
                                        h += a.get_defaultTextFormat().leftMargin;
                                        h += a.get_defaultTextFormat().indent;
                                        h += a.get_defaultTextFormat().blockIndent;
                                        break;
                                    case 3:
                                        h += a.get_defaultTextFormat().leftMargin;
                                        h += a.get_defaultTextFormat().indent;
                                        h += a.get_defaultTextFormat().blockIndent;
                                        break;
                                    case 4:
                                        h -= a.get_defaultTextFormat().rightMargin
                                }
                                d && (e.y = c.bounds.y, e.x = h)
                            }
                            f.__bounds.copyFrom(e)
                        }
                        m = b.__pixelRatio;
                        f.__update(b.__worldTransform, m);
                        if (a.__dirty || f.__softwareDirty) {
                            r = Math.round(f.__width * m);
                            var g = Math.round(f.__height * m);
                            if (!(null != c.text && "" != c.text || c.background || c.border || c.__hasFocus || 1 == c.type && c.selectable) ||
                                (0 >= c.width || 0 >= c.height) && 2 != c.autoSize) a.__graphics.__canvas = null, a.__graphics.__context = null, a.__graphics.__bitmap = null, a.__graphics.__softwareDirty = !1, a.__graphics.set___dirty(!1), a.__dirty = !1;
                            else {
                                null == a.__graphics.__canvas && (a.__graphics.__canvas = window.document.createElement("canvas"), a.__graphics.__context = a.__graphics.__canvas.getContext("2d"));
                                P.context = f.__context;
                                f.__canvas.width = r;
                                f.__canvas.height = g;
                                b.__isDOM && (f.__canvas.style.width = Math.round(r / m) + "px", f.__canvas.style.height = Math.round(g /
                                    m) + "px");
                                var n = la.__pool.get();
                                n.scale(m, m);
                                n.concat(f.__renderTransform);
                                P.context.setTransform(n.a, n.b, n.c, n.d, n.tx, n.ty);
                                la.__pool.release(n);
                                null == P.clearRect && (P.clearRect = "undefined" !== typeof navigator && "undefined" !== typeof navigator.isCocoonJS);
                                P.clearRect && P.context.clearRect(0, 0, f.__canvas.width, f.__canvas.height);
                                if (null != c.text && "" != c.text || c.__hasFocus) {
                                    r = c.text;
                                    f.__context.imageSmoothingEnabled = !b.__allowSmoothing || 0 == c.antiAliasType && 400 == c.sharpness ? !1 : !0;
                                    if (c.border || c.background) {
                                        P.context.rect(.5,
                                            .5, e.width - 1, e.height - 1);
                                        if (c.background) {
                                            var k = R.hex(c.backgroundColor & 16777215, 6);
                                            P.context.fillStyle = "#" + k;
                                            P.context.fill()
                                        }
                                        c.border && (P.context.lineWidth = 1, k = R.hex(c.borderColor & 16777215, 6), P.context.strokeStyle = "#" + k, P.context.stroke())
                                    }
                                    P.context.textBaseline = "alphabetic";
                                    P.context.textAlign = "start";
                                    g = -a.get_scrollH();
                                    var q = d = 0;
                                    for (k = a.get_scrollV() - 1; q < k;) {
                                        var l = q++;
                                        d -= c.lineHeights.get(l)
                                    }
                                    var p;
                                    for (h = c.layoutGroups.iterator(); h.hasNext();) {
                                        var y = h.next();
                                        if (!(y.lineIndex < a.get_scrollV() - 1)) {
                                            if (y.lineIndex >
                                                c.get_bottomScrollV() - 1) break;
                                            n = "#" + R.hex(y.format.color & 16777215, 6);
                                            P.context.font = lb.getFont(y.format);
                                            P.context.fillStyle = n;
                                            P.context.fillText(r.substring(y.startIndex, y.endIndex), y.offsetX + g - e.x, y.offsetY + y.ascent + d - e.y);
                                            if (-1 < a.__caretIndex && c.selectable)
                                                if (a.__selectionIndex == a.__caretIndex) {
                                                    if (a.__showCursor && y.startIndex <= a.__caretIndex && y.endIndex >= a.__caretIndex) {
                                                        q = p = 0;
                                                        for (k = a.__caretIndex - y.startIndex; q < k;) {
                                                            l = q++;
                                                            if (y.positions.length <= l) break;
                                                            p += y.positions[l]
                                                        }
                                                        q = 0;
                                                        k = a.get_scrollV();
                                                        for (l =
                                                                 y.lineIndex + 1; k < l;) {
                                                            var v = k++;
                                                            q += c.lineHeights.get(v - 1)
                                                        }
                                                        P.context.beginPath();
                                                        k = R.hex(y.format.color & 16777215, 6);
                                                        P.context.strokeStyle = "#" + k;
                                                        P.context.moveTo(y.offsetX + p - a.get_scrollH() - e.x, q + 2 - e.y);
                                                        P.context.lineWidth = 1;
                                                        P.context.lineTo(y.offsetX + p - a.get_scrollH() - e.x, q + lb.getFormatHeight(a.get_defaultTextFormat()) - 1 - e.y);
                                                        P.context.stroke();
                                                        P.context.closePath()
                                                    }
                                                } else if (y.startIndex <= a.__caretIndex && y.endIndex >= a.__caretIndex || y.startIndex <= a.__selectionIndex && y.endIndex >= a.__selectionIndex || y.startIndex >
                                                    a.__caretIndex && y.endIndex < a.__selectionIndex || y.startIndex > a.__selectionIndex && y.endIndex < a.__caretIndex) p = Math.min(a.__selectionIndex, a.__caretIndex) | 0, q = Math.max(a.__selectionIndex, a.__caretIndex) | 0, y.startIndex > p && (p = y.startIndex), y.endIndex < q && (q = y.endIndex), l = a.getCharBoundaries(p), q >= y.endIndex ? (k = a.getCharBoundaries(y.endIndex - 1), null != k && (k.x += k.width + 2)) : k = a.getCharBoundaries(q), null != l && null != k && (P.context.fillStyle = "#000000", P.context.fillRect(l.x + g - e.x, l.y + d, k.x - l.x, y.height), P.context.fillStyle =
                                                    "#FFFFFF", P.context.fillText(r.substring(p, q), g + l.x - e.x, y.offsetY + y.ascent + d));
                                            y.format.underline && (P.context.beginPath(), P.context.strokeStyle = n, P.context.lineWidth = 1, n = y.offsetX + g - e.x, p = Math.ceil(y.offsetY + d + y.ascent - e.y) + Math.floor(.185 * y.ascent) + .5, P.context.moveTo(n, p), P.context.lineTo(n + y.width, p), P.context.stroke(), P.context.closePath())
                                        }
                                    }
                                } else {
                                    if (c.border || c.background) c.border ? P.context.rect(.5, .5, e.width - 1, e.height - 1) : P.context.rect(0, 0, e.width, e.height), c.background && (k = R.hex(c.backgroundColor &
                                        16777215, 6), P.context.fillStyle = "#" + k, P.context.fill()), c.border && (P.context.lineWidth = 1, P.context.lineCap = "square", k = R.hex(c.borderColor & 16777215, 6), P.context.strokeStyle = "#" + k, P.context.stroke());
                                    if (-1 < a.__caretIndex && c.selectable && a.__showCursor) {
                                        g = -a.get_scrollH() + (d ? 0 : h);
                                        q = d = 0;
                                        for (k = a.get_scrollV() - 1; q < k;) l = q++, d += c.lineHeights.get(l);
                                        P.context.beginPath();
                                        k = R.hex(a.get_defaultTextFormat().color & 16777215, 6);
                                        P.context.strokeStyle = "#" + k;
                                        P.context.moveTo(g + 2.5, d + 2.5);
                                        P.context.lineWidth = 1;
                                        P.context.lineTo(g +
                                            2.5, d + lb.getFormatHeight(a.get_defaultTextFormat()) - 1);
                                        P.context.stroke();
                                        P.context.closePath()
                                    }
                                }
                                f.__bitmap = mb.fromCanvas(a.__graphics.__canvas);
                                f.__bitmapScale = m;
                                f.__visible = !0;
                                a.__dirty = !1;
                                f.__softwareDirty = !1;
                                f.set___dirty(!1)
                            }
                        }
                        d = !1;
                        0 == a.__textEngine.antiAliasType && 1 == a.__textEngine.gridFitType && (d = b.context.imageSmoothingEnabled) && (b.context.imageSmoothingEnabled = !1);
                        if ((null != a.opaqueBackground || null != a.__graphics) && a.__renderable && (e = b.__getAlpha(a.__worldAlpha), !(0 >= e) && (null != a.opaqueBackground &&
                        !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height() && (b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a), c = b.context, b.setTransform(a.__renderTransform, c), n = a.opaqueBackground, c.fillStyle = "rgb(" + (n >>> 16 & 255) + "," + (n >>> 8 & 255) + "," + (n & 255) + ")", c.fillRect(0, 0, a.get_width(), a.get_height()), b.__popMaskObject(a)), null != a.__graphics && a.__renderable && (e = b.__getAlpha(a.__worldAlpha), !(0 >= e) && (f = a.__graphics, null != f && (z.render(f, b), r = f.__width, g = f.__height, h = f.__canvas, null != h && f.__visible && 1 <=
                        r && 1 <= g && (y = f.__worldTransform, c = b.context, m = a.__scrollRect, v = a.__worldScale9Grid, null == m || 0 < m.width && 0 < m.height))))))) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            c.globalAlpha = e;
                            if (null != v && 0 == y.b && 0 == y.c) {
                                m = b.__pixelRatio;
                                n = la.__pool.get();
                                n.translate(y.tx, y.ty);
                                b.setTransform(n, c);
                                la.__pool.release(n);
                                e = f.__bounds;
                                q = f.__renderTransform.a / f.__bitmapScale;
                                var t = f.__renderTransform.d / f.__bitmapScale;
                                k = q * y.a;
                                l = t * y.d;
                                f = Math.max(1, Math.round(v.x * q));
                                y = Math.round(v.y * t);
                                n = Math.max(1, Math.round((e.get_right() -
                                    v.get_right()) * q));
                                p = Math.round((e.get_bottom() - v.get_bottom()) * t);
                                q = Math.round(v.width * q);
                                v = Math.round(v.height * t);
                                t = Math.round(f / m);
                                var B = Math.round(y / m),
                                    E = Math.round(n / m);
                                m = Math.round(p / m);
                                k = e.width * k - t - E;
                                e = e.height * l - B - m;
                                b.applySmoothing(c, !1);
                                0 != q && 0 != v ? (c.drawImage(h, 0, 0, f, y, 0, 0, t, B), c.drawImage(h, f, 0, q, y, t, 0, k, B), c.drawImage(h, f + q, 0, n, y, t + k, 0, E, B), c.drawImage(h, 0, y, f, v, 0, B, t, e), c.drawImage(h, f, y, q, v, t, B, k, e), c.drawImage(h, f + q, y, n, v, t + k, B, E, e), c.drawImage(h, 0, y + v, f, p, 0, B + e, t, m), c.drawImage(h,
                                    f, y + v, q, p, t, B + e, k, m), c.drawImage(h, f + q, y + v, n, p, t + k, B + e, E, m)) : 0 == q && 0 != v ? (f = t + k + E, c.drawImage(h, 0, 0, r, y, 0, 0, f, B), c.drawImage(h, 0, y, r, v, 0, B, f, e), c.drawImage(h, 0, y + v, r, p, 0, B + e, f, m)) : 0 == v && 0 != q && (e = B + e + m, c.drawImage(h, 0, 0, f, g, 0, 0, t, e), c.drawImage(h, f, 0, q, g, t, 0, k, e), c.drawImage(h, f + q, 0, n, g, t + k, 0, E, e))
                            } else b.setTransform(y, c), c.drawImage(h, 0, 0, r, g);
                            b.__popMaskObject(a)
                        }
                        d && (b.context.imageSmoothingEnabled = !0)
                    } else a = a.__cacheBitmap, a.__renderable && (e = b.__getAlpha(a.__worldAlpha), 0 < e && null != a.__bitmapData &&
                    a.__bitmapData.__isValid && a.__bitmapData.readable && (c = b.context, b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a, !1), Ba.convertToCanvas(a.__bitmapData.image), c.globalAlpha = e, m = a.__scrollRect, b.setTransform(a.__renderTransform, c), b.__allowSmoothing && a.smoothing || (c.imageSmoothingEnabled = !1), null == m ? c.drawImage(a.__bitmapData.image.get_src(), 0, 0, a.__bitmapData.image.width, a.__bitmapData.image.height) : c.drawImage(a.__bitmapData.image.get_src(), m.x, m.y, m.width, m.height, m.x, m.y, m.width, m.height),
                    b.__allowSmoothing && a.smoothing || (c.imageSmoothingEnabled = !0), b.__popMaskObject(a, !1)))
            };
            P.renderDrawableMask = function (a, b) {
                of.renderDrawableMask(a, b)
            };
            var xe = function () {
            };
            g["openfl.display._internal.CanvasTilemap"] = xe;
            xe.__name__ = "openfl.display._internal.CanvasTilemap";
            xe.renderTileContainer = function (a, b, c, d, e, f, h, r, m, g, n, k) {
                var q = b.context,
                    l = b.__roundPixels,
                    p = la.__pool.get(),
                    y = a.__tiles,
                    C, v = null,
                    t = 0;
                for (a = a.__length; t < a;) {
                    var B = t++;
                    var E = y[B];
                    p.setTo(1, 0, 0, 1, -E.get_originX(), -E.get_originY());
                    p.concat(E.get_matrix());
                    p.concat(c);
                    l && (p.tx = Math.round(p.tx), p.ty = Math.round(p.ty));
                    var x = null != E.get_tileset() ? E.get_tileset() : d;
                    B = E.get_alpha() * h;
                    if ((C = E.get_visible()) && !(0 >= B))
                        if (f || (B = 1), r && (v = null != E.__blendMode ? E.__blendMode : m), 0 < E.__length) xe.renderTileContainer(E, b, p, x, e, f, B, r, v, g, n, k);
                        else if (null != x) {
                            C = E.get_id();
                            if (-1 == C) {
                                if (E = E.__rect, null == E || 0 >= E.width || 0 >= E.height) continue
                            } else {
                                E = x.__data[C];
                                if (null == E) continue;
                                k.setTo(E.x, E.y, E.width, E.height);
                                E = k
                            }
                            x = x.__bitmapData;
                            null != x && null !=
                            x.image && (x != g && (null == x.image.buffer.__srcImage && Ba.convertToCanvas(x.image), n = x.image.get_src(), g = x), q.globalAlpha = B, r && b.__setBlendMode(v), b.setTransform(p, q), q.drawImage(n, E.x, E.y, E.width, E.height, 0, 0, E.width, E.height))
                        }
                }
                la.__pool.release(p)
            };
            xe.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    if (!(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || (v = b.__getAlpha(a.__worldAlpha), 0 >= v))) {
                        if (null != a.opaqueBackground && !a.__isCacheBitmapRender &&
                            0 < a.get_width() && 0 < a.get_height()) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            t = b.context;
                            b.setTransform(a.__renderTransform, t);
                            var c = a.opaqueBackground;
                            t.fillStyle = "rgb(" + (c >>> 16 & 255) + "," + (c >>> 8 & 255) + "," + (c & 255) + ")";
                            t.fillRect(0, 0, a.get_width(), a.get_height());
                            b.__popMaskObject(a)
                        }
                        if (null != a.__graphics && a.__renderable && (v = b.__getAlpha(a.__worldAlpha), !(0 >= v))) {
                            var d = a.__graphics;
                            if (null != d) {
                                z.render(d, b);
                                var e = d.__width,
                                    f = d.__height;
                                c = d.__canvas;
                                if (null != c && d.__visible && 1 <= e && 1 <=
                                    f) {
                                    var h = d.__worldTransform;
                                    t = b.context;
                                    B = a.__scrollRect;
                                    var r = a.__worldScale9Grid;
                                    if (null == B || 0 < B.width && 0 < B.height) {
                                        b.__setBlendMode(a.__worldBlendMode);
                                        b.__pushMaskObject(a);
                                        t.globalAlpha = v;
                                        if (null != r && 0 == h.b && 0 == h.c) {
                                            var m = b.__pixelRatio;
                                            v = la.__pool.get();
                                            v.translate(h.tx, h.ty);
                                            b.setTransform(v, t);
                                            la.__pool.release(v);
                                            v = d.__bounds;
                                            var g = d.__renderTransform.a / d.__bitmapScale,
                                                n = d.__renderTransform.d / d.__bitmapScale,
                                                k = g * h.a,
                                                q = n * h.d;
                                            h = Math.max(1, Math.round(r.x * g));
                                            d = Math.round(r.y * n);
                                            B = Math.max(1,
                                                Math.round((v.get_right() - r.get_right()) * g));
                                            var l = Math.round((v.get_bottom() - r.get_bottom()) * n);
                                            g = Math.round(r.width * g);
                                            r = Math.round(r.height * n);
                                            n = Math.round(h / m);
                                            var p = Math.round(d / m),
                                                y = Math.round(B / m);
                                            m = Math.round(l / m);
                                            k = v.width * k - n - y;
                                            v = v.height * q - p - m;
                                            b.applySmoothing(t, !1);
                                            0 != g && 0 != r ? (t.drawImage(c, 0, 0, h, d, 0, 0, n, p), t.drawImage(c, h, 0, g, d, n, 0, k, p), t.drawImage(c, h + g, 0, B, d, n + k, 0, y, p), t.drawImage(c, 0, d, h, r, 0, p, n, v), t.drawImage(c, h, d, g, r, n, p, k, v), t.drawImage(c, h + g, d, B, r, n + k, p, y, v), t.drawImage(c, 0, d +
                                                r, h, l, 0, p + v, n, m), t.drawImage(c, h, d + r, g, l, n, p + v, k, m), t.drawImage(c, h + g, d + r, B, l, n + k, p + v, y, m)) : 0 == g && 0 != r ? (f = n + k + y, t.drawImage(c, 0, 0, e, d, 0, 0, f, p), t.drawImage(c, 0, d, e, r, 0, p, f, v), t.drawImage(c, 0, d + r, e, l, 0, p + v, f, m)) : 0 == r && 0 != g && (e = p + v + m, t.drawImage(c, 0, 0, h, f, 0, 0, n, e), t.drawImage(c, h, 0, g, f, n, 0, k, e), t.drawImage(c, h + g, 0, B, f, n + k, 0, y, e))
                                        } else b.setTransform(h, t), t.drawImage(c, 0, 0, e, f);
                                        b.__popMaskObject(a)
                                    }
                                }
                            }
                        }
                    }
                    a.__renderable && 0 != a.__group.__tiles.length && (v = b.__getAlpha(a.__worldAlpha), 0 >= v || (t = b.context, b.__setBlendMode(a.__worldBlendMode),
                        b.__pushMaskObject(a), c = ha.__pool.get(), c.setTo(0, 0, a.__width, a.__height), b.__pushMaskRect(c, a.__renderTransform), b.__allowSmoothing && a.smoothing || (t.imageSmoothingEnabled = !1), xe.renderTileContainer(a.__group, b, a.__renderTransform, a.__tileset, b.__allowSmoothing && a.smoothing, a.tileAlphaEnabled, v, a.tileBlendModeEnabled, a.__worldBlendMode, null, null, c), b.__allowSmoothing && a.smoothing || (t.imageSmoothingEnabled = !0), b.__popMaskRect(), b.__popMaskObject(a), ha.__pool.release(c)))
                } else if (c = a.__cacheBitmap,
                    c.__renderable) {
                    var v = b.__getAlpha(c.__worldAlpha);
                    if (0 < v && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable) {
                        var t = b.context;
                        b.__setBlendMode(c.__worldBlendMode);
                        b.__pushMaskObject(c, !1);
                        Ba.convertToCanvas(c.__bitmapData.image);
                        t.globalAlpha = v;
                        var B = c.__scrollRect;
                        b.setTransform(c.__renderTransform, t);
                        b.__allowSmoothing && c.smoothing || (t.imageSmoothingEnabled = !1);
                        null == B ? t.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height) : t.drawImage(c.__bitmapData.image.get_src(),
                            B.x, B.y, B.width, B.height, B.x, B.y, B.width, B.height);
                        b.__allowSmoothing && c.smoothing || (t.imageSmoothingEnabled = !0);
                        b.__popMaskObject(c, !1)
                    }
                }
                b.__renderEvent(a)
            };
            xe.renderDrawableMask = function (a, b) {
            };
            var pf = function () {
            };
            g["openfl.display._internal.CanvasVideo"] = pf;
            pf.__name__ = "openfl.display._internal.CanvasVideo";
            pf.render = function (a, b) {
                if (a.__renderable && null != a.__stream) {
                    var c = b.__getAlpha(a.__worldAlpha);
                    if (!(0 >= c)) {
                        var d = b.context;
                        if (null != a.__stream.__video) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            d.globalAlpha = c;
                            c = a.__scrollRect;
                            var e = a.smoothing;
                            b.setTransform(a.__worldTransform, d);
                            e || (d.imageSmoothingEnabled = !1);
                            null == c ? d.drawImage(a.__stream.__video, 0, 0, a.get_width(), a.get_height()) : d.drawImage(a.__stream.__video, c.x, c.y, c.width, c.height, c.x, c.y, c.width, c.height);
                            e || (d.imageSmoothingEnabled = !0);
                            b.__popMaskObject(a)
                        }
                    }
                }
            };
            pf.renderDrawable = function (a, b) {
                pf.render(a, b);
                b.__renderEvent(a)
            };
            pf.renderDrawableMask = function (a, b) {
            };
            var ld = function () {
            };
            g["openfl.display._internal.Context3DBitmap"] =
                ld;
            ld.__name__ = "openfl.display._internal.Context3DBitmap";
            ld.render = function (a, b) {
                if (a.__renderable && !(0 >= a.__worldAlpha) && null != a.__bitmapData && a.__bitmapData.__isValid) {
                    var c = b.__context3D;
                    b.__setBlendMode(a.__worldBlendMode);
                    b.__pushMaskObject(a);
                    var d = b.__initDisplayShader(a.__worldShader);
                    b.setShader(d);
                    b.applyBitmapData(a.__bitmapData, b.__allowSmoothing && (a.smoothing || b.__upscaled));
                    b.applyMatrix(b.__getMatrix(a.__renderTransform, a.pixelSnapping));
                    b.applyAlpha(a.__worldAlpha);
                    b.applyColorTransform(a.__worldColorTransform);
                    b.updateShader();
                    var e = a.__bitmapData.getVertexBuffer(c);
                    null != d.__position && c.setVertexBufferAt(d.__position.index, e, 0, 3);
                    null != d.__textureCoord && c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
                    d = a.__bitmapData.getIndexBuffer(c);
                    c.drawTriangles(d);
                    b.__clearShader();
                    b.__popMaskObject(a)
                }
            };
            ld.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a, !1);
                null != a.__bitmapData && null != a.__bitmapData.image && (a.__imageVersion = a.__bitmapData.image.version);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    if (!(null ==
                        a.opaqueBackground && null == a.__graphics || !a.__renderable || 0 >= a.__worldAlpha)) {
                        if (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            var c = b.__context3D,
                                d = ha.__pool.get();
                            d.setTo(0, 0, a.get_width(), a.get_height());
                            b.__pushMaskRect(d, a.__renderTransform);
                            var e = a.opaqueBackground;
                            c.clear((e >>> 16 & 255) / 255, (e >>> 8 & 255) / 255, (e & 255) / 255, 1, 0, 0, 1);
                            b.__popMaskRect();
                            b.__popMaskObject(a);
                            ha.__pool.release(d)
                        }
                        null != a.__graphics &&
                        de.render(a, b)
                    }
                    ld.render(a, b)
                } else ld.render(a.__cacheBitmap, b);
                b.__renderEvent(a)
            };
            ld.renderDrawableMask = function (a, b) {
                ld.renderMask(a, b)
            };
            ld.renderMask = function (a, b) {
                if (null != a.__bitmapData && a.__bitmapData.__isValid) {
                    var c = b.__context3D,
                        d = b.__maskShader;
                    b.setShader(d);
                    b.applyBitmapData(qf.opaqueBitmapData, !0);
                    b.applyMatrix(b.__getMatrix(a.__renderTransform, a.pixelSnapping));
                    b.updateShader();
                    var e = a.__bitmapData.getVertexBuffer(c);
                    null != d.__position && c.setVertexBufferAt(d.__position.index, e, 0, 3);
                    null != d.__textureCoord && c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
                    a = a.__bitmapData.getIndexBuffer(c);
                    c.drawTriangles(a);
                    b.__clearShader()
                }
            };
            var xj = function () {
            };
            g["openfl.display._internal.Context3DBitmapData"] = xj;
            xj.__name__ = "openfl.display._internal.Context3DBitmapData";
            xj.renderDrawable = function (a, b) {
                var c = b.__context3D;
                b.__setBlendMode(10);
                var d = b.__defaultDisplayShader;
                b.setShader(d);
                b.applyBitmapData(a, b.__upscaled);
                b.applyMatrix(b.__getMatrix(a.__worldTransform, 1));
                b.applyAlpha(a.__worldAlpha);
                b.applyColorTransform(a.__worldColorTransform);
                b.updateShader();
                var e = a.getVertexBuffer(c);
                null != d.__position && c.setVertexBufferAt(d.__position.index, e, 0, 3);
                null != d.__textureCoord && c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
                a = a.getIndexBuffer(c);
                c.drawTriangles(a);
                b.__clearShader()
            };
            xj.renderDrawableMask = function (a, b) {
                var c = b.__context3D,
                    d = b.__maskShader;
                b.setShader(d);
                b.applyBitmapData(a, b.__upscaled);
                b.applyMatrix(b.__getMatrix(a.__worldTransform, 1));
                b.updateShader();
                var e = a.getVertexBuffer(c);
                null != d.__position && c.setVertexBufferAt(d.__position.index, e, 0, 3);
                null != d.__textureCoord && c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
                a = a.getIndexBuffer(c);
                c.drawTriangles(a);
                b.__clearShader()
            };
            var bh = function (a, b, c, d) {
                this.context3D = a;
                this.elementType = b;
                this.dataPerVertex = d;
                this.vertexCount = this.indexCount = 0;
                this.resize(c)
            };
            g["openfl.display._internal.Context3DBuffer"] = bh;
            bh.__name__ = "openfl.display._internal.Context3DBuffer";
            bh.prototype = {
                flushVertexBufferData: function () {
                    this.vertexBufferData.length >
                    this.vertexCount && (this.vertexCount = this.vertexBufferData.length, this.vertexBuffer = this.context3D.createVertexBuffer(this.vertexCount, this.dataPerVertex, 0));
                    this.vertexBuffer.uploadFromTypedArray(Vg.toArrayBufferView(this.vertexBufferData))
                },
                resize: function (a, b) {
                    null == b && (b = -1);
                    this.elementCount = a;
                    -
                        1 == b && (b = this.dataPerVertex);
                    b != this.dataPerVertex && (this.vertexBuffer = null, this.vertexCount = 0, this.dataPerVertex = b);
                    var c = 0;
                    switch (this.elementType._hx_index) {
                        case 0:
                            c = 4 * a;
                            break;
                        case 1:
                            c = 3 * a;
                            break;
                        case 2:
                            c =
                                3 * a
                    }
                    b *= c;
                    if (null == this.vertexBufferData) {
                        var d = c = null,
                            e = null,
                            f = null,
                            h = null;
                        this.vertexBufferData = b = null != b ? new Float32Array(b) : null != c ? new Float32Array(c) : null != d ? new Float32Array(d.__array) : null != e ? new Float32Array(e) : null != f ? null == h ? new Float32Array(f, 0) : new Float32Array(f, 0, h) : null
                    } else b > this.vertexBufferData.length && (a = this.vertexBufferData, h = f = e = d = c = null, this.vertexBufferData = b = null != b ? new Float32Array(b) : null != c ? new Float32Array(c) : null != d ? new Float32Array(d.__array) : null != e ? new Float32Array(e) :
                        null != f ? null == h ? new Float32Array(f, 0) : new Float32Array(f, 0, h) : null, this.vertexBufferData.set(a))
                },
                __class__: bh
            };
            var Dj = v["openfl.display._internal.Context3DElementType"] = {
                __ename__: "openfl.display._internal.Context3DElementType",
                __constructs__: null,
                QUADS: {
                    _hx_name: "QUADS",
                    _hx_index: 0,
                    __enum__: "openfl.display._internal.Context3DElementType",
                    toString: q
                },
                TRIANGLES: {
                    _hx_name: "TRIANGLES",
                    _hx_index: 1,
                    __enum__: "openfl.display._internal.Context3DElementType",
                    toString: q
                },
                TRIANGLE_INDICES: {
                    _hx_name: "TRIANGLE_INDICES",
                    _hx_index: 2,
                    __enum__: "openfl.display._internal.Context3DElementType",
                    toString: q
                }
            };
            Dj.__constructs__ = [Dj.QUADS, Dj.TRIANGLES, Dj.TRIANGLE_INDICES];
            var rf = function () {
            };
            g["openfl.display._internal.Context3DDisplayObject"] = rf;
            rf.__name__ = "openfl.display._internal.Context3DDisplayObject";
            rf.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null != a.__cacheBitmap && !a.__isCacheBitmapRender) ld.render(a.__cacheBitmap, b);
                else if (!(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || 0 >= a.__worldAlpha)) {
                    if (null !=
                        a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                        b.__setBlendMode(a.__worldBlendMode);
                        b.__pushMaskObject(a);
                        var c = b.__context3D,
                            d = ha.__pool.get();
                        d.setTo(0, 0, a.get_width(), a.get_height());
                        b.__pushMaskRect(d, a.__renderTransform);
                        var e = a.opaqueBackground;
                        c.clear((e >>> 16 & 255) / 255, (e >>> 8 & 255) / 255, (e & 255) / 255, 1, 0, 0, 1);
                        b.__popMaskRect();
                        b.__popMaskObject(a);
                        ha.__pool.release(d)
                    }
                    null != a.__graphics && de.render(a, b)
                }
                b.__renderEvent(a)
            };
            rf.renderDrawableMask = function (a, b) {
                null !=
                a.__graphics && de.renderMask(a, b)
            };
            var yj = function () {
            };
            g["openfl.display._internal.Context3DDisplayObjectContainer"] = yj;
            yj.__name__ = "openfl.display._internal.Context3DDisplayObjectContainer";
            yj.renderDrawable = function (a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext();) {
                    var d = c.next();
                    null == d.stage && d.__cleanup()
                }
                a.__removedChildren.set_length(0);
                if (a.__renderable && !(0 >= a.__worldAlpha) && (rf.renderDrawable(a, b), null == a.__cacheBitmap || a.__isCacheBitmapRender)) {
                    if (0 < a.__children.length)
                        if (b.__pushMaskObject(a),
                        null != b.__stage) {
                            c = 0;
                            for (d = a.__children; c < d.length;) {
                                var e = d[c];
                                ++c;
                                b.__renderDrawable(e);
                                e.__renderDirty = !1
                            }
                            a.__renderDirty = !1
                        } else
                            for (c = 0, d = a.__children; c < d.length;) e = d[c], ++c, b.__renderDrawable(e);
                    0 < a.__children.length && b.__popMaskObject(a)
                }
            };
            yj.renderDrawableMask = function (a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext();) {
                    var d = c.next();
                    null == d.stage && d.__cleanup()
                }
                a.__removedChildren.set_length(0);
                null != a.__graphics && de.renderMask(a, b);
                c = 0;
                for (a = a.__children; c < a.length;) d = a[c], ++c,
                    b.__renderDrawableMask(d)
            };
            var tb = function () {
            };
            g["openfl.display._internal.Context3DGraphics"] = tb;
            tb.__name__ = "openfl.display._internal.Context3DGraphics";
            tb.buildBuffer = function (a, b) {
                var c, d = c = 0,
                    e = 0,
                    f = new ce(a.__commands);
                b = b.__context3D;
                for (var h = ha.__pool.get(), r = la.__pool.get(), m = null, g = 0, n = a.__commands.types; g < n.length;) {
                    var k = n[g];
                    ++g;
                    switch (k._hx_index) {
                        case 0:
                            switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos +=
                                        1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                            }
                            f.prev = Z.BEGIN_BITMAP_FILL;
                            m = f;
                            m = m.buffer.o[m.oPos];
                            break;
                        case 1:
                            m = null;
                            switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos +=
                                        1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                            }
                            f.prev = k;
                            break;
                        case 3:
                            switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                            }
                            f.prev = Z.BEGIN_SHADER_FILL;
                            m = f;
                            k = m.buffer.o[m.oPos];
                            m = null;
                            if (null != k)
                                for (var q = 0, l = k.inputCount; q < l;) {
                                    var p = q++;
                                    if ("bitmap" == k.inputRefs[p].name) {
                                        m = k.inputs[p];
                                        break
                                    }
                                }
                            break;
                        case 8:
                            if (null != m) {
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = Z.DRAW_QUADS;
                                l = f;
                                k = l.buffer.o[l.oPos];
                                q = l.buffer.o[l.oPos + 1];
                                l = l.buffer.o[l.oPos + 2];
                                p = null != q;
                                var y = !1,
                                    v = !1,
                                    t = p ? q.get_length() : Math.floor(k.get_length() / 4);
                                if (0 == t) return;
                                null != l && (l.get_length() >= 6 * t ? v = y = !0 : l.get_length() >= 4 * t ? y = !0 : l.get_length() >= 2 * t && (v = !0));
                                null == a.__quadBuffer ? a.__quadBuffer = new bh(b, Dj.QUADS, t, 4) : a.__quadBuffer.resize(c + t, 4);
                                for (var B, E, x, z, A, u, N, U, I, J, D, ma, ca, F, w = a.__quadBuffer.vertexBufferData, G = m.width, da = m.height, gb = 0, O = t; gb < O;) z = gb++, B = 16 * (c + z),
                                    E = p ? 4 * q.get(z) : 4 * z, 0 > E || (h.setTo(k.get(E), k.get(E + 1), k.get(E + 2), k.get(E + 3)), E = h.width, x = h.height, 0 >= E || 0 >= x || (y && v ? (z *= 6, r.setTo(l.get(z), l.get(z + 1), l.get(z + 2), l.get(z + 3), l.get(z + 4), l.get(z + 5))) : y ? (z *= 4, r.setTo(l.get(z), l.get(z + 1), l.get(z + 2), l.get(z + 3), h.x, h.y)) : v ? (z *= 2, r.tx = l.get(z), r.ty = l.get(z + 1)) : (r.tx = h.x, r.ty = h.y), z = h.x / G, A = h.y / da, u = h.get_right() / G, N = h.get_bottom() / da, U = 0 * r.a + 0 * r.c + r.tx, I = 0 * r.b + 0 * r.d + r.ty, J = E * r.a + 0 * r.c + r.tx, D = E * r.b + 0 * r.d + r.ty, ma = 0 * r.a + x * r.c + r.tx, ca = 0 * r.b + x * r.d + r.ty, F = E * r.a +
                                    x * r.c + r.tx, E = E * r.b + x * r.d + r.ty, w[B] = U, w[B + 1] = I, w[B + 2] = z, w[B + 3] = A, w[B + 4] = J, w[B + 4 + 1] = D, w[B + 4 + 2] = u, w[B + 4 + 3] = A, w[B + 8] = ma, w[B + 8 + 1] = ca, w[B + 8 + 2] = z, w[B + 8 + 3] = N, w[B + 12] = F, w[B + 12 + 1] = E, w[B + 12 + 2] = u, w[B + 12 + 3] = N));
                                c += t
                            }
                            break;
                        case 12:
                            switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                            }
                            f.prev = Z.DRAW_TRIANGLES;
                            l = f;
                            k = l.buffer.o[l.oPos];
                            q = l.buffer.o[l.oPos + 1];
                            l = l.buffer.o[l.oPos + 2];
                            p = null != q;
                            t = Math.floor(k.get_length() / 2);
                            y = p ? q.get_length() : t;
                            B = (t = (v = null != l) && l.get_length() >=
                                3 * t) ? 4 : 2;
                            w = t ? 3 : 2;
                            G = B + 2;
                            da = t ? e : d;
                            tb.resizeVertexBuffer(a, t, da + y * G);
                            gb = t ? a.__vertexBufferDataUVT : a.__vertexBufferData;
                            x = 0;
                            for (z = y; x < z;) A = x++, O = da + A * G, E = p ? 2 * q.get(A) : 2 * A, A = p ? q.get(A) * w : A * w, t ? (u = l.get(A + 2), gb[O] = k.get(E) / u, gb[O + 1] = k.get(E + 1) / u, gb[O + 2] = 0, gb[O + 3] = 1 / u) : (gb[O] = k.get(E), gb[O + 1] = k.get(E + 1)), gb[O + B] = v ? l.get(A) : 0, gb[O + B + 1] = v ? l.get(A + 1) : 0;
                            t ? e += y * G : d += y * G;
                            break;
                        case 13:
                            m = null;
                            break;
                        default:
                            switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos +=
                                        4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                            }
                            f.prev = k
                    }
                }
                0 <
                c && a.__quadBuffer.flushVertexBufferData();
                if (0 < d) {
                    c = a.__vertexBuffer;
                    if (null == c || d > a.__vertexBufferCount) c = b.createVertexBuffer(d, 4, 0), a.__vertexBuffer = c, a.__vertexBufferCount = d;
                    c.uploadFromTypedArray(Vg.toArrayBufferView(a.__vertexBufferData))
                }
                if (0 < e) {
                    c = a.__vertexBufferUVT;
                    if (null == c || e > a.__vertexBufferCountUVT) c = b.createVertexBuffer(e, 6, 0), a.__vertexBufferUVT = c, a.__vertexBufferCountUVT = e;
                    c.uploadFromTypedArray(Vg.toArrayBufferView(a.__vertexBufferDataUVT))
                }
                ha.__pool.release(h);
                la.__pool.release(r)
            };
            tb.isCompatible = function (a) {
                if (null != a.__owner.__worldScale9Grid) return !1;
                var b = new ce(a.__commands),
                    c = !1,
                    d = !1,
                    e = !1,
                    f = 0;
                for (a = a.__commands.types; f < a.length;) {
                    var h = a[f];
                    ++f;
                    switch (h._hx_index) {
                        case 0:
                            d = !0;
                            e = c = !1;
                            switch (b.prev._hx_index) {
                                case 0:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 1:
                                    b.iPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 2:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 3:
                                    b.oPos += 1;
                                    break;
                                case 4:
                                    b.fPos += 6;
                                    break;
                                case 5:
                                    b.fPos += 4;
                                    break;
                                case 6:
                                    b.fPos += 3;
                                    break;
                                case 7:
                                    b.fPos += 4;
                                    break;
                                case 8:
                                    b.oPos += 3;
                                    break;
                                case 9:
                                    b.fPos +=
                                        4;
                                    break;
                                case 10:
                                    b.fPos += 5;
                                    b.oPos += 1;
                                    break;
                                case 12:
                                    b.oPos += 4;
                                    break;
                                case 14:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 15:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 16:
                                    b.oPos += 4;
                                    b.iPos += 1;
                                    b.fPos += 2;
                                    b.bPos += 1;
                                    break;
                                case 17:
                                    b.fPos += 2;
                                    break;
                                case 18:
                                    b.fPos += 2;
                                    break;
                                case 19:
                                    b.oPos += 1;
                                    break;
                                case 20:
                                    b.oPos += 1
                            }
                            b.prev = h;
                            break;
                        case 1:
                            d = !1;
                            c = !0;
                            e = !1;
                            switch (b.prev._hx_index) {
                                case 0:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 1:
                                    b.iPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 2:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 3:
                                    b.oPos += 1;
                                    break;
                                case 4:
                                    b.fPos += 6;
                                    break;
                                case 5:
                                    b.fPos += 4;
                                    break;
                                case 6:
                                    b.fPos += 3;
                                    break;
                                case 7:
                                    b.fPos += 4;
                                    break;
                                case 8:
                                    b.oPos += 3;
                                    break;
                                case 9:
                                    b.fPos += 4;
                                    break;
                                case 10:
                                    b.fPos += 5;
                                    b.oPos += 1;
                                    break;
                                case 12:
                                    b.oPos += 4;
                                    break;
                                case 14:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 15:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 16:
                                    b.oPos += 4;
                                    b.iPos += 1;
                                    b.fPos += 2;
                                    b.bPos += 1;
                                    break;
                                case 17:
                                    b.fPos += 2;
                                    break;
                                case 18:
                                    b.fPos += 2;
                                    break;
                                case 19:
                                    b.oPos += 1;
                                    break;
                                case 20:
                                    b.oPos += 1
                            }
                            b.prev = h;
                            break;
                        case 3:
                            c = d = !1;
                            e = !0;
                            switch (b.prev._hx_index) {
                                case 0:
                                    b.oPos +=
                                        2;
                                    b.bPos += 2;
                                    break;
                                case 1:
                                    b.iPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 2:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 3:
                                    b.oPos += 1;
                                    break;
                                case 4:
                                    b.fPos += 6;
                                    break;
                                case 5:
                                    b.fPos += 4;
                                    break;
                                case 6:
                                    b.fPos += 3;
                                    break;
                                case 7:
                                    b.fPos += 4;
                                    break;
                                case 8:
                                    b.oPos += 3;
                                    break;
                                case 9:
                                    b.fPos += 4;
                                    break;
                                case 10:
                                    b.fPos += 5;
                                    b.oPos += 1;
                                    break;
                                case 12:
                                    b.oPos += 4;
                                    break;
                                case 14:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 15:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 16:
                                    b.oPos += 4;
                                    b.iPos += 1;
                                    b.fPos += 2;
                                    b.bPos += 1;
                                    break;
                                case 17:
                                    b.fPos += 2;
                                    break;
                                case 18:
                                    b.fPos +=
                                        2;
                                    break;
                                case 19:
                                    b.oPos += 1;
                                    break;
                                case 20:
                                    b.oPos += 1
                            }
                            b.prev = h;
                            break;
                        case 8:
                            if (d || e) {
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos +=
                                            2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = h
                            } else return b.destroy(), !1;
                            break;
                        case 9:
                            if (c) {
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos +=
                                            3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = h
                            } else return b.destroy(), !1;
                            break;
                        case 12:
                            if (d || e) {
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = h
                            } else return b.destroy(),
                                !1;
                            break;
                        case 13:
                            e = c = d = !1;
                            switch (b.prev._hx_index) {
                                case 0:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 1:
                                    b.iPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 2:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 3:
                                    b.oPos += 1;
                                    break;
                                case 4:
                                    b.fPos += 6;
                                    break;
                                case 5:
                                    b.fPos += 4;
                                    break;
                                case 6:
                                    b.fPos += 3;
                                    break;
                                case 7:
                                    b.fPos += 4;
                                    break;
                                case 8:
                                    b.oPos += 3;
                                    break;
                                case 9:
                                    b.fPos += 4;
                                    break;
                                case 10:
                                    b.fPos += 5;
                                    b.oPos += 1;
                                    break;
                                case 12:
                                    b.oPos += 4;
                                    break;
                                case 14:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 15:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 16:
                                    b.oPos += 4;
                                    b.iPos +=
                                        1;
                                    b.fPos += 2;
                                    b.bPos += 1;
                                    break;
                                case 17:
                                    b.fPos += 2;
                                    break;
                                case 18:
                                    b.fPos += 2;
                                    break;
                                case 19:
                                    b.oPos += 1;
                                    break;
                                case 20:
                                    b.oPos += 1
                            }
                            b.prev = h;
                            break;
                        case 18:
                            switch (b.prev._hx_index) {
                                case 0:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 1:
                                    b.iPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 2:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 3:
                                    b.oPos += 1;
                                    break;
                                case 4:
                                    b.fPos += 6;
                                    break;
                                case 5:
                                    b.fPos += 4;
                                    break;
                                case 6:
                                    b.fPos += 3;
                                    break;
                                case 7:
                                    b.fPos += 4;
                                    break;
                                case 8:
                                    b.oPos += 3;
                                    break;
                                case 9:
                                    b.fPos += 4;
                                    break;
                                case 10:
                                    b.fPos += 5;
                                    b.oPos += 1;
                                    break;
                                case 12:
                                    b.oPos += 4;
                                    break;
                                case 14:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 15:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 16:
                                    b.oPos += 4;
                                    b.iPos += 1;
                                    b.fPos += 2;
                                    b.bPos += 1;
                                    break;
                                case 17:
                                    b.fPos += 2;
                                    break;
                                case 18:
                                    b.fPos += 2;
                                    break;
                                case 19:
                                    b.oPos += 1;
                                    break;
                                case 20:
                                    b.oPos += 1
                            }
                            b.prev = h;
                            break;
                        case 19:
                            switch (b.prev._hx_index) {
                                case 0:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 1:
                                    b.iPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 2:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 3:
                                    b.oPos += 1;
                                    break;
                                case 4:
                                    b.fPos += 6;
                                    break;
                                case 5:
                                    b.fPos += 4;
                                    break;
                                case 6:
                                    b.fPos += 3;
                                    break;
                                case 7:
                                    b.fPos +=
                                        4;
                                    break;
                                case 8:
                                    b.oPos += 3;
                                    break;
                                case 9:
                                    b.fPos += 4;
                                    break;
                                case 10:
                                    b.fPos += 5;
                                    b.oPos += 1;
                                    break;
                                case 12:
                                    b.oPos += 4;
                                    break;
                                case 14:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 15:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 16:
                                    b.oPos += 4;
                                    b.iPos += 1;
                                    b.fPos += 2;
                                    b.bPos += 1;
                                    break;
                                case 17:
                                    b.fPos += 2;
                                    break;
                                case 18:
                                    b.fPos += 2;
                                    break;
                                case 19:
                                    b.oPos += 1;
                                    break;
                                case 20:
                                    b.oPos += 1
                            }
                            b.prev = h;
                            break;
                        default:
                            return b.destroy(), !1
                    }
                }
                b.destroy();
                return !0
            };
            tb.render = function (a, b) {
                if (a.__visible && 0 != a.__commands.get_length())
                    if (null != a.__bitmap &&
                        !a.__dirty || !tb.isCompatible(a)) {
                        b.__softwareRenderer.__pixelRatio = b.__pixelRatio;
                        var c = b.__softwareRenderer.__worldTransform;
                        b.__softwareRenderer.__worldTransform = 7 == a.__owner.__drawableType ? la.__identity : b.__worldTransform;
                        z.render(a, b.__softwareRenderer);
                        b.__softwareRenderer.__worldTransform = c
                    } else {
                        a.__bitmap = null;
                        a.__update(b.__worldTransform, b.__pixelRatio);
                        var d = a.__width,
                            e = a.__height;
                        if (null != a.__bounds && 1 <= d && 1 <= e) {
                            (a.__hardwareDirty || null == a.__quadBuffer && null == a.__vertexBuffer && null == a.__vertexBufferUVT) &&
                            tb.buildBuffer(a, b);
                            c = new ce(a.__commands);
                            for (var f = b.__context3D, h = la.__pool.get(), r = null, m = null, g = !1, n = !1, k = null, q = 0, l = 0, p = 0, y = 0, v = 0, t = a.__commands.types; v < t.length;) switch (d = t[v], ++v, d._hx_index) {
                                case 0:
                                    switch (c.prev._hx_index) {
                                        case 0:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 1:
                                            c.iPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 2:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 3:
                                            c.oPos += 1;
                                            break;
                                        case 4:
                                            c.fPos += 6;
                                            break;
                                        case 5:
                                            c.fPos += 4;
                                            break;
                                        case 6:
                                            c.fPos += 3;
                                            break;
                                        case 7:
                                            c.fPos += 4;
                                            break;
                                        case 8:
                                            c.oPos += 3;
                                            break;
                                        case 9:
                                            c.fPos +=
                                                4;
                                            break;
                                        case 10:
                                            c.fPos += 5;
                                            c.oPos += 1;
                                            break;
                                        case 12:
                                            c.oPos += 4;
                                            break;
                                        case 14:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 15:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 16:
                                            c.oPos += 4;
                                            c.iPos += 1;
                                            c.fPos += 2;
                                            c.bPos += 1;
                                            break;
                                        case 17:
                                            c.fPos += 2;
                                            break;
                                        case 18:
                                            c.fPos += 2;
                                            break;
                                        case 19:
                                            c.oPos += 1;
                                            break;
                                        case 20:
                                            c.oPos += 1
                                    }
                                    c.prev = Z.BEGIN_BITMAP_FILL;
                                    n = c;
                                    m = n.buffer.o[n.oPos];
                                    g = n.buffer.b[n.bPos];
                                    n = n.buffer.b[n.bPos + 1];
                                    k = r = null;
                                    break;
                                case 1:
                                    switch (c.prev._hx_index) {
                                        case 0:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 1:
                                            c.iPos += 1;
                                            c.fPos +=
                                                1;
                                            break;
                                        case 2:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 3:
                                            c.oPos += 1;
                                            break;
                                        case 4:
                                            c.fPos += 6;
                                            break;
                                        case 5:
                                            c.fPos += 4;
                                            break;
                                        case 6:
                                            c.fPos += 3;
                                            break;
                                        case 7:
                                            c.fPos += 4;
                                            break;
                                        case 8:
                                            c.oPos += 3;
                                            break;
                                        case 9:
                                            c.fPos += 4;
                                            break;
                                        case 10:
                                            c.fPos += 5;
                                            c.oPos += 1;
                                            break;
                                        case 12:
                                            c.oPos += 4;
                                            break;
                                        case 14:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 15:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 16:
                                            c.oPos += 4;
                                            c.iPos += 1;
                                            c.fPos += 2;
                                            c.bPos += 1;
                                            break;
                                        case 17:
                                            c.fPos += 2;
                                            break;
                                        case 18:
                                            c.fPos += 2;
                                            break;
                                        case 19:
                                            c.oPos += 1;
                                            break;
                                        case 20:
                                            c.oPos +=
                                                1
                                    }
                                    c.prev = Z.BEGIN_FILL;
                                    m = c;
                                    k = (m.buffer.i[m.iPos] | 0) & 16777215 | (255 * m.buffer.f[m.fPos] | 0) << 24;
                                    m = r = null;
                                    break;
                                case 3:
                                    switch (c.prev._hx_index) {
                                        case 0:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 1:
                                            c.iPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 2:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 3:
                                            c.oPos += 1;
                                            break;
                                        case 4:
                                            c.fPos += 6;
                                            break;
                                        case 5:
                                            c.fPos += 4;
                                            break;
                                        case 6:
                                            c.fPos += 3;
                                            break;
                                        case 7:
                                            c.fPos += 4;
                                            break;
                                        case 8:
                                            c.oPos += 3;
                                            break;
                                        case 9:
                                            c.fPos += 4;
                                            break;
                                        case 10:
                                            c.fPos += 5;
                                            c.oPos += 1;
                                            break;
                                        case 12:
                                            c.oPos += 4;
                                            break;
                                        case 14:
                                            c.oPos += 2;
                                            c.bPos +=
                                                2;
                                            break;
                                        case 15:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 16:
                                            c.oPos += 4;
                                            c.iPos += 1;
                                            c.fPos += 2;
                                            c.bPos += 1;
                                            break;
                                        case 17:
                                            c.fPos += 2;
                                            break;
                                        case 18:
                                            c.fPos += 2;
                                            break;
                                        case 19:
                                            c.oPos += 1;
                                            break;
                                        case 20:
                                            c.oPos += 1
                                    }
                                    c.prev = Z.BEGIN_SHADER_FILL;
                                    l = c;
                                    r = l.buffer.o[l.oPos];
                                    l = 0;
                                    m = null == r || null == r.shader || null == r.shader.__bitmap ? null : r.shader.__bitmap.input;
                                    k = null;
                                    break;
                                case 8:
                                    if (null != m) {
                                        switch (c.prev._hx_index) {
                                            case 0:
                                                c.oPos += 2;
                                                c.bPos += 2;
                                                break;
                                            case 1:
                                                c.iPos += 1;
                                                c.fPos += 1;
                                                break;
                                            case 2:
                                                c.oPos += 4;
                                                c.iiPos += 2;
                                                c.ffPos +=
                                                    1;
                                                c.fPos += 1;
                                                break;
                                            case 3:
                                                c.oPos += 1;
                                                break;
                                            case 4:
                                                c.fPos += 6;
                                                break;
                                            case 5:
                                                c.fPos += 4;
                                                break;
                                            case 6:
                                                c.fPos += 3;
                                                break;
                                            case 7:
                                                c.fPos += 4;
                                                break;
                                            case 8:
                                                c.oPos += 3;
                                                break;
                                            case 9:
                                                c.fPos += 4;
                                                break;
                                            case 10:
                                                c.fPos += 5;
                                                c.oPos += 1;
                                                break;
                                            case 12:
                                                c.oPos += 4;
                                                break;
                                            case 14:
                                                c.oPos += 2;
                                                c.bPos += 2;
                                                break;
                                            case 15:
                                                c.oPos += 4;
                                                c.iiPos += 2;
                                                c.ffPos += 1;
                                                c.fPos += 1;
                                                break;
                                            case 16:
                                                c.oPos += 4;
                                                c.iPos += 1;
                                                c.fPos += 2;
                                                c.bPos += 1;
                                                break;
                                            case 17:
                                                c.fPos += 2;
                                                break;
                                            case 18:
                                                c.fPos += 2;
                                                break;
                                            case 19:
                                                c.oPos += 1;
                                                break;
                                            case 20:
                                                c.oPos += 1
                                        }
                                        c.prev = Z.DRAW_QUADS;
                                        var B = c;
                                        d =
                                            B.buffer.o[B.oPos];
                                        B = B.buffer.o[B.oPos + 1];
                                        d = null != B ? B.get_length() : Math.floor(d.get_length() / 4);
                                        var E = b.__getMatrix(a.__owner.__renderTransform, 1);
                                        null == r || tb.maskRender ? (B = tb.maskRender ? b.__maskShader : b.__initGraphicsShader(null), b.setShader(B), b.applyMatrix(E), b.applyBitmapData(m, n, g), b.applyAlpha(a.__owner.__worldAlpha), b.applyColorTransform(a.__owner.__worldColorTransform), b.updateShader()) : (B = b.__initShaderBuffer(r), b.__setShaderBuffer(r), b.applyMatrix(E), b.applyBitmapData(m, !1, g), b.applyAlpha(a.__owner.__worldAlpha),
                                            b.applyColorTransform(a.__owner.__worldColorTransform));
                                        for (E = q + d; q < E;) {
                                            d = Math.min(E - q, f.__quadIndexBufferElements) | 0;
                                            if (0 >= d) break;
                                            null == r || tb.maskRender || b.__updateShaderBuffer(l);
                                            null != B.__position && f.setVertexBufferAt(B.__position.index, a.__quadBuffer.vertexBuffer, 16 * q, 2);
                                            null != B.__textureCoord && f.setVertexBufferAt(B.__textureCoord.index, a.__quadBuffer.vertexBuffer, 16 * q + 2, 2);
                                            f.drawTriangles(f.__quadIndexBuffer, 0, 2 * d);
                                            l += 4 * d;
                                            q += d
                                        }
                                        b.__clearShader()
                                    }
                                    break;
                                case 9:
                                    if (null != k) {
                                        switch (c.prev._hx_index) {
                                            case 0:
                                                c.oPos +=
                                                    2;
                                                c.bPos += 2;
                                                break;
                                            case 1:
                                                c.iPos += 1;
                                                c.fPos += 1;
                                                break;
                                            case 2:
                                                c.oPos += 4;
                                                c.iiPos += 2;
                                                c.ffPos += 1;
                                                c.fPos += 1;
                                                break;
                                            case 3:
                                                c.oPos += 1;
                                                break;
                                            case 4:
                                                c.fPos += 6;
                                                break;
                                            case 5:
                                                c.fPos += 4;
                                                break;
                                            case 6:
                                                c.fPos += 3;
                                                break;
                                            case 7:
                                                c.fPos += 4;
                                                break;
                                            case 8:
                                                c.oPos += 3;
                                                break;
                                            case 9:
                                                c.fPos += 4;
                                                break;
                                            case 10:
                                                c.fPos += 5;
                                                c.oPos += 1;
                                                break;
                                            case 12:
                                                c.oPos += 4;
                                                break;
                                            case 14:
                                                c.oPos += 2;
                                                c.bPos += 2;
                                                break;
                                            case 15:
                                                c.oPos += 4;
                                                c.iiPos += 2;
                                                c.ffPos += 1;
                                                c.fPos += 1;
                                                break;
                                            case 16:
                                                c.oPos += 4;
                                                c.iPos += 1;
                                                c.fPos += 2;
                                                c.bPos += 1;
                                                break;
                                            case 17:
                                                c.fPos += 2;
                                                break;
                                            case 18:
                                                c.fPos +=
                                                    2;
                                                break;
                                            case 19:
                                                c.oPos += 1;
                                                break;
                                            case 20:
                                                c.oPos += 1
                                        }
                                        c.prev = Z.DRAW_RECT;
                                        var x = c;
                                        B = x.buffer.f[x.fPos];
                                        E = x.buffer.f[x.fPos + 1];
                                        d = x.buffer.f[x.fPos + 2];
                                        e = x.buffer.f[x.fPos + 3];
                                        x = k;
                                        tb.tempColorTransform.redOffset = x >>> 16 & 255;
                                        tb.tempColorTransform.greenOffset = x >>> 8 & 255;
                                        tb.tempColorTransform.blueOffset = x & 255;
                                        tb.tempColorTransform.__combine(a.__owner.__worldColorTransform);
                                        h.identity();
                                        h.scale(d, e);
                                        h.tx = B;
                                        h.ty = E;
                                        h.concat(a.__owner.__renderTransform);
                                        d = tb.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                        b.setShader(d);
                                        b.applyMatrix(b.__getMatrix(h, 1));
                                        b.applyBitmapData(tb.blankBitmapData, !0, g);
                                        b.applyAlpha((x >>> 24 & 255) / 255 * a.__owner.__worldAlpha);
                                        b.applyColorTransform(tb.tempColorTransform);
                                        b.updateShader();
                                        B = tb.blankBitmapData.getVertexBuffer(f);
                                        null != d.__position && f.setVertexBufferAt(d.__position.index, B, 0, 3);
                                        null != d.__textureCoord && f.setVertexBufferAt(d.__textureCoord.index, B, 3, 2);
                                        d = tb.blankBitmapData.getIndexBuffer(f);
                                        f.drawTriangles(d);
                                        l += 4;
                                        b.__clearShader()
                                    }
                                    break;
                                case 12:
                                    switch (c.prev._hx_index) {
                                        case 0:
                                            c.oPos +=
                                                2;
                                            c.bPos += 2;
                                            break;
                                        case 1:
                                            c.iPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 2:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 3:
                                            c.oPos += 1;
                                            break;
                                        case 4:
                                            c.fPos += 6;
                                            break;
                                        case 5:
                                            c.fPos += 4;
                                            break;
                                        case 6:
                                            c.fPos += 3;
                                            break;
                                        case 7:
                                            c.fPos += 4;
                                            break;
                                        case 8:
                                            c.oPos += 3;
                                            break;
                                        case 9:
                                            c.fPos += 4;
                                            break;
                                        case 10:
                                            c.fPos += 5;
                                            c.oPos += 1;
                                            break;
                                        case 12:
                                            c.oPos += 4;
                                            break;
                                        case 14:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 15:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 16:
                                            c.oPos += 4;
                                            c.iPos += 1;
                                            c.fPos += 2;
                                            c.bPos += 1;
                                            break;
                                        case 17:
                                            c.fPos += 2;
                                            break;
                                        case 18:
                                            c.fPos +=
                                                2;
                                            break;
                                        case 19:
                                            c.oPos += 1;
                                            break;
                                        case 20:
                                            c.oPos += 1
                                    }
                                    c.prev = Z.DRAW_TRIANGLES;
                                    e = c;
                                    B = e.buffer.o[e.oPos + 1];
                                    E = e.buffer.o[e.oPos + 2];
                                    d = e.buffer.o[e.oPos + 3];
                                    x = null != B;
                                    e = Math.floor(e.buffer.o[e.oPos].get_length() / 2);
                                    B = x ? B.get_length() : e;
                                    x = (E = null != E && E.get_length() >= 3 * e) ? 4 : 2;
                                    e = x + 2;
                                    var A = E ? a.__vertexBufferUVT : a.__vertexBuffer,
                                        u = E ? y : p,
                                        N = b.__getMatrix(a.__owner.__renderTransform, 1);
                                    if (null == r || tb.maskRender) {
                                        var U = tb.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                        b.setShader(U);
                                        b.applyMatrix(N);
                                        b.applyBitmapData(m,
                                            n, g);
                                        b.applyAlpha(a.__owner.__worldAlpha);
                                        b.applyColorTransform(a.__owner.__worldColorTransform);
                                        b.updateShader()
                                    } else U = b.__initShaderBuffer(r), b.__setShaderBuffer(r), b.applyMatrix(N), b.applyBitmapData(m, !1, g), b.applyAlpha(1), b.applyColorTransform(null), b.__updateShaderBuffer(l);
                                    null != U.__position && f.setVertexBufferAt(U.__position.index, A, u, E ? 4 : 2);
                                    null != U.__textureCoord && f.setVertexBufferAt(U.__textureCoord.index, A, u + x, 2);
                                    switch (d) {
                                        case 0:
                                            f.setCulling(0);
                                            break;
                                        case 1:
                                            f.setCulling(3);
                                            break;
                                        case 2:
                                            f.setCulling(1)
                                    }
                                    f.__drawTriangles(0,
                                        B);
                                    l += B;
                                    E ? y += e * B : p += e * B;
                                    switch (d) {
                                        case 1:
                                        case 2:
                                            f.setCulling(0)
                                    }
                                    b.__clearShader();
                                    break;
                                case 13:
                                    r = k = m = null;
                                    switch (c.prev._hx_index) {
                                        case 0:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 1:
                                            c.iPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 2:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 3:
                                            c.oPos += 1;
                                            break;
                                        case 4:
                                            c.fPos += 6;
                                            break;
                                        case 5:
                                            c.fPos += 4;
                                            break;
                                        case 6:
                                            c.fPos += 3;
                                            break;
                                        case 7:
                                            c.fPos += 4;
                                            break;
                                        case 8:
                                            c.oPos += 3;
                                            break;
                                        case 9:
                                            c.fPos += 4;
                                            break;
                                        case 10:
                                            c.fPos += 5;
                                            c.oPos += 1;
                                            break;
                                        case 12:
                                            c.oPos += 4;
                                            break;
                                        case 14:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 15:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 16:
                                            c.oPos += 4;
                                            c.iPos += 1;
                                            c.fPos += 2;
                                            c.bPos += 1;
                                            break;
                                        case 17:
                                            c.fPos += 2;
                                            break;
                                        case 18:
                                            c.fPos += 2;
                                            break;
                                        case 19:
                                            c.oPos += 1;
                                            break;
                                        case 20:
                                            c.oPos += 1
                                    }
                                    c.prev = d;
                                    f.setCulling(3);
                                    break;
                                case 18:
                                    switch (c.prev._hx_index) {
                                        case 0:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 1:
                                            c.iPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 2:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 3:
                                            c.oPos += 1;
                                            break;
                                        case 4:
                                            c.fPos += 6;
                                            break;
                                        case 5:
                                            c.fPos += 4;
                                            break;
                                        case 6:
                                            c.fPos += 3;
                                            break;
                                        case 7:
                                            c.fPos += 4;
                                            break;
                                        case 8:
                                            c.oPos +=
                                                3;
                                            break;
                                        case 9:
                                            c.fPos += 4;
                                            break;
                                        case 10:
                                            c.fPos += 5;
                                            c.oPos += 1;
                                            break;
                                        case 12:
                                            c.oPos += 4;
                                            break;
                                        case 14:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 15:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 16:
                                            c.oPos += 4;
                                            c.iPos += 1;
                                            c.fPos += 2;
                                            c.bPos += 1;
                                            break;
                                        case 17:
                                            c.fPos += 2;
                                            break;
                                        case 18:
                                            c.fPos += 2;
                                            break;
                                        case 19:
                                            c.oPos += 1;
                                            break;
                                        case 20:
                                            c.oPos += 1
                                    }
                                    c.prev = Z.MOVE_TO;
                                    break;
                                case 19:
                                    switch (c.prev._hx_index) {
                                        case 0:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 1:
                                            c.iPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 2:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 3:
                                            c.oPos +=
                                                1;
                                            break;
                                        case 4:
                                            c.fPos += 6;
                                            break;
                                        case 5:
                                            c.fPos += 4;
                                            break;
                                        case 6:
                                            c.fPos += 3;
                                            break;
                                        case 7:
                                            c.fPos += 4;
                                            break;
                                        case 8:
                                            c.oPos += 3;
                                            break;
                                        case 9:
                                            c.fPos += 4;
                                            break;
                                        case 10:
                                            c.fPos += 5;
                                            c.oPos += 1;
                                            break;
                                        case 12:
                                            c.oPos += 4;
                                            break;
                                        case 14:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 15:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 16:
                                            c.oPos += 4;
                                            c.iPos += 1;
                                            c.fPos += 2;
                                            c.bPos += 1;
                                            break;
                                        case 17:
                                            c.fPos += 2;
                                            break;
                                        case 18:
                                            c.fPos += 2;
                                            break;
                                        case 19:
                                            c.oPos += 1;
                                            break;
                                        case 20:
                                            c.oPos += 1
                                    }
                                    c.prev = Z.OVERRIDE_BLEND_MODE;
                                    d = c;
                                    b.__setBlendMode(d.buffer.o[d.oPos]);
                                    break;
                                default:
                                    switch (c.prev._hx_index) {
                                        case 0:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 1:
                                            c.iPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 2:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 3:
                                            c.oPos += 1;
                                            break;
                                        case 4:
                                            c.fPos += 6;
                                            break;
                                        case 5:
                                            c.fPos += 4;
                                            break;
                                        case 6:
                                            c.fPos += 3;
                                            break;
                                        case 7:
                                            c.fPos += 4;
                                            break;
                                        case 8:
                                            c.oPos += 3;
                                            break;
                                        case 9:
                                            c.fPos += 4;
                                            break;
                                        case 10:
                                            c.fPos += 5;
                                            c.oPos += 1;
                                            break;
                                        case 12:
                                            c.oPos += 4;
                                            break;
                                        case 14:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 15:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 16:
                                            c.oPos += 4;
                                            c.iPos += 1;
                                            c.fPos +=
                                                2;
                                            c.bPos += 1;
                                            break;
                                        case 17:
                                            c.fPos += 2;
                                            break;
                                        case 18:
                                            c.fPos += 2;
                                            break;
                                        case 19:
                                            c.oPos += 1;
                                            break;
                                        case 20:
                                            c.oPos += 1
                                    }
                                    c.prev = d
                            }
                            la.__pool.release(h)
                        }
                        a.__hardwareDirty = !1;
                        a.set___dirty(!1)
                    }
            };
            tb.renderMask = function (a, b) {
                tb.maskRender = !0;
                tb.render(a, b);
                tb.maskRender = !1
            };
            tb.resizeVertexBuffer = function (a, b, c) {
                var d = b ? a.__vertexBufferDataUVT : a.__vertexBufferData,
                    e = null;
                if (null == d) {
                    var f = e = null,
                        h = null,
                        r = null,
                        m = null;
                    e = c = null != c ? new Float32Array(c) : null != e ? new Float32Array(e) : null != f ? new Float32Array(f.__array) : null !=
                    h ? new Float32Array(h) : null != r ? null == m ? new Float32Array(r, 0) : new Float32Array(r, 0, m) : null
                } else c > d.length && (m = r = h = f = e = null, e = c = null != c ? new Float32Array(c) : null != e ? new Float32Array(e) : null != f ? new Float32Array(f.__array) : null != h ? new Float32Array(h) : null != r ? null == m ? new Float32Array(r, 0) : new Float32Array(r, 0, m) : null, e.set(d));
                null != e && (b ? a.__vertexBufferDataUVT = e : a.__vertexBufferData = e)
            };
            var qf = function () {
                null == this.__glFragmentSource && (this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t\tif (color.a == 0.0) {\n\n\t\t\t\tdiscard;\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = color;\n\n\t\t\t}\n\n\t\t}");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}");
                vd.call(this);
                this.__isGenerated = !0;
                this.__initGL()
            };
            g["openfl.display._internal.Context3DMaskShader"] = qf;
            qf.__name__ = "openfl.display._internal.Context3DMaskShader";
            qf.__super__ = vd;
            qf.prototype = l(vd.prototype, {
                __class__: qf
            });
            var de = function () {
            };
            g["openfl.display._internal.Context3DShape"] = de;
            de.__name__ = "openfl.display._internal.Context3DShape";
            de.render = function (a, b) {
                if (a.__renderable && !(0 >= a.__worldAlpha)) {
                    var c = a.__graphics;
                    if (null != c) {
                        b.__setBlendMode(a.__worldBlendMode);
                        b.__pushMaskObject(a);
                        tb.render(c, b);
                        if (null != c.__bitmap && c.__visible) {
                            var d = b.__context3D,
                                e = b.__initDisplayShader(a.__worldShader);
                            b.setShader(e);
                            b.applyBitmapData(c.__bitmap, !0);
                            var f =
                                la.__pool.get();
                            f.scale(1 / c.__bitmapScale, 1 / c.__bitmapScale);
                            f.concat(c.__worldTransform);
                            b.applyMatrix(b.__getMatrix(f, 1));
                            la.__pool.release(f);
                            b.applyAlpha(a.__worldAlpha);
                            b.applyColorTransform(a.__worldColorTransform);
                            b.updateShader();
                            f = c.__bitmap.getVertexBuffer(d);
                            null != e.__position && d.setVertexBufferAt(e.__position.index, f, 0, 3);
                            null != e.__textureCoord && d.setVertexBufferAt(e.__textureCoord.index, f, 3, 2);
                            c = c.__bitmap.getIndexBuffer(d);
                            d.drawTriangles(c);
                            b.__clearShader()
                        }
                        b.__popMaskObject(a)
                    }
                }
            };
            de.renderMask = function (a, b) {
                var c = a.__graphics;
                if (null != c && (tb.renderMask(c, b), null != c.__bitmap)) {
                    a = b.__context3D;
                    var d = b.__maskShader;
                    b.setShader(d);
                    b.applyBitmapData(c.__bitmap, !0);
                    b.applyMatrix(b.__getMatrix(c.__worldTransform, 1));
                    b.updateShader();
                    var e = c.__bitmap.getVertexBuffer(a);
                    null != d.__position && a.setVertexBufferAt(d.__position.index, e, 0, 3);
                    null != d.__textureCoord && a.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
                    c = c.__bitmap.getIndexBuffer(a);
                    a.drawTriangles(c);
                    b.__clearShader()
                }
            };
            var zj =
                function () {
                };
            g["openfl.display._internal.Context3DSimpleButton"] = zj;
            zj.__name__ = "openfl.display._internal.Context3DSimpleButton";
            zj.renderDrawable = OpenflShared.renderDrawableSimple;
            zj.renderDrawableMask = function (a, b) {
                null != a.__currentState && b.__renderDrawableMask(a.__currentState)
            };
            var ze = function () {
            };
            g["openfl.display._internal.Context3DTextField"] = ze;
            ze.__name__ =
                "openfl.display._internal.Context3DTextField";
            ze.render = function (a, b) {
                b.__softwareRenderer.__pixelRatio = b.__pixelRatio;
                var c = b.__softwareRenderer;
                b = a.__textEngine;
                var d = !(b.background || b.border),
                    e = d ? b.textBounds : b.bounds,
                    f = a.__graphics,
                    h = 0;
                if (a.__dirty) {
                    a.__updateLayout();
                    null == f.__bounds && (f.__bounds = new ha);
                    if (0 == a.get_text().length) {
                        h = b.bounds.width - 4;
                        var r = a.get_defaultTextFormat().align;
                        h = 3 == r ? 0 : 4 == r ? h : h / 2;
                        switch (r) {
                            case 0:
                                h += a.get_defaultTextFormat().leftMargin / 2;
                                h -= a.get_defaultTextFormat().rightMargin /
                                    2;
                                h += a.get_defaultTextFormat().indent / 2;
                                h += a.get_defaultTextFormat().blockIndent / 2;
                                break;
                            case 2:
                                h += a.get_defaultTextFormat().leftMargin;
                                h += a.get_defaultTextFormat().indent;
                                h += a.get_defaultTextFormat().blockIndent;
                                break;
                            case 3:
                                h += a.get_defaultTextFormat().leftMargin;
                                h += a.get_defaultTextFormat().indent;
                                h += a.get_defaultTextFormat().blockIndent;
                                break;
                            case 4:
                                h -= a.get_defaultTextFormat().rightMargin
                        }
                        d && (e.y = b.bounds.y, e.x = h)
                    }
                    f.__bounds.copyFrom(e)
                }
                r = c.__pixelRatio;
                f.__update(c.__worldTransform, r);
                if (a.__dirty ||
                    f.__softwareDirty) {
                    var m = Math.round(f.__width * r),
                        g = Math.round(f.__height * r);
                    if (!(null != b.text && "" != b.text || b.background || b.border || b.__hasFocus || 1 == b.type && b.selectable) || (0 >= b.width || 0 >= b.height) && 2 != b.autoSize) a.__graphics.__canvas = null, a.__graphics.__context = null, a.__graphics.__bitmap = null, a.__graphics.__softwareDirty = !1, a.__graphics.set___dirty(!1), a.__dirty = !1;
                    else {
                        null == a.__graphics.__canvas && (a.__graphics.__canvas = window.document.createElement("canvas"), a.__graphics.__context = a.__graphics.__canvas.getContext("2d"));
                        P.context = f.__context;
                        f.__canvas.width = m;
                        f.__canvas.height = g;
                        c.__isDOM && (f.__canvas.style.width = Math.round(m / r) + "px", f.__canvas.style.height = Math.round(g / r) + "px");
                        m = la.__pool.get();
                        m.scale(r, r);
                        m.concat(f.__renderTransform);
                        P.context.setTransform(m.a, m.b, m.c, m.d, m.tx, m.ty);
                        la.__pool.release(m);
                        null == P.clearRect && (P.clearRect = "undefined" !== typeof navigator && "undefined" !== typeof navigator.isCocoonJS);
                        P.clearRect && P.context.clearRect(0, 0, f.__canvas.width, f.__canvas.height);
                        if (null != b.text && "" != b.text ||
                            b.__hasFocus) {
                            d = b.text;
                            f.__context.imageSmoothingEnabled = !c.__allowSmoothing || 0 == b.antiAliasType && 400 == b.sharpness ? !1 : !0;
                            if (b.border || b.background) {
                                P.context.rect(.5, .5, e.width - 1, e.height - 1);
                                if (b.background) {
                                    var n = R.hex(b.backgroundColor & 16777215, 6);
                                    P.context.fillStyle = "#" + n;
                                    P.context.fill()
                                }
                                b.border && (P.context.lineWidth = 1, n = R.hex(b.borderColor & 16777215, 6), P.context.strokeStyle = "#" + n, P.context.stroke())
                            }
                            P.context.textBaseline = "alphabetic";
                            P.context.textAlign = "start";
                            c = -a.get_scrollH();
                            var k = h = 0;
                            for (n = a.get_scrollV() - 1; k < n;) {
                                var q = k++;
                                h -= b.lineHeights.get(q)
                            }
                            var l;
                            for (m = b.layoutGroups.iterator(); m.hasNext();)
                                if (g = m.next(), !(g.lineIndex < a.get_scrollV() - 1)) {
                                    if (g.lineIndex > b.get_bottomScrollV() - 1) break;
                                    var p = "#" + R.hex(g.format.color & 16777215, 6);
                                    P.context.font = lb.getFont(g.format);
                                    P.context.fillStyle = p;
                                    P.context.fillText(d.substring(g.startIndex, g.endIndex), g.offsetX + c - e.x, g.offsetY + g.ascent + h - e.y);
                                    if (-1 < a.__caretIndex && b.selectable)
                                        if (a.__selectionIndex == a.__caretIndex) {
                                            if (a.__showCursor && g.startIndex <=
                                                a.__caretIndex && g.endIndex >= a.__caretIndex) {
                                                k = l = 0;
                                                for (n = a.__caretIndex - g.startIndex; k < n;) {
                                                    q = k++;
                                                    if (g.positions.length <= q) break;
                                                    l += g.positions[q]
                                                }
                                                k = 0;
                                                n = a.get_scrollV();
                                                for (q = g.lineIndex + 1; n < q;) {
                                                    var y = n++;
                                                    k += b.lineHeights.get(y - 1)
                                                }
                                                P.context.beginPath();
                                                n = R.hex(g.format.color & 16777215, 6);
                                                P.context.strokeStyle = "#" + n;
                                                P.context.moveTo(g.offsetX + l - a.get_scrollH() - e.x, k + 2 - e.y);
                                                P.context.lineWidth = 1;
                                                P.context.lineTo(g.offsetX + l - a.get_scrollH() - e.x, k + lb.getFormatHeight(a.get_defaultTextFormat()) - 1 - e.y);
                                                P.context.stroke();
                                                P.context.closePath()
                                            }
                                        } else if (g.startIndex <= a.__caretIndex && g.endIndex >= a.__caretIndex || g.startIndex <= a.__selectionIndex && g.endIndex >= a.__selectionIndex || g.startIndex > a.__caretIndex && g.endIndex < a.__selectionIndex || g.startIndex > a.__selectionIndex && g.endIndex < a.__caretIndex) l = Math.min(a.__selectionIndex, a.__caretIndex) | 0, k = Math.max(a.__selectionIndex, a.__caretIndex) | 0, g.startIndex > l && (l = g.startIndex), g.endIndex < k && (k = g.endIndex), q = a.getCharBoundaries(l), k >= g.endIndex ? (n = a.getCharBoundaries(g.endIndex -
                                            1), null != n && (n.x += n.width + 2)) : n = a.getCharBoundaries(k), null != q && null != n && (P.context.fillStyle = "#000000", P.context.fillRect(q.x + c - e.x, q.y + h, n.x - q.x, g.height), P.context.fillStyle = "#FFFFFF", P.context.fillText(d.substring(l, k), c + q.x - e.x, g.offsetY + g.ascent + h));
                                    g.format.underline && (P.context.beginPath(), P.context.strokeStyle = p, P.context.lineWidth = 1, p = g.offsetX + c - e.x, l = Math.ceil(g.offsetY + h + g.ascent - e.y) + Math.floor(.185 * g.ascent) + .5, P.context.moveTo(p, l), P.context.lineTo(p + g.width, l), P.context.stroke(),
                                        P.context.closePath())
                                }
                        } else {
                            if (b.border || b.background) b.border ? P.context.rect(.5, .5, e.width - 1, e.height - 1) : P.context.rect(0, 0, e.width, e.height), b.background && (n = R.hex(b.backgroundColor & 16777215, 6), P.context.fillStyle = "#" + n, P.context.fill()), b.border && (P.context.lineWidth = 1, P.context.lineCap = "square", n = R.hex(b.borderColor & 16777215, 6), P.context.strokeStyle = "#" + n, P.context.stroke());
                            if (-1 < a.__caretIndex && b.selectable && a.__showCursor) {
                                c = -a.get_scrollH() + (d ? 0 : h);
                                k = h = 0;
                                for (n = a.get_scrollV() - 1; k < n;) q = k++,
                                    h += b.lineHeights.get(q);
                                P.context.beginPath();
                                n = R.hex(a.get_defaultTextFormat().color & 16777215, 6);
                                P.context.strokeStyle = "#" + n;
                                P.context.moveTo(c + 2.5, h + 2.5);
                                P.context.lineWidth = 1;
                                P.context.lineTo(c + 2.5, h + lb.getFormatHeight(a.get_defaultTextFormat()) - 1);
                                P.context.stroke();
                                P.context.closePath()
                            }
                        }
                        f.__bitmap = mb.fromCanvas(a.__graphics.__canvas);
                        f.__bitmapScale = r;
                        f.__visible = !0;
                        a.__dirty = !1;
                        f.__softwareDirty = !1;
                        f.set___dirty(!1)
                    }
                }
                a.__graphics.__hardwareDirty = !1
            };
            ze.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a,
                    !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    if (ze.render(a, b), !(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || 0 >= a.__worldAlpha)) {
                        if (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            var c = b.__context3D,
                                d = ha.__pool.get();
                            d.setTo(0, 0, a.get_width(), a.get_height());
                            b.__pushMaskRect(d, a.__renderTransform);
                            var e = a.opaqueBackground;
                            c.clear((e >>> 16 & 255) / 255, (e >>> 8 & 255) / 255, (e & 255) /
                                255, 1, 0, 0, 1);
                            b.__popMaskRect();
                            b.__popMaskObject(a);
                            ha.__pool.release(d)
                        }
                        null != a.__graphics && de.render(a, b)
                    }
                } else ld.render(a.__cacheBitmap, b);
                b.__renderEvent(a)
            };
            ze.renderDrawableMask = function (a, b) {
                ze.renderMask(a, b);
                rf.renderDrawableMask(a, b)
            };
            ze.renderMask = function (a, b) {
                var c = b.__softwareRenderer;
                b = a.__textEngine;
                var d = !(b.background || b.border),
                    e = d ? b.textBounds : b.bounds,
                    f = a.__graphics,
                    h = 0;
                if (a.__dirty) {
                    a.__updateLayout();
                    null == f.__bounds && (f.__bounds = new ha);
                    if (0 == a.get_text().length) {
                        h = b.bounds.width -
                            4;
                        var r = a.get_defaultTextFormat().align;
                        h = 3 == r ? 0 : 4 == r ? h : h / 2;
                        switch (r) {
                            case 0:
                                h += a.get_defaultTextFormat().leftMargin / 2;
                                h -= a.get_defaultTextFormat().rightMargin / 2;
                                h += a.get_defaultTextFormat().indent / 2;
                                h += a.get_defaultTextFormat().blockIndent / 2;
                                break;
                            case 2:
                                h += a.get_defaultTextFormat().leftMargin;
                                h += a.get_defaultTextFormat().indent;
                                h += a.get_defaultTextFormat().blockIndent;
                                break;
                            case 3:
                                h += a.get_defaultTextFormat().leftMargin;
                                h += a.get_defaultTextFormat().indent;
                                h += a.get_defaultTextFormat().blockIndent;
                                break;
                            case 4:
                                h -= a.get_defaultTextFormat().rightMargin
                        }
                        d && (e.y = b.bounds.y, e.x = h)
                    }
                    f.__bounds.copyFrom(e)
                }
                r = c.__pixelRatio;
                f.__update(c.__worldTransform, r);
                if (a.__dirty || f.__softwareDirty) {
                    var m = Math.round(f.__width * r),
                        g = Math.round(f.__height * r);
                    if (!(null != b.text && "" != b.text || b.background || b.border || b.__hasFocus || 1 == b.type && b.selectable) || (0 >= b.width || 0 >= b.height) && 2 != b.autoSize) a.__graphics.__canvas = null, a.__graphics.__context = null, a.__graphics.__bitmap = null, a.__graphics.__softwareDirty = !1, a.__graphics.set___dirty(!1),
                        a.__dirty = !1;
                    else {
                        null == a.__graphics.__canvas && (a.__graphics.__canvas = window.document.createElement("canvas"), a.__graphics.__context = a.__graphics.__canvas.getContext("2d"));
                        P.context = f.__context;
                        f.__canvas.width = m;
                        f.__canvas.height = g;
                        c.__isDOM && (f.__canvas.style.width = Math.round(m / r) + "px", f.__canvas.style.height = Math.round(g / r) + "px");
                        m = la.__pool.get();
                        m.scale(r, r);
                        m.concat(f.__renderTransform);
                        P.context.setTransform(m.a, m.b, m.c, m.d, m.tx, m.ty);
                        la.__pool.release(m);
                        null == P.clearRect && (P.clearRect = "undefined" !==
                            typeof navigator && "undefined" !== typeof navigator.isCocoonJS);
                        P.clearRect && P.context.clearRect(0, 0, f.__canvas.width, f.__canvas.height);
                        if (null != b.text && "" != b.text || b.__hasFocus) {
                            d = b.text;
                            f.__context.imageSmoothingEnabled = !c.__allowSmoothing || 0 == b.antiAliasType && 400 == b.sharpness ? !1 : !0;
                            if (b.border || b.background) {
                                P.context.rect(.5, .5, e.width - 1, e.height - 1);
                                if (b.background) {
                                    var n = R.hex(b.backgroundColor & 16777215, 6);
                                    P.context.fillStyle = "#" + n;
                                    P.context.fill()
                                }
                                b.border && (P.context.lineWidth = 1, n = R.hex(b.borderColor &
                                    16777215, 6), P.context.strokeStyle = "#" + n, P.context.stroke())
                            }
                            P.context.textBaseline = "alphabetic";
                            P.context.textAlign = "start";
                            c = -a.get_scrollH();
                            var k = h = 0;
                            for (n = a.get_scrollV() - 1; k < n;) {
                                var q = k++;
                                h -= b.lineHeights.get(q)
                            }
                            var l;
                            for (m = b.layoutGroups.iterator(); m.hasNext();)
                                if (g = m.next(), !(g.lineIndex < a.get_scrollV() - 1)) {
                                    if (g.lineIndex > b.get_bottomScrollV() - 1) break;
                                    var p = "#" + R.hex(g.format.color & 16777215, 6);
                                    P.context.font = lb.getFont(g.format);
                                    P.context.fillStyle = p;
                                    P.context.fillText(d.substring(g.startIndex,
                                        g.endIndex), g.offsetX + c - e.x, g.offsetY + g.ascent + h - e.y);
                                    if (-1 < a.__caretIndex && b.selectable)
                                        if (a.__selectionIndex == a.__caretIndex) {
                                            if (a.__showCursor && g.startIndex <= a.__caretIndex && g.endIndex >= a.__caretIndex) {
                                                k = l = 0;
                                                for (n = a.__caretIndex - g.startIndex; k < n;) {
                                                    q = k++;
                                                    if (g.positions.length <= q) break;
                                                    l += g.positions[q]
                                                }
                                                k = 0;
                                                n = a.get_scrollV();
                                                for (q = g.lineIndex + 1; n < q;) {
                                                    var y = n++;
                                                    k += b.lineHeights.get(y - 1)
                                                }
                                                P.context.beginPath();
                                                n = R.hex(g.format.color & 16777215, 6);
                                                P.context.strokeStyle = "#" + n;
                                                P.context.moveTo(g.offsetX +
                                                    l - a.get_scrollH() - e.x, k + 2 - e.y);
                                                P.context.lineWidth = 1;
                                                P.context.lineTo(g.offsetX + l - a.get_scrollH() - e.x, k + lb.getFormatHeight(a.get_defaultTextFormat()) - 1 - e.y);
                                                P.context.stroke();
                                                P.context.closePath()
                                            }
                                        } else if (g.startIndex <= a.__caretIndex && g.endIndex >= a.__caretIndex || g.startIndex <= a.__selectionIndex && g.endIndex >= a.__selectionIndex || g.startIndex > a.__caretIndex && g.endIndex < a.__selectionIndex || g.startIndex > a.__selectionIndex && g.endIndex < a.__caretIndex) l = Math.min(a.__selectionIndex, a.__caretIndex) | 0, k = Math.max(a.__selectionIndex,
                                            a.__caretIndex) | 0, g.startIndex > l && (l = g.startIndex), g.endIndex < k && (k = g.endIndex), q = a.getCharBoundaries(l), k >= g.endIndex ? (n = a.getCharBoundaries(g.endIndex - 1), null != n && (n.x += n.width + 2)) : n = a.getCharBoundaries(k), null != q && null != n && (P.context.fillStyle = "#000000", P.context.fillRect(q.x + c - e.x, q.y + h, n.x - q.x, g.height), P.context.fillStyle = "#FFFFFF", P.context.fillText(d.substring(l, k), c + q.x - e.x, g.offsetY + g.ascent + h));
                                    g.format.underline && (P.context.beginPath(), P.context.strokeStyle = p, P.context.lineWidth = 1, p = g.offsetX +
                                        c - e.x, l = Math.ceil(g.offsetY + h + g.ascent - e.y) + Math.floor(.185 * g.ascent) + .5, P.context.moveTo(p, l), P.context.lineTo(p + g.width, l), P.context.stroke(), P.context.closePath())
                                }
                        } else {
                            if (b.border || b.background) b.border ? P.context.rect(.5, .5, e.width - 1, e.height - 1) : P.context.rect(0, 0, e.width, e.height), b.background && (n = R.hex(b.backgroundColor & 16777215, 6), P.context.fillStyle = "#" + n, P.context.fill()), b.border && (P.context.lineWidth = 1, P.context.lineCap = "square", n = R.hex(b.borderColor & 16777215, 6), P.context.strokeStyle =
                                "#" + n, P.context.stroke());
                            if (-1 < a.__caretIndex && b.selectable && a.__showCursor) {
                                c = -a.get_scrollH() + (d ? 0 : h);
                                k = h = 0;
                                for (n = a.get_scrollV() - 1; k < n;) q = k++, h += b.lineHeights.get(q);
                                P.context.beginPath();
                                n = R.hex(a.get_defaultTextFormat().color & 16777215, 6);
                                P.context.strokeStyle = "#" + n;
                                P.context.moveTo(c + 2.5, h + 2.5);
                                P.context.lineWidth = 1;
                                P.context.lineTo(c + 2.5, h + lb.getFormatHeight(a.get_defaultTextFormat()) - 1);
                                P.context.stroke();
                                P.context.closePath()
                            }
                        }
                        f.__bitmap = mb.fromCanvas(a.__graphics.__canvas);
                        f.__bitmapScale =
                            r;
                        f.__visible = !0;
                        a.__dirty = !1;
                        f.__softwareDirty = !1;
                        f.set___dirty(!1)
                    }
                }
                a.__graphics.__hardwareDirty = !1
            };
            var L = function () {
            };
            g["openfl.display._internal.Context3DTilemap"] = L;
            L.__name__ = "openfl.display._internal.Context3DTilemap";
            L.buildBuffer = function (a, b) {
                if (!a.__renderable || 0 == a.__group.__tiles.length || 0 >= a.__worldAlpha) a.__group.__dirty = !1;
                else {
                    L.numTiles = 0;
                    L.vertexBufferData = null != a.__buffer ? a.__buffer.vertexBufferData : null;
                    L.vertexDataPosition = 0;
                    var c = ha.__pool.get(),
                        d = la.__pool.get(),
                        e = la.__pool.get();
                    L.dataPerVertex = 4;
                    a.tileAlphaEnabled && L.dataPerVertex++;
                    a.tileColorTransformEnabled && (L.dataPerVertex += 8);
                    L.buildBufferTileContainer(a, a.__group, b, e, a.__tileset, a.tileAlphaEnabled, a.__worldAlpha, a.tileColorTransformEnabled, a.__worldColorTransform, null, c, d);
                    a.__buffer.flushVertexBufferData();
                    ha.__pool.release(c);
                    la.__pool.release(d);
                    la.__pool.release(e)
                }
            };
            L.buildBufferTileContainer = function (a, b, c, d, e, f, h, r, m, g, n, k, q) {
                null == q && (q = !0);
                var l = la.__pool.get(),
                    p = c.__roundPixels,
                    y = b.__tiles,
                    v = null;
                v = function (a) {
                    a =
                        a.__tiles;
                    for (var b = 0, c = 0; c < a.length;) {
                        var d = a[c];
                        ++c;
                        0 < d.__length ? b += v(d) : ++b
                    }
                    return b
                };
                q && L.resizeBuffer(a, L.numTiles + v(b));
                q = null;
                for (var t, B, C, E, x, z, A, u, N, U, I = f ? 5 : 4, J = 0; J < y.length;) {
                    var D = y[J];
                    ++J;
                    l.setTo(1, 0, 0, 1, -D.get_originX(), -D.get_originY());
                    l.concat(D.get_matrix());
                    l.concat(d);
                    p && (l.tx = Math.round(l.tx), l.ty = Math.round(l.ty));
                    var ma = null != D.get_tileset() ? D.get_tileset() : e;
                    var ca = D.get_alpha() * h;
                    var w = D.get_visible();
                    D.__dirty = !1;
                    if (w && !(0 >= ca))
                        if (r && (null != D.get_colorTransform() ? null == m ?
                            q = D.get_colorTransform() : (null == L.cacheColorTransform && (L.cacheColorTransform = new ib), q = L.cacheColorTransform, q.redMultiplier = m.redMultiplier * D.get_colorTransform().redMultiplier, q.greenMultiplier = m.greenMultiplier * D.get_colorTransform().greenMultiplier, q.blueMultiplier = m.blueMultiplier * D.get_colorTransform().blueMultiplier, q.alphaMultiplier = m.alphaMultiplier * D.get_colorTransform().alphaMultiplier, q.redOffset = m.redOffset + D.get_colorTransform().redOffset, q.greenOffset = m.greenOffset + D.get_colorTransform().greenOffset,
                                q.blueOffset = m.blueOffset + D.get_colorTransform().blueOffset, q.alphaOffset = m.alphaOffset + D.get_colorTransform().alphaOffset) : q = m), f || (ca = 1), 0 < D.__length) L.buildBufferTileContainer(a, D, c, l, ma, f, ca, r, q, g, n, k, !1);
                        else if (null != ma && (w = D.get_id(), t = ma.__bitmapData, null != t)) {
                            if (-1 == w) {
                                B = D.__rect;
                                if (null == B || 0 >= B.width || 0 >= B.height) continue;
                                D = B.x / t.width;
                                ma = B.y / t.height;
                                w = B.get_right() / t.width;
                                E = B.get_bottom() / t.height
                            } else {
                                t = ma.__data[w];
                                if (null == t) continue;
                                n.setTo(t.x, t.y, t.width, t.height);
                                B = n;
                                D = t.__uvX;
                                ma = t.__uvY;
                                w = t.__uvWidth;
                                E = t.__uvHeight
                            }
                            t = B.width;
                            C = B.height;
                            B = 0 * l.a + 0 * l.c + l.tx;
                            x = 0 * l.b + 0 * l.d + l.ty;
                            z = t * l.a + 0 * l.c + l.tx;
                            A = t * l.b + 0 * l.d + l.ty;
                            u = 0 * l.a + C * l.c + l.tx;
                            N = 0 * l.b + C * l.d + l.ty;
                            U = t * l.a + C * l.c + l.tx;
                            C = t * l.b + C * l.d + l.ty;
                            t = L.vertexDataPosition;
                            L.vertexBufferData[t] = B;
                            L.vertexBufferData[t + 1] = x;
                            L.vertexBufferData[t + 2] = D;
                            L.vertexBufferData[t + 3] = ma;
                            L.vertexBufferData[t + L.dataPerVertex] = z;
                            L.vertexBufferData[t + L.dataPerVertex + 1] = A;
                            L.vertexBufferData[t + L.dataPerVertex + 2] = w;
                            L.vertexBufferData[t + L.dataPerVertex + 3] =
                                ma;
                            L.vertexBufferData[t + 2 * L.dataPerVertex] = u;
                            L.vertexBufferData[t + 2 * L.dataPerVertex + 1] = N;
                            L.vertexBufferData[t + 2 * L.dataPerVertex + 2] = D;
                            L.vertexBufferData[t + 2 * L.dataPerVertex + 3] = E;
                            L.vertexBufferData[t + 3 * L.dataPerVertex] = U;
                            L.vertexBufferData[t + 3 * L.dataPerVertex + 1] = C;
                            L.vertexBufferData[t + 3 * L.dataPerVertex + 2] = w;
                            L.vertexBufferData[t + 3 * L.dataPerVertex + 3] = E;
                            f && (L.vertexBufferData[t + 0 * L.dataPerVertex + 4] = ca, L.vertexBufferData[t + L.dataPerVertex + 4] = ca, L.vertexBufferData[t + 2 * L.dataPerVertex + 4] = ca, L.vertexBufferData[t +
                            3 * L.dataPerVertex + 4] = ca);
                            if (r)
                                if (null != q)
                                    for (ca = 0; 4 > ca;) D = ca++, L.vertexBufferData[t + L.dataPerVertex * D + I] = q.redMultiplier, L.vertexBufferData[t + L.dataPerVertex * D + I + 1] = q.greenMultiplier, L.vertexBufferData[t + L.dataPerVertex * D + I + 2] = q.blueMultiplier, L.vertexBufferData[t + L.dataPerVertex * D + I + 3] = q.alphaMultiplier, L.vertexBufferData[t + L.dataPerVertex * D + I + 4] = q.redOffset, L.vertexBufferData[t + L.dataPerVertex * D + I + 5] = q.greenOffset, L.vertexBufferData[t + L.dataPerVertex * D + I + 6] = q.blueOffset, L.vertexBufferData[t + L.dataPerVertex *
                                    D + I + 7] = q.alphaOffset;
                                else
                                    for (ca = 0; 4 > ca;) D = ca++, L.vertexBufferData[t + L.dataPerVertex * D + I] = 1, L.vertexBufferData[t + L.dataPerVertex * D + I + 1] = 1, L.vertexBufferData[t + L.dataPerVertex * D + I + 2] = 1, L.vertexBufferData[t + L.dataPerVertex * D + I + 3] = 1, L.vertexBufferData[t + L.dataPerVertex * D + I + 4] = 0, L.vertexBufferData[t + L.dataPerVertex * D + I + 5] = 0, L.vertexBufferData[t + L.dataPerVertex * D + I + 6] = 0, L.vertexBufferData[t + L.dataPerVertex * D + I + 7] = 0;
                            L.vertexDataPosition += 4 * L.dataPerVertex
                        }
                }
                b.__dirty = !1;
                la.__pool.release(l)
            };
            L.flush = function (a,
                                b, c) {
                null == L.currentShader && (L.currentShader = b.__defaultDisplayShader);
                if (L.bufferPosition > L.lastFlushedPosition && null != L.currentBitmapData && null != L.currentShader) {
                    var d = b.__initDisplayShader(L.currentShader);
                    b.setShader(d);
                    b.applyBitmapData(L.currentBitmapData, a.smoothing);
                    b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
                    a.tileAlphaEnabled ? b.useAlphaArray() : b.applyAlpha(a.__worldAlpha);
                    a.tileBlendModeEnabled && b.__setBlendMode(c);
                    a.tileColorTransformEnabled ? (b.applyHasColorTransform(!0), b.useColorTransformArray()) :
                        b.applyColorTransform(a.__worldColorTransform);
                    b.updateShader();
                    c = a.__buffer.vertexBuffer;
                    for (var e = L.lastFlushedPosition * L.dataPerVertex * 4, f; L.lastFlushedPosition < L.bufferPosition;) {
                        f = Math.min(L.bufferPosition - L.lastFlushedPosition, L.context.__quadIndexBufferElements) | 0;
                        if (0 >= f) break;
                        null != d.__position && L.context.setVertexBufferAt(d.__position.index, c, e, 2);
                        null != d.__textureCoord && L.context.setVertexBufferAt(d.__textureCoord.index, c, e + 2, 2);
                        a.tileAlphaEnabled && null != d.__alpha && L.context.setVertexBufferAt(d.__alpha.index,
                            c, e + 4, 1);
                        if (a.tileColorTransformEnabled) {
                            var h = a.tileAlphaEnabled ? 5 : 4;
                            null != d.__colorMultiplier && L.context.setVertexBufferAt(d.__colorMultiplier.index, c, e + h, 4);
                            null != d.__colorOffset && L.context.setVertexBufferAt(d.__colorOffset.index, c, e + h + 4, 4)
                        }
                        L.context.drawTriangles(L.context.__quadIndexBuffer, 0, 2 * f);
                        L.lastFlushedPosition += f
                    }
                    b.__clearShader()
                }
                L.lastUsedBitmapData = L.currentBitmapData;
                L.lastUsedShader = L.currentShader
            };
            L.render = function (a, b) {
                if (a.__renderable && !(0 >= a.__worldAlpha) && (L.context = b.__context3D,
                    L.buildBuffer(a, b), 0 != L.numTiles)) {
                    L.bufferPosition = 0;
                    L.lastFlushedPosition = 0;
                    L.lastUsedBitmapData = null;
                    L.lastUsedShader = null;
                    L.currentBitmapData = null;
                    L.currentShader = null;
                    L.currentBlendMode = a.__worldBlendMode;
                    a.tileBlendModeEnabled || b.__setBlendMode(L.currentBlendMode);
                    b.__pushMaskObject(a);
                    var c = ha.__pool.get();
                    c.setTo(0, 0, a.__width, a.__height);
                    b.__pushMaskRect(c, a.__renderTransform);
                    L.renderTileContainer(a, b, a.__group, a.__worldShader, a.__tileset, a.__worldAlpha, a.tileBlendModeEnabled, L.currentBlendMode,
                        null);
                    L.flush(a, b, L.currentBlendMode);
                    b.__popMaskRect();
                    b.__popMaskObject(a);
                    ha.__pool.release(c)
                }
            };
            L.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    if (!(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || 0 >= a.__worldAlpha)) {
                        if (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            var c = b.__context3D,
                                d = ha.__pool.get();
                            d.setTo(0, 0, a.get_width(),
                                a.get_height());
                            b.__pushMaskRect(d, a.__renderTransform);
                            var e = a.opaqueBackground;
                            c.clear((e >>> 16 & 255) / 255, (e >>> 8 & 255) / 255, (e & 255) / 255, 1, 0, 0, 1);
                            b.__popMaskRect();
                            b.__popMaskObject(a);
                            ha.__pool.release(d)
                        }
                        null != a.__graphics && de.render(a, b)
                    }
                    L.render(a, b)
                } else ld.render(a.__cacheBitmap, b);
                b.__renderEvent(a)
            };
            L.renderDrawableMask = function (a, b) {
                if (null != a.opaqueBackground || null != a.__graphics) null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && a.get_height(), null != a.__graphics && de.renderMask(a,
                    b);
                L.renderMask(a, b)
            };
            L.renderTileContainer = function (a, b, c, d, e, f, h, r, m) {
                c = c.__tiles;
                for (var g, n, k, q, l = null, p, y = 0; y < c.length;)
                    if (g = c[y], ++y, n = null != g.get_tileset() ? g.get_tileset() : e, k = g.get_alpha() * f, (q = g.get_visible()) && !(0 >= k))
                        if (q = null != g.get_shader() ? g.get_shader() : d, h && (l = null != g.__blendMode ? g.__blendMode : r), 0 < g.__length) L.renderTileContainer(a, b, g, q, n, k, h, l, m);
                        else if (null != n && (p = g.get_id(), k = n.__bitmapData, null != k)) {
                            if (-1 == p) {
                                if (g = g.__rect, null == g || 0 >= g.width || 0 >= g.height) continue
                            } else if (g =
                                n.__data[p], null == g) continue;
                            (q != L.currentShader || k != L.currentBitmapData && null != L.currentBitmapData || L.currentBlendMode != l) && L.flush(a, b, L.currentBlendMode);
                            L.currentBitmapData = k;
                            L.currentShader = q;
                            L.currentBlendMode = l;
                            L.bufferPosition++
                        }
            };
            L.renderMask = function (a, b) {
            };
            L.resizeBuffer = function (a, b) {
                L.numTiles = b;
                null == a.__buffer ? a.__buffer = new bh(L.context, Dj.QUADS, L.numTiles, L.dataPerVertex) : a.__buffer.resize(L.numTiles, L.dataPerVertex);
                L.vertexBufferData = a.__buffer.vertexBufferData
            };
            var md = function () {
            };
            g["openfl.display._internal.Context3DVideo"] = md;
            md.__name__ = "openfl.display._internal.Context3DVideo";
            md.render = function (a, b) {
                if (a.__renderable && !(0 >= a.__worldAlpha) && null != a.__stream && null != a.__stream.__video) {
                    var c = b.__context3D,
                        d = c.gl;
                    if (null != a.__getTexture(c)) {
                        b.__setBlendMode(a.__worldBlendMode);
                        b.__pushMaskObject(a);
                        var e = b.__initDisplayShader(a.__worldShader);
                        b.setShader(e);
                        b.applyBitmapData(null, !0, !1);
                        b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
                        b.applyAlpha(a.__worldAlpha);
                        b.applyColorTransform(a.__worldColorTransform);
                        null != e.__textureSize && (md.__textureSizeValue[0] = null != a.__stream ? a.__stream.__video.videoWidth : 0, md.__textureSizeValue[1] = null != a.__stream ? a.__stream.__video.videoHeight : 0, e.__textureSize.value = md.__textureSizeValue);
                        b.updateShader();
                        c.setTextureAt(0, a.__getTexture(c));
                        c.__flushGLTextures();
                        d.uniform1i(e.__texture.index, 0);
                        a.smoothing ? (d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MAG_FILTER, d.LINEAR), d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MIN_FILTER, d.LINEAR)) : (d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MAG_FILTER,
                            d.NEAREST), d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MIN_FILTER, d.NEAREST));
                        d = a.__getVertexBuffer(c);
                        null != e.__position && c.setVertexBufferAt(e.__position.index, d, 0, 3);
                        null != e.__textureCoord && c.setVertexBufferAt(e.__textureCoord.index, d, 3, 2);
                        e = a.__getIndexBuffer(c);
                        c.drawTriangles(e);
                        b.__clearShader();
                        b.__popMaskObject(a)
                    }
                }
            };
            md.renderDrawable = function (a, b) {
                md.render(a, b);
                b.__renderEvent(a)
            };
            md.renderDrawableMask = function (a, b) {
                md.renderMask(a, b)
            };
            md.renderMask = function (a, b) {
                if (null != a.__stream && null !=
                    a.__stream.__video) {
                    var c = b.__context3D,
                        d = b.__maskShader;
                    b.setShader(d);
                    b.applyBitmapData(qf.opaqueBitmapData, !0);
                    b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
                    b.updateShader();
                    var e = a.__getVertexBuffer(c);
                    null != d.__position && c.setVertexBufferAt(d.__position.index, e, 0, 3);
                    null != d.__textureCoord && c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
                    a = a.__getIndexBuffer(c);
                    c.drawTriangles(a);
                    b.__clearShader()
                }
            };
            var cb = function () {
            };
            g["openfl.display._internal.DOMBitmap"] = cb;
            cb.__name__ = "openfl.display._internal.DOMBitmap";
            cb.clear = function (a, b) {
                Gc.clear(a, b);
                null != a.__image && (b.element.removeChild(a.__image), a.__image = null, a.__style = null);
                null != a.__canvas && (b.element.removeChild(a.__canvas), a.__canvas = null, a.__style = null)
            };
            cb.renderCanvas = function (a, b) {
                null != a.__image && (b.element.removeChild(a.__image), a.__image = null);
                null == a.__canvas && (a.__canvas = window.document.createElement("canvas"), a.__context = a.__canvas.getContext("2d"), a.__imageVersion = -1, b.__allowSmoothing && a.smoothing || (a.__context.imageSmoothingEnabled = !1),
                    b.__initializeElement(a, a.__canvas));
                a.__imageVersion != a.__bitmapData.image.version && (Ba.convertToCanvas(a.__bitmapData.image), a.__canvas.width = a.__bitmapData.width + 1, a.__canvas.width = a.__bitmapData.width, a.__canvas.height = a.__bitmapData.height, a.__context.drawImage(a.__bitmapData.image.buffer.__srcCanvas, 0, 0), a.__imageVersion = a.__bitmapData.image.version);
                b.__updateClip(a);
                b.__applyStyle(a, !0, !0, !0)
            };
            cb.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    null !=
                    a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && a.get_height();
                    var c = a.__graphics;
                    if (null != a.stage && a.__worldVisible && a.__renderable && null != c) {
                        z.render(c, b.__canvasRenderer);
                        if (c.__softwareDirty || a.__worldAlphaChanged || a.__canvas != c.__canvas) null != c.__canvas ? a.__canvas != c.__canvas && (null != a.__canvas && b.element.removeChild(a.__canvas), a.__canvas = c.__canvas, a.__context = c.__context, b.__initializeElement(a, a.__canvas)) : Xe.clear(a, b);
                        if (null != a.__canvas) {
                            b.__pushMaskObject(a);
                            var d = a.__renderTransform;
                            a.__renderTransform = c.__worldTransform;
                            c.__transformDirty && (c.__transformDirty = !1, a.__renderTransformChanged = !0);
                            b.__updateClip(a);
                            b.__applyStyle(a, !0, !0, !0);
                            a.__renderTransform = d;
                            b.__popMaskObject(a)
                        }
                    } else Xe.clear(a, b);
                    null != a.stage && a.__worldVisible && a.__renderable && null != a.__bitmapData && a.__bitmapData.__isValid && a.__bitmapData.readable ? (b.__pushMaskObject(a), null != a.__bitmapData.image.buffer.__srcImage ? (d = a.__bitmapData.image.buffer.__srcImage.src, R.startsWith(d, "data:") || R.startsWith(d, "blob:") ?
                        cb.renderCanvas(a, b) : cb.renderImage(a, b)) : cb.renderCanvas(a, b), b.__popMaskObject(a)) : cb.clear(a, b)
                } else b.__renderDrawableClear(a), a.__cacheBitmap.stage = a.stage, c = a.__cacheBitmap, null != c.stage && c.__worldVisible && c.__renderable && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable ? (b.__pushMaskObject(c), null != c.__bitmapData.image.buffer.__srcImage ? (d = c.__bitmapData.image.buffer.__srcImage.src, R.startsWith(d, "data:") || R.startsWith(d, "blob:") ? cb.renderCanvas(c, b) : cb.renderImage(c,
                    b)) : cb.renderCanvas(c, b), b.__popMaskObject(c)) : cb.clear(c, b);
                b.__renderEvent(a)
            };
            cb.renderDrawableClear = function (a, b) {
                cb.clear(a, b)
            };
            cb.renderImage = function (a, b) {
                null != a.__canvas && (b.element.removeChild(a.__canvas), a.__canvas = null);
                null == a.__image && (a.__image = window.document.createElement("img"), a.__image.crossOrigin = "Anonymous", a.__image.src = a.__bitmapData.image.buffer.__srcImage.src, b.__initializeElement(a, a.__image));
                b.__updateClip(a);
                b.__applyStyle(a, !0, !0, !0)
            };
            var Gc = function () {
            };
            g["openfl.display._internal.DOMDisplayObject"] =
                Gc;
            Gc.__name__ = "openfl.display._internal.DOMDisplayObject";
            Gc.clear = function (a, b) {
                null != a.__cacheBitmap && cb.clear(a.__cacheBitmap, b);
                Xe.clear(a, b)
            };
            Gc.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && a.get_height();
                    var c = a.__graphics;
                    if (null != a.stage && a.__worldVisible && a.__renderable && null != c) {
                        z.render(c, b.__canvasRenderer);
                        if (c.__softwareDirty || a.__worldAlphaChanged || a.__canvas !=
                            c.__canvas) null != c.__canvas ? a.__canvas != c.__canvas && (null != a.__canvas && b.element.removeChild(a.__canvas), a.__canvas = c.__canvas, a.__context = c.__context, b.__initializeElement(a, a.__canvas)) : Xe.clear(a, b);
                        if (null != a.__canvas) {
                            b.__pushMaskObject(a);
                            var d = a.__renderTransform;
                            a.__renderTransform = c.__worldTransform;
                            c.__transformDirty && (c.__transformDirty = !1, a.__renderTransformChanged = !0);
                            b.__updateClip(a);
                            b.__applyStyle(a, !0, !0, !0);
                            a.__renderTransform = d;
                            b.__popMaskObject(a)
                        }
                    } else Xe.clear(a, b)
                } else b.__renderDrawableClear(a),
                    a.__cacheBitmap.stage = a.stage, c = a.__cacheBitmap, null != c.stage && c.__worldVisible && c.__renderable && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable ? (b.__pushMaskObject(c), null != c.__bitmapData.image.buffer.__srcImage ? (d = c.__bitmapData.image.buffer.__srcImage.src, R.startsWith(d, "data:") || R.startsWith(d, "blob:") ? cb.renderCanvas(c, b) : cb.renderImage(c, b)) : cb.renderCanvas(c, b), b.__popMaskObject(c)) : cb.clear(c, b);
                b.__renderEvent(a)
            };
            Gc.renderDrawableClear = function (a, b) {
                Gc.clear(a, b)
            };
            var qj = function () {
            };
            g["openfl.display._internal.DOMDisplayObjectContainer"] = qj;
            qj.__name__ = "openfl.display._internal.DOMDisplayObjectContainer";
            qj.renderDrawable = function (a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext();) {
                    var d = c.next();
                    null == d.stage && b.__renderDrawable(d)
                }
                for (c = a.__removedChildren.iterator(); c.hasNext();) d = c.next(), null == d.stage && d.__cleanup();
                a.__removedChildren.set_length(0);
                Gc.renderDrawable(a, b);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    b.__pushMaskObject(a);
                    if (null != b.__stage) {
                        c = 0;
                        for (d = a.__children; c < d.length;) e = d[c], ++c, b.__renderDrawable(e), e.__renderDirty = !1;
                        a.__renderDirty = !1
                    } else
                        for (c = 0, d = a.__children; c < d.length;) e = d[c], ++c, b.__renderDrawable(e);
                    b.__popMaskObject(a)
                } else {
                    c = 0;
                    for (d = a.__children; c < d.length;) {
                        var e = d[c];
                        ++c;
                        b.__renderDrawableClear(e)
                    }
                    Xe.clear(a, b);
                    a.__cacheBitmap.stage = a.stage
                }
            };
            qj.renderDrawableClear = function (a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext();) {
                    var d = c.next();
                    null == d.stage && b.__renderDrawableClear(d)
                }
                for (c =
                         a.__removedChildren.iterator(); c.hasNext();) d = c.next(), null == d.stage && d.__cleanup();
                a.__removedChildren.set_length(0);
                c = 0;
                for (d = a.__children; c < d.length;) {
                    var e = d[c];
                    ++c;
                    b.__renderDrawableClear(e)
                }
                Gc.clear(a, b)
            };
            var Xe = function () {
            };
            g["openfl.display._internal.DOMShape"] = Xe;
            Xe.__name__ = "openfl.display._internal.DOMShape";
            Xe.clear = function (a, b) {
                null != a.__canvas && (b.element.removeChild(a.__canvas), a.__canvas = null, a.__style = null)
            };
            var rj = function () {
            };
            g["openfl.display._internal.DOMSimpleButton"] = rj;
            rj.__name__ =
                "openfl.display._internal.DOMSimpleButton";
            rj.renderDrawable = OpenflShared.renderDrawableWithStates;
            rj.renderDrawableClear = function (a, b) {
                Gc.renderDrawableClear(a, b)
            };
            var Ve = function () {
            };
            g["openfl.display._internal.DOMTextField"] =
                Ve;
            Ve.__name__ = "openfl.display._internal.DOMTextField";
            Ve.clear = function (a, b) {
                Gc.clear(a, b);
                null != a.__div && (b.element.removeChild(a.__div), a.__div = null, a.__style = null)
            };
            Ve.renderDrawable = function (a, b) {
                a.__domRender = !0;
                b.__updateCacheBitmap(a, a.__forceCachedBitmapUpdate);
                a.__forceCachedBitmapUpdate = !1;
                a.__domRender = !1;
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    a.__renderedOnCanvasWhileOnDOM && (a.__renderedOnCanvasWhileOnDOM = !1, a.__isHTML && null != a.__htmlText && (a.__updateText(a.__htmlText), a.__dirty = !0, a.__layoutDirty = !0, a.__renderDirty || (a.__renderDirty = !0, a.__setParentRenderDirty())));
                    var c = a.__textEngine;
                    if (null != a.stage && a.__worldVisible && a.__renderable) {
                        if (a.__dirty || a.__renderTransformChanged || null == a.__div)
                            if ("" != c.text || c.background || c.border || 1 == c.type) {
                                a.__updateLayout();
                                null == a.__div && (a.__div = window.document.createElement("div"), b.__initializeElement(a, a.__div), a.__style.setProperty("outline", "none", null), a.__div.addEventListener("input", function (b) {
                                    b.preventDefault();
                                    a.get_htmlText() !=
                                    a.__div.innerHTML && (a.set_htmlText(a.__div.innerHTML), a.__dirty = !1, a.dispatchEvent(new be("textInput", !1, !1, a.get_htmlText())))
                                }, !0));
                                c.wordWrap ? a.__style.setProperty("word-wrap", "break-word", null) : a.__style.setProperty("white-space", "nowrap", null);
                                a.__style.setProperty("overflow", "hidden", null);
                                c.selectable ? (a.__style.setProperty("cursor", "text", null), a.__style.setProperty("-webkit-user-select", "text", null), a.__style.setProperty("-moz-user-select", "text", null), a.__style.setProperty("-ms-user-select",
                                    "text", null), a.__style.setProperty("-o-user-select", "text", null)) : a.__style.setProperty("cursor", "inherit", null);
                                a.__div.contentEditable = 1 == c.type;
                                var d = a.__style;
                                c.background ? d.setProperty("background-color", "#" + R.hex(c.backgroundColor & 16777215, 6), null) : d.removeProperty("background-color");
                                var e = c.width,
                                    f = c.height,
                                    h = "";
                                a.__isHTML && a.__updateText(ya.parse(a.__text, a.get_multiline(), a.__styleSheet, a.__textFormat, a.__textEngine.textFormatRanges));
                                for (var r = -a.get_scrollH(), m = c.layoutGroups.iterator(); m.hasNext();) {
                                    var g =
                                        m.next();
                                    if (!(g.lineIndex < a.get_scrollV() - 1)) {
                                        if (g.lineIndex > c.get_bottomScrollV() - 1) break;
                                        h += '<div style="';
                                        null != g.format.font && (h += "font: " + lb.getFont(g.format) + "; ");
                                        null != g.format.color && (h += "color: #" + R.hex(g.format.color & 16777215, 6) + "; ");
                                        1 == g.format.underline && (h += "text-decoration: underline; ");
                                        if (null != g.format.align) switch (g.format.align) {
                                            case 0:
                                                h += "text-align: center; ";
                                                break;
                                            case 2:
                                                h += "text-align: justify; ";
                                                break;
                                            case 4:
                                                h += "text-align: right; ";
                                                break;
                                            default:
                                                h += "text-align: left; "
                                        }
                                        null !=
                                        g.format.leftMargin && (h += "padding-left: " + 1 * g.format.leftMargin + "px; ");
                                        null != g.format.rightMargin && (h += "padding-right: " + 1 * g.format.rightMargin + "px; ");
                                        null != g.format.indent && (h += "text-indent: " + 1 * g.format.indent + "px; ");
                                        h += "left: " + (g.offsetX + r) + "px; top: " + (g.offsetY + 0 + 3) + 'px; vertical-align: top; position: absolute;">';
                                        if (null != g.format.url && "" != g.format.url) {
                                            var n = "text-decoration: underline; ";
                                            null != g.format.color && (n += "color: #" + R.hex(g.format.color & 16777215, 6) + "; ");
                                            h += "<a style='" + n + "' href='" +
                                                g.format.url + "' target='" + g.format.target + "'>"
                                        }
                                        h = a.__isHTML ? h + R.replace(c.text.substring(g.startIndex, g.endIndex), " ", "&nbsp;") : h + R.replace(R.htmlEscape(c.text.substring(g.startIndex, g.endIndex)), " ", "&nbsp;");
                                        null != g.format.url && "" != g.format.url && (h += "</a>");
                                        h += "</div>"
                                    }
                                }
                                c.border ? (d.setProperty("border", "solid 1px #" + R.hex(c.borderColor & 16777215, 6), null), a.__renderTransform.translate(-1, -1), a.__renderTransformChanged = !0, a.__transformDirty = !0) : "" != d.border && (d.removeProperty("border"), a.__renderTransformChanged = !0);
                                d.setProperty("width", e + "px", null);
                                d.setProperty("height", f + "px", null);
                                a.__div.innerHTML = h;
                                a.__dirty = !1
                            } else null != a.__div && (b.element.removeChild(a.__div), a.__div = null);
                        null != a.__div && (c = b.__roundPixels, b.__roundPixels = !0, b.__updateClip(a), b.__applyStyle(a, !0, !0, !0), b.__roundPixels = c)
                    } else Ve.clear(a, b)
                } else b.__renderDrawableClear(a), a.__cacheBitmap.stage = a.stage, c = a.__cacheBitmap, null != c.stage && c.__worldVisible && c.__renderable && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable ?
                    (b.__pushMaskObject(c), null != c.__bitmapData.image.buffer.__srcImage ? (d = c.__bitmapData.image.buffer.__srcImage.src, R.startsWith(d, "data:") || R.startsWith(d, "blob:") ? cb.renderCanvas(c, b) : cb.renderImage(c, b)) : cb.renderCanvas(c, b), b.__popMaskObject(c)) : cb.clear(c, b);
                b.__renderEvent(a)
            };
            Ve.renderDrawableClear = function (a, b) {
                Ve.clear(a, b)
            };
            var We = function () {
            };
            g["openfl.display._internal.DOMTilemap"] = We;
            We.__name__ = "openfl.display._internal.DOMTilemap";
            We.clear = function (a, b) {
                Gc.clear(a, b);
                null != a.__canvas &&
                (b.element.removeChild(a.__canvas), a.__canvas = null, a.__style = null)
            };
            We.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender)
                    if (null != a.stage && a.__worldVisible && a.__renderable && 0 < a.__group.__tiles.length) {
                        null == a.__canvas && (a.__canvas = window.document.createElement("canvas"), a.__context = a.__canvas.getContext("2d"), b.__initializeElement(a, a.__canvas));
                        a.__canvas.width = a.__width;
                        a.__canvas.height = a.__height;
                        b.__canvasRenderer.context = a.__context;
                        var c =
                            a.__renderTransform;
                        a.__renderTransform = la.__identity;
                        var d = b.__canvasRenderer;
                        if ((null != a.opaqueBackground || null != a.__graphics) && a.__renderable) {
                            var e = d.__getAlpha(a.__worldAlpha);
                            if (!(0 >= e)) {
                                if (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                                    d.__setBlendMode(a.__worldBlendMode);
                                    d.__pushMaskObject(a);
                                    var f = d.context;
                                    d.setTransform(a.__renderTransform, f);
                                    var h = a.opaqueBackground;
                                    f.fillStyle = "rgb(" + (h >>> 16 & 255) + "," + (h >>> 8 & 255) + "," + (h & 255) + ")";
                                    f.fillRect(0, 0, a.get_width(),
                                        a.get_height());
                                    d.__popMaskObject(a)
                                }
                                if (null != a.__graphics && a.__renderable && (e = d.__getAlpha(a.__worldAlpha), !(0 >= e))) {
                                    var g = a.__graphics;
                                    if (null != g) {
                                        z.render(g, d);
                                        var m = g.__width,
                                            n = g.__height;
                                        h = g.__canvas;
                                        if (null != h && g.__visible && 1 <= m && 1 <= n) {
                                            var q = g.__worldTransform;
                                            f = d.context;
                                            var k = a.__scrollRect,
                                                l = a.__worldScale9Grid;
                                            if (null == k || 0 < k.width && 0 < k.height) {
                                                d.__setBlendMode(a.__worldBlendMode);
                                                d.__pushMaskObject(a);
                                                f.globalAlpha = e;
                                                if (null != l && 0 == q.b && 0 == q.c) {
                                                    var p = d.__pixelRatio;
                                                    e = la.__pool.get();
                                                    e.translate(q.tx,
                                                        q.ty);
                                                    d.setTransform(e, f);
                                                    la.__pool.release(e);
                                                    e = g.__bounds;
                                                    var y = g.__renderTransform.a / g.__bitmapScale,
                                                        t = g.__renderTransform.d / g.__bitmapScale,
                                                        v = y * q.a,
                                                        B = t * q.d;
                                                    q = Math.max(1, Math.round(l.x * y));
                                                    g = Math.round(l.y * t);
                                                    k = Math.max(1, Math.round((e.get_right() - l.get_right()) * y));
                                                    var E = Math.round((e.get_bottom() - l.get_bottom()) * t);
                                                    y = Math.round(l.width * y);
                                                    l = Math.round(l.height * t);
                                                    t = Math.round(q / p);
                                                    var x = Math.round(g / p),
                                                        A = Math.round(k / p);
                                                    p = Math.round(E / p);
                                                    v = e.width * v - t - A;
                                                    e = e.height * B - x - p;
                                                    d.applySmoothing(f, !1);
                                                    0 != y && 0 != l ? (f.drawImage(h, 0, 0, q, g, 0, 0, t, x), f.drawImage(h, q, 0, y, g, t, 0, v, x), f.drawImage(h, q + y, 0, k, g, t + v, 0, A, x), f.drawImage(h, 0, g, q, l, 0, x, t, e), f.drawImage(h, q, g, y, l, t, x, v, e), f.drawImage(h, q + y, g, k, l, t + v, x, A, e), f.drawImage(h, 0, g + l, q, E, 0, x + e, t, p), f.drawImage(h, q, g + l, y, E, t, x + e, v, p), f.drawImage(h, q + y, g + l, k, E, t + v, x + e, A, p)) : 0 == y && 0 != l ? (n = t + v + A, f.drawImage(h, 0, 0, m, g, 0, 0, n, x), f.drawImage(h, 0, g, m, l, 0, x, n, e), f.drawImage(h, 0, g + l, m, E, 0, x + e, n, p)) : 0 == l && 0 != y && (m = x + e + p, f.drawImage(h, 0, 0, q, n, 0, 0, t, m), f.drawImage(h, q,
                                                        0, y, n, t, 0, v, m), f.drawImage(h, q + y, 0, k, n, t + v, 0, A, m))
                                                } else d.setTransform(q, f), f.drawImage(h, 0, 0, m, n);
                                                d.__popMaskObject(a)
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        d = b.__canvasRenderer;
                        a.__renderable && 0 != a.__group.__tiles.length && (e = d.__getAlpha(a.__worldAlpha), 0 >= e || (f = d.context, d.__setBlendMode(a.__worldBlendMode), d.__pushMaskObject(a), h = ha.__pool.get(), h.setTo(0, 0, a.__width, a.__height), d.__pushMaskRect(h, a.__renderTransform), d.__allowSmoothing && a.smoothing || (f.imageSmoothingEnabled = !1), xe.renderTileContainer(a.__group, d, a.__renderTransform,
                            a.__tileset, d.__allowSmoothing && a.smoothing, a.tileAlphaEnabled, e, a.tileBlendModeEnabled, a.__worldBlendMode, null, null, h), d.__allowSmoothing && a.smoothing || (f.imageSmoothingEnabled = !0), d.__popMaskRect(), d.__popMaskObject(a), ha.__pool.release(h)));
                        a.__renderTransform = c;
                        b.__canvasRenderer.context = null;
                        b.__updateClip(a);
                        b.__applyStyle(a, !0, !1, !0)
                    } else We.clear(a, b);
                else b.__renderDrawableClear(a), a.__cacheBitmap.stage = a.stage, c = a.__cacheBitmap, null != c.stage && c.__worldVisible && c.__renderable && null != c.__bitmapData &&
                c.__bitmapData.__isValid && c.__bitmapData.readable ? (b.__pushMaskObject(c), null != c.__bitmapData.image.buffer.__srcImage ? (d = c.__bitmapData.image.buffer.__srcImage.src, R.startsWith(d, "data:") || R.startsWith(d, "blob:") ? cb.renderCanvas(c, b) : cb.renderImage(c, b)) : cb.renderCanvas(c, b), b.__popMaskObject(c)) : cb.clear(c, b);
                b.__renderEvent(a)
            };
            We.renderDrawableClear = function (a, b) {
                We.clear(a, b)
            };
            var ye = function () {
            };
            g["openfl.display._internal.DOMVideo"] = ye;
            ye.__name__ = "openfl.display._internal.DOMVideo";
            ye.clear =
                function (a, b) {
                    Gc.clear(a, b);
                    a.__active && (b.element.removeChild(a.__stream.__video), a.__active = !1)
                };
            ye.render = function (a, b) {
                null != a.stage && null != a.__stream && a.__worldVisible && a.__renderable ? (a.__active || (b.__initializeElement(a, a.__stream.__video), a.__active = !0, a.__dirty = !0), a.__dirty && (a.__stream.__video.width = a.__width | 0, a.__stream.__video.height = a.__height | 0, a.__dirty = !1), b.__updateClip(a), b.__applyStyle(a, !0, !0, !0)) : ye.clear(a, b)
            };
            ye.renderDrawable = function (a, b) {
                ye.render(a, b);
                b.__renderEvent(a)
            };
            ye.renderDrawableClear = function (a, b) {
                Gc.renderDrawableClear(a, b)
            };
            var ce = function (a) {
                this.buffer = a;
                this.bPos = this.iPos = this.fPos = this.oPos = this.ffPos = this.iiPos = this.tsPos = 0;
                this.prev = Z.UNKNOWN
            };
            g["openfl.display._internal.DrawCommandReader"] = ce;
            ce.__name__ = "openfl.display._internal.DrawCommandReader";
            ce.prototype = {
                destroy: function () {
                    this.buffer = null;
                    this.reset()
                },
                reset: function () {
                    this.bPos = this.iPos = this.fPos = this.oPos = this.ffPos = this.iiPos = this.tsPos = 0
                },
                __class__: ce
            };
            var Z = v["openfl.display._internal.DrawCommandType"] = {
                __ename__: "openfl.display._internal.DrawCommandType",
                __constructs__: null,
                BEGIN_BITMAP_FILL: {
                    _hx_name: "BEGIN_BITMAP_FILL",
                    _hx_index: 0,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                BEGIN_FILL: {
                    _hx_name: "BEGIN_FILL",
                    _hx_index: 1,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                BEGIN_GRADIENT_FILL: {
                    _hx_name: "BEGIN_GRADIENT_FILL",
                    _hx_index: 2,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                BEGIN_SHADER_FILL: {
                    _hx_name: "BEGIN_SHADER_FILL",
                    _hx_index: 3,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                CUBIC_CURVE_TO: {
                    _hx_name: "CUBIC_CURVE_TO",
                    _hx_index: 4,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                CURVE_TO: {
                    _hx_name: "CURVE_TO",
                    _hx_index: 5,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                DRAW_CIRCLE: {
                    _hx_name: "DRAW_CIRCLE",
                    _hx_index: 6,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                DRAW_ELLIPSE: {
                    _hx_name: "DRAW_ELLIPSE",
                    _hx_index: 7,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                DRAW_QUADS: {
                    _hx_name: "DRAW_QUADS",
                    _hx_index: 8,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                DRAW_RECT: {
                    _hx_name: "DRAW_RECT",
                    _hx_index: 9,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                DRAW_ROUND_RECT: {
                    _hx_name: "DRAW_ROUND_RECT",
                    _hx_index: 10,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                DRAW_TILES: {
                    _hx_name: "DRAW_TILES",
                    _hx_index: 11,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                DRAW_TRIANGLES: {
                    _hx_name: "DRAW_TRIANGLES",
                    _hx_index: 12,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                END_FILL: {
                    _hx_name: "END_FILL",
                    _hx_index: 13,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                LINE_BITMAP_STYLE: {
                    _hx_name: "LINE_BITMAP_STYLE",
                    _hx_index: 14,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                LINE_GRADIENT_STYLE: {
                    _hx_name: "LINE_GRADIENT_STYLE",
                    _hx_index: 15,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                LINE_STYLE: {
                    _hx_name: "LINE_STYLE",
                    _hx_index: 16,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                LINE_TO: {
                    _hx_name: "LINE_TO",
                    _hx_index: 17,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                MOVE_TO: {
                    _hx_name: "MOVE_TO",
                    _hx_index: 18,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                OVERRIDE_BLEND_MODE: {
                    _hx_name: "OVERRIDE_BLEND_MODE",
                    _hx_index: 19,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                OVERRIDE_MATRIX: {
                    _hx_name: "OVERRIDE_MATRIX",
                    _hx_index: 20,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                WINDING_EVEN_ODD: {
                    _hx_name: "WINDING_EVEN_ODD",
                    _hx_index: 21,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                WINDING_NON_ZERO: {
                    _hx_name: "WINDING_NON_ZERO",
                    _hx_index: 22,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                },
                UNKNOWN: {
                    _hx_name: "UNKNOWN",
                    _hx_index: 23,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: q
                }
            };
            Z.__constructs__ = [Z.BEGIN_BITMAP_FILL, Z.BEGIN_FILL, Z.BEGIN_GRADIENT_FILL, Z.BEGIN_SHADER_FILL, Z.CUBIC_CURVE_TO, Z.CURVE_TO, Z.DRAW_CIRCLE, Z.DRAW_ELLIPSE, Z.DRAW_QUADS, Z.DRAW_RECT, Z.DRAW_ROUND_RECT, Z.DRAW_TILES, Z.DRAW_TRIANGLES, Z.END_FILL, Z.LINE_BITMAP_STYLE, Z.LINE_GRADIENT_STYLE,
                Z.LINE_STYLE, Z.LINE_TO, Z.MOVE_TO, Z.OVERRIDE_BLEND_MODE, Z.OVERRIDE_MATRIX, Z.WINDING_EVEN_ODD, Z.WINDING_NON_ZERO, Z.UNKNOWN
            ];
            var vf = function (a, b, c, d, e, f, h) {
                null == h && (h = !1);
                null == f && (f = !1);
                null == e && (e = !1);
                null == d && (d = 0);
                null == c && (c = 2);
                null == b && (b = 5);
                null == a && (a = 0);
                this.wrap = a;
                this.filter = b;
                this.mipfilter = c;
                this.lodBias = d;
                this.ignoreSampler = e;
                this.centroid = f;
                this.textureAlpha = h
            };
            g["openfl.display._internal.SamplerState"] = vf;
            vf.__name__ = "openfl.display._internal.SamplerState";
            vf.prototype = {
                clone: function () {
                    var a =
                        new vf(this.wrap, this.filter, this.mipfilter, this.lodBias, this.ignoreSampler, this.centroid, this.textureAlpha);
                    a.mipmapGenerated = this.mipmapGenerated;
                    return a
                },
                copyFrom: function (a) {
                    null == a || a.ignoreSampler || (this.wrap = a.wrap, this.filter = a.filter, this.mipfilter = a.mipfilter, this.lodBias = a.lodBias, this.centroid = a.centroid, this.textureAlpha = a.textureAlpha)
                },
                equals: function (a) {
                    return null == a ? !1 : this.wrap == a.wrap && this.filter == a.filter && this.mipfilter == a.mipfilter && this.lodBias == a.lodBias ? this.textureAlpha ==
                        a.textureAlpha : !1
                },
                __class__: vf
            };
            var uj = function () {
                this.inputRefs = [];
                this.inputFilter = [];
                this.inputMipFilter = [];
                this.inputs = [];
                this.inputWrap = [];
                this.overrideIntNames = [];
                this.overrideIntValues = [];
                this.overrideFloatNames = [];
                this.overrideFloatValues = [];
                this.overrideBoolNames = [];
                this.overrideBoolValues = [];
                this.paramLengths = [];
                this.paramPositions = [];
                this.paramRefs_Bool = [];
                this.paramRefs_Float = [];
                this.paramRefs_Int = [];
                this.paramTypes = []
            };
            g["openfl.display._internal.ShaderBuffer"] = uj;
            uj.__name__ = "openfl.display._internal.ShaderBuffer";
            uj.prototype = {
                addBoolOverride: function (a, b) {
                    this.overrideBoolNames[this.overrideBoolCount] = a;
                    this.overrideBoolValues[this.overrideBoolCount] = b;
                    this.overrideBoolCount++
                },
                addFloatOverride: function (a, b) {
                    this.overrideFloatNames[this.overrideFloatCount] = a;
                    this.overrideFloatValues[this.overrideFloatCount] = b;
                    this.overrideFloatCount++
                },
                clearOverride: function () {
                    this.overrideBoolCount = this.overrideFloatCount = this.overrideIntCount = 0
                },
                __class__: uj
            };
            var Sa = function (a, b, c) {
                this.driverInfo = "OpenGL (Direct blitting)";
                this.backBufferHeight = this.backBufferWidth = 0;
                O.call(this);
                this.__stage = a;
                this.__contextState = b;
                this.__stage3D = c;
                this.__context = a.window.context;
                this.gl = this.__context.webgl;
                null == this.__contextState && (this.__contextState = new ch);
                this.__state = new ch;
                var d;
                this.__vertexConstants = new Float32Array(512);
                this.__fragmentConstants = new Float32Array(512);
                var e = null;
                a = [1, 1, 1, 1];
                var f = d = c = b = null;
                this.__positionScale = a = null != e ? new Float32Array(e) : null != a ? new Float32Array(a) : null != b ? new Float32Array(b.__array) :
                    null != c ? new Float32Array(c) : null != d ? null == f ? new Float32Array(d, 0) : new Float32Array(d, 0, f) : null;
                this.__programs = new Ha;
                -
                    1 == Sa.__glMaxViewportDims && (Sa.__glMaxViewportDims = this.gl.getParameter(this.gl.MAX_VIEWPORT_DIMS));
                this.maxBackBufferHeight = this.maxBackBufferWidth = Sa.__glMaxViewportDims;
                -
                    1 == Sa.__glMaxTextureMaxAnisotropy && (a = this.gl.getExtension("EXT_texture_filter_anisotropic"), null != a && Object.prototype.hasOwnProperty.call(a, "MAX_TEXTURE_MAX_ANISOTROPY_EXT") || (a = this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),
                null != a && Object.prototype.hasOwnProperty.call(a, "MAX_TEXTURE_MAX_ANISOTROPY_EXT") || (a = this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")), null != a ? (Sa.__glTextureMaxAnisotropy = a.TEXTURE_MAX_ANISOTROPY_EXT, Sa.__glMaxTextureMaxAnisotropy = this.gl.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY_EXT)) : (Sa.__glTextureMaxAnisotropy = 0, Sa.__glMaxTextureMaxAnisotropy = 0));
                -
                    1 == Sa.__glDepthStencil && (Sa.__glDepthStencil = this.gl.DEPTH_STENCIL);
                -
                    1 == Sa.__glMemoryTotalAvailable && (a = this.gl.getExtension("NVX_gpu_memory_info"),
                null != a && (Sa.__glMemoryTotalAvailable = a.GPU_MEMORY_INFO_DEDICATED_VIDMEM_NVX, Sa.__glMemoryCurrentAvailable = a.GPU_MEMORY_INFO_CURRENT_AVAILABLE_VIDMEM_NVX));
                null == Sa.__driverInfo && (a = this.gl.getParameter(this.gl.VENDOR), b = this.gl.getParameter(this.gl.VERSION), c = this.gl.getParameter(this.gl.RENDERER), d = this.gl.getParameter(this.gl.SHADING_LANGUAGE_VERSION), Sa.__driverInfo = "OpenGL Vendor=" + a + " Version=" + b + " Renderer=" + c + " GLSL=" + d);
                this.driverInfo = Sa.__driverInfo;
                this.__quadIndexBufferElements = 16383;
                e = this.__quadIndexBufferCount = 6 * this.__quadIndexBufferElements;
                f = d = c = b = a = null;
                a = null != e ? new Uint16Array(e) : null != a ? new Uint16Array(a) : null != b ? new Uint16Array(b.__array) : null != c ? new Uint16Array(c) : null != d ? null == f ? new Uint16Array(d, 0) : new Uint16Array(d, 0, f) : null;
                d = c = b = 0;
                for (f = this.__quadIndexBufferElements; d < f;) d++, a[b] = c, a[b + 1] = c + 1, a[b + 2] = c + 2, a[b + 3] = c + 2, a[b + 4] = c + 1, a[b + 5] = c + 3, b += 6, c += 4;
                this.__quadIndexBuffer = this.createIndexBuffer(this.__quadIndexBufferCount);
                this.__quadIndexBuffer.uploadFromTypedArray(a)
            };
            g["openfl.display3D.Context3D"] = Sa;
            Sa.__name__ = "openfl.display3D.Context3D";
            Sa.__super__ = O;
            Sa.prototype = l(O.prototype, {
                clear: function (a, b, c, d, e, f, h) {
                    null == h && (h = 7);
                    null == f && (f = 0);
                    null == e && (e = 1);
                    null == d && (d = 1);
                    null == c && (c = 0);
                    null == b && (b = 0);
                    null == a && (a = 0);
                    this.__flushGLFramebuffer();
                    this.__flushGLViewport();
                    var g = 0;
                    if (0 != (h & 1)) {
                        null == this.__state.renderToTexture && (this.__stage.context3D != this || this.__stage.__renderer.__cleared || (this.__stage.__renderer.__cleared = !0), this.__cleared = !0);
                        g |= this.gl.COLOR_BUFFER_BIT;
                        if (1 != this.__contextState.colorMaskRed || 1 != this.__contextState.colorMaskGreen || 1 != this.__contextState.colorMaskBlue || 1 != this.__contextState.colorMaskAlpha) this.gl.colorMask(!0, !0, !0, !0), this.__contextState.colorMaskRed = !0, this.__contextState.colorMaskGreen = !0, this.__contextState.colorMaskBlue = !0, this.__contextState.colorMaskAlpha = !0;
                        this.gl.clearColor(a, b, c, d)
                    }
                    0 != (h & 2) && (g |= this.gl.DEPTH_BUFFER_BIT, 1 != this.__contextState.depthMask && (this.gl.depthMask(!0), this.__contextState.depthMask = !0), this.gl.clearDepth(e));
                    0 != (h & 4) && (g |= this.gl.STENCIL_BUFFER_BIT, 255 != this.__contextState.stencilWriteMask && (this.gl.stencilMask(255), this.__contextState.stencilWriteMask = 255), this.gl.clearStencil(f), this.__contextState.stencilWriteMask = 255);
                    0 != g && (this.__setGLScissorTest(!1), this.gl.clear(g))
                },
                configureBackBuffer: function (a, b, c, d, e, f) {
                    null == f && (f = !1);
                    null == e && (e = !1);
                    null == d && (d = !0);
                    e && (a = a * this.__stage.window.__scale | 0, b = b * this.__stage.window.__scale | 0);
                    if (null == this.__stage3D) this.backBufferWidth = a, this.backBufferHeight =
                        b, this.__backBufferAntiAlias = c, this.__state.backBufferEnableDepthAndStencil = d, this.__backBufferWantsBestResolution = e, this.__backBufferWantsBestResolutionOnBrowserZoom = f;
                    else {
                        if (null == this.__backBufferTexture || this.backBufferWidth != a || this.backBufferHeight != b) {
                            null != this.__backBufferTexture && this.__backBufferTexture.dispose();
                            null != this.__frontBufferTexture && this.__frontBufferTexture.dispose();
                            this.__backBufferTexture = this.createRectangleTexture(a, b, 1, !0);
                            this.__frontBufferTexture = this.createRectangleTexture(a,
                                b, 1, !0);
                            null == this.__stage3D.__vertexBuffer && (this.__stage3D.__vertexBuffer = this.createVertexBuffer(4, 5));
                            var h = e ? a : a * this.__stage.window.__scale | 0,
                                g = e ? b : b * this.__stage.window.__scale | 0;
                            h = D.toFloatVector(null, null, null, [h, g, 0, 1, 1, 0, g, 0, 0, 1, h, 0, 0, 1, 0, 0, 0, 0, 0, 0]);
                            this.__stage3D.__vertexBuffer.uploadFromVector(h, 0, 20);
                            null == this.__stage3D.__indexBuffer && (this.__stage3D.__indexBuffer = this.createIndexBuffer(6), h = D.toIntVector(null, null, null, [0, 1, 2, 2, 1, 3]), this.__stage3D.__indexBuffer.uploadFromVector(h,
                                0, 6))
                        }
                        this.backBufferWidth = a;
                        this.backBufferHeight = b;
                        this.__backBufferAntiAlias = c;
                        this.__state.backBufferEnableDepthAndStencil = d;
                        this.__backBufferWantsBestResolution = e;
                        this.__backBufferWantsBestResolutionOnBrowserZoom = f;
                        this.__state.__primaryGLFramebuffer = this.__backBufferTexture.__getGLFramebuffer(d, c, 0);
                        this.__frontBufferTexture.__getGLFramebuffer(d, c, 0)
                    }
                },
                createCubeTexture: function (a, b, c, d) {
                    null == d && (d = 0);
                    return new Hf(this, a, b, c, d)
                },
                createIndexBuffer: function (a, b) {
                    null == b && (b = 1);
                    return new Wk(this,
                        a, b)
                },
                createProgram: function (a) {
                    null == a && (a = 0);
                    return new Xk(this, a)
                },
                createRectangleTexture: function (a, b, c, d) {
                    return new dh(this, a, b, cm.toString(c), d)
                },
                createTexture: function (a, b, c, d, e) {
                    null == e && (e = 0);
                    return new Je(this, a, b, c, d, e)
                },
                createVertexBuffer: function (a, b, c) {
                    null == c && (c = 1);
                    return new Yk(this, a, b, Rl.toString(c))
                },
                drawToBitmapData: function (a, b, c) {
                    if (null != a)
                        if (b = null != b ? b.__toLimeRectangle() : new Mc(0, 0, this.backBufferWidth, this.backBufferHeight), c = null != c ? c.__toLimeVector2() : new mf, this.__stage.context3D ==
                        this) {
                            if (null != this.__stage.window) {
                                if (null != this.__stage3D) {
                                    var d = -this.__stage3D.get_x() | 0,
                                        e = -this.__stage3D.get_y() | 0;
                                    c.x = d;
                                    c.y = e
                                }
                                e = this.__stage.window.readPixels();
                                a.image.copyPixels(e, b, c)
                            }
                        } else if (null != this.__backBufferTexture) {
                            d = this.__state.renderToTexture;
                            this.setRenderToBackBuffer();
                            this.__flushGLFramebuffer();
                            this.__flushGLViewport();
                            e = this.backBufferWidth * this.backBufferHeight * 4;
                            var f = e = null != e ? new Uint8Array(e) : null;
                            e = this.gl;
                            e.readPixels(0, 0, this.backBufferWidth, this.backBufferHeight,
                                this.__backBufferTexture.__format, this.gl.UNSIGNED_BYTE, f);
                            e = new qb(new ae(f, this.backBufferWidth, this.backBufferHeight, 32, 2));
                            a.image.copyPixels(e, b, c);
                            null != d && this.setRenderToTexture(d, this.__state.renderToTextureDepthStencil, this.__state.renderToTextureAntiAlias, this.__state.renderToTextureSurfaceSelector)
                        }
                },
                drawTriangles: function (a, b, c) {
                    null == c && (c = -1);
                    null == b && (b = 0);
                    null == this.__state.renderToTexture && (this.__stage.context3D != this || this.__stage.__renderer.__cleared ? this.__cleared || this.clear(0,
                        0, 0, 0, 1, 0, 1) : this.__stage.__renderer.__clear());
                    this.__flushGL();
                    null != this.__state.program && this.__state.program.__flush();
                    c = -1 == c ? a.__numIndices : 3 * c;
                    this.__bindGLElementArrayBuffer(a.__id);
                    this.gl.drawElements(this.gl.TRIANGLES, c, this.gl.UNSIGNED_SHORT, 2 * b)
                },
                present: function () {
                    this.setRenderToBackBuffer();
                    if (null != this.__stage3D && null != this.__backBufferTexture) {
                        this.__cleared || this.clear(0, 0, 0, 0, 1, 0, 1);
                        var a = this.__backBufferTexture;
                        this.__backBufferTexture = this.__frontBufferTexture;
                        this.__frontBufferTexture =
                            a;
                        this.__state.__primaryGLFramebuffer = this.__backBufferTexture.__getGLFramebuffer(this.__state.backBufferEnableDepthAndStencil, this.__backBufferAntiAlias, 0);
                        this.__cleared = !1
                    }
                    this.__present = !0
                },
                setBlendFactors: function (a, b) {
                    this.setBlendFactorsSeparate(a, b, a, b)
                },
                setBlendFactorsSeparate: function (a, b, c, d) {
                    this.__state.blendSourceRGBFactor = a;
                    this.__state.blendDestinationRGBFactor = b;
                    this.__state.blendSourceAlphaFactor = c;
                    this.__state.blendDestinationAlphaFactor = d;
                    this.__setGLBlendEquation(this.gl.FUNC_ADD)
                },
                setColorMask: function (a, b, c, d) {
                    this.__state.colorMaskRed = a;
                    this.__state.colorMaskGreen = b;
                    this.__state.colorMaskBlue = c;
                    this.__state.colorMaskAlpha = d
                },
                setCulling: function (a) {
                    this.__state.culling = a
                },
                setDepthTest: function (a, b) {
                    this.__state.depthMask = a;
                    this.__state.depthCompareMode = b
                },
                setProgram: function (a) {
                    this.__state.program = a;
                    this.__state.shader = null;
                    if (null != a)
                        for (var b = 0, c = a.__samplerStates.length; b < c;) {
                            var d = b++;
                            null == this.__state.samplerStates[d] ? this.__state.samplerStates[d] = a.__samplerStates[d].clone() :
                                this.__state.samplerStates[d].copyFrom(a.__samplerStates[d])
                        }
                },
                setProgramConstantsFromMatrix: function (a, b, c, d) {
                    null == d && (d = !1);
                    if (null != this.__state.program && 1 == this.__state.program.__format) this.__flushGLProgram(), a = new Float32Array(16), a[0] = c.rawData.get(0), a[1] = c.rawData.get(1), a[2] = c.rawData.get(2), a[3] = c.rawData.get(3), a[4] = c.rawData.get(4), a[5] = c.rawData.get(5), a[6] = c.rawData.get(6), a[7] = c.rawData.get(7), a[8] = c.rawData.get(8), a[9] = c.rawData.get(9), a[10] = c.rawData.get(10), a[11] = c.rawData.get(11),
                        a[12] = c.rawData.get(12), a[13] = c.rawData.get(13), a[14] = c.rawData.get(14), a[15] = c.rawData.get(15), Gb.uniformMatrix4fv(this.gl, b, d, a);
                    else {
                        var e = (a = 1 == a) ? this.__vertexConstants : this.__fragmentConstants;
                        c = c.rawData;
                        var f = 4 * b;
                        d ? (e[f++] = c.get(0), e[f++] = c.get(4), e[f++] = c.get(8), e[f++] = c.get(12), e[f++] = c.get(1), e[f++] = c.get(5), e[f++] = c.get(9), e[f++] = c.get(13), e[f++] = c.get(2), e[f++] = c.get(6), e[f++] = c.get(10), e[f++] = c.get(14), e[f++] = c.get(3), e[f++] = c.get(7), e[f++] = c.get(11)) : (e[f++] = c.get(0), e[f++] = c.get(1),
                            e[f++] = c.get(2), e[f++] = c.get(3), e[f++] = c.get(4), e[f++] = c.get(5), e[f++] = c.get(6), e[f++] = c.get(7), e[f++] = c.get(8), e[f++] = c.get(9), e[f++] = c.get(10), e[f++] = c.get(11), e[f++] = c.get(12), e[f++] = c.get(13), e[f++] = c.get(14));
                        e[f++] = c.get(15);
                        null != this.__state.program && this.__state.program.__markDirty(a, b, 4)
                    }
                },
                setProgramConstantsFromVector: function (a, b, c, d) {
                    null == d && (d = -1);
                    if (0 != d && (null == this.__state.program || 1 != this.__state.program.__format)) {
                        -1 == d && (d = c.get_length() >> 2);
                        for (var e = (a = 1 == a) ? this.__vertexConstants :
                            this.__fragmentConstants, f = 0, h = 4 * b, g = 0, m = d; g < m;) g++, e[h++] = c.get(f++), e[h++] = c.get(f++), e[h++] = c.get(f++), e[h++] = c.get(f++);
                        null != this.__state.program && this.__state.program.__markDirty(a, b, d)
                    }
                },
                setRenderToBackBuffer: function () {
                    this.__state.renderToTexture = null
                },
                setRenderToTexture: function (a, b, c, d) {
                    null == d && (d = 0);
                    null == c && (c = 0);
                    null == b && (b = !1);
                    this.__state.renderToTexture = a;
                    this.__state.renderToTextureDepthStencil = b;
                    this.__state.renderToTextureAntiAlias = c;
                    this.__state.renderToTextureSurfaceSelector =
                        d
                },
                setSamplerStateAt: function (a, b, c, d) {
                    null == this.__state.samplerStates[a] && (this.__state.samplerStates[a] = new vf);
                    a = this.__state.samplerStates[a];
                    a.wrap = b;
                    a.filter = c;
                    a.mipfilter = d
                },
                setScissorRectangle: function (a) {
                    null != a ? (this.__state.scissorEnabled = !0, this.__state.scissorRectangle.copyFrom(a)) : this.__state.scissorEnabled = !1
                },
                setStencilActions: function (a, b, c, d, e) {
                    null == e && (e = 5);
                    null == d && (d = 5);
                    null == c && (c = 5);
                    null == b && (b = 0);
                    null == a && (a = 2);
                    this.__state.stencilTriangleFace = a;
                    this.__state.stencilCompareMode =
                        b;
                    this.__state.stencilPass = c;
                    this.__state.stencilDepthFail = d;
                    this.__state.stencilFail = e
                },
                setStencilReferenceValue: function (a, b, c) {
                    null == c && (c = 255);
                    null == b && (b = 255);
                    this.__state.stencilReferenceValue = a;
                    this.__state.stencilReadMask = b;
                    this.__state.stencilWriteMask = c
                },
                setTextureAt: function (a, b) {
                    this.__state.textures[a] = b
                },
                setVertexBufferAt: function (a, b, c, d) {
                    null == d && (d = 4);
                    null == c && (c = 0);
                    if (!(0 > a))
                        if (null == b) this.gl.disableVertexAttribArray(a), this.__bindGLArrayBuffer(null);
                        else switch (this.__bindGLArrayBuffer(b.__id),
                            this.gl.enableVertexAttribArray(a), c *= 4, d) {
                            case 0:
                                this.gl.vertexAttribPointer(a, 4, this.gl.UNSIGNED_BYTE, !0, b.__stride, c);
                                break;
                            case 1:
                                this.gl.vertexAttribPointer(a, 1, this.gl.FLOAT, !1, b.__stride, c);
                                break;
                            case 2:
                                this.gl.vertexAttribPointer(a, 2, this.gl.FLOAT, !1, b.__stride, c);
                                break;
                            case 3:
                                this.gl.vertexAttribPointer(a, 3, this.gl.FLOAT, !1, b.__stride, c);
                                break;
                            case 4:
                                this.gl.vertexAttribPointer(a, 4, this.gl.FLOAT, !1, b.__stride, c);
                                break;
                            default:
                                throw new fc;
                        }
                },
                __bindGLArrayBuffer: function (a) {
                    this.__contextState.__currentGLArrayBuffer !=
                    a && (this.gl.bindBuffer(this.gl.ARRAY_BUFFER, a), this.__contextState.__currentGLArrayBuffer = a)
                },
                __bindGLElementArrayBuffer: function (a) {
                    this.__contextState.__currentGLElementArrayBuffer != a && (this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, a), this.__contextState.__currentGLElementArrayBuffer = a)
                },
                __bindGLFramebuffer: function (a) {
                    this.__contextState.__currentGLFramebuffer != a && (this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, a), this.__contextState.__currentGLFramebuffer = a)
                },
                __bindGLTexture2D: function (a) {
                    this.gl.bindTexture(this.gl.TEXTURE_2D,
                        a);
                    this.__contextState.__currentGLTexture2D = a
                },
                __bindGLTextureCubeMap: function (a) {
                    this.gl.bindTexture(this.gl.TEXTURE_CUBE_MAP, a);
                    this.__contextState.__currentGLTextureCubeMap = a
                },
                __dispose: function () {
                    this.driverInfo += " (Disposed)";
                    null != this.__stage3D && (this.__stage3D.__indexBuffer = null, this.__stage3D.__vertexBuffer = null, this.__stage3D = this.__stage3D.context3D = null);
                    this.__positionScale = this.__frontBufferTexture = this.__fragmentConstants = this.__renderStage3DProgram = this.__context = this.__backBufferTexture =
                        null;
                    this.__present = !1;
                    this.__vertexConstants = this.__stage = this.__quadIndexBuffer = null
                },
                __drawTriangles: function (a, b) {
                    null == a && (a = 0);
                    null == this.__state.renderToTexture && (this.__stage.context3D != this || this.__stage.__renderer.__cleared ? this.__cleared || this.clear(0, 0, 0, 0, 1, 0, 1) : this.__stage.__renderer.__clear());
                    this.__flushGL();
                    null != this.__state.program && this.__state.program.__flush();
                    this.gl.drawArrays(this.gl.TRIANGLES, a, b)
                },
                __flushGL: function () {
                    this.__flushGLProgram();
                    this.__flushGLFramebuffer();
                    this.__flushGLViewport();
                    this.__flushGLBlend();
                    if (this.__contextState.colorMaskRed != this.__state.colorMaskRed || this.__contextState.colorMaskGreen != this.__state.colorMaskGreen || this.__contextState.colorMaskBlue != this.__state.colorMaskBlue || this.__contextState.colorMaskAlpha != this.__state.colorMaskAlpha) this.gl.colorMask(this.__state.colorMaskRed, this.__state.colorMaskGreen, this.__state.colorMaskBlue, this.__state.colorMaskAlpha), this.__contextState.colorMaskRed = this.__state.colorMaskRed, this.__contextState.colorMaskGreen =
                        this.__state.colorMaskGreen, this.__contextState.colorMaskBlue = this.__state.colorMaskBlue, this.__contextState.colorMaskAlpha = this.__state.colorMaskAlpha;
                    this.__flushGLCulling();
                    this.__flushGLDepth();
                    this.__flushGLScissor();
                    this.__flushGLStencil();
                    this.__flushGLTextures()
                },
                __flushGLBlend: function () {
                    if (this.__contextState.blendDestinationRGBFactor != this.__state.blendDestinationRGBFactor || this.__contextState.blendSourceRGBFactor != this.__state.blendSourceRGBFactor || this.__contextState.blendDestinationAlphaFactor !=
                        this.__state.blendDestinationAlphaFactor || this.__contextState.blendSourceAlphaFactor != this.__state.blendSourceAlphaFactor) this.__setGLBlend(!0), this.__state.blendDestinationRGBFactor == this.__state.blendDestinationAlphaFactor && this.__state.blendSourceRGBFactor == this.__state.blendSourceAlphaFactor ? this.gl.blendFunc(this.__getGLBlend(this.__state.blendSourceRGBFactor), this.__getGLBlend(this.__state.blendDestinationRGBFactor)) : this.gl.blendFuncSeparate(this.__getGLBlend(this.__state.blendSourceRGBFactor),
                        this.__getGLBlend(this.__state.blendDestinationRGBFactor), this.__getGLBlend(this.__state.blendSourceAlphaFactor), this.__getGLBlend(this.__state.blendDestinationAlphaFactor)), this.__contextState.blendDestinationRGBFactor = this.__state.blendDestinationRGBFactor, this.__contextState.blendSourceRGBFactor = this.__state.blendSourceRGBFactor, this.__contextState.blendDestinationAlphaFactor = this.__state.blendDestinationAlphaFactor, this.__contextState.blendSourceAlphaFactor = this.__state.blendSourceAlphaFactor
                },
                __flushGLCulling: function () {
                    if (this.__contextState.culling != this.__state.culling) {
                        if (3 == this.__state.culling) this.__setGLCullFace(!1);
                        else switch (this.__setGLCullFace(!0), this.__state.culling) {
                            case 0:
                                this.gl.cullFace(this.gl.BACK);
                                break;
                            case 1:
                                this.gl.cullFace(this.gl.FRONT);
                                break;
                            case 2:
                                this.gl.cullFace(this.gl.FRONT_AND_BACK);
                                break;
                            case 3:
                                break;
                            default:
                                throw new fc;
                        }
                        this.__contextState.culling = this.__state.culling
                    }
                },
                __flushGLDepth: function () {
                    var a = this.__state.depthMask && (null != this.__state.renderToTexture ?
                        this.__state.renderToTextureDepthStencil : this.__state.backBufferEnableDepthAndStencil);
                    this.__contextState.depthMask != a && (this.gl.depthMask(a), this.__contextState.depthMask = a);
                    if (this.__contextState.depthCompareMode != this.__state.depthCompareMode) {
                        switch (this.__state.depthCompareMode) {
                            case 0:
                                this.gl.depthFunc(this.gl.ALWAYS);
                                break;
                            case 1:
                                this.gl.depthFunc(this.gl.EQUAL);
                                break;
                            case 2:
                                this.gl.depthFunc(this.gl.GREATER);
                                break;
                            case 3:
                                this.gl.depthFunc(this.gl.GEQUAL);
                                break;
                            case 4:
                                this.gl.depthFunc(this.gl.LESS);
                                break;
                            case 5:
                                this.gl.depthFunc(this.gl.LEQUAL);
                                break;
                            case 6:
                                this.gl.depthFunc(this.gl.NEVER);
                                break;
                            case 7:
                                this.gl.depthFunc(this.gl.NOTEQUAL);
                                break;
                            default:
                                throw new fc;
                        }
                        this.__contextState.depthCompareMode = this.__state.depthCompareMode
                    }
                },
                __flushGLFramebuffer: function () {
                    if (null != this.__state.renderToTexture) {
                        if (this.__contextState.renderToTexture != this.__state.renderToTexture || this.__contextState.renderToTextureSurfaceSelector != this.__state.renderToTextureSurfaceSelector) {
                            var a = this.__state.renderToTexture.__getGLFramebuffer(this.__state.renderToTextureDepthStencil,
                                this.__state.renderToTextureAntiAlias, this.__state.renderToTextureSurfaceSelector);
                            this.__bindGLFramebuffer(a);
                            this.__contextState.renderToTexture = this.__state.renderToTexture;
                            this.__contextState.renderToTextureAntiAlias = this.__state.renderToTextureAntiAlias;
                            this.__contextState.renderToTextureDepthStencil = this.__state.renderToTextureDepthStencil;
                            this.__contextState.renderToTextureSurfaceSelector = this.__state.renderToTextureSurfaceSelector
                        }
                        this.__setGLDepthTest(this.__state.renderToTextureDepthStencil);
                        this.__setGLStencilTest(this.__state.renderToTextureDepthStencil);
                        this.__setGLFrontFace(!0)
                    } else {
                        if (null == this.__stage && 0 == this.backBufferWidth && 0 == this.backBufferHeight) throw new Fa("Context3D backbuffer has not been configured");
                        if (null != this.__contextState.renderToTexture || this.__contextState.__currentGLFramebuffer != this.__state.__primaryGLFramebuffer || this.__contextState.backBufferEnableDepthAndStencil != this.__state.backBufferEnableDepthAndStencil) this.__bindGLFramebuffer(this.__state.__primaryGLFramebuffer),
                            this.__contextState.renderToTexture = null, this.__contextState.backBufferEnableDepthAndStencil = this.__state.backBufferEnableDepthAndStencil;
                        this.__setGLDepthTest(this.__state.backBufferEnableDepthAndStencil);
                        this.__setGLStencilTest(this.__state.backBufferEnableDepthAndStencil);
                        this.__setGLFrontFace(this.__stage.context3D != this)
                    }
                },
                __flushGLProgram: function () {
                    var a = this.__state.shader,
                        b = this.__state.program;
                    this.__contextState.shader != a && (null != this.__contextState.shader && this.__contextState.shader.__disable(),
                    null != a && a.__enable(), this.__contextState.shader = a);
                    this.__contextState.program != b && (null != this.__contextState.program && this.__contextState.program.__disable(), null != b && b.__enable(), this.__contextState.program = b);
                    null != b && 0 == b.__format && (this.__positionScale[1] = this.__stage.context3D == this && null == this.__state.renderToTexture ? 1 : -1, b.__setPositionScale(this.__positionScale))
                },
                __flushGLScissor: function () {
                    if (this.__state.scissorEnabled) {
                        this.__setGLScissorTest(!0);
                        this.__contextState.scissorEnabled = !0;
                        var a = this.__state.scissorRectangle.x | 0,
                            b = this.__state.scissorRectangle.y | 0,
                            c = this.__state.scissorRectangle.width | 0,
                            d = this.__state.scissorRectangle.height | 0;
                        this.__backBufferWantsBestResolution && (a = this.__state.scissorRectangle.x * this.__stage.window.__scale | 0, b = this.__state.scissorRectangle.y * this.__stage.window.__scale | 0, c = this.__state.scissorRectangle.width * this.__stage.window.__scale | 0, d = this.__state.scissorRectangle.height * this.__stage.window.__scale | 0);
                        null == this.__state.renderToTexture && null ==
                        this.__stage3D && (b = (this.__stage.window.__height * this.__stage.window.__scale | 0) - d - b);
                        if (this.__contextState.scissorRectangle.x != a || this.__contextState.scissorRectangle.y != b || this.__contextState.scissorRectangle.width != c || this.__contextState.scissorRectangle.height != d) this.gl.scissor(a, b, c, d), this.__contextState.scissorRectangle.setTo(a, b, c, d)
                    } else this.__contextState.scissorEnabled != this.__state.scissorEnabled && (this.__setGLScissorTest(!1), this.__contextState.scissorEnabled = !1)
                },
                __flushGLStencil: function () {
                    if (this.__contextState.stencilTriangleFace !=
                        this.__state.stencilTriangleFace || this.__contextState.stencilPass != this.__state.stencilPass || this.__contextState.stencilDepthFail != this.__state.stencilDepthFail || this.__contextState.stencilFail != this.__state.stencilFail) this.gl.stencilOpSeparate(this.__getGLTriangleFace(this.__state.stencilTriangleFace), this.__getGLStencilAction(this.__state.stencilFail), this.__getGLStencilAction(this.__state.stencilDepthFail), this.__getGLStencilAction(this.__state.stencilPass)), this.__contextState.stencilTriangleFace =
                        this.__state.stencilTriangleFace, this.__contextState.stencilPass = this.__state.stencilPass, this.__contextState.stencilDepthFail = this.__state.stencilDepthFail, this.__contextState.stencilFail = this.__state.stencilFail;
                    this.__contextState.stencilWriteMask != this.__state.stencilWriteMask && (this.gl.stencilMask(this.__state.stencilWriteMask), this.__contextState.stencilWriteMask = this.__state.stencilWriteMask);
                    if (this.__contextState.stencilCompareMode != this.__state.stencilCompareMode || this.__contextState.stencilReferenceValue !=
                        this.__state.stencilReferenceValue || this.__contextState.stencilReadMask != this.__state.stencilReadMask) this.gl.stencilFunc(this.__getGLCompareMode(this.__state.stencilCompareMode), this.__state.stencilReferenceValue, this.__state.stencilReadMask), this.__contextState.stencilCompareMode = this.__state.stencilCompareMode, this.__contextState.stencilReferenceValue = this.__state.stencilReferenceValue, this.__contextState.stencilReadMask = this.__state.stencilReadMask
                },
                __flushGLTextures: function () {
                    for (var a = 0, b,
                             c, d = 0, e = this.__state.textures.length; d < e;) {
                        var f = d++;
                        b = this.__state.textures[f];
                        c = this.__state.samplerStates[f];
                        null == c && (this.__state.samplerStates[f] = new vf, c = this.__state.samplerStates[f]);
                        this.gl.activeTexture(this.gl.TEXTURE0 + a);
                        null != b ? (b.__textureTarget == this.gl.TEXTURE_2D ? this.__bindGLTexture2D(b.__getTexture()) : this.__bindGLTextureCubeMap(b.__getTexture()), this.__contextState.textures[f] = b, b.__setSamplerState(c)) : this.__bindGLTexture2D(null);
                        null != this.__state.program && 0 == this.__state.program.__format &&
                        c.textureAlpha && (this.gl.activeTexture(this.gl.TEXTURE0 + a + 4), null != b && null != b.__alphaTexture ? (b.__alphaTexture.__textureTarget == this.gl.TEXTURE_2D ? this.__bindGLTexture2D(b.__alphaTexture.__getTexture()) : this.__bindGLTextureCubeMap(b.__alphaTexture.__getTexture()), b.__alphaTexture.__setSamplerState(c), this.gl.uniform1i(this.__state.program.__agalAlphaSamplerEnabled[a].location, 1)) : (this.__bindGLTexture2D(null), null != this.__state.program.__agalAlphaSamplerEnabled[a] && this.gl.uniform1i(this.__state.program.__agalAlphaSamplerEnabled[a].location,
                            0)));
                        ++a
                    }
                },
                __flushGLViewport: function () {
                    if (null == this.__state.renderToTexture)
                        if (this.__stage.context3D == this) {
                            var a = this.backBufferWidth,
                                b = this.backBufferHeight;
                            null != this.__stage3D || this.__backBufferWantsBestResolution || (a = this.backBufferWidth * this.__stage.window.__scale | 0, b = this.backBufferHeight * this.__stage.window.__scale | 0);
                            var c = null == this.__stage3D ? 0 : this.__stage3D.get_x() | 0,
                                d = this.__stage.window.__height * this.__stage.window.__scale - b - (null == this.__stage3D ? 0 : this.__stage3D.get_y()) | 0;
                            this.gl.viewport(c,
                                d, a, b)
                        } else this.gl.viewport(0, 0, this.backBufferWidth, this.backBufferHeight);
                    else b = a = 0, this.__state.renderToTexture instanceof Je ? (b = this.__state.renderToTexture, a = b.__width, b = b.__height) : this.__state.renderToTexture instanceof dh ? (b = this.__state.renderToTexture, a = b.__width, b = b.__height) : this.__state.renderToTexture instanceof Hf && (b = this.__state.renderToTexture, b = a = b.__size), this.gl.viewport(0, 0, a, b)
                },
                __getGLBlend: function (a) {
                    switch (a) {
                        case 0:
                            return this.gl.DST_ALPHA;
                        case 1:
                            return this.gl.DST_COLOR;
                        case 2:
                            return this.gl.ONE;
                        case 3:
                            return this.gl.ONE_MINUS_DST_ALPHA;
                        case 4:
                            return this.gl.ONE_MINUS_DST_COLOR;
                        case 5:
                            return this.gl.ONE_MINUS_SRC_ALPHA;
                        case 6:
                            return this.gl.ONE_MINUS_SRC_COLOR;
                        case 7:
                            return this.gl.SRC_ALPHA;
                        case 8:
                            return this.gl.SRC_COLOR;
                        case 9:
                            return this.gl.ZERO;
                        default:
                            throw new fc;
                    }
                },
                __getGLCompareMode: function (a) {
                    switch (a) {
                        case 0:
                            return this.gl.ALWAYS;
                        case 1:
                            return this.gl.EQUAL;
                        case 2:
                            return this.gl.GREATER;
                        case 3:
                            return this.gl.GEQUAL;
                        case 4:
                            return this.gl.LESS;
                        case 5:
                            return this.gl.LEQUAL;
                        case 6:
                            return this.gl.NEVER;
                        case 7:
                            return this.gl.NOTEQUAL;
                        default:
                            return this.gl.EQUAL
                    }
                },
                __getGLStencilAction: function (a) {
                    switch (a) {
                        case 0:
                            return this.gl.DECR;
                        case 1:
                            return this.gl.DECR_WRAP;
                        case 2:
                            return this.gl.INCR;
                        case 3:
                            return this.gl.INCR_WRAP;
                        case 4:
                            return this.gl.INVERT;
                        case 5:
                            return this.gl.KEEP;
                        case 6:
                            return this.gl.REPLACE;
                        case 7:
                            return this.gl.ZERO;
                        default:
                            return this.gl.KEEP
                    }
                },
                __getGLTriangleFace: function (a) {
                    switch (a) {
                        case 0:
                            return this.gl.BACK;
                        case 1:
                            return this.gl.FRONT;
                        case 2:
                            return this.gl.FRONT_AND_BACK;
                        case 3:
                            return this.gl.NONE;
                        default:
                            return this.gl.FRONT_AND_BACK
                    }
                },
                __renderStage3D: function (a) {
                    var b = a.context3D;
                    if (null != b && b != this && null != b.__frontBufferTexture && a.visible && 0 < this.backBufferHeight && 0 < this.backBufferWidth) {
                        if (null == this.__renderStage3DProgram) {
                            var c = new W;
                            c.assemble(Ef.toString(1), "m44 op, va0, vc0\nmov v0, va1");
                            var d = new W;
                            d.assemble(Ef.toString(0), "tex ft1, v0, fs0 <2d,nearest,nomip>\nmov oc, ft1");
                            this.__renderStage3DProgram = this.createProgram();
                            this.__renderStage3DProgram.upload(c.agalcode,
                                d.agalcode)
                        }
                        this.setProgram(this.__renderStage3DProgram);
                        this.setBlendFactors(2, 9);
                        this.setColorMask(!0, !0, !0, !0);
                        this.setCulling(3);
                        this.setDepthTest(!1, 0);
                        this.setStencilActions();
                        this.setStencilReferenceValue(0, 0, 0);
                        this.setScissorRectangle(null);
                        this.setTextureAt(0, b.__frontBufferTexture);
                        this.setVertexBufferAt(0, a.__vertexBuffer, 0, 3);
                        this.setVertexBufferAt(1, a.__vertexBuffer, 3, 2);
                        this.setProgramConstantsFromMatrix(1, 0, a.__renderTransform, !0);
                        this.drawTriangles(a.__indexBuffer);
                        this.__present = !0
                    }
                },
                __setGLBlend: function (a) {
                    this.__contextState.__enableGLBlend != a && (a ? this.gl.enable(this.gl.BLEND) : this.gl.disable(this.gl.BLEND), this.__contextState.__enableGLBlend = a)
                },
                __setGLBlendEquation: function (a) {
                    this.__contextState.__glBlendEquation != a && (this.gl.blendEquation(a), this.__contextState.__glBlendEquation = a)
                },
                __setGLCullFace: function (a) {
                    this.__contextState.__enableGLCullFace != a && (a ? this.gl.enable(this.gl.CULL_FACE) : this.gl.disable(this.gl.CULL_FACE), this.__contextState.__enableGLCullFace = a)
                },
                __setGLDepthTest: function (a) {
                    this.__contextState.__enableGLDepthTest != a && (a ? this.gl.enable(this.gl.DEPTH_TEST) : this.gl.disable(this.gl.DEPTH_TEST), this.__contextState.__enableGLDepthTest = a)
                },
                __setGLFrontFace: function (a) {
                    this.__contextState.__frontFaceGLCCW != a && (this.gl.frontFace(a ? this.gl.CCW : this.gl.CW), this.__contextState.__frontFaceGLCCW = a)
                },
                __setGLScissorTest: function (a) {
                    this.__contextState.__enableGLScissorTest != a && (a ? this.gl.enable(this.gl.SCISSOR_TEST) : this.gl.disable(this.gl.SCISSOR_TEST),
                        this.__contextState.__enableGLScissorTest = a)
                },
                __setGLStencilTest: function (a) {
                    this.__contextState.__enableGLStencilTest != a && (a ? this.gl.enable(this.gl.STENCIL_TEST) : this.gl.disable(this.gl.STENCIL_TEST), this.__contextState.__enableGLStencilTest = a)
                },
                set_enableErrorChecking: function (a) {
                    return this.__enableErrorChecking = a
                },
                __class__: Sa,
                __properties__: {
                    set_enableErrorChecking: "set_enableErrorChecking"
                }
            });
            var Rl = {
                    fromString: function (a) {
                        switch (a) {
                            case "dynamicDraw":
                                return 0;
                            case "staticDraw":
                                return 1;
                            default:
                                return null
                        }
                    },
                    toString: function (a) {
                        switch (a) {
                            case 0:
                                return "dynamicDraw";
                            case 1:
                                return "staticDraw";
                            default:
                                return null
                        }
                    }
                },
                Tl = {
                    fromString: function (a) {
                        switch (a) {
                            case "baseline":
                                return 0;
                            case "baselineConstrained":
                                return 1;
                            case "baselineExtended":
                                return 2;
                            case "standard":
                                return 3;
                            case "standardConstrained":
                                return 4;
                            case "standardExtended":
                                return 5;
                            default:
                                return null
                        }
                    }
                },
                Ef = {
                    toString: function (a) {
                        switch (a) {
                            case 0:
                                return "fragment";
                            case 1:
                                return "vertex";
                            default:
                                return null
                        }
                    }
                },
                cm = {
                    toString: function (a) {
                        switch (a) {
                            case 0:
                                return "bgrPacked565";
                            case 1:
                                return "bgra";
                            case 2:
                                return "bgraPacked4444";
                            case 3:
                                return "compressed";
                            case 4:
                                return "compressedAlpha";
                            case 5:
                                return "rgbaHalfFloat";
                            default:
                                return null
                        }
                    }
                },
                Wk = function (a, b, c) {
                    this.__context = a;
                    this.__numIndices = b;
                    a = this.__context.gl;
                    this.__id = a.createBuffer();
                    this.__usage = 0 == c ? a.DYNAMIC_DRAW : a.STATIC_DRAW
                };
            g["openfl.display3D.IndexBuffer3D"] = Wk;
            Wk.__name__ = "openfl.display3D.IndexBuffer3D";
            Wk.prototype = {
                dispose: function () {
                    this.__context.gl.deleteBuffer(this.__id)
                },
                uploadFromTypedArray: function (a,
                                                b) {
                    null != a && (b = this.__context.gl, this.__context.__bindGLElementArrayBuffer(this.__id), Gb.bufferData(b, b.ELEMENT_ARRAY_BUFFER, a, this.__usage))
                },
                uploadFromVector: function (a, b, c) {
                    if (null != a) {
                        var d = b + c,
                            e = this.__tempUInt16Array;
                        if (null == this.__tempUInt16Array || this.__tempUInt16Array.length < c) this.__tempUInt16Array = null != c ? new Uint16Array(c) : null, null != e && this.__tempUInt16Array.set(e);
                        for (c = b; c < d;) e = c++, this.__tempUInt16Array[e - b] = a.get(e);
                        this.uploadFromTypedArray(this.__tempUInt16Array)
                    }
                },
                __class__: Wk
            };
            var Xk = function (a, b) {
                this.__context = a;
                this.__format = b;
                0 == this.__format ? (this.__agalSamplerUsageMask = 0, this.__agalUniforms = new Da, this.__agalSamplerUniforms = new Da, this.__agalAlphaSamplerUniforms = new Da, this.__agalAlphaSamplerEnabled = []) : (this.__glslAttribNames = [], this.__glslAttribTypes = [], this.__glslSamplerNames = [], this.__glslUniformLocations = [], this.__glslUniformNames = [], this.__glslUniformTypes = []);
                this.__samplerStates = []
            };
            g["openfl.display3D.Program3D"] = Xk;
            Xk.__name__ = "openfl.display3D.Program3D";
            Xk.prototype = {
                dispose: function () {
                    this.__deleteShaders()
                },
                upload: function (a, b) {
                    if (0 == this.__format) {
                        var c = [];
                        a = rc.convertToGLSL(a, null);
                        b = rc.convertToGLSL(b, c);
                        5 == ua.level && (ua.info(a, {

                            className: "openfl.display3D.Program3D",
                            methodName: "upload"
                        }), ua.info(b, {

                            className: "openfl.display3D.Program3D",
                            methodName: "upload"
                        }));
                        this.__deleteShaders();
                        this.__uploadFromGLSL(a, b);
                        this.__buildAGALUniformList();
                        b = 0;
                        for (a = c.length; b < a;) {
                            var d = b++;
                            this.__samplerStates[d] = c[d]
                        }
                    }
                },
                __buildAGALUniformList: function () {
                    if (1 != this.__format) {
                        var a = this.__context.gl;
                        this.__agalUniforms.clear();
                        this.__agalSamplerUniforms.clear();
                        this.__agalAlphaSamplerUniforms.clear();
                        this.__agalAlphaSamplerEnabled = [];
                        this.__agalSamplerUsageMask = 0;
                        var b = a.getProgramParameter(this.__glProgram, a.ACTIVE_UNIFORMS);
                        for (var c = new Da, d = new Da, e = 0; e < b;) {
                            var f = e++,
                                h = a.getActiveUniform(this.__glProgram, f),
                                g = h.name,
                                m = h.size,
                                q = h.type;
                            h = new Ej(this.__context);
                            h.name = g;
                            h.size = m;
                            h.type = q;
                            h.location = a.getUniformLocation(this.__glProgram, h.name);
                            g = h.name.indexOf("[");
                            0 <= g && (h.name = h.name.substring(0, g));
                            switch (h.type) {
                                case 35674:
                                    h.regCount = 2;
                                    break;
                                case 35675:
                                    h.regCount = 3;
                                    break;
                                case 35676:
                                    h.regCount = 4;
                                    break;
                                default:
                                    h.regCount = 1
                            }
                            h.regCount *= h.size;
                            this.__agalUniforms.add(h);
                            if ("vcPositionScale" == h.name) this.__agalPositionScale = h;
                            else if (R.startsWith(h.name, "vc")) h.regIndex = n.parseInt(h.name.substring(2)), h.regData = this.__context.__vertexConstants, c.add(h);
                            else if (R.startsWith(h.name,
                                "fc")) h.regIndex = n.parseInt(h.name.substring(2)), h.regData = this.__context.__fragmentConstants, d.add(h);
                            else if (R.startsWith(h.name, "sampler") && -1 == h.name.indexOf("alpha"))
                                for (h.regIndex = n.parseInt(h.name.substring(7)), this.__agalSamplerUniforms.add(h), g = 0, m = h.regCount; g < m;) q = g++, this.__agalSamplerUsageMask |= 1 << h.regIndex + q;
                            else R.startsWith(h.name, "sampler") && R.endsWith(h.name, "_alpha") ? (g = h.name.indexOf("_") - 7, h.regIndex = n.parseInt(h.name.substring(7, 7 + g)) + 4, this.__agalAlphaSamplerUniforms.add(h)) :
                                    R.startsWith(h.name, "sampler") && R.endsWith(h.name, "_alphaEnabled") && (h.regIndex = n.parseInt(h.name.substring(7)), this.__agalAlphaSamplerEnabled[h.regIndex] = h);
                            5 == ua.level && ua.verbose("" + f + " name:" + h.name + " type:" + h.type + " size:" + h.size + " location:" + n.string(h.location), {

                                className: "openfl.display3D.Program3D",
                                methodName: "__buildAGALUniformList"
                            })
                        }
                        this.__agalVertexUniformMap = new eh(ad.array(c));
                        this.__agalFragmentUniformMap = new eh(ad.array(d))
                    }
                },
                __deleteShaders: function () {
                    var a = this.__context.gl;
                    null != this.__glProgram && (this.__glProgram = null);
                    null != this.__glVertexShader && (a.deleteShader(this.__glVertexShader), this.__glVertexShader = null);
                    null != this.__glFragmentShader && (a.deleteShader(this.__glFragmentShader), this.__glFragmentShader = null)
                },
                __disable: function () {
                },
                __enable: function () {
                    var a = this.__context.gl;
                    a.useProgram(this.__glProgram);
                    if (0 == this.__format) {
                        this.__agalVertexUniformMap.markAllDirty();
                        this.__agalFragmentUniformMap.markAllDirty();
                        for (var b = this.__agalSamplerUniforms.h; null != b;) {
                            var c = b.item;
                            b = b.next;
                            if (1 == c.regCount) a.uniform1i(c.location, c.regIndex);
                            else throw new fc("!!! TODO: uniform location on webgl");
                        }
                        for (b = this.__agalAlphaSamplerUniforms.h; null != b;)
                            if (c = b.item, b = b.next, 1 == c.regCount) a.uniform1i(c.location, c.regIndex);
                            else throw new fc("!!! TODO: uniform location on webgl");
                    }
                },
                __flush: function () {
                    0 == this.__format && (this.__agalVertexUniformMap.flush(), this.__agalFragmentUniformMap.flush())
                },
                __markDirty: function (a, b, c) {
                    1 !=
                    this.__format && (a ? this.__agalVertexUniformMap.markDirty(b, c) : this.__agalFragmentUniformMap.markDirty(b, c))
                },
                __setPositionScale: function (a) {
                    1 != this.__format && null != this.__agalPositionScale && this.__context.gl.uniform4fv(this.__agalPositionScale.location, a)
                },
                __uploadFromGLSL: function (a, b) {
                    var c = this.__context.gl;
                    this.__glVertexSource = a;
                    this.__glFragmentSource = b;
                    this.__glVertexShader = c.createShader(c.VERTEX_SHADER);
                    c.shaderSource(this.__glVertexShader, a);
                    c.compileShader(this.__glVertexShader);
                    if (0 == c.getShaderParameter(this.__glVertexShader,
                        c.COMPILE_STATUS)) {
                        var d = "Error compiling vertex shader\n" + c.getShaderInfoLog(this.__glVertexShader);
                        ua.error(d + ("\n" + a), {

                            className: "openfl.display3D.Program3D",
                            methodName: "__uploadFromGLSL"
                        })
                    }
                    this.__glFragmentShader = c.createShader(c.FRAGMENT_SHADER);
                    c.shaderSource(this.__glFragmentShader, b);
                    c.compileShader(this.__glFragmentShader);
                    0 == c.getShaderParameter(this.__glFragmentShader, c.COMPILE_STATUS) && (d = "Error compiling fragment shader\n" + c.getShaderInfoLog(this.__glFragmentShader),
                        ua.error(d + ("\n" + b), {

                            className: "openfl.display3D.Program3D",
                            methodName: "__uploadFromGLSL"
                        }));
                    this.__glProgram = c.createProgram();
                    if (0 == this.__format)
                        for (b = 0; 16 > b;) {
                            var e = b++;
                            d = "va" + e;
                            -
                                1 != a.indexOf(" " + d) && c.bindAttribLocation(this.__glProgram, e, d)
                        } else
                        for (b = 0, a = this.__glslAttribNames; b < a.length;)
                            if (d = a[b], ++b, -1 < d.indexOf("Position") && R.startsWith(d, "openfl_")) {
                                c.bindAttribLocation(this.__glProgram, 0, d);
                                break
                            }
                    c.attachShader(this.__glProgram,
                        this.__glVertexShader);
                    c.attachShader(this.__glProgram, this.__glFragmentShader);
                    c.linkProgram(this.__glProgram);
                    0 == c.getProgramParameter(this.__glProgram, c.LINK_STATUS) && (d = "Unable to initialize the shader program\n" + c.getProgramInfoLog(this.__glProgram), ua.error(d, {

                        className: "openfl.display3D.Program3D",
                        methodName: "__uploadFromGLSL"
                    }))
                },
                __class__: Xk
            };
            var Ej = function (a) {
                this.context = a;
                this.isDirty = !0;
                this.regDataPointer = new Rk(null, 0)
            };
            g["openfl.display3D.Uniform"] =
                Ej;
            Ej.__name__ = "openfl.display3D.Uniform";
            Ej.prototype = {
                flush: function () {
                    var a = this.context.gl,
                        b = 4 * this.regIndex;
                    switch (this.type) {
                        case 35664:
                            Yl.uniform2fv(a, this.location, this.regData.subarray(b, b + 2 * this.regCount));
                            break;
                        case 35665:
                            var c = this.location;
                            b = this.regData.subarray(b, b + 3 * this.regCount);
                            var d = null;
                            null != d ? a.uniform3fv(c, b, d, null) : a.uniform3fv(c, b);
                            break;
                        case 35666:
                            c = this.location;
                            b = this.regData.subarray(b, b + 4 * this.regCount);
                            d = null;
                            null != d ? a.uniform4fv(c, b, d, null) : a.uniform4fv(c, b);
                            break;
                        case 35674:
                            Gb.uniformMatrix2fv(a, this.location, !1, this.regData.subarray(b, b + 4 * this.size));
                            break;
                        case 35675:
                            Gb.uniformMatrix3fv(a, this.location, !1, this.regData.subarray(b, b + 9 * this.size));
                            break;
                        case 35676:
                            Gb.uniformMatrix4fv(a, this.location, !1, this.regData.subarray(b, b + 16 * this.size));
                            break;
                        default:
                            c = this.location, b = this.regData.subarray(b, b + 4 * this.regCount), d = null, null != d ? a.uniform4fv(c, b, d, null) : a.uniform4fv(c, b)
                    }
                },
                __class__: Ej
            };
            var eh = function (a) {
                this.__uniforms = a;
                this.__uniforms.sort(function (a,
                                               b) {
                    return M.compare(a.regIndex, b.regIndex)
                });
                var b = 0;
                a = 0;
                for (var c = this.__uniforms; a < c.length;) {
                    var d = c[a];
                    ++a;
                    d.regIndex + d.regCount > b && (b = d.regIndex + d.regCount)
                }
                this.__registerLookup = D.toObjectVector(null, b);
                a = 0;
                for (c = this.__uniforms; a < c.length;) {
                    d = c[a];
                    ++a;
                    b = 0;
                    for (var e = d.regCount; b < e;) {
                        var f = b++;
                        this.__registerLookup.set(d.regIndex + f, d)
                    }
                }
                this.__anyDirty = this.__allDirty = !0
            };
            g["openfl.display3D.UniformMap"] = eh;
            eh.__name__ = "openfl.display3D.UniformMap";
            eh.prototype = {
                flush: function () {
                    if (this.__anyDirty) {
                        for (var a =
                            0, b = this.__uniforms; a < b.length;) {
                            var c = b[a];
                            ++a;
                            if (this.__allDirty || c.isDirty) c.flush(), c.isDirty = !1
                        }
                        this.__anyDirty = this.__allDirty = !1
                    }
                },
                markAllDirty: function () {
                    this.__anyDirty = this.__allDirty = !0
                },
                markDirty: function (a, b) {
                    if (!this.__allDirty)
                        for (b = a + b, b > this.__registerLookup.get_length() && (b = this.__registerLookup.get_length()); a < b;) {
                            var c = this.__registerLookup.get(a);
                            null != c ? (this.__anyDirty = c.isDirty = !0, a = c.regIndex + c.regCount) : ++a
                        }
                },
                __class__: eh
            };
            var Yk = function (a, b, c, d) {
                this.__context = a;
                this.__numVertices =
                    b;
                this.__vertexSize = c;
                a = this.__context.gl;
                this.__id = a.createBuffer();
                this.__stride = 4 * this.__vertexSize;
                this.__usage = 0 == Rl.fromString(d) ? a.DYNAMIC_DRAW : a.STATIC_DRAW
            };
            g["openfl.display3D.VertexBuffer3D"] = Yk;
            Yk.__name__ = "openfl.display3D.VertexBuffer3D";
            Yk.prototype = {
                dispose: function () {
                    this.__context.gl.deleteBuffer(this.__id)
                },
                uploadFromTypedArray: function (a, b) {
                    null != a && (b = this.__context.gl, this.__context.__bindGLArrayBuffer(this.__id), Gb.bufferData(b, b.ARRAY_BUFFER, a, this.__usage))
                },
                uploadFromVector: function (a,
                                            b, c) {
                    if (null != a) {
                        b *= this.__vertexSize;
                        var d = c * this.__vertexSize;
                        c = b + d;
                        var e = this.__tempFloat32Array;
                        if (null == this.__tempFloat32Array || this.__tempFloat32Array.length < d) this.__tempFloat32Array = null != d ? new Float32Array(d) : null, null != e && this.__tempFloat32Array.set(e);
                        for (d = b; d < c;) e = d++, this.__tempFloat32Array[e - b] = a.get(e);
                        this.uploadFromTypedArray(Vg.toArrayBufferView(this.__tempFloat32Array))
                    }
                },
                __class__: Yk
            };
            var rc = function () {
            };
            g["openfl.display3D._internal.AGALConverter"] = rc;
            rc.__name__ = "openfl.display3D._internal.AGALConverter";
            rc.prefixFromType = function (a, b) {
                switch (a) {
                    case 0:
                        return "va";
                    case 1:
                        return b == ee.VERTEX ? "vc" : "fc";
                    case 2:
                        return b == ee.VERTEX ? "vt" : "ft";
                    case 3:
                        return "output_";
                    case 4:
                        return "v";
                    case 5:
                        return "sampler";
                    default:
                        throw new fc("Invalid data!");
                }
            };
            rc.readUInt64 = function (a) {
                var b = a.readInt();
                a = a.readInt();
                return new Xa(a, b)
            };
            rc.convertToGLSL = function (a, b) {
                a.position = 0;
                a.__endian = 1;
                var c = a.readByte() & 255;
                if (176 == c) return a.readUTF();
                if (160 != c) throw new fc("Magic value must be 0xA0, may not be AGAL");
                var d = a.readInt();
                if (1 != d) throw new fc("Version must be 1");
                if (161 != (a.readByte() & 255)) throw new fc("Shader type ID must be 0xA1");
                c = 0 == (a.readByte() & 255) ? ee.VERTEX : ee.FRAGMENT;
                for (var e = new Fj, f = ""; ;) {
                    d = a.position;
                    if (!J.gt(Ue.get_length(a), d)) break;
                    var h = a.readInt();
                    d = a.readUnsignedInt();
                    var g = rc.readUInt64(a),
                        m = rc.readUInt64(a);
                    d = gg.parse(d, c);
                    g = wf.parse(g, c, d.mask);
                    var q = wf.parse(m, c, d.mask);
                    f += "\t";
                    switch (h) {
                        case 0:
                            f += n.string(d.toGLSL() + " = " + g.toGLSL() + "; // mov");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            break;
                        case 1:
                            f += n.string(d.toGLSL() + " = " + g.toGLSL() + " + " + q.toGLSL() + "; // add");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            e.addSR(q, Y.VECTOR_4);
                            break;
                        case 2:
                            f += n.string(d.toGLSL() + " = " + g.toGLSL() + " - " + q.toGLSL() + "; // sub");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            e.addSR(q, Y.VECTOR_4);
                            break;
                        case 3:
                            f += n.string(d.toGLSL() + " = " + g.toGLSL() + " * " + q.toGLSL() + "; // mul");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            e.addSR(q, Y.VECTOR_4);
                            break;
                        case 4:
                            f += n.string(d.toGLSL() + " = " + g.toGLSL() + " / " +
                                q.toGLSL() + "; // div");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            e.addSR(q, Y.VECTOR_4);
                            break;
                        case 5:
                            f = -1 < g.toGLSL().indexOf(".") ? f + n.string(d.toGLSL() + " = 1.0 / " + g.toGLSL() + "; // rcp") : f + n.string(d.toGLSL() + " = vec4(1) / " + g.toGLSL() + "; // rcp");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            break;
                        case 6:
                            f += n.string(d.toGLSL() + " = min(" + g.toGLSL() + ", " + q.toGLSL() + "); // min");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            e.addSR(q, Y.VECTOR_4);
                            break;
                        case 7:
                            f += n.string(d.toGLSL() + " = max(" + g.toGLSL() +
                                ", " + q.toGLSL() + "); // max");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            e.addSR(q, Y.VECTOR_4);
                            break;
                        case 8:
                            f += n.string(d.toGLSL() + " = fract(" + g.toGLSL() + "); // frc");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            break;
                        case 9:
                            f += n.string(d.toGLSL() + " = sqrt(" + g.toGLSL() + "); // sqrt");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            break;
                        case 10:
                            f += n.string(d.toGLSL() + " = inversesqrt(" + g.toGLSL() + "); // rsq");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            break;
                        case 11:
                            f += n.string(d.toGLSL() + " = pow(" + g.toGLSL() +
                                ", " + q.toGLSL() + "); // pow");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            e.addSR(q, Y.VECTOR_4);
                            break;
                        case 12:
                            f += n.string(d.toGLSL() + " = log2(" + g.toGLSL() + "); // log");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            break;
                        case 13:
                            f += n.string(d.toGLSL() + " = exp2(" + g.toGLSL() + "); // exp");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            break;
                        case 14:
                            f += n.string(d.toGLSL() + " = normalize(" + g.toGLSL() + "); // normalize");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            break;
                        case 15:
                            f += n.string(d.toGLSL() + " = sin(" +
                                g.toGLSL() + "); // sin");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            break;
                        case 16:
                            f += n.string(d.toGLSL() + " = cos(" + g.toGLSL() + "); // cos");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            break;
                        case 17:
                            g.sourceMask = q.sourceMask = 7;
                            f += n.string(d.toGLSL() + " = cross(vec3(" + g.toGLSL() + "), vec3(" + q.toGLSL() + ")); // crs");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            e.addSR(q, Y.VECTOR_4);
                            break;
                        case 18:
                            g.sourceMask = q.sourceMask = 7;
                            f += n.string(d.toGLSL() + " = vec4(dot(vec3(" + g.toGLSL() + "), vec3(" + q.toGLSL() + ")))" +
                                d.getWriteMask() + "; // dp3");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            e.addSR(q, Y.VECTOR_4);
                            break;
                        case 19:
                            g.sourceMask = q.sourceMask = 15;
                            f += n.string(d.toGLSL() + " = vec4(dot(vec4(" + g.toGLSL() + "), vec4(" + q.toGLSL() + ")))" + d.getWriteMask() + "; // dp4");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            e.addSR(q, Y.VECTOR_4);
                            break;
                        case 20:
                            f += n.string(d.toGLSL() + " = abs(" + g.toGLSL() + "); // abs");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            break;
                        case 21:
                            f += n.string(d.toGLSL() + " = -" + g.toGLSL() + "; // neg");
                            e.addDR(d,
                                Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            break;
                        case 22:
                            f += n.string(d.toGLSL() + " = clamp(" + g.toGLSL() + ", 0.0, 1.0); // saturate");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            break;
                        case 23:
                            h = e.getRegisterUsage(q);
                            h != Y.VECTOR_4 && h != Y.VECTOR_4_ARRAY ? (f += n.string(d.toGLSL() + " = " + g.toGLSL() + " * mat3(" + q.toGLSL(!1) + "); // m33"), e.addDR(d, Y.VECTOR_4), e.addSR(g, Y.VECTOR_4), e.addSR(q, Y.MATRIX_4_4)) : (g.sourceMask = q.sourceMask = 7, f += n.string(d.toGLSL() + " = vec3(dot(" + g.toGLSL(!0) + "," + q.toGLSL(!0, 0) + "), dot(" + g.toGLSL(!0) +
                                "," + q.toGLSL(!0, 1) + "),dot(" + g.toGLSL(!0) + "," + q.toGLSL(!0, 2) + ")); // m33"), e.addDR(d, Y.VECTOR_4), e.addSR(g, Y.VECTOR_4), e.addSR(q, Y.VECTOR_4, 0), e.addSR(q, Y.VECTOR_4, 1), e.addSR(q, Y.VECTOR_4, 2));
                            break;
                        case 24:
                            h = e.getRegisterUsage(q);
                            h != Y.VECTOR_4 && h != Y.VECTOR_4_ARRAY ? (f += n.string(d.toGLSL() + " = " + g.toGLSL() + " * " + q.toGLSL(!1) + "; // m44"), e.addDR(d, Y.VECTOR_4), e.addSR(g, Y.VECTOR_4), e.addSR(q, Y.MATRIX_4_4)) : (g.sourceMask = q.sourceMask = 15, f += n.string(d.toGLSL() + " = vec4(dot(" + g.toGLSL(!0) + "," + q.toGLSL(!0,
                                0) + "), dot(" + g.toGLSL(!0) + "," + q.toGLSL(!0, 1) + "), dot(" + g.toGLSL(!0) + "," + q.toGLSL(!0, 2) + "), dot(" + g.toGLSL(!0) + "," + q.toGLSL(!0, 3) + ")); // m44"), e.addDR(d, Y.VECTOR_4), e.addSR(g, Y.VECTOR_4), e.addSR(q, Y.VECTOR_4, 0), e.addSR(q, Y.VECTOR_4, 1), e.addSR(q, Y.VECTOR_4, 2), e.addSR(q, Y.VECTOR_4, 3));
                            break;
                        case 25:
                            d.mask &= 7;
                            h = e.getRegisterUsage(q);
                            h != Y.VECTOR_4 && h != Y.VECTOR_4_ARRAY ? (f += n.string(d.toGLSL() + " = " + g.toGLSL() + " * " + q.toGLSL(!1) + "; // m34"), e.addDR(d, Y.VECTOR_4), e.addSR(g, Y.VECTOR_4), e.addSR(q, Y.MATRIX_4_4)) :
                                (g.sourceMask = q.sourceMask = 15, f += n.string(d.toGLSL() + " = vec3(dot(" + g.toGLSL(!0) + "," + q.toGLSL(!0, 0) + "), dot(" + g.toGLSL(!0) + "," + q.toGLSL(!0, 1) + "),dot(" + g.toGLSL(!0) + "," + q.toGLSL(!0, 2) + ")); // m34"), e.addDR(d, Y.VECTOR_4), e.addSR(g, Y.VECTOR_4), e.addSR(q, Y.VECTOR_4, 0), e.addSR(q, Y.VECTOR_4, 1), e.addSR(q, Y.VECTOR_4, 2));
                            break;
                        case 39:
                            g.sourceMask = 15;
                            f += n.string("if (any(lessThan(" + g.toGLSL() + ", vec4(0)))) discard;");
                            e.addSR(g, Y.VECTOR_4);
                            break;
                        case 40:
                            q = hg.parse(m, c);
                            switch (q.d) {
                                case 0:
                                    2 == q.t ? (g.sourceMask =
                                        3, e.addSaR(q, Y.SAMPLER_2D_ALPHA), f += n.string("if (" + q.toGLSL() + "_alphaEnabled) {\n"), f += n.string("\t\t" + d.toGLSL() + " = vec4(texture2D(" + q.toGLSL() + ", " + g.toGLSL() + ").xyz, texture2D(" + q.toGLSL() + "_alpha, " + g.toGLSL() + ").x); // tex + alpha\n"), f += "\t} else {\n", f += n.string("\t\t" + d.toGLSL() + " = texture2D(" + q.toGLSL() + ", " + g.toGLSL() + "); // tex\n"), f += "\t}") : (g.sourceMask = 3, e.addSaR(q, Y.SAMPLER_2D), f += n.string(d.toGLSL() + " = texture2D(" + q.toGLSL() + ", " + g.toGLSL() + "); // tex"));
                                    break;
                                case 1:
                                    2 == q.t ? (g.sourceMask =
                                        7, e.addSaR(q, Y.SAMPLER_CUBE_ALPHA), f += n.string("if (" + q.toGLSL() + "_alphaEnabled) {\n"), f += n.string("\t\t" + d.toGLSL() + " = vec4(textureCube(" + q.toGLSL() + ", " + g.toGLSL() + ").xyz, textureCube(" + q.toGLSL() + "_alpha, " + g.toGLSL() + ").x); // tex + alpha\n"), f += "\t} else {\n", f += n.string("\t\t" + d.toGLSL() + " = textureCube(" + q.toGLSL() + ", " + g.toGLSL() + "); // tex"), f += "\t}") : (g.sourceMask = 7, f += n.string(d.toGLSL() + " = textureCube(" + q.toGLSL() + ", " + g.toGLSL() + "); // tex"), e.addSaR(q, Y.SAMPLER_CUBE))
                            }
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            null != b && (b[q.n] = q.toSamplerState());
                            break;
                        case 41:
                            g.sourceMask = q.sourceMask = 15;
                            f += n.string(d.toGLSL() + " = vec4(greaterThanEqual(" + g.toGLSL() + ", " + q.toGLSL() + "))" + d.getWriteMask() + "; // ste");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            e.addSR(q, Y.VECTOR_4);
                            break;
                        case 42:
                            g.sourceMask = q.sourceMask = 15;
                            f += n.string(d.toGLSL() + " = vec4(lessThan(" + g.toGLSL() + ", " + q.toGLSL() + "))" + d.getWriteMask() + "; // slt");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            e.addSR(q, Y.VECTOR_4);
                            break;
                        case 44:
                            g.sourceMask =
                                q.sourceMask = 15;
                            f += n.string(d.toGLSL() + " = vec4(equal(" + g.toGLSL() + ", " + q.toGLSL() + "))" + d.getWriteMask() + "; // seq");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            e.addSR(q, Y.VECTOR_4);
                            break;
                        case 45:
                            g.sourceMask = q.sourceMask = 15;
                            f += n.string(d.toGLSL() + " = vec4(notEqual(" + g.toGLSL() + ", " + q.toGLSL() + "))" + d.getWriteMask() + "; // sne");
                            e.addDR(d, Y.VECTOR_4);
                            e.addSR(g, Y.VECTOR_4);
                            e.addSR(q, Y.VECTOR_4);
                            break;
                        default:
                            throw new fc("Opcode " + h);
                    }
                    f += "\n"
                }
                null == rc.limitedProfile && (d = te.context.getParameter(7938),
                    rc.limitedProfile = -1 < d.indexOf("OpenGL ES") || -1 < d.indexOf("WebGL"));
                a = "" + n.string("// AGAL " + (c == ee.VERTEX ? "vertex" : "fragment") + " shader\n");
                a = rc.limitedProfile ? a + "#version 100\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n" : a + "#version 120\n";
                a += n.string(e.toGLSL(!1));
                c == ee.VERTEX && (a += "uniform vec4 vcPositionScale;\n");
                a = a + "void main() {\n" + n.string(e.toGLSL(!0));
                a += n.string(f);
                c == ee.VERTEX && (a += "\tgl_Position *= vcPositionScale;\n");
                return a +
                    "}\n"
            };
            var gg = function () {
            };
            g["openfl.display3D._internal._AGALConverter.DestRegister"] = gg;
            gg.__name__ = "openfl.display3D._internal._AGALConverter.DestRegister";
            gg.parse = function (a, b) {
                var c = new gg;
                c.programType = b;
                c.type = a >>> 24 & 15;
                c.mask = a >>> 16 & 15;
                c.n = a & 65535;
                return c
            };
            gg.prototype = {
                getWriteMask: function () {
                    var a = ".";
                    0 != (this.mask & 1) && (a += "x");
                    0 != (this.mask & 2) && (a += "y");
                    0 != (this.mask & 4) && (a += "z");
                    0 != (this.mask & 8) && (a += "w");
                    return a
                },
                toGLSL: function (a) {
                    null == a && (a = !0);
                    var b = 3 == this.type ? this.programType ==
                    ee.VERTEX ? "gl_Position" : "gl_FragColor" : rc.prefixFromType(this.type, this.programType) + this.n;
                    a && 15 != this.mask && (b += this.getWriteMask());
                    return b
                },
                __class__: gg
            };
            var ee = v["openfl.display3D._internal._AGALConverter.ProgramType"] = {
                __ename__: "openfl.display3D._internal._AGALConverter.ProgramType",
                __constructs__: null,
                VERTEX: {
                    _hx_name: "VERTEX",
                    _hx_index: 0,
                    __enum__: "openfl.display3D._internal._AGALConverter.ProgramType",
                    toString: q
                },
                FRAGMENT: {
                    _hx_name: "FRAGMENT",
                    _hx_index: 1,
                    __enum__: "openfl.display3D._internal._AGALConverter.ProgramType",
                    toString: q
                }
            };
            ee.__constructs__ = [ee.VERTEX, ee.FRAGMENT];
            var Fj = function () {
                this.mEntries = []
            };
            g["openfl.display3D._internal.RegisterMap"] = Fj;
            Fj.__name__ = "openfl.display3D._internal.RegisterMap";
            Fj.prototype = {
                add: function (a, b, c, d) {
                    for (var e = 0, f = this.mEntries; e < f.length;) {
                        var h = f[e];
                        ++e;
                        if (h.type == a && h.name == b && h.number == c) {
                            if (h.usage != d) throw new fc("Cannot use register in multiple ways yet (mat4/vec4)");
                            return
                        }
                    }
                    h = new Zk;
                    h.type = a;
                    h.name = b;
                    h.number = c;
                    h.usage = d;
                    this.mEntries.push(h)
                },
                addDR: function (a, b) {
                    this.add(a.type,
                        a.toGLSL(!1), a.n, b)
                },
                addSaR: function (a, b) {
                    this.add(a.type, a.toGLSL(), a.n, b)
                },
                addSR: function (a, b, c) {
                    null == c && (c = 0);
                    0 != a.d ? (this.add(a.itype, rc.prefixFromType(a.itype, a.programType) + a.n, a.n, Y.VECTOR_4), this.add(a.type, rc.prefixFromType(a.type, a.programType) + a.o, a.o, Y.VECTOR_4_ARRAY)) : this.add(a.type, a.toGLSL(!1, c), a.n + c, b)
                },
                getRegisterUsage: function (a) {
                    return 0 != a.d ? Y.VECTOR_4_ARRAY : this.getUsage(a.type, a.toGLSL(!1), a.n)
                },
                getUsage: function (a, b, c) {
                    for (var d = 0, e = this.mEntries; d < e.length;) {
                        var f = e[d];
                        ++d;
                        if (f.type == a && f.name == b && f.number == c) return f.usage
                    }
                    return Y.UNUSED
                },
                toGLSL: function (a) {
                    this.mEntries.sort(function (a, b) {
                        return a.number - b.number
                    });
                    this.mEntries.sort(function (a, b) {
                        return T.__cast(a.type, Nl) - T.__cast(b.type, Nl)
                    });
                    for (var b = "", c = 0, d = this.mEntries.length; c < d;) {
                        var e = c++;
                        e = this.mEntries[e];
                        if (!(a && 2 != e.type || !a && 2 == e.type) && 3 != e.type) {
                            switch (e.type) {
                                case 0:
                                    b += "attribute ";
                                    break;
                                case 1:
                                    b += "uniform ";
                                    break;
                                case 2:
                                    b += "\t";
                                    break;
                                case 3:
                                    break;
                                case 4:
                                    b += "varying ";
                                    break;
                                case 5:
                                    b += "uniform ";
                                    break;
                                default:
                                    throw new fc;
                            }
                            switch (e.usage._hx_index) {
                                case 0:
                                    ua.info("Missing switch patten: RegisterUsage.UNUSED", {

                                        className: "openfl.display3D._internal.RegisterMap",
                                        methodName: "toGLSL"
                                    });
                                    break;
                                case 1:
                                    b += "vec4 ";
                                    break;
                                case 2:
                                    b += "mat4 ";
                                    break;
                                case 3:
                                    b += "sampler2D ";
                                    break;
                                case 5:
                                    b += "samplerCube ";
                                    break;
                                case 7:
                                    b += "vec4 "
                            }
                            e.usage == Y.SAMPLER_2D_ALPHA ? (b += "sampler2D ", b += n.string(e.name), b += ";\n", b += "uniform ", b += "sampler2D ", b += n.string(e.name +
                                "_alpha"), b += ";\n", b += "uniform ", b += "bool ", b += n.string(e.name + "_alphaEnabled")) : e.usage == Y.SAMPLER_CUBE_ALPHA ? (b += "samplerCube ", b += n.string(e.name), b += ";\n", b += "uniform ", b += "samplerCube ", b += n.string(e.name + "_alpha"), b += ";\n", b += "uniform ", b += "bool ", b += n.string(e.name + "_alphaEnabled")) : b = e.usage == Y.VECTOR_4_ARRAY ? b + n.string(e.name + "[128]") : b + n.string(e.name);
                            b += ";\n"
                        }
                    }
                    return b
                },
                __class__: Fj
            };
            var Zk = function () {
            };
            g["openfl.display3D._internal._AGALConverter.RegisterMapEntry"] = Zk;
            Zk.__name__ = "openfl.display3D._internal._AGALConverter.RegisterMapEntry";
            Zk.prototype = {
                __class__: Zk
            };
            var Y = v["openfl.display3D._internal._AGALConverter.RegisterUsage"] = {
                __ename__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                __constructs__: null,
                UNUSED: {
                    _hx_name: "UNUSED",
                    _hx_index: 0,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: q
                },
                VECTOR_4: {
                    _hx_name: "VECTOR_4",
                    _hx_index: 1,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: q
                },
                MATRIX_4_4: {
                    _hx_name: "MATRIX_4_4",
                    _hx_index: 2,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: q
                },
                SAMPLER_2D: {
                    _hx_name: "SAMPLER_2D",
                    _hx_index: 3,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: q
                },
                SAMPLER_2D_ALPHA: {
                    _hx_name: "SAMPLER_2D_ALPHA",
                    _hx_index: 4,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: q
                },
                SAMPLER_CUBE: {
                    _hx_name: "SAMPLER_CUBE",
                    _hx_index: 5,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: q
                },
                SAMPLER_CUBE_ALPHA: {
                    _hx_name: "SAMPLER_CUBE_ALPHA",
                    _hx_index: 6,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: q
                },
                VECTOR_4_ARRAY: {
                    _hx_name: "VECTOR_4_ARRAY",
                    _hx_index: 7,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: q
                }
            };
            Y.__constructs__ = [Y.UNUSED, Y.VECTOR_4, Y.MATRIX_4_4, Y.SAMPLER_2D, Y.SAMPLER_2D_ALPHA, Y.SAMPLER_CUBE, Y.SAMPLER_CUBE_ALPHA, Y.VECTOR_4_ARRAY];
            var hg = function () {
            };
            g["openfl.display3D._internal._AGALConverter.SamplerRegister"] = hg;
            hg.__name__ = "openfl.display3D._internal._AGALConverter.SamplerRegister";
            hg.parse = function (a, b) {
                var c = new hg;
                c.programType = b;
                b = 60;
                b = 0 ==
                b ? new Xa(a.high, a.low) : 32 > b ? new Xa(a.high >> b, a.high << 32 - b | a.low >>> b) : new Xa(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                c.f = b;
                b = 56;
                b = 0 == b ? new Xa(a.high, a.low) : 32 > b ? new Xa(a.high >> b, a.high << 32 - b | a.low >>> b) : new Xa(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                c.m = b;
                b = 52;
                b = 0 == b ? new Xa(a.high, a.low) : 32 > b ? new Xa(a.high >> b, a.high << 32 - b | a.low >>> b) : new Xa(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                c.w = b;
                b = 48;
                b = 0 == b ? new Xa(a.high, a.low) : 32 > b ? new Xa(a.high >> b, a.high << 32 - b | a.low >>> b) : new Xa(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                c.s = b;
                b = 44;
                b = 0 == b ? new Xa(a.high, a.low) : 32 > b ? new Xa(a.high >> b, a.high << 32 - b | a.low >>> b) : new Xa(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                c.d = b;
                b = 40;
                b = 0 == b ? new Xa(a.high, a.low) : 32 > b ? new Xa(a.high >> b, a.high << 32 - b | a.low >>> b) : new Xa(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                c.t = b;
                b = 32;
                b = 0 == b ? new Xa(a.high, a.low) : 32 > b ? new Xa(a.high >> b, a.high << 32 - b | a.low >>> b) : new Xa(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                c.type = b;
                b = 16;
                b = 0 == b ? new Xa(a.high, a.low) : 32 > b ? new Xa(a.high >> b, a.high << 32 - b | a.low >>> b) : new Xa(a.high >> 31, a.high >> b - 32);
                b = b.low &
                    255;
                c.b = b;
                b = a.low & 65535;
                c.n = b;
                return c
            };
            hg.prototype = {
                toGLSL: function () {
                    return rc.prefixFromType(this.type, this.programType) + this.n
                },
                toSamplerState: function () {
                    switch (this.f) {
                        case 0:
                            var a = 5;
                            break;
                        case 1:
                            a = 4;
                            break;
                        default:
                            throw new fc;
                    }
                    switch (this.m) {
                        case 0:
                            var b = 2;
                            break;
                        case 1:
                            b = 1;
                            break;
                        case 2:
                            b = 0;
                            break;
                        default:
                            throw new fc;
                    }
                    switch (this.w) {
                        case 0:
                            var c = 0;
                            break;
                        case 1:
                            c = 2;
                            break;
                        default:
                            throw new fc;
                    }
                    return new vf(c, a, b, (this.b << 24 >> 24) / 8, 4 == (this.s & 4), 1 == (this.s & 1), 2 == this.t)
                },
                __class__: hg
            };
            var wf =
                function () {
                };
            g["openfl.display3D._internal._AGALConverter.SourceRegister"] = wf;
            wf.__name__ = "openfl.display3D._internal._AGALConverter.SourceRegister";
            wf.parse = function (a, b, c) {
                var d = new wf;
                d.programType = b;
                b = 63;
                b = 0 == b ? new Xa(a.high, a.low) : 32 > b ? new Xa(a.high >> b, a.high << 32 - b | a.low >>> b) : new Xa(a.high >> 31, a.high >> b - 32);
                b = b.low & 1;
                d.d = b;
                b = 48;
                b = 0 == b ? new Xa(a.high, a.low) : 32 > b ? new Xa(a.high >> b, a.high << 32 - b | a.low >>> b) : new Xa(a.high >> 31, a.high >> b - 32);
                b = b.low & 3;
                d.q = b;
                b = 40;
                b = 0 == b ? new Xa(a.high, a.low) : 32 > b ? new Xa(a.high >>
                    b, a.high << 32 - b | a.low >>> b) : new Xa(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                d.itype = b;
                b = 32;
                b = 0 == b ? new Xa(a.high, a.low) : 32 > b ? new Xa(a.high >> b, a.high << 32 - b | a.low >>> b) : new Xa(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                d.type = b;
                b = 24;
                b = 0 == b ? new Xa(a.high, a.low) : 32 > b ? new Xa(a.high >> b, a.high << 32 - b | a.low >>> b) : new Xa(a.high >> 31, a.high >> b - 32);
                b = b.low & 255;
                d.s = b;
                b = 16;
                b = 0 == b ? new Xa(a.high, a.low) : 32 > b ? new Xa(a.high >> b, a.high << 32 - b | a.low >>> b) : new Xa(a.high >> 31, a.high >> b - 32);
                b = b.low & 255;
                d.o = b;
                b = a.low & 65535;
                d.n = b;
                d.sourceMask =
                    c;
                return d
            };
            wf.prototype = {
                toGLSL: function (a, b) {
                    null == b && (b = 0);
                    null == a && (a = !0);
                    if (3 == this.type) return this.programType == ee.VERTEX ? "gl_Position" : "gl_FragColor";
                    var c = 228 == this.s && 15 == this.sourceMask,
                        d = "";
                    if (5 != this.type && !c) {
                        if (0 != (this.sourceMask & 1)) switch (this.s & 3) {
                            case 0:
                                d += "x";
                                break;
                            case 1:
                                d += "y";
                                break;
                            case 2:
                                d += "z";
                                break;
                            case 3:
                                d += "w"
                        }
                        if (0 != (this.sourceMask & 2)) switch (this.s >> 2 & 3) {
                            case 0:
                                d += "x";
                                break;
                            case 1:
                                d += "y";
                                break;
                            case 2:
                                d += "z";
                                break;
                            case 3:
                                d += "w"
                        }
                        if (0 != (this.sourceMask & 4)) switch (this.s >>
                        4 & 3) {
                            case 0:
                                d += "x";
                                break;
                            case 1:
                                d += "y";
                                break;
                            case 2:
                                d += "z";
                                break;
                            case 3:
                                d += "w"
                        }
                        if (0 != (this.sourceMask & 8)) switch (this.s >> 6 & 3) {
                            case 0:
                                d += "x";
                                break;
                            case 1:
                                d += "y";
                                break;
                            case 2:
                                d += "z";
                                break;
                            case 3:
                                d += "w"
                        }
                    }
                    c = rc.prefixFromType(this.type, this.programType);
                    if (0 == this.d) c += this.n + b;
                    else {
                        c += this.o;
                        var e = "";
                        switch (this.q) {
                            case 0:
                                e = "x";
                                break;
                            case 1:
                                e = "y";
                                break;
                            case 2:
                                e = "z";
                                break;
                            case 3:
                                e = "w"
                        }
                        e = rc.prefixFromType(this.itype, this.programType) + this.n + "." + e;
                        c += "[ int(" + e + ") +" + b + "]"
                    }
                    a && "" != d && (c += "." + d);
                    return c
                },
                __class__: wf
            };
            var ch = function () {
                this.backBufferEnableDepthAndStencil = !1;
                this.blendDestinationAlphaFactor = 9;
                this.blendSourceAlphaFactor = 2;
                this.blendDestinationRGBFactor = 9;
                this.blendSourceRGBFactor = 2;
                this.colorMaskAlpha = this.colorMaskBlue = this.colorMaskGreen = this.colorMaskRed = !0;
                this.culling = 3;
                this.depthCompareMode = 4;
                this.depthMask = !0;
                this.samplerStates = [];
                this.scissorRectangle = new ha;
                this.stencilCompareMode = 0;
                this.stencilPass = this.stencilFail = this.stencilDepthFail = 5;
                this.stencilReadMask = 255;
                this.stencilReferenceValue =
                    0;
                this.stencilTriangleFace = 2;
                this.stencilWriteMask = 255;
                this.textures = [];
                this.__frontFaceGLCCW = !0;
                this.__glBlendEquation = 32774
            };
            g["openfl.display3D._internal.Context3DState"] = ch;
            ch.__name__ = "openfl.display3D._internal.Context3DState";
            ch.prototype = {
                __class__: ch
            };
            var Ua = function (a) {
                O.call(this);
                this.__context = a;
                var b = this.__context.gl;
                this.__textureID = b.createTexture();
                this.__textureContext = this.__context.__context;
                if (null == Ua.__supportsBGRA) {
                    Ua.__textureInternalFormat = b.RGBA;
                    Ua.__supportsBGRA = !1;
                    Ua.__textureFormat =
                        b.RGBA;
                    Ua.__compressedFormats = new Db;
                    Ua.__compressedFormatsAlpha = new Db;
                    a = b.getExtension("WEBGL_compressed_texture_s3tc");
                    var c = b.getExtension("WEBGL_compressed_texture_etc1");
                    b = b.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                    if (null != a) {
                        var d = a.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                        Ua.__compressedFormats.h[0] = d;
                        d = a.COMPRESSED_RGBA_S3TC_DXT5_EXT;
                        Ua.__compressedFormatsAlpha.h[0] = d
                    }
                    null != c && (d = c.COMPRESSED_RGB_ETC1_WEBGL, Ua.__compressedFormats.h[2] = d, d = c.COMPRESSED_RGB_ETC1_WEBGL, Ua.__compressedFormatsAlpha.h[2] =
                        d);
                    null != b && (d = b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG, Ua.__compressedFormats.h[1] = d, d = b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG, Ua.__compressedFormatsAlpha.h[1] = d)
                }
                this.__internalFormat = Ua.__textureInternalFormat;
                this.__format = Ua.__textureFormat
            };
            g["openfl.display3D.textures.TextureBase"] = Ua;
            Ua.__name__ = "openfl.display3D.textures.TextureBase";
            Ua.__super__ = O;
            Ua.prototype = l(O.prototype, {
                dispose: function () {
                    var a = this.__context.gl;
                    null != this.__alphaTexture && (this.__alphaTexture.dispose(), this.__alphaTexture = null);
                    null != this.__textureID && (a.deleteTexture(this.__textureID), this.__textureID = null);
                    null != this.__glFramebuffer && (a.deleteFramebuffer(this.__glFramebuffer), this.__glFramebuffer = null);
                    null != this.__glDepthRenderbuffer && (a.deleteRenderbuffer(this.__glDepthRenderbuffer), this.__glDepthRenderbuffer = null);
                    null != this.__glStencilRenderbuffer && (a.deleteRenderbuffer(this.__glStencilRenderbuffer), this.__glStencilRenderbuffer = null)
                },
                __getGLFramebuffer: function (a, b, c) {
                    b = this.__context.gl;
                    null == this.__glFramebuffer &&
                    (this.__glFramebuffer = b.createFramebuffer(), this.__context.__bindGLFramebuffer(this.__glFramebuffer), b.framebufferTexture2D(b.FRAMEBUFFER, b.COLOR_ATTACHMENT0, b.TEXTURE_2D, this.__textureID, 0), this.__context.__enableErrorChecking && (c = b.checkFramebufferStatus(b.FRAMEBUFFER), c != b.FRAMEBUFFER_COMPLETE && ua.warn("Error: Context3D.setRenderToTexture status:" + c + " width:" + this.__width + " height:" + this.__height, {

                        className: "openfl.display3D.textures.TextureBase",
                        methodName: "__getGLFramebuffer"
                    })));
                    a && null == this.__glDepthRenderbuffer && (this.__context.__bindGLFramebuffer(this.__glFramebuffer), 0 != Sa.__glDepthStencil ? (this.__glStencilRenderbuffer = this.__glDepthRenderbuffer = b.createRenderbuffer(), b.bindRenderbuffer(b.RENDERBUFFER, this.__glDepthRenderbuffer), b.renderbufferStorage(b.RENDERBUFFER, Sa.__glDepthStencil, this.__width, this.__height), b.framebufferRenderbuffer(b.FRAMEBUFFER, b.DEPTH_STENCIL_ATTACHMENT, b.RENDERBUFFER, this.__glDepthRenderbuffer)) : (this.__glDepthRenderbuffer =
                        b.createRenderbuffer(), this.__glStencilRenderbuffer = b.createRenderbuffer(), b.bindRenderbuffer(b.RENDERBUFFER, this.__glDepthRenderbuffer), b.renderbufferStorage(b.RENDERBUFFER, b.DEPTH_COMPONENT16, this.__width, this.__height), b.bindRenderbuffer(b.RENDERBUFFER, this.__glStencilRenderbuffer), b.renderbufferStorage(b.RENDERBUFFER, b.STENCIL_INDEX8, this.__width, this.__height), b.framebufferRenderbuffer(b.FRAMEBUFFER, b.DEPTH_ATTACHMENT, b.RENDERBUFFER, this.__glDepthRenderbuffer), b.framebufferRenderbuffer(b.FRAMEBUFFER,
                        b.STENCIL_ATTACHMENT, b.RENDERBUFFER, this.__glStencilRenderbuffer)), this.__context.__enableErrorChecking && (c = b.checkFramebufferStatus(b.FRAMEBUFFER), c != b.FRAMEBUFFER_COMPLETE && ua.warn("Error: Context3D.setRenderToTexture status:" + c + " width:" + this.__width + " height:" + this.__height, {

                        className: "openfl.display3D.textures.TextureBase",
                        methodName: "__getGLFramebuffer"
                    })), b.bindRenderbuffer(b.RENDERBUFFER, null));
                    return this.__glFramebuffer
                },
                __getImage: function (a) {
                    var b = a.image;
                    if (!a.__isValid || null == b) return null;
                    Ba.sync(b, !1);
                    a = this.__context.gl;
                    b.type == qc.DATA || b.get_premultiplied() ? !b.get_premultiplied() && b.get_transparent() && (a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0), b = b.clone(), b.set_premultiplied(!0)) : a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);
                    0 != b.get_format() && (b = b.clone(), b.set_format(0), b.buffer.premultiplied = !0);
                    return b
                },
                __getTexture: function () {
                    return this.__textureID
                },
                __setSamplerState: function (a) {
                    if (!a.equals(this.__samplerState)) {
                        var b =
                            this.__context.gl;
                        this.__textureTarget == this.__context.gl.TEXTURE_CUBE_MAP ? this.__context.__bindGLTextureCubeMap(this.__textureID) : this.__context.__bindGLTexture2D(this.__textureID);
                        var c;
                        switch (a.wrap) {
                            case 0:
                                var d = c = b.CLAMP_TO_EDGE;
                                break;
                            case 1:
                                c = b.CLAMP_TO_EDGE;
                                d = b.REPEAT;
                                break;
                            case 2:
                                d = c = b.REPEAT;
                                break;
                            case 3:
                                c = b.REPEAT;
                                d = b.CLAMP_TO_EDGE;
                                break;
                            default:
                                throw new Fa("wrap bad enum");
                        }
                        var e = 5 == a.filter ? b.NEAREST : b.LINEAR;
                        switch (a.mipfilter) {
                            case 0:
                                var f = 5 == a.filter ? b.NEAREST_MIPMAP_LINEAR : b.LINEAR_MIPMAP_LINEAR;
                                break;
                            case 1:
                                f = 5 == a.filter ? b.NEAREST_MIPMAP_NEAREST : b.LINEAR_MIPMAP_NEAREST;
                                break;
                            case 2:
                                f = 5 == a.filter ? b.NEAREST : b.LINEAR;
                                break;
                            default:
                                throw new Fa("mipfiter bad enum");
                        }
                        b.texParameteri(this.__textureTarget, b.TEXTURE_MIN_FILTER, f);
                        b.texParameteri(this.__textureTarget, b.TEXTURE_MAG_FILTER, e);
                        b.texParameteri(this.__textureTarget, b.TEXTURE_WRAP_S, c);
                        b.texParameteri(this.__textureTarget, b.TEXTURE_WRAP_T, d);
                        null == this.__samplerState && (this.__samplerState = a.clone());
                        this.__samplerState.copyFrom(a);
                        return !0
                    }
                    return !1
                },
                __uploadFromImage: function (a) {
                    var b = this.__context.gl,
                        c;
                    if (this.__textureTarget == b.TEXTURE_2D) {
                        if (1 == a.buffer.bitsPerPixel) var d = c = b.ALPHA;
                        else c = Ua.__textureInternalFormat, d = Ua.__textureFormat;
                        this.__context.__bindGLTexture2D(this.__textureID);
                        a.type == qc.DATA || a.get_premultiplied() ? !a.get_premultiplied() && a.get_transparent() && b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1) : b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);
                        a.type == qc.DATA ? Gb.texImage2D(b, b.TEXTURE_2D, 0, c, a.buffer.width, a.buffer.height,
                            0, d, b.UNSIGNED_BYTE, a.get_data()) : Gb.texImage2D(b, b.TEXTURE_2D, 0, c, d, b.UNSIGNED_BYTE, a.get_src());
                        this.__context.__bindGLTexture2D(null)
                    }
                },
                __class__: Ua
            });
            var Hf = function (a, b, c, d, e) {
                Ua.call(this, a);
                this.__width = this.__height = this.__size = b;
                this.__optimizeForRenderToTexture = d;
                this.__streamingLevels = e;
                this.__textureTarget = this.__context.gl.TEXTURE_CUBE_MAP;
                this.__uploadedSides = 0
            };
            g["openfl.display3D.textures.CubeTexture"] = Hf;
            Hf.__name__ = "openfl.display3D.textures.CubeTexture";
            Hf.__super__ = Ua;
            Hf.prototype =
                l(Ua.prototype, {
                    uploadFromBitmapData: function (a, b, c, d) {
                        null == c && (c = 0);
                        if (null != a && (d = this.__size >> c, 0 != d && (a = this.__getImage(a), null != a)))
                            if (0 == c && null != a.buffer && null == a.buffer.data && null != a.buffer.get_src()) {
                                var e = this.__context.gl;
                                d = this.__size >> c;
                                0 != d && (d = this.__sideToTarget(b), this.__context.__bindGLTextureCubeMap(this.__textureID), Gb.texImage2D(e, d, c, this.__internalFormat, this.__format, e.UNSIGNED_BYTE, a.buffer.get_src()), this.__context.__bindGLTextureCubeMap(null), this.__uploadedSides |= 1 << b)
                            } else this.uploadFromTypedArray(a.get_data(),
                                b, c)
                    },
                    uploadFromTypedArray: function (a, b, c) {
                        null == c && (c = 0);
                        if (null != a) {
                            var d = this.__context.gl,
                                e = this.__size >> c;
                            if (0 != e) {
                                var f = this.__sideToTarget(b);
                                this.__context.__bindGLTextureCubeMap(this.__textureID);
                                Gb.texImage2D(d, f, c, this.__internalFormat, e, e, 0, this.__format, d.UNSIGNED_BYTE, a);
                                this.__context.__bindGLTextureCubeMap(null);
                                this.__uploadedSides |= 1 << b
                            }
                        }
                    },
                    __getGLFramebuffer: function (a, b, c) {
                        var d = this.__context.gl;
                        null == this.__glFramebuffer && (this.__glFramebuffer = d.createFramebuffer(), this.__framebufferSurface = -1);
                        if (this.__framebufferSurface != c && (this.__framebufferSurface = c, this.__context.__bindGLFramebuffer(this.__glFramebuffer), d.framebufferTexture2D(d.FRAMEBUFFER, d.COLOR_ATTACHMENT0, d.TEXTURE_CUBE_MAP_POSITIVE_X + c, this.__textureID, 0), this.__context.__enableErrorChecking)) {
                            var e = d.checkFramebufferStatus(d.FRAMEBUFFER);
                            e != d.FRAMEBUFFER_COMPLETE && ua.error("Error: Context3D.setRenderToTexture status:" + e + " width:" + this.__width + " height:" + this.__height, {

                                className: "openfl.display3D.textures.CubeTexture",
                                methodName: "__getGLFramebuffer"
                            })
                        }
                        return Ua.prototype.__getGLFramebuffer.call(this, a, b, c)
                    },
                    __setSamplerState: function (a) {
                        if (Ua.prototype.__setSamplerState.call(this, a)) {
                            var b = this.__context.gl;
                            2 == a.mipfilter || this.__samplerState.mipmapGenerated || (b.generateMipmap(b.TEXTURE_CUBE_MAP), this.__samplerState.mipmapGenerated = !0);
                            if (0 != Sa.__glMaxTextureMaxAnisotropy) {
                                switch (a.filter) {
                                    case 0:
                                        a = 16;
                                        break;
                                    case 1:
                                        a = 2;
                                        break;
                                    case 2:
                                        a = 4;
                                        break;
                                    case 3:
                                        a =
                                            8;
                                        break;
                                    default:
                                        a = 1
                                }
                                a > Sa.__glMaxTextureMaxAnisotropy && (a = Sa.__glMaxTextureMaxAnisotropy);
                                b.texParameterf(b.TEXTURE_CUBE_MAP, Sa.__glTextureMaxAnisotropy, a)
                            }
                            return !0
                        }
                        return !1
                    },
                    __sideToTarget: function (a) {
                        var b = this.__context.gl;
                        switch (a) {
                            case 0:
                                return b.TEXTURE_CUBE_MAP_POSITIVE_X;
                            case 1:
                                return b.TEXTURE_CUBE_MAP_NEGATIVE_X;
                            case 2:
                                return b.TEXTURE_CUBE_MAP_POSITIVE_Y;
                            case 3:
                                return b.TEXTURE_CUBE_MAP_NEGATIVE_Y;
                            case 4:
                                return b.TEXTURE_CUBE_MAP_POSITIVE_Z;
                            case 5:
                                return b.TEXTURE_CUBE_MAP_NEGATIVE_Z;
                            default:
                                throw new fc;
                        }
                    },
                    __class__: Hf
                });
            var dh = function (a, b, c, d, e) {
                Ua.call(this, a);
                this.__width = b;
                this.__height = c;
                this.__optimizeForRenderToTexture = e;
                this.__textureTarget = this.__context.gl.TEXTURE_2D;
                this.uploadFromTypedArray(null);
                e && this.__getGLFramebuffer(!0, 0, 0)
            };
            g["openfl.display3D.textures.RectangleTexture"] = dh;
            dh.__name__ = "openfl.display3D.textures.RectangleTexture";
            dh.__super__ = Ua;
            dh.prototype = l(Ua.prototype, {
                uploadFromTypedArray: function (a) {
                    var b = this.__context.gl;
                    this.__context.__bindGLTexture2D(this.__textureID);
                    Gb.texImage2D(b, this.__textureTarget, 0, this.__internalFormat, this.__width, this.__height, 0, this.__format, b.UNSIGNED_BYTE, a);
                    this.__context.__bindGLTexture2D(null)
                },
                __setSamplerState: function (a) {
                    if (Ua.prototype.__setSamplerState.call(this, a)) {
                        var b = this.__context.gl;
                        if (0 != Sa.__glMaxTextureMaxAnisotropy) {
                            switch (a.filter) {
                                case 0:
                                    a = 16;
                                    break;
                                case 1:
                                    a = 2;
                                    break;
                                case 2:
                                    a = 4;
                                    break;
                                case 3:
                                    a = 8;
                                    break;
                                default:
                                    a = 1
                            }
                            a > Sa.__glMaxTextureMaxAnisotropy && (a = Sa.__glMaxTextureMaxAnisotropy);
                            b.texParameterf(b.TEXTURE_2D, Sa.__glTextureMaxAnisotropy,
                                a)
                        }
                        return !0
                    }
                    return !1
                },
                __class__: dh
            });
            var Je = function (a, b, c, d, e, f) {
                Ua.call(this, a);
                this.__width = b;
                this.__height = c;
                this.__optimizeForRenderToTexture = e;
                this.__streamingLevels = f;
                a = this.__context.gl;
                this.__textureTarget = a.TEXTURE_2D;
                this.__context.__bindGLTexture2D(this.__textureID);
                Gb.texImage2D(a, this.__textureTarget, 0, this.__internalFormat, this.__width, this.__height, 0, this.__format, a.UNSIGNED_BYTE, null);
                this.__context.__bindGLTexture2D(null);
                e && this.__getGLFramebuffer(!0, 0, 0)
            };
            g["openfl.display3D.textures.Texture"] =
                Je;
            Je.__name__ = "openfl.display3D.textures.Texture";
            Je.__super__ = Ua;
            Je.prototype = l(Ua.prototype, {
                uploadFromBitmapData: function (a, b, c) {
                    null == b && (b = 0);
                    if (null != a) {
                        c = this.__width >> b;
                        var d = this.__height >> b;
                        if (0 != c || 0 != d) {
                            0 == c && (c = 1);
                            0 == d && (d = 1);
                            if (a.width != c || a.height != d) c = new mb(c, d, !0, 0), c.draw(a), a = c;
                            a = this.__getImage(a);
                            if (null != a)
                                if (0 == b && null != a.buffer && null == a.buffer.data && null != a.buffer.get_src()) {
                                    var e = this.__context.gl;
                                    c = this.__width >> b;
                                    d = this.__height >> b;
                                    if (0 != c || 0 != d) this.__context.__bindGLTexture2D(this.__textureID),
                                        Gb.texImage2D(e, this.__textureTarget, b, this.__internalFormat, this.__format, e.UNSIGNED_BYTE, a.buffer.get_src()), this.__context.__bindGLTexture2D(null)
                                } else this.uploadFromTypedArray(a.get_data(), b)
                        }
                    }
                },
                uploadFromTypedArray: function (a, b) {
                    null == b && (b = 0);
                    if (null != a) {
                        var c = this.__context.gl,
                            d = this.__width >> b,
                            e = this.__height >> b;
                        if (0 != d || 0 != e) 0 == d && (d = 1), 0 == e && (e = 1), this.__context.__bindGLTexture2D(this.__textureID), Gb.texImage2D(c, this.__textureTarget, b, this.__internalFormat, d, e, 0, this.__format, c.UNSIGNED_BYTE,
                            a), this.__context.__bindGLTexture2D(null)
                    }
                },
                __setSamplerState: function (a) {
                    if (Ua.prototype.__setSamplerState.call(this, a)) {
                        var b = this.__context.gl;
                        2 == a.mipfilter || this.__samplerState.mipmapGenerated || (b.generateMipmap(b.TEXTURE_2D), this.__samplerState.mipmapGenerated = !0);
                        if (0 != Sa.__glMaxTextureMaxAnisotropy) {
                            switch (a.filter) {
                                case 0:
                                    a = 16;
                                    break;
                                case 1:
                                    a = 2;
                                    break;
                                case 2:
                                    a = 4;
                                    break;
                                case 3:
                                    a = 8;
                                    break;
                                default:
                                    a = 1
                            }
                            a > Sa.__glMaxTextureMaxAnisotropy && (a = Sa.__glMaxTextureMaxAnisotropy);
                            b.texParameterf(b.TEXTURE_2D,
                                Sa.__glTextureMaxAnisotropy, a)
                        }
                        return !0
                    }
                    return !1
                },
                __class__: Je
            });
            var $k = function (a) {
                Ua.call(this, a);
                this.__textureTarget = this.__context.gl.TEXTURE_2D
            };
            g["openfl.display3D.textures.VideoTexture"] = $k;
            $k.__name__ = "openfl.display3D.textures.VideoTexture";
            $k.__super__ = Ua;
            $k.prototype = l(Ua.prototype, {
                dispose: function () {
                    null != this.__netStream && null != this.__netStream.__video && this.__netStream.__video.removeEventListener("timeupdate", p(this, this.__onTimeUpdate));
                    Ua.prototype.dispose.call(this)
                },
                __onTimeUpdate: function (a) {
                    null !=
                    this.__netStream && this.__netStream.__video.currentTime != this.__cacheTime && 2 <= this.__netStream.__video.readyState && this.__textureReady()
                },
                __getTexture: function () {
                    if (this.__netStream.__video.currentTime != this.__cacheTime && 2 <= this.__netStream.__video.readyState) {
                        var a = this.__context.gl;
                        this.__context.__bindGLTexture2D(this.__textureID);
                        Gb.texImage2D(a, a.TEXTURE_2D, 0, a.RGBA, a.RGBA, a.UNSIGNED_BYTE, this.__netStream.__video);
                        this.__cacheTime = this.__netStream.__video.currentTime
                    }
                    return this.__textureID
                },
                __textureReady: function () {
                    this.videoWidth = this.__netStream.__video.videoWidth;
                    this.videoHeight = this.__netStream.__video.videoHeight;
                    var a = new V("textureReady");
                    this.dispatchEvent(a)
                },
                __class__: $k
            });
            var zf = function (a) {
                null == a && (a = "");
                Fa.call(this, a);
                this.name = "ArgumentError";
                this.__skipStack++
            };
            g["openfl.errors.ArgumentError"] = zf;
            zf.__name__ = "openfl.errors.ArgumentError";
            zf.__super__ = Fa;
            zf.prototype = l(Fa.prototype, {
                __class__: zf
            });
            var ig = function (a) {
                null == a && (a = "");
                Fa.call(this, a);
                this.name = "IOError";
                this.__skipStack++
            };
            g["openfl.errors.IOError"] = ig;
            ig.__name__ = "openfl.errors.IOError";
            ig.__super__ = Fa;
            ig.prototype = l(Fa.prototype, {
                __class__: ig
            });
            var fh = function (a, b) {
                ig.call(this, "End of file was encountered");
                this.name = "EOFError";
                this.errorID = 2030;
                this.__skipStack++
            };
            g["openfl.errors.EOFError"] = fh;
            fh.__name__ = "openfl.errors.EOFError";
            fh.__super__ = ig;
            fh.prototype = l(ig.prototype, {
                __class__: fh
            });
            var fc = function (a) {
                null == a && (a = "");
                Fa.call(this, a, 0);
                this.name = "IllegalOperationError";
                this.__skipStack++
            };
            g["openfl.errors.IllegalOperationError"] = fc;
            fc.__name__ = "openfl.errors.IllegalOperationError";
            fc.__super__ = Fa;
            fc.prototype = l(Fa.prototype, {
                __class__: fc
            });
            var tg = function (a) {
                null == a && (a = "");
                Fa.call(this, a, 0);
                this.name = "RangeError";
                this.__skipStack++
            };
            g["openfl.errors.RangeError"] = tg;
            tg.__name__ = "openfl.errors.RangeError";
            tg.__super__ = Fa;
            tg.prototype = l(Fa.prototype, {
                __class__: tg
            });
            var sg = function (a) {
                null == a && (a = "");
                Fa.call(this, a, 0);
                this.name = "TypeError";
                this.__skipStack++
            };
            g["openfl.errors.TypeError"] =
                sg;
            sg.__name__ = "openfl.errors.TypeError";
            sg.__super__ = Fa;
            sg.prototype = l(Fa.prototype, {
                __class__: sg
            });
            var jg = function (a, b, c, d) {
                null == d && (d = !1);
                null == c && (c = !1);
                null == b && (b = !1);
                V.call(this, a, b, c);
                this.activating = d
            };
            g["openfl.events.ActivityEvent"] = jg;
            jg.__name__ = "openfl.events.ActivityEvent";
            jg.__super__ = V;
            jg.prototype = l(V.prototype, {
                __class__: jg
            });
            var be = function (a, b, c, d) {
                null == d && (d = "");
                null == c && (c = !1);
                null == b && (b = !1);
                V.call(this, a, b, c);
                this.text = d
            };
            g["openfl.events.TextEvent"] = be;
            be.__name__ = "openfl.events.TextEvent";
            be.__super__ = V;
            be.prototype = l(V.prototype, {
                __class__: be
            });
            var nd = function (a, b, c, d, e) {
                null == e && (e = 0);
                null == d && (d = "");
                null == c && (c = !1);
                null == b && (b = !1);
                be.call(this, a, b, c, d);
                this.errorID = e
            };
            g["openfl.events.ErrorEvent"] = nd;
            nd.__name__ = "openfl.events.ErrorEvent";
            nd.__super__ = be;
            nd.prototype = l(be.prototype, {
                __class__: nd
            });
            var qg = function (a) {
                this.active = !1;
                this.reset(a)
            };
            g["openfl.events._EventDispatcher.DispatchIterator"] = qg;
            qg.__name__ = "openfl.events._EventDispatcher.DispatchIterator";
            qg.prototype = {
                copy: function () {
                    this.isCopy ||
                    (this.list = this.list.slice(), this.isCopy = !0)
                },
                hasNext: function () {
                    return this.index < this.list.length
                },
                next: function () {
                    return this.list[this.index++]
                },
                remove: function (a, b) {
                    if (this.active)
                        if (this.isCopy) {
                            b = this.index;
                            for (var c = this.list.length; b < c;) {
                                var d = b++;
                                if (this.list[d] == a) {
                                    this.list.splice(d, 1);
                                    break
                                }
                            }
                        } else b < this.index && this.index--
                },
                reset: function (a) {
                    this.list = a;
                    this.isCopy = !1;
                    this.index = 0
                },
                start: function () {
                    this.active = !0
                },
                stop: function () {
                    this.active = !1
                },
                __class__: qg
            };
            var af = function (a, b, c, d) {
                d &&
                af.supportsWeakReference ? this.weakRefCallback = new WeakRef(a) : this.callback = a;
                this.useCapture = b;
                this.priority = c;
                this.useWeakReference = d
            };
            g["openfl.events._EventDispatcher.Listener"] = af;
            af.__name__ = "openfl.events._EventDispatcher.Listener";
            af.prototype = {
                match: function (a, b) {
                    var c = this.callback;
                    return null != this.weakRefCallback && (c = this.weakRefCallback.deref(), null == c) ? !1 : c == a ? this.useCapture == b : !1
                },
                __class__: af
            };
            var tf = function (a, b, c, d, e, f) {
                null == f && (f = 0);
                null == e && (e = !1);
                null == c && (c = !1);
                null == b && (b = !1);
                V.call(this, a, b, c);
                this.keyCode = f;
                this.shiftKey = e;
                this.relatedObject = d
            };
            g["openfl.events.FocusEvent"] = tf;
            tf.__name__ = "openfl.events.FocusEvent";
            tf.__super__ = V;
            tf.prototype = l(V.prototype, {
                __class__: tf
            });
            var Be = function (a, b, c, d, e) {
                null == e && (e = !1);
                null == d && (d = !1);
                null == c && (c = !1);
                null == b && (b = !1);
                jg.call(this, a, b, c);
                this.fullScreen = d;
                this.interactive = e
            };
            g["openfl.events.FullScreenEvent"] = Be;
            Be.__name__ = "openfl.events.FullScreenEvent";
            Be.__super__ = jg;
            Be.prototype = l(jg.prototype, {
                __class__: Be
            });
            var kg =
                function (a, b, c, d) {
                    null == c && (c = !1);
                    null == b && (b = !0);
                    V.call(this, a, b, c);
                    this.device = d
                };
            g["openfl.events.GameInputEvent"] = kg;
            kg.__name__ = "openfl.events.GameInputEvent";
            kg.__super__ = V;
            kg.prototype = l(V.prototype, {
                __class__: kg
            });
            var gh = function (a, b, c, d, e) {
                null == e && (e = !1);
                null == d && (d = 0);
                null == c && (c = !1);
                null == b && (b = !1);
                this.responseHeaders = [];
                this.status = d;
                this.redirected = e;
                V.call(this, a, b, c)
            };
            g["openfl.events.HTTPStatusEvent"] = gh;
            gh.__name__ = "openfl.events.HTTPStatusEvent";
            gh.__super__ = V;
            gh.prototype = l(V.prototype, {
                __class__: gh
            });
            var hh = function (a, b, c, d, e) {
                null == e && (e = 0);
                null == d && (d = "");
                null == c && (c = !1);
                null == b && (b = !0);
                nd.call(this, a, b, c, d, e)
            };
            g["openfl.events.IOErrorEvent"] = hh;
            hh.__name__ = "openfl.events.IOErrorEvent";
            hh.__super__ = nd;
            hh.prototype = l(nd.prototype, {
                __class__: hh
            });
            var Bj = function (a, b, c, d, e, f, h, g, m, q, n) {
                null == n && (n = !1);
                null == q && (q = !1);
                null == m && (m = !1);
                null == g && (g = !1);
                null == h && (h = !1);
                null == e && (e = 0);
                null == d && (d = 0);
                null == c && (c = !1);
                null == b && (b = !1);
                V.call(this, a, b, c);
                this.charCode = d;
                this.keyCode = e;
                this.keyLocation =
                    null != f ? f : 0;
                this.ctrlKey = h;
                this.altKey = g;
                this.shiftKey = m;
                this.controlKey = q;
                this.commandKey = n;
                this.__updateAfterEventFlag = !1
            };
            g["openfl.events.KeyboardEvent"] = Bj;
            Bj.__name__ = "openfl.events.KeyboardEvent";
            Bj.__super__ = V;
            Bj.prototype = l(V.prototype, {
                __class__: Bj
            });
            var $a = function (a, b, c, d, e, f, h, g, m, q, n, k, l, p) {
                null == p && (p = 0);
                null == l && (l = !1);
                null == k && (k = !1);
                null == n && (n = 0);
                null == q && (q = !1);
                null == m && (m = !1);
                null == g && (g = !1);
                null == h && (h = !1);
                null == e && (e = 0);
                null == d && (d = 0);
                null == c && (c = !1);
                null == b && (b = !0);
                V.call(this,
                    a, b, c);
                this.shiftKey = m;
                this.altKey = g;
                this.ctrlKey = h;
                this.bubbles = b;
                this.relatedObject = f;
                this.delta = n;
                this.localX = d;
                this.localY = e;
                this.buttonDown = q;
                this.commandKey = k;
                this.controlKey = l;
                this.clickCount = p;
                this.isRelatedObjectInaccessible = !1;
                this.stageY = this.stageX = NaN;
                this.__updateAfterEventFlag = !1
            };
            g["openfl.events.MouseEvent"] = $a;
            $a.__name__ = "openfl.events.MouseEvent";
            $a.__create = function (a, b, c, d, e, f, h) {
                null == h && (h = 0);
                a = new $a(a, !0, !1, e.x, e.y, null, $a.__ctrlKey, $a.__altKey, $a.__shiftKey, $a.__buttonDown,
                    h, $a.__commandKey, $a.__controlKey);
                a.stageX = c;
                a.stageY = d;
                a.target = f;
                return a
            };
            $a.__super__ = V;
            $a.prototype = l(V.prototype, {
                updateAfterEvent: function () {
                    this.__updateAfterEventFlag = !0
                },
                __class__: $a
            });
            var Gj = function (a, b, c, d) {
                null == c && (c = !1);
                null == b && (b = !1);
                this.info = d;
                V.call(this, a, b, c)
            };
            g["openfl.events.NetStatusEvent"] = Gj;
            Gj.__name__ = "openfl.events.NetStatusEvent";
            Gj.__super__ = V;
            Gj.prototype = l(V.prototype, {
                __class__: Gj
            });
            var dg = function (a, b, c, d, e) {
                null == e && (e = 0);
                null == d && (d = 0);
                null == c && (c = !1);
                null ==
                b && (b = !1);
                V.call(this, a, b, c);
                this.bytesLoaded = d;
                this.bytesTotal = e
            };
            g["openfl.events.ProgressEvent"] = dg;
            dg.__name__ = "openfl.events.ProgressEvent";
            dg.__super__ = V;
            dg.prototype = l(V.prototype, {
                __class__: dg
            });
            var mh = function (a, b, c, d, e, f) {
                null == f && (f = !0);
                null == c && (c = !1);
                null == b && (b = !1);
                V.call(this, a, b, c);
                this.objectMatrix = d;
                this.objectColorTransform = e;
                this.allowSmoothing = f
            };
            g["openfl.events.RenderEvent"] = mh;
            mh.__name__ = "openfl.events.RenderEvent";
            mh.__super__ = V;
            mh.prototype = l(V.prototype, {
                __class__: mh
            });
            var Hj = function (a, b, c) {
                null == c && (c = !1);
                null == b && (b = !1);
                V.call(this, a, b, c);
                this.data = new sc(0);
                this.data.__endian = 1;
                this.position = 0
            };
            g["openfl.events.SampleDataEvent"] = Hj;
            Hj.__name__ = "openfl.events.SampleDataEvent";
            Hj.__super__ = V;
            Hj.prototype = l(V.prototype, {
                getBufferSize: function () {
                    var a = J.toFloat(Ue.get_length(this.data)) / J.toFloat(4) / 2 | 0;
                    if (0 < a) {
                        if (0 != a && 0 == (a & a - 1) && 2048 <= a && 8192 >= a) return this.tempBuffer = new Float32Array(2 * a), a;
                        throw new Fa("To be consistent with flash the listener function registered to SampleDataEvent has to provide 2048, 4096 or 8192 samples if targeting HTML5.");
                    }
                    return 0
                },
                getSamples: function (a) {
                    this.data.position = 0;
                    this.tempBuffer = Ul.fromBytes(Ue.toBytes(this.data));
                    this.leftChannel = a.outputBuffer.getChannelData(0);
                    this.rightChannel = a.outputBuffer.getChannelData(1);
                    for (var b = a = 0, c = J.toFloat(Ue.get_length(this.data)) / J.toFloat(2) | 0; b < c;) {
                        var d = b++;
                        this.leftChannel[d] = this.tempBuffer[a++];
                        this.rightChannel[d] = this.tempBuffer[a++]
                    }
                },
                __class__: Hj
            });
            var Ij = function (a, b, c, d, e) {
                null == e && (e = 0);
                null == d && (d = "");
                null == c && (c = !1);
                null == b && (b = !1);
                nd.call(this, a, b, c, d,
                    e)
            };
            g["openfl.events.SecurityErrorEvent"] = Ij;
            Ij.__name__ = "openfl.events.SecurityErrorEvent";
            Ij.__super__ = nd;
            Ij.prototype = l(nd.prototype, {
                __class__: Ij
            });
            var lg = function (a, b, c) {
                null == c && (c = !1);
                null == b && (b = !1);
                V.call(this, a, b, c);
                this.__updateAfterEventFlag = !1
            };
            g["openfl.events.TimerEvent"] = lg;
            lg.__name__ = "openfl.events.TimerEvent";
            lg.__super__ = V;
            lg.prototype = l(V.prototype, {
                updateAfterEvent: function () {
                    this.__updateAfterEventFlag = !0
                },
                __class__: lg
            });
            var $c = function (a, b, c, d, e, f, h, g, m, q, n, k, l, p, y, t, v, B, E,
                               x) {
                null == t && (t = !1);
                null == y && (y = !1);
                null == p && (p = !1);
                null == l && (l = !1);
                null == k && (k = !1);
                null == q && (q = 0);
                null == m && (m = 0);
                null == g && (g = 0);
                null == h && (h = 0);
                null == f && (f = 0);
                null == e && (e = !1);
                null == d && (d = 0);
                null == c && (c = !1);
                null == b && (b = !0);
                V.call(this, a, b, c);
                this.touchPointID = d;
                this.isPrimaryTouchPoint = e;
                this.localX = f;
                this.localY = h;
                this.sizeX = g;
                this.sizeY = m;
                this.pressure = q;
                this.relatedObject = n;
                this.ctrlKey = k;
                this.altKey = l;
                this.shiftKey = p;
                this.commandKey = y;
                this.controlKey = t;
                this.stageY = this.stageX = NaN;
                this.__updateAfterEventFlag = !1
            };
            g["openfl.events.TouchEvent"] = $c;
            $c.__name__ = "openfl.events.TouchEvent";
            $c.__create = function (a, b, c, d, e, f) {
                a = new $c(a, !0, !1, 0, !0, e.x, e.y, 1, 1, 1);
                a.stageX = c;
                a.stageY = d;
                a.target = f;
                return a
            };
            $c.__super__ = V;
            $c.prototype = l(V.prototype, {
                __class__: $c
            });
            var Aj = function (a, b, c, d) {
                null == c && (c = !0);
                null == b && (b = !0);
                nd.call(this, a, b, c);
                this.error = d
            };
            g["openfl.events.UncaughtErrorEvent"] = Aj;
            Aj.__name__ = "openfl.events.UncaughtErrorEvent";
            Aj.__super__ = nd;
            Aj.prototype = l(nd.prototype, {
                __class__: Aj
            });
            var wj = function () {
                O.call(this)
            };
            g["openfl.events.UncaughtErrorEvents"] = wj;
            wj.__name__ = "openfl.events.UncaughtErrorEvents";
            wj.__super__ = O;
            wj.prototype = l(O.prototype, {
                addEventListener: function (a, b, c, d, e) {
                    null == e && (e = !1);
                    null == d && (d = 0);
                    null == c && (c = !1);
                    O.prototype.addEventListener.call(this, a, b, c, d, e);
                    Object.prototype.hasOwnProperty.call(this.__eventMap.h, "uncaughtError") && (this.__enabled = !0)
                },
                removeEventListener: function (a, b, c) {
                    null == c && (c = !1);
                    O.prototype.removeEventListener.call(this, a, b, c);
                    Object.prototype.hasOwnProperty.call(this.__eventMap.h,
                        "uncaughtError") || (this.__enabled = !1)
                },
                __class__: wj
            });
            var Hl = function () {
                this.__leftExtension = this.__bottomExtension = 0;
                this.__needSecondBitmapData = !0;
                this.__numShaderPasses = 0;
                this.__preserveObject = !1;
                this.__rightExtension = 0;
                this.__shaderBlendMode = 10;
                this.__topExtension = 0;
                this.__smooth = !0
            };
            g["openfl.filters.BitmapFilter"] = Hl;
            Hl.__name__ = "openfl.filters.BitmapFilter";
            Hl.prototype = {
                __applyFilter: function (a, b, c, d) {
                    return b
                },
                __initShader: function (a, b, c) {
                    return null
                },
                __class__: Hl
            };
            var nh = function (a) {
                this.__colorTransform =
                    new ib;
                this.concatenatedColorTransform = new ib;
                this.pixelBounds = new ha;
                this.__displayObject = a;
                this.__hasMatrix = !0
            };
            g["openfl.geom.Transform"] = nh;
            nh.__name__ = "openfl.geom.Transform";
            nh.prototype = {
                get_colorTransform: function () {
                    return this.__colorTransform.__clone()
                },
                get_matrix: function () {
                    return this.__hasMatrix ? this.__displayObject.__transform.clone() : null
                },
                set_matrix: function (a) {
                    if (null == a) return this.__hasMatrix = !1, null;
                    this.__hasMatrix = !0;
                    this.__hasMatrix3D = !1;
                    null != this.__displayObject && this.__setTransform(a.a,
                        a.b, a.c, a.d, a.tx, a.ty);
                    return a
                },
                __setTransform: function (a, b, c, d, e, f) {
                    if (null != this.__displayObject) {
                        var h = this.__displayObject.__transform;
                        if (h.a != a || h.b != b || h.c != c || h.d != d || h.tx != e || h.ty != f) {
                            var g = 0 == b ? a : Math.sqrt(a * a + b * b);
                            var m = 0 == c ? d : Math.sqrt(c * c + d * d);
                            this.__displayObject.__scaleX = g;
                            this.__displayObject.__scaleY = m;
                            g = 180 / Math.PI * Math.atan2(d, c) - 90;
                            g != this.__displayObject.__rotation && (this.__displayObject.__rotation = g, g *= Math.PI / 180, this.__displayObject.__rotationSine = Math.sin(g), this.__displayObject.__rotationCosine =
                                Math.cos(g));
                            h.a = a;
                            h.b = b;
                            h.c = c;
                            h.d = d;
                            h.tx = e;
                            h.ty = f;
                            this.__displayObject.__setTransformDirty()
                        }
                    }
                },
                __class__: nh,
                __properties__: {
                    set_matrix: "set_matrix",
                    get_matrix: "get_matrix",
                    get_colorTransform: "get_colorTransform"
                }
            };
            var al = function (a, b) {
                this.__webAudioContext = null;
                this.__urlLoading = !1;
                O.call(this, this);
                this.bytesTotal = this.bytesLoaded = 0;
                this.isBuffering = !1;
                this.url = null;
                null != a && this.load(a, b);
                null == a && null != fe.context && "web" == fe.context.type && (this.__webAudioContext = fe.context.web)
            };
            g["openfl.media.Sound"] =
                al;
            al.__name__ = "openfl.media.Sound";
            al.__super__ = O;
            al.prototype = l(O.prototype, {
                load: function (a, b) {
                    var c = this;
                    this.url = a.url;
                    this.__urlLoading = !0;
                    a = za.getLibrary("default");
                    if (null != a && Object.prototype.hasOwnProperty.call(a.cachedAudioBuffers.h, this.url)) this.AudioBuffer_onURLLoad(a.cachedAudioBuffers.h[this.url]);
                    else Xb.loadFromFile(this.url).onComplete(p(this, this.AudioBuffer_onURLLoad)).onError(function (a) {
                        c.AudioBuffer_onURLLoad(null)
                    })
                },
                AudioBuffer_onURLLoad: function (a) {
                    this.__urlLoading = !1;
                    null == a ? this.dispatchEvent(new hh("ioError")) : (this.__buffer = a, this.dispatchEvent(new V("complete")), null != this.__pendingSoundChannel && (this.__pendingAudioSource.buffer = this.__buffer, this.__pendingAudioSource.init(), this.__pendingSoundChannel.__initAudioSource(this.__pendingAudioSource)));
                    this.__pendingAudioSource = this.__pendingSoundChannel = null
                },
                __class__: al
            });
            var bl = function (a, b, c) {
                this.__firstRun = !0;
                O.call(this, this);
                this.__sound = a;
                this.rightPeak = this.leftPeak = 1;
                this.__soundTransform = null != c ? c :
                    new xf;
                this.__initAudioSource(b);
                Od.__registerSoundChannel(this)
            };
            g["openfl.media.SoundChannel"] = bl;
            bl.__name__ = "openfl.media.SoundChannel";
            bl.__super__ = O;
            bl.prototype = l(O.prototype, {
                stop: function () {
                    Od.__unregisterSoundChannel(this);
                    this.__isValid && (null != this.__processor && (this.__processor.disconnect(), this.__processor = this.__processor.onaudioprocess = null), this.__audioSource.stop(), this.__dispose())
                },
                __dispose: function () {
                    this.__isValid && (this.__audioSource.onComplete.remove(p(this, this.audioSource_onComplete)),
                        this.__audioSource.dispose(), this.__audioSource = null, this.__isValid = !1)
                },
                __startSampleData: function () {
                    var a = this,
                        b = this.__sound.__webAudioContext;
                    if (null != b) {
                        this.__sampleDataEvent = new Hj("sampleData");
                        this.__sound.dispatchEvent(this.__sampleDataEvent);
                        var c = this.__sampleDataEvent.getBufferSize();
                        0 == c ? Na.setTimeout(function () {
                            a.stop();
                            a.dispatchEvent(new V("soundComplete"))
                        }, 1) : (this.__processor = b.createScriptProcessor(c, 0, 2), this.__processor.connect(b.destination), this.__processor.onaudioprocess =
                            p(this, this.onSample), b.resume())
                    }
                },
                __updateTransform: function () {
                    this.set_soundTransform(this.get_soundTransform())
                },
                __initAudioSource: function (a) {
                    this.__audioSource = a;
                    null != this.__audioSource && (this.__audioSource.onComplete.add(p(this, this.audioSource_onComplete)), this.__isValid = !0, this.__audioSource.play())
                },
                get_position: function () {
                    return this.__isValid ? this.__audioSource.get_currentTime() + this.__audioSource.offset : 0
                },
                set_position: function (a) {
                    if (!this.__isValid) return 0;
                    this.__audioSource.set_currentTime((a |
                        0) - this.__audioSource.offset);
                    return a
                },
                get_soundTransform: function () {
                    return this.__soundTransform.clone()
                },
                set_soundTransform: function (a) {
                    if (null != a) {
                        this.__soundTransform.pan = a.pan;
                        this.__soundTransform.volume = a.volume;
                        var b = Od.__soundTransform.pan + this.__soundTransform.pan;
                        -
                            1 > b && (b = -1);
                        1 < b && (b = 1);
                        var c = Od.__soundTransform.volume * this.__soundTransform.volume;
                        this.__isValid && (this.__audioSource.set_gain(c), c = this.__audioSource.get_position(), c.x = b, c.z = -1 * Math.sqrt(1 - Math.pow(b, 2)), this.__audioSource.set_position(c))
                    }
                    return a
                },
                audioSource_onComplete: function () {
                    Od.__unregisterSoundChannel(this);
                    this.__dispose();
                    this.dispatchEvent(new V("soundComplete"))
                },
                onSample: function (a) {
                    if (this.__firstRun) {
                        var b = !0;
                        this.__firstRun = !1
                    } else Ue.set_length(this.__sampleDataEvent.data, 0), this.__sound.dispatchEvent(this.__sampleDataEvent), b = J.gt(Ue.get_length(this.__sampleDataEvent.data), 0);
                    b ? this.__sampleDataEvent.getSamples(a) : (this.stop(), this.dispatchEvent(new V("soundComplete")))
                },
                __class__: bl,
                __properties__: {
                    set_soundTransform: "set_soundTransform",
                    get_soundTransform: "get_soundTransform",
                    set_position: "set_position",
                    get_position: "get_position"
                }
            });
            var Sl = function () {
            };
            g["openfl.media.SoundLoaderContext"] = Sl;
            Sl.__name__ = "openfl.media.SoundLoaderContext";
            var xf = function (a, b) {
                null == b && (b = 0);
                null == a && (a = 1);
                this.volume = a;
                this.pan = b;
                this.rightToRight = this.rightToLeft = this.leftToRight = this.leftToLeft = 0
            };
            g["openfl.media.SoundTransform"] = xf;
            xf.__name__ = "openfl.media.SoundTransform";
            xf.prototype = {
                clone: function () {
                    return new xf(this.volume, this.pan)
                },
                __class__: xf
            };
            var Od = function () {
            };
            g["openfl.media.SoundMixer"] = Od;
            Od.__name__ = "openfl.media.SoundMixer";
            Od.__registerSoundChannel = function (a) {
                Od.__soundChannels.push(a)
            };
            Od.__unregisterSoundChannel = function (a) {
                ja.remove(Od.__soundChannels, a)
            };
            var cl = function (a, b) {
                null == b && (b = 240);
                null == a && (a = 320);
                da.call(this);
                this.__drawableType = 8;
                this.__width = a;
                this.__height = b;
                this.__textureTime = -1;
                this.smoothing = !1;
                this.deblocking = 0
            };
            g["openfl.media.Video"] = cl;
            cl.__name__ = "openfl.media.Video";
            cl.__super__ = da;
            cl.prototype = l(da.prototype, {
                __enterFrame: function (a) {
                    this.__renderable && null != this.__stream && !this.__renderDirty && (this.__renderDirty = !0, this.__setParentRenderDirty())
                },
                __getBounds: function (a, b) {
                    var c = ha.__pool.get();
                    c.setTo(0, 0, this.__width, this.__height);
                    c.__transform(c, b);
                    a.__expand(c.x, c.y, c.width, c.height);
                    ha.__pool.release(c)
                },
                __getIndexBuffer: function (a) {
                    if (null == this.__indexBuffer || this.__indexBufferContext != a.__context) this.__indexBufferData = new Uint16Array(6), this.__indexBufferData[0] = 0, this.__indexBufferData[1] =
                        1, this.__indexBufferData[2] = 2, this.__indexBufferData[3] = 2, this.__indexBufferData[4] = 1, this.__indexBufferData[5] = 3, this.__indexBufferContext = a.__context, this.__indexBuffer = a.createIndexBuffer(6), this.__indexBuffer.uploadFromTypedArray(this.__indexBufferData);
                    return this.__indexBuffer
                },
                __getTexture: function (a) {
                    if (null == this.__stream || null == this.__stream.__video) return null;
                    var b = a.__context.webgl,
                        c = b.RGBA,
                        d = b.RGBA;
                    this.__stream.__closed || this.__stream.__video.currentTime == this.__textureTime || (null ==
                    this.__texture && (this.__texture = a.createRectangleTexture(this.__stream.__video.videoWidth, this.__stream.__video.videoHeight, 1, !1)), a.__bindGLTexture2D(this.__texture.__textureID), Gb.texImage2D(b, b.TEXTURE_2D, 0, c, d, b.UNSIGNED_BYTE, this.__stream.__video), this.__textureTime = this.__stream.__video.currentTime);
                    return this.__texture
                },
                __getVertexBuffer: function (a) {
                    if (null == this.__vertexBuffer || this.__vertexBufferContext != a.__context || this.__currentWidth != this.get_width() || this.__currentHeight != this.get_height()) this.__currentWidth =
                        this.get_width(), this.__currentHeight = this.get_height(), this.__vertexBufferData = new Float32Array(20), this.__vertexBufferData[0] = this.get_width(), this.__vertexBufferData[1] = this.get_height(), this.__vertexBufferData[3] = 1, this.__vertexBufferData[4] = 1, this.__vertexBufferData[6] = this.get_height(), this.__vertexBufferData[9] = 1, this.__vertexBufferData[10] = this.get_width(), this.__vertexBufferData[13] = 1, this.__vertexBufferContext = a.__context, this.__vertexBuffer = a.createVertexBuffer(3, 5), this.__vertexBuffer.uploadFromTypedArray(Vg.toArrayBufferView(this.__vertexBufferData));
                    return this.__vertexBuffer
                },
                __hitTest: function (a, b, c, d, e, f) {
                    if (!f.get_visible() || this.__isMask || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b)) return !1;
                    this.__getRenderTransform();
                    var h = this.__renderTransform,
                        g = h.a * h.d - h.b * h.c;
                    c = 0 == g ? -h.tx : 1 / g * (h.c * (h.ty - b) + h.d * (a - h.tx));
                    h = this.__renderTransform;
                    g = h.a * h.d - h.b * h.c;
                    a = 0 == g ? -h.ty : 1 / g * (h.a * (b - h.ty) + h.b * (h.tx - a));
                    return 0 < c && 0 < a && c <= this.__width && a <= this.__height ? (null == d || e || d.push(f), !0) : !1
                },
                __hitTestMask: function (a, b) {
                    var c = ba.__pool.get();
                    c.setTo(a, b);
                    this.__globalToLocal(c, c);
                    a = 0 < c.x && 0 < c.y && c.x <= this.__width && c.y <= this.__height;
                    ba.__pool.release(c);
                    return a
                },
                get_height: function () {
                    return this.__height * this.get_scaleY()
                },
                set_height: function (a) {
                    if (1 != this.get_scaleY() || a != this.__height) this.__setTransformDirty(), this.__dirty = !0;
                    this.set_scaleY(1);
                    return this.__height = a
                },
                get_width: function () {
                    return this.__width * this.__scaleX
                },
                set_width: function (a) {
                    if (1 != this.__scaleX || this.__width != a) this.__setTransformDirty(), this.__dirty = !0;
                    this.set_scaleX(1);
                    return this.__width = a
                },
                __class__: cl
            });
            var ti = function (a, b, c) {
                this.description = a;
                this.extension = b;
                this.macType = c
            };
            g["openfl.net.FileFilter"] = ti;
            ti.__name__ = "openfl.net.FileFilter";
            ti.prototype = {
                __class__: ti
            };
            var Of = function () {
                O.call(this);
                this.__inputControl = window.document.createElement("input");
                this.__inputControl.setAttribute("type", "file");
                this.__inputControl.onclick = function (a) {
                    a.cancelBubble = !0;
                    a.stopPropagation()
                }
            };
            g["openfl.net.FileReference"] = Of;
            Of.__name__ = "openfl.net.FileReference";
            Of.__super__ =
                O;
            Of.prototype = l(O.prototype, {
                browse: function (a) {
                    var b = this,
                        c = this.__path = this.__data = null;
                    if (null != a) {
                        c = [];
                        for (var d = 0; d < a.length;) {
                            var e = a[d];
                            ++d;
                            c.push(R.replace(R.replace(e.extension, "*.", "."), ";", ","))
                        }
                        c = c.join(",")
                    }
                    null != c ? this.__inputControl.setAttribute("accept", c) : this.__inputControl.removeAttribute("accept");
                    this.__inputControl.onchange = function () {
                        if (0 == b.__inputControl.files.length) b.dispatchEvent(new V("cancel"));
                        else {
                            var a = b.__inputControl.files[0],
                                c = new Date(a.lastModified);
                            b.modificationDate =
                                c;
                            b.creationDate = b.get_modificationDate();
                            b.size = a.size;
                            c = Yc.extension(a.name);
                            b.type = "." + c;
                            b.name = Yc.withoutDirectory(a.name);
                            b.__path = a.name;
                            b.dispatchEvent(new V("select"))
                        }
                    };
                    this.__inputControl.click();
                    return !0
                },
                load: function () {
                    var a = this,
                        b = this.__inputControl.files[0],
                        c = new FileReader;
                    c.onload = function (b) {
                        a.data = Ue.fromArrayBuffer(b.target.result);
                        a.openFileDialog_onComplete()
                    };
                    c.readAsArrayBuffer(b)
                },
                openFileDialog_onComplete: function () {
                    this.dispatchEvent(new V("complete"))
                },
                get_modificationDate: function () {
                    return this.modificationDate
                },
                get_name: function () {
                    return this.name
                },
                __class__: Of,
                __properties__: {
                    get_name: "get_name",
                    get_modificationDate: "get_modificationDate"
                }
            });
            var dl = function () {
                O.call(this)
            };
            g["openfl.net.NetConnection"] = dl;
            dl.__name__ = "openfl.net.NetConnection";
            dl.__super__ = O;
            dl.prototype = l(O.prototype, {
                __class__: dl
            });
            var el = function (a, b) {
                O.call(this);
                this.__connection = a;
                this.__soundTransform = new xf;
                this.__video = window.document.createElement("video");
                this.__video.setAttribute("playsinline", "");
                this.__video.setAttribute("webkit-playsinline",
                    "");
                this.__video.setAttribute("crossorigin", "anonymous");
                this.__video.addEventListener("error", p(this, this.video_onError), !1);
                this.__video.addEventListener("waiting", p(this, this.video_onWaiting), !1);
                this.__video.addEventListener("ended", p(this, this.video_onEnd), !1);
                this.__video.addEventListener("pause", p(this, this.video_onPause), !1);
                this.__video.addEventListener("seeking", p(this, this.video_onSeeking), !1);
                this.__video.addEventListener("playing", p(this, this.video_onPlaying), !1);
                this.__video.addEventListener("timeupdate",
                    p(this, this.video_onTimeUpdate), !1);
                this.__video.addEventListener("loadstart", p(this, this.video_onLoadStart), !1);
                this.__video.addEventListener("stalled", p(this, this.video_onStalled), !1);
                this.__video.addEventListener("durationchanged", p(this, this.video_onDurationChanged), !1);
                this.__video.addEventListener("canplay", p(this, this.video_onCanPlay), !1);
                this.__video.addEventListener("canplaythrough", p(this, this.video_onCanPlayThrough), !1);
                this.__video.addEventListener("loadedmetadata", p(this, this.video_onLoadMetaData),
                    !1)
            };
            g["openfl.net.NetStream"] = el;
            el.__name__ = "openfl.net.NetStream";
            el.__super__ = O;
            el.prototype = l(O.prototype, {
                __dispatchStatus: function (a) {
                    a = new Gj("netStatus", !1, !1, {
                        code: a
                    });
                    this.__connection.dispatchEvent(a);
                    this.dispatchEvent(a)
                },
                __playStatus: function (a) {
                    if (null != this.__video && null != this.client) try {
                        var b = this.client.onPlayStatus;
                        b({
                            code: a,
                            duration: this.__video.duration,
                            position: this.__video.currentTime,
                            speed: this.__video.playbackRate,
                            start: this.__video.startTime
                        })
                    } catch (c) {
                        Ia.lastError = c
                    }
                },
                video_onCanPlay: function (a) {
                    this.__playStatus("NetStream.Play.canplay")
                },
                video_onCanPlayThrough: function (a) {
                    this.__playStatus("NetStream.Play.canplaythrough")
                },
                video_onDurationChanged: function (a) {
                    this.__playStatus("NetStream.Play.durationchanged")
                },
                video_onEnd: function (a) {
                    this.__dispatchStatus("NetStream.Play.Stop");
                    this.__dispatchStatus("NetStream.Play.Complete");
                    this.__playStatus("NetStream.Play.Complete")
                },
                video_onError: function (a) {
                    this.__dispatchStatus("NetStream.Play.Stop");
                    this.__playStatus("NetStream.Play.error")
                },
                video_onLoadMetaData: function (a) {
                    if (null != this.__video && null != this.client) try {
                        var b = this.client.onMetaData;
                        b({
                            width: this.__video.videoWidth,
                            height: this.__video.videoHeight,
                            duration: this.__video.duration
                        })
                    } catch (c) {
                        Ia.lastError = c
                    }
                },
                video_onLoadStart: function (a) {
                    this.__playStatus("NetStream.Play.loadstart")
                },
                video_onPause: function (a) {
                    this.__playStatus("NetStream.Play.pause")
                },
                video_onPlaying: function (a) {
                    this.__dispatchStatus("NetStream.Play.Start");
                    this.__playStatus("NetStream.Play.playing")
                },
                video_onSeeking: function (a) {
                    this.__playStatus("NetStream.Play.seeking");
                    this.__dispatchStatus("NetStream.Seek.Complete")
                },
                video_onStalled: function (a) {
                    this.__playStatus("NetStream.Play.stalled")
                },
                video_onTimeUpdate: function (a) {
                    null != this.__video && (this.time = this.__video.currentTime, this.__playStatus("NetStream.Play.timeupdate"))
                },
                video_onWaiting: function (a) {
                    this.__playStatus("NetStream.Play.waiting")
                },
                __class__: el
            });
            var oc = function () {
                O.call(this);
                this.client = this;
                this.objectEncoding = oc.defaultObjectEncoding
            };
            g["openfl.net.SharedObject"] = oc;
            oc.__name__ = "openfl.net.SharedObject";
            oc.getLocal = function (a, b, c) {
                c = " ~%&\\;:\"',<>?#".split("");
                var d = !0;
                if (null == a || "" == a) d = !1;
                else
                    for (var e = 0; e < c.length;) {
                        var f = c[e];
                        ++e;
                        if (-1 < a.indexOf(f)) {
                            d = !1;
                            break
                        }
                    }
                if (!d) throw new Fa("Error #2134: Cannot create SharedObject.");
                null == oc.__sharedObjects && (oc.__sharedObjects = new Ha, null != ca.current && ca.current.onExit.add(oc.application_onExit));
                c = b + "/" + a;
                if (!Object.prototype.hasOwnProperty.call(oc.__sharedObjects.h, c)) {
                    d = null;
                    try {
                        var h = Qe.getLocalStorage();
                        null == b && (null != h && (d = h.getItem(window.location.href +
                            ":" + a), h.removeItem(window.location.href + ":" + a)), b = window.location.pathname);
                        null != h && null == d && (d = h.getItem(b + ":" + a))
                    } catch (m) {
                        Ia.lastError = m
                    }
                    h = new oc;
                    h.data = {};
                    h.__localPath = b;
                    h.__name = a;
                    if (null != d && "" != d) try {
                        var g = new Dc(d);
                        g.setResolver({
                            resolveEnum: y.resolveEnum,
                            resolveClass: oc.__resolveClass
                        });
                        h.data = g.unserialize()
                    } catch (m) {
                        Ia.lastError = m
                    }
                    oc.__sharedObjects.h[c] = h
                }
                return oc.__sharedObjects.h[c]
            };
            oc.__resolveClass = function (a) {
                return null != a ? (R.startsWith(a, "neash.") && (a = R.replace(a, "neash.",
                    "openfl.")), R.startsWith(a, "native.") && (a = R.replace(a, "native.", "openfl.")), R.startsWith(a, "flash.") && (a = R.replace(a, "flash.", "openfl.")), R.startsWith(a, "openfl._v2.") && (a = R.replace(a, "openfl._v2.", "openfl.")), R.startsWith(a, "openfl._legacy.") && (a = R.replace(a, "openfl._legacy.", "openfl.")), g[a]) : null
            };
            oc.application_onExit = function (a) {
                a = oc.__sharedObjects.h;
                for (var b = Object.keys(a), c = b.length, d = 0; d < c;) a[b[d++]].flush()
            };
            oc.__super__ = O;
            oc.prototype = l(O.prototype, {
                flush: function (a) {
                    if (0 == M.fields(this.data).length) return 0;
                    a = Sc.run(this.data);
                    try {
                        var b = Qe.getLocalStorage();
                        null != b && (b.removeItem(this.__localPath + ":" + this.__name), b.setItem(this.__localPath + ":" + this.__name, a))
                    } catch (c) {
                        return Ia.lastError = c, 1
                    }
                    return 0
                },
                __class__: oc
            });
            var fl = function (a) {
                O.call(this);
                this.bytesTotal = this.bytesLoaded = 0;
                this.dataFormat = 1;
                null != a && this.load(a)
            };
            g["openfl.net.URLLoader"] = fl;
            fl.__name__ = "openfl.net.URLLoader";
            fl.__super__ = O;
            fl.prototype = l(O.prototype, {
                load: function (a) {
                    var b = this,
                        c = new V("open");
                    this.dispatchEvent(c);
                    0 == this.dataFormat ?
                        (c = new fj, this.__prepareRequest(c, a), c.load().onProgress(p(this, this.httpRequest_onProgress)).onError(p(this, this.httpRequest_onError)).onComplete(function (a) {
                            b.__dispatchResponseStatus();
                            b.__dispatchStatus();
                            b.data = a;
                            a = new V("complete");
                            b.dispatchEvent(a)
                        })) : (c = new $f, this.__prepareRequest(c, a), c.load().onProgress(p(this, this.httpRequest_onProgress)).onError(p(this, this.httpRequest_onError)).onComplete(function (a) {
                            b.__dispatchResponseStatus();
                            b.__dispatchStatus();
                            b.data = a;
                            a = new V("complete");
                            b.dispatchEvent(a)
                        }))
                },
                __dispatchResponseStatus: function () {
                    var a = new gh("httpResponseStatus", !1, !1, this.__httpRequest.responseStatus);
                    a.responseURL = this.__httpRequest.uri;
                    var b = [];
                    if (this.__httpRequest.enableResponseHeaders && null != this.__httpRequest.responseHeaders)
                        for (var c = 0, d = this.__httpRequest.responseHeaders; c < d.length;) {
                            var e = d[c];
                            ++c;
                            b.push(new gl(e.name, e.value))
                        }
                    a.responseHeaders = b;
                    this.dispatchEvent(a)
                },
                __dispatchStatus: function () {
                    var a = new gh("httpStatus", !1, !1, this.__httpRequest.responseStatus);
                    this.dispatchEvent(a)
                },
                __prepareRequest: function (a, b) {
                    this.__httpRequest = a;
                    this.__httpRequest.uri = b.url;
                    this.__httpRequest.method = b.method;
                    if (null != b.data)
                        if (y.typeof(b.data) == Ga.TObject) {
                            var c = M.fields(b.data);
                            for (a = 0; a < c.length;) {
                                var d = c[a];
                                ++a;
                                this.__httpRequest.formData.h[d] = M.field(b.data, d)
                            }
                        } else this.__httpRequest.data = b.data instanceof nb ? b.data : nb.ofString(n.string(b.data));
                    this.__httpRequest.contentType = b.contentType;
                    if (null != b.requestHeaders)
                        for (a = 0, c = b.requestHeaders; a < c.length;) d = c[a], ++a, this.__httpRequest.headers.push(new Yi(d.name,
                            d.value));
                    this.__httpRequest.followRedirects = b.followRedirects;
                    this.__httpRequest.timeout = b.idleTimeout | 0;
                    this.__httpRequest.manageCookies = b.manageCookies;
                    this.__httpRequest.userAgent = b.userAgent;
                    this.__httpRequest.enableResponseHeaders = !0
                },
                httpRequest_onError: function (a) {
                    this.__dispatchResponseStatus();
                    this.__dispatchStatus();
                    this.__httpRequest instanceof Te ? this.data = this.__httpRequest.responseData : this.__httpRequest instanceof $f && (this.data = this.__httpRequest.responseData);
                    var b = 403 == a ? new Ij("securityError") :
                        new hh("ioError");
                    b.text = n.string(a);
                    this.dispatchEvent(b)
                },
                httpRequest_onProgress: function (a, b) {
                    var c = new dg("progress");
                    c.bytesLoaded = a;
                    c.bytesTotal = b;
                    this.dispatchEvent(c)
                },
                __class__: fl
            });
            var hl = function (a) {
                null != a && (this.url = a);
                this.contentType = null;
                this.followRedirects = Ye.followRedirects;
                this.idleTimeout = 0 < Ye.idleTimeout ? Ye.idleTimeout : 3E4;
                this.manageCookies = Ye.manageCookies;
                this.method = "GET";
                this.requestHeaders = [];
                this.userAgent = Ye.userAgent
            };
            g["openfl.net.URLRequest"] = hl;
            hl.__name__ = "openfl.net.URLRequest";
            hl.prototype = {
                __class__: hl
            };
            var Ye = function () {
            };
            g["openfl.net.URLRequestDefaults"] = Ye;
            Ye.__name__ = "openfl.net.URLRequestDefaults";
            var gl = function (a, b) {
                null == b && (b = "");
                null == a && (a = "");
                this.name = a;
                this.value = b
            };
            g["openfl.net.URLRequestHeader"] = gl;
            gl.__name__ = "openfl.net.URLRequestHeader";
            gl.prototype = {
                __class__: gl
            };
            var cg = function (a) {
                this.parentDomain = null != a ? a : cg.currentDomain
            };
            g["openfl.system.ApplicationDomain"] = cg;
            cg.__name__ = "openfl.system.ApplicationDomain";
            cg.prototype = {
                __class__: cg
            };
            var il =
                function () {
                    O.call(this);
                    this.clear()
                };
            g["openfl.text.StyleSheet"] = il;
            il.__name__ = "openfl.text.StyleSheet";
            il.__super__ = O;
            il.prototype = l(O.prototype, {
                clear: function () {
                    this.__styleNamesDirty = !1;
                    this.__styleNames = null;
                    this.__styles = new Ha
                },
                __applyStyle: function (a, b) {
                    a = a.toLowerCase();
                    Object.prototype.hasOwnProperty.call(this.__styles.h, a) && this.__applyStyleObject(this.__styles.h[a], b)
                },
                __applyStyleObject: function (a, b) {
                    if (null != a) {
                        var c = new ra("[0-9A-Fa-f]+", ""),
                            d = new ra("[0-9]+", "");
                        var e = a;
                        null != e &&
                        Object.prototype.hasOwnProperty.call(e, "color") ? (e = wd.__get(a, "color"), e = c.match(null == e ? null : n.string(e))) : e = !1;
                        e && (b.color = n.parseInt("0x" + c.matched(0)));
                        e = a;
                        null != e && Object.prototype.hasOwnProperty.call(e, "fontFamily") && (e = wd.__get(a, "fontFamily"), b.font = this.__parseFont(null == e ? null : n.string(e)));
                        e = a;
                        null != e && Object.prototype.hasOwnProperty.call(e, "fontSize") ? (e = wd.__get(a, "fontSize"), e = d.match(null == e ? null : n.string(e))) : e = !1;
                        e && (b.size = n.parseInt(d.matched(0)));
                        e = a;
                        if (null != e && Object.prototype.hasOwnProperty.call(e,
                            "fontStyle")) switch (wd.__get(a, "fontStyle")) {
                            case "italic":
                                b.italic = !0;
                                break;
                            case "normal":
                                b.italic = !1
                        }
                        e = a;
                        if (null != e && Object.prototype.hasOwnProperty.call(e, "fontWeight")) switch (wd.__get(a, "fontWeight")) {
                            case "bold":
                                b.bold = !0;
                                break;
                            case "normal":
                                b.bold = !1
                        }
                        e = a;
                        null != e && Object.prototype.hasOwnProperty.call(e, "leading") ? (e = wd.__get(a, "leading"), e = d.match(null == e ? null : n.string(e))) : e = !1;
                        e && (b.leading = n.parseInt(d.matched(0)));
                        e = a;
                        null != e && Object.prototype.hasOwnProperty.call(e, "letterSpacing") ? (e = wd.__get(a,
                            "letterSpacing"), e = d.match(null == e ? null : n.string(e))) : e = !1;
                        e && (b.letterSpacing = parseFloat(d.matched(0)));
                        e = a;
                        null != e && Object.prototype.hasOwnProperty.call(e, "marginLeft") ? (e = wd.__get(a, "marginLeft"), e = d.match(null == e ? null : n.string(e))) : e = !1;
                        e && (b.leftMargin = n.parseInt(d.matched(0)));
                        e = a;
                        null != e && Object.prototype.hasOwnProperty.call(e, "marginRight") ? (e = wd.__get(a, "marginRight"), e = d.match(null == e ? null : n.string(e))) : e = !1;
                        e && (b.rightMargin = n.parseInt(d.matched(0)));
                        e = a;
                        if (null != e && Object.prototype.hasOwnProperty.call(e,
                            "textAlign")) switch (wd.__get(a, "textAlign")) {
                            case "center":
                                b.align = 0;
                                break;
                            case "justify":
                                b.align = 2;
                                break;
                            case "left":
                                b.align = 3;
                                break;
                            case "right":
                                b.align = 4
                        }
                        e = a;
                        if (null != e && Object.prototype.hasOwnProperty.call(e, "textDecoration")) switch (wd.__get(a, "textDecoration")) {
                            case "none":
                                b.underline = !1;
                                break;
                            case "underline":
                                b.underline = !0
                        }
                        e = a;
                        null != e && Object.prototype.hasOwnProperty.call(e, "textIndent") ? (e = wd.__get(a, "textIndent"), e = d.match(null == e ? null : n.string(e))) : e = !1;
                        e && (b.blockIndent = n.parseInt(d.matched(0)))
                    }
                },
                __parseFont: function (a) {
                    if (null == a) return null;
                    -
                        1 < a.indexOf(",") && (a = ja.substr(a, 0, a.indexOf(",")));
                    switch (a) {
                        case "mono":
                            return "_typewriter";
                        case "sans-serif":
                            return "_sans";
                        case "serif":
                            return "_serif";
                        default:
                            return a
                    }
                },
                __class__: il
            });
            var Ac = function () {
                this.__renderedOnCanvasWhileOnDOM = this.__forceCachedBitmapUpdate = !1;
                this.__mouseScrollVCounter = 0;
                this.condenseWhite = !1;
                X.call(this);
                this.__drawableType = 7;
                this.__selectionIndex = this.__caretIndex = -1;
                this.__displayAsPassword = !1;
                this.__graphics = new Tc(this);
                this.__textEngine = new lb(this);
                this.__layoutDirty = !0;
                this.__offsetY = this.__offsetX = 0;
                this.__mouseWheelEnabled = !0;
                this.__text = "";
                this.doubleClickEnabled = !0;
                null == Ac.__defaultTextFormat && (Ac.__defaultTextFormat = new Ne("Times New Roman", 12, 0, !1, !1, !1, "", "", 3, 0, 0, 0, 0), Ac.__defaultTextFormat.blockIndent = 0, Ac.__defaultTextFormat.bullet = !1, Ac.__defaultTextFormat.letterSpacing = 0, Ac.__defaultTextFormat.kerning = !1);
                this.__textFormat = Ac.__defaultTextFormat.clone();
                this.__textEngine.textFormatRanges.push(new Ic(this.__textFormat,
                    0, 0));
                this.addEventListener("mouseDown", p(this, this.this_onMouseDown));
                this.addEventListener("focusIn", p(this, this.this_onFocusIn));
                this.addEventListener("focusOut", p(this, this.this_onFocusOut));
                this.addEventListener("keyDown", p(this, this.this_onKeyDown));
                this.addEventListener("mouseWheel", p(this, this.this_onMouseWheel));
                this.addEventListener("doubleClick", p(this, this.this_onDoubleClick))
            };
            g["openfl.text.TextField"] = Ac;
            Ac.__name__ = "openfl.text.TextField";
            Ac.__super__ = X;
            Ac.prototype = l(X.prototype, {
                getCharBoundaries: function (a) {
                    if (0 > a || a > this.__text.length - 1) return null;
                    var b = new ha;
                    return this.__getCharBoundaries(a, b) ? b : null
                },
                getLineIndexOfChar: function (a) {
                    if (0 > a || a > this.__text.length) return -1;
                    this.__updateLayout();
                    for (var b = this.__textEngine.layoutGroups.iterator(); b.hasNext();) {
                        var c = b.next();
                        if (c.startIndex <= a && c.endIndex >= a) return c.lineIndex
                    }
                    return -1
                },
                getLineLength: function (a) {
                    this.__updateLayout();
                    if (0 > a || a > this.__textEngine.numLines - 1) return 0;
                    for (var b = -1, c = -1, d = this.__textEngine.layoutGroups.iterator(); d.hasNext();) {
                        var e =
                            d.next();
                        if (e.lineIndex == a) -1 == b && (b = e.startIndex);
                        else if (e.lineIndex == a + 1) {
                            c = e.startIndex;
                            break
                        }
                    }
                    -
                        1 == c && (c = this.__text.length);
                    return c - b
                },
                getLineOffset: function (a) {
                    this.__updateLayout();
                    if (0 > a || a > this.__textEngine.numLines - 1) return -1;
                    for (var b = this.__textEngine.layoutGroups.iterator(); b.hasNext();) {
                        var c = b.next();
                        if (c.lineIndex == a) return c.startIndex
                    }
                    return 0
                },
                replaceSelectedText: function (a) {
                    this.__replaceSelectedText(a, !1)
                },
                replaceText: function (a, b, c) {
                    this.__replaceText(a, b, c, !1)
                },
                setSelection: function (a,
                                        b) {
                    this.__selectionIndex = a;
                    this.__caretIndex = b;
                    this.__updateScrollV();
                    this.__updateScrollH();
                    null != this.stage && this.stage.get_focus() == this && (this.__stopCursorTimer(), this.__startCursorTimer())
                },
                setTextFormat: function (a, b, c) {
                    null == c && (c = -1);
                    null == b && (b = -1);
                    var d = this.get_text().length;
                    -
                        1 == b ? (-1 == c && (c = d), b = 0) : -1 == c && (c = b + 1);
                    if (b != c) {
                        if (0 > b || 0 >= c || c < b || b >= d || c > d) throw new tg;
                        if (0 == b && c == d) {
                            this.__textEngine.textFormatRanges.set_length(1);
                            var e = this.__textEngine.textFormatRanges.get(0);
                            e.start = 0;
                            e.end =
                                d;
                            e.format.__merge(a)
                        } else {
                            d = 0;
                            for (var f; d < this.__textEngine.textFormatRanges.get_length();)
                                if (e = this.__textEngine.textFormatRanges.get(d), e.end <= b) ++d;
                                else if (e.start >= c) break;
                                else if (e.start <= b && e.end >= c)
                                    if (e.start == b && e.end == c) {
                                        e.format = e.format.clone();
                                        e.format.__merge(a);
                                        break
                                    } else if (e.start == b) f = new Ic(e.format.clone(), b, c), f.format.__merge(a), this.__textEngine.textFormatRanges.insertAt(d, f), e.start = c, d += 2;
                                    else {
                                        e.end == c ? (f = new Ic(e.format.clone(), b, c), f.format.__merge(a), this.__textEngine.textFormatRanges.insertAt(d +
                                            1, f)) : (f = new Ic(e.format.clone(), b, c), f.format.__merge(a), this.__textEngine.textFormatRanges.insertAt(d + 1, f), f = new Ic(e.format.clone(), c, e.end), this.__textEngine.textFormatRanges.insertAt(d + 2, f));
                                        e.end = b;
                                        break
                                    } else if (e.start >= b && e.end <= c) e.start == b ? (e.format = e.format.clone(), e.format.__merge(a), e.end = c) : this.__textEngine.textFormatRanges.removeAt(d);
                                else if (e.start > b && e.end > b) {
                                    e.start = c;
                                    break
                                } else e.start < b && e.end <= c ? (f = new Ic(e.format.clone(), b, c), f.format.__merge(a), this.__textEngine.textFormatRanges.insertAt(d +
                                    1, f), e.end = b, d += 2) : (++d, ua.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {

                                    className: "openfl.text.TextField",
                                    methodName: "setTextFormat"
                                }))
                        }
                        this.__layoutDirty = this.__dirty = !0;
                        this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty())
                    }
                },
                __allowMouseFocus: function () {
                    return this.mouseEnabled
                },
                __caretBeginningOfLine: function () {
                    this.__caretIndex = this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex))
                },
                __caretBeginningOfNextLine: function () {
                    var a = this.getLineIndexOfChar(this.__caretIndex);
                    this.__caretIndex = a < this.__textEngine.numLines - 1 ? this.getLineOffset(a + 1) : this.__text.length
                },
                __caretBeginningOfPreviousLine: function () {
                    var a = this.getLineIndexOfChar(this.__caretIndex);
                    if (0 < a) {
                        var b = this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex));
                        this.__caretIndex = this.__caretIndex == b ? this.getLineOffset(a - 1) : b
                    }
                },
                __caretEndOfLine: function () {
                    var a = this.getLineIndexOfChar(this.__caretIndex);
                    this.__caretIndex =
                        a < this.__textEngine.numLines - 1 ? this.getLineOffset(a + 1) - 1 : this.__text.length
                },
                __caretNextCharacter: function () {
                    this.__caretIndex < this.__text.length && this.__caretIndex++
                },
                __caretNextLine: function () {
                    var a = this.getLineIndexOfChar(this.__caretIndex);
                    a < this.__textEngine.numLines - 1 && (this.__caretIndex = this.__getCharIndexOnDifferentLine(this.get_caretIndex(), a + 1))
                },
                __caretPreviousCharacter: function () {
                    0 < this.__caretIndex && this.__caretIndex--
                },
                __caretPreviousLine: function () {
                    var a = this.getLineIndexOfChar(this.__caretIndex);
                    0 < a && (this.__caretIndex = this.__getCharIndexOnDifferentLine(this.get_caretIndex(), a - 1))
                },
                __disableInput: function () {
                    this.__inputEnabled && null != this.stage && (this.stage.window.__backend.setTextInputEnabled(!1), this.stage.window.onTextInput.remove(p(this, this.window_onTextInput)), this.stage.window.onKeyDown.remove(p(this, this.window_onKeyDown)), this.__inputEnabled = !1, this.__stopCursorTimer())
                },
                __dispatch: function (a) {
                    if (2 == a.eventPhase && "mouseUp" == a.type) {
                        var b = this.__getGroup(this.get_mouseX(), this.get_mouseY(),
                            !0);
                        null != b && (b = b.format.url, null != b && "" != b && (R.startsWith(b, "event:") ? this.dispatchEvent(new be("link", !0, !1, ja.substr(b, 6, null))) : Na.getURL(new hl(b))))
                    }
                    return X.prototype.__dispatch.call(this, a)
                },
                __enableInput: function () {
                    if (null != this.stage) {
                        var a = this.getBounds(this.stage);
                        a = new Mc(a.x, a.y, a.width, a.height);
                        this.stage.window.setTextInputRect(a);
                        this.stage.window.__backend.setTextInputEnabled(!0);
                        this.__inputEnabled || (this.stage.window.__backend.setTextInputEnabled(!0), this.stage.window.onTextInput.has(p(this,
                            this.window_onTextInput)) || (this.stage.window.onTextInput.add(p(this, this.window_onTextInput)), this.stage.window.onKeyDown.add(p(this, this.window_onKeyDown))), this.__inputEnabled = !0, this.__stopCursorTimer(), this.__startCursorTimer())
                    }
                },
                __getBounds: function (a, b) {
                    this.__updateLayout();
                    var c = ha.__pool.get();
                    c.copyFrom(this.__textEngine.bounds);
                    c.offset(this.__offsetX, this.__offsetY);
                    c.__transform(c, b);
                    a.__expand(c.x, c.y, c.width, c.height);
                    ha.__pool.release(c)
                },
                __getCharBoundaries: function (a, b) {
                    if (0 > a ||
                        a > this.__text.length - 1) return !1;
                    this.__updateLayout();
                    for (var c = this.__textEngine.layoutGroups.iterator(); c.hasNext();) {
                        var d = c.next();
                        if (a >= d.startIndex && a < d.endIndex) try {
                            for (var e = d.offsetX, f = 0, h = a - d.startIndex; f < h;) {
                                var g = f++;
                                e += d.positions[g]
                            }
                            b.setTo(e, d.offsetY, d.positions[a - d.startIndex], d.ascent + d.descent);
                            return !0
                        } catch (m) {
                            Ia.lastError = m
                        }
                    }
                    return !1
                },
                __getCharIndexOnDifferentLine: function (a, b) {
                    if (0 > a || a > this.__text.length || 0 > b || b > this.__textEngine.numLines - 1) return -1;
                    for (var c = null, d = null, e =
                        this.__textEngine.layoutGroups.iterator(); e.hasNext();) {
                        var f = e.next();
                        if (a >= f.startIndex && a <= f.endIndex) {
                            c = f.offsetX;
                            for (var h = 0, g = a - f.startIndex; h < g;) {
                                var m = h++;
                                c += f.positions[m]
                            }
                            if (null != d) return this.__getPosition(c, d)
                        }
                        if (f.lineIndex == b) {
                            d = f.offsetY + f.height / 2;
                            f = 0;
                            for (h = this.get_scrollV() - 1; f < h;) g = f++, d -= this.__textEngine.lineHeights.get(g);
                            if (null != c) return this.__getPosition(c, d)
                        }
                    }
                    return -1
                },
                __getCursor: function () {
                    var a = this.__getGroup(this.get_mouseX(), this.get_mouseY(), !0);
                    return null != a &&
                    "" != a.format.url ? "button" : this.__textEngine.selectable ? "ibeam" : null
                },
                __getGroup: function (a, b, c) {
                    null == c && (c = !1);
                    this.__updateLayout();
                    a += this.get_scrollH();
                    for (var d = 0, e = this.get_scrollV() - 1; d < e;) {
                        var f = d++;
                        b += this.__textEngine.lineHeights.get(f)
                    }
                    !c && b > this.__textEngine.textHeight && (b = this.__textEngine.textHeight);
                    var h = !0;
                    d = 0;
                    for (e = this.__textEngine.layoutGroups.get_length(); d < e;) {
                        f = d++;
                        var g = this.__textEngine.layoutGroups.get(f);
                        f = f < this.__textEngine.layoutGroups.get_length() - 1 ? this.__textEngine.layoutGroups.get(f +
                            1) : null;
                        h && (b < g.offsetY && (b = g.offsetY), a < g.offsetX && (a = g.offsetX), h = !1);
                        if (b >= g.offsetY && b <= g.offsetY + g.height || !c && null == f)
                            if (a >= g.offsetX && a <= g.offsetX + g.width || !c && (null == f || f.lineIndex != g.lineIndex)) return g
                    }
                    return null
                },
                __getPosition: function (a, b) {
                    b = this.__getGroup(a, b);
                    if (null == b) return this.__text.length;
                    for (var c = 0, d = 0, e = b.positions.length; d < e;) {
                        var f = d++;
                        c += b.positions[f];
                        if (a <= b.offsetX + c) {
                            if (a <= b.offsetX + (c - b.positions[f]) + b.positions[f] / 2) return b.startIndex + f;
                            if (b.startIndex + f < b.endIndex) return b.startIndex +
                                f + 1;
                            break
                        }
                    }
                    return b.endIndex
                },
                __hitTest: function (a, b, c, d, e, f) {
                    if (!f.get_visible() || this.__isMask || e && !this.mouseEnabled || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b)) return !1;
                    this.__getRenderTransform();
                    this.__updateLayout();
                    c = this.__renderTransform;
                    e = c.a * c.d - c.b * c.c;
                    var h = 0 == e ? -c.tx : 1 / e * (c.c * (c.ty - b) + c.d * (a - c.tx));
                    c = this.__renderTransform;
                    e = c.a * c.d - c.b * c.c;
                    return this.__textEngine.bounds.contains(h, 0 == e ? -c.ty : 1 / e * (c.a * (b - c.ty) + c.b * (c.tx - a))) ? (null != d && d.push(f), !0) : !1
                },
                __hitTestMask: function (a,
                                         b) {
                    this.__getRenderTransform();
                    this.__updateLayout();
                    var c = this.__renderTransform,
                        d = c.a * c.d - c.b * c.c,
                        e = 0 == d ? -c.tx : 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx));
                    c = this.__renderTransform;
                    d = c.a * c.d - c.b * c.c;
                    return this.__textEngine.bounds.contains(e, 0 == d ? -c.ty : 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a))) ? !0 : !1
                },
                __replaceSelectedText: function (a, b) {
                    null == b && (b = !0);
                    null == a && (a = "");
                    if ("" != a || this.__selectionIndex != this.__caretIndex) {
                        var c = this.__caretIndex < this.__selectionIndex ? this.__caretIndex : this.__selectionIndex,
                            d = this.__caretIndex >
                            this.__selectionIndex ? this.__caretIndex : this.__selectionIndex;
                        if (!(c == d && 0 < this.__textEngine.maxChars && this.__text.length == this.__textEngine.maxChars)) {
                            c > this.__text.length && (c = this.__text.length);
                            d > this.__text.length && (d = this.__text.length);
                            if (d < c) {
                                var e = d;
                                d = c;
                                c = e
                            }
                            0 > c && (c = 0);
                            this.__replaceText(c, d, a, b)
                        }
                    }
                },
                __replaceText: function (a, b, c, d) {
                    if (!(b < a || 0 > a || b > this.__text.length || null == c)) {
                        d && (c = this.__textEngine.restrictText(c), 0 < this.__textEngine.maxChars && (d = this.__textEngine.maxChars - this.__text.length +
                            (b - a), 0 >= d ? c = "" : d < c.length && (c = ja.substr(c, 0, d))));
                        this.__updateText(this.__text.substring(0, a) + c + this.__text.substring(b));
                        d = c.length - (b - a);
                        for (var e = 0, f; e < this.__textEngine.textFormatRanges.get_length();) {
                            f = this.__textEngine.textFormatRanges.get(e);
                            if (a == b) f.start == f.end ? 0 != f.start ? ua.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {

                                className: "openfl.text.TextField",
                                methodName: "__replaceText"
                            }) : f.end += d : f.end >= a && (f.start >= a ? (f.start += d, f.end += d) : f.start < a && f.end >= b && (f.end += d));
                            else if (f.end > a)
                                if (f.start > b) f.start += d, f.end += d;
                                else if (f.start <= a && f.end > b) f.end += d;
                                else if (f.start >= a && f.end <= b) {
                                    f = this.__textEngine.textFormatRanges;
                                    f.__tempIndex = e--;
                                    for (var h = 0, g = []; h < g.length;) {
                                        var m = g[h++];
                                        f.insertAt(f.__tempIndex, m);
                                        f.__tempIndex++
                                    }
                                    f.splice(f.__tempIndex, 1)
                                } else f.end > b && f.start > a && f.start <= b ? (f.start = a, f.end += d) : f.start < a && f.end > a && f.end <= b && (f.end = a);
                            ++e
                        }
                        0 ==
                        this.__textEngine.textFormatRanges.get_length() ? this.__textEngine.textFormatRanges.push(new Ic(this.get_defaultTextFormat().clone(), 0, c.length)) : a == b && 0 < this.__textEngine.textFormatRanges.get(0).start ? this.__textEngine.textFormatRanges.unshift(new Ic(this.get_defaultTextFormat().clone(), 0, this.__textEngine.textFormatRanges.get(0).start)) : a != b && this.__textEngine.textFormatRanges.get(this.__textEngine.textFormatRanges.get_length() - 1).end < this.__text.length && this.__textEngine.textFormatRanges.push(new Ic(this.get_defaultTextFormat().clone(),
                            this.__textEngine.textFormatRanges.get(this.__textEngine.textFormatRanges.get_length() - 1).end, this.__text.length));
                        this.__selectionIndex = this.__caretIndex = a + c.length;
                        this.__layoutDirty = this.__dirty = !0;
                        this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty())
                    }
                },
                __startCursorTimer: function () {
                    1 == this.get_type() ? (this.__inputEnabled && (this.__cursorTimer = se.delay(p(this, this.__startCursorTimer), 600), this.__showCursor = !this.__showCursor), this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty())) : this.get_selectable() && (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()))
                },
                __startTextInput: function () {
                    0 > this.__caretIndex && (this.__selectionIndex = this.__caretIndex = this.__text.length);
                    (da.__supportDOM ? this.__renderedOnCanvasWhileOnDOM : 1) && this.__enableInput()
                },
                __stopCursorTimer: function () {
                    null != this.__cursorTimer && (this.__cursorTimer.stop(), this.__cursorTimer = null);
                    this.__showCursor && (this.__showCursor = !1, this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()))
                },
                __stopTextInput: function () {
                    (da.__supportDOM ? this.__renderedOnCanvasWhileOnDOM : 1) && this.__disableInput()
                },
                __updateLayout: function () {
                    if (this.__layoutDirty) {
                        var a = this.__textEngine.width;
                        this.__textEngine.update();
                        if (2 != this.__textEngine.autoSize) {
                            if (this.__textEngine.width != a) switch (this.__textEngine.autoSize) {
                                case 0:
                                    this.set_x(this.get_x() + (a - this.__textEngine.width) / 2);
                                    break;
                                case 3:
                                    this.set_x(this.get_x() + (a - this.__textEngine.width))
                            }
                            this.__textEngine.getBounds()
                        }
                        this.__layoutDirty = !1;
                        this.setSelection(this.__selectionIndex, this.__caretIndex)
                    }
                },
                __updateMouseDrag: function () {
                    if (null != this.stage) {
                        var a = this.getBounds(this);
                        this.get_mouseX() > a.width - 1 ? this.set_scrollH(this.get_scrollH() + (Math.max(Math.min(.1 * (this.get_mouseX() - a.width), 10), 1) | 0)) : 1 > this.get_mouseX() && this.set_scrollH(this.get_scrollH() - (Math.max(Math.min(-.1 * this.get_mouseX(), 10), 1) | 0));
                        this.__mouseScrollVCounter++;
                        this.__mouseScrollVCounter > this.stage.get_frameRate() / 10 && (this.get_mouseY() > a.height - 2 ? this.set_scrollV(Math.min(this.get_scrollV() +
                            Math.max(Math.min(.03 * (this.get_mouseY() - a.height), 5), 1), this.get_maxScrollV()) | 0) : 2 > this.get_mouseY() && this.set_scrollV(this.get_scrollV() - (Math.max(Math.min(-.03 * this.get_mouseY(), 5), 1) | 0)), this.__mouseScrollVCounter = 0);
                        this.stage_onMouseMove(null)
                    }
                },
                __updateScrollH: function () {
                    this.__updateLayout();
                    var a = this.getBounds(this);
                    if (this.get_textWidth() <= a.width - 4) this.set_scrollH(0);
                    else {
                        var b = this.get_scrollH();
                        if (0 == this.__caretIndex || this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex)) ==
                            this.__caretIndex) b = 0;
                        else {
                            var c = ha.__pool.get(),
                                d = !1;
                            this.__caretIndex < this.__text.length && (d = this.__getCharBoundaries(this.__caretIndex, c));
                            d || (this.__getCharBoundaries(this.__caretIndex - 1, c), c.x += c.width);
                            for (; c.x < b && 0 < b;) b -= 24;
                            for (; c.x > b + a.width - 4;) b += 24;
                            ha.__pool.release(c)
                        }
                        0 < b && 1 != this.get_type() && (c = this.getLineLength(this.getLineIndexOfChar(this.__caretIndex)), this.get_scrollH() + a.width - 4 > c && this.set_scrollH(Math.ceil(c - a.width + 4)));
                        0 > b ? this.set_scrollH(0) : b > this.get_maxScrollH() ? this.set_scrollH(this.get_maxScrollH()) :
                            this.set_scrollH(b)
                    }
                },
                __updateScrollV: function () {
                    this.__updateLayout();
                    if (this.get_textHeight() <= this.get_height() - 4) this.set_scrollV(1);
                    else {
                        var a = this.getLineIndexOfChar(this.__caretIndex);
                        -
                            1 == a && 0 < this.__caretIndex && (a = this.getLineIndexOfChar(this.__caretIndex - 1) + 1);
                        if (a + 1 < this.get_scrollV()) this.set_scrollV(a + 1);
                        else if (a + 1 > this.get_bottomScrollV()) {
                            var b = 0;
                            for (a >= this.__textEngine.lineHeights.get_length() && (a = this.__textEngine.lineHeights.get_length() - 1); 0 <= a;) {
                                b += this.__textEngine.lineHeights.get(a);
                                if (b > this.get_height() - 4) {
                                    a += 0 > b - this.get_height() ? 1 : 2;
                                    break
                                }
                                --a
                            }
                            this.set_scrollV(a)
                        } else this.set_scrollV(this.get_scrollV())
                    }
                },
                __updateText: function (a) {
                    da.__supportDOM && this.__renderedOnCanvasWhileOnDOM && (this.__forceCachedBitmapUpdate = this.__text != a);
                    this.__textEngine.set_text(a);
                    this.__text = this.__textEngine.text;
                    null != this.stage && this.stage.get_focus() == this ? (this.__text.length < this.__selectionIndex && (this.__selectionIndex = this.__text.length), this.__text.length < this.__caretIndex && (this.__caretIndex =
                        this.__text.length)) : this.__isHTML ? this.__selectionIndex = this.__caretIndex = this.__text.length : this.__caretIndex = this.__selectionIndex = 0;
                    if (!this.__displayAsPassword || da.__supportDOM && !this.__renderedOnCanvasWhileOnDOM) this.__textEngine.set_text(this.__text);
                    else {
                        a = "";
                        for (var b = 0, c = this.get_text().length; b < c;) b++, a += "*";
                        this.__textEngine.set_text(a)
                    }
                },
                __updateTransforms: function (a) {
                    X.prototype.__updateTransforms.call(this, a);
                    a = this.__renderTransform;
                    var b = this.__offsetX,
                        c = this.__offsetY;
                    a.tx = b * a.a +
                        c * a.c + a.tx;
                    a.ty = b * a.b + c * a.d + a.ty
                },
                set_autoSize: function (a) {
                    a != this.__textEngine.autoSize && (this.__layoutDirty = this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    return this.__textEngine.autoSize = a
                },
                set_background: function (a) {
                    a != this.__textEngine.background && (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    return this.__textEngine.background = a
                },
                set_backgroundColor: function (a) {
                    a != this.__textEngine.backgroundColor && (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    return this.__textEngine.backgroundColor = a
                },
                set_border: function (a) {
                    a != this.__textEngine.border && (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    return this.__textEngine.border = a
                },
                set_borderColor: function (a) {
                    a != this.__textEngine.borderColor && (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    return this.__textEngine.borderColor = a
                },
                get_bottomScrollV: function () {
                    this.__updateLayout();
                    return this.__textEngine.get_bottomScrollV()
                },
                get_caretIndex: function () {
                    return this.__caretIndex
                },
                get_defaultTextFormat: function () {
                    return this.__textFormat.clone()
                },
                set_defaultTextFormat: function (a) {
                    this.__textFormat.__merge(a);
                    this.__dirty = this.__layoutDirty = !0;
                    this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty());
                    return a
                },
                get_displayAsPassword: function () {
                    return this.__displayAsPassword
                },
                get_height: function () {
                    this.__updateLayout();
                    return this.__textEngine.height * Math.abs(this.get_scaleY())
                },
                set_height: function (a) {
                    a != this.__textEngine.height && (this.__setTransformDirty(), this.__layoutDirty = this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()), this.__textEngine.height = a);
                    return this.__textEngine.height * Math.abs(this.get_scaleY())
                },
                get_htmlText: function () {
                    return this.__isHTML ? this.__htmlText : this.__text
                },
                set_htmlText: function (a) {
                    this.__isHTML && this.__text == a || (this.__layoutDirty = this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    this.__isHTML = !0;
                    this.condenseWhite && (a = a.replace(/\s+/g, " "));
                    this.__htmlText = a;
                    a = ya.parse(a, this.get_multiline(), this.__styleSheet, this.__textFormat, this.__textEngine.textFormatRanges);
                    this.__updateText(a);
                    return a
                },
                get_length: function () {
                    return null != this.__text ? this.__text.length : 0
                },
                get_maxScrollH: function () {
                    this.__updateLayout();
                    return this.__textEngine.maxScrollH
                },
                get_maxScrollV: function () {
                    this.__updateLayout();
                    return this.__textEngine.get_maxScrollV()
                },
                get_mouseWheelEnabled: function () {
                    return this.__mouseWheelEnabled
                },
                get_multiline: function () {
                    return this.__textEngine.multiline
                },
                set_restrict: function (a) {
                    this.__textEngine.restrict != a && (this.__textEngine.set_restrict(a), this.__updateText(this.__text));
                    return a
                },
                get_scrollH: function () {
                    return this.__textEngine.scrollH
                },
                set_scrollH: function (a) {
                    this.__updateLayout();
                    a > this.__textEngine.maxScrollH && (a = this.__textEngine.maxScrollH);
                    0 > a && (a = 0);
                    a != this.__textEngine.scrollH && (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()), this.__textEngine.scrollH =
                        a, this.dispatchEvent(new V("scroll")));
                    return this.__textEngine.scrollH
                },
                get_scrollV: function () {
                    return this.__textEngine.get_scrollV()
                },
                set_scrollV: function (a) {
                    this.__updateLayout();
                    a > this.__textEngine.get_maxScrollV() && (a = this.__textEngine.get_maxScrollV());
                    1 > a && (a = 1);
                    if (a != this.__textEngine.get_scrollV() || 0 == this.__textEngine.get_scrollV()) this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()), this.__textEngine.set_scrollV(a), this.dispatchEvent(new V("scroll"));
                    return this.__textEngine.get_scrollV()
                },
                get_selectable: function () {
                    return this.__textEngine.selectable
                },
                set_selectable: function (a) {
                    a != this.__textEngine.selectable && 1 == this.get_type() && (null != this.stage && this.stage.get_focus() == this ? this.__startTextInput() : a || this.__stopTextInput());
                    return this.__textEngine.selectable = a
                },
                get_tabEnabled: function () {
                    return null == this.__tabEnabled ? 1 == this.__textEngine.type : this.__tabEnabled
                },
                get_text: function () {
                    return this.__text
                },
                set_text: function (a) {
                    if (null != this.__styleSheet) return this.set_htmlText(a);
                    if (this.__isHTML || this.__text != a) this.__layoutDirty = this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty());
                    else return a;
                    if (1 < this.__textEngine.textFormatRanges.get_length()) {
                        var b = this.__textEngine.textFormatRanges,
                            c = this.__textEngine.textFormatRanges.get_length() - 1;
                        b.__tempIndex = 1;
                        for (var d = 0, e = []; d < e.length;) {
                            var f = e[d++];
                            b.insertAt(b.__tempIndex, f);
                            b.__tempIndex++
                        }
                        b.splice(b.__tempIndex, c)
                    }
                    b = this.__textEngine.textFormatRanges.get(0);
                    b.format = this.__textFormat;
                    b.start = 0;
                    b.end = a.length;
                    this.__isHTML = !1;
                    this.__updateText(a);
                    return a
                },
                get_textWidth: function () {
                    this.__updateLayout();
                    return this.__textEngine.textWidth
                },
                get_textHeight: function () {
                    this.__updateLayout();
                    return this.__textEngine.textHeight
                },
                get_type: function () {
                    return this.__textEngine.type
                },
                set_type: function (a) {
                    null != this.__styleSheet && (a = 0);
                    a != this.__textEngine.type && (this.__textEngine.type = a, 1 == a ? (this.addEventListener("addedToStage", p(this, this.this_onAddedToStage)), this.this_onFocusIn(null), this.__textEngine.__useIntAdvances = !0) : (this.removeEventListener("addedToStage", p(this, this.this_onAddedToStage)), this.__stopTextInput(), this.__textEngine.__useIntAdvances = null), this.__layoutDirty = this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    return this.__textEngine.type
                },
                get_width: function () {
                    this.__updateLayout();
                    return this.__textEngine.width * Math.abs(this.__scaleX)
                },
                set_width: function (a) {
                    a != this.__textEngine.width && (this.__setTransformDirty(), this.__layoutDirty = this.__dirty = !0, this.__renderDirty ||
                    (this.__renderDirty = !0, this.__setParentRenderDirty()), this.__textEngine.width = a);
                    return this.__textEngine.width * Math.abs(this.__scaleX)
                },
                set_wordWrap: function (a) {
                    a != this.__textEngine.wordWrap && (this.__layoutDirty = this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    return this.__textEngine.wordWrap = a
                },
                get_x: function () {
                    return this.__transform.tx + this.__offsetX
                },
                set_x: function (a) {
                    a != this.__transform.tx + this.__offsetX && this.__setTransformDirty();
                    this.__transform.tx =
                        a - this.__offsetX;
                    return a
                },
                get_y: function () {
                    return this.__transform.ty + this.__offsetY
                },
                set_y: function (a) {
                    a != this.__transform.ty + this.__offsetY && this.__setTransformDirty();
                    this.__transform.ty = a - this.__offsetY;
                    return a
                },
                stage_onMouseMove: function (a) {
                    null != this.stage && this.get_selectable() && 0 <= this.__selectionIndex && (this.__updateLayout(), a = this.__getPosition(this.get_mouseX() + this.get_scrollH(), this.get_mouseY()), a != this.__caretIndex && (this.__caretIndex = a, a = !0, da.__supportDOM && (this.__renderedOnCanvasWhileOnDOM &&
                    (this.__forceCachedBitmapUpdate = !0), a = !1), a && (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()))))
                },
                stage_onMouseUp: function (a) {
                    a = a.currentTarget;
                    a.removeEventListener("enterFrame", p(this, this.this_onEnterFrame));
                    a.removeEventListener("mouseMove", p(this, this.stage_onMouseMove));
                    a.removeEventListener("mouseUp", p(this, this.stage_onMouseUp));
                    if (this.stage == a && a.get_focus() == this) {
                        this.__getWorldTransform();
                        this.__updateLayout();
                        a = this.__getPosition(this.get_mouseX() +
                            this.get_scrollH(), this.get_mouseY());
                        var b = Math.max(this.__selectionIndex, a) | 0;
                        this.__selectionIndex = Math.min(this.__selectionIndex, a) | 0;
                        this.__caretIndex = b;
                        this.__inputEnabled && (this.this_onFocusIn(null), this.__stopCursorTimer(), this.__startCursorTimer(), da.__supportDOM && this.__renderedOnCanvasWhileOnDOM && (this.__forceCachedBitmapUpdate = !0))
                    }
                },
                this_onAddedToStage: function (a) {
                    this.this_onFocusIn(null)
                },
                this_onEnterFrame: function (a) {
                    this.__updateMouseDrag()
                },
                this_onFocusIn: function (a) {
                    1 == this.get_type() &&
                    null != this.stage && this.stage.get_focus() == this ? this.__startTextInput() : 1 != this.get_type() && this.get_selectable() && null != this.stage && this.stage.get_focus() == this && this.__startCursorTimer()
                },
                this_onFocusOut: function (a) {
                    this.__stopCursorTimer();
                    this.__stopTextInput();
                    this.__selectionIndex != this.__caretIndex && (this.__selectionIndex = this.__caretIndex, this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()))
                },
                this_onKeyDown: function (a) {
                    this.get_selectable() && 1 != this.get_type() &&
                    67 == a.keyCode && (a.commandKey || a.ctrlKey) && (this.__caretIndex == this.__selectionIndex || this.get_displayAsPassword() || Vb.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex)))
                },
                this_onMouseDown: function (a) {
                    if (this.get_selectable() || 1 == this.get_type()) this.__updateLayout(), this.__selectionIndex = this.__caretIndex = this.__getPosition(this.get_mouseX() + this.get_scrollH(), this.get_mouseY()), da.__supportDOM || (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty())),
                    null != this.stage && (this.stage.addEventListener("enterFrame", p(this, this.this_onEnterFrame)), this.stage.addEventListener("mouseMove", p(this, this.stage_onMouseMove)), this.stage.addEventListener("mouseUp", p(this, this.stage_onMouseUp)))
                },
                this_onMouseWheel: function (a) {
                    this.get_mouseWheelEnabled() && this.set_scrollV(Math.min(this.get_scrollV() - a.delta, this.get_maxScrollV()) | 0)
                },
                this_onDoubleClick: function (a) {
                    if (this.get_selectable()) {
                        this.__updateLayout();
                        a = "\n.!?, ;:()-_/".split("");
                        var b = this.__text,
                            c = -1,
                            d = b.length,
                            e = Math.max(this.__caretIndex, 1) | 0;
                        if (0 < b.length && 0 <= this.__caretIndex && d >= this.__caretIndex) {
                            for (var f = 0; f < a.length;) {
                                var h = a[f];
                                ++f;
                                var g = b.lastIndexOf(h, e - 1);
                                g > c && (c = g + 1);
                                g = b.indexOf(h, e);
                                g < d && -1 != g && (d = g)
                            }
                            c != d && (this.setSelection(c, d), a = !0, da.__supportDOM && (this.__renderedOnCanvasWhileOnDOM && (this.__forceCachedBitmapUpdate = !0), a = !1), a && (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty())))
                        }
                    }
                },
                window_onKeyDown: function (a, b) {
                    switch (a) {
                        case 8:
                            this.__selectionIndex ==
                            this.__caretIndex && 0 < this.__caretIndex && (this.__selectionIndex = this.__caretIndex - 1);
                            this.__selectionIndex != this.__caretIndex ? (this.replaceSelectedText(""), this.__selectionIndex = this.__caretIndex, this.dispatchEvent(new V("change", !0))) : (this.__stopCursorTimer(), this.__startCursorTimer());
                            break;
                        case 97:
                            this.get_selectable() && (bb.get_metaKey(b) || bb.get_ctrlKey(b)) && this.setSelection(0, this.__text.length);
                            break;
                        case 99:
                            if (bb.get_metaKey(b) || bb.get_ctrlKey(b)) this.__caretIndex == this.__selectionIndex ||
                            this.get_displayAsPassword() || Vb.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex));
                            break;
                        case 120:
                            !bb.get_metaKey(b) && !bb.get_ctrlKey(b) || this.__caretIndex == this.__selectionIndex || this.get_displayAsPassword() || (Vb.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex)), this.replaceSelectedText(""), this.dispatchEvent(new V("change", !0)));
                            break;
                        case 127:
                            this.__selectionIndex == this.__caretIndex && this.__caretIndex < this.__text.length && (this.__selectionIndex = this.__caretIndex +
                                1);
                            this.__selectionIndex != this.__caretIndex ? (this.replaceSelectedText(""), this.__selectionIndex = this.__caretIndex, this.dispatchEvent(new V("change", !0))) : (this.__stopCursorTimer(), this.__startCursorTimer());
                            break;
                        case 1073741898:
                            this.get_selectable() && (bb.get_metaKey(b) || bb.get_ctrlKey(b) ? this.__caretIndex = 0 : this.__caretBeginningOfLine(), bb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex), this.setSelection(this.__selectionIndex, this.__caretIndex));
                            break;
                        case 1073741901:
                            this.get_selectable() &&
                            (bb.get_metaKey(b) || bb.get_ctrlKey(b) ? this.__caretIndex = this.__text.length : this.__caretEndOfLine(), bb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex), this.setSelection(this.__selectionIndex, this.__caretIndex));
                            break;
                        case 1073741903:
                            this.get_selectable() && (bb.get_metaKey(b) || bb.get_ctrlKey(b) ? this.__caretBeginningOfNextLine() : this.__caretNextCharacter(), bb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex), this.setSelection(this.__selectionIndex, this.__caretIndex));
                            break;
                        case 1073741904:
                            this.get_selectable() &&
                            (bb.get_metaKey(b) || bb.get_ctrlKey(b) ? this.__caretBeginningOfPreviousLine() : this.__caretPreviousCharacter(), bb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex), this.setSelection(this.__selectionIndex, this.__caretIndex));
                            break;
                        case 1073741905:
                            this.get_selectable() && (bb.get_metaKey(b) || bb.get_ctrlKey(b) ? this.__caretIndex = this.__text.length : this.__caretNextLine(), bb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex), this.setSelection(this.__selectionIndex, this.__caretIndex));
                            break;
                        case 1073741906:
                            this.get_selectable() && (bb.get_metaKey(b) || bb.get_ctrlKey(b) ? this.__caretIndex = 0 : this.__caretPreviousLine(), bb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex), this.setSelection(this.__selectionIndex, this.__caretIndex));
                            break;
                        case 13:
                        case 1073741912:
                            this.__textEngine.multiline ? (a = new be("textInput", !0, !0, "\n"), this.dispatchEvent(a), a.isDefaultPrevented() || (this.__replaceSelectedText("\n", !0), this.dispatchEvent(new V("change", !0)))) : (this.__stopCursorTimer(), this.__startCursorTimer())
                    }
                },
                window_onTextInput: function (a) {
                    this.__replaceSelectedText(a, !0);
                    this.dispatchEvent(new V("change", !0))
                },
                __class__: Ac,
                __properties__: l(X.prototype.__properties__, {
                    set_wordWrap: "set_wordWrap",
                    set_restrict: "set_restrict",
                    set_borderColor: "set_borderColor",
                    set_border: "set_border",
                    set_backgroundColor: "set_backgroundColor",
                    set_background: "set_background",
                    set_autoSize: "set_autoSize",
                    set_type: "set_type",
                    get_type: "get_type",
                    get_textWidth: "get_textWidth",
                    get_textHeight: "get_textHeight",
                    set_text: "set_text",
                    get_text: "get_text",
                    set_selectable: "set_selectable",
                    get_selectable: "get_selectable",
                    set_scrollV: "set_scrollV",
                    get_scrollV: "get_scrollV",
                    set_scrollH: "set_scrollH",
                    get_scrollH: "get_scrollH",
                    get_multiline: "get_multiline",
                    get_mouseWheelEnabled: "get_mouseWheelEnabled",
                    get_maxScrollV: "get_maxScrollV",
                    get_maxScrollH: "get_maxScrollH",
                    get_length: "get_length",
                    set_htmlText: "set_htmlText",
                    get_htmlText: "get_htmlText",
                    get_displayAsPassword: "get_displayAsPassword",
                    set_defaultTextFormat: "set_defaultTextFormat",
                    get_defaultTextFormat: "get_defaultTextFormat",
                    get_caretIndex: "get_caretIndex",
                    get_bottomScrollV: "get_bottomScrollV"
                })
            });
            var Ne = function (a, b, c, d, e, f, h, g, m, q, n, k, l) {
                this.font = a;
                this.size = b;
                this.color = c;
                this.bold = d;
                this.italic = e;
                this.underline = f;
                this.url = h;
                this.target = g;
                this.align = m;
                this.leftMargin = q;
                this.rightMargin = n;
                this.indent = k;
                this.leading = l
            };
            g["openfl.text.TextFormat"] = Ne;
            Ne.__name__ = "openfl.text.TextFormat";
            Ne.prototype = {
                clone: function () {
                    var a = new Ne(this.font, this.size, this.color, this.bold, this.italic, this.underline, this.url, this.target);
                    a.align = this.align;
                    a.leftMargin = this.leftMargin;
                    a.rightMargin = this.rightMargin;
                    a.indent = this.indent;
                    a.leading = this.leading;
                    a.blockIndent = this.blockIndent;
                    a.bullet = this.bullet;
                    a.kerning = this.kerning;
                    a.letterSpacing = this.letterSpacing;
                    a.tabStops = this.tabStops;
                    a.__ascent = this.__ascent;
                    a.__descent = this.__descent;
                    a.__cacheKey = this.__toCacheKey();
                    return a
                },
                __merge: function (a) {
                    null != a.font && (this.font = a.font);
                    null != a.size && (this.size = a.size);
                    null != a.color && (this.color = a.color);
                    null != a.bold && (this.bold = a.bold);
                    null != a.italic && (this.italic = a.italic);
                    null != a.underline && (this.underline = a.underline);
                    null != a.url && (this.url = a.url);
                    null != a.target && (this.target = a.target);
                    null != a.align && (this.align = a.align);
                    null != a.leftMargin && (this.leftMargin = a.leftMargin);
                    null != a.rightMargin && (this.rightMargin = a.rightMargin);
                    null != a.indent && (this.indent = a.indent);
                    null != a.leading && (this.leading = a.leading);
                    null != a.blockIndent && (this.blockIndent = a.blockIndent);
                    null != a.bullet && (this.bullet = a.bullet);
                    null != a.kerning && (this.kerning =
                        a.kerning);
                    null != a.letterSpacing && (this.letterSpacing = a.letterSpacing);
                    null != a.tabStops && (this.tabStops = a.tabStops);
                    null != a.__ascent && (this.__ascent = a.__ascent);
                    null != a.__descent && (this.__descent = a.__descent);
                    this.__toCacheKey()
                },
                __toCacheKey: function () {
                    return this.__cacheKey = "" + this.font + this.size + n.string(this.bold) + n.string(this.italic)
                },
                __class__: Ne
            };
            var dm = {
                    fromString: function (a) {
                        switch (a) {
                            case "center":
                                return 0;
                            case "end":
                                return 1;
                            case "justify":
                                return 2;
                            case "left":
                                return 3;
                            case "right":
                                return 4;
                            case "start":
                                return 5;
                            default:
                                return null
                        }
                    }
                },
                ih = function (a, b) {
                    this.__collisions = [];
                    this.__wordMap = new Db;
                    this.set(a, b)
                };
            g["openfl.text._internal.CacheMeasurement"] = ih;
            ih.__name__ = "openfl.text._internal.CacheMeasurement";
            ih.prototype = {
                set: function (a, b) {
                    this.__addCollision(a, b)
                },
                get: function (a) {
                    return 1 < this.__collisions.length ? this.__wordMap.h[this.__collisions.indexOf(a)] : this.__wordMap.h[0]
                },
                __addCollision: function (a, b) {
                    if (!this.exists(a)) {
                        var c = this.__wordMap;
                        a = this.__collisions.push(a) - 1;
                        c.h[a] =
                            b
                    }
                },
                exists: function (a) {
                    return 0 == this.__collisions.length ? !1 : -1 < this.__collisions.indexOf(a)
                },
                __class__: ih
            };
            var ya = function () {
            };
            g["openfl.text._internal.HTMLParser"] = ya;
            ya.__name__ = "openfl.text._internal.HTMLParser";
            ya.parse = function (a, b, c, d, e) {
                a = b ? a.replace(ya.__regexBreakTag.r, "\n") : a.replace(ya.__regexBreakTag.r, "");
                a = a.replace(ya.__regexEntities[5].r, " ");
                a = ya.__regexCharEntity.map(a, function (a) {
                    var b = a.matched(1),
                        c = a.matched(2);
                    return null != b && (b = n.parseInt(b), null != b) ? String.fromCodePoint(b) :
                        null != c && (c = n.parseInt("0" + c), null != c) ? String.fromCodePoint(c) : a.matched(0)
                });
                var f = a.split("<");
                if (1 == f.length) {
                    a = R.htmlUnescape(a.replace(ya.__regexHTMLTag.r, ""));
                    if (1 < e.get_length()) {
                        var h = e.get_length() - 1;
                        e.__tempIndex = 1;
                        for (var g = 0, m = []; g < m.length;) {
                            var q = m[g++];
                            e.insertAt(e.__tempIndex, q);
                            e.__tempIndex++
                        }
                        e.splice(e.__tempIndex, h)
                    }
                    b = e.get(0);
                    b.format = d;
                    b.start = 0;
                    b.end = a.length
                } else {
                    h = e.get_length();
                    g = e.__tempIndex = 0;
                    for (m = []; g < m.length;) q = m[g++], e.insertAt(e.__tempIndex, q), e.__tempIndex++;
                    e.splice(e.__tempIndex,
                        h);
                    a = "";
                    h = [d.clone()];
                    g = [];
                    q = !1;
                    for (m = 0; m < f.length;) {
                        var l = f[m];
                        ++m;
                        if ("" != l) {
                            var k = "/" == ja.substr(l, 0, 1),
                                p = l.indexOf(">"),
                                y = p + 1,
                                t = l.indexOf(" ");
                            t = l.substring(k ? 1 : 0, -1 < t && t < p ? t : p).toLowerCase();
                            if (k) 0 != g.length && t == g[g.length - 1] && (g.pop(), h.pop(), k = h[h.length - 1].clone(), ("p" == t || "li" == t) && 0 < e.get_length() && (b && (a += "\n"), q = !0), y < l.length && (q = R.htmlUnescape(ja.substr(l, y, null)), e.push(new Ic(k, a.length, a.length + q.length)), a += q, q = !1));
                            else if (k = h[h.length - 1].clone(), -1 < p) {
                                null != c && (c.__applyStyle(t,
                                    k), ya.__regexClass.match(l) && (c.__applyStyle("." + ya.__getAttributeMatch(ya.__regexClass), k), c.__applyStyle(t + "." + ya.__getAttributeMatch(ya.__regexClass), k)));
                                switch (t) {
                                    case "a":
                                        null != c && c.__applyStyle("a:link", k);
                                        ya.__regexHref.match(l) && (k.url = ya.__getAttributeMatch(ya.__regexHref));
                                        break;
                                    case "b":
                                        k.bold = !0;
                                        break;
                                    case "em":
                                    case "i":
                                        k.italic = !0;
                                        break;
                                    case "font":
                                        ya.__regexFace.match(l) && (k.font = ya.__getAttributeMatch(ya.__regexFace));
                                        ya.__regexColor.match(l) && (k.color = n.parseInt("0x" + ya.__getAttributeMatch(ya.__regexColor)));
                                        if (ya.__regexSize.match(l)) {
                                            p = ya.__getAttributeMatch(ya.__regexSize);
                                            var v = ja.cca(p, 0);
                                            k.size = 43 == v || 45 == v ? (2 <= h.length ? h[h.length - 2] : d).size + n.parseInt(p) : n.parseInt(p)
                                        }
                                        break;
                                    case "li":
                                        0 < e.get_length() && !q && (a += "\n");
                                        p = k.clone();
                                        p.underline = !1;
                                        e.push(new Ic(p, a.length, a.length + 2));
                                        a += "\u2022 ";
                                        break;
                                    case "p":
                                        0 < e.get_length() && !q && (a += "\n");
                                        ya.__regexAlign.match(l) && (p = ya.__getAttributeMatch(ya.__regexAlign).toLowerCase(), k.align = dm.fromString(p));
                                        break;
                                    case "textformat":
                                        ya.__regexBlockIndent.match(l) &&
                                        (k.blockIndent = n.parseInt(ya.__getAttributeMatch(ya.__regexBlockIndent)));
                                        ya.__regexIndent.match(l) && (k.indent = n.parseInt(ya.__getAttributeMatch(ya.__regexIndent)));
                                        ya.__regexLeading.match(l) && (k.leading = n.parseInt(ya.__getAttributeMatch(ya.__regexLeading)));
                                        ya.__regexLeftMargin.match(l) && (k.leftMargin = n.parseInt(ya.__getAttributeMatch(ya.__regexLeftMargin)));
                                        ya.__regexRightMargin.match(l) && (k.rightMargin = n.parseInt(ya.__getAttributeMatch(ya.__regexRightMargin)));
                                        if (ya.__regexTabStops.match(l)) {
                                            p =
                                                ya.__getAttributeMatch(ya.__regexTabStops).split(" ");
                                            v = [];
                                            for (var B = 0; B < p.length;) {
                                                var E = p[B];
                                                ++B;
                                                v.push(n.parseInt(E))
                                            }
                                            k.tabStops = v
                                        }
                                        break;
                                    case "u":
                                        k.underline = !0
                                }
                                h.push(k);
                                g.push(t);
                                y < l.length && (q = R.htmlUnescape(l.substring(y)), e.push(new Ic(k, a.length, a.length + q.length)), a += q, q = !1)
                            } else q = R.htmlUnescape(l), e.push(new Ic(k, a.length, a.length + q.length)), a += q, q = !1
                        }
                    }
                    0 == e.get_length() && e.push(new Ic(h[0], 0, 0))
                }
                return a
            };
            ya.__getAttributeMatch = function (a) {
                return null != a.matched(2) ? a.matched(2) : a.matched(3)
            };
            var mg = function () {
                this.__shortWordMap = new Ha;
                this.__longWordMap = new Ha
            };
            g["openfl.text._internal.ShapeCache"] = mg;
            mg.__name__ = "openfl.text._internal.ShapeCache";
            mg.hashFunction = function (a) {
                for (var b = 0, c, d = 0, e = a.length; d < e;) c = d++, c = ja.cca(a, c), b = (b << 5) - b + c, b |= 0;
                return b
            };
            mg.prototype = {
                cache: function (a, b, c) {
                    a = a.format.__cacheKey;
                    return 15 < c.length ? this.__cacheLongWord(c, a, b) : this.__cacheShortWord(c, a, b)
                },
                __cacheShortWord: function (a, b, c) {
                    if (Object.prototype.hasOwnProperty.call(this.__shortWordMap.h, b)) {
                        var d =
                            this.__shortWordMap.h[b];
                        if (Object.prototype.hasOwnProperty.call(d.h, a)) return d.h[a];
                        var e = c();
                        d.h[a] = e
                    } else d = new Ha, e = c(), d.h[a] = e, this.__shortWordMap.h[b] = d;
                    return c()
                },
                __cacheLongWord: function (a, b, c) {
                    var d = mg.hashFunction(a);
                    if (Object.prototype.hasOwnProperty.call(this.__longWordMap.h, b)) {
                        var e = this.__longWordMap.h[b];
                        if (e.h.hasOwnProperty(d)) {
                            var f = e.h[d];
                            if (f.exists(a)) return f.get(a);
                            f.set(a, c())
                        } else f = new ih(a, c()), e.h[d] = f
                    } else e = new Db, f = new ih(a, c()), f.hash = d, e.h[d] = f, this.__longWordMap.h[b] =
                        e;
                    return c()
                },
                __class__: mg
            };
            var lb = function (a) {
                this.__shapeCache = new mg;
                this.textField = a;
                this.height = this.width = 100;
                this.set_text("");
                this.bounds = new ha(0, 0, 0, 0);
                this.textBounds = new ha(0, 0, 0, 0);
                this.type = 0;
                this.autoSize = 2;
                this.embedFonts = !1;
                this.selectable = !0;
                this.borderColor = 0;
                this.border = !1;
                this.backgroundColor = 16777215;
                this.background = !1;
                this.gridFitType = 1;
                this.maxChars = 0;
                this.multiline = !1;
                this.numLines = 1;
                this.scrollH = this.sharpness = 0;
                this.set_scrollV(1);
                this.wordWrap = !1;
                this.lineAscents = D.toFloatVector(null);
                this.lineBreaks = D.toIntVector(null);
                this.lineDescents = D.toFloatVector(null);
                this.lineLeadings = D.toFloatVector(null);
                this.lineHeights = D.toFloatVector(null);
                this.lineWidths = D.toFloatVector(null);
                this.layoutGroups = D.toObjectVector(null);
                this.textFormatRanges = D.toObjectVector(null);
                null == lb.__context && (lb.__context = window.document.createElement("canvas").getContext("2d"))
            };
            g["openfl.text._internal.TextEngine"] = lb;
            lb.__name__ = "openfl.text._internal.TextEngine";
            lb.findFont = function (a) {
                return pa.__fontByName.h[a]
            };
            lb.findFontVariant = function (a) {
                var b = a.font,
                    c = a.bold;
                a = a.italic;
                null == b && (b = "_serif");
                var d = R.replace(R.replace(b, " Normal", ""), " Regular", "");
                return c && a && Object.prototype.hasOwnProperty.call(pa.__fontByName.h, d + " Bold Italic") ? lb.findFont(d + " Bold Italic") : c && Object.prototype.hasOwnProperty.call(pa.__fontByName.h, d + " Bold") ? lb.findFont(d + " Bold") : a && Object.prototype.hasOwnProperty.call(pa.__fontByName.h, d + " Italic") ? lb.findFont(d + " Italic") : lb.findFont(b)
            };
            lb.getFormatHeight = function (a) {
                var b = lb.getFont(a);
                lb.__context.font = b;
                b = lb.getFontInstance(a);
                if (null != a.__ascent) {
                    var c = a.size * a.__ascent;
                    b = a.size * a.__descent
                } else null != b && 0 != b.unitsPerEM ? (c = b.ascender / b.unitsPerEM * a.size, b = Math.abs(b.descender / b.unitsPerEM * a.size)) : (c = a.size, b = .185 * a.size);
                return c + b + a.leading
            };
            lb.getFont = function (a) {
                var b = a.font,
                    c = a.bold,
                    d = a.italic;
                null == b && (b = "_serif");
                var e = R.replace(R.replace(b, " Normal", ""), " Regular", "");
                c && d && Object.prototype.hasOwnProperty.call(pa.__fontByName.h, e + " Bold Italic") ? (b = e + " Bold Italic", d =
                    c = !1) : c && Object.prototype.hasOwnProperty.call(pa.__fontByName.h, e + " Bold") ? (b = e + " Bold", c = !1) : d && Object.prototype.hasOwnProperty.call(pa.__fontByName.h, e + " Italic") ? (b = e + " Italic", d = !1) : (c && (-1 < b.indexOf(" Bold ") || R.endsWith(b, " Bold")) && (c = !1), d && (-1 < b.indexOf(" Italic ") || R.endsWith(b, " Italic")) && (d = !1));
                c = (d ? "italic " : "normal ") + "normal " + (c ? "bold " : "normal ");
                c += a.size + "px";
                c += "/" + (a.size + 3) + "px ";
                switch (b) {
                    case "_sans":
                        a = "sans-serif";
                        break;
                    case "_serif":
                        a = "serif";
                        break;
                    case "_typewriter":
                        a =
                            "monospace";
                        break;
                    default:
                        a = "'" + b.replace(/^[\s'"]+(.*)[\s'"]+$/, "$1") + "'"
                }
                return c += "" + a
            };
            lb.getFontInstance = function (a) {
                return lb.findFontVariant(a)
            };
            lb.prototype = {
                createRestrictRegexp: function (a) {
                    var b = "",
                        c = !1;
                    a = (new ra("\\^([^\\^]+)", "gu")).map(a, function (a) {
                        if (c) return c = !c, a.matched(1);
                        b += a.matched(1);
                        c = !c;
                        return ""
                    });
                    var d = [];
                    0 < a.length && d.push("[^" + a + "]");
                    0 < b.length && d.push("[" + b + "]");
                    return new ra("(" + d.join("|") + ")", "g")
                },
                getBounds: function () {
                    var a = this.border ? 1 : 0;
                    this.bounds.width = this.width +
                        a;
                    this.bounds.height = this.height + a;
                    a = this.width;
                    for (var b = this.height, c = this.layoutGroups.get_length() - 1, d = 0, e = this.layoutGroups.get_length(); d < e;) {
                        var f = d++,
                            h = this.layoutGroups.get(f);
                        if (f != c || h.startIndex != h.endIndex || 1 == this.type) h.offsetX < a && (a = h.offsetX), h.offsetY < b && (b = h.offsetY)
                    }
                    a >= this.width && (a = 2);
                    b >= this.height && (b = 2);
                    this.textBounds.setTo(Math.max(a - 2, 0), Math.max(b - 2, 0), Math.min(this.textWidth + 4, this.bounds.width + 4), Math.min(1.185 * this.textHeight + 4, this.bounds.height + 4))
                },
                getLineBreaks: function () {
                    this.lineBreaks.set_length(0);
                    for (var a = -1, b; a < this.text.length;)
                        if (b = this.text.indexOf("\n", a + 1), a = this.text.indexOf("\r", a + 1), a = -1 == a ? b : -1 == b ? a : a < b ? a : b, -1 < a) this.lineBreaks.push(a);
                        else break
                },
                getLineMeasurements: function () {
                    this.lineAscents.set_length(0);
                    this.lineDescents.set_length(0);
                    this.lineLeadings.set_length(0);
                    this.lineHeights.set_length(0);
                    this.lineWidths.set_length(0);
                    var a = 0,
                        b = 0,
                        c = null,
                        d = 0,
                        e = 0;
                    this.textHeight = this.textWidth = 0;
                    this.numLines = 1;
                    this.maxScrollH = 0;
                    for (var f = this.layoutGroups.get_length() - 1, h = 0, g = this.layoutGroups.get_length(); h <
                    g;) {
                        var m = h++;
                        var q = this.layoutGroups.get(m);
                        if (m != f || q.startIndex != q.endIndex || 1 == this.type) {
                            for (; q.lineIndex > this.numLines - 1;) this.lineAscents.push(a), this.lineDescents.push(b), this.lineLeadings.push(null != c ? c : 0), this.lineHeights.push(d), this.lineWidths.push(e), b = a = 0, c = null, e = d = 0, this.numLines++;
                            a = Math.max(a, q.ascent);
                            b = Math.max(b, q.descent);
                            c = null == c ? q.leading : Math.max(c, q.leading) | 0;
                            d = Math.max(d, q.height);
                            e = q.offsetX - 2 + q.width;
                            e > this.textWidth && (this.textWidth = e);
                            m = Math.ceil(q.offsetY - 2 + q.ascent +
                                q.descent);
                            m > this.textHeight && (this.textHeight = m)
                        }
                    }
                    0 == this.textHeight && null != this.textField && 1 == this.type && (a = this.textField.__textFormat, b = lb.getFontInstance(a), null != a.__ascent ? (f = a.size * a.__ascent, h = a.size * a.__descent) : null != b && 0 != b.unitsPerEM ? (f = b.ascender / b.unitsPerEM * a.size, h = Math.abs(b.descender / b.unitsPerEM * a.size)) : (f = a.size, h = .185 * a.size), c = a.leading, a = f, b = h, this.textHeight = m = Math.ceil(f + h));
                    this.lineAscents.push(a);
                    this.lineDescents.push(b);
                    this.lineLeadings.push(null != c ? c : 0);
                    this.lineHeights.push(d);
                    this.lineWidths.push(e);
                    1 == this.numLines && 0 < c && (this.textHeight += c);
                    if (2 != this.autoSize) switch (this.autoSize) {
                        case 0:
                        case 1:
                        case 3:
                            this.wordWrap || (this.width = this.textWidth + 4), this.height = this.textHeight + 4, this.bottomScrollV = this.numLines
                    }
                    this.maxScrollH = this.textWidth > this.width - 4 ? this.textWidth - this.width + 4 | 0 : 0;
                    this.scrollH > this.maxScrollH && (this.scrollH = this.maxScrollH)
                },
                getLayoutGroups: function () {
                    var a = this;
                    this.layoutGroups.set_length(0);
                    if (null != this.text && "" != this.text) {
                        var b = -1,
                            c = null,
                            d = null,
                            e = Ac.__defaultTextFormat.clone(),
                            f = 0,
                            h = 0,
                            g = 0,
                            m = 0,
                            q = 3,
                            n = 0,
                            k = 0,
                            l = 0,
                            p = 0,
                            y = !0,
                            t = null,
                            v = null,
                            B = 0,
                            E = 0,
                            x = 0,
                            z = -2,
                            A = -1,
                            u = this.text.indexOf(" "),
                            N = 0,
                            D = N < this.lineBreaks.get_length() ? this.lineBreaks.get(N) : -1,
                            U = 0,
                            I = 0,
                            J = 0,
                            ma = 0,
                            ca = function (b, d, f) {
                                var h = function () {
                                    var c = [];
                                    if (null == a.__useIntAdvances) {
                                        var e = new ra("Trident/7.0", "");
                                        a.__useIntAdvances = e.match(F.navigator.userAgent)
                                    }
                                    if (a.__useIntAdvances) {
                                        var h = 0;
                                        e = d;
                                        for (var k = f; e < k;) {
                                            var g = e++;
                                            g = a.measureText(b.substring(d, g + 1));
                                            c.push(g - h);
                                            h = g
                                        }
                                    } else
                                        for (e = d, k =
                                            f; e < k;) g = e++, g < b.length - 1 ? (h = a.measureText(b.charAt(g + 1)), h = a.measureText(ja.substr(b, g, 2)) - h) : h = lb.__context.measureText(b.charAt(g)).width, c.push(h);
                                    return c
                                };
                                return 2 == e.align ? h() : a.__shapeCache.cache(c, h, b.substring(d, f))
                            },
                            w = function (a) {
                                for (var b = 0, c = 0; c < a.length;) {
                                    var d = a[c];
                                    ++c;
                                    b += d
                                }
                                return b
                            },
                            G = function () {
                                return 2 + l + n + (y ? k : 0)
                            },
                            gb = function () {
                                return a.width - 2 - p - G()
                            },
                            da = function (b, d) {
                                null == t || t.startIndex != t.endIndex ? (t = new Jj(c.format, b, d), a.layoutGroups.push(t)) : (t.format = c.format, t.startIndex =
                                    b, t.endIndex = d)
                            },
                            O = function () {
                                null != e.__ascent ? (h = e.size * e.__ascent, m = e.size * e.__descent) : null != d && 0 != d.unitsPerEM ? (h = d.ascender / d.unitsPerEM * e.size, m = Math.abs(d.descender / d.unitsPerEM * e.size)) : (h = e.size, m = .185 * e.size);
                                f = e.leading;
                                E = Math.ceil(h + m + f);
                                E > x && (x = E);
                                h > g && (g = h)
                            },
                            K = function () {
                                y = !0;
                                q = null != e.align ? e.align : 3;
                                n = null != e.blockIndent ? e.blockIndent : 0;
                                k = null != e.indent ? e.indent : 0;
                                l = null != e.leftMargin ? e.leftMargin : 0;
                                p = null != e.rightMargin ? e.rightMargin : 0
                            },
                            L = function () {
                                if (b < a.textFormatRanges.get_length() -
                                    1) {
                                    b += 1;
                                    c = a.textFormatRanges.get(b);
                                    e.__merge(c.format);
                                    var f = lb.getFont(e);
                                    lb.__context.font = f;
                                    d = lb.getFontInstance(e);
                                    return !0
                                }
                                return !1
                            },
                            M = function (d, e) {
                                if (d >= e) v = [], B = 0;
                                else if (e <= c.end) v = ca(a.text, d, e), B = w(v);
                                else {
                                    var f = d;
                                    d = c.end;
                                    var h = 0;
                                    v = [];
                                    for (B = 0; ;)
                                        if (f != d && (f = ca(a.text, f, d), v = v.concat(f)), d != e) {
                                            if (!L()) {
                                                ua.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {

                                                    className: "openfl.text._internal.TextEngine",
                                                    methodName: "getLayoutGroups"
                                                });
                                                break
                                            }
                                            f = d;
                                            d = e < c.end ? e : c.end;
                                            ++h
                                        } else {
                                            B = w(v);
                                            break
                                        }
                                    b -= h + 1;
                                    L()
                                }
                            },
                            P = function (b) {
                                if (b <= c.end) {
                                    v = ca(a.text, J, b);
                                    B = w(v);
                                    da(J, b);
                                    t.positions = v;
                                    var d = U,
                                        e = G();
                                    t.offsetX = d + e;
                                    t.ascent = h;
                                    t.descent = m;
                                    t.leading = f;
                                    t.lineIndex = ma;
                                    t.offsetY = I + 2;
                                    t.width = B;
                                    t.height = E;
                                    U += B;
                                    b == c.end && (t = null, L(), O())
                                } else
                                    for (; ;) {
                                        var k = b < c.end ? b : c.end;
                                        J != k && (v = ca(a.text, J, k), B = w(v), da(J, k), t.positions = v, d = U, e = G(), t.offsetX = d + e, t.ascent = h, t.descent = m, t.leading =
                                            f, t.lineIndex = ma, t.offsetY = I + 2, t.width = B, t.height = E, U += B, J = k);
                                        k == c.end && (t = null);
                                        if (k == b) break;
                                        if (!L()) {
                                            ua.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {

                                                className: "openfl.text._internal.TextEngine",
                                                methodName: "getLayoutGroups"
                                            });
                                            break
                                        }
                                        O()
                                    }
                                J = b
                            },
                            Q = function () {
                                O();
                                for (var b = a.layoutGroups.get_length(); -1 < --b;) {
                                    var c = a.layoutGroups.get(b);
                                    if (c.lineIndex < ma) break;
                                    c.lineIndex > ma || (c.ascent = g, c.height = x)
                                }
                                I += x;
                                x = g = 0;
                                ma += 1;
                                U = 0;
                                y = !1
                            },
                            R = function (b) {
                                if (4 <= a.width && a.wordWrap) {
                                    var c = v;
                                    var d = w(c);
                                    for (var e = c.length - 1; 0 <= e;) {
                                        var f = ja.cca(a.text, J + e);
                                        if (32 != f && 9 != f) break;
                                        d -= c[e];
                                        --e
                                    }
                                    for (; 0 < c.length && U + d > gb();) {
                                        for (f = e = d = 0; U + f < gb();) {
                                            var h = c[e];
                                            0 == h ? (++e, ++d) : (f += h, ++e)
                                        }
                                        if (e == d) e = d + 1;
                                        else
                                            for (; 1 < e && U + f > gb();) --e, 0 < e - d ? (M(J, J + e - d), f = B) : (e = 1, d = 0, M(J, J + 1), f = 0);
                                        c = J + e - d;
                                        P(c);
                                        Q();
                                        M(c, b);
                                        c = v;
                                        d = B
                                    }
                                }
                                P(b)
                            };
                        L();
                        K();
                        O();
                        for (var X, oa = this.text.length + 1; J < oa;)
                            if (-1 < D && (-1 == u || D < u)) J <=
                            D ? (M(J, D), R(D), t = null) : null != t && t.startIndex != t.endIndex && (t.endIndex == u && (t.width -= t.positions[t.positions.length - 1]), t = null), Q(), c.end == D && (L(), O()), J = D + 1, A = D, ++N, D = N < this.lineBreaks.get_length() ? this.lineBreaks.get(N) : -1, K();
                            else if (-1 < u)
                                for (null != t && t.startIndex != t.endIndex && (t = null), X = !1; J < this.text.length;) {
                                    var H = -1;
                                    -
                                        1 == u ? H = D : (H = u + 1, -1 < D && D < H && (H = D));
                                    -
                                        1 == H && (H = this.text.length);
                                    M(J, H);
                                    if (2 == q) {
                                        if (0 < v.length && J == z) {
                                            J += 1;
                                            var vb = v.shift();
                                            B -= vb;
                                            U += vb
                                        }
                                        0 < v.length && H == u + 1 && (--H, vb = v.pop(), B -= vb)
                                    }
                                    this.wordWrap &&
                                    U + B > gb() && (X = !0, 0 < v.length && H == u + 1 && U + B - v[v.length - 1] <= gb() && (X = !1));
                                    if (X) {
                                        2 != q && (null != t || 0 < this.layoutGroups.get_length()) && (X = t, null == X && (X = this.layoutGroups.get(this.layoutGroups.get_length() - 1)), X.width -= X.positions[X.positions.length - 1], X.endIndex--);
                                        X = this.layoutGroups.get_length() - 1;
                                        for (vb = 0; 0 <= X;) {
                                            t = this.layoutGroups.get(X);
                                            if (0 < X && t.startIndex > z) ++vb;
                                            else break;
                                            --X
                                        }
                                        J == z + 1 && Q();
                                        U = 0;
                                        if (0 < vb) {
                                            X = this.layoutGroups.get(this.layoutGroups.get_length() - vb).offsetX;
                                            vb = this.layoutGroups.get_length() -
                                                vb;
                                            for (var S = this.layoutGroups.get_length(); vb < S;) {
                                                var T = vb++;
                                                t = this.layoutGroups.get(T);
                                                t.offsetX -= X;
                                                t.offsetY = I + 2;
                                                t.lineIndex = ma;
                                                U += t.width
                                            }
                                        }
                                        R(H);
                                        X = !1
                                    } else null != t && J == u && z != u - 1 ? (2 != q && (t.endIndex = u, t.positions = t.positions.concat(v), t.width += B), U += B, J = H) : null == t || 2 == q ? (R(H), H == this.text.length && Q()) : (vb = H < c.end ? H : c.end, vb < H && (v = ca(this.text, J, vb), B = w(v)), t.endIndex = vb, t.positions = t.positions.concat(v), t.width += B, U += B, vb == c.end && (t = null, L(), O(), J = vb, vb != H && P(H)), D == H && ++H, J = H, H == this.text.length &&
                                    (Q(), -1 != D && (A = D, ++N, D = N < this.lineBreaks.get_length() ? this.lineBreaks.get(N) : -1)));
                                    H = this.text.indexOf(" ", J);
                                    D == z && (t.endIndex = D, 0 > D - t.startIndex - t.positions.length && t.positions.push(0), J = D + 1);
                                    z = u;
                                    u = H;
                                    if (-1 < D && D <= J && (u > D || -1 == u) || J > this.text.length) break
                                } else J < this.text.length && (M(J, this.text.length), R(this.text.length), Q()), J += 1;
                        A == J - 2 && -1 < A && (da(J - 1, J - 1), t.positions = [], t.ascent = h, t.descent = m, t.leading = f, t.lineIndex = ma, t.offsetX = G(), t.offsetY = I + 2, t.width = 0, t.height = E)
                    }
                },
                measureText: function (a) {
                    return lb.__context.measureText(a).width
                },
                restrictText: function (a) {
                    if (null == a) return a;
                    null != this.__restrictRegexp && (a = this.__restrictRegexp.split(a).join(""));
                    return a
                },
                setTextAlignment: function () {
                    for (var a = -1, b = 0, c, d, e = !1, f = 0, h = this.layoutGroups.get_length(); f < h;) {
                        var g = f++;
                        c = this.layoutGroups.get(g);
                        if (c.lineIndex != a) switch (a = c.lineIndex, b = this.width - 4 - c.format.rightMargin, c.format.align) {
                            case 0:
                                b = this.lineWidths.get(a) < b ? Math.round((b - this.lineWidths.get(a)) / 2) : 0;
                                break;
                            case 2:
                                if (this.lineWidths.get(a) < b) {
                                    d = 1;
                                    for (var m = g + 1, q = this.layoutGroups.get_length(); m <
                                    q;) {
                                        var n = m++;
                                        if (this.layoutGroups.get(n).lineIndex == a) 0 != n && 32 != ja.cca(this.text, this.layoutGroups.get(n).startIndex - 1) || ++d;
                                        else break
                                    }
                                    if (1 < d && (c = this.layoutGroups.get(g + d - 1), m = ja.cca(this.text, c.endIndex), c.endIndex < this.text.length && 10 != m && 13 != m)) {
                                        b = (b - this.lineWidths.get(a)) / (d - 1);
                                        e = !0;
                                        m = 1;
                                        do this.layoutGroups.get(g + m).offsetX += b * m; while (++m < d)
                                    }
                                }
                                b = 0;
                                break;
                            case 4:
                                b = this.lineWidths.get(a) < b ? Math.round(b - this.lineWidths.get(a)) : 0;
                                break;
                            default:
                                b = 0
                        }
                        0 < b && (c.offsetX += b)
                    }
                    e && this.getLineMeasurements()
                },
                update: function () {
                    null == this.text || 0 == this.textFormatRanges.get_length() ? (this.lineAscents.set_length(0), this.lineBreaks.set_length(0), this.lineDescents.set_length(0), this.lineLeadings.set_length(0), this.lineHeights.set_length(0), this.lineWidths.set_length(0), this.layoutGroups.set_length(0), this.textHeight = this.textWidth = 0, this.numLines = 1, this.maxScrollH = 0, this.bottomScrollV = this.maxScrollV = 1) : (this.getLineBreaks(), this.getLayoutGroups(), this.getLineMeasurements(), this.setTextAlignment());
                    this.getBounds()
                },
                get_bottomScrollV: function () {
                    if (1 == this.numLines || null == this.lineHeights) return 1;
                    for (var a = this.lineHeights.get_length(), b = this.lineLeadings.get_length() == a ? -this.lineLeadings.get(a - 1) : 0, c = (0 < this.get_scrollV() ? this.get_scrollV() : 1) - 1, d = this.lineHeights.get_length(); c < d;) {
                        var e = c++,
                            f = this.lineHeights.get(e);
                        b += f;
                        if (b > this.height - 4) {
                            a = e + (0 <= b - this.height ? 0 : 1);
                            break
                        }
                    }
                    return a < this.get_scrollV() ? this.get_scrollV() : a
                },
                get_maxScrollV: function () {
                    if (1 == this.numLines || null == this.lineHeights) return 1;
                    for (var a =
                        this.numLines - 1, b = 0; 0 <= a;) {
                        b += this.lineHeights.get(a);
                        if (b > this.height - 4) {
                            a += 0 > b - this.height ? 1 : 2;
                            break
                        }
                        --a
                    }
                    return 1 > a ? 1 : a
                },
                set_restrict: function (a) {
                    if (this.restrict == a) return this.restrict;
                    this.restrict = a;
                    this.__restrictRegexp = null == this.restrict || 0 == this.restrict.length ? null : this.createRestrictRegexp(a);
                    return this.restrict
                },
                get_scrollV: function () {
                    if (1 == this.numLines || null == this.lineHeights) return 1;
                    var a = this.get_maxScrollV();
                    return this.scrollV > a ? a : this.scrollV
                },
                set_scrollV: function (a) {
                    1 > a ? a = 1 :
                        a > this.get_maxScrollV() && (a = this.get_maxScrollV());
                    return this.scrollV = a
                },
                set_text: function (a) {
                    return this.text = a
                },
                __class__: lb,
                __properties__: {
                    set_text: "set_text",
                    set_scrollV: "set_scrollV",
                    get_scrollV: "get_scrollV",
                    set_restrict: "set_restrict",
                    get_maxScrollV: "get_maxScrollV",
                    get_bottomScrollV: "get_bottomScrollV"
                }
            };
            var Ic = function (a, b, c) {
                this.format = a;
                this.start = b;
                this.end = c
            };
            g["openfl.text._internal.TextFormatRange"] = Ic;
            Ic.__name__ = "openfl.text._internal.TextFormatRange";
            Ic.prototype = {
                __class__: Ic
            };
            var Jj = function (a, b, c) {
                this.format = a;
                this.startIndex = b;
                this.endIndex = c
            };
            g["openfl.text._internal.TextLayoutGroup"] = Jj;
            Jj.__name__ = "openfl.text._internal.TextLayoutGroup";
            Jj.prototype = {
                __class__: Jj
            };
            var Za = function () {
                O.call(this);
                Za.__instances.push(this)
            };
            g["openfl.ui.GameInput"] = Za;
            Za.__name__ = "openfl.ui.GameInput";
            Za.__getDevice = function (a) {
                if (null == a) return null;
                if (null == Za.__devices.h.__keys__[a.__id__]) {
                    var b = Hb.__getDeviceData(),
                        c = b[a.id].id;
                    b = Hb.__getDeviceData();
                    b = new jl(c, b[a.id].id);
                    Za.__deviceList.push(b);
                    Za.__devices.set(a, b);
                    Za.numDevices = Za.__deviceList.length
                }
                return Za.__devices.h[a.__id__]
            };
            Za.__onGamepadAxisMove = function (a, b, c) {
                a = Za.__getDevice(a);
                if (null != a && a.enabled) {
                    if (!a.__axis.h.hasOwnProperty(b)) {
                        if (null == b) var d = "null";
                        else switch (b) {
                            case 0:
                                d = "LEFT_X";
                                break;
                            case 1:
                                d = "LEFT_Y";
                                break;
                            case 2:
                                d = "RIGHT_X";
                                break;
                            case 3:
                                d = "RIGHT_Y";
                                break;
                            case 4:
                                d = "TRIGGER_LEFT";
                                break;
                            case 5:
                                d = "TRIGGER_RIGHT";
                                break;
                            default:
                                d = "UNKNOWN (" + b + ")"
                        }
                        d = new od(a, "AXIS_" + d, -1, 1);
                        a.__axis.h[b] = d;
                        a.__controls.push(d)
                    }
                    d = a.__axis.h[b];
                    d.value = c;
                    d.dispatchEvent(new V("change"))
                }
            };
            Za.__onGamepadButtonDown = function (a, b) {
                a = Za.__getDevice(a);
                if (null != a && a.enabled) {
                    if (!a.__button.h.hasOwnProperty(b)) {
                        if (null == b) var c = "null";
                        else switch (b) {
                            case 0:
                                c = "A";
                                break;
                            case 1:
                                c = "B";
                                break;
                            case 2:
                                c = "X";
                                break;
                            case 3:
                                c = "Y";
                                break;
                            case 4:
                                c = "BACK";
                                break;
                            case 5:
                                c = "GUIDE";
                                break;
                            case 6:
                                c = "START";
                                break;
                            case 7:
                                c = "LEFT_STICK";
                                break;
                            case 8:
                                c = "RIGHT_STICK";
                                break;
                            case 9:
                                c = "LEFT_SHOULDER";
                                break;
                            case 10:
                                c = "RIGHT_SHOULDER";
                                break;
                            case 11:
                                c = "DPAD_UP";
                                break;
                            case 12:
                                c =
                                    "DPAD_DOWN";
                                break;
                            case 13:
                                c = "DPAD_LEFT";
                                break;
                            case 14:
                                c = "DPAD_RIGHT";
                                break;
                            default:
                                c = "UNKNOWN (" + b + ")"
                        }
                        c = new od(a, "BUTTON_" + c, 0, 1);
                        a.__button.h[b] = c;
                        a.__controls.push(c)
                    }
                    c = a.__button.h[b];
                    c.value = 1;
                    c.dispatchEvent(new V("change"))
                }
            };
            Za.__onGamepadButtonUp = function (a, b) {
                a = Za.__getDevice(a);
                if (null != a && a.enabled) {
                    if (!a.__button.h.hasOwnProperty(b)) {
                        if (null == b) var c = "null";
                        else switch (b) {
                            case 0:
                                c = "A";
                                break;
                            case 1:
                                c = "B";
                                break;
                            case 2:
                                c = "X";
                                break;
                            case 3:
                                c = "Y";
                                break;
                            case 4:
                                c = "BACK";
                                break;
                            case 5:
                                c = "GUIDE";
                                break;
                            case 6:
                                c = "START";
                                break;
                            case 7:
                                c = "LEFT_STICK";
                                break;
                            case 8:
                                c = "RIGHT_STICK";
                                break;
                            case 9:
                                c = "LEFT_SHOULDER";
                                break;
                            case 10:
                                c = "RIGHT_SHOULDER";
                                break;
                            case 11:
                                c = "DPAD_UP";
                                break;
                            case 12:
                                c = "DPAD_DOWN";
                                break;
                            case 13:
                                c = "DPAD_LEFT";
                                break;
                            case 14:
                                c = "DPAD_RIGHT";
                                break;
                            default:
                                c = "UNKNOWN (" + b + ")"
                        }
                        c = new od(a, "BUTTON_" + c, 0, 1);
                        a.__button.h[b] = c;
                        a.__controls.push(c)
                    }
                    c = a.__button.h[b];
                    c.value = 0;
                    c.dispatchEvent(new V("change"))
                }
            };
            Za.__onGamepadConnect = function (a) {
                a = Za.__getDevice(a);
                if (null != a)
                    for (var b = 0, c = Za.__instances; b <
                    c.length;) {
                        var d = c[b];
                        ++b;
                        d.dispatchEvent(new kg("deviceAdded", !0, !1, a))
                    }
            };
            Za.__onGamepadDisconnect = function (a) {
                var b = Za.__devices.h[a.__id__];
                if (null != b) {
                    null != Za.__devices.h.__keys__[a.__id__] && (ja.remove(Za.__deviceList, Za.__devices.h[a.__id__]), Za.__devices.remove(a));
                    Za.numDevices = Za.__deviceList.length;
                    a = 0;
                    for (var c = Za.__instances; a < c.length;) {
                        var d = c[a];
                        ++a;
                        d.dispatchEvent(new kg("deviceRemoved", !0, !1, b))
                    }
                }
            };
            Za.__super__ = O;
            Za.prototype = l(O.prototype, {
                addEventListener: function (a, b, c, d, e) {
                    null ==
                    e && (e = !1);
                    null == d && (d = 0);
                    null == c && (c = !1);
                    O.prototype.addEventListener.call(this, a, b, c, d, e);
                    if ("deviceAdded" == a)
                        for (a = 0, b = Za.__deviceList; a < b.length;) c = b[a], ++a, this.dispatchEvent(new kg("deviceAdded", !0, !1, c))
                },
                __class__: Za
            });
            var od = function (a, b, c, d, e) {
                null == e && (e = 0);
                O.call(this);
                this.device = a;
                this.id = b;
                this.minValue = c;
                this.maxValue = d;
                this.value = e
            };
            g["openfl.ui.GameInputControl"] = od;
            od.__name__ = "openfl.ui.GameInputControl";
            od.__super__ = O;
            od.prototype = l(O.prototype, {
                __class__: od
            });
            var jl = function (a,
                               b) {
                this.__controls = [];
                this.__button = new Db;
                this.__axis = new Db;
                this.id = a;
                this.name = b;
                a = new od(this, "AXIS_0", -1, 1);
                this.__axis.h[0] = a;
                this.__controls.push(a);
                a = new od(this, "AXIS_1", -1, 1);
                this.__axis.h[1] = a;
                this.__controls.push(a);
                a = new od(this, "AXIS_2", -1, 1);
                this.__axis.h[2] = a;
                this.__controls.push(a);
                a = new od(this, "AXIS_3", -1, 1);
                this.__axis.h[3] = a;
                this.__controls.push(a);
                a = new od(this, "AXIS_4", -1, 1);
                this.__axis.h[4] = a;
                this.__controls.push(a);
                a = new od(this, "AXIS_5", -1, 1);
                this.__axis.h[5] = a;
                this.__controls.push(a);
                for (b = 0; 15 > b;) {
                    var c = b++;
                    a = new od(this, "BUTTON_" + c, 0, 1);
                    this.__button.h[c] = a;
                    this.__controls.push(a)
                }
            };
            g["openfl.ui.GameInputDevice"] = jl;
            jl.__name__ = "openfl.ui.GameInputDevice";
            jl.prototype = {
                __class__: jl
            };
            var El = function () {
            };
            g["openfl.ui.Keyboard"] = El;
            El.__name__ = "openfl.ui.Keyboard";
            El.__getCharCode = HaxeShared.getCharCode;
            var Vk = function () {
            };
            g["openfl.ui.Mouse"] = Vk;
            Vk.__name__ = "openfl.ui.Mouse";
            var bm = {
                    toLimeCursor: function (a) {
                        switch (a) {
                            case "arrow":
                                return zb.ARROW;
                            case "auto":
                                return zb.DEFAULT;
                            case "button":
                                return zb.POINTER;
                            case "crosshair":
                                return zb.CROSSHAIR;
                            case "custom":
                                return zb.CUSTOM;
                            case "hand":
                                return zb.MOVE;
                            case "ibeam":
                                return zb.TEXT;
                            case "resize_nesw":
                                return zb.RESIZE_NESW;
                            case "resize_ns":
                                return zb.RESIZE_NS;
                            case "resize_nwse":
                                return zb.RESIZE_NWSE;
                            case "resize_we":
                                return zb.RESIZE_WE;
                            case "wait":
                                return zb.WAIT;
                            case "waitarrow":
                                return zb.WAIT_ARROW;
                            default:
                                return zb.DEFAULT
                        }
                    }
                },
                W = function (a) {
                    null == a && (a = !1);
                    this.debugEnabled = a;
                    W.initialized || W.init()
                };
            g["openfl.utils.AGALMiniAssembler"] = W;
            W.__name__ = "openfl.utils.AGALMiniAssembler";
            W.init = function () {
                W.initialized = !0;
                var a = W.OPMAP,
                    b = new La("mov", 2, 0, 0);
                a.h.mov = b;
                a = W.OPMAP;
                b = new La("add", 3, 1, 0);
                a.h.add = b;
                a = W.OPMAP;
                b = new La("sub", 3, 2, 0);
                a.h.sub = b;
                a = W.OPMAP;
                b = new La("mul", 3, 3, 0);
                a.h.mul = b;
                a = W.OPMAP;
                b = new La("div", 3, 4, 0);
                a.h.div = b;
                a = W.OPMAP;
                b = new La("rcp", 2, 5, 0);
                a.h.rcp = b;
                a = W.OPMAP;
                b = new La("min", 3, 6, 0);
                a.h.min = b;
                a = W.OPMAP;
                b = new La("max", 3, 7, 0);
                a.h.max = b;
                a = W.OPMAP;
                b = new La("frc", 2, 8, 0);
                a.h.frc = b;
                a = W.OPMAP;
                b = new La("sqt", 2, 9, 0);
                a.h.sqt = b;
                a = W.OPMAP;
                b = new La("rsq", 2, 10, 0);
                a.h.rsq = b;
                a = W.OPMAP;
                b = new La("pow", 3, 11, 0);
                a.h.pow = b;
                a = W.OPMAP;
                b = new La("log", 2, 12, 0);
                a.h.log = b;
                a = W.OPMAP;
                b = new La("exp", 2, 13, 0);
                a.h.exp = b;
                a = W.OPMAP;
                b = new La("nrm", 2, 14, 0);
                a.h.nrm = b;
                a = W.OPMAP;
                b = new La("sin", 2, 15, 0);
                a.h.sin = b;
                a = W.OPMAP;
                b = new La("cos", 2, 16, 0);
                a.h.cos = b;
                a = W.OPMAP;
                b = new La("crs", 3, 17, 0);
                a.h.crs = b;
                a = W.OPMAP;
                b = new La("dp3", 3, 18, 0);
                a.h.dp3 = b;
                a = W.OPMAP;
                b = new La("dp4", 3, 19, 0);
                a.h.dp4 = b;
                a = W.OPMAP;
                b = new La("abs", 2, 20, 0);
                a.h.abs = b;
                a = W.OPMAP;
                b = new La("neg", 2, 21, 0);
                a.h.neg = b;
                a = W.OPMAP;
                b = new La("sat", 2, 22,
                    0);
                a.h.sat = b;
                a = W.OPMAP;
                b = new La("m33", 3, 23, 16);
                a.h.m33 = b;
                a = W.OPMAP;
                b = new La("m44", 3, 24, 16);
                a.h.m44 = b;
                a = W.OPMAP;
                b = new La("m34", 3, 25, 16);
                a.h.m34 = b;
                a = W.OPMAP;
                b = new La("ddx", 2, 26, 288);
                a.h.ddx = b;
                a = W.OPMAP;
                b = new La("ddy", 2, 27, 288);
                a.h.ddy = b;
                a = W.OPMAP;
                b = new La("ife", 2, 28, 897);
                a.h.ife = b;
                a = W.OPMAP;
                b = new La("ine", 2, 29, 897);
                a.h.ine = b;
                a = W.OPMAP;
                b = new La("ifg", 2, 30, 897);
                a.h.ifg = b;
                a = W.OPMAP;
                b = new La("ifl", 2, 31, 897);
                a.h.ifl = b;
                a = W.OPMAP;
                b = new La("els", 0, 32, 1921);
                a.h.els = b;
                a = W.OPMAP;
                b = new La("eif", 0, 33, 1409);
                a.h.eif =
                    b;
                a = W.OPMAP;
                b = new La("kil", 1, 39, 160);
                a.h.kil = b;
                a = W.OPMAP;
                b = new La("tex", 3, 40, 40);
                a.h.tex = b;
                a = W.OPMAP;
                b = new La("sge", 3, 41, 0);
                a.h.sge = b;
                a = W.OPMAP;
                b = new La("slt", 3, 42, 0);
                a.h.slt = b;
                a = W.OPMAP;
                b = new La("sgn", 2, 43, 0);
                a.h.sgn = b;
                a = W.OPMAP;
                b = new La("seq", 3, 44, 0);
                a.h.seq = b;
                a = W.OPMAP;
                b = new La("sne", 3, 45, 0);
                a.h.sne = b;
                a = W.SAMPLEMAP;
                b = new wb("rgba", 8, 0);
                a.h.rgba = b;
                a = W.SAMPLEMAP;
                b = new wb("compressed", 8, 1);
                a.h.compressed = b;
                a = W.SAMPLEMAP;
                b = new wb("compressedalpha", 8, 2);
                a.h.compressedalpha = b;
                a = W.SAMPLEMAP;
                b = new wb("dxt1",
                    8, 1);
                a.h.dxt1 = b;
                a = W.SAMPLEMAP;
                b = new wb("dxt5", 8, 2);
                a.h.dxt5 = b;
                a = W.SAMPLEMAP;
                b = new wb("video", 8, 3);
                a.h.video = b;
                a = W.SAMPLEMAP;
                b = new wb("2d", 12, 0);
                a.h["2d"] = b;
                a = W.SAMPLEMAP;
                b = new wb("3d", 12, 2);
                a.h["3d"] = b;
                a = W.SAMPLEMAP;
                b = new wb("cube", 12, 1);
                a.h.cube = b;
                a = W.SAMPLEMAP;
                b = new wb("mipnearest", 24, 1);
                a.h.mipnearest = b;
                a = W.SAMPLEMAP;
                b = new wb("miplinear", 24, 2);
                a.h.miplinear = b;
                a = W.SAMPLEMAP;
                b = new wb("mipnone", 24, 0);
                a.h.mipnone = b;
                a = W.SAMPLEMAP;
                b = new wb("nomip", 24, 0);
                a.h.nomip = b;
                a = W.SAMPLEMAP;
                b = new wb("nearest", 28,
                    0);
                a.h.nearest = b;
                a = W.SAMPLEMAP;
                b = new wb("linear", 28, 1);
                a.h.linear = b;
                a = W.SAMPLEMAP;
                b = new wb("anisotropic2x", 28, 2);
                a.h.anisotropic2x = b;
                a = W.SAMPLEMAP;
                b = new wb("anisotropic4x", 28, 3);
                a.h.anisotropic4x = b;
                a = W.SAMPLEMAP;
                b = new wb("anisotropic8x", 28, 4);
                a.h.anisotropic8x = b;
                a = W.SAMPLEMAP;
                b = new wb("anisotropic16x", 28, 5);
                a.h.anisotropic16x = b;
                a = W.SAMPLEMAP;
                b = new wb("centroid", 16, 1);
                a.h.centroid = b;
                a = W.SAMPLEMAP;
                b = new wb("single", 16, 2);
                a.h.single = b;
                a = W.SAMPLEMAP;
                b = new wb("ignoresampler", 16, 4);
                a.h.ignoresampler = b;
                a = W.SAMPLEMAP;
                b = new wb("repeat", 20, 1);
                a.h.repeat = b;
                a = W.SAMPLEMAP;
                b = new wb("wrap", 20, 1);
                a.h.wrap = b;
                a = W.SAMPLEMAP;
                b = new wb("clamp", 20, 0);
                a.h.clamp = b;
                a = W.SAMPLEMAP;
                b = new wb("clamp_u_repeat_v", 20, 2);
                a.h.clamp_u_repeat_v = b;
                a = W.SAMPLEMAP;
                b = new wb("repeat_u_clamp_v", 20, 3);
                a.h.repeat_u_clamp_v = b
            };
            W.prototype = {
                assemble: function (a, b, c, d) {
                    null == d && (d = !1);
                    null == c && (c = 1);
                    var e = Na.getTimer();
                    this.agalcode = new sc(0);
                    this.error = "";
                    var f = !1;
                    "fragment" == a ? f = !0 : "vertex" != a && (this.error = 'ERROR: mode needs to be "fragment" or "vertex" but is "' +
                        a + '".');
                    this.agalcode.__endian = 1;
                    this.agalcode.writeByte(160);
                    this.agalcode.writeUnsignedInt(c);
                    this.agalcode.writeByte(161);
                    this.agalcode.writeByte(f ? 1 : 0);
                    this.initregmap(c, d);
                    a = R.replace(b, "\r", "\n").split("\n");
                    b = 0;
                    d = a.length;
                    for (var h = new ra("<.*>", "g"), g = new ra("([\\w\\.\\-\\+]+)", "gi"), m = new ra("^\\w{3}", "ig"), q = new ra("vc\\[([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw](\\+\\d{1,3})?)?\\](\\.[xyzw]{1,4})?|([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw]{1,4})?", "gi"), l = new ra("\\[.*\\]", "ig"), k = new ra("^\\b[A-Za-z]{1,3}",
                        "ig"), p = new ra("\\d+", ""), t = new ra("(\\.[xyzw]{1,4})", ""), y = new ra("[A-Za-z]{1,3}", "ig"), v = new ra("(\\.[xyzw]{1,1})", ""), B = new ra("\\+\\d{1,3}", "ig"), E = 0; E < d && "" == this.error;) {
                        var x = R.trim(a[E]),
                            z = x.indexOf("//");
                        -
                            1 != z && (x = ja.substr(x, 0, z));
                        var A = h.match(x) ? h.matchedPos().pos : -1;
                        z = null;
                        -
                            1 != A && (z = this.match(ja.substr(x, A, null), g), x = ja.substr(x, 0, A));
                        var u = null;
                        m.match(x) && (A = m.matched(0), u = W.OPMAP.h[A]);
                        if (null == u) 3 <= x.length && ua.warn("warning: bad line " + E + ": " + a[E], {
                            className: "openfl.utils.AGALMiniAssembler",
                            methodName: "assemble"
                        });
                        else if (this.debugEnabled && ua.info(u, {

                            className: "openfl.utils.AGALMiniAssembler",
                            methodName: "assemble"
                        }), null == u) 3 <= x.length && ua.warn("warning: bad line " + E + ": " + a[E], {

                            className: "openfl.utils.AGALMiniAssembler",
                            methodName: "assemble"
                        });
                        else {
                            x = ja.substr(x, x.indexOf(u.name) + u.name.length, null);
                            if (0 != (u.flags &
                                256) && 2 > c) {
                                this.error = "error: opcode requires version 2.";
                                break
                            }
                            if (0 != (u.flags & 64) && f) {
                                this.error = "error: opcode is only allowed in vertex programs.";
                                break
                            }
                            if (0 != (u.flags & 32) && !f) {
                                this.error = "error: opcode is only allowed in fragment programs.";
                                break
                            }
                            this.verbose && ua.info("emit opcode=" + n.string(u), {

                                className: "openfl.utils.AGALMiniAssembler",
                                methodName: "assemble"
                            });
                            this.agalcode.writeUnsignedInt(u.emitCode);
                            ++b;
                            if (4096 < b) {
                                this.error = "error: too many opcodes. maximum is 4096.";
                                break
                            }
                            var D = this.match(x, q);
                            if (D.length != u.numRegister) {
                                this.error = "error: wrong number of operands. found " + D.length + " but expected " + u.numRegister + ".";
                                break
                            }
                            var N = !1,
                                U = 160;
                            x = 0;
                            for (A = D.length; x < A;) {
                                var I = x++,
                                    ma = !1,
                                    ca = this.match(D[I], l);
                                0 < ca.length && (D[I] = R.replace(D[I], ca[0], "0"), this.verbose && ua.info("IS REL", {

                                    className: "openfl.utils.AGALMiniAssembler",
                                    methodName: "assemble"
                                }), ma = !0);
                                var w = this.match(D[I], k);
                                if (0 == w.length) {
                                    this.error = "error: could not parse operand " +
                                        I + " (" + D[I] + ").";
                                    N = !0;
                                    break
                                }
                                var F = W.REGMAP.h[w[0]];
                                this.debugEnabled && ua.info(F, {

                                    className: "openfl.utils.AGALMiniAssembler",
                                    methodName: "assemble"
                                });
                                if (null == F) {
                                    this.error = "error: could not find register name for operand " + I + " (" + D[I] + ").";
                                    N = !0;
                                    break
                                }
                                if (f) {
                                    if (0 == (F.flags & 32)) {
                                        this.error = "error: register operand " + I + " (" + D[I] + ") only allowed in vertex programs.";
                                        N = !0;
                                        break
                                    }
                                    if (ma) {
                                        this.error = "error: register operand " + I + " (" + D[I] + ") relative adressing not allowed in fragment programs.";
                                        N = !0;
                                        break
                                    }
                                } else if (0 == (F.flags & 64)) {
                                    this.error = "error: register operand " + I + " (" + D[I] + ") only allowed in fragment programs.";
                                    N = !0;
                                    break
                                }
                                D[I] = ja.substr(D[I], D[I].indexOf(F.name) + F.name.length, null);
                                var G = ma ? this.match(ca[0], p) : this.match(D[I], p);
                                w = 0;
                                0 < G.length && (w = n.parseInt(G[0]));
                                if (J.gt(w, F.range)) {
                                    x = F.range + 1;
                                    this.error = "error: register operand " + I + " (" + D[I] + ") index exceeds limit of " + (null == x ? "null" : n.string(J.toFloat(x))) + ".";
                                    N = !0;
                                    break
                                }
                                var gb = this.match(D[I], t),
                                    O = 0 == I && 0 == (u.flags & 128),
                                    da =
                                        2 == I && 0 != (u.flags & 8),
                                    K = 0,
                                    L = 0,
                                    M = 0;
                                if (O && ma) {
                                    this.error = "error: relative can not be destination";
                                    N = !0;
                                    break
                                }
                                if (0 < gb.length) {
                                    for (var H = G = 0, Q = gb[0].length, P = 1; P < Q;) H = ja.cca(gb[0], P) - 120, J.gt(H, 2) && (H = 3), G = O ? G | 1 << H : G | H << (P - 1 << 1), ++P;
                                    if (!O)
                                        for (; 4 >= P;) G |= H << (P - 1 << 1), ++P
                                } else G = O ? 15 : 228;
                                if (ma) {
                                    gb = this.match(ca[0], y);
                                    K = W.REGMAP.h[gb[0]];
                                    if (null == K) {
                                        this.error = "error: bad index register";
                                        N = !0;
                                        break
                                    }
                                    K = K.emitCode;
                                    H = this.match(ca[0], v);
                                    if (0 == H.length) {
                                        this.error = "error: bad index register select";
                                        N = !0;
                                        break
                                    }
                                    L =
                                        ja.cca(H[0], 1) - 120;
                                    J.gt(L, 2) && (L = 3);
                                    ca = this.match(ca[0], B);
                                    0 < ca.length && (M = n.parseInt(ca[0]));
                                    if (0 > M || 255 < M) {
                                        this.error = "error: index offset " + M + " out of bounds. [0..255]";
                                        N = !0;
                                        break
                                    }
                                    this.verbose && ua.info("RELATIVE: type=" + K + "==" + gb[0] + " sel=" + (null == L ? "null" : n.string(J.toFloat(L))) + "==" + H[0] + " idx=" + (null == w ? "null" : n.string(J.toFloat(w))) + " offset=" + M, {

                                        className: "openfl.utils.AGALMiniAssembler",
                                        methodName: "assemble"
                                    })
                                }
                                this.verbose && ua.info("  emit argcode=" +
                                    n.string(F) + "[" + (null == w ? "null" : n.string(J.toFloat(w))) + "][" + G + "]", {

                                    className: "openfl.utils.AGALMiniAssembler",
                                    methodName: "assemble"
                                });
                                if (O) this.agalcode.writeShort(w), this.agalcode.writeByte(G), this.agalcode.writeByte(F.emitCode), U -= 32;
                                else {
                                    if (da) {
                                        this.verbose && ua.info("  emit sampler", {

                                            className: "openfl.utils.AGALMiniAssembler",
                                            methodName: "assemble"
                                        });
                                        I = 5;
                                        ca = ma = 0;
                                        for (F = null == z ?
                                            0 : z.length; ca < F;) G = ca++, this.verbose && ua.info("    opt: " + z[G], {

                                            className: "openfl.utils.AGALMiniAssembler",
                                            methodName: "assemble"
                                        }), O = W.SAMPLEMAP.h[z[G]], null == O ? (ma = parseFloat(z[G]), this.verbose && ua.info("    bias: " + ma, {

                                            className: "openfl.utils.AGALMiniAssembler",
                                            methodName: "assemble"
                                        })) : (16 != O.flag && (I &= ~(15 << O.flag)), I |= O.mask << O.flag);
                                        this.agalcode.writeShort(w);
                                        this.agalcode.writeByte(8 *
                                            ma | 0);
                                        this.agalcode.writeByte(0);
                                        this.agalcode.writeUnsignedInt(I);
                                        this.verbose && ua.info("    bits: " + (I - 5), {

                                            className: "openfl.utils.AGALMiniAssembler",
                                            methodName: "assemble"
                                        })
                                    } else 0 == I && (this.agalcode.writeUnsignedInt(0), U -= 32), this.agalcode.writeShort(w), this.agalcode.writeByte(M), this.agalcode.writeByte(G), this.agalcode.writeByte(F.emitCode), this.agalcode.writeByte(K), this.agalcode.writeShort(ma ? L | 32768 : 0);
                                    U -= 64
                                }
                            }
                            for (x = 0; x < U;) this.agalcode.writeByte(0),
                                x += 8;
                            if (N) break
                        }
                        ++E
                    }
                    "" != this.error && (this.error += "\n  at line " + E + " " + a[E], Ue.set_length(this.agalcode, 0), ua.info(this.error, {

                        className: "openfl.utils.AGALMiniAssembler",
                        methodName: "assemble"
                    }));
                    if (this.debugEnabled) {
                        c = "generated bytecode:";
                        f = Ue.get_length(this.agalcode);
                        x = 0;
                        for (A = f; x < A;) f = x++, 0 == f % 16 && (c += "\n"), 0 == f % 4 && (c += " "), f = R.hex(this.agalcode.b[f], 2), 2 > f.length && (f = "0" + f), c += f;
                        ua.info(c, {
                            className: "openfl.utils.AGALMiniAssembler",
                            methodName: "assemble"
                        })
                    }
                    this.verbose && ua.info("AGALMiniAssembler.assemble time: " + (Na.getTimer() - e) / 1E3 + "s", {

                        className: "openfl.utils.AGALMiniAssembler",
                        methodName: "assemble"
                    });
                    return this.agalcode
                },
                initregmap: function (a, b) {
                    var c = W.REGMAP,
                        d = new Zc("va", "vertex attribute", 0, b ? 1024 : 1 == a || 2 == a ? 7 : 15, 66);
                    c.h.va = d;
                    c = W.REGMAP;
                    d = new Zc("vc", "vertex constant", 1, b ? 1024 : 1 == a ? 127 : 249, 66);
                    c.h.vc =
                        d;
                    c = W.REGMAP;
                    d = new Zc("vt", "vertex temporary", 2, b ? 1024 : 1 == a ? 7 : 25, 67);
                    c.h.vt = d;
                    c = W.REGMAP;
                    d = new Zc("vo", "vertex output", 3, b ? 1024 : 0, 65);
                    c.h.vo = d;
                    c = W.REGMAP;
                    d = new Zc("vi", "varying", 4, b ? 1024 : 1 == a ? 7 : 9, 99);
                    c.h.vi = d;
                    c = W.REGMAP;
                    d = new Zc("fc", "fragment constant", 1, b ? 1024 : 1 == a ? 27 : 2 == a ? 63 : 199, 34);
                    c.h.fc = d;
                    c = W.REGMAP;
                    d = new Zc("ft", "fragment temporary", 2, b ? 1024 : 1 == a ? 7 : 25, 35);
                    c.h.ft = d;
                    c = W.REGMAP;
                    d = new Zc("fs", "texture sampler", 5, b ? 1024 : 7, 34);
                    c.h.fs = d;
                    c = W.REGMAP;
                    d = new Zc("fo", "fragment output", 3, b ? 1024 : 1 == a ? 0 : 3,
                        33);
                    c.h.fo = d;
                    c = W.REGMAP;
                    d = new Zc("fd", "fragment depth output", 6, b ? 1024 : 1 == a ? -1 : 0, 33);
                    c.h.fd = d;
                    c = W.REGMAP;
                    d = new Zc("iid", "instance id", 7, b ? 1024 : 0, 66);
                    c.h.iid = d;
                    d = W.REGMAP.h.vo;
                    W.REGMAP.h.op = d;
                    d = W.REGMAP.h.vi;
                    W.REGMAP.h.i = d;
                    d = W.REGMAP.h.vi;
                    W.REGMAP.h.v = d;
                    d = W.REGMAP.h.fo;
                    W.REGMAP.h.oc = d;
                    d = W.REGMAP.h.fd;
                    W.REGMAP.h.od = d;
                    d = W.REGMAP.h.vi;
                    W.REGMAP.h.fi = d
                },
                match: function (a, b) {
                    for (var c = [], d = 0; b.matchSub(a, d);) d = b.matched(0), c.push(d), d = b.matchedPos().pos + d.length;
                    return c
                },
                __class__: W
            };
            var La = function (a, b,
                               c, d) {
                this.name = a;
                this.numRegister = b;
                this.emitCode = c;
                this.flags = d
            };
            g["openfl.utils._AGALMiniAssembler.OpCode"] = La;
            La.__name__ = "openfl.utils._AGALMiniAssembler.OpCode";
            La.prototype = {
                __class__: La
            };
            var Zc = function (a, b, c, d, e) {
                this.name = a;
                this.longName = b;
                this.emitCode = c;
                this.range = d;
                this.flags = e
            };
            g["openfl.utils._AGALMiniAssembler.Register"] = Zc;
            Zc.__name__ = "openfl.utils._AGALMiniAssembler.Register";
            Zc.prototype = {
                toString: function () {
                    return '[Register name="' + this.name + '", longName="' + this.longName + '", emitCode=' +
                        (null == this.emitCode ? "null" : n.string(J.toFloat(this.emitCode))) + ", range=" + (null == this.range ? "null" : n.string(J.toFloat(this.range))) + ", flags=" + (null == this.flags ? "null" : n.string(J.toFloat(this.flags))) + "]"
                },
                __class__: Zc
            };
            var wb = function (a, b, c) {
                this.name = a;
                this.flag = b;
                this.mask = c
            };
            g["openfl.utils._AGALMiniAssembler.Sampler"] = wb;
            wb.__name__ = "openfl.utils._AGALMiniAssembler.Sampler";
            wb.prototype = {
                __class__: wb
            };
            var Kj = function () {
            };
            g["openfl.utils.IAssetCache"] = Kj;
            Kj.__name__ = "openfl.utils.IAssetCache";
            Kj.__isInterface__ = !0;
            Kj.prototype = {
                __class__: Kj,
                __properties__: {
                    get_enabled: "get_enabled"
                }
            };
            var Lj = function () {
                this.__enabled = !0;
                this.bitmapData = new Ha;
                this.font = new Ha;
                this.sound = new Ha
            };
            g["openfl.utils.AssetCache"] = Lj;
            Lj.__name__ = "openfl.utils.AssetCache";
            Lj.__interfaces__ = [Kj];
            Lj.prototype = {
                getFont: function (a) {
                    return this.font.h[a]
                },
                hasFont: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.font.h, a)
                },
                setFont: function (a, b) {
                    this.font.h[a] = b
                },
                get_enabled: function () {
                    return this.__enabled
                },
                __class__: Lj,
                __properties__: {
                    get_enabled: "get_enabled"
                }
            };
            var Ae = function () {
                sb.call(this)
            };
            g["openfl.utils.AssetLibrary"] = Ae;
            Ae.__name__ = "openfl.utils.AssetLibrary";
            Ae.fromBundle = function (a) {
                a = sb.fromBundle(a);
                if (null != a) {
                    if (a instanceof Ae) return a;
                    var b = new Ae;
                    b.__proxy = a;
                    return b
                }
                return null
            };
            Ae.fromManifest = function (a) {
                a = sb.fromManifest(a);
                if (null != a) {
                    if (a instanceof Ae) return a;
                    var b = new Ae;
                    b.__proxy = a;
                    return b
                }
                return null
            };
            Ae.__super__ = sb;
            Ae.prototype = l(sb.prototype, {
                bind: function (a, b) {
                    return !1
                },
                exists: function (a, b) {
                    return null != this.__proxy ? this.__proxy.exists(a, b) : sb.prototype.exists.call(this, a, b)
                },
                getAsset: function (a, b) {
                    return null != this.__proxy ? this.__proxy.getAsset(a, b) : sb.prototype.getAsset.call(this, a, b)
                },
                getAudioBuffer: function (a) {
                    return null != this.__proxy ? this.__proxy.getAudioBuffer(a) : sb.prototype.getAudioBuffer.call(this, a)
                },
                getBytes: function (a) {
                    return null != this.__proxy ? this.__proxy.getBytes(a) : sb.prototype.getBytes.call(this, a)
                },
                getFont: function (a) {
                    return null != this.__proxy ?
                        this.__proxy.getFont(a) : sb.prototype.getFont.call(this, a)
                },
                getImage: function (a) {
                    return null != this.__proxy ? this.__proxy.getImage(a) : sb.prototype.getImage.call(this, a)
                },
                getPath: function (a) {
                    return null != this.__proxy ? this.__proxy.getPath(a) : sb.prototype.getPath.call(this, a)
                },
                getText: function (a) {
                    return null != this.__proxy ? this.__proxy.getText(a) : sb.prototype.getText.call(this, a)
                },
                isLocal: function (a, b) {
                    return null != this.__proxy ? this.__proxy.isLocal(a, b) : sb.prototype.isLocal.call(this, a, b)
                },
                load: function () {
                    return null !=
                    this.__proxy ? this.__proxy.load() : sb.prototype.load.call(this)
                },
                loadAudioBuffer: function (a) {
                    return null != this.__proxy ? this.__proxy.loadAudioBuffer(a) : sb.prototype.loadAudioBuffer.call(this, a)
                },
                loadBytes: function (a) {
                    return null != this.__proxy ? this.__proxy.loadBytes(a) : sb.prototype.loadBytes.call(this, a)
                },
                loadFont: function (a) {
                    return null != this.__proxy ? this.__proxy.loadFont(a) : sb.prototype.loadFont.call(this, a)
                },
                loadImage: function (a) {
                    return null != this.__proxy ? this.__proxy.loadImage(a) : sb.prototype.loadImage.call(this,
                        a)
                },
                loadText: function (a) {
                    return null != this.__proxy ? this.__proxy.loadText(a) : sb.prototype.loadText.call(this, a)
                },
                unload: function () {
                    null != this.__proxy ? this.__proxy.unload() : sb.prototype.unload.call(this)
                },
                __class__: Ae
            });
            var mc = function () {
            };
            g["openfl.utils.Assets"] = mc;
            mc.__name__ = "openfl.utils.Assets";
            mc.exists = function (a, b) {
                return za.exists(a, b)
            };
            mc.getFont = function (a, b) {
                null == b && (b = !0);
                if (b && mc.cache.get_enabled() && mc.cache.hasFont(a)) return mc.cache.getFont(a);
                var c = za.getFont(a, !1);
                if (null != c) {
                    var d =
                        new pa;
                    d.__fromLimeFont(c);
                    b && mc.cache.get_enabled() && mc.cache.setFont(a, d);
                    return d
                }
                return new pa
            };
            mc.getText = function (a) {
                return za.getText(a)
            };
            var Ue = {
                    __properties__: {
                        set_length: "set_length",
                        get_length: "get_length"
                    },
                    fromArrayBuffer: function (a) {
                        return null == a ? null : sc.fromBytes(nb.ofData(a))
                    },
                    fromBytes: function (a) {
                        return null == a ? null : a instanceof sc ? a : sc.fromBytes(a)
                    },
                    toBytes: function (a) {
                        return a
                    },
                    get_length: function (a) {
                        return null == a ? 0 : a.length
                    },
                    set_length: function (a, b) {
                        0 <= b && (a.__resize(b), b < a.position &&
                        (a.position = b));
                        return a.length = b
                    }
                },
                Il = function () {
                };
            g["openfl.utils.IDataOutput"] = Il;
            Il.__name__ = "openfl.utils.IDataOutput";
            Il.__isInterface__ = !0;
            var Jl = function () {
            };
            g["openfl.utils.IDataInput"] = Jl;
            Jl.__name__ = "openfl.utils.IDataInput";
            Jl.__isInterface__ = !0;
            var sc = function (a) {
                null == a && (a = 0);
                var b = new nb(new ArrayBuffer(a));
                nb.call(this, b.b.buffer);
                this.__allocated = a;
                null == sc.__defaultEndian && (Yb.get_endianness() == gj.LITTLE_ENDIAN ? sc.__defaultEndian = 1 : sc.__defaultEndian = 0);
                this.__endian = sc.__defaultEndian;
                this.objectEncoding = sc.defaultObjectEncoding;
                this.position = 0
            };
            g["openfl.utils.ByteArrayData"] = sc;
            sc.__name__ = "openfl.utils.ByteArrayData";
            sc.__interfaces__ = [Il, Jl];
            sc.fromBytes = function (a) {
                var b = new sc;
                b.__fromBytes(a);
                return b
            };
            sc.__super__ = nb;
            sc.prototype = l(nb.prototype, {
                readByte: function () {
                    var a = this.readUnsignedByte();
                    return 0 != (a & 128) ? a - 256 : a
                },
                readInt: function () {
                    var a = this.readUnsignedByte(),
                        b = this.readUnsignedByte(),
                        c = this.readUnsignedByte(),
                        d = this.readUnsignedByte();
                    return 1 == this.__endian ?
                        d << 24 | c << 16 | b << 8 | a : a << 24 | b << 16 | c << 8 | d
                },
                readUnsignedByte: function () {
                    if (this.position < this.length) return this.b[this.position++];
                    throw new fh;
                },
                readUnsignedInt: function () {
                    var a = this.readUnsignedByte(),
                        b = this.readUnsignedByte(),
                        c = this.readUnsignedByte(),
                        d = this.readUnsignedByte();
                    return 1 == this.__endian ? d << 24 | c << 16 | b << 8 | a : a << 24 | b << 16 | c << 8 | d
                },
                readUnsignedShort: function () {
                    var a = this.readUnsignedByte(),
                        b = this.readUnsignedByte();
                    return 1 == this.__endian ? (b << 8) + a : a << 8 | b
                },
                readUTF: function () {
                    var a = this.readUnsignedShort();
                    return this.readUTFBytes(a)
                },
                readUTFBytes: function (a) {
                    if (this.position + a > this.length) throw new fh;
                    this.position += a;
                    return this.getString(this.position - a, a)
                },
                writeByte: function (a) {
                    this.__resize(this.position + 1);
                    this.b[this.position++] = a & 255
                },
                writeInt: function (a) {
                    this.__resize(this.position + 4);
                    1 == this.__endian ? (this.b[this.position++] = a & 255, this.b[this.position++] = a >> 8 & 255, this.b[this.position++] = a >> 16 & 255, this.b[this.position++] = a >> 24 & 255) : (this.b[this.position++] = a >> 24 & 255, this.b[this.position++] =
                        a >> 16 & 255, this.b[this.position++] = a >> 8 & 255, this.b[this.position++] = a & 255)
                },
                writeShort: function (a) {
                    this.__resize(this.position + 2);
                    1 == this.__endian ? (this.b[this.position++] = a & 255, this.b[this.position++] = a >> 8 & 255) : (this.b[this.position++] = a >> 8 & 255, this.b[this.position++] = a & 255)
                },
                writeUnsignedInt: function (a) {
                    this.writeInt(a)
                },
                __fromBytes: function (a) {
                    this.b = a.b;
                    this.__allocated = a.length;
                    this.data = a.data;
                    this.length = a.length
                },
                __resize: function (a) {
                    if (a > this.__allocated) {
                        var b = new nb(new ArrayBuffer(3 * (a +
                            1) >> 1));
                        if (0 < this.__allocated) {
                            var c = this.length;
                            this.length = this.__allocated;
                            b.blit(0, this, 0, this.__allocated);
                            this.length = c
                        }
                        this.b = b.b;
                        this.__allocated = b.length;
                        this.data = b.data
                    }
                    this.length < a && (this.length = a)
                },
                __class__: sc
            });
            var wd = {
                    __get: function (a, b) {
                        if (null == a || null == b) return null;
                        if (Object.prototype.hasOwnProperty.call(a, b)) return M.field(a, b);
                        if (a instanceof oa) {
                            var c = a.getChildByName(b);
                            if (null != c) return c
                        }
                        return M.getProperty(a, b)
                    },
                    __eq: function (a, b) {
                        return a == b
                    }
                },
                Mj = function () {
                };
            g["haxe.lang.Iterator"] =
                Mj;
            Mj.__name__ = "haxe.lang.Iterator";
            Mj.__isInterface__ = !0;
            Mj.prototype = {
                __class__: Mj
            };
            var Nj = function () {
            };
            g["haxe.lang.Iterable"] = Nj;
            Nj.__name__ = "haxe.lang.Iterable";
            Nj.__isInterface__ = !0;
            Nj.prototype = {
                __class__: Nj
            };
            var Si = function (a, b) {
                null == b && (b = 0);
                if (isNaN(a) || 0 > a) throw new Fa("The delay specified is negative or not a finite number");
                O.call(this);
                this.__delay = a;
                this.__repeatCount = b;
                this.running = !1;
                this.currentCount = 0
            };
            g["openfl.utils.Timer"] = Si;
            Si.__name__ = "openfl.utils.Timer";
            Si.__super__ = O;
            Si.prototype = l(O.prototype, {
                start: function () {
                    this.running || (this.running = !0, this.__timerID = window.setInterval(p(this, this.timer_onTimer), this.__delay | 0))
                },
                stop: function () {
                    this.running = !1;
                    null != this.__timerID && (window.clearInterval(this.__timerID), this.__timerID = null)
                },
                __handleUpdateAfterEvent: function () {
                    null != Na.get_current() && null != Na.get_current().stage && Na.get_current().stage.__renderAfterEvent()
                },
                timer_onTimer: function () {
                    this.currentCount++;
                    if (0 < this.__repeatCount && this.currentCount >= this.__repeatCount) {
                        this.stop();
                        var a = new lg("timer");
                        this.dispatchEvent(a);
                        a.__updateAfterEventFlag && this.__handleUpdateAfterEvent();
                        a = new lg("timerComplete")
                    } else a = new lg("timer");
                    this.dispatchEvent(a);
                    a.__updateAfterEventFlag && this.__handleUpdateAfterEvent()
                },
                __class__: Si
            });
            var gc = function () {
            };
            g["openfl.utils._internal.Lib"] = gc;
            gc.__name__ = "openfl.utils._internal.Lib";
            var uf = function () {
                this.rollOutStack = []
            };
            g["openfl.utils._internal.TouchData"] = uf;
            uf.__name__ = "openfl.utils._internal.TouchData";
            uf.prototype = {
                reset: function () {
                    this.touchOverTarget =
                        this.touchDownTarget = this.touch = null;
                    this.rollOutStack.splice(0, this.rollOutStack.length)
                },
                __class__: uf
            };
            F.$haxeUID |= 0;
            "undefined" != typeof performance && "function" == typeof performance.now && (ja.now = performance.now.bind(performance));
            g.Math = Math;
            null == String.fromCodePoint && (String.fromCodePoint = function (a) {
                return 65536 > a ? String.fromCharCode(a) : String.fromCharCode((a >> 10) + 55232) + String.fromCharCode((a & 1023) + 56320)
            });
            Object.defineProperty(String.prototype, "__class__", {
                value: g.String = String,
                enumerable: !1,
                writable: !0
            });
            String.__name__ = "String";
            g.Array = Array;
            Array.__name__ = "Array";
            Date.prototype.__class__ = g.Date = Date;
            Date.__name__ = "Date";
            var Nl = {},
                Wl = {},
                Xl = Number,
                Vl = Boolean,
                Ol = {},
                Pl = {};
            Rc.NIL = new Rc(null, null);
            T.__toStr = {}.toString;
            K.__alpha16 = new Uint32Array(256);
            for (var ng = 0; 256 > ng;) {
                var jh = ng++;
                K.__alpha16[jh] = Math.ceil(257.00392156862745 * jh)
            }
            K.__clamp = new Uint8Array(511);
            for (ng = 0; 255 > ng;) jh = ng++, K.__clamp[jh] = jh;
            for (ng = 255; 511 > ng;) jh = ng++, K.__clamp[jh] = 255;
            ua.level = 3;
            "undefined" == typeof console &&
            (console = {});
            null == console.log && (console.log = function () {
            });
            z.hitTestCanvas = Qe.get_supported() ? window.document.createElement("canvas") : null;
            z.hitTestContext = Qe.get_supported() ? z.hitTestCanvas.getContext("2d") : null;
            D.__meta__ = {
                statics: {
                    toNullVector: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            da.__meta__ = {
                fields: {
                    __cairo: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    addEventListener: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    removeEventListener: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            da.__broadcastEvents =
                new Ha;
            da.__instanceCount = 0;
            da.__tempStack = new xa(function () {
                return D.toObjectVector(null)
            }, function (a) {
                a.set_length(0)
            });
            pa.__fontByName = new Ha;
            pa.__registeredFonts = [];
            Uc.POST_PRIORITY = 9;
            Uc.COLOR_PRIORITY = 18;
            Zb.GLOBAL = "Global";
            Zb.LOCAL_STATIC = "LocalStatic";
            Zb.LOCAL_DYNAMIC = "LocalDynamic";
            Zb.MODES = [Zb.GLOBAL, Zb.LOCAL_STATIC, Zb.LOCAL_DYNAMIC];
            Kb._currentId = 0;
            na._viewCount = 0;
            na._queuedEvents = D.toObjectVector(null);
            na._mouseUp = new Ad("mouseUp3d");
            na._mouseClick = new Ad("click3d");
            na._mouseOut = new Ad("mouseOut3d");
            na._mouseDown = new Ad("mouseDown3d");
            na._mouseMove = new Ad("mouseMove3d");
            na._mouseOver = new Ad("mouseOver3d");
            na._mouseWheel = new Ad("mouseWheel3d");
            na._mouseDoubleClick = new Ad("doubleClick3d");
            na._previousCollidingView = -1;
            na._collidingView = -1;
            Tb._numStageProxies = 0;
            la.__meta__ = {
                fields: {
                    equals: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            la.__identity = new la;
            la.__pool = new xa(function () {
                return new la
            }, function (a) {
                a.identity()
            });
            ib.__pool = new xa(function () {
                return new ib
            }, function (a) {
                a.__identity()
            });
            Oa._frameEventDriver = new je;
            jc._queuedEvents = D.toObjectVector(null);
            De.RADIANS_TO_DEGREES = 180 / Math.PI;
            De.DEGREES_TO_RADIANS = Math.PI / 180;
            kb.RAW_DATA_CONTAINER = D.toFloatVector(null, 16);
            kb.CALCULATION_MATRIX = new xb;
            kb.CALCULATION_VECTOR3D = new Q;
            kb.CALCULATION_DECOMPOSE = function (a) {
                a = [new Q, new Q, new Q];
                for (var b = D.toObjectVector(null), c = 0, d = a.length; c < d;) {
                    var e = c++;
                    b.set(e, a[e])
                }
                return b
            }(this);
            Ge.tempRayPosition = new Q;
            Ge.tempRayDirection = new Q;
            ha.__pool = new xa(function () {
                return new ha
            }, function (a) {
                a.setTo(0,
                    0, 0, 0)
            });
            bk.RAYCAST_FIRST_ENCOUNTERED = new Ge(!1);
            yd.RTT_PASSES = 1;
            yd.SCREEN_PASSES = 2;
            yd.ALL_PASSES = 3;
            Fe._collectionMark = 0;
            ie.active = !1;
            fd.LIMIT = 196605;
            kc.MATERIAL_ID_COUNT = 0;
            ic._regPool = new Ha;
            ic._regCompsPool = new Ha;
            Nb.COMPONENTS = ["x", "y", "z", "w"];
            ob._previousUsedStreams = function (a) {
                a = [0, 0, 0, 0, 0, 0, 0, 0];
                for (var b = D.toIntVector(null), c = 0, d = a.length; c < d;) {
                    var e = c++;
                    b.set(e, a[e])
                }
                return b
            }(this);
            ob._previousUsedTexs = function (a) {
                a = [0, 0, 0, 0, 0, 0, 0, 0];
                for (var b = D.toIntVector(null), c = 0, d = a.length; c < d;) {
                    var e =
                        c++;
                    b.set(e, a[e])
                }
                return b
            }(this);
            Ie.ONE_VECTOR = function (a) {
                a = [1, 1, 1, 1];
                for (var b = D.toFloatVector(null), c = 0, d = a.length; c < d;) {
                    var e = c++;
                    b.set(e, a[e])
                }
                return b
            }(this);
            Ie.FRONT_VECTOR = function (a) {
                a = [0, 0, -1, 0];
                for (var b = D.toFloatVector(null), c = 0, d = a.length; c < d;) {
                    var e = c++;
                    b.set(e, a[e])
                }
                return b
            }(this);
            dc._matrix = new la;
            dc._rect = new ha;
            Ob._mipMaps = [];
            Ob._mipMapUses = [];
            lc.offset = 10;
            lc.delay = 4;
            Ma.windows = [];
            ea.black = 0;
            ea.dark = 4473924;
            ea.medium = 8947848;
            ea.light = 13421772;
            ea.white = 16777215;
            ea.uiFont = "_sans";
            ea.uiFontMono = "_typewriter";
            ea.smallSize = 20;
            ea.normalSize = 24;
            Bc.okCancel = ["OK", "Cancel"];
            nc.lastTab = 0;
            Zd.THICKNESS = .8;
            Zd.HEIGHT = 5;
            Ka.elevation = !1;
            Ka.gableRoofs = !0;
            Ka.showWindows = !0;
            Ka.showTrees = !0;
            Ka.radius = 3E3;
            ba.__pool = new xa(function () {
                return new ba
            }, function (a) {
                a.setTo(0, 0)
            });
            ia.uvWalls = [new ba(.125, .25), new ba(.125, .75), new ba(.125, .75), new ba(.125, .25)];
            ia.uvRoof0 = new ba(.375, .25);
            ia.uvDark = new ba(.625, .25);
            ia.uvDarkWindow = function (a) {
                a = [];
                a.push(ia.uvDark);
                a.push(ia.uvDark);
                a.push(ia.uvDark);
                a.push(ia.uvDark);
                return a
            }(this);
            ia.uvRoof = ia.uvRoof0.clone();
            ia.uvWall = function (a) {
                a = [];
                for (var b = 0, c = ia.uvWalls; b < c.length;) {
                    var d = c[b];
                    ++b;
                    a.push(d.clone())
                }
                return a
            }(this);
            ia.uvWallQuad = function (a) {
                a = [];
                for (var b = 0, c = ia.uvWalls; b < c.length;) {
                    var d = c[b];
                    ++b;
                    a.push(d.clone())
                }
                return a
            }(this);
            ia.faLights = new Xc;
            Pb.wallTopUV = [ia.uvWalls[1], ia.uvWalls[1], ia.uvWalls[1], ia.uvWalls[1]];
            Pb.roofUV = [ia.uvRoof0, ia.uvRoof0, ia.uvRoof0];
            Pb.overhangUV = [ia.uvRoof0, ia.uvRoof0, ia.uvRoof0, ia.uvRoof0];
            bc.LEGACY_SCALE =
                111E3;
            bc.JUMP_DISTANCE = 10;
            Va.samples = "harbour delta river small medium island village street".split(" ");
            Va.lastSample = "island";
            Va.schemes = "midlands desert frost harvest innsmouth night".split(" ");
            Va.shuffleStyles = !0;
            Qf.values = function (a) {
                a = new Ha;
                a.h.aliceblue = 15792383;
                a.h.antiquewhite = 16444375;
                a.h.aqua = 65535;
                a.h.aquamarine = 8388564;
                a.h.azure = 15794175;
                a.h.beige = 16119260;
                a.h.bisque = 16770244;
                a.h.black = 0;
                a.h.blanchedalmond = 16772045;
                a.h.blue = 255;
                a.h.blueviolet = 9055202;
                a.h.brown = 10824234;
                a.h.burlywood =
                    14596231;
                a.h.cadetblue = 6266528;
                a.h.chartreuse = 8388352;
                a.h.chocolate = 13789470;
                a.h.coral = 16744272;
                a.h.cornflowerblue = 6591981;
                a.h.cornsilk = 16775388;
                a.h.crimson = 14423100;
                a.h.cyan = 65535;
                a.h.darkblue = 139;
                a.h.darkcyan = 35723;
                a.h.darkgoldenrod = 12092939;
                a.h.darkgreen = 25600;
                a.h.darkgrey = 11119017;
                a.h.darkkhaki = 12433259;
                a.h.darkmagenta = 9109643;
                a.h.darkolivegreen = 5597999;
                a.h.darkorange = 16747520;
                a.h.darkorchid = 10040012;
                a.h.darkred = 9109504;
                a.h.darksalmon = 15308410;
                a.h.darkseagreen = 9419919;
                a.h.darkslateblue = 4734347;
                a.h.darkslategrey = 3100495;
                a.h.darkturquoise = 52945;
                a.h.darkviolet = 9699539;
                a.h.deeppink = 16716947;
                a.h.deepskyblue = 49151;
                a.h.dimgrey = 6908265;
                a.h.dodgerblue = 2003199;
                a.h.firebrick = 11674146;
                a.h.floralwhite = 16775920;
                a.h.forestgreen = 2263842;
                a.h.fuchsia = 16711935;
                a.h.gainsboro = 14474460;
                a.h.ghostwhite = 16316671;
                a.h.goldenrod = 14329120;
                a.h.gold = 16766720;
                a.h.green = 32768;
                a.h.greenyellow = 11403055;
                a.h.grey = 8421504;
                a.h.honeydew = 15794160;
                a.h.hotpink = 16738740;
                a.h.indianred = 13458524;
                a.h.indigo = 4915330;
                a.h.ivory = 16777200;
                a.h.khaki = 15787660;
                a.h.lavenderblush = 16773365;
                a.h.lavender = 15132410;
                a.h.lawngreen = 8190976;
                a.h.lemonchiffon = 16775885;
                a.h.lightblue = 11393254;
                a.h.lightcoral = 15761536;
                a.h.lightcyan = 14745599;
                a.h.lightgoldenrodyellow = 16448210;
                a.h.lightgreen = 9498256;
                a.h.lightgrey = 13882323;
                a.h.lightpink = 16758465;
                a.h.lightsalmon = 16752762;
                a.h.lightseagreen = 2142890;
                a.h.lightskyblue = 8900346;
                a.h.lightslategrey = 7833753;
                a.h.lightsteelblue = 11584734;
                a.h.lightyellow = 16777184;
                a.h.lime = 65280;
                a.h.limegreen = 3329330;
                a.h.linen = 16445670;
                a.h.magenta = 16711935;
                a.h.maroon = 8388608;
                a.h.mediumaquamarine = 6737322;
                a.h.mediumblue = 205;
                a.h.mediumorchid = 12211667;
                a.h.mediumpurple = 9662683;
                a.h.mediumseagreen = 3978097;
                a.h.mediumslateblue = 8087790;
                a.h.mediumspringgreen = 64154;
                a.h.mediumturquoise = 4772300;
                a.h.mediumvioletred = 13047173;
                a.h.midnightblue = 1644912;
                a.h.mintcream = 16121850;
                a.h.mistyrose = 16770273;
                a.h.moccasin = 16770229;
                a.h.navajowhite = 16768685;
                a.h.navy = 128;
                a.h.oldlace = 16643558;
                a.h.olive = 8421376;
                a.h.olivedrab = 7048739;
                a.h.orange = 16753920;
                a.h.orangered =
                    16729344;
                a.h.orchid = 14315734;
                a.h.palegoldenrod = 15657130;
                a.h.palegreen = 10025880;
                a.h.paleturquoise = 11529966;
                a.h.palevioletred = 14381203;
                a.h.papayawhip = 16773077;
                a.h.peachpuff = 16767673;
                a.h.peru = 13468991;
                a.h.pink = 16761035;
                a.h.plum = 14524637;
                a.h.powderblue = 11591910;
                a.h.purple = 8388736;
                a.h.rebeccapurple = 6697881;
                a.h.red = 16711680;
                a.h.rosybrown = 12357519;
                a.h.royalblue = 4286945;
                a.h.saddlebrown = 9127187;
                a.h.salmon = 16416882;
                a.h.sandybrown = 16032864;
                a.h.seagreen = 3050327;
                a.h.seashell = 16774638;
                a.h.sienna = 10506797;
                a.h.silver =
                    12632256;
                a.h.skyblue = 8900331;
                a.h.slateblue = 6970061;
                a.h.slategrey = 7372944;
                a.h.snow = 16775930;
                a.h.springgreen = 65407;
                a.h.steelblue = 4620980;
                a.h.tan = 13808780;
                a.h.teal = 32896;
                a.h.thistle = 14204888;
                a.h.tomato = 16737095;
                a.h.turquoise = 4251856;
                a.h.violet = 15631086;
                a.h.wheat = 16113331;
                a.h.white = 16777215;
                a.h.whitesmoke = 16119285;
                a.h.yellow = 16776960;
                a.h.yellowgreen = 10145074;
                return a
            }(this);
            re.permutation = [151, 160, 137, 91, 90, 15, 131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23, 190, 6, 148, 247, 120,
                234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33, 88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166, 77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244, 102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196, 135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123, 5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42, 223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172,
                9, 129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228, 251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107, 49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254, 138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180
            ];
            x.seed = 1;
            eb._tick = new ac;
            eb.lastTime = 0;
            eb.timeScale = 1;
            Sc.USE_CACHE = !1;
            Sc.USE_ENUM_INDEX = !1;
            Sc.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
            Dc.DEFAULT_RESOLVER = new Ti;
            Dc.BASE64 =
                "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
            pc.LEN_EXTRA_BITS_TBL = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, -1, -1];
            pc.LEN_BASE_VAL_TBL = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258];
            pc.DIST_EXTRA_BITS_TBL = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, -1, -1];
            pc.DIST_BASE_VAL_TBL = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577];
            pc.CODE_LENGTHS_POS = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
            ta.activeRequests = 0;
            ta.requestLimit = 17;
            ta.requestQueue = new Da;
            Aa.dummyCharacter = "\u007f";
            Aa.windowID = 0;
            $d.DICTIONARY = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");
            $d.EXTENDED_DICTIONARY = function (a) {
                a = [];
                for (var b = 0, c = $d.DICTIONARY; b < c.length;) {
                    var d = c[b];
                    ++b;
                    for (var e = 0, f = $d.DICTIONARY; e < f.length;) {
                        var h = f[e];
                        ++e;
                        a.push(d + h)
                    }
                }
                return a
            }(this);
            Ya.__identity = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
            Vb.onUpdate = new Wb;
            Vb.__updated = !1;
            ge.sensorByID = new Db;
            ge.sensors = [];
            Mb.devices = new Db;
            Mb.onConnect = new Mk;
            Hb.devices = new Db;
            Hb.onConnect = new Nk;
            Ab.onCancel = new Zf;
            Ab.onEnd = new Zf;
            Ab.onMove = new Zf;
            Ab.onStart = new Zf;
            za.cache = new Qk;
            za.onChange = new Wb;
            za.bundlePaths = new Ha;
            za.libraries = new Ha;
            za.libraryPaths = new Ha;
            ua.throwErrors = !0;
            Na.__lastTimerID = 0;
            Na.__timers = new Db;
            ve.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            rg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    toJSON: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            xd.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    toJSON: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            kj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    toJSON: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            bf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    toJSON: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Pd.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    concat: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    toJSON: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            og.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            mb.__meta__ = {
                fields: {
                    image: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __framebufferContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __indexBufferContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __surface: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __textureContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __vertexBufferContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __fromImage: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            mb.__tempVector = new mf;
            Fc.__meta__ = {
                fields: {
                    __context: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __type: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            lj.__meta__ = {
                fields: {
                    cairo: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __matrix3: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    applyMatrix: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __setBlendModeCairo: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            we.__meta__ = {
                fields: {
                    context: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    applySmoothing: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    setTransform: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __setBlendModeContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            pj.__meta__ = {
                fields: {
                    __element: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Yg.__meta__ = {
                fields: {
                    element: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            vd.__meta__ = {
                fields: {
                    glProgram: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Nd.__meta__ = {
                statics: {
                    create: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                },
                fields: {
                    parameters: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Nd.__rootURL = Qe.get_supported() ? window.document.URL : "";
            Ra.__meta__ = {
                fields: {
                    gl: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __gl: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __matrix: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __projection: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __projectionFlipped: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Ra.__alphaValue = [1];
            Ra.__colorMultipliersValue = [0, 0, 0, 0];
            Ra.__colorOffsetsValue = [0, 0, 0, 0];
            Ra.__emptyColorValue = [0, 0, 0, 0];
            Ra.__hasColorTransformValue = [!1];
            Ra.__scissorRectangle = new ha;
            Ra.__textureSizeValue = [0, 0];
            kh.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    onComplete: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            pg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            sj.__meta__ = {
                fields: {
                    index: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    name: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            bg.__meta__ = {
                fields: {
                    index: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    name: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            fg.__meta__ = {
                fields: {
                    __broadcastEvent: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __dispatchEvent: {
                        SuppressWarnings: [
                            ["checkstyle:Dynamic", "checkstyle:LeftCurly"]
                        ]
                    },
                    __dispatchStack: {
                        SuppressWarnings: [
                            ["checkstyle:Dynamic", "checkstyle:LeftCurly"]
                        ]
                    },
                    __dispatchTarget: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __handleError: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Cj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Wg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Xg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            of.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Hc.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    o: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Hc.empty = new Hc;
            z.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                statics: {
                    windingRule: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    createBitmapFill: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    createGradientPattern: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            z.fillCommands = new Hc;
            z.strokeCommands = new Hc;
            P.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            xe.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                statics: {
                    renderTileContainer: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            pf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            ld.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            bh.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            rf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            tb.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            tb.blankBitmapData = new mb(1, 1, !1, 0);
            tb.tempColorTransform = new ib(1, 1, 1, 1, 0, 0, 0, 0);
            qf.opaqueBitmapData = new mb(1, 1, !1, 0);
            de.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            ze.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            L.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            md.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            md.__textureSizeValue = [0, 0];
            cb.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Gc.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Xe.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Ve.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            We.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            ye.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            ce.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            vf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            uj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    overrideIntValues: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Sa.__glDepthStencil = -1;
            Sa.__glMaxTextureMaxAnisotropy = -1;
            Sa.__glMaxViewportDims = -1;
            Sa.__glMemoryCurrentAvailable = -1;
            Sa.__glMemoryTotalAvailable = -1;
            Sa.__glTextureMaxAnisotropy = -1;
            Ej.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            eh.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            rc.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            rc.limitedProfile = !0;
            gg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Fj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            hg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            wf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            ch.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Ua.__meta__ = {
                fields: {
                    __textureContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __getGLFramebuffer: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            qg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            af.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            af.supportsWeakReference = Object.prototype.hasOwnProperty.call(F, "WeakRef");
            xf.__meta__ = {
                fields: {
                    clone: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            Od.__soundChannels = [];
            Od.__soundTransform = new xf;
            oc.defaultObjectEncoding = 10;
            Ye.followRedirects = !0;
            Ye.idleTimeout = 0;
            Ye.manageCookies = !0;
            cg.currentDomain = new cg(null);
            Ne.__meta__ = {
                fields: {
                    clone: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            ih.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            ya.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            ya.__regexAlign = new ra("align\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            ya.__regexBreakTag = new ra("<br\\s*/?>", "gi");
            ya.__regexBlockIndent = new ra("blockindent\\s?=\\s?(\"([^\"]+)\"|'([^']+)')",
                "i");
            ya.__regexClass = new ra("class\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            ya.__regexColor = new ra("color\\s?=\\s?(\"#([^\"]+)\"|'#([^']+)')", "i");
            ya.__regexEntities = [new ra("&quot;", "g"), new ra("&apos;", "g"), new ra("&amp;", "g"), new ra("&lt;", "g"), new ra("&gt;", "g"), new ra("&nbsp;", "g")];
            ya.__regexCharEntity = new ra("&#(?:([0-9]+)|(x[0-9a-fA-F]+));", "g");
            ya.__regexFace = new ra("face\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            ya.__regexHTMLTag = new ra("<.*?>", "g");
            ya.__regexHref = new ra("href\\s?=\\s?(\"([^\"]+)\"|'([^']+)')",
                "i");
            ya.__regexIndent = new ra(" indent\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            ya.__regexLeading = new ra("leading\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            ya.__regexLeftMargin = new ra("leftmargin\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            ya.__regexRightMargin = new ra("rightmargin\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            ya.__regexSize = new ra("size\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            ya.__regexTabStops = new ra("tabstops\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            mg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            lb.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Jj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Za.__meta__ = {
                fields: {
                    addEventListener: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Za.numDevices = 0;
            Za.__deviceList = [];
            Za.__instances = [];
            Za.__devices = new N;
            Vk.__cursor = "auto";
            W.__meta__ = {
                obj: {
                    SuppressWarnings: [
                        ["checkstyle:ConstantName", "checkstyle:FieldDocComment"]
                    ]
                }
            };
            W.OPMAP = new Ha;
            W.REGMAP = new Ha;
            W.SAMPLEMAP = new Ha;
            W.initialized = !1;
            La.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Zc.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            wb.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            mc.cache = new Lj;
            sc.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            sc.defaultObjectEncoding = 10;
            wd.__meta__ = {
                statics: {
                    __get: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            Mj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Nj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            gc.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            uf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    touch: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            uf.__pool = new xa(function () {
                return new uf
            }, function (a) {
                a.reset()
            });
            w.main()
        })("undefined" != typeof u ? u : "undefined" != typeof window ? window : "undefined" != typeof self ? self : this, "undefined" != typeof window ? window : "undefined" != typeof w ? w : "undefined" != typeof self ? self : this)
    };
    LimeShared.registerLimeProject(S, u, "ToyTown2", S.lime.$scripts.ToyTown2);
    LimeShared.registerAmdLime(S);
})("undefined" != typeof exports ? exports : "function" == typeof define && define.amd ? {} : "undefined" != typeof window ? window : "undefined" != typeof self ? self : this, "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this);