import * as LimeShared from "./shared/lime.js";
import * as OpenflShared from "./shared/openfl.js";
import * as HaxeShared from "./shared/haxe.js";
import * as OthersShared from "./shared/others.js";
import * as FuncProto from "./shared/proto.js";

import * as DataDwellings from "./shared/data/Dwellings.js";

import * as DataProto from "./struct/data.js";
import * as FuncBin from "./shared/data/bin-verify.js";

const params = FuncProto.initParams(JSON.parse(String.raw`{{EMBED_PARAMETERS_JSON_DWELLINGS}}`));

var $lime_init = function (K, v) {
    var B = function (v, B) {
        (function (v, B) {
            var w = OthersShared.hxExtend;

            function G(a) {
                return a instanceof Array ? new vf(a) : a.iterator()
            }

            function m(a, b) {
                if (null == b) return null;
                null == b.__id__ && (b.__id__ = B.$haxeUID++);
                var c;
                null == a.hx__closures__ ? a.hx__closures__ = {} : c = a.hx__closures__[b.__id__];
                null == c && (c = b.bind(a), a.hx__closures__[b.__id__] = c);
                return c
            }

            v.lime = v.lime || {};
            var h = {},
                u = function () {
                    return Ua.__string_rec(this, "")
                },
                N = N || {},
                H, kb = function () {
                };
            h["lime.app.IModule"] = kb;
            kb.__name__ = "lime.app.IModule";
            kb.__isInterface__ = !0;
            kb.prototype = {
                __class__: kb
            };
            var ha = function () {
                this.onExit = new wf
            };
            h["lime.app.Module"] = ha;
            ha.__name__ = "lime.app.Module";
            ha.__interfaces__ = [kb];
            ha.prototype = {
                __registerLimeModule: function (a) {
                },
                __unregisterLimeModule: function (a) {
                },
                __class__: ha
            };
            var K = function (a) {
                this.gameDeviceCache = new Ec;
                this.parent = a;
                this.nextUpdate = this.lastUpdate = this.currentUpdate =
                    0;
                this.framePeriod = -1;
                ve.init();
                this.accelerometer = Ie.registerSensor(nm.ACCELEROMETER, 0)
            };
            h["lime._internal.backend.html5.HTML5Application"] = K;
            K.__name__ = "lime._internal.backend.html5.HTML5Application";
            K.prototype = {
                convertKeyCode: OthersShared.convertKeyCode,
                exec: function () {
                    window.addEventListener("keydown", m(this, this.handleKeyEvent), !1);
                    window.addEventListener("keyup", m(this, this.handleKeyEvent), !1);
                    window.addEventListener("focus", m(this, this.handleWindowEvent),
                        !1);
                    window.addEventListener("blur", m(this, this.handleWindowEvent), !1);
                    window.addEventListener("resize", m(this, this.handleWindowEvent), !1);
                    window.addEventListener("beforeunload", m(this, this.handleWindowEvent), !1);
                    Object.prototype.hasOwnProperty.call(window, "Accelerometer") && window.addEventListener("devicemotion", m(this, this.handleSensorEvent), !1);
                    CanvasRenderingContext2D.prototype.isPointInStroke || (CanvasRenderingContext2D.prototype.isPointInStroke = function (a, b, c) {
                        return !1
                    });
                    CanvasRenderingContext2D.prototype.isPointInPath ||
                    (CanvasRenderingContext2D.prototype.isPointInPath = function (a, b, c) {
                        return !1
                    });
                    0 == "performance" in window && (window.performance = {});
                    if (0 == "now" in window.performance) {
                        var a = Date.now();
                        performance.timing && performance.timing.navigationStart && (a = performance.timing.navigationStart);
                        window.performance.now = function () {
                            return Date.now() - a
                        }
                    }
                    for (var b = 0, c = ["ms", "moz", "webkit", "o"], d = 0; d < c.length && !window.requestAnimationFrame; ++d) window.requestAnimationFrame = window[c[d] + "RequestAnimationFrame"], window.cancelAnimationFrame =
                        window[c[d] + "CancelAnimationFrame"] || window[c[d] + "CancelRequestAnimationFrame"];
                    window.requestAnimationFrame || (window.requestAnimationFrame = function (a, c) {
                        var d = window.performance.now(),
                            f = Math.max(0, 16 - (d - b));
                        c = window.setTimeout(function () {
                            a(d + f)
                        }, f);
                        b = d + f;
                        return c
                    });
                    window.cancelAnimationFrame || (window.cancelAnimationFrame = OthersShared.cancelAnimationFrameClearTimeout);

                    window.requestAnimFrame = window.requestAnimationFrame;
                    this.lastUpdate = window.performance.now();
                    this.handleApplicationEvent();
                    return 0
                },
                exit: function () {
                },
                handleApplicationEvent: function (a) {
                    a = 0;
                    for (var b = this.parent.__windows; a < b.length;) {
                        var c = b[a];
                        ++a;
                        c.__backend.updateSize()
                    }
                    this.updateGameDevices();
                    this.currentUpdate = window.performance.now();
                    if (this.currentUpdate >= this.nextUpdate) {
                        this.deltaTime = this.currentUpdate - this.lastUpdate;
                        a = 0;
                        for (b = this.parent.__windows; a < b.length;) c = b[a], ++a, this.parent.onUpdate.dispatch(this.deltaTime | 0), null != c.context && c.onRender.dispatch(c.context);
                        this.nextUpdate = 0 > this.framePeriod ? this.currentUpdate : this.currentUpdate -
                            this.currentUpdate % this.framePeriod + this.framePeriod;
                        this.lastUpdate = this.currentUpdate
                    }
                    window.requestAnimationFrame(m(this, this.handleApplicationEvent))
                },
                handleKeyEvent: function (a) {
                    if (null != this.parent.__window) {
                        var b = this.convertKeyCode(null != a.keyCode ? a.keyCode : a.which),
                            c = (a.shiftKey ? 3 : 0) | (a.ctrlKey ? 192 : 0) | (a.altKey ? 768 : 0) | (a.metaKey ? 3072 : 0);
                        "keydown" == a.type ? (this.parent.__window.onKeyDown.dispatch(b, c), this.parent.__window.onKeyDown.canceled && a.cancelable && a.preventDefault()) : (this.parent.__window.onKeyUp.dispatch(b,
                            c), this.parent.__window.onKeyUp.canceled && a.cancelable && a.preventDefault())
                    }
                },
                handleSensorEvent: LimeShared.handleSensorEvent,
                handleWindowEvent: function (a) {
                    if (null != this.parent.__window) switch (a.type) {
                        case "blur":
                            this.hidden || (this.parent.__window.onFocusOut.dispatch(), this.parent.__window.onDeactivate.dispatch(), this.hidden = !0);
                            break;
                        case "focus":
                            this.hidden && (this.parent.__window.onFocusIn.dispatch(),
                                this.parent.__window.onActivate.dispatch(), this.hidden = !1);
                            break;
                        case "resize":
                            this.parent.__window.__backend.handleResizeEvent(a);
                            break;
                        case "visibilitychange":
                            window.document.hidden ? this.hidden || (this.parent.__window.onFocusOut.dispatch(), this.parent.__window.onDeactivate.dispatch(), this.hidden = !0) : this.hidden && (this.parent.__window.onFocusIn.dispatch(), this.parent.__window.onActivate.dispatch(), this.hidden = !1)
                    }
                },
                updateGameDevices: function () {
                    var a = uc.__getDeviceData();
                    if (null != a)
                        for (var b, c, d, g,
                                 f, k = 0, q = a.length; k < q;)
                            if (b = k++, g = a[b], null != g) {
                                if (!this.gameDeviceCache.h.hasOwnProperty(b)) {
                                    f = new sk;
                                    f.id = b;
                                    f.connected = g.connected;
                                    c = 0;
                                    for (d = g.buttons.length; c < d;) {
                                        var l = c++;
                                        f.buttons.push(g.buttons[l].value)
                                    }
                                    c = 0;
                                    for (d = g.axes.length; c < d;) l = c++, f.axes.push(g.axes[l]);
                                    "standard" == g.mapping && (f.isGamepad = !0);
                                    this.gameDeviceCache.h[b] = f;
                                    g.connected && (uc.__connect(b), f.isGamepad && xc.__connect(b))
                                }
                                f = this.gameDeviceCache.h[b];
                                d = uc.devices.h[b];
                                c = xc.devices.h[b];
                                if (g.connected) {
                                    for (var h = 0, Fa = g.buttons.length; h <
                                    Fa;) {
                                        var n = h++;
                                        l = g.buttons[n].value;
                                        if (l != f.buttons[n]) {
                                            if (6 == n) d.onAxisMove.dispatch(g.axes.length, l), null != c && c.onAxisMove.dispatch(4, l);
                                            else if (7 == n) d.onAxisMove.dispatch(g.axes.length + 1, l), null != c && c.onAxisMove.dispatch(5, l);
                                            else if (0 < l ? d.onButtonDown.dispatch(n) : d.onButtonUp.dispatch(n), null != c) {
                                                switch (n) {
                                                    case 0:
                                                        b = 0;
                                                        break;
                                                    case 1:
                                                        b = 1;
                                                        break;
                                                    case 2:
                                                        b = 2;
                                                        break;
                                                    case 3:
                                                        b = 3;
                                                        break;
                                                    case 4:
                                                        b = 9;
                                                        break;
                                                    case 5:
                                                        b = 10;
                                                        break;
                                                    case 8:
                                                        b = 4;
                                                        break;
                                                    case 9:
                                                        b = 6;
                                                        break;
                                                    case 10:
                                                        b = 7;
                                                        break;
                                                    case 11:
                                                        b = 8;
                                                        break;
                                                    case 12:
                                                        b = 11;
                                                        break;
                                                    case 13:
                                                        b = 12;
                                                        break;
                                                    case 14:
                                                        b = 13;
                                                        break;
                                                    case 15:
                                                        b = 14;
                                                        break;
                                                    case 16:
                                                        b = 5;
                                                        break;
                                                    default:
                                                        continue
                                                }
                                                0 < l ? c.onButtonDown.dispatch(b) : c.onButtonUp.dispatch(b)
                                            }
                                            f.buttons[n] = l
                                        }
                                    }
                                    b = 0;
                                    for (l = g.axes.length; b < l;) h = b++, g.axes[h] != f.axes[h] && (d.onAxisMove.dispatch(h, g.axes[h]), null != c && c.onAxisMove.dispatch(h, g.axes[h]), f.axes[h] = g.axes[h])
                                } else f.connected && (f.connected = !1, uc.__disconnect(b), xc.__disconnect(b))
                            }
                },
                __class__: K
            };
            var C = function () {
                this.onDisplayOrientationChange = new tk;
                this.onCreateWindow = new uk;
                this.onUpdate =
                    new wf;
                this.onExit = new wf;
                null == C.current && (C.current = this);
                this.meta = new ab;
                this.modules = [];
                this.__windowByID = new Ec;
                this.__windows = [];
                this.__backend = new K(this);
                this.__registerLimeModule(this);
                this.__preloader = new vk;
                this.__preloader.onProgress.add(m(this, this.onPreloadProgress));
                this.__preloader.onComplete.add(m(this, this.onPreloadComplete))
            };
            h["lime.app.Application"] = C;
            C.__name__ = "lime.app.Application";
            C.current = null;
            C.__super__ = ha;
            C.prototype = w(ha.prototype, {
                addModule: LimeShared.addModule,
                exec: function () {
                    C.current = this;
                    return this.__backend.exec()
                },
                onGamepadAxisMove: function (a, b, c) {
                },
                onGamepadButtonDown: function (a, b) {
                },
                onGamepadButtonUp: function (a, b) {
                },
                onGamepadConnect: function (a) {
                },
                onGamepadDisconnect: function (a) {
                },
                onJoystickAxisMove: function (a, b, c) {
                },
                onJoystickButtonDown: function (a, b) {
                },
                onJoystickButtonUp: function (a, b) {
                },
                onJoystickConnect: function (a) {
                },
                onJoystickDisconnect: function (a) {
                },
                onJoystickHatMove: function (a, b, c) {
                },
                onKeyDown: function (a, b) {
                },
                onKeyUp: function (a,
                                   b) {
                },
                onModuleExit: function (a) {
                },
                onMouseDown: function (a, b, c) {
                },
                onMouseMove: function (a, b) {
                },
                onMouseMoveRelative: function (a, b) {
                },
                onMouseUp: function (a, b, c) {
                },
                onMouseWheel: function (a, b, c) {
                },
                onPreloadComplete: function () {
                },
                onPreloadProgress: function (a, b) {
                },
                onRenderContextLost: function () {
                },
                onRenderContextRestored: function (a) {
                },
                onTextEdit: function (a, b, c) {
                },
                onTextInput: function (a) {
                },
                onTouchCancel: function (a) {
                },
                onTouchEnd: function (a) {
                },
                onTouchMove: function (a) {
                },
                onTouchStart: function (a) {
                },
                onWindowActivate: function () {
                },
                onWindowClose: function () {
                },
                onWindowCreate: function () {
                },
                onWindowDeactivate: function () {
                },
                onWindowDropFile: function (a) {
                },
                onWindowEnter: function () {
                },
                onWindowExpose: function () {
                },
                onWindowFocusIn: function () {
                },
                onWindowFocusOut: function () {
                },
                onWindowFullscreen: function () {
                },
                onWindowLeave: function () {
                },
                onWindowMove: function (a, b) {
                },
                onWindowMinimize: function () {
                },
                onWindowResize: function (a, b) {
                },
                onWindowRestore: function () {
                },
                removeModule: function (a) {
                    null != a && (a.__unregisterLimeModule(this), M.remove(this.modules, a))
                },
                render: function (a) {
                },
                update: function (a) {
                },
                __registerLimeModule: function (a) {
                    a.onUpdate.add(m(this, this.update));
                    a.onExit.add(m(this, this.onModuleExit), !1, 0);
                    a.onExit.add(m(this, this.__onModuleExit), !1, -1E3);
                    for (a = xc.devices.iterator(); a.hasNext();) {
                        var b = a.next();
                        this.__onGamepadConnect(b)
                    }
                    xc.onConnect.add(m(this, this.__onGamepadConnect));
                    for (a = uc.devices.iterator(); a.hasNext();) b = a.next(), this.__onJoystickConnect(b);
                    uc.onConnect.add(m(this, this.__onJoystickConnect));
                    Hb.onCancel.add(m(this, this.onTouchCancel));
                    Hb.onStart.add(m(this, this.onTouchStart));
                    Hb.onMove.add(m(this, this.onTouchMove));
                    Hb.onEnd.add(m(this, this.onTouchEnd))
                },
                __removeWindow: function (a) {
                    null != a && this.__windowByID.h.hasOwnProperty(a.id) && (this.__window == a && (this.__window = null), M.remove(this.__windows, a), this.__windowByID.remove(a.id), a.close(), this.__checkForAllWindowsClosed())
                },
                __checkForAllWindowsClosed: function () {
                    0 == this.__windows.length && yc.exit(0)
                },
                __onGamepadConnect: function (a) {
                    this.onGamepadConnect(a);
                    var b = this,
                        c = function (c, d) {
                            b.onGamepadAxisMove(a,
                                c, d)
                        };
                    a.onAxisMove.add(c);
                    var d = this;
                    c = function (b) {
                        d.onGamepadButtonDown(a, b)
                    };
                    a.onButtonDown.add(c);
                    var g = this;
                    c = function (b) {
                        g.onGamepadButtonUp(a, b)
                    };
                    a.onButtonUp.add(c);
                    var f = this;
                    a.onDisconnect.add(function () {
                        f.onGamepadDisconnect(a)
                    })
                },
                __onJoystickConnect: function (a) {
                    this.onJoystickConnect(a);
                    var b = this,
                        c = function (c, d) {
                            b.onJoystickAxisMove(a, c, d)
                        };
                    a.onAxisMove.add(c);
                    var d = this;
                    c = function (b) {
                        d.onJoystickButtonDown(a, b)
                    };
                    a.onButtonDown.add(c);
                    var g = this;
                    c = function (b) {
                        g.onJoystickButtonUp(a, b)
                    };
                    a.onButtonUp.add(c);
                    var f = this;
                    a.onDisconnect.add(function () {
                        f.onJoystickDisconnect(a)
                    });
                    var k = this;
                    c = function (b, c) {
                        k.onJoystickHatMove(a, b, c)
                    };
                    a.onHatMove.add(c)
                },
                __onModuleExit: function (a) {
                    this.onExit.canceled || (this.__unregisterLimeModule(this), this.__backend.exit(), C.current == this && (C.current = null))
                },
                __onWindowClose: LimeShared.__onWindowClose,
                __unregisterLimeModule: function (a) {
                    a.onUpdate.remove(m(this, this.update));
                    a.onExit.remove(m(this, this.__onModuleExit));
                    a.onExit.remove(m(this, this.onModuleExit));
                    xc.onConnect.remove(m(this, this.__onGamepadConnect));
                    uc.onConnect.remove(m(this, this.__onJoystickConnect));
                    Hb.onCancel.remove(m(this, this.onTouchCancel));
                    Hb.onStart.remove(m(this, this.onTouchStart));
                    Hb.onMove.remove(m(this, this.onTouchMove));
                    Hb.onEnd.remove(m(this, this.onTouchEnd))
                },
                __class__: C
            });
            var la = function () {
            };
            h.ApplicationMain = la;
            la.__name__ = "ApplicationMain";
            la.main = function () {
                yc.__registerEntryPoint("Dwellings", la.create)
            };
            la.create = function (a) {
                var b =
                    new Ug;
                qb.init(a);
                b.meta.h.build = params.meta.build;
                b.meta.h.company = params.meta.name_company;
                b.meta.h.file = params.meta.name_file;
                b.meta.h.name = params.meta.name_app;
                b.meta.h.packageName = params.meta.name_package;
                b.meta.h.version = params.meta.ver_app;
                var c = {
                    allowHighDPI: params.meta.param.allow_high_dpi,
                    alwaysOnTop: params.meta.param.always_on_top,
                    borderless: params.meta.param.borderless,
                    element: null,
                    frameRate: params.meta.param.frame_rate,
                    height: params.meta.param.height,
                    hidden: params.meta.param.hidden,
                    maximized: params.meta.param.maximized,
                    minimized: params.meta.param.minimized,
                    parameters: {},
                    resizable: params.meta.param.resizable,
                    title: params.meta.name_app,
                    width: params.meta.param.width,
                    x: null,
                    y: null,
                    context: {
                        antialiasing: params.meta.context.antialiasing,
                        background: params.meta.context.background,
                        colorDepth: params.meta.context.color_depth,
                        depth: params.meta.context.depth,
                        hardware: params.meta.context.hardware,
                        stencil: params.meta.context.stencil,
                        type: null,
                        vsync: params.meta.context.vsync,
                    }
                };
                if (null ==
                    b.__window && null != a)
                    for (var d = 0, g = L.fields(a); d < g.length;) {
                        var f = g[d];
                        ++d;
                        Object.prototype.hasOwnProperty.call(c, f) ? c[f] = L.field(a, f) : Object.prototype.hasOwnProperty.call(c.context, f) && (c.context[f] = L.field(a, f))
                    }
                b.createWindow(c);
                var k = new Fh(new Vg);
                b.__preloader.onProgress.add(function (a, b) {
                    k.update(a, b)
                });
                b.__preloader.onComplete.add(function () {
                    k.start()
                });
                var q = b.__window.stage;
                k.onComplete.add(function () {
                    la.start(q)
                });
                d = 0;
                for (g = qb.preloadLibraries; d < g.length;) a = g[d], ++d, b.__preloader.addLibrary(a);
                d = 0;
                for (g = qb.preloadLibraryNames; d < g.length;) a = g[d], ++d, b.__preloader.addLibraryName(a);
                b.__preloader.load();
                b.exec()
            };
            la.start = function (a) {
                if (a.__uncaughtErrorEvents.__enabled) try {
                    var b = a.getChildAt(0);
                    null != b && b instanceof rb || (b = new xf, a.addChild(b));
                    new zc(b);
                    a.dispatchEvent(new ua("resize", !1, !1));
                    a.window.__fullscreen && a.dispatchEvent(new af("fullScreen", !1, !1, !0, !0))
                } catch (c) {
                    Ha.lastError = c, b = aa.caught(c).unwrap(), a.__handleError(b)
                } else b = a.getChildAt(0), null != b && b instanceof rb || (b = new xf,
                    a.addChild(b)), new zc(b), a.dispatchEvent(new ua("resize", !1, !1)), a.window.__fullscreen && a.dispatchEvent(new af("fullScreen", !1, !1, !0, !0))
            };
            var U = function () {
            };
            h["openfl.events.IEventDispatcher"] = U;
            U.__name__ = "openfl.events.IEventDispatcher";
            U.__isInterface__ = !0;
            var oa = function (a) {
                null != a && (this.__targetDispatcher = a)
            };
            h["openfl.events.EventDispatcher"] = oa;
            oa.__name__ = "openfl.events.EventDispatcher";
            oa.__interfaces__ = [U];
            oa.prototype = {
                addEventListener: function (a, b, c, d, g) {
                    null == g && (g = !1);
                    null == d && (d =
                        0);
                    null == c && (c = !1);
                    if (null != b)
                        if (null == this.__eventMap && (this.__eventMap = new ab, this.__iterators = new ab), Object.prototype.hasOwnProperty.call(this.__eventMap.h, a)) {
                            l = this.__eventMap.h[a];
                            for (var f = 0, k = l.length; f < k;) {
                                var q = f++;
                                if (l[q].match(b, c)) return
                            }
                            a = this.__iterators.h[a];
                            for (f = 0; f < a.length;) k = a[f], ++f, k.active && k.copy();
                            this.__addListenerByPriority(l, new yf(b, c, d, g))
                        } else {
                            var l = [];
                            l.push(new yf(b, c, d, g));
                            k = new Wg(l);
                            this.__eventMap.h[a] = l;
                            this.__iterators.h[a] = [k]
                        }
                },
                dispatchEvent: function (a) {
                    a.target =
                        null != this.__targetDispatcher ? this.__targetDispatcher : this;
                    return this.__dispatchEvent(a)
                },
                hasEventListener: function (a) {
                    return null == this.__eventMap ? !1 : Object.prototype.hasOwnProperty.call(this.__eventMap.h, a)
                },
                removeEventListener: function (a, b, c) {
                    null == c && (c = !1);
                    if (null != this.__eventMap && null != b) {
                        var d = this.__eventMap.h[a];
                        if (null != d) {
                            for (var g = this.__iterators.h[a], f = 0, k = d.length; f < k;) {
                                var q = f++;
                                if (d[q].match(b, c)) {
                                    for (b = 0; b < g.length;) c = g[b], ++b, c.remove(d[q], q);
                                    d.splice(q, 1);
                                    break
                                }
                            }
                            0 == d.length &&
                            (d = this.__eventMap, g = a, Object.prototype.hasOwnProperty.call(d.h, g) && delete d.h[g], d = this.__iterators, g = a, Object.prototype.hasOwnProperty.call(d.h, g) && delete d.h[g]);
                            0 >= Object.keys(this.__eventMap.h).length && (this.__iterators = this.__eventMap = null)
                        }
                    }
                },
                __dispatchEvent: function (a) {
                    if (null == this.__eventMap || null == a) return !0;
                    var b = a.type,
                        c = this.__eventMap.h[b];
                    if (null == c) return !0;
                    null == a.target && (a.target = null != this.__targetDispatcher ? this.__targetDispatcher : this);
                    a.currentTarget = this;
                    var d = 1 == a.eventPhase;
                    b = this.__iterators.h[b];
                    var g = b[0];
                    g.active && (g = new Wg(c), b.push(g));
                    g.start();
                    for (var f = g; f.hasNext();) {
                        var k = f.next();
                        if (null != k && k.useCapture == d) {
                            if (k.useWeakReference && null != k.weakRefCallback) {
                                var q = k.weakRefCallback.deref();
                                if (null == q) q = g.index - 1, c.splice(q, 1), g.remove(k, q);
                                else if (null != db.get_current() && null != db.get_current().stage && db.get_current().stage.__uncaughtErrorEvents.__enabled) try {
                                    q(a)
                                } catch (l) {
                                    Ha.lastError = l, k = aa.caught(l).unwrap(), a instanceof fg || db.get_current().stage.__handleError(k)
                                } else q(a)
                            } else if (null !=
                                db.get_current() && null != db.get_current().stage && db.get_current().stage.__uncaughtErrorEvents.__enabled) try {
                                k.callback(a)
                            } catch (l) {
                                Ha.lastError = l, k = aa.caught(l).unwrap(), a instanceof fg || db.get_current().stage.__handleError(k)
                            } else k.callback(a);
                            if (a.__isCanceledNow) break
                        }
                    }
                    g.stop();
                    g != b[0] ? M.remove(b, g) : g.reset(c);
                    return !a.isDefaultPrevented()
                },
                __addListenerByPriority: function (a, b) {
                    for (var c = a.length, d = c, g = 0; g < c;) {
                        var f = g++;
                        if (a[f].priority < b.priority) {
                            d = f;
                            break
                        }
                    }
                    a.splice(d, 0, b)
                },
                __class__: oa
            };
            var Fb =
                function () {
                };
            h["openfl.display.IBitmapDrawable"] = Fb;
            Fb.__name__ = "openfl.display.IBitmapDrawable";
            Fb.__isInterface__ = !0;
            Fb.prototype = {
                __class__: Fb
            };
            var pa = {
                    toIntVector: function (a, b, c, d) {
                        return new Xg(b, c, d)
                    },
                    toFloatVector: function (a, b, c, d) {
                        return new Je(b, c, d, !0)
                    },
                    toObjectVector: function (a, b, c, d) {
                        return new gg(b, c, d, !0)
                    }
                },
                ob = function (a, b, c) {
                    this.__pool = new Ba;
                    this.inactiveObjects = this.activeObjects = 0;
                    this.__inactiveObject1 = this.__inactiveObject0 = null;
                    this.__inactiveObjectList = new jb;
                    null != a && (this.create =
                        a);
                    null != b && (this.clean = b);
                    null != c && this.set_size(c)
                };
            h["lime.utils.ObjectPool"] = ob;
            ob.__name__ = "lime.utils.ObjectPool";
            ob.prototype = {
                clean: function (a) {
                },
                create: function () {
                    return null
                },
                get: function () {
                    var a = null;
                    if (0 < this.inactiveObjects) null != this.__inactiveObject0 ? (a = this.__inactiveObject0, this.__inactiveObject0 = null) : null != this.__inactiveObject1 ? (a = this.__inactiveObject1, this.__inactiveObject1 = null) : (a = this.__inactiveObjectList.pop(), 0 < this.__inactiveObjectList.length && (this.__inactiveObject0 = this.__inactiveObjectList.pop()),
                    0 < this.__inactiveObjectList.length && (this.__inactiveObject1 = this.__inactiveObjectList.pop())), this.inactiveObjects--, this.activeObjects++;
                    else if (null == this.__size || this.activeObjects < this.__size) a = this.create(), null != a && (this.__pool.set(a, !0), this.activeObjects++);
                    return a
                },
                release: function (a) {
                    this.activeObjects--;
                    null == this.__size || this.activeObjects + this.inactiveObjects < this.__size ? (this.clean(a), null == this.__inactiveObject0 ? this.__inactiveObject0 = a : null == this.__inactiveObject1 ? this.__inactiveObject1 =
                        a : this.__inactiveObjectList.add(a), this.inactiveObjects++) : this.__pool.remove(a)
                },
                __removeInactive: function (a) {
                    if (!(0 >= a || 0 == this.inactiveObjects) && (null != this.__inactiveObject0 && (this.__pool.remove(this.__inactiveObject0), this.__inactiveObject0 = null, this.inactiveObjects--, --a), 0 != a && 0 != this.inactiveObjects && (null != this.__inactiveObject1 && (this.__pool.remove(this.__inactiveObject1), this.__inactiveObject1 = null, this.inactiveObjects--, --a), 0 != a && 0 != this.inactiveObjects)))
                        for (var b = this.__inactiveObjectList.h; null !=
                        b;) {
                            var c = b.item;
                            b = b.next;
                            this.__pool.remove(c);
                            this.__inactiveObjectList.remove(c);
                            this.inactiveObjects--;
                            --a;
                            if (0 == a || 0 == this.inactiveObjects) break
                        }
                },
                set_size: function (a) {
                    if (null == a) this.__size = null;
                    else {
                        var b = this.inactiveObjects + this.activeObjects;
                        this.__size = a;
                        if (b > a) this.__removeInactive(b - a);
                        else if (a > b)
                            for (var c = 0, d = a - b; c < d;)
                                if (c++, b = this.create(), null != b) this.__pool.set(b, !1), this.__inactiveObjectList.add(b), this.inactiveObjects++;
                                else break
                    }
                    return a
                },
                __class__: ob,
                __properties__: {
                    set_size: "set_size"
                }
            };
            var na = function () {
            };
            h["haxe.IMap"] = na;
            na.__name__ = "haxe.IMap";
            na.__isInterface__ = !0;
            na.prototype = {
                __class__: na
            };
            var Ba = function () {
                this.h = {
                    __keys__: {}
                }
            };
            h["haxe.ds.ObjectMap"] = Ba;
            Ba.__name__ = "haxe.ds.ObjectMap";
            Ba.__interfaces__ = [na];
            Ba.prototype = {
                set: function (a, b) {
                    var c = a.__id__;
                    null == c && (c = a.__id__ = B.$haxeUID++);
                    this.h[c] = b;
                    this.h.__keys__[c] = a
                },
                get: function (a) {
                    return this.h[a.__id__]
                },
                remove: function (a) {
                    a = a.__id__;
                    if (null == this.h.__keys__[a]) return !1;
                    delete this.h[a];
                    delete this.h.__keys__[a];
                    return !0
                },
                keys: function () {
                    var a = [],
                        b;
                    for (b in this.h.__keys__) this.h.hasOwnProperty(b) && a.push(this.h.__keys__[b]);
                    return new vf(a)
                },
                iterator: function () {
                    return {
                        ref: this.h,
                        it: this.keys(),
                        hasNext: function () {
                            return this.it.hasNext()
                        },
                        next: HaxeShared.objectMapIteratorNext

                    }
                },
                keyValueIterator: function () {
                    return new Gh(this)
                },
                __class__: Ba
            };
            var jb = function () {
                this.length = 0
            };
            h["haxe.ds.List"] = jb;
            jb.__name__ = "haxe.ds.List";
            jb.prototype = {
                add: function (a) {
                    a = new Hh(a, null);
                    null == this.h ? this.h = a : this.q.next =
                        a;
                    this.q = a;
                    this.length++
                },
                push: function (a) {
                    this.h = a = new Hh(a, this.h);
                    null == this.q && (this.q = a);
                    this.length++
                },
                pop: function () {
                    if (null == this.h) return null;
                    var a = this.h.item;
                    this.h = this.h.next;
                    null == this.h && (this.q = null);
                    this.length--;
                    return a
                },
                isEmpty: function () {
                    return null == this.h
                },
                clear: function () {
                    this.q = this.h = null;
                    this.length = 0
                },
                remove: function (a) {
                    for (var b = null, c = this.h; null != c;) {
                        if (c.item == a) return null == b ? this.h = c.next : b.next = c.next, this.q == c && (this.q = b), this.length--, !0;
                        b = c;
                        c = c.next
                    }
                    return !1
                },
                iterator: function () {
                    return new wk(this.h)
                },
                __class__: jb
            };
            var ea = function () {
                this.__hasClippingLayer = !1;
                oa.call(this);
                this.__alpha = this.__drawableType = 1;
                this.__blendMode = 10;
                this.__cacheAsBitmap = !1;
                this.__transform = new va;
                this.__visible = !0;
                this.__rotationSine = this.__rotation = 0;
                this.__worldAlpha = this.__scaleY = this.__scaleX = this.__rotationCosine = 1;
                this.__worldBlendMode = 10;
                this.__worldTransform = new va;
                this.__worldColorTransform = new Lb;
                this.__renderTransform = new va;
                this.__worldVisible = !0;
                this.set_name("instance" +
                    ++ea.__instanceCount);
                null != ea.__initStage && (this.stage = ea.__initStage, ea.__initStage = null, this.stage.addChild(this))
            };
            h["openfl.display.DisplayObject"] = ea;
            ea.__name__ = "openfl.display.DisplayObject";
            ea.__interfaces__ = [Fb];
            ea.__initStage = null;
            ea.__supportDOM = null;
            ea.__super__ = oa;
            ea.prototype = w(oa.prototype, {
                addEventListener: function (a, b, c, d, g) {
                    null == g && (g = !1);
                    null == d && (d = 0);
                    null == c && (c = !1);
                    switch (a) {
                        case "activate":
                        case "deactivate":
                        case "enterFrame":
                        case "exitFrame":
                        case "frameConstructed":
                        case "render":
                            Object.prototype.hasOwnProperty.call(ea.__broadcastEvents.h,
                                a) || (ea.__broadcastEvents.h[a] = []);
                            var f = ea.__broadcastEvents.h[a];
                            -
                                1 == f.indexOf(this) && f.push(this);
                            break;
                        case "clearDOM":
                        case "renderCairo":
                        case "renderCanvas":
                        case "renderDOM":
                        case "renderOpenGL":
                            null == this.__customRenderEvent && (this.__customRenderEvent = new Ih(null), this.__customRenderEvent.objectColorTransform = new Lb, this.__customRenderEvent.objectMatrix = new va, this.__customRenderClear = !0)
                    }
                    oa.prototype.addEventListener.call(this, a, b, c, d, g)
                },
                dispatchEvent: function (a) {
                    if (a instanceof Ib) {
                        var b =
                            this.__getRenderTransform();
                        a.stageX = a.localX * b.a + a.localY * b.c + b.tx;
                        b = this.__getRenderTransform();
                        a.stageY = a.localX * b.b + a.localY * b.d + b.ty
                    } else a instanceof Wd && (b = this.__getRenderTransform(), a.stageX = a.localX * b.a + a.localY * b.c + b.tx, b = this.__getRenderTransform(), a.stageY = a.localX * b.b + a.localY * b.d + b.ty);
                    a.target = this;
                    return this.__dispatchWithCapture(a)
                },
                getBounds: function (a) {
                    var b = va.__pool.get();
                    if (null != a && a != this) {
                        b.copyFrom(this.__getWorldTransform());
                        var c = va.__pool.get();
                        c.copyFrom(a.__getWorldTransform());
                        c.invert();
                        b.concat(c);
                        va.__pool.release(c)
                    } else b.identity();
                    a = new sa;
                    this.__getBounds(a, b);
                    va.__pool.release(b);
                    return a
                },
                globalToLocal: function (a) {
                    return this.__globalToLocal(a, new F)
                },
                hitTestPoint: function (a, b, c) {
                    null == c && (c = !1);
                    return null != this.stage ? this.__hitTest(a, b, c, null, !1, this) : !1
                },
                localToGlobal: OpenflShared.localToGlobal,
                removeEventListener: function (a, b, c) {
                    null == c && (c = !1);
                    oa.prototype.removeEventListener.call(this, a, b, c);
                    switch (a) {
                        case "activate":
                        case "deactivate":
                        case "enterFrame":
                        case "exitFrame":
                        case "frameConstructed":
                        case "render":
                            this.hasEventListener(a) ||
                            Object.prototype.hasOwnProperty.call(ea.__broadcastEvents.h, a) && M.remove(ea.__broadcastEvents.h[a], this);
                            break;
                        case "clearDOM":
                        case "renderCairo":
                        case "renderCanvas":
                        case "renderDOM":
                        case "renderOpenGL":
                            this.hasEventListener("clearDOM") || this.hasEventListener("renderCairo") || this.hasEventListener("renderCanvas") || this.hasEventListener("renderDOM") || this.hasEventListener("renderOpenGL") || (this.__customRenderEvent = null)
                    }
                },
                __cleanup: function () {
                    this.__cairo = null;
                    null != this.__canvas && (this.__canvas.width =
                        0, this.__canvas.height = 0, this.__canvas = null);
                    null != this.__context && (this.__context.clearRect(0, 0, 0, 0), this.__context = null);
                    null != this.__graphics && this.__graphics.__cleanup();
                    null != this.__cacheBitmap && (this.__cacheBitmap.__cleanup(), this.__cacheBitmap = null);
                    null != this.__cacheBitmapData && (this.__cacheBitmapData.dispose(), this.__cacheBitmapData = null);
                    null != this.__cacheBitmapData2 && (this.__cacheBitmapData2.dispose(), this.__cacheBitmapData2 = null);
                    null != this.__cacheBitmapData3 && (this.__cacheBitmapData3.dispose(),
                        this.__cacheBitmapData3 = null)
                },
                __dispatch: function (a) {
                    if (null != this.__eventMap && this.hasEventListener(a.type)) {
                        var b = oa.prototype.__dispatchEvent.call(this, a);
                        return a.__isCanceled ? !0 : b
                    }
                    return !0
                },
                __dispatchChildren: function (a) {
                },
                __dispatchEvent: function (a) {
                    var b = a.bubbles ? this.parent : null,
                        c = oa.prototype.__dispatchEvent.call(this, a);
                    if (a.__isCanceled) return !0;
                    null != b && b != this && (a.eventPhase = 3, null == a.target && (a.target = this), b.__dispatchEvent(a));
                    return c
                },
                __dispatchWithCapture: function (a) {
                    null == a.target &&
                    (a.target = this);
                    if (null != this.parent)
                        if (a.eventPhase = 1, this.parent == this.stage) this.parent.__dispatch(a);
                        else {
                            for (var b = ea.__tempStack.get(), c = this.parent, d = 0; null != c;) b.set(d, c), c = c.parent, ++d;
                            c = 0;
                            for (var g = d; c < g;) {
                                var f = c++;
                                b.get(d - f - 1).__dispatch(a)
                            }
                            ea.__tempStack.release(b)
                        }
                    a.eventPhase = 2;
                    return this.__dispatchEvent(a)
                },
                __enterFrame: function (a) {
                },
                __getBounds: function (a, b) {
                    null != this.__graphics && this.__graphics.__getBounds(a, b)
                },
                __getCursor: function () {
                    return null
                },
                __getFilterBounds: function (a,
                                             b) {
                    this.__getRenderBounds(a, b);
                    if (null != this.__filters) {
                        b = sa.__pool.get();
                        for (var c = 0, d = this.__filters; c < d.length;) {
                            var g = d[c];
                            ++c;
                            b.__expand(-g.__leftExtension, -g.__topExtension, g.__leftExtension + g.__rightExtension, g.__topExtension + g.__bottomExtension)
                        }
                        a.width += b.width;
                        a.height += b.height;
                        a.x += b.x;
                        a.y += b.y;
                        sa.__pool.release(b)
                    }
                },
                __getInteractive: function (a) {
                    return !1
                },
                __getLocalBounds: OpenflShared.__getLocalBounds,
                __getRenderBounds: function (a,
                                             b) {
                    if (null == this.__scrollRect) this.__getBounds(a, b);
                    else {
                        var c = sa.__pool.get();
                        c.copyFrom(this.__scrollRect);
                        c.__transform(c, b);
                        a.__expand(c.x, c.y, c.width, c.height);
                        sa.__pool.release(c)
                    }
                },
                __getRenderTransform: OpenflShared.__getRenderTransform,
                __getWorldTransform: function () {
                    if (this.__transformDirty || this.__worldTransformInvalid) {
                        var a = [],
                            b = this;
                        if (null == this.parent) this.__update(!0, !1);
                        else
                            for (; b != this.stage && (a.push(b), b = b.parent, null != b);) ;
                        for (var c = a.length; 0 <=
                        --c;) b = a[c], b.__update(!0, !1)
                    }
                    return this.__worldTransform
                },
                __globalToLocal: function (a, b) {
                    this.__getRenderTransform();
                    if (a == b) {
                        var c = this.__renderTransform,
                            d = c.a * c.d - c.b * c.c;
                        if (0 == d) a.x = -c.tx, a.y = -c.ty;
                        else {
                            var g = 1 / d * (c.c * (c.ty - a.y) + c.d * (a.x - c.tx));
                            a.y = 1 / d * (c.a * (a.y - c.ty) + c.b * (c.tx - a.x));
                            a.x = g
                        }
                    } else c = this.__renderTransform, d = c.a * c.d - c.b * c.c, b.x = 0 == d ? -c.tx : 1 / d * (c.c * (c.ty - a.y) + c.d * (a.x - c.tx)), c = this.__renderTransform, d = c.a * c.d - c.b * c.c, b.y = 0 == d ? -c.ty : 1 / d * (c.a * (a.y - c.ty) + c.b * (c.tx - a.x));
                    return b
                },
                __hitTest: function (a,
                                     b, c, d, g, f) {
                    if (null != this.__graphics) {
                        if (!f.__visible || this.__isMask || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b)) return !1;
                        if (this.__graphics.__hitTest(a, b, c, this.__getRenderTransform())) return null == d || g || d.push(f), !0
                    }
                    return !1
                },
                __hitTestMask: function (a, b) {
                    return null != this.__graphics && this.__graphics.__hitTest(a, b, !0, this.__getRenderTransform()) ? !0 : !1
                },
                __readGraphicsData: function (a, b) {
                    null != this.__graphics && this.__graphics.__readGraphicsData(a)
                },
                __setParentRenderDirty: function () {
                    var a =
                        null != this.__renderParent ? this.__renderParent : this.parent;
                    null == a || a.__renderDirty || (a.__renderDirty = !0, a.__setParentRenderDirty())
                },
                __setStageReference: OpenflShared.__setStageReference,
                __setTransformDirty: OpenflShared.__setTransformDirty,
                __setWorldTransformInvalid: OpenflShared.__setWorldTransformInvalid,
                __update: function (a, b) {
                    var c = null != this.__renderParent ? this.__renderParent : this.parent;
                    this.__isMask && null ==
                    c && (c = this.__maskTarget);
                    this.__renderable = this.__visible && 0 != this.__scaleX && 0 != this.__scaleY && !this.__isMask && (null == c || !c.__isMask);
                    this.__updateTransforms();
                    this.__worldTransformInvalid = this.__transformDirty = !1;
                    if (!a)
                        if (ea.__supportDOM && (this.__renderTransformChanged = !this.__renderTransform.equals(this.__renderTransformCache), null == this.__renderTransformCache ? this.__renderTransformCache = this.__renderTransform.clone() : this.__renderTransformCache.copyFrom(this.__renderTransform)), null != c) {
                            if (ea.__supportDOM) {
                                var d =
                                    c.__worldVisible && this.__visible;
                                this.__worldVisibleChanged = this.__worldVisible != d;
                                this.__worldVisible = d
                            }
                            d = this.get_alpha() * c.__worldAlpha;
                            this.__worldAlphaChanged = this.__worldAlpha != d;
                            this.__worldAlpha = d;
                            null != this.__objectTransform ? (this.__worldColorTransform.__copyFrom(this.__objectTransform.__colorTransform), this.__worldColorTransform.__combine(c.__worldColorTransform)) : this.__worldColorTransform.__copyFrom(c.__worldColorTransform);
                            this.__worldBlendMode = null == this.__blendMode || 10 == this.__blendMode ?
                                c.__worldBlendMode : this.__blendMode;
                            this.__worldShader = null == this.__shader ? c.__shader : this.__shader;
                            this.__worldScale9Grid = null == this.__scale9Grid ? c.__scale9Grid : this.__scale9Grid
                        } else this.__worldAlpha = this.get_alpha(), ea.__supportDOM && (this.__worldVisibleChanged = this.__worldVisible != this.__visible, this.__worldVisible = this.__visible), this.__worldAlphaChanged = this.__worldAlpha != this.get_alpha(), null != this.__objectTransform ? this.__worldColorTransform.__copyFrom(this.__objectTransform.__colorTransform) :
                            this.__worldColorTransform.__identity(), this.__worldBlendMode = this.__blendMode, this.__worldShader = this.__shader, this.__worldScale9Grid = this.__scale9Grid;
                    b && null != this.get_mask() && this.get_mask().__update(a, !0)
                },
                __updateTransforms: function (a) {
                    var b = null != a;
                    a = b ? a : this.__transform;
                    null == this.__worldTransform && (this.__worldTransform = new va);
                    null == this.__renderTransform && (this.__renderTransform = new va);
                    var c = null != this.__renderParent ? this.__renderParent : this.parent;
                    if (b || null == this.parent) this.__worldTransform.copyFrom(a);
                    else {
                        var d = this.parent.__worldTransform,
                            g = this.__worldTransform;
                        g.a = a.a * d.a + a.b * d.c;
                        g.b = a.a * d.b + a.b * d.d;
                        g.c = a.c * d.a + a.d * d.c;
                        g.d = a.c * d.b + a.d * d.d;
                        g.tx = a.tx * d.a + a.ty * d.c + d.tx;
                        g.ty = a.tx * d.b + a.ty * d.d + d.ty
                    }
                    b || null == c ? this.__renderTransform.copyFrom(a) : (d = c.__renderTransform, g = this.__renderTransform, g.a = a.a * d.a + a.b * d.c, g.b = a.a * d.b + a.b * d.d, g.c = a.c * d.a + a.d * d.c, g.d = a.c * d.b + a.d * d.d, g.tx = a.tx * d.a + a.ty * d.c + d.tx, g.ty = a.tx * d.b + a.ty * d.d + d.ty);
                    null != this.__scrollRect && (b = this.__renderTransform, a = -this.__scrollRect.x,
                        c = -this.__scrollRect.y, b.tx = a * b.a + c * b.c + b.tx, b.ty = a * b.b + c * b.d + b.ty)
                },
                __setMask: function (a) {
                    a != this.__mask && (this.__setTransformDirty(), this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    if (null != this.__mask) {
                        this.__mask.__isMask = !1;
                        this.__mask.__maskTarget = null;
                        this.__mask.__setTransformDirty();
                        var b = this.__mask;
                        b.__renderDirty || (b.__renderDirty = !0, b.__setParentRenderDirty())
                    }
                    null != a && (a.__isMask = !0, a.__maskTarget = this, a.__setWorldTransformInvalid());
                    null != this.__cacheBitmap &&
                    this.__cacheBitmap.get_clippingLayer() != a && this.__cacheBitmap.set_clippingLayer(a);
                    this.__mask = a
                },
                get_alpha: function () {
                    return this.__alpha
                },
                set_alpha: function (a) {
                    a != a ? a = 0 : 1 < a ? a = 1 : 0 > a && (a = 0);
                    a == this.__alpha || this.get_cacheAsBitmap() || this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty());
                    return this.__alpha = a
                },
                get_blendMode: function () {
                    return this.__blendMode
                },
                set_blendMode: function (a) {
                    null == a && (a = 10);
                    a == this.__blendMode || this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty());
                    return this.__blendMode = a
                },
                get_cacheAsBitmap: function () {
                    return null == this.__filters ? this.__cacheAsBitmap : !0
                },
                get_filters: function () {
                    return null == this.__filters ? [] : this.__filters.slice()
                },
                set_filters: function (a) {
                    if (null != a && 0 < a.length) {
                        for (var b = [], c = 0; c < a.length;) {
                            var d = a[c];
                            ++c;
                            d = d.clone();
                            d.__renderDirty = !0;
                            b.push(d)
                        }
                        this.__filters = b;
                        this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty())
                    } else null != this.__filters && (this.__filters = null, this.__renderDirty || (this.__renderDirty = !0,
                        this.__setParentRenderDirty()));
                    return a
                },
                get_height: function () {
                    var a = sa.__pool.get();
                    this.__getLocalBounds(a);
                    var b = a.height;
                    sa.__pool.release(a);
                    return b
                },
                set_height: function (a) {
                    var b = sa.__pool.get(),
                        c = va.__pool.get();
                    c.identity();
                    this.__getBounds(b, c);
                    a != b.height ? this.set_scaleY(a / b.height) : this.set_scaleY(1);
                    sa.__pool.release(b);
                    va.__pool.release(c);
                    return a
                },
                get_loaderInfo: function () {
                    return null != this.stage ? vc.current.__loaderInfo : null
                },
                get_mask: OpenflShared.get_mask,
                set_mask: function (a) {
                    if (a ==
                        this.__mask) return a;
                    null != a && null != a.__maskTarget && a.__maskTarget.set_mask(null);
                    this.__setMask(a);
                    return this.__mask
                },
                get_clippingLayer: function () {
                    return this.__hasClippingLayer ? this.__mask : null
                },
                set_clippingLayer: function (a) {
                    this.__hasClippingLayer = null != a;
                    this.__setMask(a);
                    return this.__mask
                },
                get_mouseX: function () {
                    var a = null != this.stage ? this.stage.__mouseX : vc.current.stage.__mouseX,
                        b = null != this.stage ? this.stage.__mouseY : vc.current.stage.__mouseY,
                        c = this.__getRenderTransform(),
                        d = c.a * c.d - c.b * c.c;
                    return 0 == d ? -c.tx : 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx))
                },
                get_mouseY: function () {
                    var a = null != this.stage ? this.stage.__mouseX : vc.current.stage.__mouseX,
                        b = null != this.stage ? this.stage.__mouseY : vc.current.stage.__mouseY,
                        c = this.__getRenderTransform(),
                        d = c.a * c.d - c.b * c.c;
                    return 0 == d ? -c.ty : 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a))
                },
                get_name: OpenflShared.get_name,
                set_name: OpenflShared.set_name,
                get_root: function () {
                    return null != this.stage ? vc.current : null
                },
                get_rotation: OpenflShared.get_rotation,
                set_rotation: function (a) {
                    if (a !=
                        this.__rotation) {
                        a %= 360;
                        180 < a ? a -= 360 : -180 > a && (a += 360);
                        this.__rotation = a;
                        var b = Math.PI / 180 * this.__rotation;
                        this.__rotationSine = Math.sin(b);
                        this.__rotationCosine = Math.cos(b);
                        this.__transform.a = this.__rotationCosine * this.__scaleX;
                        this.__transform.b = this.__rotationSine * this.__scaleX;
                        this.__transform.c = -this.__rotationSine * this.__scaleY;
                        this.__transform.d = this.__rotationCosine * this.__scaleY;
                        this.__setTransformDirty()
                    }
                    return a
                },
                get_scaleX: OpenflShared.get_scaleX,
                set_scaleX: function (a) {
                    if (a != this.__scaleX)
                        if (this.__scaleX =
                            a, 0 == this.__transform.b) a != this.__transform.a && this.__setTransformDirty(), this.__transform.a = a;
                        else {
                            var b = this.__rotationCosine * a,
                                c = this.__rotationSine * a;
                            this.__transform.a == b && this.__transform.b == c || this.__setTransformDirty();
                            this.__transform.a = b;
                            this.__transform.b = c
                        }
                    return a
                },
                get_scaleY: OpenflShared.get_scaleY,
                set_scaleY: function (a) {
                    if (a != this.__scaleY)
                        if (this.__scaleY = a, 0 == this.__transform.c) a != this.__transform.d && this.__setTransformDirty(), this.__transform.d = a;
                        else {
                            var b = -this.__rotationSine *
                                    a,
                                c = this.__rotationCosine * a;
                            this.__transform.d == c && this.__transform.c == b || this.__setTransformDirty();
                            this.__transform.c = b;
                            this.__transform.d = c
                        }
                    return a
                },
                get_scrollRect: function () {
                    return null == this.__scrollRect ? null : this.__scrollRect.clone()
                },
                get_transform: function () {
                    null == this.__objectTransform && (this.__objectTransform = new Jh(this));
                    return this.__objectTransform
                },
                set_transform: function (a) {
                    if (null == a) throw new zf("Parameter transform must be non-null.");
                    null == this.__objectTransform && (this.__objectTransform =
                        new Jh(this));
                    this.__setTransformDirty();
                    if (a.__hasMatrix) {
                        var b = a.__displayObject.__transform;
                        this.__objectTransform.__setTransform(b.a, b.b, b.c, b.d, b.tx, b.ty)
                    } else this.__objectTransform.__hasMatrix = !1;
                    if (!this.__objectTransform.__colorTransform.__equals(a.__colorTransform, !0) || !this.get_cacheAsBitmap() && this.__objectTransform.__colorTransform.alphaMultiplier != a.__colorTransform.alphaMultiplier) this.__objectTransform.__colorTransform.__copyFrom(a.get_colorTransform()), this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty());
                    return this.__objectTransform
                },
                get_visible: function () {
                    return this.__visible
                },
                set_visible: OpenflShared.set_visible,
                get_width: function () {
                    var a = sa.__pool.get();
                    this.__getLocalBounds(a);
                    var b = a.width;
                    sa.__pool.release(a);
                    return b
                },
                set_width: function (a) {
                    var b = sa.__pool.get(),
                        c = va.__pool.get();
                    c.identity();
                    this.__getBounds(b, c);
                    a != b.width ? this.set_scaleX(a / b.width) :
                        this.set_scaleX(1);
                    sa.__pool.release(b);
                    va.__pool.release(c);
                    return a
                },
                get_x: OpenflShared.get_x,
                set_x: function (a) {
                    a != a && (a = 0);
                    a != this.__transform.tx && this.__setTransformDirty();
                    return this.__transform.tx = a
                },
                get_y: OpenflShared.get_y,
                set_y: function (a) {
                    a != a && (a = 0);
                    a != this.__transform.ty && this.__setTransformDirty();
                    return this.__transform.ty = a
                },
                __class__: ea,
                __properties__: {
                    set_y: "set_y",
                    get_y: "get_y",
                    set_x: "set_x",
                    get_x: "get_x",
                    set_width: "set_width",
                    get_width: "get_width",
                    set_visible: "set_visible",
                    get_visible: "get_visible",
                    set_transform: "set_transform",
                    get_transform: "get_transform",
                    get_scrollRect: "get_scrollRect",
                    set_scaleY: "set_scaleY",
                    get_scaleY: "get_scaleY",
                    set_scaleX: "set_scaleX",
                    get_scaleX: "get_scaleX",
                    set_rotation: "set_rotation",
                    get_rotation: "get_rotation",
                    get_root: "get_root",
                    set_name: "set_name",
                    get_name: "get_name",
                    get_mouseY: "get_mouseY",
                    get_mouseX: "get_mouseX",
                    set_clippingLayer: "set_clippingLayer",
                    get_clippingLayer: "get_clippingLayer",
                    set_mask: "set_mask",
                    get_mask: "get_mask",
                    get_loaderInfo: "get_loaderInfo",
                    set_height: "set_height",
                    get_height: "get_height",
                    set_filters: "set_filters",
                    get_filters: "get_filters",
                    get_cacheAsBitmap: "get_cacheAsBitmap",
                    set_blendMode: "set_blendMode",
                    get_blendMode: "get_blendMode",
                    set_alpha: "set_alpha",
                    get_alpha: "get_alpha"
                }
            });
            var xa = function () {
                ea.call(this);
                this.doubleClickEnabled = !1;
                this.mouseEnabled = !0;
                this.needsSoftKeyboard = !1;
                this.__tabEnabled = null;
                this.__tabIndex = -1
            };
            h["openfl.display.InteractiveObject"] = xa;
            xa.__name__ = "openfl.display.InteractiveObject";
            xa.__super__ = ea;
            xa.prototype = w(ea.prototype, {
                __allowMouseFocus: OpenflShared.__allowMouseFocus,
                __getInteractive: function (a) {
                    null != a && (a.push(this), null != this.parent && this.parent.__getInteractive(a));
                    return !0
                },
                __hitTest: function (a, b, c, d, g, f) {
                    return !f.get_visible() || this.__isMask || g && !this.mouseEnabled ? !1 : ea.prototype.__hitTest.call(this, a, b, c, d, g, f)
                },
                __tabTest: OpenflShared.__tabTest,
                get_tabEnabled: OpenflShared.get_tabEnabled,
                get_tabIndex: OpenflShared.get_tabIndex,
                __class__: xa,
                __properties__: w(ea.prototype.__properties__, {
                    get_tabIndex: "get_tabIndex",
                    get_tabEnabled: "get_tabEnabled"
                })
            });
            var rb = function () {
                xa.call(this);
                this.__tabChildren = this.mouseChildren = !0;
                this.__children = [];
                this.__removedChildren = pa.toObjectVector(null)
            };
            h["openfl.display.DisplayObjectContainer"] = rb;
            rb.__name__ = "openfl.display.DisplayObjectContainer";
            rb.__super__ = xa;
            rb.prototype = w(xa.prototype, {
                addChild: OpenflShared.addChild,
                addChildAt: function (a, b) {
                    if (null == a) throw a = new zf("Error #2007: Parameter child must be non-null."), a.errorID = 2007, a;
                    if (a == this) throw a = new Af("Error #2024: An object cannot be added as a child of itself."), a.errorID = 2024, a;
                    if (a.stage == a) throw a = new Af("Error #3783: A Stage object cannot be added as the child of another object."), a.errorID = 3783, a;
                    if (b > this.__children.length || 0 > b) throw aa.thrown("Invalid index position " + b);
                    if (a.parent == this) this.__children[b] != a && (M.remove(this.__children, a), this.__children.splice(b,
                        0, a), this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    else {
                        null != a.parent && a.parent.removeChild(a);
                        this.__children.splice(b, 0, a);
                        a.parent = this;
                        (b = null != this.stage && null == a.stage) && a.__setStageReference(this.stage);
                        a.__setTransformDirty();
                        a.__renderDirty || (a.__renderDirty = !0, a.__setParentRenderDirty());
                        this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty());
                        var c = new ua("added");
                        c.bubbles = !0;
                        c.target = a;
                        a.__dispatchWithCapture(c);
                        b && (c = new ua("addedToStage",
                            !1, !1), a.__dispatchWithCapture(c), a.__dispatchChildren(c))
                    }
                    return a
                },
                getChildAt: function (a) {
                    return 0 <= a && a < this.__children.length ? this.__children[a] : null
                },
                getChildByName: function (a) {
                    for (var b = 0, c = this.__children; b < c.length;) {
                        var d = c[b];
                        ++b;
                        if (d.get_name() == a) return d
                    }
                    return null
                },
                getChildIndex: OpenflShared.getChildIndex,
                removeChild: function (a) {
                    if (null != a && a.parent == this) {
                        a.__setTransformDirty();
                        a.__renderDirty || (a.__renderDirty = !0, a.__setParentRenderDirty());
                        this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty());
                        var b = new ua("removed", !0);
                        a.__dispatchWithCapture(b);
                        null != this.stage && (null != a.stage && this.stage.get_focus() == a && this.stage.set_focus(null), b = new ua("removedFromStage", !1, !1), a.__dispatchWithCapture(b), a.__dispatchChildren(b), a.__setStageReference(null));
                        a.parent = null;
                        M.remove(this.__children, a);
                        this.__removedChildren.push(a);
                        a.__setTransformDirty()
                    }
                    return a
                },
                removeChildAt: function (a) {
                    return 0 <=
                    a && a < this.__children.length ? this.removeChild(this.__children[a]) : null
                },
                removeChildren: function (a, b) {
                    null == b && (b = 2147483647);
                    null == a && (a = 0);
                    if (2147483647 == b && (b = this.__children.length - 1, 0 > b)) return;
                    if (!(a > this.__children.length - 1)) {
                        if (b < a || 0 > a || b > this.__children.length) throw new Bf("The supplied index is out of bounds.");
                        for (b -= a; 0 <= b;) this.removeChildAt(a), --b
                    }
                },
                __cleanup: function () {
                    xa.prototype.__cleanup.call(this);
                    for (var a = 0, b = this.__children; a < b.length;) {
                        var c = b[a];
                        ++a;
                        c.__cleanup()
                    }
                    for (a = this.__removedChildren.iterator(); a.hasNext();) b =
                        a.next(), null == b.stage && b.__cleanup();
                    this.__removedChildren.set_length(0)
                },
                __dispatchChildren: function (a) {
                    if (null != this.__children)
                        for (var b = 0, c = this.__children; b < c.length;) {
                            var d = c[b];
                            ++b;
                            a.target = d;
                            if (!d.__dispatchWithCapture(a)) break;
                            d.__dispatchChildren(a)
                        }
                },
                __enterFrame: OpenflShared.__enterFrame,
                __getBounds: function (a, b) {
                    xa.prototype.__getBounds.call(this, a, b);
                    if (0 != this.__children.length) {
                        for (var c = va.__pool.get(), d = 0, g = this.__children; d <
                        g.length;) {
                            var f = g[d];
                            ++d;
                            if (0 != f.__scaleX && 0 != f.__scaleY) {
                                var k = f.__transform;
                                c.a = k.a * b.a + k.b * b.c;
                                c.b = k.a * b.b + k.b * b.d;
                                c.c = k.c * b.a + k.d * b.c;
                                c.d = k.c * b.b + k.d * b.d;
                                c.tx = k.tx * b.a + k.ty * b.c + b.tx;
                                c.ty = k.tx * b.b + k.ty * b.d + b.ty;
                                f.__getBounds(a, c)
                            }
                        }
                        va.__pool.release(c)
                    }
                },
                __getFilterBounds: function (a, b) {
                    xa.prototype.__getFilterBounds.call(this, a, b);
                    if (null == this.__scrollRect && 0 != this.__children.length) {
                        for (var c = va.__pool.get(), d = 0, g = this.__children; d < g.length;) {
                            var f = g[d];
                            ++d;
                            if (0 != f.__scaleX && 0 != f.__scaleY && !f.__isMask) {
                                var k =
                                    f.__transform;
                                c.a = k.a * b.a + k.b * b.c;
                                c.b = k.a * b.b + k.b * b.d;
                                c.c = k.c * b.a + k.d * b.c;
                                c.d = k.c * b.b + k.d * b.d;
                                c.tx = k.tx * b.a + k.ty * b.c + b.tx;
                                c.ty = k.tx * b.b + k.ty * b.d + b.ty;
                                k = sa.__pool.get();
                                f.__getFilterBounds(k, c);
                                a.__expand(k.x, k.y, k.width, k.height);
                                sa.__pool.release(k)
                            }
                        }
                        va.__pool.release(c)
                    }
                },
                __getRenderBounds: function (a, b) {
                    if (null != this.__scrollRect) xa.prototype.__getRenderBounds.call(this, a, b);
                    else if (xa.prototype.__getBounds.call(this, a, b), 0 != this.__children.length) {
                        for (var c = va.__pool.get(), d = 0, g = this.__children; d <
                        g.length;) {
                            var f = g[d];
                            ++d;
                            if (0 != f.__scaleX && 0 != f.__scaleY && !f.__isMask) {
                                var k = f.__transform;
                                c.a = k.a * b.a + k.b * b.c;
                                c.b = k.a * b.b + k.b * b.d;
                                c.c = k.c * b.a + k.d * b.c;
                                c.d = k.c * b.b + k.d * b.d;
                                c.tx = k.tx * b.a + k.ty * b.c + b.tx;
                                c.ty = k.tx * b.b + k.ty * b.d + b.ty;
                                f.__getRenderBounds(a, c)
                            }
                        }
                        va.__pool.release(c)
                    }
                },
                __hitTest: function (a, b, c, d, g, f) {
                    if (!f.get_visible() || this.__isMask || g && !this.mouseEnabled && !this.mouseChildren || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b)) return !1;
                    if (null != this.__scrollRect) {
                        var k = F.__pool.get();
                        k.setTo(a, b);
                        var q = this.__getRenderTransform(),
                            l = q.a * q.d - q.b * q.c;
                        if (0 == l) k.x = -q.tx, k.y = -q.ty;
                        else {
                            var h = 1 / l * (q.c * (q.ty - k.y) + q.d * (k.x - q.tx));
                            k.y = 1 / l * (q.a * (k.y - q.ty) + q.b * (q.tx - k.x));
                            k.x = h
                        }
                        if (!this.__scrollRect.containsPoint(k)) return F.__pool.release(k), !1;
                        F.__pool.release(k)
                    }
                    k = this.__children.length;
                    if (g)
                        if (null == d || !this.mouseChildren)
                            for (; 0 <= --k;) {
                                if (this.__children[k].__hitTest(a, b, c, null, !0, this.__children[k])) return null != d && d.push(f), !0
                            } else {
                            if (null != d) {
                                g = d.length;
                                for (l = !1; 0 <= --k && !(((q = this.__children[k].__getInteractive(null)) ||
                                    this.mouseEnabled && !l) && this.__children[k].__hitTest(a, b, c, d, !0, this.__children[k]) && (l = !0, q && d.length > g));) ;
                                if (l) return d.splice(g, 0, f), !0
                            }
                        } else {
                        for (l = !1; 0 <= --k && (!this.__children[k].__hitTest(a, b, c, d, !1, this.__children[k]) || (l = !0, null != d));) ;
                        return l
                    }
                    return !1
                },
                __hitTestMask: OpenflShared.__hitTestMask,
                __readGraphicsData: function (a, b) {
                    xa.prototype.__readGraphicsData.call(this, a, b);
                    if (b)
                        for (var c = 0, d = this.__children; c <
                        d.length;) {
                            var g = d[c];
                            ++c;
                            g.__readGraphicsData(a, b)
                        }
                },
                __setStageReference: function (a) {
                    xa.prototype.__setStageReference.call(this, a);
                    if (null != this.__children)
                        for (var b = 0, c = this.__children; b < c.length;) {
                            var d = c[b];
                            ++b;
                            d.__setStageReference(a)
                        }
                },
                __setWorldTransformInvalid: function () {
                    if (!this.__worldTransformInvalid && (this.__worldTransformInvalid = !0, null != this.__children))
                        for (var a = 0, b = this.__children; a < b.length;) {
                            var c = b[a];
                            ++a;
                            c.__setWorldTransformInvalid()
                        }
                },
                __tabTest: function (a) {
                    xa.prototype.__tabTest.call(this,
                        a);
                    if (this.get_tabChildren())
                        for (var b, c = 0, d = this.__children; c < d.length;) {
                            var g = d[c];
                            ++c;
                            if (b = g.__getInteractive(null)) b = g, b.__tabTest(a)
                        }
                },
                __update: function (a, b) {
                    xa.prototype.__update.call(this, a, b);
                    if (b) {
                        b = 0;
                        for (var c = this.__children; b < c.length;) {
                            var d = c[b];
                            ++b;
                            d.__update(a, !0)
                        }
                    }
                },
                get_numChildren: OpenflShared.get_numChildren,
                get_tabChildren: OpenflShared.get_tabChildren,
                __class__: rb,
                __properties__: w(xa.prototype.__properties__, {
                    get_tabChildren: "get_tabChildren",
                    get_numChildren: "get_numChildren"
                })
            });
            var X = function () {
                rb.call(this);
                this.__drawableType = 4;
                this.__buttonMode = !1;
                this.useHandCursor = !0;
                if (null != this.__pendingBindLibrary) {
                    var a = this.__pendingBindLibrary,
                        b = this.__pendingBindClassName;
                    this.__pendingBindClassName = this.__pendingBindLibrary = null;
                    a.bind(b, this)
                } else null != X.__constructor && (a = X.__constructor, X.__constructor = null, a(this))
            };
            h["openfl.display.Sprite"] = X;
            X.__name__ = "openfl.display.Sprite";
            X.__constructor = null;
            X.__super__ = rb;
            X.prototype = w(rb.prototype, {
                stopDrag: function () {
                    null != this.stage &&
                    this.stage.__stopDrag(this)
                },
                __setStageReference: function (a) {
                    this.stage != a && null != this.stage && this.stage.__dragObject == this && this.stopDrag();
                    rb.prototype.__setStageReference.call(this, a)
                },
                __getCursor: function () {
                    return this.__buttonMode && this.useHandCursor ? "button" : null
                },
                __hitTest: function (a, b, c, d, g, f) {
                    if (g && !this.mouseEnabled && !this.mouseChildren) return !1;
                    if (!f.get_visible() || this.__isMask || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b)) return this.__hitTestHitArea(a, b, c, d, g, f);
                    if (null !=
                        this.__scrollRect) {
                        var k = F.__pool.get();
                        k.setTo(a, b);
                        var q = this.__getRenderTransform(),
                            l = q.a * q.d - q.b * q.c;
                        if (0 == l) k.x = -q.tx, k.y = -q.ty;
                        else {
                            var h = 1 / l * (q.c * (q.ty - k.y) + q.d * (k.x - q.tx));
                            k.y = 1 / l * (q.a * (k.y - q.ty) + q.b * (q.tx - k.x));
                            k.x = h
                        }
                        if (!this.__scrollRect.containsPoint(k)) return F.__pool.release(k), this.__hitTestHitArea(a, b, c, d, !0, f);
                        F.__pool.release(k)
                    }
                    return rb.prototype.__hitTest.call(this, a, b, c, d, g, f) ? null != d ? g : !0 : null == this.hitArea && null != this.__graphics && this.__graphics.__hitTest(a, b, c, this.__getRenderTransform()) ?
                        (null == d || g && !this.mouseEnabled || d.push(f), !0) : this.__hitTestHitArea(a, b, c, d, g, f)
                },
                __hitTestHitArea: function (a, b, c, d, g, f) {
                    return null == this.hitArea || this.hitArea.mouseEnabled ? !1 : (this.hitArea.mouseEnabled = !0, a = this.hitArea.__hitTest(a, b, c, null, !0, f), this.hitArea.mouseEnabled = !1, null != d && a && (d[d.length] = f), a)
                },
                __hitTestMask: function (a, b) {
                    return rb.prototype.__hitTestMask.call(this, a, b) || null != this.__graphics && this.__graphics.__hitTest(a, b, !0, this.__getRenderTransform()) ? !0 : !1
                },
                get_graphics: function () {
                    null ==
                    this.__graphics && (this.__graphics = new qd(this));
                    return this.__graphics
                },
                get_tabEnabled: function () {
                    return null == this.__tabEnabled ? this.__buttonMode : this.__tabEnabled
                },
                get_buttonMode: OpenflShared.get_buttonMode,
                set_buttonMode: OpenflShared.set_buttonMode,
                __class__: X,
                __properties__: w(rb.prototype.__properties__, {
                    get_graphics: "get_graphics",
                    set_buttonMode: "set_buttonMode",
                    get_buttonMode: "get_buttonMode"
                })
            });
            var Oa = function (a) {
                Oa.instance = this;
                var b = B.navigator.userAgent.toLowerCase();
                ca.some(["android", "iphone", "ipad"], function (a) {
                    return -1 != b.indexOf(a)
                }) && (Oa.mobile = !0);
                X.call(this);
                this.prepareStage();
                Mb.useEnterFrame(this);
                Oa.switchScene(a)
            };
            h["coogee.Game"] = Oa;
            Oa.__name__ = "coogee.Game";
            Oa.instance = null;
            Oa.scene = null;
            Oa.switchScene = function (a) {
                Oa.instance.switchSceneImp(a)
            };
            Oa.quit = function () {
            };
            Oa.__super__ = X;
            Oa.prototype = w(X.prototype, {
                prepareStage: function () {
                    var a = this;
                    this.stage.align = 6;
                    this.stage.set_scaleMode(2);
                    this.stage.addEventListener("resize",
                        function (b) {
                            a.layout()
                        });
                    this.stage.application.onExit.add(m(this, this.onExit));
                    this.stage.application.__window.onActivate.add(m(this, this.onResume));
                    this.stage.application.__window.onDeactivate.add(m(this, this.onPause))
                },
                onExit: function (a) {
                    Mb.stop()
                },
                onResume: function () {
                },
                onPause: function () {
                },
                layout: function () {
                    if (null != Oa.scene) {
                        var a = this.stage.stageWidth,
                            b = this.stage.stageHeight,
                            c = this.getScale(a, b);
                        Oa.scene.set_scaleX(Oa.scene.set_scaleY(c));
                        Oa.scene.setSize(a / c, b / c)
                    }
                },
                getScale: function (a, b) {
                    return 1
                },
                switchSceneImp: function (a) {
                    null != Oa.scene && (Oa.scene.deactivate(), this.removeChild(Oa.scene), Oa.scene = null);
                    null != a && (Oa.scene = z.createInstance(a, []), this.addChild(Oa.scene), this.layout(), Oa.scene.activate());
                    this.stage.set_focus(this.stage)
                },
                __class__: Oa
            });
            var ac = function () {
                t.reset();
                this.stage.showDefaultContextMenu = !1;
                ia.useDefault();
                Va.baseURL = window.location.origin+FuncProto.paramsUrlString(params.routes.dwellings);
                J.restorePalette();
                hb.restoreStyle();
                var a = Xd.fromURL();
                fd.reset(null != a ? a : Xd.random());
                Oa.call(this, ub.getScene())
            };
            h["dwellings.Main"] = ac;
            ac.__name__ = "dwellings.Main";
            ac.setUIColors = function (a, b) {
                a = ca.max(a, function (a) {
                    return Ia.dist(a, b)
                });
                if (Ia.brightness(a) < Ia.brightness(b)) {
                    var c = a;
                    a = b;
                    b = c
                }
                ia.black = b;
                ia.dark = Ia.lerpHSV(b, a, .3);
                ia.medium = Ia.lerpHSV(b, a, .6);
                ia.light = Ia.lerpHSV(b, a, .8);
                ia.white = a
            };
            ac.__super__ = Oa;
            ac.prototype = w(Oa.prototype, {
                switchSceneImp: function (a) {
                    null == ma.layer && (ma.layer = new R);
                    Oa.prototype.switchSceneImp.call(this, a);
                    this.addChild(ma.layer);
                    ma.wipe()
                },
                layout: function () {
                    Oa.prototype.layout.call(this);
                    ma.layer.setSize(this.stage.stageWidth, this.stage.stageHeight)
                },
                __class__: ac
            });
            var zc = function (a) {
                a.addChild(this);
                ac.call(this);
                this.dispatchEvent(new ua("addedToStage", !1, !1))
            };
            h.DocumentClass = zc;
            zc.__name__ = "DocumentClass";
            zc.__super__ = ac;
            zc.prototype = w(ac.prototype, {
                __class__: zc
            });
            var Ya = function (a, b) {
                this.r = new RegExp(a, b.split("u").join(""))
            };
            h.EReg = Ya;
            Ya.__name__ = "EReg";
            Ya.prototype = {
                match: function (a) {
                    this.r.global && (this.r.lastIndex = 0);
                    this.r.m = this.r.exec(a);
                    this.r.s = a;
                    return null != this.r.m
                },
                matched: function (a) {
                    if (null != this.r.m && 0 <= a && a < this.r.m.length) return this.r.m[a];
                    throw aa.thrown("EReg::matched");
                },
                matchedPos: function () {
                    if (null == this.r.m) throw aa.thrown("No string matched");
                    return {
                        pos: this.r.m.index,
                        len: this.r.m[0].length
                    }
                },
                matchSub: function (a, b, c) {
                    null == c && (c = -1);
                    if (this.r.global) {
                        if (this.r.lastIndex = b, this.r.m = this.r.exec(0 > c ? a : M.substr(a, 0, b + c)), c = null != this.r.m) this.r.s = a
                    } else if (c = this.match(0 > c ? M.substr(a, b, null) : M.substr(a, b, c))) this.r.s = a, this.r.m.index += b;
                    return c
                },
                split: function (a) {
                    return a.replace(this.r,
                        "#__delim__#").split("#__delim__#")
                },
                map: function (a, b) {
                    var c = 0,
                        d = "";
                    do {
                        if (c >= a.length) break;
                        else if (!this.matchSub(a, c)) {
                            d += E.string(M.substr(a, c, null));
                            break
                        }
                        var g = this.matchedPos();
                        d += E.string(M.substr(a, c, g.pos - c));
                        d += E.string(b(this));
                        0 == g.len ? (d += E.string(M.substr(a, g.pos, 1)), c = g.pos + 1) : c = g.pos + g.len
                    } while (this.r.global);
                    !this.r.global && 0 < c && c < a.length && (d += E.string(M.substr(a, c, null)));
                    return d
                },
                __class__: Ya
            };
            var M = function () {
            };
            h.HxOverrides = M;
            M.__name__ = "HxOverrides";
            M.strDate = function (a) {
                switch (a.length) {
                    case 8:
                        a =
                            a.split(":");
                        var b = new Date;
                        b.setTime(0);
                        b.setUTCHours(a[0]);
                        b.setUTCMinutes(a[1]);
                        b.setUTCSeconds(a[2]);
                        return b;
                    case 10:
                        return a = a.split("-"), new Date(a[0], a[1] - 1, a[2], 0, 0, 0);
                    case 19:
                        return a = a.split(" "), b = a[0].split("-"), a = a[1].split(":"), new Date(b[0], b[1] - 1, b[2], a[0], a[1], a[2]);
                    default:
                        throw aa.thrown("Invalid date format : " + a);
                }
            };
            M.cca = function (a, b) {
                a = a.charCodeAt(b);
                if (a == a) return a
            };
            M.substr = function (a, b, c) {
                if (null == c) c = a.length;
                else if (0 > c)
                    if (0 == b) c = a.length + c;
                    else return "";
                return a.substr(b,
                    c)
            };
            M.remove = function (a, b) {
                b = a.indexOf(b);
                if (-1 == b) return !1;
                a.splice(b, 1);
                return !0
            };
            M.now = function () {
                return Date.now()
            };
            var D = function () {
            };
            h.Lambda = D;
            D.__name__ = "Lambda";
            D.array = function (a) {
                var b = [];
                for (a = G(a); a.hasNext();) {
                    var c = a.next();
                    b.push(c)
                }
                return b
            };
            var qb = function () {
            };
            h.ManifestResources = qb;
            qb.__name__ = "ManifestResources";
            qb.preloadLibraries = null;
            qb.preloadLibraryNames = null;
            qb.rootPath = null;
            qb.init = function (a) {
                qb.preloadLibraries = [];
                qb.preloadLibraryNames = [];
                qb.rootPath = null;
                null != a && Object.prototype.hasOwnProperty.call(a,
                    "rootPath") && (qb.rootPath = L.field(a, "rootPath"), T.endsWith(qb.rootPath, "/") || (qb.rootPath += "/"));
                null == qb.rootPath && (qb.rootPath = "./");
                ya.registerFont(ba);
                ya.registerFont(da);
                a = Ad.parse('{"name":null,"assets":"aoy4:sizei46596y4:typey4:FONTy9:classNamey37:__ASSET__assets_sharetech_regular_ttfy2:idy7:ui_fonty7:preloadtgoR0i42756R1R2R3y41:__ASSET__assets_sharetechmono_regular_ttfR5y12:ui_font_monoR7tgoy4:pathy21:Assets%2Fgothic.json5R0i3221R1y4:TEXTR5y6:gothicR7tgoR10y21:Assets%2Fgrammar.jsonR0i899R1R12R5y7:grammarR7tgoR10y21:Assets%2Fnatural.jsonR0i502R1R12R5y7:naturalR7tgoR10y20:Assets%2Fwooden.jsonR0i502R1R12R5y6:woodenR7tgoR10y19:Assets%2Fplain.jsonR0i504R1R12R5y5:plainR7tgoR10y23:Assets%2Fblueprint.jsonR0i502R1R12R5y9:blueprintR7tgoR10y16:Assets%2Fbw.jsonR0i501R1R12R5y2:bwR7tgh","rootPath":null,"version":2,"libraryArgs":[],"libraryType":null}',
                    qb.rootPath);
                a = Nb.fromManifest(a);
                Pa.registerLibrary("default", a);
                a = Pa.getLibrary("default");
                null != a ? qb.preloadLibraries.push(a) : qb.preloadLibraryNames.push("default")
            };
            var pb = function (a) {
                null != a && (this.name = a);
                this.__init || (void 0 == this.ascender && (this.ascender = 0), void 0 == this.descender && (this.descender = 0), void 0 == this.height && (this.height = 0), void 0 == this.numGlyphs && (this.numGlyphs = 0), void 0 == this.underlinePosition && (this.underlinePosition = 0), void 0 == this.underlineThickness && (this.underlineThickness =
                    0), void 0 == this.unitsPerEM && (this.unitsPerEM = 0), null != this.__fontID ? Pa.isLocal(this.__fontID) && this.__fromBytes(Pa.getBytes(this.__fontID)) : null != this.__fontPath && this.__fromFile(this.__fontPath))
            };
            h["lime.text.Font"] = pb;
            pb.__name__ = "lime.text.Font";
            pb.fromFile = function (a) {
                if (null == a) return null;
                var b = new pb;
                b.__fromFile(a);
                return b
            };
            pb.loadFromName = function (a) {
                return (new pb).__loadFromName(a)
            };
            pb.__measureFontNode = OpenflShared.measureFontNode;
            pb.prototype = {
                __copyFrom: function (a) {
                    null != a && (this.ascender = a.ascender, this.descender = a.descender, this.height = a.height, this.name = a.name, this.numGlyphs =
                        a.numGlyphs, this.src = a.src, this.underlinePosition = a.underlinePosition, this.underlineThickness = a.underlineThickness, this.unitsPerEM = a.unitsPerEM, this.__fontID = a.__fontID, this.__fontPath = a.__fontPath, this.__init = !0)
                },
                __fromBytes: function (a) {
                    this.__fontPath = null
                },
                __fromFile: function (a) {
                    this.__fontPath = a
                },
                __loadFromName: function (a) {
                    var b = this,
                        c = new Fd;
                    this.name = a;
                    var d = B.navigator.userAgent.toLowerCase(),
                        g = 0 <= d.indexOf(" safari/") && 0 > d.indexOf(" chrome/");
                    d = (new Ya("(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)",
                        "i")).match(d);
                    if (!g && !d && window.document.fonts && (H = window.document.fonts, m(H, H.load))) window.document.fonts.load("1em '" + a + "'").then(function (a) {
                        c.complete(b)
                    }, function (d) {
                        Wa.warn('Could not load web font "' + a + '"', {

                            className: "lime.text.Font",
                            methodName: "__loadFromName"
                        });
                        c.complete(b)
                    });
                    else {
                        var f = pb.__measureFontNode("'" + a + "', sans-serif"),
                            k = pb.__measureFontNode("'" + a + "', serif"),
                            q = f.offsetWidth,
                            l = k.offsetWidth,
                            h = -1,
                            Fa = 0,
                            n, r;
                        h = window.setInterval(function () {
                            Fa +=
                                1;
                            n = f.offsetWidth != q || k.offsetWidth != l;
                            r = 3E3 <= 50 * Fa;
                            if (n || r) window.clearInterval(h), f.parentNode.removeChild(f), k.parentNode.removeChild(k), k = f = null, r && Wa.warn('Could not load web font "' + a + '"', {

                                className: "lime.text.Font",
                                methodName: "__loadFromName"
                            }), c.complete(b)
                        }, 50)
                    }
                    return c.future
                },
                __class__: pb
            };
            var wa = v.__ASSET__assets_sharetech_regular_ttf = function () {
                this.ascender = 885;
                this.descender = -242;
                this.height = 1127;
                this.numGlyphs = 256;
                this.underlinePosition = -100;
                this.underlineThickness = 50;
                this.unitsPerEM = 1E3;
                this.name = "Share Tech Regular";
                pb.call(this)
            };
            h.__ASSET__assets_sharetech_regular_ttf = wa;
            wa.__name__ = "__ASSET__assets_sharetech_regular_ttf";
            wa.__super__ = pb;
            wa.prototype = w(pb.prototype, {
                __class__: wa
            });
            var bb = v.__ASSET__assets_sharetechmono_regular_ttf = function () {
                this.ascender = 885;
                this.descender = -242;
                this.height = 1127;
                this.numGlyphs = 268;
                this.underlinePosition = -135;
                this.underlineThickness = 50;
                this.unitsPerEM = 1E3;
                this.name = "Share Tech Mono";
                pb.call(this)
            };
            h.__ASSET__assets_sharetechmono_regular_ttf = bb;
            bb.__name__ = "__ASSET__assets_sharetechmono_regular_ttf";
            bb.__super__ = pb;
            bb.prototype = w(pb.prototype, {
                __class__: bb
            });
            var ya = function (a) {
                pb.call(this, a)
            };
            h["openfl.text.Font"] = ya;
            ya.__name__ = "openfl.text.Font";
            ya.fromFile = function (a) {
                if (null == a) return null;
                var b = new ya;
                b.__fromFile(a);
                return b
            };
            ya.loadFromName = function (a) {
                return pb.loadFromName(a).then(function (a) {
                    var b = new ya;
                    b.__fromLimeFont(a);
                    return Fc.withValue(b)
                })
            };
            ya.registerFont = function (a) {
                a =
                    null == Ua.getClass(a) ? Ua.__cast(z.createInstance(a, []), ya) : Ua.__cast(a, ya);
                null != a && (ya.__registeredFonts.push(a), ya.__fontByName.h[a.name] = a)
            };
            ya.__super__ = pb;
            ya.prototype = w(pb.prototype, {
                __fromLimeFont: function (a) {
                    this.__copyFrom(a)
                },
                __class__: ya
            });
            var ba = v.__ASSET__OPENFL__assets_sharetech_regular_ttf = function () {
                this.__fromLimeFont(new wa);
                pb.call(this, void 0)
            };
            h.__ASSET__OPENFL__assets_sharetech_regular_ttf = ba;
            ba.__name__ = "__ASSET__OPENFL__assets_sharetech_regular_ttf";
            ba.__super__ = ya;
            ba.prototype =
                w(ya.prototype, {
                    __class__: ba
                });
            var da = v.__ASSET__OPENFL__assets_sharetechmono_regular_ttf = function () {
                this.__fromLimeFont(new bb);
                pb.call(this, void 0)
            };
            h.__ASSET__OPENFL__assets_sharetechmono_regular_ttf = da;
            da.__name__ = "__ASSET__OPENFL__assets_sharetechmono_regular_ttf";
            da.__super__ = ya;
            da.prototype = w(ya.prototype, {
                __class__: da
            });
            Math.__name__ = "Math";
            var L = function () {
            };
            h.Reflect = L;
            L.__name__ = "Reflect";
            L.field = function (a, b) {
                try {
                    return a[b]
                } catch (c) {
                    return Ha.lastError = c, null
                }
            };
            L.getProperty = function (a,
                                      b) {
                var c;
                if (null == a) return null;
                var d = a.__properties__ ? c = a.__properties__["get_" + b] : !1;
                return d ? a[c]() : a[b]
            };
            L.fields = function (a) {
                var b = [];
                if (null != a) {
                    var c = Object.prototype.hasOwnProperty,
                        d;
                    for (d in a) "__id__" != d && "hx__closures__" != d && c.call(a, d) && b.push(d)
                }
                return b
            };
            L.isFunction = function (a) {
                return "function" == typeof a ? !(a.__name__ || a.__ename__) : !1
            };
            L.compare = function (a, b) {
                return a == b ? 0 : a > b ? 1 : -1
            };
            L.deleteField = function (a, b) {
                if (!Object.prototype.hasOwnProperty.call(a, b)) return !1;
                delete a[b];
                return !0
            };
            var E = function () {
            };
            h.Std = E;
            E.__name__ = "Std";
            E.string = function (a) {
                return Ua.__string_rec(a, "")
            };
            E.parseInt = function (a) {
                a = parseInt(a);
                return isNaN(a) ? null : a
            };
            var fb = function () {
                this.b = ""
            };
            h.StringBuf = fb;
            fb.__name__ = "StringBuf";
            fb.prototype = {
                __class__: fb
            };
            var T = function () {
            };
            h.StringTools = T;
            T.__name__ = "StringTools";
            T.htmlEscape = function (a, b) {
                for (var c = "", d = 0, g = a; d < g.length;) {
                    a = g;
                    var f = d++,
                        k = a.charCodeAt(f);
                    55296 <= k && 56319 >= k && (k = k - 55232 << 10 | a.charCodeAt(f + 1) & 1023);
                    a = k;
                    65536 <= a && ++d;
                    switch (a) {
                        case 34:
                            c =
                                b ? c + "&quot;" : c + String.fromCodePoint(a);
                            break;
                        case 38:
                            c += "&amp;";
                            break;
                        case 39:
                            c = b ? c + "&#039;" : c + String.fromCodePoint(a);
                            break;
                        case 60:
                            c += "&lt;";
                            break;
                        case 62:
                            c += "&gt;";
                            break;
                        default:
                            c += String.fromCodePoint(a)
                    }
                }
                return c
            };
            T.htmlUnescape = function (a) {
                return a.split("&gt;").join(">").split("&lt;").join("<").split("&quot;").join('"').split("&#039;").join("'").split("&amp;").join("&")
            };
            T.startsWith = function (a, b) {
                return a.length >= b.length ? 0 == a.lastIndexOf(b, 0) : !1
            };
            T.endsWith = HaxeShared.endsWith;
            T.isSpace = function (a, b) {
                a = M.cca(a, b);
                return 8 < a && 14 > a ? !0 : 32 == a
            };
            T.ltrim = function (a) {
                for (var b = a.length, c = 0; c < b && T.isSpace(a, c);) ++c;
                return 0 < c ? M.substr(a, c, b - c) : a
            };
            T.rtrim = function (a) {
                for (var b = a.length, c = 0; c < b && T.isSpace(a, b - c - 1);) ++c;
                return 0 < c ? M.substr(a, 0, b - c) : a
            };
            T.trim = function (a) {
                return T.ltrim(T.rtrim(a))
            };
            T.replace = function (a, b, c) {
                return a.split(b).join(c)
            };
            T.hex = function (a, b) {
                var c = "";
                do c = "0123456789ABCDEF".charAt(a & 15) + c, a >>>= 4; while (0 < a);
                if (null != b)
                    for (; c.length < b;) c = "0" + c;
                return c
            };
            var cb = N.ValueType = {
                __ename__: "ValueType",
                __constructs__: null,
                TNull: {
                    _hx_name: "TNull",
                    _hx_index: 0,
                    __enum__: "ValueType",
                    toString: u
                },
                TInt: {
                    _hx_name: "TInt",
                    _hx_index: 1,
                    __enum__: "ValueType",
                    toString: u
                },
                TFloat: {
                    _hx_name: "TFloat",
                    _hx_index: 2,
                    __enum__: "ValueType",
                    toString: u
                },
                TBool: {
                    _hx_name: "TBool",
                    _hx_index: 3,
                    __enum__: "ValueType",
                    toString: u
                },
                TObject: {
                    _hx_name: "TObject",
                    _hx_index: 4,
                    __enum__: "ValueType",
                    toString: u
                },
                TFunction: {
                    _hx_name: "TFunction",
                    _hx_index: 5,
                    __enum__: "ValueType",
                    toString: u
                },
                TClass: (H = function (a) {
                    return {
                        _hx_index: 6,
                        c: a,
                        __enum__: "ValueType",
                        toString: u
                    }
                }, H._hx_name = "TClass", H.__params__ = ["c"], H),
                TEnum: (H = function (a) {
                    return {
                        _hx_index: 7,
                        e: a,
                        __enum__: "ValueType",
                        toString: u
                    }
                }, H._hx_name = "TEnum", H.__params__ = ["e"], H),
                TUnknown: {
                    _hx_name: "TUnknown",
                    _hx_index: 8,
                    __enum__: "ValueType",
                    toString: u
                }
            };
            cb.__constructs__ = [cb.TNull, cb.TInt, cb.TFloat, cb.TBool, cb.TObject, cb.TFunction, cb.TClass, cb.TEnum, cb.TUnknown];
            var z = function () {
            };
            h.Type = z;
            z.__name__ = "Type";
            z.resolveEnum = function (a) {
                return N[a]
            };
            z.createInstance = function (a, b) {
                return new (Function.prototype.bind.apply(a, [null].concat(b)))
            };
            z.createEnum = function (a, b, c) {
                var d = L.field(a, b);
                if (null == d) throw aa.thrown("No such constructor " + b);
                if (L.isFunction(d)) {
                    if (null == c) throw aa.thrown("Constructor " + b + " need parameters");
                    return d.apply(a, c)
                }
                if (null != c && 0 != c.length) throw aa.thrown("Constructor " + b + " does not need parameters");
                return d
            };
            z.getClassFields = function (a) {
                a = L.fields(a);
                M.remove(a, "__name__");
                M.remove(a, "__interfaces__");
                M.remove(a, "__properties__");
                M.remove(a, "__super__");
                M.remove(a, "__meta__");
                M.remove(a, "prototype");
                return a
            };
            z.typeof = function (a) {
                switch (typeof a) {
                    case "boolean":
                        return cb.TBool;
                    case "function":
                        return a.__name__ || a.__ename__ ? cb.TObject : cb.TFunction;
                    case "number":
                        return Math.ceil(a) == a % 2147483648 ? cb.TInt : cb.TFloat;
                    case "object":
                        if (null == a) return cb.TNull;
                        var b = a.__enum__;
                        if (null != b) return cb.TEnum(N[b]);
                        a = Ua.getClass(a);
                        return null != a ? cb.TClass(a) : cb.TObject;
                    case "string":
                        return cb.TClass(String);
                    case "undefined":
                        return cb.TNull;
                    default:
                        return cb.TUnknown
                }
            };
            z.enumParameters = function (a) {
                var b = N[a.__enum__].__constructs__[a._hx_index].__params__;
                if (null != b) {
                    for (var c = [], d = 0; d < b.length;) {
                        var g = b[d];
                        ++d;
                        c.push(a[g])
                    }
                    return c
                }
                return []
            };
            var Ja = {
                    gt: function (a, b) {
                        var c = 0 > a;
                        return c != 0 > b ? c : a > b
                    },
                    toFloat: function (a) {
                        return 0 > a ? 4294967296 + a : a + 0
                    }
                },
                O = {
                    toString: function (a) {
                        switch (a) {
                            case 0:
                                return "Element";
                            case 1:
                                return "PCData";
                            case 2:
                                return "CData";
                            case 3:
                                return "Comment";
                            case 4:
                                return "DocType";
                            case 5:
                                return "ProcessingInstruction";
                            case 6:
                                return "Document"
                        }
                    }
                },
                x = function (a) {
                    this.nodeType = a;
                    this.children = [];
                    this.attributeMap = new ab
                };
            h.Xml = x;
            x.__name__ = "Xml";
            x.parse = function (a) {
                return bf.parse(a)
            };
            x.createElement = function (a) {
                var b = new x(x.Element);
                if (b.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element but found " + (null == b.nodeType ? "null" : O.toString(b.nodeType)));
                b.nodeName = a;
                return b
            };
            x.createPCData = function (a) {
                var b = new x(x.PCData);
                if (b.nodeType == x.Document || b.nodeType == x.Element) throw aa.thrown("Bad node type, unexpected " +
                    (null == b.nodeType ? "null" : O.toString(b.nodeType)));
                b.nodeValue = a;
                return b
            };
            x.createCData = function (a) {
                var b = new x(x.CData);
                if (b.nodeType == x.Document || b.nodeType == x.Element) throw aa.thrown("Bad node type, unexpected " + (null == b.nodeType ? "null" : O.toString(b.nodeType)));
                b.nodeValue = a;
                return b
            };
            x.createComment = function (a) {
                var b = new x(x.Comment);
                if (b.nodeType == x.Document || b.nodeType == x.Element) throw aa.thrown("Bad node type, unexpected " + (null == b.nodeType ? "null" : O.toString(b.nodeType)));
                b.nodeValue = a;
                return b
            };
            x.createDocType = function (a) {
                var b = new x(x.DocType);
                if (b.nodeType == x.Document || b.nodeType == x.Element) throw aa.thrown("Bad node type, unexpected " + (null == b.nodeType ? "null" : O.toString(b.nodeType)));
                b.nodeValue = a;
                return b
            };
            x.createProcessingInstruction = function (a) {
                var b = new x(x.ProcessingInstruction);
                if (b.nodeType == x.Document || b.nodeType == x.Element) throw aa.thrown("Bad node type, unexpected " + (null == b.nodeType ? "null" : O.toString(b.nodeType)));
                b.nodeValue = a;
                return b
            };
            x.createDocument = function () {
                return new x(x.Document)
            };
            x.prototype = {
                get: function (a) {
                    if (this.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element but found " + (null == this.nodeType ? "null" : O.toString(this.nodeType)));
                    return this.attributeMap.h[a]
                },
                set: function (a, b) {
                    if (this.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element but found " + (null == this.nodeType ? "null" : O.toString(this.nodeType)));
                    this.attributeMap.h[a] = b
                },
                remove: function (a) {
                    if (this.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element but found " +
                        (null == this.nodeType ? "null" : O.toString(this.nodeType)));
                    var b = this.attributeMap;
                    Object.prototype.hasOwnProperty.call(b.h, a) && delete b.h[a]
                },
                exists: function (a) {
                    if (this.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element but found " + (null == this.nodeType ? "null" : O.toString(this.nodeType)));
                    return Object.prototype.hasOwnProperty.call(this.attributeMap.h, a)
                },
                attributes: function () {
                    if (this.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element but found " + (null == this.nodeType ?
                        "null" : O.toString(this.nodeType)));
                    return new Kh(this.attributeMap.h)
                },
                firstElement: function () {
                    if (this.nodeType != x.Document && this.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element or Document but found " + (null == this.nodeType ? "null" : O.toString(this.nodeType)));
                    for (var a = 0, b = this.children; a < b.length;) {
                        var c = b[a];
                        ++a;
                        if (c.nodeType == x.Element) return c
                    }
                    return null
                },
                addChild: function (a) {
                    if (this.nodeType != x.Document && this.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element or Document but found " +
                        (null == this.nodeType ? "null" : O.toString(this.nodeType)));
                    null != a.parent && a.parent.removeChild(a);
                    this.children.push(a);
                    a.parent = this
                },
                removeChild: function (a) {
                    if (this.nodeType != x.Document && this.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element or Document but found " + (null == this.nodeType ? "null" : O.toString(this.nodeType)));
                    return M.remove(this.children, a) ? (a.parent = null, !0) : !1
                },
                toString: function () {
                    return Ke.print(this)
                },
                __class__: x
            };
            var Jb = function () {
                this.keyShift = this.keyCtrl = this.isSolid = !1;
                this.rWidth = this.rHeight = 0;
                this.update = new gc;
                this.keyEvent = new hg;
                X.call(this)
            };
            h["coogee.Scene"] = Jb;
            Jb.__name__ = "coogee.Scene";
            Jb.__super__ = X;
            Jb.prototype = w(X.prototype, {
                activate: function () {
                    Mb.get_tick().add(m(this, this.onUpdate));
                    this.stage.addEventListener("keyDown", m(this, this.onKeyDown));
                    this.stage.addEventListener("keyUp", m(this, this.onKeyUp))
                },
                deactivate: function () {
                    Mb.get_tick().remove(m(this, this.onUpdate));
                    this.stage.removeEventListener("keyDown", m(this, this.onKeyDown));
                    this.stage.removeEventListener("keyUp", m(this, this.onKeyUp))
                },
                onEsc: function () {
                    Oa.quit()
                },
                onKeyDown: function (a) {
                    switch (a.keyCode) {
                        case 15:
                        case 17:
                            this.keyCtrl = !0;
                            break;
                        case 16:
                            this.keyShift = !0;
                            break;
                        case 27:
                            this.onEsc()
                    }
                    this.keyEvent.dispatch(a.keyCode, !0);
                    null == this.stage || this.stage.get_focus() instanceof Yc || a.preventDefault()
                },
                onKeyUp: function (a) {
                    switch (a.keyCode) {
                        case 15:
                        case 17:
                            this.keyCtrl = !1;
                            break;
                        case 16:
                            this.keyShift = !1
                    }
                    this.keyEvent.dispatch(a.keyCode, !1);
                    this.stage.get_focus() instanceof
                    Yc || a.preventDefault()
                },
                setSize: function (a, b) {
                    this.rWidth = a;
                    this.rHeight = b;
                    this.layout()
                },
                get_width: function () {
                    return this.rWidth
                },
                get_height: function () {
                    return this.rHeight
                },
                layout: function () {
                },
                onUpdate: function (a) {
                    this.update.dispatch(a)
                },
                __hitTest: function (a, b, c, d, g, f) {
                    a = X.prototype.__hitTest.call(this, a, b, c, d, g, f);
                    return this.isSolid ? (a || d.push(f), !0) : a
                },
                __class__: Jb
            });
            var R = function () {
                this.valign = "top";
                this.halign = "left";
                this.rWidth = this.rHeight = 0;
                X.call(this)
            };
            h["coogee.ui.View"] =
                R;
            R.__name__ = "coogee.ui.View";
            R.__super__ = X;
            R.prototype = w(X.prototype, {
                get_width: function () {
                    return this.rWidth
                },
                set_width: function (a) {
                    this.setSize(a, this.rHeight);
                    return this.rWidth
                },
                get_height: function () {
                    return this.rHeight
                },
                set_height: function (a) {
                    this.setSize(this.rWidth, a);
                    return this.rHeight
                },
                setSize: function (a, b) {
                    this.rWidth = a;
                    this.rHeight = b;
                    this.layout()
                },
                layout: function () {
                },
                add: function (a) {
                    this.addChild(a)
                },
                remove: function (a) {
                    this.removeChild(a)
                },
                set_enabled: function (a) {
                    return this.mouseEnabled =
                        this.mouseChildren = a
                },
                __class__: R,
                __properties__: w(X.prototype.__properties__, {
                    set_enabled: "set_enabled"
                })
            });
            var mc = function () {
                this.click = new Yd;
                R.call(this);
                this.label = this.createLabel();
                this.addChild(this.label);
                this.set_buttonMode(!0);
                this.addEventListener("click", m(this, this.onClick));
                this.setSize(this.label.get_width() + 10, this.label.get_height() + 10)
            };
            h["coogee.ui.ButtonBase"] = mc;
            mc.__name__ = "coogee.ui.ButtonBase";
            mc.__super__ = R;
            mc.prototype = w(R.prototype, {
                layout: function () {
                    this.get_graphics().clear();
                    this.get_graphics().beginFill(ia.black);
                    this.get_graphics().drawRoundRect(0, 0, this.rWidth, this.rHeight, 10);
                    this.label.set_x((this.rWidth - this.label.get_width()) / 2 | 0);
                    this.label.set_y((this.rHeight - this.label.get_height()) / 2 | 0)
                },
                createLabel: function () {
                    return null
                },
                onClick: function (a) {
                    this.click.dispatch();
                    a.stopPropagation()
                },
                __class__: mc
            });
            var wb = function (a, b) {
                this.txtLabel = a;
                mc.call(this);
                null != b && this.click.add(b)
            };
            h["coogee.ui.Button"] = wb;
            wb.__name__ = "coogee.ui.Button";
            wb.__super__ = mc;
            wb.prototype = w(mc.prototype, {
                createLabel: function () {
                    return Gc.get(this.txtLabel, ia.format(ia.uiFont, ia.smallSize, ia.white))
                },
                __class__: wb
            });
            var tb = function () {
                this.snap = !0;
                this.margin = this.gap = 10;
                R.call(this)
            };
            h["coogee.ui.layouts.VBox"] = tb;
            tb.__name__ = "coogee.ui.layouts.VBox";
            tb.__super__ = R;
            tb.prototype = w(R.prototype, {
                layout: function () {
                    for (var a = this.margin, b = 0, c = !1, d = 0, g = this.get_numChildren(); d < g;) {
                        var f = d++;
                        f = this.getChildAt(f);
                        "left" != f.halign && (c = !0);
                        b <
                        f.get_width() && (b = f.get_width());
                        f.set_x(this.margin);
                        f.set_y(a);
                        a += f.get_height() + this.gap;
                        this.snap && (a |= 0)
                    }
                    if (c)
                        for (d = 0, g = this.get_numChildren(); d < g;) switch (f = d++, f = this.getChildAt(f), f.halign) {
                            case "center":
                                f.set_x(this.margin + (b - f.get_width()) / 2);
                                break;
                            case "fill":
                                f.set_width(b);
                                break;
                            case "right":
                                f.set_x(this.margin + (b - f.get_width()))
                        }
                    this.rHeight = a > this.margin ? a - this.gap + this.margin : 2 * this.margin;
                    this.rWidth = b + 2 * this.margin
                },
                add: function (a) {
                    R.prototype.add.call(this, a);
                    this.layout()
                },
                setMargins: function (a,
                                      b) {
                    this.margin = a;
                    this.gap = b
                },
                __class__: tb
            });
            var Tb = function () {
                tb.call(this);
                this.setMargins(0, 0);
                this.addEventListener("keyDown", m(this, this.onKeyDown));
                this.addEventListener("focusOut", m(this, this.onFocusOut))
            };
            h["coogee.ui.Form"] = Tb;
            Tb.__name__ = "coogee.ui.Form";
            Tb.__super__ = tb;
            Tb.prototype = w(tb.prototype, {
                getTitle: function () {
                    return null
                },
                onShow: function () {
                },
                onHide: function () {
                },
                onKeyDown: function (a) {
                    this.onKey(a.keyCode) && (a.stopPropagation(), a.preventDefault())
                },
                onKey: function (a) {
                    switch (a) {
                        case 13:
                            this.onEnter();
                            break;
                        case 27:
                            this.onEsc();
                            break;
                        default:
                            return !1
                    }
                    return !0
                },
                onEsc: function () {
                    this.dialog.hide()
                },
                onEnter: function () {
                },
                onFocusOut: function (a) {
                    null == a.relatedObject && this.stage.set_focus(this)
                },
                hr: function (a) {
                    var b = new za(ia.medium);
                    b.setSize(2, 2);
                    b.halign = "fill";
                    b.valign = "fill";
                    (null != a ? a : this).add(b)
                },
                __class__: Tb
            });
            var Ga = function (a) {
                Tb.call(this);
                this.buttons = new jc(a);
                this.buttons.click.add(m(this, this.onButton));
                this.addChild(this.buttons)
            };
            h["coogee.ui.ButtonsForm"] = Ga;
            Ga.__name__ =
                "coogee.ui.ButtonsForm";
            Ga.__super__ = Tb;
            Ga.prototype = w(Tb.prototype, {
                add: function (a) {
                    this.addChild(a);
                    this.addChild(this.buttons);
                    this.layout()
                },
                layout: function () {
                    Tb.prototype.layout.call(this);
                    this.buttons.set_width(this.rWidth);
                    Tb.prototype.layout.call(this)
                },
                onButton: function (a) {
                    this.dialog.hide()
                },
                onEnter: function () {
                    this.onButton("OK")
                },
                onEsc: function () {
                    this.onButton("Cancel")
                },
                __class__: Ga
            });
            var AboutTextBox = function (a, b, c) {
                R.call(this);
                this.border = za.black();
                this.add(this.border);
                this.bg = za.white();
                this.add(this.bg);
                this.tf = new Yc;
                this.tf.set_defaultTextFormat(ia.format(ia.uiFont, ia.smallSize, ia.black));
                this.tf.set_selectable(!0);
                this.tf.set_wordWrap(!0);
                this.tf.set_multiline(!0);
                this.tf.set_autoSize(0);
                this.addChild(this.tf);
                this.setSize(b, c);
                this.setText(a)
            };
            h["coogee.ui.views.AboutTextBox"] = AboutTextBox;
            AboutTextBox.__name__ = "coogee.ui.views.AboutTextBox";
            AboutTextBox.__super__ = R;
            AboutTextBox.prototype = w(R.prototype, {
                setText: function (a) {
                    null == a && (a = "");
                    1000 < a.length && (a = a.substr(0, 1000));
                    this.tf.set_text(a);
                    this.layout();
                    return a
                },
                layout: function () {
                    this.border.setSize(this.rWidth, this.rHeight);
                    this.bg.setSize(this.rWidth - 4, this.rHeight - 4);
                    this.bg.set_x(this.bg.set_y(2));
                    this.tf.set_x(6);
                    this.tf.set_y(6);
                    this.tf.set_width(this.rWidth - 12);
                    this.tf.set_height(this.rHeight - 12)
                },
                __class__: AboutTextBox
            });
            var AboutDialogForm = function () {
                var buttonsArr = [];
                Object.entries(params.meta.about.buttons).forEach(([key, value]) => {
                    buttonsArr.push(key);
                });
                buttonsArr.sort();
                Ga.call(this, buttonsArr);

                this.setMargins(10, 8);
                this.add(new Vb(params.meta.name_app));
                var a = new tb;
                a.setMargins(0, 4);
                var b = new Pc;
                b.setMargins(0, 0);
                b.gap = 12;

                Object.entries(params.meta.about.params).forEach(([key, value]) => {
                    var c = new Vb(key, !0);
                    //c.set_width(80);
                    b.add(c);
                    b.add(new Vb(value, !0));
                    a.add(b);
                    b = new Pc;
                    b.setMargins(0, 0);
                    b.gap = 12;
                });

                this.add(a);
                a = new AboutTextBox(AboutDialogForm.TEXT, OthersShared.widthAboutTextBox(), OthersShared.heightAboutTextBox());
                a.halign = "fill";
                this.add(a);
                a = this.buttons.hbox.getChildAt(0);
                b = this.buttons.hbox.getChildAt(1);
                a.set_width(140);
                b.set_width(140);
                this.buttons.hbox.layout();
                this.buttons.setSize(this.buttons.hbox.get_width(), this.buttons.hbox.get_height());
                this.layout()
            };
            h["coogee.ui.forms.AboutDialogForm"] = AboutDialogForm;
            AboutDialogForm.__name__ = "coogee.ui.forms.AboutDialogForm";
            AboutDialogForm.TEXT = params.meta.about.text;
            AboutDialogForm.__super__ = Ga;
            AboutDialogForm.prototype = w(Ga.prototype, {
                getTitle: function () {
                    return "About"
                },
                onButton: function (a) {
                    Object.entries(params.meta.about.buttons).forEach(([key, value]) => {
                        if (key == a) window.open(FuncProto.paramsUrlString(value), "_self");
                    });
                    this.dialog.hide()
                },
                onEnter: function () {
                },
                onEsc: function () {
                    this.dialog.hide()
                },
                __class__: AboutDialogForm
            });
            var yb = function (a) {
                this.changed = new gc;
                R.call(this);
                this.border = za.black();
                this.add(this.border);
                this.empty = za.white();
                this.add(this.empty);
                this.filled = za.black();
                this.add(this.filled);
                null != a ? (this.label = new Vb(a), this.label.mouseEnabled = !0, this.label.mouseChildren = !0, this.add(this.label), this.setSize(24 + this.label.get_width(), Math.max(20, this.label.get_height()))) : this.setSize(20, 20);
                this.set_buttonMode(!0);
                this.addEventListener("click", m(this, this.onClick))
            };
            h["coogee.ui.CheckBox"] = yb;
            yb.__name__ = "coogee.ui.CheckBox";
            yb.__super__ = R;
            yb.prototype = w(R.prototype, {
                layout: function () {
                    this.border.setSize(20,
                        20);
                    this.border.set_x(null != this.label ? 0 : (this.rWidth - this.border.get_width()) / 2 | 0);
                    this.border.set_y((this.rHeight - this.border.get_height()) / 2 | 0);
                    this.empty.setSize(this.border.get_width() - 4, this.border.get_height() - 4);
                    this.empty.set_x(this.border.get_x() + 2);
                    this.empty.set_y(this.border.get_y() + 2);
                    this.filled.setSize(this.empty.get_width() - 4, this.empty.get_height() - 4);
                    this.filled.set_x(this.empty.get_x() + 2);
                    this.filled.set_y(this.empty.get_y() + 2);
                    null != this.label && this.label.set_x(this.border.get_width() +
                        4)
                },
                get_value: function () {
                    return this.filled.get_visible()
                },
                set_value: function (a) {
                    this.filled.set_visible(a);
                    return a
                },
                onClick: function (a) {
                    this.set_value(!this.get_value());
                    this.changed.dispatch(this.get_value())
                },
                set_enabled: function (a) {
                    R.prototype.set_enabled.call(this, a);
                    var b = a ? ia.black : ia.light;
                    this.border.bmp.get_bitmapData().setPixel(0, 0, b);
                    this.filled.bmp.get_bitmapData().setPixel(0, 0, b);
                    null != this.label && this.label.set_color(b);
                    return a
                },
                __class__: yb,
                __properties__: w(R.prototype.__properties__, {
                    set_value: "set_value",
                    get_value: "get_value"
                })
            });
            var Jc = function (a, b) {
                this.onMinimize = new gc;
                this.onMove = new gc;
                this.onHide = new gc;
                this.minimized = this.minimizable = !1;
                R.call(this);
                this.bg1 = za.black();
                this.addChild(this.bg1);
                this.bg2 = za.white();
                this.addChild(this.bg2);
                this.addEventListener("mouseDown", m(this, this.onBringUp));
                this.header = new gd(b);
                this.header.addEventListener("mouseDown", m(this, this.onStartDrag));
                this.header.addEventListener("click", m(this, this.onClick));
                this.addChild(this.header);
                this.content =
                    a;
                this.addChild(a);
                this.resize()
            };
            h["coogee.ui.Window"] = Jc;
            Jc.__name__ = "coogee.ui.Window";
            Jc.show = function (a, b, c, d) {
                c = null == d ? new Jc(b, c) : z.createInstance(d, [b, c]);
                c.set_x((a.get_width() - c.get_width()) / 2 | 0);
                c.set_y((a.get_height() - c.get_height()) / 2 | 0);
                a.addChild(c);
                null != b.stage && b.stage.set_focus(b);
                return c
            };
            Jc.__super__ = R;
            Jc.prototype = w(R.prototype, {
                resize: function (a) {
                    null == a && (a = !1);
                    var b = this.content.get_width() + 4,
                        c = this.header.get_height() + this.content.get_height() + 2,
                        d = a ? (this.rWidth - b) / 2 | 0 : 0;
                    a = a ? (this.rHeight - c) / 2 | 0 : 0;
                    this.setSize(b, c);
                    this.set_x(this.get_x() + d);
                    this.set_y(this.get_y() + a)
                },
                layout: function () {
                    this.header.set_width(this.rWidth);
                    this.minimized ? (this.bg1.setSize(this.rWidth, this.header.get_height()), this.content.set_visible(!1), this.bg2.set_visible(!1)) : (this.bg1.setSize(this.rWidth, this.rHeight), this.content.set_visible(!0), this.bg2.set_visible(!0), this.bg2.setSize(this.rWidth - 4, this.rHeight - this.header.get_height() - 2), this.content.set_x(this.bg2.set_x(2)),
                        this.content.set_y(this.bg2.set_y(this.header.get_height())))
                },
                hide: function () {
                    null != this.parent && (this.stage.set_focus(this.stage), this.parent.removeChild(this), this.onHide.dispatch(this))
                },
                onBringUp: function (a) {
                    this.parent.addChild(this)
                },
                onStartDrag: function (a) {
                    this.clicked = !0;
                    this.stage.addEventListener("mouseMove", m(this, this.onDrag));
                    this.stage.addEventListener("mouseUp", m(this, this.onEndDrag));
                    this.grabX = this.get_mouseX();
                    this.grabY = this.get_mouseY()
                },
                onDrag: function (a) {
                    this.clicked = !1;
                    this.set_x(this.parent.get_mouseX() -
                        this.grabX);
                    this.set_y(this.parent.get_mouseY() - this.grabY);
                    a.updateAfterEvent()
                },
                onEndDrag: function (a) {
                    this.stage.removeEventListener("mouseMove", m(this, this.onDrag));
                    this.stage.removeEventListener("mouseUp", m(this, this.onEndDrag));
                    this.clicked || this.onMove.dispatch(this)
                },
                onClick: function (a) {
                    this.clicked && this.minimizable && (this.minimized = !this.minimized, this.layout(), this.onMinimize.dispatch(this))
                },
                setTitle: function (a) {
                    this.header.setText(a)
                },
                __class__: Jc
            });
            var we = function (a, b) {
                a.dialog = this;
                Jc.call(this, a, b);
                this.header.close.add(function () {
                    a.onEsc()
                })
            };
            h["coogee.ui.Dialog"] = we;
            we.__name__ = "coogee.ui.Dialog";
            we.show = function (a, b, c) {
                null == c && (c = b.getTitle());
                a = Jc.show(a, b, c, we);
                b.onShow();
                return a
            };
            we.__super__ = Jc;
            we.prototype = w(Jc.prototype, {
                hide: function () {
                    if (null != this.parent) Ua.__cast(this.content, Tb).onHide();
                    Jc.prototype.hide.call(this)
                },
                __class__: we
            });
            var Lc = function (a, b) {
                this.update = new gc;
                var c = this;
                this.values = b;
                this.labels = a;
                R.call(this);
                this.border =
                    za.black();
                this.add(this.border);
                this.bg = za.white();
                this.bg.set_x(this.bg.set_y(2));
                this.add(this.bg);
                this.tf = Gc.get("", ia.format(ia.uiFont, ia.normalSize, ia.black));
                this.addChild(this.tf);
                this.btn = new y;
                this.btn.set_width(ia.normalSize);
                this.btn.set_enabled(!1);
                this.add(this.btn);
                for (var d = 0, g = 0, f = 0; f < a.length;) {
                    var k = a[f];
                    ++f;
                    this.tf.set_text(k);
                    d = Math.max(d, this.tf.get_width());
                    g = Math.max(g, this.tf.get_height())
                }
                this.tf.set_autoSize(2);
                this.menu = new Ac;
                f = [];
                k = 0;
                for (var q = a.length; k < q;) {
                    var l = [k++];
                    f.push(this.menu.addItem(a[l[0]], function (d) {
                        return function () {
                            c.onSelect(a[d[0]], b[d[0]])
                        }
                    }(l)))
                }
                this.items = f;
                this.set_buttonMode(!0);
                this.addEventListener("click", m(this, this.onClick));
                this.addEventListener("mouseWheel", m(this, this.onWheel));
                0 < a.length && this.set_text(a[0]);
                this.setSize(Math.ceil(d + this.btn.get_width()), Math.ceil(g))
            };
            h["coogee.ui.DropDown"] = Lc;
            Lc.__name__ = "coogee.ui.DropDown";
            Lc.ofInts = function (a) {
                for (var b = [], c = 0, d = a.length; c < d;) {
                    var g = c++;
                    b.push(g)
                }
                return new Lc(a,
                    b)
            };
            Lc.__super__ = R;
            Lc.prototype = w(R.prototype, {
                load: function (a, b) {
                    var c = this;
                    this.labels = a;
                    this.values = b;
                    this.menu = new Ac;
                    for (var d = [], g = 0, f = a.length; g < f;) {
                        var k = [g++];
                        d.push(this.menu.addItem(a[k[0]], function (d) {
                            return function () {
                                c.onSelect(a[d[0]], b[d[0]])
                            }
                        }(k)))
                    }
                    this.items = d;
                    this.set_text(a[0])
                },
                layout: function () {
                    this.border.setSize(this.rWidth, this.rHeight);
                    this.bg.setSize(this.rWidth - 4, this.rHeight - 4);
                    this.tf.set_width(this.rWidth - this.btn.get_width());
                    this.tf.set_height(this.rHeight);
                    this.btn.set_height(this.rHeight);
                    this.btn.set_x(this.rWidth - this.btn.get_width());
                    this.btn.set_y((this.rHeight - this.btn.get_height()) / 2)
                },
                set_text: function (a) {
                    this.tf.set_text(a);
                    return a
                },
                get_value: function () {
                    var a = this.labels.indexOf(this.tf.get_text());
                    return -1 == a ? null : this.values[a]
                },
                set_value: function (a) {
                    for (var b = 0, c = this.values.length; b < c;) {
                        var d = b++;
                        if (this.values[d] == a) return this.tf.set_text(this.labels[d]), a
                    }
                    return this.get_value()
                },
                set_centered: function (a) {
                    var b = this.tf.get_defaultTextFormat();
                    b.align = a ? 0 : 3;
                    this.tf.setTextFormat(b);
                    this.tf.set_defaultTextFormat(b);
                    return a
                },
                onClick: function (a) {
                    a = this.labels.indexOf(this.tf.get_text());
                    for (var b = 0, c = this.items.length; b < c;) {
                        var d = b++;
                        this.items[d].setCheck(d == a)
                    }
                    a = ma.getRect(this);
                    ma.showMenuAt(this.menu, Math.ceil(a.get_left()), a.get_bottom() - 2)
                },
                onWheel: function (a) {
                    ma.hideMenu();
                    var b = this.values.indexOf(this.get_value());
                    if (-1 != b && (a = a.delta, b += 0 == a ? 0 : 0 > a ? -1 : 1, 0 <= b && b < this.values.length)) this.onSelect(this.labels[b], this.values[b])
                },
                onSelect: function (a, b) {
                    this.stage.set_focus(this);
                    this.tf.set_text(a);
                    this.update.dispatch(b)
                },
                __class__: Lc,
                __properties__: w(R.prototype.__properties__, {
                    set_centered: "set_centered",
                    set_value: "set_value",
                    get_value: "get_value",
                    set_text: "set_text"
                })
            });
            var Cf = function (a) {
                R.call(this);
                this.tf = Gc.get(a, ia.format(ia.uiFont, ia.smallSize, ia.black));
                this.tf.set_wordWrap(!0);
                this.tf.set_x(-2);
                this.tf.set_y(-2);
                this.addChild(this.tf);
                this.setSize(this.tf.get_width() - 4, this.tf.get_height() - 4)
            };
            h["coogee.ui.InfoLabel"] = Cf;
            Cf.__name__ = "coogee.ui.InfoLabel";
            Cf.__super__ = R;
            Cf.prototype = w(R.prototype, {
                set_width: function (a) {
                    this.tf.set_autoSize(1);
                    this.tf.set_width(a + 4);
                    var b = this.tf.get_height();
                    this.tf.set_autoSize(2);
                    this.tf.set_width(a + 4);
                    this.tf.set_height(Math.ceil(b));
                    this.rWidth = a;
                    this.rHeight = this.tf.get_height() - 4;
                    return a
                },
                set_color: function (a) {
                    return this.tf.set_textColor(a)
                },
                __class__: Cf,
                __properties__: w(R.prototype.__properties__, {
                    set_color: "set_color"
                })
            });
            var Vb = function (a, b) {
                null == b && (b = !1);
                R.call(this);
                this.tf = Gc.get(a, ia.format(ia.uiFont,
                    b ? ia.smallSize : ia.normalSize, ia.black));
                this.tf.set_x(-2);
                this.tf.set_y(-2);
                this.addChild(this.tf);
                this.setSize(this.tf.get_width() - 4, this.tf.get_height() - 4)
            };
            h["coogee.ui.Label"] = Vb;
            Vb.__name__ = "coogee.ui.Label";
            Vb.__super__ = R;
            Vb.prototype = w(R.prototype, {
                get_text: function () {
                    return this.tf.get_text()
                },
                set_text: function (a) {
                    this.tf.set_text(a);
                    this.setSize(this.tf.get_width(), this.tf.get_height());
                    return a
                },
                set_color: function (a) {
                    var b = this.tf.get_defaultTextFormat();
                    b.color =
                        a;
                    this.tf.setTextFormat(b);
                    this.tf.set_defaultTextFormat(b);
                    return a
                },
                __class__: Vb,
                __properties__: w(R.prototype.__properties__, {
                    set_color: "set_color",
                    set_text: "set_text",
                    get_text: "get_text"
                })
            });
            var Ac = function () {
                R.call(this);
                this.bg = za.black();
                this.addChild(this.bg);
                this.items = [];
                this.addEventListener("addedToStage", m(this, this.onAdded));
                this.addEventListener("removedFromStage", m(this, this.onRemoved))
            };
            h["coogee.ui.Menu"] = Ac;
            Ac.__name__ = "coogee.ui.Menu";
            Ac.__super__ = R;
            Ac.prototype =
                w(R.prototype, {
                    layout: function () {
                        for (var a = this.rHeight = this.rWidth = 0, b = this.items; a < b.length;) {
                            var c = b[a];
                            ++a;
                            this.rWidth = Math.max(this.rWidth, c.get_width());
                            this.rHeight += c.get_height()
                        }
                        var d = 2;
                        a = 0;
                        for (b = this.items; a < b.length;) c = b[a], ++a, c.set_width(this.rWidth), c.set_x(2), c.set_y(d), d += c.get_height();
                        this.rWidth += 4;
                        this.rHeight += 4;
                        this.bg.setSize(this.rWidth, this.rHeight)
                    },
                    add: function (a) {
                        this.items.push(a);
                        this.addChild(a);
                        this.layout()
                    },
                    remove: function (a) {
                        M.remove(this.items, a);
                        this.removeChild(a);
                        this.layout()
                    },
                    addItem: function (a, b, c) {
                        null == c && (c = !1);
                        a = new Zd(a, null, b);
                        a.setCheck(c);
                        this.add(a);
                        return a
                    },
                    addSubmenu: function (a, b) {
                        a = new Zd(a, b);
                        this.add(a);
                        return a
                    },
                    addSeparator: function () {
                        0 < this.items.length && !(this.items[this.items.length - 1] instanceof ee) && this.add(new ee)
                    },
                    hide: function () {
                        null != this.submenu && (this.submenu.hide(), this.submenu = null);
                        null != this.parent && (null != this.stage && this.stage.set_focus(this.stage), this.parent.removeChild(this))
                    },
                    getRoot: function () {
                        return null != this.parentMenu ?
                            this.parentMenu.getRoot() : this
                    },
                    onMouseDown: function (a) {
                        this.hitTestPoint(this.get_mouseX(), this.get_mouseY()) || this.hide()
                    },
                    onAdded: function (a) {
                        this.stage.addEventListener("mouseDown", m(this, this.onMouseDown));
                        this.stage.addEventListener("rightMouseDown", m(this, this.onMouseDown))
                    },
                    onRemoved: function (a) {
                        this.stage.removeEventListener("mouseDown", m(this, this.onMouseDown));
                        this.stage.removeEventListener("rightMouseDown", m(this, this.onMouseDown))
                    },
                    cancel: function () {
                        null != this.submenu && (this.submenu.cancel(),
                            this.parent.removeChild(this.submenu), this.submenu = null)
                    },
                    hover: function (a, b) {
                        this.cancel();
                        if (null != b) {
                            b.parentMenu = this;
                            this.submenu = b;
                            var c = a.get_x() + a.rWidth,
                                d = a.get_y() - 2,
                                g = new F(c, d);
                            g = this.parent.globalToLocal(this.localToGlobal(g));
                            if (this.parent == ma.layer) {
                                var f = !1;
                                g.x + b.get_width() > this.parent.get_width() && (c = a.get_x() - b.get_width(), f = !0);
                                g.y + b.get_height() > this.parent.get_height() && (d = a.get_y() + a.rHeight - b.get_height() + 2, f = !0);
                                f && (g.x = c, g.y = d, g = this.parent.globalToLocal(this.localToGlobal(g)))
                            }
                            b.set_x(g.x);
                            b.set_y(g.y);
                            this.parent.addChild(b)
                        }
                    },
                    __class__: Ac
                });
            var Zd = function (a, b, c) {
                var d = this;
                R.call(this);
                this.submenu = b;
                this.callback = c;
                this.bg = za.white();
                this.addChild(this.bg);
                this.bullet = za.black();
                this.bullet.set_visible(!1);
                this.bullet.setSize(8, 8);
                this.addChild(this.bullet);
                c = null == c && null == b;
                this.formatNormal = ia.format(ia.uiFont, ia.smallSize, c ? ia.medium : ia.black);
                this.formatHover = ia.format(ia.uiFont, ia.smallSize, ia.white);
                this.tf = Gc.get(a, this.formatNormal);
                this.addChild(this.tf);
                null != b && (this.sub =
                    Gc.get(" >", this.formatNormal), this.addChild(this.sub));
                this.addEventListener("mouseDown", function (a) {
                    a.stopPropagation()
                });
                c || (this.set_buttonMode(!0), this.addEventListener("rollOver", function (a) {
                    d.hover(!0)
                }), this.addEventListener("rollOut", function (a) {
                    d.hover(!1)
                }), this.addEventListener("click", m(this, this.onClick)));
                a = Math.round(ia.normalSize / 4);
                this.bullet.set_x(a);
                this.tf.set_x(a + this.bullet.get_width() + a - 2);
                null != b ? (this.sub.set_x(this.tf.get_x() + this.tf.get_width() - 4), this.rWidth = this.sub.get_x() +
                    (this.sub.get_width() - 4) + a) : this.rWidth = a + this.bullet.get_width() + a + (this.tf.get_width() - 4) + a;
                this.rHeight = 1.5 * ia.normalSize;
                this.rWidth = Math.ceil(this.rWidth);
                this.rHeight = Math.ceil(this.rHeight);
                this.layout()
            };
            h["coogee.ui.MenuItem"] = Zd;
            Zd.__name__ = "coogee.ui.MenuItem";
            Zd.__super__ = R;
            Zd.prototype = w(R.prototype, {
                layout: function () {
                    this.bg.setSize(this.rWidth, this.rHeight);
                    this.bullet.set_y((this.rHeight - this.bullet.get_height()) / 2);
                    this.tf.set_y((this.rHeight - this.tf.get_height()) /
                        2);
                    null != this.sub && (this.sub.set_y(this.tf.get_y()), this.sub.set_x(this.rWidth - this.bullet.get_x() - this.sub.get_width() + 2))
                },
                hover: function (a) {
                    null != this.get_root() && (this.highlight(a), Ua.__cast(this.parent, Ac).hover(this, this.submenu))
                },
                highlight: function (a) {
                    var b = a ? this.formatHover : this.formatNormal;
                    this.tf.set_defaultTextFormat(b);
                    var c = a ? ia.black : ia.white;
                    this.bg.bmp.get_bitmapData().setPixel(0, 0, c);
                    c = a ? ia.white : ia.black;
                    this.bullet.bmp.get_bitmapData().setPixel(0, 0, c);
                    null != this.submenu && this.sub.set_defaultTextFormat(b)
                },
                onClick: function (a) {
                    null == this.submenu ? (a.stopPropagation(), this.highlight(!1), Ua.__cast(this.parent, Ac).getRoot().hide(), null != this.callback && this.callback()) : Oa.mobile || Ua.__cast(this.parent, Ac).hover(this, null == this.submenu.parent ? this.submenu : null)
                },
                setCheck: function (a) {
                    this.bullet.set_visible(a);
                    return this
                },
                __class__: Zd
            });
            var za = function (a, b) {
                null == b && (b = 1);
                R.call(this);
                this.set_alpha(b);
                this.bmp = new Yg(new Ob(1, 1, !1, a));
                this.addChild(this.bmp)
            };
            h["coogee.ui.SolidRect"] = za;
            za.__name__ =
                "coogee.ui.SolidRect";
            za.black = function () {
                return new za(ia.black)
            };
            za.light = function () {
                return new za(ia.light)
            };
            za.white = function () {
                return new za(ia.white)
            };
            za.__super__ = R;
            za.prototype = w(R.prototype, {
                layout: function () {
                    this.bmp.set_width(this.rWidth);
                    this.bmp.set_height(this.rHeight)
                },
                __class__: za
            });
            var ee = function () {
                za.call(this, ia.black);
                this.setSize(2, 2)
            };
            h["coogee.ui.MenuSeparator"] = ee;
            ee.__name__ = "coogee.ui.MenuSeparator";
            ee.__super__ = za;
            ee.prototype = w(za.prototype, {
                __class__: ee
            });
            var cf = function (a, b, c) {
                this.action = new gc;
                var d = this;
                this.txtLabel = a;
                mc.call(this);
                this.menu = new Ac;
                a = 0;
                for (var g = b.length; a < g;) {
                    var f = a++,
                        k = b[f];
                    this.menu.addItem(k, function (a) {
                        return function () {
                            d.action.dispatch(a[0])
                        }
                    }([null != c ? c[f] : k]))
                }
            };
            h["coogee.ui.MultiAction"] = cf;
            cf.__name__ = "coogee.ui.MultiAction";
            cf.__super__ = mc;
            cf.prototype = w(mc.prototype, {
                createLabel: function () {
                    var a = new Pc;
                    a.setMargins(2, 4);
                    var b = new Vb(this.txtLabel, !0);
                    b.set_color(ia.white);
                    a.add(b);
                    b = new y(ia.white);
                    b.mouseEnabled = !1;
                    b.mouseChildren = !1;
                    b.valign = "fill";
                    a.add(b);
                    return a
                },
                onClick: function (a) {
                    mc.prototype.onClick.call(this, a);
                    a = ma.getRect(this);
                    ma.showMenuAt(this.menu, a.get_left(), a.get_bottom())
                },
                __class__: cf
            });
            var hd = function (a, b, c) {
                null == c && (c = 0);
                null == b && (b = 100);
                null == a && (a = 0);
                this.submit = new gc;
                this.change = new gc;
                this.cycled = !1;
                R.call(this);
                this.min = a;
                this.max = b;
                this.rounding = Math.pow(10, c);
                this.bg = new X;
                this.bg.addEventListener("mouseDown", m(this, this.onPage));
                this.addChild(this.bg);
                this.scale = za.black();
                this.scale.mouseEnabled = !1;
                this.add(this.scale);
                this.thumb = za.black();
                this.thumb.set_buttonMode(!0);
                this.thumb.addEventListener("mouseDown", m(this, this.onStartDrag));
                this.add(this.thumb);
                Oa.mobile && (this.thumb.hitArea = new X, this.thumb.addChild(this.thumb.hitArea));
                this.addEventListener("mouseWheel", m(this, this.onWheel));
                this._value = a;
                this._prev = NaN;
                this.setSize(200, 20)
            };
            h["coogee.ui.Slider"] = hd;
            hd.__name__ = "coogee.ui.Slider";
            hd.__super__ = R;
            hd.prototype =
                w(R.prototype, {
                    get_value: function () {
                        return this._value
                    },
                    set_value: function (a) {
                        this._value = this.cycled ? Zc.cycle(a, this.min, this.max) : Zc.gate(a, this.min, this.max);
                        this._value = Math.round(this._value * this.rounding) / this.rounding;
                        this._prev != this._value && (this._prev = this._value, this.placeThumb(), this.change.dispatch(this._value));
                        return a
                    },
                    layout: function () {
                        var a = this.bg.get_graphics();
                        a.clear();
                        a.beginFill(16711680, 0);
                        a.drawRect(0, 0, this.rWidth, this.rHeight);
                        this.scale.setSize(this.rWidth, 2);
                        this.scale.set_y((this.rHeight -
                            this.scale.get_height()) / 2 | 0);
                        this.thumb.setSize(10, this.rHeight);
                        this.thumb.set_y((this.rHeight - this.thumb.get_height()) / 2 | 0);
                        this.placeThumb();
                        if (null != this.thumb.hitArea) {
                            var b = Math.max(10, this.rHeight);
                            a = this.thumb.hitArea.get_graphics();
                            a.clear();
                            a.beginFill(16711680, 0);
                            a.drawRect(-(b - 10) / 2, -(b - this.rHeight) / 2, b, b)
                        }
                    },
                    placeThumb: function () {
                        this.thumb.set_x((this.rWidth - this.thumb.get_width()) * (this.get_value() - this.min) / (this.max - this.min))
                    },
                    onStartDrag: function (a) {
                        this.stage.addEventListener("mouseMove",
                            m(this, this.onDrag));
                        this.stage.addEventListener("mouseUp", m(this, this.onEndDrag));
                        this.grabX = this.thumb.get_mouseX()
                    },
                    onDrag: function (a) {
                        this.set_value((this.get_mouseX() - this.grabX) / (this.rWidth - this.thumb.get_width()) * (this.max - this.min) + this.min);
                        a.updateAfterEvent()
                    },
                    onEndDrag: function (a) {
                        this.stage.removeEventListener("mouseMove", m(this, this.onDrag));
                        this.stage.removeEventListener("mouseUp", m(this, this.onEndDrag));
                        this.submit.dispatch(this.get_value())
                    },
                    onPage: function (a) {
                        a = this.get_value();
                        this.get_mouseX() < this.thumb.get_x() ? this.set_value(this.get_value() - .1 * (this.max - this.min)) : this.get_mouseX() > this.thumb.get_x() + this.thumb.get_width() && this.set_value(this.get_value() + .1 * (this.max - this.min));
                        a != this.get_value() && this.submit.dispatch(this.get_value())
                    },
                    onWheel: function (a) {
                        var b = this.get_value(),
                            c = this.get_value();
                        a = a.delta;
                        this.set_value(c + (0 == a ? 0 : 0 > a ? -1 : 1) / this.rounding);
                        b != this.get_value() && this.submit.dispatch(this.get_value())
                    },
                    __class__: hd,
                    __properties__: w(R.prototype.__properties__, {
                        set_value: "set_value",
                        get_value: "get_value"
                    })
                });
            var Df = function (a, b) {
                null == b && (b = !1);
                this.enter = new gc;
                this.update = new gc;
                R.call(this);
                this.tf = Gc.input(a, ia.format(ia.uiFont, ia.normalSize, ia.black), m(this, this.onUpdate));
                this.tf.set_backgroundColor(ia.white);
                this.tf.set_borderColor(ia.black);
                this.tf.set_autoSize(2);
                this.tf.set_wordWrap(!0);
                this.tf.set_multiline(b);
                this.addChild(this.tf);
                this.addEventListener("focusIn", m(this, this.onFocusIn));
                this.tf.addEventListener("keyDown", m(this, this.onKeyDown));
                this.setSize(this.tf.get_width(), this.tf.get_height())
            };
            h["coogee.ui.TextArea"] = Df;
            Df.__name__ = "coogee.ui.TextArea";
            Df.__super__ = R;
            Df.prototype = w(R.prototype, {
                layout: function () {
                    this.tf.set_width(this.rWidth);
                    this.tf.set_height(this.rHeight)
                },
                onFocusIn: function (a) {
                    this.stage.set_focus(this.tf);
                    this.tf.setSelection(this.tf.get_text().length, this.tf.get_text().length)
                },
                onKeyDown: function (a) {
                    switch (a.keyCode) {
                        case 13:
                            this.enter.dispatch(this.tf.get_text());
                            break;
                        case 27:
                            this.stage.set_focus(this.parent)
                    }
                    a.stopPropagation()
                },
                onUpdate: function () {
                    this.update.dispatch(this.tf.get_text())
                },
                __class__: Df
            });
            var pc = function (a, b) {
                null == b && (b = !1);
                null == a && (a = "");
                this.leave = new Yd;
                this.enter = new gc;
                this.update = new gc;
                R.call(this);
                this.tf = Gc.input(a, ia.format(b ? ia.uiFontMono : ia.uiFont, ia.normalSize, ia.black), m(this, this.onUpdate));
                this.tf.set_backgroundColor(ia.white);
                this.tf.set_borderColor(ia.black);
                this.addChild(this.tf);
                this.addEventListener("focusIn", m(this, this.onFocusIn));
                this.addEventListener("focusOut", m(this, this.onFocusOut));
                this.addEventListener("keyDown", m(this, this.onKeyDown));
                this.setSize(this.tf.get_width(), this.tf.get_height())
            };
            h["coogee.ui.TextInput"] = pc;
            pc.__name__ = "coogee.ui.TextInput";
            pc.__super__ = R;
            pc.prototype = w(R.prototype, {
                onKeyDown: function (a) {
                    switch (a.keyCode) {
                        case 13:
                            this.enter.dispatch(this.tf.get_text());
                            break;
                        case 27:
                            this.stage.set_focus(this.parent)
                    }
                    a.stopPropagation()
                },
                onFocusIn: function (a) {
                    this.stage.set_focus(this.tf)
                },
                onFocusOut: function (a) {
                    this.leave.dispatch()
                },
                layout: function () {
                    this.tf.set_width(this.rWidth);
                    this.tf.set_height(this.rHeight);
                    this.layoutPrompt()
                },
                layoutPrompt: function () {
                    if (null != this.label) {
                        var a = this.get_centered();
                        this.label.set_x(a ? (this.rWidth - this.label.get_width()) / 2 : 2);
                        this.label.set_y(a ? (this.rHeight - this.label.get_height()) / 2 : 2)
                    }
                },
                get_text: function () {
                    return this.tf.get_text()
                },
                set_text: function (a) {
                    this.tf.set_text(a);
                    this.updatePrompt();
                    return a
                },
                get_centered: function () {
                    return 0 == this.tf.get_defaultTextFormat().align
                },
                set_centered: function (a) {
                    var b = this.tf.get_defaultTextFormat();
                    b.align = a ? 0 : 3;
                    this.tf.setTextFormat(b);
                    this.tf.set_defaultTextFormat(b);
                    this.layoutPrompt();
                    return a
                },
                set_readOnly: function (a) {
                    this.tf.set_type(a ? 0 : 1);
                    return a
                },
                set_restrict: function (a) {
                    return this.tf.set_restrict(a)
                },
                onUpdate: function () {
                    this.updatePrompt();
                    this.update.dispatch(this.tf.get_text())
                },
                updatePrompt: function () {
                    null != this.label && (this.layoutPrompt(), this.label.set_visible("" == this.tf.get_text()))
                },
                set_prompt: function (a) {
                    null == this.label && (this.label = new Vb(a), this.label.set_enabled(!1),
                        this.label.set_color(ia.medium), this.add(this.label), this.updatePrompt());
                    this.label.set_text(a);
                    return a
                },
                selecteAll: function () {
                    this.tf.setSelection(0, this.tf.get_length())
                },
                set_enabled: function (a) {
                    R.prototype.set_enabled.call(this, a);
                    this.tf.set_alpha(a ? 1 : .6);
                    return this.tf.mouseEnabled = a
                },
                __class__: pc,
                __properties__: w(R.prototype.__properties__, {
                    set_prompt: "set_prompt",
                    set_restrict: "set_restrict",
                    set_readOnly: "set_readOnly",
                    set_centered: "set_centered",
                    get_centered: "get_centered",
                    set_text: "set_text",
                    get_text: "get_text"
                })
            });
            var bc = function (a) {
                var b = this;
                R.call(this);
                a = Gc.get(a, ia.format(ia.uiFont, ia.normalSize, ia.white));
                a.set_x(10);
                a.set_y(10);
                this.addChild(a);
                this.rWidth = 10 + a.get_width() + 10;
                this.rHeight = 10 + a.get_height() + 10;
                this.get_graphics().beginFill(ia.black);
                this.get_graphics().drawRoundRect(0, 0, this.rWidth, this.rHeight, 10);
                df.run(bc.delay, function (a) {
                    b.set_alpha(bc.delay * (1 - a))
                }).onComplete(function () {
                    null != b.parent && b.parent.removeChild(b)
                })
            };
            h["coogee.ui.Toast"] = bc;
            bc.__name__ =
                "coogee.ui.Toast";
            bc.show = function (a) {
                bc.hide();
                var b = ma.layer;
                a = bc.instance = new bc(a);
                a.set_x((b.get_width() - a.get_width()) / 2 | 0);
                a.set_y(b.get_height() - a.get_height() - bc.offset | 0);
                b.addChild(a);
                return a
            };
            bc.hide = function () {
                null != bc.instance && null != bc.instance.parent && bc.instance.parent.removeChild(bc.instance)
            };
            bc.__super__ = R;
            bc.prototype = w(R.prototype, {
                __class__: bc
            });
            var ma = function () {
            };
            h["coogee.ui.UI"] = ma;
            ma.__name__ = "coogee.ui.UI";
            ma.layer = null;
            ma.menu = null;
            ma.showMenu = function (a) {
                ma.showMenuAt(a, ma.layer.get_mouseX(), ma.layer.get_mouseY())
            };
            ma.showMenuAt = function (a, b, c) {
                var d = a.items;
                0 < d.length && d[d.length - 1] instanceof ee && a.remove(d[d.length - 1]);
                ma.menu = a;
                a.set_x((b + a.get_width() <= ma.layer.get_width() ? b : b - a.get_width()) | 0);
                a.set_y((c + a.get_height() <= ma.layer.get_height() ? c : c - a.get_height()) | 0);
                0 > a.get_x() && a.set_x(0);
                0 > a.get_y() && a.set_y(0);
                ma.layer.addChild(a)
            };
            ma.hideMenu = function () {
                return null != ma.menu && null != ma.menu.stage ? (ma.menu.hide(), ma.menu =
                    null, !0) : !1
            };
            ma.showDialog = function (a, b) {
                a = we.show(ma.layer, a, b);
                a.onHide.add(function (a) {
                    M.remove(ma.windows, a)
                });
                ma.windows.push(a);
                return a
            };
            ma.wipe = function () {
                ma.hideMenu();
                for (var a = 0, b = ma.windows.slice(); a < b.length;) {
                    var c = b[a];
                    ++a;
                    c.hide()
                }
                ma.windows = []
            };
            ma.findForm = function (a) {
                for (var b = 0, c = ma.windows; b < c.length;) {
                    var d = c[b];
                    ++b;
                    if (Ua.__instanceof(d.content, a)) return d.content
                }
                return null
            };
            ma.getRect = function (a) {
                var b = new F(a.get_x(), a.get_y()),
                    c = new F(a.get_x() + a.rWidth, a.get_y() + a.rHeight);
                b = ma.layer.globalToLocal(a.parent.localToGlobal(b));
                c = ma.layer.globalToLocal(a.parent.localToGlobal(c));
                return new sa(b.x, b.y, c.x - b.x, c.y - b.y)
            };
            ma.showToast = function (a) {
                bc.show(a)
            };
            ma.checkTarget = function (a) {
                for (; null != a;) {
                    if (a == ma.layer) return !0;
                    a = a.parent
                }
                return !1
            };
            var ia = function () {
            };
            h["coogee.ui.UIStyle"] = ia;
            ia.__name__ = "coogee.ui.UIStyle";
            ia.format = function (a, b, c) {
                null == c && (c = 0);
                return new Le("_" == a.charAt(0) ? a : Yb.getFont(a).name, b, c)
            };
            ia.useDefault = function () {
                ia.black =
                    4012352;
                ia.dark = 5725031;
                ia.medium = 7569526;
                ia.light = 10064002;
                ia.white = 14276035;
                ia.smallSize = 18;
                ia.normalSize = 20;
                ia.uiFont = "ui_font";
                ia.uiFontMono = "ui_font_mono"
            };
            var r = function () {
                this.click = new Yd;
                R.call(this);
                Oa.mobile && (this.hitArea = new X, this.addChild(this.hitArea));
                this.set_buttonMode(!0);
                this.addEventListener("click", m(this, this.onClick));
                this.setSize(12, 12)
            };
            h["coogee.ui.elements.CloseButton"] = r;
            r.__name__ = "coogee.ui.elements.CloseButton";
            r.__super__ = R;
            r.prototype = w(R.prototype, {
                layout: function () {
                    var a = this.get_graphics();
                    a.clear();
                    a.beginFill(ia.white);
                    a.drawCircle(this.rWidth / 2, this.rHeight / 2, 6);
                    null != this.hitArea && (a = this.hitArea.get_graphics(), a.clear(), a.beginFill(16711680, 0), a.drawRect(0, 0, this.rWidth, this.rHeight))
                },
                onClick: function (a) {
                    a.stopPropagation();
                    this.click.dispatch()
                },
                __class__: r
            });
            var y = function (a) {
                null == a && (a = 0);
                this.click = new Yd;
                R.call(this);
                this.bg = new za(0, 0);
                this.addChild(this.bg);
                0 == a && (a = ia.black);
                var b = ia.smallSize / 4;
                this.image = new X;
                var c = this.image.get_graphics();
                c.beginFill(a);
                c.moveTo(-b, -b);
                c.lineTo(b, -b);
                c.lineTo(0, b);
                this.addChild(this.image);
                this.set_buttonMode(!0);
                this.addEventListener("click", m(this, this.onClick));
                this.setSize(2 * b, 2 * b)
            };
            h["coogee.ui.elements.DropDownButton"] = y;
            y.__name__ = "coogee.ui.elements.DropDownButton";
            y.__super__ = R;
            y.prototype = w(R.prototype, {
                layout: function () {
                    this.bg.setSize(this.rWidth, this.rHeight);
                    this.image.set_x(this.rWidth / 2);
                    this.image.set_y(this.rHeight / 2)
                },
                onClick: function (a) {
                    a.stopPropagation();
                    this.click.dispatch()
                },
                __class__: y
            });
            var Q = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 1E3);
                null == b && (b = 0);
                var g = this;
                if (0 == d) pc.call(this, null == c ? "null" : "" + c, !0);
                else {
                    for (var f = "0.", k = 0, q = d; k < q;) k++, f += "0";
                    pc.call(this, f, !0)
                }
                this.min = b;
                this.max = c;
                this.set_text(null == a ? "null" : "" + a);
                this.set_restrict("-0-9.");
                var l = Math.pow(10, Math.floor(Math.log(c - b) / Math.log(10)) - 1),
                    h = 0 < d ? Math.pow(10, d) : 0;
                this.addEventListener("mouseWheel", function (a) {
                    var d = parseFloat(g.get_text());
                    d = Zc.gate(d + (0 < a.delta ? 1 : -1) *
                        l, b, c);
                    0 < h && (d = Math.round(d * h) / h);
                    g.set_text(null == d ? "null" : "" + d)
                })
            };
            h["coogee.ui.elements.FloatInput"] = Q;
            Q.__name__ = "coogee.ui.elements.FloatInput";
            Q.__super__ = pc;
            Q.prototype = w(pc.prototype, {
                __class__: Q
            });
            var jc = function (a) {
                this.click = new gc;
                var b = this;
                R.call(this);
                this.bg = za.light();
                this.add(this.bg);
                this.hbox = new Pc;
                this.add(this.hbox);
                for (var c = 0; c < a.length;) {
                    var d = [a[c]];
                    ++c;
                    var g = new wb(d[0]);
                    g.click.add(function (a) {
                        return function () {
                            b.click.dispatch(a[0])
                        }
                    }(d));
                    g.set_width(100);
                    this.hbox.add(g)
                }
                this.setSize(this.hbox.get_width(), this.hbox.get_height())
            };
            h["coogee.ui.elements.FormButtons"] = jc;
            jc.__name__ = "coogee.ui.elements.FormButtons";
            jc.__super__ = R;
            jc.prototype = w(R.prototype, {
                layout: function () {
                    this.rWidth = Math.max(this.rWidth, this.hbox.get_width());
                    this.bg.set_width(this.rWidth);
                    this.bg.set_height(this.rHeight);
                    this.hbox.set_x(this.rWidth - this.hbox.get_width());
                    this.hbox.set_y((this.rHeight - this.hbox.get_height()) / 2 | 0)
                },
                __class__: jc
            });
            var rc = function (a,
                               b, c, d) {
                null == d && (d = 0);
                null == c && (c = 1E3);
                null == b && (b = 0);
                var g = this,
                    f = "0";
                if (0 == d)
                    for (var k = c; 10 <= k;) f += "0", k = k / 10 | 0;
                else
                    for (k = 1; k < d;) k++, f += "0";
                pc.call(this, f, !0);
                this.min = b;
                this.max = c;
                this.set_text(null == a ? "null" : "" + a);
                this.set_restrict("0-9");
                this.addEventListener("mouseWheel", function (a) {
                    a = 0 < a.delta ? 1 : -1;
                    g.update.dispatch(E.string(g.set_value(g.get_value() + a)))
                })
            };
            h["coogee.ui.elements.IntInput"] = rc;
            rc.__name__ = "coogee.ui.elements.IntInput";
            rc.__super__ = pc;
            rc.prototype = w(pc.prototype, {
                get_value: function () {
                    return Zc.gatei(E.parseInt(this.get_text()), this.min, this.max)
                },
                set_value: function (a) {
                    a = Zc.gatei(a, this.min, this.max);
                    this.tf.set_text(null == a ? "null" : "" + a);
                    return a
                },
                setRange: function (a, b) {
                    var c = E.parseInt(this.get_text());
                    this.min = a;
                    this.max = b;
                    (c < a || c > b) && this.set_value(c)
                },
                __class__: rc,
                __properties__: w(pc.prototype.__properties__, {
                    set_value: "set_value",
                    get_value: "get_value"
                })
            });
            var ta = function (a, b) {
                R.call(this);
                this.border2 = za.black();
                this.add(this.border2);
                this.paint2 = za.white();
                this.add(this.paint2);
                this.border = za.black();
                this.add(this.border);
                this.paint = za.white();
                this.add(this.paint);
                this.colors = a;
                a = this.colors[0];
                this.paint.bmp.get_bitmapData().setPixel(0, 0, a);
                a = 1 < this.colors.length ? this.colors[1] : ia.white;
                this.paint2.bmp.get_bitmapData().setPixel(0, 0, a);
                this.setSize(b, b);
                this.addEventListener("click", m(this, this.onClickEvent))
            };
            h["coogee.ui.elements.MultiSwatch"] = ta;
            ta.__name__ = "coogee.ui.elements.MultiSwatch";
            ta.__super__ = R;
            ta.prototype = w(R.prototype, {
                layout: function () {
                    var a = this.rWidth - 4 - 1,
                        b = this.rHeight - 4 - 1;
                    this.border.setSize(a, b);
                    this.paint.setSize(a - 2, b - 2);
                    this.paint.set_x(this.paint.set_y(1));
                    this.border2.setSize(a, b);
                    this.border2.set_x(this.border2.set_y(5));
                    this.paint2.setSize(a - 2, b - 2);
                    this.paint2.set_x(this.border2.get_x() + 1);
                    this.paint2.set_y(this.border2.get_y() + 1)
                },
                onClickEvent: function (a) {
                    null != this.callback && this.callback()
                },
                __class__: ta
            });
            var Zb = function (a, b) {
                R.call(this);
                this.border = za.black();
                this.add(this.border);
                this.paint =
                    new za(a);
                this.add(this.paint);
                this.setSize(b, b);
                this.addEventListener("click", m(this, this.onClickEvent))
            };
            h["coogee.ui.elements.Swatch"] = Zb;
            Zb.__name__ = "coogee.ui.elements.Swatch";
            Zb.__super__ = R;
            Zb.prototype = w(R.prototype, {
                layout: function () {
                    this.border.setSize(this.rWidth, this.rHeight);
                    this.paint.setSize(this.rWidth - 2, this.rHeight - 2);
                    this.paint.set_x(this.paint.set_y(1))
                },
                onClick: function (a) {
                    this.callback = a;
                    this.set_buttonMode(null != a)
                },
                onClickEvent: function (a) {
                    null != this.callback &&
                    this.callback()
                },
                __class__: Zb
            });
            var hc = function () {
                this.update = new hg;
                R.call(this);
                this.selected = ib.get("tags", []);
                this.active = [];
                this.tagViews = new ab;
                for (var a = 0, b = hc.getTags(); a < b.length;) {
                    var c = b[a];
                    ++a;
                    var d = new Hc(c, hc.getInfo(c), m(this, this.onClick));
                    this.tagViews.h[c] = d;
                    this.add(d);
                    -
                        1 != this.selected.indexOf(c) && d.setColor(ia.black)
                }
            };
            h["coogee.ui.elements.TagsView"] = hc;
            hc.__name__ = "coogee.ui.elements.TagsView";
            hc.getTags = null;
            hc.getInfo = null;
            hc.resTags = null;
            hc.__super__ =
                R;
            hc.prototype = w(R.prototype, {
                set: function (a) {
                    this.active = a.slice();
                    this.layout()
                },
                select: function (a, b) {
                    null == b && (b = !0);
                    if (-1 != this.selected.indexOf(a) != b) {
                        b ? hc.resTags(this.selected, a) : (M.remove(this.selected, a), hc.resTags(this.selected, null));
                        for (var c = this.tagViews.h, d = Object.keys(c), g = d.length, f = 0; f < g;) {
                            var k = d[f++];
                            c[k].setColor(-1 != this.selected.indexOf(k) ? ia.black : ia.dark)
                        }
                        this.update.dispatch(a, b)
                    }
                },
                layout: function () {
                    for (var a = [], b = [], c = this.tagViews.h, d = Object.keys(c), g = d.length, f = 0; f < g;) {
                        var k =
                                d[f++],
                            q = k;
                        k = c[k];
                        -
                            1 != this.active.indexOf(q) ? a.push(k) : b.push(k)
                    }
                    q = function (a, b) {
                        return a.tag < b.tag ? -1 : a.tag > b.tag ? 1 : 0
                    };
                    a.sort(q);
                    b.sort(q);
                    d = c = 8;
                    for (f = g = 0; f < a.length;) q = a[f], ++f, c + q.get_width() > this.rWidth - 8 && (c = 8, d += g + 4, g = 0), q.set_x(c), q.set_y(d), g < q.get_height() && (g = q.get_height()), c += q.get_width() + 4;
                    d += g;
                    8 == d && (d = 24);
                    this.get_graphics().clear();
                    this.get_graphics().beginFill(ia.light);
                    this.get_graphics().drawRoundRect(0, 0, this.rWidth, d + 8, 32);
                    c = 0;
                    d += 16;
                    for (f = g = 0; f < b.length;) q = b[f], ++f, c + q.get_width() >
                    this.rWidth && (c = 0, d += g + 4, g = 0), q.set_x(c), q.set_y(d), g < q.get_height() && (g = q.get_height()), c += q.get_width() + 4;
                    this.rHeight = d + g
                },
                onClick: function (a) {
                    this.select(a, -1 == this.selected.indexOf(a))
                },
                __class__: hc
            });
            var Hc = function (a, b, c) {
                this.color = ia.dark;
                R.call(this);
                this.tag = a;
                this.label = Gc.get(a, ia.format(ia.uiFont, ia.smallSize, ia.white));
                this.label.mouseEnabled = !1;
                this.addChild(this.label);
                this.set_buttonMode(!0);
                this.addEventListener("click", function (d) {
                    d.stopPropagation();
                    d.shiftKey ? null != b && ma.showToast(b) :
                        c(a)
                });
                this.setSize(this.label.get_width() + 8, this.label.get_height() + 8)
            };
            h["coogee.ui.elements.TagView"] = Hc;
            Hc.__name__ = "coogee.ui.elements.TagView";
            Hc.__super__ = R;
            Hc.prototype = w(R.prototype, {
                layout: function () {
                    this.updateBg();
                    this.label.set_x((this.rWidth - this.label.get_width()) / 2 | 0);
                    this.label.set_y((this.rHeight - this.label.get_height()) / 2 | 0)
                },
                updateBg: function () {
                    this.get_graphics().clear();
                    this.get_graphics().beginFill(this.color);
                    this.get_graphics().drawRoundRect(0, 0, this.rWidth,
                        this.rHeight, 16)
                },
                setColor: function (a) {
                    this.color = a;
                    this.updateBg()
                },
                __class__: Hc
            });
            var fc = function (a, b, c, d) {
                null == c && (c = !1);
                this.update = new gc;
                this.edit = function (a) {
                    Ub.trace(a.get_value(), {

                        className: "coogee.ui.elements.TextView",
                        methodName: "edit"
                    })
                };
                this.data2text = function (a) {
                    return E.string(a)
                };
                this._value = null;
                var g = this;
                null != b && (this.data2text = b);
                null != d && (this.edit = d);
                this._value = a;
                R.call(this);
                this.border =
                    za.black();
                this.add(this.border);
                this.bg = za.white();
                this.bg.set_x(this.bg.set_y(2));
                this.add(this.bg);
                this.tf = Gc.get(this.data2text(a), ia.format(ia.uiFont, c ? ia.smallSize : ia.normalSize, ia.black));
                this.addChild(this.tf);
                this.btn = new y;
                this.btn.set_width(ia.normalSize);
                this.btn.set_enabled(!1);
                this.add(this.btn);
                this.tf.mouseEnabled = !1;
                this.set_buttonMode(!0);
                this.addEventListener("click", function (a) {
                    g.edit(g)
                });
                this.setSize(Math.ceil(this.tf.get_width() + this.btn.get_width()), Math.ceil(this.tf.get_height()))
            };
            h["coogee.ui.elements.TextView"] = fc;
            fc.__name__ = "coogee.ui.elements.TextView";
            fc.editInForm = function (a, b, c) {
                return function (d) {
                    var g = ma.findForm(a);
                    null == g && (g = z.createInstance(a, []), ma.showDialog(g));
                    g.link(b, d.get_value(), function (a) {
                        d.set_value(a);
                        d.update.dispatch(a)
                    }, c)
                }
            };
            fc.__super__ = R;
            fc.prototype = w(R.prototype, {
                layout: function () {
                    this.border.setSize(this.rWidth, this.rHeight);
                    this.bg.setSize(this.rWidth - 4, this.rHeight - 4);
                    this.tf.set_autoSize(2);
                    this.tf.set_width(this.rWidth -
                        this.btn.get_width());
                    this.tf.set_height(this.rHeight);
                    this.tf.set_scrollH(0);
                    this.btn.set_height(this.rHeight);
                    this.btn.set_x(this.rWidth - this.btn.get_width());
                    this.btn.set_y((this.rHeight - this.btn.get_height()) / 2)
                },
                get_value: function () {
                    return this._value
                },
                set_value: function (a) {
                    this._value = a;
                    this.tf.set_text(this.data2text(a));
                    return a
                },
                __class__: fc,
                __properties__: w(R.prototype.__properties__, {
                    set_value: "set_value",
                    get_value: "get_value"
                })
            });
            var qc = function (a) {
                Ga.call(this, null != a ? a.concat(qc.okCancel) :
                    qc.okCancel)
            };
            h["coogee.ui.elements.EditForm"] = qc;
            qc.__name__ = "coogee.ui.elements.EditForm";
            qc.__super__ = Ga;
            qc.prototype = w(Ga.prototype, {
                getTitle: function () {
                    return "Edit"
                },
                onButton: function (a) {
                    if ("OK" == a) {
                        if (null != this.onOK) this.onOK(this.get());
                        this.dialog.hide()
                    } else Ga.prototype.onButton.call(this, a)
                },
                set: function (a) {
                },
                get: function () {
                    return null
                },
                link: function (a, b, c, d) {
                    null != a && this.dialog.setTitle(a);
                    this.set(b);
                    this.onOK = c;
                    null != this.host && this.host.dialog.onHide.remove(m(this,
                        this.onHostHidden));
                    this.host = d;
                    null != d && d.dialog.onHide.add(m(this, this.onHostHidden))
                },
                onHostHidden: function (a) {
                    this.dialog.hide()
                },
                __class__: qc
            });
            var gd = function (a) {
                this.close = new Yd;
                R.call(this);
                this.bg = za.black();
                this.add(this.bg);
                this.btn = new r;
                this.btn.click.add((H = this.close, m(H, H.dispatch)));
                this.add(this.btn);
                this.tf = Gc.get(a, ia.format(ia.uiFont, ia.smallSize, ia.white));
                this.tf.mouseEnabled = !1;
                this.addChild(this.tf);
                this.setSize(this.tf.get_width(), 36)
            };
            h["coogee.ui.elements.WindowHeader"] =
                gd;
            gd.__name__ = "coogee.ui.elements.WindowHeader";
            gd.__super__ = R;
            gd.prototype = w(R.prototype, {
                layout: function () {
                    this.bg.setSize(this.rWidth, this.rHeight);
                    this.btn.setSize(this.rHeight, this.rHeight);
                    this.btn.set_x(this.rWidth - this.rHeight);
                    this.tf.set_x(this.tf.set_y((this.rHeight - this.tf.get_height()) / 2 | 0))
                },
                setText: function (a) {
                    this.tf.set_text(a)
                },
                __class__: gd
            });
            var $d = function () {
                var a = this;
                qc.call(this);
                var b = new Pc;
                this.swatch = new Zb(0, 60);
                this.swatch.valign = "fill";
                b.add(this.swatch);
                var c = new Ef(3);
                c.setMargins(0, 10);
                var d = function (b, d) {
                    b = new Vb(b);
                    b.valign = "center";
                    c.add(b);
                    var f = new hd(0, d);
                    f.valign = "center";
                    c.add(f);
                    var g = new rc(0, 0, d, 3);
                    c.add(g);
                    g.update.add(function (a) {
                        f.set_value(g.get_value())
                    });
                    f.change.add(function (b) {
                        g.set_value(Math.round(b));
                        a.updateSwatch()
                    });
                    return f
                };
                this.hue = d("Hue", 359);
                this.hue.cycled = !0;
                this.sat = d("Sat", 100);
                this.val = d("Val", 100);
                b.add(c);
                this.add(b)
            };
            h["coogee.ui.forms.ColorForm"] = $d;
            $d.__name__ = "coogee.ui.forms.ColorForm";
            $d.__super__ = qc;
            $d.prototype = w(qc.prototype, {
                set: function (a) {
                    this.setColor(a)
                },
                get: function () {
                    return this.color
                },
                setColor: function (a) {
                    a = Ia.rgb2hsv(a);
                    this.hue.set_value(a.x);
                    this.sat.set_value(100 * a.y);
                    this.val.set_value(100 * a.z)
                },
                updateSwatch: function () {
                    var a = this.color = Ia.hsv(this.hue.get_value(), this.sat.get_value() / 100, this.val.get_value() / 100);
                    this.swatch.paint.bmp.get_bitmapData().setPixel(0, 0, a)
                },
                __class__: $d
            });
            var Bc = function () {
                var a = this;
                qc.call(this);
                var b = new tb,
                    c = new Pc;
                c.setMargins(0,
                    10);
                this.face = new pc("");
                this.face.set_width(300);
                this.face.set_prompt("Font name");
                this.face.update.add(function (b) {
                    a.updatePreview()
                });
                c.add(this.face);
                this.size = new rc(18, 8, 96);
                this.size.set_restrict("0-9");
                this.size.update.add(function (b) {
                    a.updatePreview()
                });
                c.add(this.size);
                var d = new Pc;
                d.setMargins(0, 10);
                this.bold = new yb("Bold");
                this.bold.changed.add(function (b) {
                    a.updatePreview()
                });
                d.add(this.bold);
                this.italic = new yb("Italic");
                this.italic.changed.add(function (b) {
                    a.updatePreview()
                });
                d.add(this.italic);
                this.preview = new ae;
                this.preview.halign = "fill";
                this.preview.set_height(100);
                b.add(c);
                b.add(d);
                b.add(this.preview);
                this.add(b)
            };
            h["coogee.ui.forms.FontForm"] = Bc;
            Bc.__name__ = "coogee.ui.forms.FontForm";
            Bc.font2text = function (a) {
                if (null == a) return "Default";
                if (null != a.face) {
                    var b = a.face;
                    b = b.length <= Bc.maxFaceLength ? b : M.substr(b, 0, Bc.maxFaceLength - 1) + "..."
                } else null != a.embedded && Yb.exists(a.embedded) ? (b = Yb.getFont(a.embedded).name, b = "[" + (b.length <= Bc.maxFaceLength ? b : M.substr(b, 0, Bc.maxFaceLength -
                    1) + "...") + "]") : b = "[default]";
                b += " " + a.size;
                a.bold && (b += ", bold");
                a.italic && (b += ", italic");
                return b
            };
            Bc.fontFace2text = function (a) {
                if (null == a) return "Default";
                var b = null != a.face ? a.face : null != a.embedded && Yb.exists(a.embedded) ? Yb.getFont(a.embedded).name : "[default]";
                a.bold && (b += ", bold");
                a.italic && (b += ", italic");
                return b
            };
            Bc.__super__ = qc;
            Bc.prototype = w(qc.prototype, {
                set: function (a) {
                    this.face.set_text(null != a.face ? a.face : "");
                    this.size.set_value(a.size);
                    this.bold.set_value(a.bold);
                    this.italic.set_value(a.italic);
                    this.embedded = a.embedded;
                    this.face.set_prompt(null != this.embedded && Yb.exists(this.embedded) ? Yb.getFont(this.embedded).name : "Font name");
                    this.preview.setFont(a);
                    this.face.selecteAll();
                    null != this.stage && this.stage.set_focus(this.face)
                },
                get: function () {
                    return {
                        face: "" == this.face.get_text() ? null : this.face.get_text(),
                        embedded: this.embedded,
                        size: this.size.get_value(),
                        bold: this.bold.get_value(),
                        italic: this.italic.get_value()
                    }
                },
                updatePreview: function () {
                    this.preview.setFont(this.get())
                },
                __class__: Bc
            });
            var ae =
                function (a) {
                    null == a && (a = "Sample Text");
                    R.call(this);
                    this.border = za.black();
                    this.addChild(this.border);
                    this.bg = za.white();
                    this.bg.set_x(this.bg.set_y(1));
                    this.addChild(this.bg);
                    this.tf = new Yc;
                    this.tf.set_text(a);
                    this.fixText();
                    this.addChild(this.tf);
                    this.maskRect = new xe;
                    this.addChild(this.maskRect);
                    this.tf.set_mask(this.maskRect)
                };
            h["coogee.ui.forms._FontForm.FontPreview"] = ae;
            ae.__name__ = "coogee.ui.forms._FontForm.FontPreview";
            ae.__super__ = R;
            ae.prototype = w(R.prototype, {
                layout: function () {
                    var a =
                        this.maskRect.get_graphics();
                    a.clear();
                    a.beginFill(16711680);
                    a.drawRect(0, 0, this.rWidth, this.rHeight);
                    this.border.set_width(this.rWidth);
                    this.border.set_height(this.rHeight);
                    this.bg.set_width(this.rWidth - 2);
                    this.bg.set_height(this.rHeight - 2);
                    this.tf.set_x(Math.max((this.rWidth - this.tf.get_width()) / 2, 0));
                    this.tf.set_y(Math.max((this.rHeight - this.tf.get_height()) / 2, 0))
                },
                setFont: function (a) {
                    a = $c.font2format(a);
                    null == a && (a = new Le);
                    a.color = ia.black;
                    this.tf.setTextFormat(a);
                    this.fixText();
                    this.layout()
                },
                fixText: function () {
                    this.tf.set_autoSize(1);
                    var a = this.tf.get_width(),
                        b = this.tf.get_height();
                    this.tf.set_autoSize(2);
                    this.tf.set_width(Math.ceil(a));
                    this.tf.set_height(Math.ceil(b))
                },
                __class__: ae
            });
            var Bd = function (a) {
                Ga.call(this, ["OK"]);
                var b = new Gd;
                a = new Df(a);
                a.mouseEnabled = !1;
                a.mouseChildren = !1;
                a.set_width(360);
                b.add(a);
                this.add(b)
            };
            h["coogee.ui.forms.Message"] = Bd;
            Bd.__name__ = "coogee.ui.forms.Message";
            Bd.__super__ = Ga;
            Bd.prototype = w(Ga.prototype, {
                getTitle: function () {
                    return "Message"
                },
                __class__: Bd
            });
            var ye = function () {
                qc.call(this);
                this.content = new tb;
                this.content.setMargins(12, 12);
                this.add(this.content)
            };
            h["coogee.ui.forms.MultiColorForm"] = ye;
            ye.__name__ = "coogee.ui.forms.MultiColorForm";
            ye.__super__ = qc;
            ye.prototype = w(qc.prototype, {
                onButton: function (a) {
                    "Add" == a ? (a = this.get(), a.push(a[a.length - 1]), this.set(a)) : qc.prototype.onButton.call(this, a)
                },
                set: function (a) {
                    this.content.removeChildren();
                    for (var b = [], c = 0, d = a.length; c < d;) {
                        var g = c++,
                            f = a[g];
                        if (0 < g) {
                            var k =
                                new za(ia.black);
                            k.halign = "fill";
                            k.setSize(2, 2);
                            this.content.add(k)
                        }
                        g = new Mc(this.content, f, 0 == g, g == a.length - 1);
                        g.action.add(m(this, this.onItemAction));
                        b.push(g)
                    }
                    this.items = b;
                    this.add(this.content);
                    Ua.__cast(this.parent, Jc).resize(!0)
                },
                get: function () {
                    for (var a = [], b = 0, c = this.items; b < c.length;) {
                        var d = c[b];
                        ++b;
                        a.push(d.color)
                    }
                    return a
                },
                onItemAction: function (a, b) {
                    var c = this.items.indexOf(a),
                        d = this.get();
                    d.splice(c, 1);
                    switch (b) {
                        case "Duplicate":
                            d.splice(c, 0, a.color);
                            d.splice(c, 0, a.color);
                            break;
                        case "Move down":
                            d.splice(c +
                                1, 0, a.color);
                            break;
                        case "Move up":
                            d.splice(c - 1, 0, a.color)
                    }
                    this.set(d)
                },
                __class__: ye
            });
            var Mc = function (a, b, c, d) {
                this.action = new hg;
                var g = this;
                this.color = b;
                var f = new Pc;
                f.setMargins(0, 10);
                var k = new tb;
                k.setMargins(0, 10);
                this.hex = new pc("#000000", !0);
                this.hex.set_text(T.hex(b, 6));
                this.hex.set_restrict("#0-9a-fA-F");
                this.hex.update.add(m(this, this.onHex));
                k.add(this.hex);
                this.swatch = new Zb(b, 10 + 2 * this.hex.get_height());
                this.swatch.halign = "fill";
                k.add(this.swatch);
                f.add(k);
                k = new Ef(4);
                k.setMargins(0, 10);
                var q = ["Duplicate"];
                c || q.push("Move up");
                d || q.push("Move down");
                c && d || q.push("Delete");
                c = new cf("...", q);
                c.action.add(function (a) {
                    g.action.dispatch(g, a)
                });
                c.valign = "fill";
                b = Ia.rgb2hsv(b);
                this.hue = this.addRow(k, "Hue", 359, b.x, c);
                this.sat = this.addRow(k, "Sat", 100, 100 * b.y);
                this.val = this.addRow(k, "Val", 100, 100 * b.z);
                f.add(k);
                a.add(f)
            };
            h["coogee.ui.forms.ColorItem"] = Mc;
            Mc.__name__ = "coogee.ui.forms.ColorItem";
            Mc.prototype = {
                addRow: function (a, b, c, d, g) {
                    var f = this;
                    c |= 0;
                    d |= 0;
                    b = new Vb(b);
                    b.valign = "center";
                    a.add(b);
                    var k = new hd(0, c);
                    k.set_value(d);
                    k.valign = "center";
                    a.add(k);
                    var q = new rc(d, 0, c, 3);
                    a.add(q);
                    q.update.add(function (a) {
                        k.set_value(q.get_value())
                    });
                    k.change.add(function (a) {
                        q.set_value(Math.round(a));
                        f.updateSwatch()
                    });
                    null != g ? a.add(g) : a.addEmpty();
                    return k
                },
                onHex: function (a) {
                    "#" == a.charAt(0) && (a = M.substr(a, 1, null));
                    if (3 == a.length) {
                        var b = [];
                        b.push(a.charAt(0) + a.charAt(0));
                        b.push(a.charAt(1) + a.charAt(1));
                        b.push(a.charAt(2) + a.charAt(2));
                        a = b.join("")
                    }
                    6 < a.length && (a = M.substr(a,
                        0, 6));
                    a = E.parseInt("0x" + a);
                    a = Ia.rgb2hsv(a);
                    this.hue.set_value(a.x);
                    this.sat.set_value(100 * a.y);
                    this.val.set_value(100 * a.z);
                    this.updateSwatch()
                },
                updateSwatch: function () {
                    var a = this.color = Ia.hsv(this.hue.get_value(), this.sat.get_value() / 100, this.val.get_value() / 100);
                    this.swatch.paint.bmp.get_bitmapData().setPixel(0, 0, a);
                    this.hex.set_text(T.hex(this.color, 6))
                },
                __class__: Mc
            };
            var Sb = function (a, b) {
                this.onNullAsset = function (a, b) {
                    Ub.trace("No " + a + " palette!", {
                        className: "coogee.ui.forms.PaletteForm",
                        methodName: "onNullAsset"
                    })
                };
                this.getName = function (a) {
                    return "palette"
                };
                var c = this;
                Tb.call(this);
                this.form = new Pc;
                this.form.setMargins(0, 0);
                this.add(this.form);
                this.tabs = new Lh;
                this.form.add(this.tabs);
                var exportBtn = new cf("Save", ["JSON","PROTO"], ["json","proto"]);
                exportBtn.action.add(function (fmt) {
                    c.onSave(c.getPalette(), fmt);
                });
                var d = [
                    new wb("Load", m(this, this.onLoad)),
                    new wb("Apply", function () { a(c.getPalette()) }),
                    exportBtn
                ];
                if (null != b) {
                    for (var g = [], f = []; 0 < b.length;) g.push(b.shift()), f.push(b.shift());
                    b = new cf("Preset",
                        g, f);
                    b.action.add(function (a) {
                        c.loadPreset(a)
                    });
                    d.unshift(b)
                }
                this.buttons = new Mh(d);
                this.form.add(this.buttons);
                this.onApply = a;
                this.values = []
            };
            h["coogee.ui.forms.PaletteForm"] = Sb;
            Sb.__name__ = "coogee.ui.forms.PaletteForm";
            Sb.txt2color = function (a) {
                "#" == a.charAt(0) && (a = M.substr(a, 1, null));
                if (3 == a.length) {
                    var b = [];
                    b.push(a.charAt(0) + a.charAt(0));
                    b.push(a.charAt(1) + a.charAt(1));
                    b.push(a.charAt(2) + a.charAt(2));
                    a = b.join("")
                }
                6 < a.length && (a = M.substr(a, 0, 6));
                return E.parseInt("0x" + a)
            };
            Sb.txt2float = function (a, b, c) {
                return Zc.gate(parseFloat(a), b, c)
            };
            Sb.txt2int = function (a, b, c) {
                return Zc.gatei(E.parseInt(a), b | 0, c | 0)
            };
            Sb.swatches = function (a, b) {
                return function (c) {
                    for (var d = null != a ? a + "_" : "", g = [], f = 0; f < b.length;) {
                        var k = b[f];
                        ++f;
                        g.push(Nh.get(c.getColor(k)))
                    }
                    return d + g.join("_")
                }
            };
            Sb.__super__ = Tb;
            Sb.prototype = w(Tb.prototype, {
                onShow: function () {
                    Tb.prototype.onShow.call(this);
                    this.tabs.onTab(Sb.lastTab);
                    this.tabs.change.add(function (a) {
                        Sb.lastTab = a
                    })
                },
                onEnter: function () {
                    this.onApply(this.getPalette())
                },
                layout: function () {
                    null != this.tabs && this.tabs.layout();
                    this.form.layout();
                    Tb.prototype.layout.call(this)
                },
                onKey: function (a) {
                    var b = this.tabs.getTab();
                    switch (a) {
                        case 33:
                            if (b < this.tabs.getTabCount() - 1) this.tabs.onTab(b + 1);
                            break;
                        case 34:
                            if (0 < b) this.tabs.onTab(this.tabs.getTab() - 1);
                            break;
                        default:
                            return Tb.prototype.onKey.call(this, a)
                    }
                    return !0
                },
                addTab: function (a) {
                    this.grid = new Ef(2);
                    this.tabs.addTab(a, this.grid)
                },
                addColor: function (a, b, c) {
                    var d = this;
                    null == this.grid && this.addTab(null);
                    var g = new Vb(b);
                    this.grid.add(g);
                    b = new Pc;
                    b.setMargins(0, 10);
                    var f = new pc("#000000", !0);
                    f.set_text(T.hex(c, 6));
                    f.set_restrict("#0-9a-fA-F");
                    b.add(f);
                    var k = new Zb(c, f.get_height());
                    b.add(k);
                    f.update.add(function (a) {
                        a = Sb.txt2color(a);
                        k.paint.bmp.get_bitmapData().setPixel(0, 0, a)
                    });
                    k.onClick(function () {
                        d.onColor(g.get_text(), k, function (a) {
                            f.set_text(T.hex(a, 6));
                            k.paint.bmp.get_bitmapData().setPixel(0, 0, a)
                        })
                    });
                    this.grid.add(b);
                    this.values.push({
                        id: a,
                        type: nc.COLOR,
                        view: f,
                        swatch: k
                    });
                    this.layout()
                },
                addFont: function (a, b, c, d, g) {
                    null == d && (d = !1);
                    null == this.grid && this.addTab(null);
                    b = new Vb(b);
                    this.grid.add(b);
                    null != g && (c.embedded = g);
                    c = new fc(c, d ? Bc.fontFace2text : Bc.font2text, null, fc.editInForm(Bc, b.get_text(), this));
                    c.set_width(d ? 80 : 220);
                    c.halign = "fill";
                    this.grid.add(c);
                    this.values.push({
                        id: a,
                        type: nc.FONT,
                        view: c
                    });
                    this.layout()
                },
                addFloat: function (a, b, c, d, g) {
                    null == this.grid && this.addTab(null);
                    b = new Vb(b);
                    this.grid.add(b);
                    c = new Q(c, d, g, 5);
                    this.grid.add(c);
                    this.values.push({
                        id: a,
                        type: nc.FLOAT,
                        view: c,
                        min: d,
                        max: g
                    });
                    this.layout()
                },
                addCheck: function (a,
                                    b, c) {
                    null == this.grid && this.addTab(null);
                    b = new Vb(b);
                    this.grid.add(b);
                    b = new yb;
                    b.set_value(c);
                    b.valign = "fill";
                    this.grid.add(b);
                    this.values.push({
                        id: a,
                        type: nc.BOOL,
                        view: b
                    });
                    this.layout()
                },
                onColor: function (a, b, c) {
                    var d = ma.findForm($d);
                    null == d && (d = new $d, ma.showDialog(d));
                    d.link(a, b.paint.bmp.get_bitmapData().getPixel(0, 0), c, this)
                },
                onLoad: function () {
                    var a = this,
                        b = new Zg;
                    b.addEventListener("select", function (c) {
                        b.addEventListener("complete", m(a, a.onPaletteLoaded));
                        b.load()
                    });
                    var c = [new xk("Palette", "*.json;*.pb;")];
                    b.browse(c)
                },
                loadPreset: function (a) {
                    if (Yb.exists(a)) this.loadPalette($c.fromJSON(Yb.getText(a)));
                    else this.onNullAsset(a, this)
                },
                onPaletteLoaded: function (a) {
                    try {
                        var fr = Ua.__cast(a.target, Zg);
                        var pdo = DataDwellings.decodePaletteFile(fr.name, fr.data);
                        var legacyJson = DataDwellings.paletteLegacyJsonFromObj(pdo);
                        this.loadPalette($c.fromJSON(legacyJson));
                    } catch (b) {
                        b = aa.caught(b).unwrap();
                        bc.show(E.string(b));
                    }

                },
                loadPalette: function (a) {
                    for (var b = 0, c = this.values; b < c.length;) {
                        var d = c[b];
                        ++b;
                        switch (d.type._hx_index) {
                            case 0:
                                var g = d.view,
                                    f = a.getColor(d.id, Sb.txt2color(g.get_text()));
                                d.swatch.paint.bmp.get_bitmapData().setPixel(0, 0, f);
                                g.set_text(T.hex(f,
                                    6));
                                break;
                            case 1:
                                g = d.view;
                                f = a.getMulti(d.id, Sb.txt2color(g.get_text()));
                                d = d.multi;
                                d.colors = f;
                                var k = d.colors[0];
                                d.paint.bmp.get_bitmapData().setPixel(0, 0, k);
                                k = 1 < d.colors.length ? d.colors[1] : ia.white;
                                d.paint2.bmp.get_bitmapData().setPixel(0, 0, k);
                                g.set_text(T.hex(f[0], 6));
                                break;
                            case 2:
                                g = d.view;
                                d = a.getFont(d.id, g.get_value());
                                g.set_value(d);
                                break;
                            case 3:
                                g = d.view;
                                d = a.getFloat(d.id, Sb.txt2float(g.get_text(), d.min, d.max));
                                g.set_text(null == d ? "null" : "" + d);
                                break;
                            case 4:
                                g = d.view;
                                d = a.getInt(d.id, Sb.txt2int(g.get_text(),
                                    d.min, d.max));
                                g.set_text(null == d ? "null" : "" + d);
                                break;
                            case 5:
                                d.view instanceof Lc ? (g = d.view, d = a.getString(d.id, g.get_value()), g.set_value(d)) : (g = d.view, d = a.getString(d.id, g.get_text()), g.set_text(d));
                                break;
                            case 6:
                                g = d.view, g.set_value(a.getBool(d.id, g.get_value()))
                        }
                    }
                },
                getPalette: function () {
                    for (var a = new $c, b = 0, c = this.values; b < c.length;) {
                        var d = c[b];
                        ++b;
                        switch (d.type._hx_index) {
                            case 0:
                                var g = d.view,
                                    f = Sb.txt2color(g.get_text());
                                a.setColor(d.id, f);
                                g.set_text(T.hex(f, 6));
                                break;
                            case 1:
                                g = d.view;
                                f = d.multi.colors;
                                a.setMulti(d.id, f);
                                g.set_text(T.hex(f[0], 6));
                                break;
                            case 2:
                                g = d.view.get_value();
                                a.setFont(d.id, g);
                                break;
                            case 3:
                                g = d.view;
                                f = Sb.txt2float(g.get_text(), d.min, d.max);
                                a.setFloat(d.id, f);
                                g.set_text(null == f ? "null" : "" + f);
                                break;
                            case 4:
                                g = d.view;
                                f = Sb.txt2int(g.get_text(), d.min, d.max);
                                a.setInt(d.id, f);
                                g.set_text(null == f ? "null" : "" + f);
                                break;
                            case 5:
                                d.view instanceof Lc ? a.setString(d.id, d.view.get_value()) : a.setString(d.id, d.view.get_text());
                                break;
                            case 6:
                                a.setBool(d.id, d.view.get_value())
                        }
                    }
                    return a
                },
                onSave: function (a, fmt) {
                    var pdo = DataDwellings.paletteObjFromLegacyJsonText(a.json());
                    if (fmt === "proto") {
                        var bytes = DataDwellings.paletteProtoBytesFromObj(pdo);
                        id.saveText(bytes, this.getName(a) + ".palette.dw.pb", "application/octet-stream");
                    } else {
                        var json = DataDwellings.paletteLegacyJsonFromObj(pdo);
                        id.saveText(json, this.getName(a) + ".palette.dw.json", "application/json");
                    }
                },
                __class__: Sb
            });
            var Mh = function (a) {
                R.call(this);
                this.bg = za.light();
                this.add(this.bg);
                this.vbox = new tb;
                this.add(this.vbox);
                for (var b = 0; b < a.length;) {
                    var c = a[b];
                    ++b;
                    c.set_width(100);
                    this.vbox.add(c)
                }
                this.setSize(this.vbox.get_width(), this.vbox.get_height());
                this.valign = "fill"
            };
            h["coogee.ui.forms.ButtonColumn"] = Mh;
            Mh.__name__ = "coogee.ui.forms.ButtonColumn";
            Mh.__super__ = R;
            Mh.prototype = w(R.prototype, {
                layout: function () {
                    this.rWidth = Math.max(this.rWidth,
                        this.vbox.get_width());
                    this.bg.set_width(this.rWidth);
                    this.bg.set_height(this.rHeight);
                    this.vbox.set_x((this.rWidth - this.vbox.get_width()) / 2 | 0);
                    this.vbox.set_y(0)
                },
                __class__: Mh
            });
            var jd = function (a, b) {
                Ga.call(this, ["Generate", "Random"]);
                this.generate = b;
                this.content = new tb;
                this.addAbove();
                this.tags = new hc;
                this.tags.setSize(300, 0);
                this.tags.set(a);
                this.content.add(this.tags);
                null != jd.hintText && (a = new Cf(jd.hintText), a.set_color(ia.dark), a.set_width(300), this.content.add(a));
                this.add(this.content)
            };
            h["coogee.ui.forms.TagsForm"] =
                jd;
            jd.__name__ = "coogee.ui.forms.TagsForm";
            jd.__super__ = Ga;
            jd.prototype = w(Ga.prototype, {
                onButton: function (a) {
                    switch (a) {
                        case "Generate":
                            ib.set("tags", this.tags.selected);
                            this.tags.set(this.callGenerate(this.tags.selected));
                            this.relayout();
                            break;
                        case "Random":
                            this.tags.set(this.callGenerate(null));
                            this.relayout();
                            break;
                        default:
                            Ga.prototype.onButton.call(this, a)
                    }
                },
                relayout: function () {
                    this.content.layout();
                    var a = this.buttons.get_y();
                    this.layout();
                    a > this.buttons.get_y() && (this.buttons.set_y(a),
                        a = this.buttons, this.rHeight = a.get_y() + a.rHeight + this.margin);
                    Ua.__cast(this.parent, Jc).resize()
                },
                onEnter: function () {
                    this.onButton("Generate")
                },
                onKey: function (a) {
                    return 9 == a ? (this.onEsc(), !0) : Ga.prototype.onKey.call(this, a)
                },
                callGenerate: function (a) {
                    return this.generate(a)
                },
                addAbove: function () {
                },
                __class__: jd
            });
            var Ef = function (a) {
                null == a && (a = 2);
                this.margin = this.gap = 10;
                R.call(this);
                this.cols = a
            };
            h["coogee.ui.layouts.Grid"] = Ef;
            Ef.__name__ = "coogee.ui.layouts.Grid";
            Ef.__super__ = R;
            Ef.prototype = w(R.prototype, {
                layout: function () {
                    for (var a = [], b = 0, c = this.cols; b < c;) b++, a.push(0);
                    c = a;
                    var d = [];
                    a = 0;
                    for (b = this.get_numChildren(); a < b;) {
                        var g = a++;
                        var f = g % this.cols,
                            k = g / this.cols | 0;
                        d.length <= k && d.push(0);
                        g = this.getChildAt(g);
                        var q = g.get_width();
                        c[f] < q && (c[f] = q);
                        f = g.get_height();
                        d[k] < f && (d[k] = f)
                    }
                    var l = q = this.margin;
                    a = k = f = 0;
                    for (b = this.get_numChildren(); a < b;) {
                        g = a++;
                        g = this.getChildAt(g);
                        var h = q,
                            Fa = l;
                        if (g instanceof R) {
                            var n = Ua.__cast(g, R);
                            switch (n.halign) {
                                case "center":
                                    h += (c[f] - n.get_width()) /
                                        2;
                                    break;
                                case "fill":
                                    n.set_width(c[f]);
                                    break;
                                case "right":
                                    h += c[f] - n.get_width()
                            }
                            switch (n.valign) {
                                case "bottom":
                                    Fa += d[k] - n.get_height();
                                    break;
                                case "center":
                                    Fa += (d[k] - n.get_height()) / 2;
                                    break;
                                case "fill":
                                    n.set_height(d[k])
                            }
                        }
                        g.set_x(h);
                        g.set_y(Fa);
                        q += c[f] + this.gap;
                        ++f;
                        f == this.cols && (q = this.margin, l += d[k] + this.gap, ++k, f = 0)
                    }
                    this.rHeight = 2 * this.margin + (d.length - 1) * this.gap;
                    for (a = 0; a < d.length;) f = d[a], ++a, this.rHeight += f;
                    this.rWidth = 2 * this.margin + (c.length - 1) * this.gap;
                    for (a = 0; a < c.length;) q = c[a], ++a, this.rWidth +=
                        q
                },
                add: function (a) {
                    R.prototype.add.call(this, a);
                    this.layout()
                },
                addEmpty: function () {
                    this.add(new za(0, 0))
                },
                setMargins: function (a, b) {
                    this.margin = a;
                    this.gap = b
                },
                __class__: Ef
            });
            var Pc = function () {
                this.margin = this.gap = 10;
                R.call(this)
            };
            h["coogee.ui.layouts.HBox"] = Pc;
            Pc.__name__ = "coogee.ui.layouts.HBox";
            Pc.__super__ = R;
            Pc.prototype = w(R.prototype, {
                layout: function () {
                    for (var a = this.margin, b = 0, c = !1, d = 0, g = this.get_numChildren(); d < g;) {
                        var f = d++;
                        f = this.getChildAt(f);
                        "top" != f.valign && (c = !0);
                        "fill" != f.valign && b < f.get_height() && (b = f.get_height());
                        f.set_x(a);
                        f.set_y(this.margin);
                        a += f.get_width() + this.gap
                    }
                    if (c)
                        for (d = 0, g = this.get_numChildren(); d < g;) switch (f = d++, f = this.getChildAt(f), f.valign) {
                            case "bottom":
                                f.set_y(this.margin + (b - f.get_height()));
                                break;
                            case "center":
                                f.set_y(this.margin + (b - f.get_height()) / 2);
                                break;
                            case "fill":
                                f.set_height(b)
                        }
                    this.rWidth = a > this.margin ? a - this.gap + this.margin : 2 * this.margin;
                    this.rHeight = b + 2 * this.margin
                },
                add: function (a) {
                    R.prototype.add.call(this, a);
                    this.layout()
                },
                setMargins: function (a, b) {
                    this.margin = a;
                    this.gap = b
                },
                __class__: Pc
            });
            var Gd = function () {
                this.margin = 10;
                R.call(this)
            };
            h["coogee.ui.layouts.SimpleBox"] = Gd;
            Gd.__name__ = "coogee.ui.layouts.SimpleBox";
            Gd.__super__ = R;
            Gd.prototype = w(R.prototype, {
                layout: function () {
                    for (var a = 0, b = 0, c = 0, d = this.get_numChildren(); c < d;) {
                        var g = c++;
                        g = this.getChildAt(g);
                        a < g.get_width() && (a = g.get_width());
                        b < g.get_height() && (b = g.get_height());
                        g.set_x(this.margin);
                        g.set_y(this.margin)
                    }
                    this.rWidth = a + 2 * this.margin;
                    this.rHeight =
                        b + 2 * this.margin
                },
                add: function (a) {
                    R.prototype.add.call(this, a);
                    this.layout()
                },
                setMargins: function (a) {
                    this.margin = a
                },
                __class__: Gd
            });
            var Lh = function () {
                this.change = new gc;
                tb.call(this);
                this.setMargins(0, 0);
                this.tabRow = new Oh;
                this.tabRow.click.add(m(this, this.onTab));
                this.tabRow.halign = "fill";
                this.add(this.tabRow);
                this.stack = new Gd;
                this.stack.setMargins(0);
                this.add(this.stack)
            };
            h["coogee.ui.layouts.Tabs"] = Lh;
            Lh.__name__ = "coogee.ui.layouts.Tabs";
            Lh.__super__ = tb;
            Lh.prototype = w(tb.prototype, {
                layout: function () {
                    null != this.stack && this.stack.layout();
                    tb.prototype.layout.call(this)
                },
                addTab: function (a, b) {
                    null != a && this.tabRow.addTab(a);
                    this.stack.add(b);
                    this.tabRow.get_selected() != this.stack.get_numChildren() - 1 && null != a && b.set_visible(!1);
                    this.layout()
                },
                onTab: function (a) {
                    var b = this.tabRow.get_selected();
                    -
                        1 != b && this.stack.getChildAt(b).set_visible(!1);
                    this.stack.getChildAt(a).set_visible(!0);
                    this.tabRow.set_selected(a);
                    this.change.dispatch(a)
                },
                getTab: function () {
                    return this.tabRow.get_selected()
                },
                getTabCount: function () {
                    return this.tabRow.get_size()
                },
                __class__: Lh
            });
            var be = function () {
                this._selected = -1;
                this.tabs = [];
                this.rowSize = 256;
                this.click = new gc;
                R.call(this);
                this.bg = za.light();
                this.add(this.bg)
            };
            h["coogee.ui.layouts._Tabs.TabButtons"] = be;
            be.__name__ = "coogee.ui.layouts._Tabs.TabButtons";
            be.__super__ = R;
            be.prototype = w(R.prototype, {
                get_selected: function () {
                    return this._selected
                },
                set_selected: function (a) {
                    return this._selected = a
                },
                get_size: function () {
                    return this.tabs.length
                },
                layout: function () {
                    this.bg.setSize(this.rWidth, this.rHeight)
                },
                addTab: function (a) {
                    a = new Ph(a);
                    a.click.add(m(this, this.onTab));
                    this.tabs.push(a);
                    return a
                },
                onTab: function (a) {
                    this.click.dispatch(this.tabs.indexOf(a))
                },
                __class__: be,
                __properties__: w(R.prototype.__properties__, {
                    get_size: "get_size",
                    set_selected: "set_selected",
                    get_selected: "get_selected"
                })
            });
            var yk = function () {
                this.first = 0;
                be.call(this);
                this.stripe = new Pc;
                this.stripe.setMargins(0, 0);
                this.add(this.stripe);
                this.more = new wb("...");
                this.more.click.add(m(this,
                    this.showList));
                this.more.set_visible(!1);
                this.add(this.more)
            };
            h["coogee.ui.layouts._Tabs.TabRow"] = yk;
            yk.__name__ = "coogee.ui.layouts._Tabs.TabRow";
            yk.__super__ = be;
            yk.prototype = w(be.prototype, {
                layout: function () {
                    be.prototype.layout.call(this);
                    this.more.set_height(this.rHeight - 8);
                    this.more.set_x(this.rWidth - this.more.get_width());
                    this.more.set_y(4)
                },
                addTab: function (a) {
                    a = be.prototype.addTab.call(this, a);
                    this.stripe.add(a);
                    this.updateSize();
                    this.layout();
                    1 == this.tabs.length && this.set_selected(0);
                    return a
                },
                set_selected: function (a) {
                    if (0 == this.tabs.length) return 0;
                    -
                        1 != this._selected && this.tabs[this._selected].set_selected(!1);
                    this._selected = a;
                    if (this.tabs.length > this.rowSize) {
                        this.first > a ? this.first = a : a >= this.first + this.rowSize && (this.first = a - this.rowSize + 1);
                        for (var b = 0, c = this.tabs.length; b < c;) a = b++, this.tabs[a].set_visible(a >= this.first && a < this.first + this.rowSize);
                        this.stripe.set_x(-this.tabs[this.first].get_x())
                    }
                    -
                        1 != this._selected && this.tabs[this._selected].set_selected(!0);
                    return this.get_selected()
                },
                updateSize: function () {
                    if (this.tabs.length <= this.rowSize) this.more.set_visible(!1), this.rWidth = this.stripe.get_width();
                    else {
                        this.more.set_visible(!0);
                        for (var a = this.rWidth = 0, b = this.tabs.length - this.rowSize + 1; a < b;) {
                            for (var c = a++, d = 0, g = 0, f = this.rowSize; g < f;) {
                                var k = g++;
                                d += this.tabs[c + k].get_width()
                            }
                            this.rWidth < d && (this.rWidth = d)
                        }
                        this.rWidth += 4 + this.more.get_width()
                    }
                    this.rHeight = this.stripe.get_height()
                },
                showList: function () {
                    for (var a = this, b = new Ac, c = 0, d = this.tabs.length; c < d;) {
                        var g = [c++];
                        b.addItem(this.tabs[g[0]].get_text(),
                            function (b) {
                                return function () {
                                    a.click.dispatch(b[0])
                                }
                            }(g), this.get_selected() == g[0])
                    }
                    c = ma.getRect(this.more);
                    ma.showMenuAt(b, Math.ceil(c.x), c.get_bottom())
                },
                __class__: yk
            });
            var Oh = function () {
                be.call(this);
                this.stripes = new tb;
                this.stripes.setMargins(0, 0);
                this.add(this.stripes)
            };
            h["coogee.ui.layouts._Tabs.TabMultiRow"] = Oh;
            Oh.__name__ = "coogee.ui.layouts._Tabs.TabMultiRow";
            Oh.__super__ = be;
            Oh.prototype = w(be.prototype, {
                addTab: function (a) {
                    a = be.prototype.addTab.call(this, a);
                    null == this.lastRow &&
                    (this.lastRow = new Pc, this.lastRow.setMargins(0, 0), this.stripes.add(this.lastRow));
                    this.lastRow.add(a);
                    this.lastRow.get_numChildren() >= this.rowSize && (this.lastRow = null);
                    this.stripes.layout();
                    this.updateSize();
                    this.layout();
                    1 == this.tabs.length && this.set_selected(0);
                    return a
                },
                set_selected: function (a) {
                    if (0 == this.tabs.length) return 0;
                    -
                        1 != this._selected && this.tabs[this._selected].set_selected(!1);
                    this._selected = a;
                    if (-1 != this._selected) {
                        a = this.tabs[this._selected];
                        a.set_selected(!0);
                        for (var b = this.stripes.getChildAt(this.stripes.get_numChildren() -
                            1); -1 == b.getChildIndex(a);) b = this.stripes.removeChildAt(0), this.stripes.add(b)
                    }
                    return this.get_selected()
                },
                updateSize: function () {
                    this.rWidth = this.stripes.get_width();
                    this.rHeight = this.stripes.get_height()
                },
                __class__: Oh
            });
            var Ph = function (a) {
                this.click = new gc;
                R.call(this);
                this.bg = new X;
                this.addChild(this.bg);
                this.tf = Gc.get("", ia.format(ia.uiFont, ia.smallSize, ia.black));
                this.tf.set_x(4);
                this.tf.set_y(8);
                this.addChild(this.tf);
                this.set_text(a);
                this.set_selected(!1);
                this.set_buttonMode(!0);
                this.addEventListener("click",
                    m(this, this.onClick))
            };
            h["coogee.ui.layouts.Tab"] = Ph;
            Ph.__name__ = "coogee.ui.layouts.Tab";
            Ph.__super__ = R;
            Ph.prototype = w(R.prototype, {
                layout: function () {
                    var a = this.bg.get_graphics();
                    a.clear();
                    a.beginFill(ia.white);
                    a.drawRoundRectComplex(0, 4, this.rWidth, this.rHeight - 4, 4, 4, 0, 0)
                },
                onClick: function (a) {
                    this.click.dispatch(this)
                },
                get_text: function () {
                    return this.tf.get_text()
                },
                set_text: function (a) {
                    this.tf.set_text(a);
                    this.setSize(this.tf.get_width() + 8, Math.ceil(this.tf.get_height() + 8));
                    return a
                },
                set_selected: function (a) {
                    this.mouseEnabled = !a;
                    this.bg.set_alpha(a ? 1 : 0);
                    return a
                },
                __class__: Ph,
                __properties__: w(R.prototype.__properties__, {
                    set_selected: "set_selected",
                    set_text: "set_text",
                    get_text: "get_text"
                })
            });
            var Gc = function () {
            };
            h["coogee.ui.utils.Text"] = Gc;
            Gc.__name__ = "coogee.ui.utils.Text";
            Gc.get = function (a, b, c, d) {
                null == a && (a = "");
                var g = new Yc;
                null != c || null != d ? Gc.activate(g, c, d) : g.set_selectable(!1);
                g.set_autoSize(1);
                null != b && g.set_defaultTextFormat(b);
                g.set_htmlText(a);
                return g
            };
            Gc.input = function (a, b, c) {
                null == a && (a = "");
                var d = new Yc;
                d.set_type(1);
                d.set_borderColor(d.get_defaultTextFormat().color);
                d.set_background(!0);
                d.set_border(!0);
                d.addEventListener("change", function (a) {
                    null != c && c()
                });
                d.set_defaultTextFormat(b);
                d.set_text("" != a ? a : " ");
                d.set_autoSize(1);
                d.set_height(d.get_height());
                d.set_autoSize(2);
                d.set_text(a);
                return d
            };
            Gc.format = function (a, b, c) {
                null == c && (c = 0);
                return new Le(Yb.exists(a) ? Yb.getFont(a).name : a, b, c)
            };
            Gc.activate = function (a, b, c) {
                a.set_type(1);
                a.addEventListener("focusIn",
                    function (b) {
                        a.set_borderColor(a.get_defaultTextFormat().color);
                        a.set_border(!0)
                    });
                a.addEventListener("focusOut", function (b) {
                    a.set_border(!1);
                    null != c && c()
                });
                a.addEventListener("keyDown", function (b) {
                    if (13 == b.keyCode || 27 == b.keyCode) a.stage.set_focus(a.stage), b.stopPropagation()
                });
                a.addEventListener("change", function (a) {
                    null != b && b()
                })
            };
            var zb = function () {
            };
            h["dwellings.Export"] = zb;
            zb.__name__ = "dwellings.Export";
            zb.planAsPNG = function (a, b, c) {
                var d = md.getRect(a.floors[0].area),
                    g = 200 *
                        (d.width + 6) | 0,
                    f = 200 * (d.height + 6) | 0,
                    k = new Ob(g, f, !1, J.colorPaper);
                b.labels.outlines(!1);
                var q = new va;
                q.scale(200, 200);
                q.translate(g / 2 - 200 * (d.left + d.width / 2), f / 2 - 200 * (d.top + d.height / 2));
                k.draw(b, q, null, null, null, !0);
                b.labels.outlines(!0);
                a = a.name + " " + zb.getFloorLabel(c, a.floors.length);
                id.savePNG(k, a)
            };
            zb.facadeAsPNG = function (a, b, c) {
                b = b.width * A.columnWidth;
                var d = a.floors.length * A.floorHeight + A.baseHeight + A.roofSlope * A.columnWidth,
                    g = 5 * b + 1E3 | 0,
                    f = 5 * d + 1E3 | 0,
                    k = new Ob(g, f, !1, I.colorBg),
                    q = new va;
                q.scale(5,
                    5);
                q.translate(g / 2 - b / 2 * 5, f / 2 + d / 2 * 5);
                k.draw(c, q, null, null, null, !0);
                id.savePNG(k, a.name)
            };
            zb.planAsSVG = function (a, b, c) {
                var d = md.getRect(a.floors[0].area),
                    g = d.width + 6,
                    f = d.height + 6,
                    k = Da.create(100 * g, 100 * f, J.colorPaper);
                Da.substituteFont = zb.fixFontNames;
                b = Da.drawSprite(b);
                Ka.clearTransform(b);
                Ka.translate(b, g / 2 - (d.left + d.width / 2), f / 2 - (d.top + d.height / 2));
                Ka.scale(b, 100, 100);
                k.root.addChild(b);
                d = Da.getImports();
                k.root.addChild(d);
                d = Da.getGradients();
                k.root.addChild(d);
                a = a.name + " " + zb.getFloorLabel(c, a.floors.length);
                id.saveText('<?xml version="1.0" encoding="UTF-8" standalone="no"?>' + Ke.print(k.root), "" + a + ".dw.svg", "image/svg+xml")
            };
            zb.facadeAsSVG = function (a, b, c) {
                var d = b.width * A.columnWidth,
                    g = a.floors.length * A.floorHeight + A.baseHeight + A.roofSlope * A.columnWidth,
                    f = d + 200,
                    k = g + 200;
                b = Da.create(f, k, I.colorBg);
                Da.substituteFont = zb.fixFontNames;
                c = Da.drawSprite(c);
                Ka.clearTransform(c);
                Ka.translate(c, f / 2 - d / 2, k / 2 + g / 2);
                b.root.addChild(c);
                c = Da.getImports();
                b.root.addChild(c);
                c = Da.getGradients();
                b.root.addChild(c);
                id.saveText('<?xml version="1.0" encoding="UTF-8" standalone="no"?>' +
                    Ke.print(b.root), a.name + ".dw.svg", "image/svg+xml")
            };
            zb.multiFloor = function (a, b, c, d, g, f) {
                var k = Math.ceil((c - b + 1) / d),
                    q = md.getRect(a.floors[0].area),
                    l = g * (q.width + zb.MARGINS) * d;
                k *= g * (q.height + zb.MARGINS);
                b = zb.buildSheet(a, b, c, d, q, !f);
                f ? (b.set_scaleX(b.set_scaleY(20)), f = new va, f.scale(g, g), g = new Ob(l, k, !1, J.colorPaper), g.draw(b, f, null, null, null, !0), id.savePNG(g, a.name)) : (l = Da.create(l, k, J.colorPaper), Da.substituteFont = zb.fixFontNames, f = Da.drawSprite(b), Ka.scale(f, g, g), l.root.addChild(f), g = Da.getImports(),
                    l.root.addChild(g), g = Da.getGradients(), l.root.addChild(g), id.saveText('<?xml version="1.0" encoding="UTF-8" standalone="no"?>' + Ke.print(l.root), a.name + ".dw.svg", "image/svg+xml"))
            };
            zb.buildSheet = function (a, b, c, d, g, f) {
                var k = g.centerX(),
                    q = g.centerY(),
                    l = g.width + zb.MARGINS;
                g = g.height + zb.MARGINS;
                var h = J.formatRoom,
                    Fa = new X,
                    n = b;
                for (c += 1; n < c;) {
                    var r = n++,
                        p = (r - b) / d | 0,
                        t = (r - b) % d,
                        y = Gc.get(zb.getFloorLabel(r, a.floors.length), h);
                    y.set_scaleX(y.set_scaleY(2 / y.get_textHeight()));
                    y.set_x(t * l);
                    y.set_y(p * g);
                    Fa.addChild(y);
                    y = new $g;
                    y.update(a, r);
                    y.set_x((t + .5) * l - k);
                    y.set_y((p + .5) * g - q);
                    Fa.addChild(y);
                    r < a.floors.length && (r = 0 <= r ? a.floors[r] : a.basement, y = new Sa(r), y.set_x((t + .5) * l - k), y.set_y((p + .5) * g - q), Fa.addChild(y), Sa.exportAnnote && (p = new Qc, p.update(a, r), p.outlines(f), p.set_x(y.get_x()), p.set_y(y.get_y()), Fa.addChild(p)))
                }
                return Fa
            };
            zb.getFloorLabel = function (a, b) {
                switch (a) {
                    case -1:
                        return "B";
                    case 0:
                        return "GF";
                    default:
                        return a < b ? a + "F" : "R"
                }
            };
            zb.fixFontNames = function (a) {
                if (!zb.embeddedScanned) {
                    zb.embeddedScanned = !0;
                    for (var b =
                        new ab, c = zb.embedded.h, d = Object.keys(c), g = d.length, f = 0; f < g;) {
                        var k = d[f++],
                            q = c[k];
                        k = Yb.getFont(k).name;
                        b.h[k] = {
                            name: q.name,
                            url: q.url
                        }
                    }
                    zb.embedded = b
                }
                q = zb.embedded.h[a];
                return null != q ? (Da.addImport(q.url), q.name) : Da.substituteGenerics(a)
            };
            var Xd = function (a, b, c) {
                null == c && (c = 0);
                null == a && (a = 0);
                this.seed = 0 != a ? a : t.seed = 48271 * t.seed % 2147483647 | 0;
                this.tags = null != b ? b : oc.random();
                this.nFloors = c;
                Ub.trace(this.tags, {

                    className: "dwellings.model.Blueprint",
                    methodName: "new"
                });
                oc.resolve(this.tags);
                this.plan = null;
                this.height = this.width = 0;
                this.name = null
            };
            h["dwellings.model.Blueprint"] = Xd;
            Xd.__name__ = "dwellings.model.Blueprint";
            Xd.random = function (a) {
                null == a && (a = 0);
                return new Xd(0, null, a)
            };
            Xd.fromURL = function () {
                var a = Va.getInt("seed", 0),
                    b = Va.get("tags");
                b = null != b ? b.split(",") : null;
                var c = Va.getInt("floors");
                if (0 == a && null == b && 0 == c) return null;
                a = new Xd(a, b, c);
                b = Va.get("plan", null);
                null != b && (a.plan = b, a.width = Va.getInt("w"), a.height = Va.getInt("h"),
                    a.entrance = Va.get("entrance", null));
                a.name = Va.get("name");
                b = Va.get("view");
                null != b && ("plan" == b.toLowerCase() ? ub.planView = !0 : "elevation" == b.toLowerCase() && (ub.planView = !1));
                return a
            };
            Xd.prototype = {
                updateURL: function () {
                    Va.reset();
                    Va.set("seed", this.seed);
                    Va.set("tags", this.tags.join(","));
                    0 < this.nFloors && Va.set("floors", this.nFloors);
                    null != this.plan && (Va.set("plan", this.plan), Va.set("w", this.width), Va.set("h", this.height), null != this.entrance && Va.set("entrance", this.entrance));
                    null != this.name && Va.set("name",
                        this.name)
                },
                __class__: Xd
            };
            var Hd = function (a) {
                this.room = a;
                for (var b = [], c = 0, d = a.getDoors(); c < d.length;) {
                    var g = d[c];
                    ++c;
                    b.push(a == g.room1 ? g.edge1 : a == g.room2 ? g.edge2 : null)
                }
                d = b;
                this.abris = [];
                b = 0;
                for (c = a.contour; b < c.length;) {
                    g = c[b];
                    ++b;
                    var f = a.plan.spiral;
                    if (g != (null != f ? f.entrance : null) && (this.abris.push(new F(g.a.j, g.a.i)), f = a.plan.entrance, g == (null != f ? f.door : null) || -1 != d.indexOf(g))) {
                        f = this.abris;
                        var k = g.point();
                        g = g.dir.cw;
                        g = new F(g.dj, g.di);
                        f.push(new F(k.x + .5 * g.x, k.y + .5 * g.y))
                    }
                }
                this.shapes = [];
                this.group()
            };
            h["dwellings.model.Clutter"] = Hd;
            Hd.__name__ = "dwellings.model.Clutter";
            Hd.prototype = {
                fill: function (a, b, c, d, g, f, k) {
                    null == k && (k = .4);
                    null == f && (f = .8);
                    null == g && (g = .7);
                    null == d && (d = .8);
                    null == c && (c = 3);
                    null == b && (b = .6);
                    null == a && (a = 0);
                    0 == a && (a = .05 + .4 * (1 - Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1)));
                    var q = Math.round(.5 * k * this.room.area.length);
                    k = Math.round(2 + k * this.room.area.length);
                    k = Math.floor(q + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * (k - q));
                    q = 0;
                    for (k = ca.subset(this.getSpawnCells(), k); q < k.length;) {
                        var l = k[q];
                        ++q;
                        var h = 0 == b ? 0 : Math.min((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 / (1 - b), 1);
                        if (1 != h) {
                            var Fa = g;
                            null == Fa && (Fa = .5);
                            Fa = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < Fa
                        } else Fa = !0;
                        Fa = Fa ? 0 : (1 - g) * Math.PI / 4 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 |
                            0) / 2147483647) / 3 * 2 - 1);
                        this.spawn(l, a, h, 1 + Math.floor((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * c), d, Fa, f)
                    }
                    this.group()
                },
                spawn: function (a, b, c, d, g, f, k) {
                    null == k && (k = .8);
                    null == f && (f = 0);
                    null == g && (g = .8);
                    null == d && (d = 3);
                    null == c && (c = 1);
                    null == b && (b = 1);
                    this.group(c);
                    c = 0;
                    for (var q = d; c < q;) {
                        var l = c++;
                        l = Math.pow(g, d - l);
                        var h = b * (1 - l + l * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647));
                        l = this.inCell(a, h);
                        var Fa = Math.sqrt(k);
                        null == Fa && (Fa = .5);
                        h = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < Fa ? this.rect(l, 2 * h, h * (1 +
                            Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1))) : this.circ(l, .8 * h);
                        0 != f && Id.asRotateYX(h, Math.sin(f), Math.cos(f));
                        Id.asTranslate(h, l.x, l.y);
                        this.curGroup.push(h)
                    }
                    this.group()
                },
                inCell: function (a, b) {
                    null == b && (b = .5);
                    var c = a.j + b + (1 - 2 * b) * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647);
                    a = a.i + b + (1 - 2 * b) * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647);
                    return new F(c,
                        a)
                },
                getSpawnCells: function () {
                    for (var a = this.room.area.slice(), b = 0, c = this.room.getDoors(); b < c.length;) {
                        var d = c[b];
                        ++b;
                        var g = this.room;
                        M.remove(a, d.plan.grid.edge2cell(g == d.room1 ? d.edge1 : g == d.room2 ? d.edge2 : null))
                    }
                    b = 0;
                    for (c = this.room.getStairs(); b < c.length;) d = c[b], ++b, M.remove(a, d.cell);
                    b = this.room.plan.entrance;
                    -
                        1 != this.room.area.indexOf(null != b ? b.landing : null) && M.remove(a, this.room.plan.entrance.landing);
                    this.room.hasSpiral() && M.remove(a, this.room.plan.spiral.landing);
                    return a
                },
                group: function (a) {
                    null ==
                    a && (a = 1);
                    if (null != this.curGroup && 0 < this.curGroup.length) {
                        this.shapes.push(this.curGroup);
                        var b = Ff.center(this.curGroup[0]);
                        b = this.getForce(b);
                        for (var c = Infinity, d = 0, g = this.curGroup; d < g.length;) {
                            var f = g[d];
                            ++d;
                            f = this.push(this.abris, f, b);
                            c > f && (c = f)
                        }
                        if (Infinity > c)
                            for (c *= this.force, b.x *= c, b.y *= c, d = 0, g = this.curGroup; d < g.length;) f = g[d], ++d, Id.asTranslate(f, b.x, b.y)
                    }
                    this.curGroup = [];
                    this.force = a
                },
                getForce: function (a) {
                    for (var b = new F, c = function (c) {
                        c = a.subtract(c);
                        var d = Math.pow(c.get_length(), 2);
                        b.x += c.x *
                            d;
                        b.y += c.y * d
                    }, d = this.room.doors.iterator(); d.hasNext();) {
                        var g = d.next();
                        c(g.edge1.point())
                    }
                    d = 0;
                    for (g = this.room.getStairs(); d < g.length;) {
                        var f = g[d];
                        ++d;
                        f = f.cell;
                        c(new F(f.j + .5, f.i + .5))
                    }
                    d = this.room.plan.entrance;
                    -
                        1 != this.room.contour.indexOf(null != d ? d.door : null) && c(this.room.plan.entrance.door.point());
                    this.room.hasSpiral() && (d = this.room.plan.spiral, null != d ? (f = d.entrance.a, d = new F(f.j, f.i)) : d = null, c(d));
                    0 == b.get_length() ? b = F.polar(1, 2 * Math.PI * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647)) : b.normalize(1);
                    return b
                },
                rect: function (a, b, c) {
                    return .5 > (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 ? rd.rect(b, c) : rd.rect(c, b)
                },
                circ: function (a, b) {
                    return rd.regular(16, b)
                },
                push: function (a, b, c) {
                    var d = Infinity,
                        g = function (a, b) {
                            for (var f = b.length, g = 0; g < f;) {
                                var k = g++,
                                    h = b[k];
                                k = b[(k + 1) % f].subtract(h);
                                for (var n = 0; n < a.length;) {
                                    var r = a[n];
                                    ++n;
                                    r = Kb.intersectLines(r.x, r.y, c.x, c.y, h.x, h.y, k.x, k.y);
                                    null != r && 0 < r.x && 0 <= r.y && 1 >= r.y && d > r.x && (d = r.x)
                                }
                            }
                        };
                    g(b, a);
                    c = new F(-1 * c.x, -1 * c.y);
                    g(a, b);
                    return d
                },
                __class__: Hd
            };
            var ad = N["dwellings.model.DwellingsDoorType"] = {
                __ename__: "dwellings.model.DwellingsDoorType",
                __constructs__: null,
                NULL: {
                    _hx_name: "NULL",
                    _hx_index: 0,
                    __enum__: "dwellings.model.DwellingsDoorType",
                    toString: u
                },
                DOORWAY: {
                    _hx_name: "DOORWAY",
                    _hx_index: 1,
                    __enum__: "dwellings.model.DwellingsDoorType",
                    toString: u
                },
                REGULAR: {
                    _hx_name: "REGULAR",
                    _hx_index: 2,
                    __enum__: "dwellings.model.DwellingsDoorType",
                    toString: u
                }
            };
            ad.__constructs__ = [ad.NULL, ad.DOORWAY, ad.REGULAR];
            var zk = function (a, b, c) {
                this.plan = a.plan;
                this.room1 = a;
                this.edge1 = c;
                this.room2 = b;
                this.edge2 =
                    this.plan.grid.edges.h[c.b.__id__].h[c.a.__id__]
            };
            h["dwellings.model.Door"] = zk;
            zk.__name__ = "dwellings.model.Door";
            zk.prototype = {
                getPrice: function () {
                    var a = function (a) {
                        return 1 == a.area.length ? 10 : a.area.length - a.narrow.length
                    };
                    return a(this.room1) + a(this.room2)
                },
                __class__: zk
            };
            var Cc = function () {
            };
            h["dwellings.model.Drafter"] = Cc;
            Cc.__name__ = "dwellings.model.Drafter";
            Cc.getShape = function (a, b, c) {
                a = c ? Cc.getBox(a, b) : Cc.getPolyomino(a, b);
                return Gf.cloud2gridNArea(a)
            };
            Cc.getPolyomino = function (a, b) {
                for (var c = Math.round(a / 10), d = Math.round(b / 10); ;) {
                    var g = $a.create(c, d);
                    if (g.length >= a && g.length <= b) return g
                }
            };
            Cc.getBox = function (a, b) {
                for (; ;) {
                    var c = Math.round(2 + 6 * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647)),
                        d = Math.round(2 + 6 * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647));
                    if (c * d >= a && c * d <= b) {
                        a = [];
                        for (b = 0; b < d;)
                            for (var g = b++, f = 0, k = c; f < k;) {
                                var q = f++;
                                a.push(new Hf(q, g))
                            }
                        return a
                    }
                }
            };
            Cc.fromCode = function (a, b, c) {
                if (null == a || 0 >= b || b > fa.MAX_SIZE || 0 >= c || c > fa.MAX_SIZE) return null;
                for (var d = [], g = 0; g < c;)
                    for (var f = g++, k = 0, q = b; k < q;) {
                        var l = k++,
                            h = f * b + l,
                            Fa = a.charAt(h >> 2);
                        0 != (E.parseInt("0x" + Fa) >> (h & 3) & 1) && d.push(new Hf(l, f))
                    }
                return Gf.cloud2gridNArea(d)
            };
            Cc.encodeBitmap = function (a) {
                var b = a[0].length,
                    c = a.length;
                Ub.trace(b, {

                    className: "dwellings.model.Drafter",
                    methodName: "encodeBitmap",
                    customParams: [c]
                });
                for (var d = "", g = 0, f = 0, k = 0; k < c;)
                    for (var q = k++, l = 0, h = b; l < h;) {
                        var Fa = l++;
                        a[q][Fa] && (g |= 1 << (f & 3));
                        if (3 ==
                            (f & 3) || Fa == b - 1 && q == c - 1) d += T.hex(g), g = 0;
                        ++f
                    }
                return d
            };
            Cc.encodeEdge = function (a) {
                a = [a.a.i, a.a.j, a.b.i, a.b.j];
                for (var b = [], c = 0; c < a.length;) {
                    var d = a[c];
                    ++c;
                    b.push(T.hex(d))
                }
                return b.join("")
            };
            Cc.decodeEdge = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 0);
                var g = [],
                    f = 0;
                for (b = b.split(""); f < b.length;) {
                    var k = b[f];
                    ++f;
                    g.push(E.parseInt("0x" + k))
                }
                f = a.node(g[0] - d, g[1] - c);
                c = a.node(g[2] - d, g[3] - c);
                return a.edges.h[f.__id__].h[c.__id__]
            };
            var Ta = function (a, b) {
                var c = a.floors[0],
                    d = c.grid,
                    g = c.entrance.door;
                this.width =
                    0 != b.dj ? d.w : d.h;
                this.depth = 0 != b.dj ? d.h : d.w;
                this.height = a.floors.length;
                var f = (this.height - 1) / Math.sqrt(this.width);
                null == f && (f = .5);
                var k = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < f,
                    q = [],
                    l = [];
                f = 0;
                for (var h = a.floors; f < h.length;) {
                    var Fa = h[f];
                    ++f;
                    for (var n = 0, r = Fa.contour; n < r.length;) {
                        var p = r[n];
                        ++n;
                        p.dir == b && ca.add(l, 0 != b.dj ? p.a.i : p.a.j)
                    }
                }
                for (f = 0; f < l.length;) {
                    var y = l[f];
                    ++f;
                    q.push(y)
                }
                y = -1;
                var u = !1;
                f = c.spiral;
                c = null != f ? f.entrance : null;
                null != c && (u = c.dir == b || c.dir.ccw == b, y = 0 != b.dj ? c.a.i : c.a.j, ca.add(q,
                    y));
                var x = -1,
                    z = g.dir;
                0 == z.di * b.di + z.dj * b.dj && (x = 0 != b.dj ? g.a.i : g.a.j, ca.add(q, x));
                var A = 0 != b.dj ? b.ccw.di : b.ccw.dj;
                q.sort(function (a, b) {
                    a -= b;
                    return A * (0 == a ? 0 : 0 > a ? -1 : 1)
                });
                this.layers = [];
                f = 0;
                for (h = q.length; f < h;) {
                    var m = f++;
                    z = q[m];
                    m = 0 > A ? z : this.depth - z;
                    var Q = b == qa.WEST ? d.node(z, 0) : b == qa.EAST ? d.node(z, this.width) : b == qa.NORTH ? d.node(0, z) : b == qa.SOUTH ? d.node(this.width, z) : null;
                    if (-1 != l.indexOf(z)) {
                        var O = -1,
                            F = [];
                        n = [];
                        r = 0;
                        for (var v = a.floors.length; r < v;) {
                            var N = r++;
                            Fa = a.floors[N];
                            for (var w = [], D = 0, H = this.width; D <
                            H;) {
                                var ta = D++;
                                p = d.nodeOffset(Q, b.op, ta + 1);
                                p = d.nodeNdir2edge(p, b);
                                var I = d.edge2cell(p);
                                p == g && (O = ta);
                                -
                                    1 != Fa.windows.indexOf(p) && F.push(new Hf(ta, N));
                                w.push(-1 != Fa.area.indexOf(I))
                            }
                            n.push(w)
                        }
                        for (r = 0; r < this.width;) {
                            for (; r < this.width && !n[0][r];) ++r;
                            w = r;
                            if (w < this.width) {
                                v = [];
                                do {
                                    for (Fa = 0; Fa < this.height && n[Fa][w];) ++Fa;
                                    v.push(Fa)
                                } while (++w < this.width && n[0][w]);
                                Fa = O;
                                Fa = Fa >= r && Fa < r + v.length ? Fa - r : -1;
                                p = [];
                                for (N = 0; N < F.length;) D = F[N], ++N, p.push(new Hf(D.x - r, D.y));
                                v = new Ak(v, Fa, p);
                                v.separator = k;
                                this.layers.push(new ef(m,
                                    r, v))
                            }
                            r = w
                        }
                    }
                    z == y && (O = ig.distance(Q, c.a), this.layers.push(new jg(m, O, u ? c.dir == b ? 1 : -1 : 0)));
                    z == x && (Q = ig.distance(Q, g.a), z = g.dir.cw, this.layers.push(new kg(m, Q, 0 < z.di * b.di + z.dj * b.dj)))
                }
                a = [];
                f = 0;
                for (h = this.layers; f < h.length;)
                    if (b = h[f], ++f, b instanceof ef) {
                        v = Ua.__cast(b, ef).facade;
                        n = [];
                        r = 0;
                        for (v = v.sections; r < v.length;) b = v[r], ++r, b.height == this.height && n.push(b);
                        b = n;
                        for (w = 0; w < b.length;) y = b[w], ++w, a.push(y)
                    }
                f = ca.max(a, function (a) {
                    return a.width
                });
                2 < f.width && f.addChimney()
            };
            h["dwellings.model.Elevation"] =
                Ta;
            Ta.__name__ = "dwellings.model.Elevation";
            Ta.prototype = {
                __class__: Ta
            };
            var fe = function (a, b) {
                this.dist = a;
                this.offset = b
            };
            h["dwellings.model.Layer"] = fe;
            fe.__name__ = "dwellings.model.Layer";
            fe.prototype = {
                __class__: fe
            };
            var ef = function (a, b, c) {
                fe.call(this, a, b);
                this.facade = c
            };
            h["dwellings.model.FacadeLayer"] = ef;
            ef.__name__ = "dwellings.model.FacadeLayer";
            ef.__super__ = fe;
            ef.prototype = w(fe.prototype, {
                __class__: ef
            });
            var jg = function (a, b, c) {
                fe.call(this,
                    a, b);
                this.dir = c
            };
            h["dwellings.model.TowerLayer"] = jg;
            jg.__name__ = "dwellings.model.TowerLayer";
            jg.__super__ = fe;
            jg.prototype = w(fe.prototype, {
                __class__: jg
            });
            var kg = function (a, b, c) {
                fe.call(this, a, b);
                this.right = c
            };
            h["dwellings.model.PorchLayer"] = kg;
            kg.__name__ = "dwellings.model.PorchLayer";
            kg.__super__ = fe;
            kg.prototype = w(fe.prototype, {
                __class__: kg
            });
            var fd = function (a) {
                this.stairCells = new Ba;
                this.chimneys = new Ba;
                var b = this;
                fd.inst = this;
                this.bp = a;
                Ub.trace(a.seed, {

                    className: "dwellings.model.House",
                    methodName: "new"
                });
                Ub.trace(a.tags, {

                    className: "dwellings.model.House",
                    methodName: "new"
                });
                A.random();
                t.reset(a.seed);
                fa.process(a);
                var c = fa.shape;
                Pb.avgRoomSize = 6;
                Pb.regularRooms = !1;
                Pb.preferCorners = -1 != a.tags.indexOf("mechanical");
                Pb.preferWalls = -1 != a.tags.indexOf("organic");
                Pb.noNooks = -1 == a.tags.indexOf("hallways");
                var d = fd.build(function () {
                    return new Pb(b, c.grid, c.area, fa.stairwell)
                });
                d.entrance = fa.entrance;
                this.floors = [d];
                if (1 < fa.nFloors) {
                    d.spiral = fa.spiral;
                    for (var g = d, f = 1, k = fa.nFloors; f < k;) {
                        var q = f++;
                        q = [g.area];
                        if (-1 == a.tags.indexOf("slab")) {
                            var l = 0,
                                h = null;
                            if (1 < g.rooms.length)
                                for (var Fa = 0, n = g.rooms; Fa < n.length;) {
                                    var r = n[Fa];
                                    ++Fa;
                                    if (!r.hasSpiral() && ca.intersects(r.contour, g.contour)) {
                                        if (null != g.stairwell) {
                                            if (r == g.stairwell.room) continue;
                                            if (-1 != r.area.indexOf(g.stairwell.landing)) continue
                                        }
                                        var p = ca.difference(q[0],
                                            r.area);
                                        g.grid.isConnected(p) && (p = md.compactness(p), l <= p && (l = p, h = r))
                                    }
                                }
                            null != h && (Fa = md.compactness(q[0]), l = l * l / Fa, null == l && (l = .5), (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < l && (q[0] = ca.difference(q[0], h.area)))
                        }
                        Pb.avgRoomSize = 6;
                        q = fd.build(function (a) {
                            return function () {
                                return new Pb(b, g.grid, a[0], g.stairwell)
                            }
                        }(q));
                        q.spiral = fa.spiral;
                        this.floors.push(q);
                        g = q
                    }
                }
                if (null == fa.spiral)
                    for (f = 1, k = this.floors.length; f < k;) q = f++, this.connectFloors(this.floors[q - 1], this.floors[q]);
                if (fa.basement) {
                    Pb.avgRoomSize =
                        12;
                    f = fd.build(function () {
                        return new Pb(null, d.grid, d.area)
                    });
                    var y = ca.max(f.rooms, function (a) {
                        return a.get_size()
                    });
                    f = fa.stairwell;
                    -
                        1 != y.area.indexOf(null != f ? f.stair : null) ? (f = fa.stairwell, f = -1 != y.area.indexOf(null != f ? f.landing : null)) : f = !1;
                    var u = f ? fa.stairwell : null;
                    Pb.avgRoomSize = 6;
                    this.basement = fd.build(function () {
                        return new Pb(b, d.grid, y.area, u)
                    });
                    this.connectFloors(this.basement, d) || (this.basement = null)
                }
                this.assignRooms();
                this.assignDoors();
                this.spawnWindows();
                this.spawnChimneys();
                f = a.name;
                this.name =
                    null != f ? f : Md.get(this.getTags());
                a.updateURL()
            };
            h["dwellings.model.House"] = fd;
            fd.__name__ = "dwellings.model.House";
            fd.inst = null;
            fd.build = function (a, b) {
                return a()
            };
            fd.reset = function (a) {
                a = new fd(a);
                sd.curFloor = 0;
                bd.curDir = fa.entrance.door.dir;
                return a
            };
            fd.prototype = {
                reroll: function () {
                    for (var a = this, b = [], c = 0, d = this.floors.length; c < d;) {
                        var g = c++,
                            f = fd.build(function (b) {
                                return function () {
                                    return new Pb(a, b[0].grid, b[0].area, fa.stairwell)
                                }
                            }([this.floors[g]]));
                        f.spiral = fa.spiral;
                        0 ==
                        g && (f.entrance = fa.entrance);
                        b.push(f)
                    }
                    this.floors = b;
                    if (null == fa.spiral)
                        for (b = 1, c = this.floors.length; b < c;) g = b++, this.connectFloors(this.floors[g - 1], this.floors[g]);
                    null != this.basement && (this.basement = fd.build(function () {
                        return new Pb(a, a.basement.grid, a.basement.area)
                    }), this.connectFloors(this.floors[0], this.basement));
                    this.assignRooms();
                    this.assignDoors();
                    this.spawnWindows()
                },
                getTags: function () {
                    var a = this.bp.tags.slice();
                    ca.removeAll(a, oc.HEIGHT);
                    ca.removeAll(a, oc.SIZE);
                    var b = this.floors[0].area.length;
                    16 > b ? a.push("small") : 24 < b && a.push("large");
                    var c = this.floors.length;
                    b = Math.sqrt(b);
                    (1 == c || c < b / 2) && a.push("low");
                    c >= b && a.push("tall");
                    return a
                },
                reassignRooms: function () {
                    for (var a = 0, b = this.rooms; a < b.length;) {
                        var c = b[a];
                        ++a;
                        c.type = null
                    }
                    this.assignRooms();
                    this.assignDoors();
                    a = 0;
                    for (b = this.floors; a < b.length;) c = b[a], ++a, c.windows = [];
                    this.spawnWindows()
                },
                assignRooms: function () {
                    this.rooms = [];
                    for (var a = 0, b = this.floors; a < b.length;) {
                        var c = b[a];
                        ++a;
                        var d = this.rooms;
                        c = c.sortRooms();
                        for (var g = 0; g < c.length;) {
                            var f =
                                c[g];
                            ++g;
                            d.push(f)
                        }
                    }
                    if (null != this.basement)
                        for (d = this.rooms, c = this.basement.sortRooms(), a = 0; a < c.length;) f = c[a], ++a, d.push(f);
                    Z.assign(this)
                },
                assignDoors: function () {
                    for (var a = 0, b = this.rooms; a < b.length;) {
                        var c = b[a];
                        ++a;
                        for (c = c.doors.iterator(); c.hasNext();) {
                            var d = c.next();
                            d.type = null
                        }
                    }
                    a = 0;
                    for (b = this.rooms; a < b.length;)
                        if (c = b[a], ++a, null != c.type && null != c.type.doors) c.type.doors(c);
                        else if (-1 < c.plan.getFloor() && 1 == c.countDoors() && !(c.narrow.length == c.area.length && 1 < c.countDoors()))
                            for (c = c.doors.iterator(); c.hasNext();) d =
                                c.next(), d.type = ad.REGULAR
                },
                spawnWindows: function () {
                    for (var a = [], b = 0, c = this.rooms; b < c.length;) {
                        var d = c[b];
                        ++b;
                        null != d.type && null != d.type.windows && (d.type.windows(d), a.push(d))
                    }
                    null != this.basement && (this.basement.windows = []);
                    b = 0;
                    for (c = this.floors.length; b < c;) d = b++, Pb.windowDensity = .9 - .1 * (fa.nFloors - d), this.floors[d].spawnWindowsExcluding(a)
                },
                spawnChimneys: function () {
                    this.chimneys = new Ba;
                    for (var a = 0, b = this.floors.length; a < b;) {
                        var c = a++,
                            d = [this.floors[c]],
                            g = d[0].area.slice();
                        null != d[0].spiral && M.remove(g,
                            d[0].spiral.landing);
                        if (c < this.floors.length - 1) {
                            M.remove(g, this.floors[0].entrance.landing);
                            var f = [this.floors[c + 1].area];
                            ca.removeAll(g, f[0]);
                            for (var k = [], q = 0; q < g.length;) {
                                var l = g[q];
                                ++q;
                                ca.every(qa.ROSE, function (a, b, c) {
                                    return function (d) {
                                        d = c[0].grid.cell(a[0].i + d.di, a[0].j + d.dj);
                                        return -1 == b[0].indexOf(d)
                                    }
                                }([l], f, d)) && k.push(l)
                            }
                            g = k
                        }
                        0 < g.length && this.chimneys.set(ca.random(g), c)
                    }
                    a = this.floors[0].area.length / 16;
                    b = a - (a | 0);
                    null == b && (b = .5);
                    a = (a | 0) + ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < b ? 1 : 0);
                    1 > a && (a = 1);
                    a = ca.subset(ca.keys2array(this.chimneys), a);
                    b = this.chimneys;
                    for (c = b.keys(); c.hasNext();) d = c.next(), b.get(d), -1 == a.indexOf(d) && this.chimneys.remove(d)
                },
                getStairCells: function (a) {
                    var b = [],
                        c = a.grid,
                        d = [];
                    null != a.entrance && d.push(a.entrance.landing);
                    null != a.spiral && d.push(a.spiral.landing);
                    null != a.stairwell && (d.push(a.stairwell.stair), d.push(a.stairwell.landing));
                    var g = 0;
                    for (a = a.rooms; g < a.length;) {
                        var f = a[g];
                        ++g;
                        for (var k = ca.difference(f.area, d), q = f.doors.iterator(); q.hasNext();) {
                            var l = q.next();
                            M.remove(k, c.edge2cell(f == l.room1 ? l.edge1 : f == l.room2 ? l.edge2 : null))
                        }
                        for (q = 0; q < k.length;) {
                            l = k[q];
                            ++q;
                            var h = this.empty(f, l, qa.NORTH),
                                Fa = this.empty(f, l, qa.SOUTH),
                                n = this.empty(f, l, qa.EAST),
                                r = this.empty(f, l, qa.WEST);
                            if (h || Fa || !n || !r)
                                if (n || r || !h || !Fa) h && n && !this.empty(f, l, qa.NE) || h && r && !this.empty(f, l, qa.NW) || Fa && n && !this.empty(f, l, qa.SE) || Fa && r && !this.empty(f, l, qa.SW) || b.push(l)
                        }
                    }
                    return b
                },
                connectFloors: function (a, b) {
                    if (null != a.stairwell && null != b.stairwell) {
                        var c = fa.stairwell.stair;
                        a = new ff(a, c, this.getStairDir(a,
                            c));
                        b = new ff(b, c, this.getStairDir(b, c));
                        a.link(b);
                        return !0
                    }
                    var d = this.stairCells.h[a.__id__];
                    if (null == d) {
                        var g = this.stairCells,
                            f = this.getStairCells(a);
                        g.set(a, f);
                        d = f
                    }
                    g = this.stairCells.h[b.__id__];
                    null == g && (g = this.stairCells, f = this.getStairCells(b), g.set(b, f), g = f);
                    f = ca.intersect(d, g);
                    if (0 == f.length) {
                        Ub.trace("No available cells for a staircase, spawning a trapdorr instead...", {

                            className: "dwellings.model.House",
                            methodName: "connectFloors"
                        });
                        c = ca.intersect(a.area, b.area);
                        f = 0;
                        for (var k = a.stairs; f < k.length;) {
                            var q = k[f];
                            ++f;
                            M.remove(c, q.cell)
                        }
                        f = 0;
                        for (k = b.stairs; f < k.length;) q = k[f], ++f, M.remove(c, q.cell);
                        if (0 < c.length) return c = ca.random(c), M.remove(d, c), M.remove(g, c), a = new ff(a, c, null), b = new ff(b, c, null), a.link(b), !0;
                        Ub.trace("No available cells for a trapdoor!", {

                            className: "dwellings.model.House",
                            methodName: "connectFloors"
                        });
                        return !1
                    }
                    c = ca.random(f);
                    M.remove(d,
                        c);
                    M.remove(g, c);
                    f = 0;
                    for (k = qa.ROSE; f < k.length;) q = k[f], ++f, q = a.grid.cell(c.i + q.di, c.j + q.dj), a.getRoom(c) == a.getRoom(q) && M.remove(d, q), b.getRoom(c) == b.getRoom(q) && M.remove(g, q);
                    a = new ff(a, c, this.getStairDir(a, c));
                    b = new ff(b, c, this.getStairDir(b, c));
                    a.link(b);
                    return !0
                },
                empty: function (a, b, c) {
                    b = a.plan.grid.cell(b.i + c.di, b.j + c.dj);
                    return -1 != a.area.indexOf(b)
                },
                getStairDir: function (a, b) {
                    var c = a.stairwell;
                    if ((null != c ? c.stair : null) == b) return a.stairwell.exit.op;
                    c = [];
                    for (var d = [], g = 0, f = qa.CARDINAL; g < f.length;) {
                        var k =
                            f[g];
                        ++g;
                        this.empty(a.getRoom(b), b, k) && (d.push(k.op), this.empty(a.getRoom(b), b, k.op) || c.push(k.op))
                    }
                    return ca.random(0 < c.length ? c : d)
                },
                updateProps: function () {
                    for (var a = 0, b = this.floors; a < b.length;) {
                        var c = b[a];
                        ++a;
                        var d = 0;
                        for (c = c.rooms; d < c.length;) {
                            var g = c[d];
                            ++d;
                            g.props.update()
                        }
                    }
                },
                getElevations: function () {
                    if (null == this.elevations) {
                        for (var a = new Ba, b = 0, c = qa.CARDINAL; b < c.length;) {
                            var d = c[b];
                            ++b;
                            a.set(d, new Ta(this, d))
                        }
                        this.elevations = a
                    }
                    return this.elevations
                },
                __class__: fd
            };
            var sb=function(){};
            h["dwellings.model.JsonExporter"]=sb;
            sb.__name__="dwellings.model.JsonExporter";
            sb.grid=null;
            sb.exportProto=function(a){
                sb.grid=a.floors[0].grid;
                return sb.house2proto(a)
            };
            sb.export=function(a){
                var b=sb.exportProto(a),c=sb.proto2json(b),d=id.fixName(a.name);
                id.saveJSON(c,d,!0);
                return b
            };
            sb.exportAsProto=function(a){
                var b=sb.exportProto(a),c=DataProto.data.DwellingsObj.encode(b).finish();
                var d = FuncBin.exportBin(c, DataProto.data.DataType.dwellings);
                id.saveBinary(Pd.fromArrayBuffer(d),id.fixName(a.name)+".dw.pb","application/x-protobuf");
                return b
            };
            sb.house2proto=function(a){
                for(var b=[],c=0,d=a.floors;c<d.length;){var g=d[c];++c,b.push(sb.plan2proto(g))}
                a.basement!=null&&b.push(sb.plan2proto(a.basement));
                var c=new DataProto.data.DwellingsObj({floors:b,exit:sb.edge2proto(a.floors[0].entrance.door)});
                return a.floors[0].spiral!=null&&(c.spiral=sb.edge2proto(a.floors[0].spiral.entrance)),c
            };
            sb.plan2proto=function(a){
                var b=new DataProto.data.DwellingsPlanObj;
                b.level=a.getFloor();
                for(var c=[],d=0,g=a.rooms;d<g.length;){var f=g[d];++d,c.push(sb.room2proto(f))}
                b.rooms=c;
                for(c=[],d=0,g=a.getDoors();d<g.length;)f=g[d],++d,c.push(sb.door2proto(f));
                b.doors=c;
                for(c=[],d=0,g=a.windows;d<g.length;)f=g[d],++d,c.push(sb.edge2proto(f));
                b.windows=c;
                for(c=[],d=0,g=a.stairs;d<g.length;){var e=g[d];++d,c.push(sb.stair2proto(e))}
                b.stairs=c;
                return b
            };
            sb.room2proto=function(a){
                var b=new DataProto.data.DwellingsRoomObj,c=a.name;
                c==null&&a.type!=null&&(c=Qh.capitalize(a.type.name));
                c!=null&&c!=""&&(b.name=c);
                b.cells=sb.area2proto(a.area);
                return b
            };
            sb.door2proto=function(a){
                var b=new DataProto.data.DwellingsDoorObj;
                b.edge=sb.edge2proto(a.edge1);
                if(a.type!=null){
                    var c=a.type,d=N[c.__enum__].__constructs__[c._hx_index]._hx_name,e=DataProto.data.DwellingsDoorType[d];
                    e!==void 0&&(b.type=e)
                }
                return b
            };
            sb.stair2proto=function(a){
                var b=new DataProto.data.DwellingsStairObj,c=sb.dir2proto(a.dir);
                b.cell=sb.cell2proto(a.cell);
                c!==void 0&&(b.dir=c);
                b.up=a.isGoingUp();
                return b
            };
            sb.cell2proto=function(a){
                return new DataProto.data.DwellingsCellObj({i:a.i,j:a.j})
            };
            sb.edge2proto=function(a){
                var b=new DataProto.data.DwellingsEdgeObj,c=sb.dir2proto(a.dir.ccw);
                b.cell=sb.cell2proto(sb.grid.edge2cell(a));
                c!==void 0&&(b.dir=c);
                return b
            };
            sb.dir2proto=function(a){
                return a==qa.NORTH?DataProto.data.DwellingsDirectionType.n:a==qa.SOUTH?DataProto.data.DwellingsDirectionType.s:a==qa.EAST?DataProto.data.DwellingsDirectionType.e:a==qa.WEST?DataProto.data.DwellingsDirectionType.w:void 0
            };
            sb.area2proto=function(a){
                for(var b=[],c=0;c<a.length;){var d=a[c];++c,b.push(sb.cell2proto(d))}
                return b
            };
            sb.enum2json=function(a,b){
                var c=a[b];
                return c===void 0?b:c
            };
            sb.proto2json=function(a){
                for(var b={floors:[],exit:sb.edgeProto2json(a.exit)},c=0,d=a.floors;c<d.length;){var g=d[c];++c,b.floors.push(sb.planProto2json(g))}
                a.spiral!=null&&Object.prototype.hasOwnProperty.call(a,"spiral")&&(b.spiral=sb.edgeProto2json(a.spiral));
                return b
            };
            sb.planProto2json=function(a){
                for(var b={level:a.level,rooms:[],doors:[],windows:[],stairs:[]},c=0,d=a.rooms;c<d.length;){var g=d[c];++c,b.rooms.push(sb.roomProto2json(g))}
                for(c=0,d=a.doors;c<d.length;)g=d[c],++c,b.doors.push(sb.doorProto2json(g));
                for(c=0,d=a.windows;c<d.length;)g=d[c],++c,b.windows.push(sb.edgeProto2json(g));
                for(c=0,d=a.stairs;c<d.length;)g=d[c],++c,b.stairs.push(sb.stairProto2json(g));
                return b
            };
            sb.roomProto2json=function(a){
                var b={};
                a.name!=null&&Object.prototype.hasOwnProperty.call(a,"name")&&(b.name=a.name);
                for(var c=[],d=0,g=a.cells;d<g.length;){var f=g[d];++d,c.push(sb.cellProto2json(f))}
                b.cells=c;
                return b
            };
            sb.doorProto2json=function(a){
                var b={edge:sb.edgeProto2json(a.edge)};
                a.type!=null&&Object.prototype.hasOwnProperty.call(a,"type")&&(b.type=sb.enum2json(DataProto.data.DwellingsDoorType,a.type));
                return b
            };
            sb.stairProto2json=function(a){
                return{cell:sb.cellProto2json(a.cell),dir:sb.enum2json(DataProto.data.DwellingsDirectionType,a.dir),up:a.up}
            };
            sb.edgeProto2json=function(a){
                return{cell:sb.cellProto2json(a.cell),dir:sb.enum2json(DataProto.data.DwellingsDirectionType,a.dir)}
            };
            sb.cellProto2json=function(a){
                return{i:a.i,j:a.j}
            };
            sb.house2data=function(a){
                for(var b={},c=[],d=0,g=a.floors;d<g.length;){var f=g[d];++d,c.push(sb.plan2data(f))}
                return a.basement!=null&&c.push(sb.plan2data(a.basement)),b.floors=c,a=a.floors[0],b.exit=sb.edge2data(a.entrance.door),a.spiral!=null&&(b.spiral=sb.edge2data(a.spiral.entrance)),b
            };
            sb.plan2data=function(a){
                var b={};
                b.level=a.getFloor();
                for(var c=[],d=0,g=a.rooms;d<g.length;){var f=g[d];++d,c.push(sb.room2data(f))}
                for(b.rooms=c,c=[],d=0,g=a.getDoors();d<g.length;)f=g[d],++d,c.push(sb.door2data(f));
                for(b.doors=c,c=[],d=0,g=a.windows;d<g.length;)f=g[d],++d,c.push(sb.edge2data(f));
                for(b.windows=c,c=[],d=0,g=a.stairs;d<g.length;)a=g[d],++d,c.push(sb.stair2data(a));
                return b.stairs=c,b
            };
            sb.room2data=function(a){
                var b={},c=a.name;
                return c==null&&a.type!=null&&(c=Qh.capitalize(a.type.name)),c!=null&&c!=""&&(b.name=c),b.cells=sb.area2data(a.area),b
            };
            sb.door2data=function(a){
                var b={};
                b.edge=sb.edge2data(a.edge1);
                if(a.type!=null){
                    var c=a.type,d=N[c.__enum__].__constructs__[c._hx_index]._hx_name,e=DataProto.data.DwellingsDoorType[d];
                    e!==void 0?b.type=DataProto.data.DwellingsDoorType[e]:b.type=d
                }
                return b
            };
            sb.stair2data=function(a){
                return{cell:sb.cell2data(a.cell),dir:sb.dir2data(a.dir),up:a.isGoingUp()}
            };
            sb.cell2data=function(a){
                return{i:a.i,j:a.j}
            };
            sb.edge2data=function(a){
                return{cell:sb.cell2data(sb.grid.edge2cell(a)),dir:sb.dir2data(a.dir.ccw)}
            };
            sb.dir2data=function(a){
                return a==qa.NORTH?DataProto.data.DwellingsDirectionType[DataProto.data.DwellingsDirectionType.n]:a==qa.SOUTH?DataProto.data.DwellingsDirectionType[DataProto.data.DwellingsDirectionType.s]:a==qa.EAST?DataProto.data.DwellingsDirectionType[DataProto.data.DwellingsDirectionType.e]:a==qa.WEST?DataProto.data.DwellingsDirectionType[DataProto.data.DwellingsDirectionType.w]:null
            };
            sb.area2data=function(a){
                for(var b=[],c=0;c<a.length;){var d=a[c];++c,b.push(sb.cell2data(d))}
                return b
            };
            var Md = function () {
            };
            h["dwellings.model.Namer"] = Md;
            Md.__name__ = "dwellings.model.Namer";
            Md.grammar = null;
            Md.init = function () {
                if (null == Md.grammar) Me.rng = t.float, Md.grammar = new Bk(JSON.parse(Yb.getText("grammar"))), Md.grammar.addModifiers(Ra.get()), Md.grammar.defaultSelector = Rh;
                else {
                    var a = .3;
                    null == a && (a = .5);
                    (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 <
                    a ? Md.grammar.clearState() : Md.grammar.flags = []
                }
            };
            Md.get = function (a) {
                Md.init();
                for (var b = 0; b < a.length;) {
                    var c = a[b];
                    ++b;
                    var d = Md.grammar;
                    c = c.toUpperCase();
                    ca.addAll(d.flags, (new Ya(", +", "")).split(c))
                }
                return Md.grammar.flatten("#title.capitalizeAll#")
            };
            var Pb = function (a, b, c, d) {
                this.house = a;
                this.stairwell = d;
                this.grid = b;
                this.area = c;
                this.contour = b.outline(c);
                this.rooms = [];
                this.stairs = [];
                this.innerWalls = [];
                null != d ? (this.stairwell = {
                    stair: d.stair,
                    landing: d.landing,
                    exit: d.exit,
                    room: this.addRoom(b.outline([d.stair]))
                },
                    a = ca.difference(c, [d.stair]), this.divideArea(b.outline(a))) : this.divideArea(this.contour);
                this.mergeCorridors();
                this.connectRooms();
                this.windows = []
            };
            h["dwellings.model.Plan"] = Pb;
            Pb.__name__ = "dwellings.model.Plan";
            Pb.prototype = {
                isNarrow: function (a, b) {
                    var c = qa.NORTH,
                        d = -1 != a.indexOf(this.grid.cell(b.i + c.di, b.j + c.dj));
                    c = qa.SOUTH;
                    var g = -1 != a.indexOf(this.grid.cell(b.i + c.di, b.j + c.dj));
                    if (!d && !g) return !0;
                    c = qa.EAST;
                    var f = -1 != a.indexOf(this.grid.cell(b.i + c.di, b.j + c.dj));
                    c = qa.WEST;
                    var k = -1 != a.indexOf(this.grid.cell(b.i + c.di, b.j + c.dj));
                    if (!f && !k) return !0;
                    c = qa.NE;
                    if (-1 != a.indexOf(this.grid.cell(b.i + c.di, b.j + c.dj)) && d && f) return !1;
                    c = qa.NW;
                    if (-1 != a.indexOf(this.grid.cell(b.i + c.di, b.j + c.dj)) && d && k) return !1;
                    c = qa.SE;
                    if (-1 != a.indexOf(this.grid.cell(b.i + c.di, b.j + c.dj)) && g && f) return !1;
                    c = qa.SW;
                    return -1 != a.indexOf(this.grid.cell(b.i + c.di, b.j + c.dj)) && g && k ? !1 : !0
                },
                divideArea: function (a) {
                    var b = this,
                        c = this.grid.contour2area(a),
                        d = Math.pow(2, Pb.roomSizeChaos);
                    if (Pb.regularRooms ? vb.isRect(a) && c.length <
                        Pb.avgRoomSize * d : c.length <= Pb.avgRoomSize * Math.pow(d, ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3)) this.addRoom(a);
                    else if (d = this.getNotch(a), null == d) this.addRoom(a);
                    else {
                        c = d.dir;
                        for (d = [d]; null == vb.findEdge(a, d[d.length - 1].b);) d.push(this.grid.nodeNdir2edge(d[d.length - 1].b, c));
                        if (1 < d.length) {
                            var g = d.length / Pb.avgRoomSize;
                            null == g && (g = .5);
                            g = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < g
                        } else g = !1;
                        if (g) {
                            c =
                                ca.random([c.cw, c.ccw]);
                            var f = d.length / 2;
                            g = f - (f | 0);
                            null == g && (g = .5);
                            for (d = d.slice(0, (f | 0) + ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < g ? 1 : 0)); null == vb.findEdge(a, d[d.length - 1].b);) d.push(this.grid.nodeNdir2edge(d[d.length - 1].b, c))
                        }
                        this.innerWalls.push(d);
                        c = vb.slice(a, d[d.length - 1].b, d[0].a).concat(d);
                        d = vb.slice(a, d[0].a, d[d.length - 1].b).concat(this.grid.revertChain(d));
                        g = 1;
                        Pb.noNooks ? (g = function (a) {
                            var c = b.grid.contour2area(a);
                            return (ca.count(c, function (a) {
                                return !b.isNarrow(c, a)
                            }) + 1) / (c.length +
                                1)
                        }, g = Math.pow(g(c) * g(d), 2)) : (g = function (a) {
                            var c = b.grid.contour2area(a);
                            return c.length > Pb.avgRoomSize ? 1 : (ca.count(c, function (a) {
                                return b.isNarrow(c, a)
                            }) + 1) / (c.length + 1)
                        }, g = Math.pow(g(c) * g(d), 2));
                        null == g && (g = .5);
                        (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < g ? (this.divideArea(c), this.divideArea(d)) : this.divideArea(a)
                    }
                },
                getNotch: function (a) {
                    for (var b = this.grid.contour2area(a), c = [], d = [], g = a.length, f = 0; f < g;) {
                        var k = f++,
                            q = a[k];
                        k = a[(k + g - 1) % g];
                        if (q.dir == k.dir) this.isNarrow(b, this.grid.edge2cell(k)) && this.isNarrow(b,
                            this.grid.edge2cell(q)) || c.push(q);
                        else if (q.dir == k.dir.ccw) {
                            var l = this.grid.edge2cell(q),
                                h = this.grid.edge2cell(this.grid.nodeNdir2edge(q.a, q.dir.cw));
                            this.isNarrow(b, l) && this.isNarrow(b, h) || d.push(q);
                            l = this.grid.edge2cell(k);
                            this.isNarrow(b, h) && this.isNarrow(b, l) || d.push(this.grid.nodeNdir2edge(q.a, k.dir))
                        }
                    }
                    a = Pb.preferCorners ? 0 < d.length ? d : c : Pb.preferWalls ? 0 < c.length ? c : d : c.concat(d);
                    if (0 == a.length) return null;
                    q = ca.random(a);
                    return this.grid.nodeNdir2edge(q.a, q.dir.cw)
                },
                addRoom: function (a) {
                    a = new Ck(this,
                        a);
                    this.rooms.push(a);
                    return a
                },
                getRoom: function (a) {
                    for (var b = 0, c = this.rooms; b < c.length;) {
                        var d = c[b];
                        ++b;
                        if (-1 != d.area.indexOf(a)) return d
                    }
                    return null
                },
                edge2room: function (a) {
                    return this.getRoom(this.grid.edge2cell(a))
                },
                mergeCorridors: function () {
                    for (var a = [], b = 0, c = this.rooms; b < c.length;) {
                        var d = c[b];
                        ++b;
                        var g = [d];
                        if (ca.every(g[0].area, function (a) {
                            return function (b) {
                                return -1 != a[0].narrow.indexOf(b)
                            }
                        }(g))) {
                            var f = this.stairwell;
                            g = g[0] != (null != f ? f.room : null)
                        } else g = !1;
                        g && a.push(d)
                    }
                    d = a;
                    do
                        for (f = !1, a = 0, b =
                            d.length - 1; a < b;) {
                            c = a++;
                            g = d[c];
                            c += 1;
                            for (var k = d.length; c < k;) {
                                var q = c++;
                                q = d[q];
                                for (var l = 0, h = 0, Fa = g.contour; h < Fa.length;) {
                                    var n = Fa[h];
                                    ++h;
                                    if (-1 != q.contour.indexOf(this.grid.edges.h[n.b.__id__].h[n.a.__id__]) && (++l, 1 < l)) break
                                }
                                if (1 == l) {
                                    c = this.addRoom(this.grid.outline(g.area.concat(q.area)));
                                    d.push(c);
                                    M.remove(d, g);
                                    M.remove(d, q);
                                    M.remove(this.rooms, g);
                                    M.remove(this.rooms, q);
                                    f = !0;
                                    break
                                }
                            }
                            if (f) break
                        }
                    while (f)
                },
                connectRooms: function () {
                    for (var a = this, b = new Ba, c = 0, d = this.rooms; c < d.length;) {
                        var g = d[c];
                        ++c;
                        for (var f =
                            new Ba, k = 0, q = this.rooms; k < q.length;) {
                            var l = q[k];
                            ++k;
                            f.set(l, [])
                        }
                        b.set(g, f)
                    }
                    var h = b;
                    q = function (b, c, d) {
                        ca.add(h.h[b.__id__].h[c.__id__], d);
                        ca.add(h.h[c.__id__].h[b.__id__], a.grid.edges.h[d.b.__id__].h[d.a.__id__])
                    };
                    b = 0;
                    for (c = this.rooms; b < c.length;)
                        for (g = c[b], ++b, d = 0, f = g.contour; d < f.length;) {
                            var Fa = f[d];
                            ++d;
                            var n = this.grid.edges.h[Fa.b.__id__].h[Fa.a.__id__];
                            if (null != n) {
                                var r = this.grid.edge2cell(n);
                                l = this.getRoom(r);
                                null != l && q(g, l, Fa)
                            }
                        }
                    if (null != this.stairwell) {
                        f = this.stairwell.room;
                        r = this.getRoom(this.stairwell.landing);
                        b = 0;
                        for (c = this.rooms; b < c.length;) g = c[b], ++b, h.h[g.__id__].set(f, []), h.h[f.__id__].set(g, []);
                        q(f, r, this.grid.cellNdir2edge(this.stairwell.stair, this.stairwell.exit))
                    }
                    var p = [];
                    q = function (b, c) {
                        for (var d = 1, f = 0, g = qa.CARDINAL; f < g.length;) {
                            var k = g[f];
                            ++f;
                            k = a.grid.cell(b.i + k.di, b.j + k.dj);
                            -
                                1 != c.area.indexOf(k) && ++d
                        }
                        -
                            1 != p.indexOf(b) && (d *= 2);
                        return d
                    };
                    r = [];
                    b = 0;
                    for (c = this.rooms; b < c.length;) {
                        g = c[b];
                        ++b;
                        r.push(g);
                        d = [];
                        f = Fa = h.h[g.__id__];
                        for (Fa = Fa.keys(); Fa.hasNext();) l = Fa.next(), k = f.get(l), 0 < k.length && -1 == r.indexOf(l) &&
                        d.push({
                            another: l,
                            edges: k
                        });
                        d.sort(function (a, b) {
                            a = a.edges.length - b.edges.length;
                            return 0 == a ? 0 : 0 > a ? -1 : 1
                        });
                        for (f = 0; f < d.length;) {
                            Fa = d[f];
                            ++f;
                            l = Fa.another;
                            var t = Fa.edges,
                                y = [],
                                u = Infinity;
                            for (k = 0; k < t.length;) {
                                Fa = t[k];
                                ++k;
                                n = this.grid.edges.h[Fa.b.__id__].h[Fa.a.__id__];
                                var x = q(this.grid.edge2cell(Fa), g);
                                n = q(this.grid.edge2cell(n), l);
                                n = x + n;
                                n == u ? y.push(Fa) : n < u && (u = n, y = [Fa])
                            }
                            0 < y.length && (Fa = ca.random(y), g.link(l, Fa), ca.add(p, this.grid.edge2cell(Fa)), ca.add(p, this.grid.edge2cell(this.grid.edges.h[Fa.b.__id__].h[Fa.a.__id__])))
                        }
                    }
                    c =
                        this.wallDoors();
                    for (b = 0; b < c.length;) r = c[b], ++b, r.room1.unlink(r.room2);
                    this.graph = new Dk;
                    b = 0;
                    for (c = this.rooms; b < c.length;) g = c[b], ++b, this.graph.add(new Ek(g));
                    b = 0;
                    for (c = this.rooms; b < c.length;)
                        for (g = c[b], ++b, q = this.graph.findNode(g), d = 0, f = g.getDoors(); d < f.length;) r = f[d], ++d, l = g == r.room1 ? r.room2 : g == r.room2 ? r.room1 : null, r = this.graph.findNode(l), q.link(r)
                },
                wallDoors: function () {
                    var a = [];
                    if (0 > Pb.connectivity) return a;
                    for (var b = 0, c = this.rooms; b < c.length;) {
                        var d = c[b];
                        ++b;
                        for (var g = d.doors, f = g, k = g.keys(); k.hasNext();) {
                            var q =
                                k.next();
                            g = f.get(q);
                            var l = q,
                                h = g.getPrice(),
                                Fa = !0;
                            q = 0;
                            for (var n = this.rooms; q < n.length;) {
                                var r = n[q];
                                ++q;
                                if (null != d.doors.h.__keys__[r.__id__] && null != r.doors.h.__keys__[l.__id__]) {
                                    var p = d.doors.h[r.__id__].getPrice();
                                    r = r.doors.h[l.__id__].getPrice();
                                    if (p < h && r < h) {
                                        Fa = !1;
                                        break
                                    }
                                }
                            }
                            Fa || a.push(g)
                        }
                    }
                    d = [];
                    b = 0;
                    for (c = this.rooms; b < c.length;)
                        for (g = c[b], ++b, q = 0, n = this.rooms; q < n.length;) f = n[q], ++q, f = g.doors.h[f.__id__], null != f && ca.add(d, f);
                    ca.removeAll(d, a);
                    q = this.rooms.slice();
                    for (n = [ca.pick(q)]; 0 < q.length;) {
                        k = [];
                        for (b = 0; b < n.length;)
                            for (g = n[b], ++b, c = 0; c < q.length;) f = q[c], ++c, null != g.doors.h.__keys__[f.__id__] && ca.add(k, g.doors.h[f.__id__]);
                        ca.removeAll(k, a);
                        g = ca.min(k, function (a) {
                            return a.getPrice()
                        });
                        b = -1 != q.indexOf(g.room1) ? g.room1 : g.room2;
                        M.remove(d, g);
                        M.remove(q, b);
                        ca.add(n, b)
                    }
                    ca.addAll(a, ca.subset(d, Math.round(d.length * (1 - Pb.connectivity))));
                    return a
                },
                spawnWindowsExcluding: function (a) {
                    if (-1 == this.house.bp.tags.indexOf("blank")) {
                        for (var b = this.contour.slice(), c = 0; c < a.length;) {
                            var d = a[c];
                            ++c;
                            -
                                1 != this.rooms.indexOf(d) &&
                            ca.removeAll(b, d.contour)
                        }
                        c = -1 != this.house.bp.tags.indexOf("transparent") ? 1 : Pb.windowDensity;
                        b = b.length * c;
                        var g = this.contour.length,
                            f = vb.findCorner(this.contour),
                            k = [],
                            q = null,
                            l = null,
                            h = null;
                        c = 0;
                        for (var Fa = g; c < Fa;) {
                            var n = c++;
                            n = this.contour[(f + n) % g];
                            d = this.entrance;
                            n != (null != d ? d.door : null) ? (d = this.spiral, d = n == (null != d ? d.entrance : null)) : d = !0;
                            d ? d = !0 : (d = this.spiral, d = n == (null != d ? d.exit : null));
                            d || (d = this.getRoom(this.grid.edge2cell(n)), -1 != a.indexOf(d) ? q = null : null == q || d != h || n.dir != l ? (q = [n], k.push(q), h = d,
                                l = n.dir) : q.push(n))
                        }
                        for (a = []; 0 < k.length && a.length < b;) {
                            c = [];
                            for (Fa = 0; Fa < k.length;) q = k[Fa], ++Fa, c.push(Math.pow(q.length, 2));
                            q = ca.weighted(k, c);
                            M.remove(k, q);
                            for (c = 0; c < q.length;) n = q[c], ++c, a.push(n)
                        }
                        b = this.windows;
                        for (c = 0; c < a.length;) n = a[c], ++c, b.push(n)
                    }
                },
                findSpiral: function () {
                    return this.getRoom(this.spiral.landing)
                },
                findStairs: function (a) {
                    for (var b = 0, c = this.stairs; b < c.length;) {
                        var d = c[b];
                        ++b;
                        if (d.isGoingUp() == a) return this.getRoom(d.cell)
                    }
                    return null
                },
                getFloor: function () {
                    return null == this.house ?
                        0 : this.house.floors.indexOf(this)
                },
                isGroundFloor: function () {
                    return 0 == this.getFloor()
                },
                isTopFloor: function () {
                    return this.getFloor() == this.house.floors.length - 1
                },
                getDoors: function () {
                    for (var a = [], b = 0, c = this.rooms; b < c.length;) {
                        var d = c[b];
                        ++b;
                        for (d = d.doors.iterator(); d.hasNext();) {
                            var g = d.next();
                            ca.add(a, g)
                        }
                    }
                    return a
                },
                findStart: function () {
                    var a = this.getFloor();
                    return 0 == a ? this.getRoom(this.entrance.landing) : null != this.spiral ? this.findSpiral() : -1 == a ? this.findStairs(!0) : this.findStairs(!1)
                },
                sortRooms: function () {
                    var a =
                        this.findStart();
                    a = [null != a ? a : this.rooms[0]];
                    for (var b = ca.difference(this.rooms, a), c = 0; 0 <= c;) {
                        var d = !1,
                            g = a[c].doors,
                            f = g;
                        for (g = g.keys(); g.hasNext();) {
                            var k = g.next();
                            f.get(k);
                            if (-1 != b.indexOf(k)) {
                                M.remove(b, k);
                                a.push(k);
                                d = !0;
                                break
                            }
                        }
                        d ? c = a.length - 1 : --c
                    }
                    return a
                },
                __class__: Pb
            };
            var Ck = function (a, b, c) {
                null == c && (c = !1);
                this.plan = a;
                this.contour = b;
                this.area = a.grid.contour2area(b);
                this.doors = new Ba;
                if (c) a = this.area;
                else {
                    b = [];
                    c = 0;
                    for (var d = this.area; c < d.length;) {
                        var g = d[c];
                        ++c;
                        a.isNarrow(this.area, g) && b.push(g)
                    }
                    a =
                        b
                }
                this.narrow = a;
                this.props = new Fk(this)
            };
            h["dwellings.model.Room"] = Ck;
            Ck.__name__ = "dwellings.model.Room";
            Ck.prototype = {
                link: function (a, b) {
                    b = new zk(this, a, b);
                    this.doors.set(a, b);
                    a.doors.set(this, b)
                },
                unlink: function (a) {
                    this.doors.remove(a);
                    a.doors.remove(this)
                },
                getDoor: function (a) {
                    for (var b = this.doors.iterator(); b.hasNext();) {
                        var c = b.next();
                        if ((this == c.room1 ? c.edge1 : this == c.room2 ? c.edge2 : null) == a) return c
                    }
                    return null
                },
                getDoors: function () {
                    for (var a = [], b = this.doors.iterator(); b.hasNext();) {
                        var c =
                            b.next();
                        a.push(c)
                    }
                    return a
                },
                countDoors: function (a) {
                    null == a && (a = !0);
                    for (var b = 0, c = this.doors.iterator(); c.hasNext();) {
                        var d = c.next();
                        (a || (this == d.room1 ? d.room2 : this == d.room2 ? d.room1 : null).type != Z.bathroom) && ++b
                    }
                    a = this.plan.entrance;
                    -
                        1 != this.contour.indexOf(null != a ? a.door : null) && ++b;
                    b += this.getStairs().length;
                    this.hasSpiral() && ++b;
                    return b
                },
                getStairs: function () {
                    for (var a = [], b = 0, c = this.plan.stairs; b < c.length;) {
                        var d = c[b];
                        ++b;
                        -
                            1 != this.area.indexOf(d.cell) && a.push(d)
                    }
                    return a
                },
                hasExit: function () {
                    var a =
                        this.plan.entrance;
                    return -1 != this.contour.indexOf(null != a ? a.door : null)
                },
                hasSpiral: function () {
                    var a = this.plan.spiral;
                    return -1 != this.area.indexOf(null != a ? a.landing : null)
                },
                get_size: function () {
                    return this.area.length - this.getStairs().length
                },
                spawnWindows: function (a) {
                    for (var b = this.contour.length, c = vb.findCorner(this.contour), d = [], g = null, f = null, k = 0; k < b;) {
                        var q = k++;
                        q = this.contour[(c + q) % b];
                        var l = this.plan.entrance;
                        q != (null != l ? l.door : null) ? (l = this.plan.spiral, l = q == (null != l ? l.entrance : null)) : l = !0;
                        l ? l = !0 : (l =
                            this.plan.spiral, l = q == (null != l ? l.exit : null));
                        l || (-1 == this.plan.contour.indexOf(q) ? g = null : null == g || q.dir != f ? (g = [q], d.push(g), f = q.dir) : g.push(q))
                    }
                    for (b = []; 0 < d.length && b.length < a;)
                        for (c = ca.pick(d), k = 0; k < c.length;) q = c[k], ++k, b.push(q);
                    a = this.plan.windows;
                    for (k = 0; k < b.length;) q = b[k], ++k, a.push(q)
                },
                reset: function () {
                    this.type = null;
                    this.props.clear()
                },
                fill: function () {
                    null != this.type && null != this.type.fill ? (this.type.fill(this), this.props.update()) : (this.clutter = new Hd(this), this.clutter.fill());
                    null == this.light &&
                    this.defaultLight()
                },
                defaultLight: function (a) {
                    null == a && (a = !0);
                    this.light = -1 == this.plan.getFloor() || this.narrow.length == this.area.length && 1 < this.countDoors() ? Dc.onTheWall(this) : Dc.inTheCentre(this);
                    this.light.on = a
                },
                get_poly: function () {
                    null == this._poly && (this._poly = vb.toGoodPoly(this.contour));
                    return this._poly
                },
                __class__: Ck,
                __properties__: {
                    get_poly: "get_poly",
                    get_size: "get_size"
                }
            };
            var Pl = function () {
            };
            h["dwellings.model.rooms.Armoury"] = Pl;
            Pl.__name__ = "dwellings.model.rooms.Armoury";
            Pl.proto = function () {
                var a = new Z("armoury", Z.checkBasic(4, 9, .5, 1));
                a.windows = Z.winFixed(0);
                return a
            };
            var Sh = function () {
            };
            h["dwellings.model.rooms.Attic"] = Sh;
            Sh.__name__ = "dwellings.model.rooms.Attic";
            Sh.proto = function () {
                return new Z("attic", Sh.validate)
            };
            Sh.validate = function (a) {
                return Z.topFloor(a) && Z.singular(a) ? !0 : !1
            };
            var Th = function () {
            };
            h["dwellings.model.rooms.Bathroom"] = Th;
            Th.__name__ = "dwellings.model.rooms.Bathroom";
            Th.proto = function () {
                var a = new Z("bathroom",
                    Th.validate);
                a.short = "BTH";
                a.windows = Z.winFixed(1);
                a.doors = Z.doorsFixed(ad.REGULAR);
                a.fill = function (a) {
                    a.clutter = new Hd(a);
                    var b = a.getDoors()[0];
                    b = b.plan.grid.edge2cell(a == b.room1 ? b.edge1 : a == b.room2 ? b.edge2 : null);
                    var d = new F(b.j + .5, b.i + .5);
                    b = ca.max(a.area, function (a) {
                        return F.distance(new F(a.j + .5, a.i + .5), d)
                    });
                    a.clutter.spawn(b, .3, 1, 2, .5, 0, .6)
                };
                return a
            };
            Th.validate = function (a) {
                return 4 < a.get_size() || 1 < a.countDoors() || a.hasExit() || Z.underground(a) || 1 == a.plan.rooms.length ? !1 : !0
            };
            var F = function (a, b) {
                null ==
                b && (b = 0);
                null == a && (a = 0);
                this.x = a;
                this.y = b
            };
            h["openfl.geom.Point"] = F;
            F.__name__ = "openfl.geom.Point";
            F.__limeVector2 = null;
            F.distance = function (a, b) {
                var c = a.x - b.x;
                a = a.y - b.y;
                return Math.sqrt(c * c + a * a)
            };
            F.polar = function (a, b) {
                return new F(a * Math.cos(b), a * Math.sin(b))
            };
            F.prototype = {
                add: function (a) {
                    return new F(a.x + this.x, a.y + this.y)
                },
                clone: function () {
                    return new F(this.x, this.y)
                },
                copyFrom: function (a) {
                    this.x = a.x;
                    this.y = a.y
                },
                normalize: function (a) {
                    if (0 != this.x || 0 != this.y) a /= Math.sqrt(this.x * this.x + this.y * this.y),
                        this.x *= a, this.y *= a
                },
                setTo: function (a, b) {
                    this.x = a;
                    this.y = b
                },
                subtract: function (a) {
                    return new F(this.x - a.x, this.y - a.y)
                },
                __toLimeVector2: function () {
                    null == F.__limeVector2 && (F.__limeVector2 = new lg);
                    var a = F.__limeVector2;
                    a.x = this.x;
                    a.y = this.y;
                    return F.__limeVector2
                },
                get_length: function () {
                    return Math.sqrt(this.x * this.x + this.y * this.y)
                },
                __class__: F,
                __properties__: {
                    get_length: "get_length"
                }
            };
            var t = function () {
            };
            h["utils.Random"] = t;
            t.__name__ = "utils.Random";
            t.reset = function (a) {
                null == a &&
                (a = -1);
                t.seed = -1 != a ? a : (new Date).getTime() % 2147483647 | 0
            };
            t.float = function () {
                return (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647
            };
            var ca = function () {
            };
            h["utils.ArrayExtender"] = ca;
            ca.__name__ = "utils.ArrayExtender";
            ca.revert = function (a) {
                a = a.slice();
                a.reverse();
                return a
            };
            ca.shuffle = function (a) {
                for (var b = [], c = 0; c < a.length;) {
                    var d = a[c];
                    ++c;
                    var g = ca.rnd();
                    b.splice(g * (b.length + 1) | 0, 0, d)
                }
                return b
            };
            ca.random = function (a) {
                return a[ca.rnd() * a.length | 0]
            };
            ca.pick = function (a) {
                var b = ca.rnd() *
                        a.length | 0,
                    c = a[b];
                a.splice(b, 1);
                return c
            };
            ca.subset = function (a, b) {
                return ca.shuffle(a).slice(0, b)
            };
            ca.weighted = function (a, b) {
                for (var c = ca.rnd() * ca.sum(b), d = 0, g = 0, f = a.length; g < f;) {
                    var k = g++;
                    if (c <= (d += b[k])) return a[k]
                }
                return a[0]
            };
            ca.isEmpty = function (a) {
                return 0 == a.length
            };
            ca.min = function (a, b) {
                for (var c = a[0], d = b(c), g = 1, f = a.length; g < f;) {
                    var k = g++;
                    k = a[k];
                    var q = b(k);
                    q < d && (c = k, d = q)
                }
                return c
            };
            ca.max = function (a, b) {
                for (var c = a[0], d = b(c), g = 1, f = a.length; g < f;) {
                    var k = g++;
                    k = a[k];
                    var q = b(k);
                    q > d && (c = k, d = q)
                }
                return c
            };
            ca.every = function (a, b) {
                for (var c = 0; c < a.length;) {
                    var d = a[c];
                    ++c;
                    if (!b(d)) return !1
                }
                return !0
            };
            ca.some = function (a, b) {
                for (var c = 0; c < a.length;) {
                    var d = a[c];
                    ++c;
                    if (b(d)) return !0
                }
                return !1
            };
            ca.count = function (a, b) {
                for (var c = 0, d = 0; d < a.length;) {
                    var g = a[d];
                    ++d;
                    b(g) && ++c
                }
                return c
            };
            ca.find = function (a, b) {
                for (var c = 0; c < a.length;) {
                    var d = a[c];
                    ++c;
                    if (b(d)) return d
                }
                return null
            };
            ca.sum = function (a) {
                for (var b = 0, c = 0; c < a.length;) {
                    var d = a[c];
                    ++c;
                    b += d
                }
                return b
            };
            ca.add = function (a, b) {
                return -1 == a.indexOf(b) ? (a.push(b), !0) : !1
            };
            ca.intersect =
                function (a, b) {
                    for (var c = [], d = 0; d < a.length;) {
                        var g = a[d];
                        ++d;
                        -
                            1 != b.indexOf(g) && c.push(g)
                    }
                    return c
                };
            ca.addAll = function (a, b) {
                for (var c = 0; c < b.length;) {
                    var d = b[c];
                    ++c;
                    -
                        1 == a.indexOf(d) && a.push(d)
                }
            };
            ca.removeAll = function (a, b) {
                for (var c = 0; c < b.length;) {
                    var d = b[c];
                    ++c;
                    M.remove(a, d)
                }
            };
            ca.difference = function (a, b) {
                for (var c = [], d = 0; d < a.length;) {
                    var g = a[d];
                    ++d;
                    -
                        1 == b.indexOf(g) && c.push(g)
                }
                return c
            };
            ca.intersects = function (a, b) {
                for (var c = 0; c < a.length;) {
                    var d = a[c];
                    ++c;
                    if (-1 != b.indexOf(d)) return !0
                }
                return !1
            };
            ca.keys2array =
                function (a) {
                    var b = [];
                    for (a = a.keyValueIterator(); a.hasNext();) {
                        var c = a.next();
                        b.push(c.key)
                    }
                    return b
                };
            var Uh = function () {
            };
            h["dwellings.model.rooms.Bedroom"] = Uh;
            Uh.__name__ = "dwellings.model.rooms.Bedroom";
            Uh.proto = function () {
                var a = new Z("bedroom", Uh.validate);
                a.windows = Z.winRatio(.25);
                a.doors = Z.doorsFixed(ad.REGULAR);
                a.fill = function (a) {
                    a.clutter = new Hd(a);
                    a.clutter.fill(.5, 1, 1, .8, 1, .9, .3)
                };
                return a
            };
            Uh.validate = function (a) {
                return !Z.aboveGround(a) || 4 > a.get_size() || 8 < a.get_size() ||
                .5 < a.narrow.length / a.get_size() || 1 < a.countDoors(!1) ? !1 : !0
            };
            var Vh = function () {
            };
            h["dwellings.model.rooms.Cellar"] = Vh;
            Vh.__name__ = "dwellings.model.rooms.Cellar";
            Vh.proto = function () {
                var a = new Z("cellar", Vh.validate);
                a.fill = function (a) {
                    a.clutter = new Hd(a);
                    a.clutter.fill(.2 + .1 * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647), .5, 1, .2, 0, .1, 10)
                };
                return a
            };
            Vh.validate = function (a) {
                return 5 > a.get_size() || a.narrow.length == a.get_size() || -1 < a.plan.getFloor() ? !1 : !0
            };
            var Wh = function () {
            };
            h["dwellings.model.rooms.Chapel"] =
                Wh;
            Wh.__name__ = "dwellings.model.rooms.Chapel";
            Wh.proto = function () {
                var a = new Z("chapel", Z.checkBasic(4, 6, .2, 1));
                a.doors = Z.doorsFixed(ad.REGULAR);
                a.fill = Wh.populate;
                return a
            };
            Wh.populate = function (a) {
                for (var b = [], c = a.doors.iterator(); c.hasNext();) {
                    var d = c.next();
                    b.push((a == d.room1 ? d.edge1 : a == d.room2 ? d.edge2 : null).point())
                }
                var g = b,
                    f = vb.longEdges(a.contour);
                d = null;
                var k = 0;
                for (b = 0; b < f.length;) {
                    var q = f[b];
                    ++b;
                    for (var l = q.point(), h = 0, n = 0; n < g.length;) c = g[n], ++n, h += F.distance(c, l);
                    k < h && (k = h, d = q)
                }
                null !=
                d ? (b = new Xh(d), a.props.add(b), a.light = Dc.edge(a, d)) : Ub.trace("No place for an altar?", {

                    className: "dwellings.model.rooms.Chapel",
                    methodName: "populate"
                })
            };
            var vb = function () {
            };
            h["dwellings.utils.ChainUtils"] = vb;
            vb.__name__ = "dwellings.utils.ChainUtils";
            vb.findEdge = function (a, b) {
                for (var c = 0; c < a.length;) {
                    var d = a[c];
                    ++c;
                    if (d.a == b) return d
                }
                return null
            };
            vb.toPoly = function (a, b) {
                null == b && (b = !0);
                for (var c = [], d = 0; d < a.length;) {
                    var g = a[d];
                    ++d;
                    g = g.a;
                    c.push(new F(g.j, g.i))
                }
                b || (g = a[a.length - 1].b, c.push(new F(g.j, g.i)));
                return c
            };
            vb.toGoodPoly = function (a) {
                return vb.toPoly(vb.longEdges(a))
            };
            vb.slice = function (a, b, c) {
                b = a.indexOf(vb.findEdge(a, b));
                c = a.indexOf(vb.findEdge(a, c));
                return b < c ? a.slice(b, c) : a.slice(b).concat(a.slice(0, c))
            };
            vb.next = function (a, b) {
                return a[(a.indexOf(b) + 1) % a.length]
            };
            vb.prev = function (a, b) {
                return a[(a.indexOf(b) + a.length - 1) % a.length]
            };
            vb.findCorner = function (a, b) {
                null == b && (b = 0);
                for (var c =
                    a.length; a[b].dir == a[(b + c - 1) % c].dir;) ++b;
                return b
            };
            vb.longEdges = function (a) {
                for (var b = a.length, c = [], d = 0; a[d].dir == a[(d + b - 1) % b].dir;) ++d;
                do {
                    for (var g = 1; a[d].dir == a[(d + g) % b].dir;) ++g;
                    c.push(new If(a[d].a, a[(d + g) % b].a, a[d].dir));
                    d = (d + g) % b
                } while (c[c.length - 1].b != c[0].a);
                return c
            };
            vb.isRect = function (a) {
                return 4 == vb.longEdges(a).length
            };
            vb.fill = function (a, b) {
                for (var c = [], d = 0; d < b.length;) {
                    var g = b[d];
                    ++d;
                    ca.add(c, a.edge2cell(g))
                }
                for (var f = c.slice(); 0 < c.length;) {
                    var k = [];
                    for (d = 0; d < c.length;) {
                        var q = c[d];
                        ++d;
                        for (var l = 0, h = qa.CARDINAL; l < h.length;) g = h[l], ++l, g = a.cellNdir2edge(q, g), -1 == b.indexOf(g) && (g = a.edge2cell(a.edges.h[g.b.__id__].h[g.a.__id__]), -1 == f.indexOf(g) && ca.add(k, g))
                    }
                    c = k;
                    for (d = 0; d < c.length;) k = c[d], ++d, f.push(k)
                }
                return f
            };
            var If = function (a, b, c) {
                this.a = a;
                this.b = b;
                this.dir = c
            };
            h["dwellings.utils.Edge"] = If;
            If.__name__ = "dwellings.utils.Edge";
            If.prototype = {
                point: function (a) {
                    null == a && (a = .5);
                    return new F(this.a.j + (this.b.j - this.a.j) * a, this.a.i + (this.b.i - this.a.i) * a)
                },
                __class__: If
            };
            var ge = function () {
                X.call(this)
            };
            h["dwellings.model.props.Prop"] = ge;
            ge.__name__ = "dwellings.model.props.Prop";
            ge.__super__ = X;
            ge.prototype = w(X.prototype, {
                update: function () {
                },
                __class__: ge
            });
            var Xh = function (a) {
                X.call(this);
                this.wall = a
            };
            h["dwellings.model.props.Altar"] = Xh;
            Xh.__name__ = "dwellings.model.props.Altar";
            Xh.__super__ = ge;
            Xh.prototype = w(ge.prototype, {
                update: function () {
                    var a = this.get_graphics();
                    a.clear();
                    a.lineStyle(J.strokeNormal, J.colorInk);
                    a.beginFill(J.colorProps);
                    a.drawRect(0, -.2, .2, .4);
                    a.endFill();
                    a.beginFill(J.colorInk);
                    a.drawCircle(.1, -.1, J.strokeNormal);
                    a.drawCircle(.1, .1, J.strokeNormal);
                    a = this.wall.dir.cw;
                    a = new F(a.dj, a.di);
                    var b = this.wall.point(),
                        c = hb.proto.innerTh / 2;
                    b = new F(b.x + a.x * c, b.y + a.y * c);
                    this.set_x(b.x);
                    this.set_y(b.y);
                    this.set_rotation(Math.atan2(a.y, a.x) / Math.PI * 180)
                },
                __class__: Xh
            });
            var va = function (a, b, c, d, g, f) {
                null == f && (f = 0);
                null == g && (g = 0);
                null == d && (d = 1);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 1);
                this.a = a;
                this.b = b;
                this.c = c;
                this.d = d;
                this.tx =
                    g;
                this.ty = f
            };
            h["openfl.geom.Matrix"] = va;
            va.__name__ = "openfl.geom.Matrix";
            va.prototype = {
                clone: function () {
                    return new va(this.a, this.b, this.c, this.d, this.tx, this.ty)
                },
                concat: function (a) {
                    var b = this.a * a.a + this.b * a.c;
                    this.b = this.a * a.b + this.b * a.d;
                    this.a = b;
                    b = this.c * a.a + this.d * a.c;
                    this.d = this.c * a.b + this.d * a.d;
                    this.c = b;
                    b = this.tx * a.a + this.ty * a.c + a.tx;
                    this.ty = this.tx * a.b + this.ty * a.d + a.ty;
                    this.tx = b
                },
                copyFrom: function (a) {
                    this.a = a.a;
                    this.b = a.b;
                    this.c = a.c;
                    this.d = a.d;
                    this.tx = a.tx;
                    this.ty = a.ty
                },
                createGradientBox: function (a,
                                             b, c, d, g) {
                    null == g && (g = 0);
                    null == d && (d = 0);
                    null == c && (c = 0);
                    this.a = a / 1638.4;
                    this.d = b / 1638.4;
                    if (0 != c) {
                        var f = Math.cos(c);
                        c = Math.sin(c);
                        this.b = c * this.d;
                        this.c = -c * this.a;
                        this.a *= f;
                        this.d *= f
                    } else this.c = this.b = 0;
                    this.tx = d + a / 2;
                    this.ty = g + b / 2
                },
                equals: function (a) {
                    return null != a && this.tx == a.tx && this.ty == a.ty && this.a == a.a && this.b == a.b && this.c == a.c ? this.d == a.d : !1
                },
                identity: function () {
                    this.a = 1;
                    this.c = this.b = 0;
                    this.d = 1;
                    this.ty = this.tx = 0
                },
                invert: function () {
                    var a = this.a * this.d - this.b * this.c;
                    if (0 == a) this.a = this.b = this.c =
                        this.d = 0, this.tx = -this.tx, this.ty = -this.ty;
                    else {
                        a = 1 / a;
                        var b = this.d * a;
                        this.d = this.a * a;
                        this.a = b;
                        this.b *= -a;
                        this.c *= -a;
                        a = -this.a * this.tx - this.c * this.ty;
                        this.ty = -this.b * this.tx - this.d * this.ty;
                        this.tx = a
                    }
                    return this
                },
                scale: function (a, b) {
                    this.a *= a;
                    this.b *= b;
                    this.c *= a;
                    this.d *= b;
                    this.tx *= a;
                    this.ty *= b
                },
                setTo: function (a, b, c, d, g, f) {
                    this.a = a;
                    this.b = b;
                    this.c = c;
                    this.d = d;
                    this.tx = g;
                    this.ty = f
                },
                transformPoint: function (a) {
                    return new F(a.x * this.a + a.y * this.c + this.tx, a.x * this.b + a.y * this.d + this.ty)
                },
                translate: function (a,
                                     b) {
                    this.tx += a;
                    this.ty += b
                },
                __class__: va
            };
            var Lb = function (a, b, c, d, g, f, k, q) {
                null == q && (q = 0);
                null == k && (k = 0);
                null == f && (f = 0);
                null == g && (g = 0);
                null == d && (d = 1);
                null == c && (c = 1);
                null == b && (b = 1);
                null == a && (a = 1);
                this.redMultiplier = a;
                this.greenMultiplier = b;
                this.blueMultiplier = c;
                this.alphaMultiplier = d;
                this.redOffset = g;
                this.greenOffset = f;
                this.blueOffset = k;
                this.alphaOffset = q
            };
            h["openfl.geom.ColorTransform"] = Lb;
            Lb.__name__ = "openfl.geom.ColorTransform";
            Lb.__limeColorMatrix = null;
            Lb.prototype = {
                __clone: function () {
                    return new Lb(this.redMultiplier,
                        this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier, this.redOffset, this.greenOffset, this.blueOffset, this.alphaOffset)
                },
                __copyFrom: function (a) {
                    this.redMultiplier = a.redMultiplier;
                    this.greenMultiplier = a.greenMultiplier;
                    this.blueMultiplier = a.blueMultiplier;
                    this.alphaMultiplier = a.alphaMultiplier;
                    this.redOffset = a.redOffset;
                    this.greenOffset = a.greenOffset;
                    this.blueOffset = a.blueOffset;
                    this.alphaOffset = a.alphaOffset
                },
                __combine: function (a) {
                    this.redMultiplier *= a.redMultiplier;
                    this.greenMultiplier *=
                        a.greenMultiplier;
                    this.blueMultiplier *= a.blueMultiplier;
                    this.alphaMultiplier *= a.alphaMultiplier;
                    this.redOffset += a.redOffset;
                    this.greenOffset += a.greenOffset;
                    this.blueOffset += a.blueOffset;
                    this.alphaOffset += a.alphaOffset
                },
                __identity: function () {
                    this.alphaMultiplier = this.blueMultiplier = this.greenMultiplier = this.redMultiplier = 1;
                    this.alphaOffset = this.blueOffset = this.greenOffset = this.redOffset = 0
                },
                __invert: function () {
                    this.redMultiplier = 0 != this.redMultiplier ? 1 / this.redMultiplier : 1;
                    this.greenMultiplier = 0 != this.greenMultiplier ?
                        1 / this.greenMultiplier : 1;
                    this.blueMultiplier = 0 != this.blueMultiplier ? 1 / this.blueMultiplier : 1;
                    this.alphaMultiplier = 0 != this.alphaMultiplier ? 1 / this.alphaMultiplier : 1;
                    this.redOffset = -this.redOffset;
                    this.greenOffset = -this.greenOffset;
                    this.blueOffset = -this.blueOffset;
                    this.alphaOffset = -this.alphaOffset
                },
                __equals: function (a, b) {
                    return null == a || this.redMultiplier != a.redMultiplier || this.greenMultiplier != a.greenMultiplier || this.blueMultiplier != a.blueMultiplier || !b && this.alphaMultiplier != a.alphaMultiplier || this.redOffset !=
                    a.redOffset || this.greenOffset != a.greenOffset || this.blueOffset != a.blueOffset ? !1 : this.alphaOffset == a.alphaOffset
                },
                __isDefault: function (a) {
                    return a ? 1 == this.redMultiplier && 1 == this.greenMultiplier && 1 == this.blueMultiplier && 0 == this.redOffset && 0 == this.greenOffset && 0 == this.blueOffset ? 0 == this.alphaOffset : !1 : 1 == this.redMultiplier && 1 == this.greenMultiplier && 1 == this.blueMultiplier && 1 == this.alphaMultiplier && 0 == this.redOffset && 0 == this.greenOffset && 0 == this.blueOffset ? 0 == this.alphaOffset : !1
                },
                __setArrays: function (a,
                                       b) {
                    a[0] = this.redMultiplier;
                    a[1] = this.greenMultiplier;
                    a[2] = this.blueMultiplier;
                    a[3] = this.alphaMultiplier;
                    b[0] = this.redOffset;
                    b[1] = this.greenOffset;
                    b[2] = this.blueOffset;
                    b[3] = this.alphaOffset
                },
                __toLimeColorMatrix: function () {
                    null == Lb.__limeColorMatrix && (Lb.__limeColorMatrix = new Float32Array(20));
                    Lb.__limeColorMatrix[0] = this.redMultiplier;
                    Lb.__limeColorMatrix[4] = this.redOffset / 255;
                    Lb.__limeColorMatrix[6] = this.greenMultiplier;
                    Lb.__limeColorMatrix[9] = this.greenOffset / 255;
                    Lb.__limeColorMatrix[12] = this.blueMultiplier;
                    Lb.__limeColorMatrix[14] = this.blueOffset / 255;
                    Lb.__limeColorMatrix[18] = this.alphaMultiplier;
                    Lb.__limeColorMatrix[19] = this.alphaOffset / 255;
                    return Lb.__limeColorMatrix
                },
                __class__: Lb
            };
            var Dc = function (a, b, c) {
                null == c && (c = 0);
                this.pos = a;
                this.radius = b;
                this.power = c;
                this.on = !0
            };
            h["dwellings.model.props.Light"] = Dc;
            Dc.__name__ = "dwellings.model.props.Light";
            Dc.cell = function (a, b) {
                a = Math.sqrt(a.area.length / 2);
                var c = (1 + a) / (2 + a);
                return new Dc(new F(b.j + .5, b.i + .5), a, c)
            };
            Dc.edge = function (a, b) {
                a =
                    Math.sqrt(a.area.length / 2);
                var c = (1 + a) / (2 + a);
                return new Dc(b.point(), a, c)
            };
            Dc.onTheWall = function (a) {
                for (var b = a.plan, c = [], d = 0, g = a.contour; d < g.length;) {
                    var f = g[d];
                    ++d;
                    c.push(f.point(0))
                }
                f = c;
                c = [];
                for (d = 0; d < f.length;) {
                    var k = f[d];
                    ++d;
                    var q = 0;
                    g = 0;
                    for (var l = b.windows; g < l.length;) {
                        var h = l[g];
                        ++g;
                        if (-1 != a.contour.indexOf(h)) {
                            var n = h.point();
                            h = k.x - n.x;
                            n = k.y - n.y;
                            q += 1 / (h * h + n * n)
                        }
                    }
                    for (g = a.doors.iterator(); g.hasNext();) h = g.next().edge1.point(), l = k.x - h.x, h = k.y - h.y, q += 1 / (l * l + h * h);
                    a.hasExit() && (q += 1 / F.distance(k,
                        b.entrance.door.point()));
                    c.push(q)
                }
                b = c;
                k = ca.min(b, function (a) {
                    return a
                });
                q = [];
                c = 0;
                for (d = f.length; c < d;) g = c++, b[g] == k && q.push(f[g]);
                c = ca.random(q);
                a = Math.sqrt(a.area.length / 2);
                return new Dc(c, a, (1 + a) / (2 + a))
            };
            Dc.inTheCentre = function (a) {
                var b = Dc.getSkele(a.get_poly());
                b = Dc.snap(Dc.getSummit(b), a.area);
                a = Math.sqrt(a.area.length / 2);
                return new Dc(b, a, a / (a + 1))
            };
            Dc.getSkele = function (a) {
                for (var b = new Ne(a, !0); 0 < b.ribs.length;) {
                    b = [];
                    for (var c = 0; c < a.length;) {
                        var d = a[c];
                        ++c;
                        b.push(d.add(F.polar(.05, 2 * Math.PI *
                            Math.random())))
                    }
                    a = b;
                    b = new Ne(a, !0)
                }
                return b
            };
            Dc.getSummit = function (a) {
                for (var b = [], c = 0, d = a.bones; c < d.length;) {
                    var g = d[c];
                    ++c;
                    (.999 < g.a.height / a.height || .999 < g.b.height / a.height) && b.push(g)
                }
                a = ca.max(b, function (a) {
                    return Math.min(a.a.height, a.b.height)
                });
                return Kb.lerp(a.a.point, a.b.point, a.b.height / (a.a.height + a.b.height))
            };
            Dc.snap = function (a, b) {
                for (var c = null, d = Infinity, g = 0; g < b.length;) {
                    var f = b[g];
                    ++g;
                    var k = new F(f.j + 0, f.i + 0),
                        q = F.distance(a, k);
                    d > q && (d = q, c = k);
                    k = new F(f.j + .5, f.i + 0);
                    q = F.distance(a,
                        k);
                    d > q && (d = q, c = k);
                    k = new F(f.j + 1, f.i + 0);
                    q = F.distance(a, k);
                    d > q && (d = q, c = k);
                    k = new F(f.j + 0, f.i + .5);
                    q = F.distance(a, k);
                    d > q && (d = q, c = k);
                    k = new F(f.j + .5, f.i + .5);
                    q = F.distance(a, k);
                    d > q && (d = q, c = k);
                    k = new F(f.j + 1, f.i + .5);
                    q = F.distance(a, k);
                    d > q && (d = q, c = k);
                    k = new F(f.j + 0, f.i + 1);
                    q = F.distance(a, k);
                    d > q && (d = q, c = k);
                    k = new F(f.j + .5, f.i + 1);
                    q = F.distance(a, k);
                    d > q && (d = q, c = k);
                    f = new F(f.j + 1, f.i + 1);
                    k = F.distance(a, f);
                    d > k && (d = k, c = f)
                }
                return c
            };
            Dc.prototype = {
                __class__: Dc
            };
            var ze = function () {
            };
            h["dwellings.model.rooms.Generic"] =
                ze;
            ze.__name__ = "dwellings.model.rooms.Generic";
            ze.chamber = function () {
                return new Z("room", null)
            };
            ze.empty = function () {
                var a = new Z("", null);
                a.fill = function (a) {
                    a.defaultLight(!1)
                };
                return a
            };
            ze.corridor = function () {
                var a = new Z("corridor", null);
                a.fill = function (a) {
                    a.defaultLight(!1)
                };
                return a
            };
            ze.stairhall = function () {
                var a = new Z("stairhall", null);
                a.short = "SH";
                a.fill = function (a) {
                    a.clutter = new Hd(a);
                    a.clutter.fill(.3, 1, 3, .8, 1, .8, .1)
                };
                return a
            };
            ze.stairwell = function () {
                var a = new Z("", null);
                a.fill =
                    function (a) {
                        var b = a.plan.stairwell;
                        b = a.plan.grid.cellNdir2edge(b.stair, b.exit.op);
                        a.light = Dc.edge(a, b)
                    };
                a.windows = Z.winRatio(1);
                a.doors = Z.doorsFixed(ad.NULL);
                return a
            };
            var mg = function () {
            };
            h["dwellings.model.rooms.Gallery"] = mg;
            mg.__name__ = "dwellings.model.rooms.Gallery";
            mg.proto = function () {
                var a = new Z("gallery", mg.validate);
                a.fill = mg.populate;
                return a
            };
            mg.validate = function (a) {
                return 6 > a.get_size() || 1 > a.narrow.length / a.get_size() ? !1 : !0
            };
            mg.populate = function (a) {
                var b = a.props.available();
                if (null != b) {
                    var c = new ng(new F(b.j + .5, b.i + .5));
                    a.props.add(c);
                    a.light = Dc.cell(a, b)
                }
            };
            var ng = function (a) {
                X.call(this);
                this.pos = a
            };
            h["dwellings.model.props.Statue"] = ng;
            ng.__name__ = "dwellings.model.props.Statue";
            ng.__super__ = ge;
            ng.prototype = w(ge.prototype, {
                update: function () {
                    var a = this.get_graphics();
                    a.clear();
                    a.lineStyle(J.strokeNormal, J.colorInk);
                    a.beginFill(J.colorProps);
                    a.drawCircle(0, 0, .2);
                    a.endFill();
                    for (var b = .2 - J.strokeNormal / 2, c = [], d = 0; 10 > d;) {
                        var g = d++;
                        c.push(F.polar(b *
                            (0 == (g & 1) ? 1 : .4), -Math.PI / 2 + 2 * Math.PI * g / 10))
                    }
                    a.beginFill(J.colorInk);
                    Za.drawPolygon(a, c);
                    this.set_x(this.pos.x);
                    this.set_y(this.pos.y)
                },
                __class__: ng
            });
            var Yh = function () {
            };
            h["dwellings.model.rooms.Greenhouse"] = Yh;
            Yh.__name__ = "dwellings.model.rooms.Greenhouse";
            Yh.proto = function () {
                var a = new Z("greenhouse", Yh.validate);
                a.windows = Z.winRatio(1);
                a.fill = function (a) {
                    a.clutter = new Hd(a);
                    a.clutter.fill(.25, .2, 10, 1, 0, 0, 10)
                };
                return a
            };
            Yh.validate = function (a) {
                return !Z.topFloor(a) || 5 > a.get_size() ||
                9 < a.get_size() || .5 < a.narrow.length / a.get_size() || 2 < a.countDoors() ? !1 : !0
            };
            var Zh = function () {
            };
            h["dwellings.model.rooms.Hall"] = Zh;
            Zh.__name__ = "dwellings.model.rooms.Hall";
            Zh.proto = function () {
                return new Z("hall", Zh.validate)
            };
            Zh.validate = function (a) {
                return 2 > a.get_size() || 8 < a.get_size() || 2 > a.countDoors() || !a.hasExit() ? !1 : !0
            };
            var $h = function () {
            };
            h["dwellings.model.rooms.Kitchen"] = $h;
            $h.__name__ = "dwellings.model.rooms.Kitchen";
            $h.proto = function () {
                var a = new Z("kitchen",
                    $h.validate);
                a.doors = Z.doorsFixed(ad.REGULAR);
                a.fill = function (a) {
                    a.clutter = new Hd(a);
                    a.clutter.fill(.4, .5, 3, .8, 1, .8, 1)
                };
                return a
            };
            $h.validate = function (a) {
                return 0 != a.plan.getFloor() || 4 > a.get_size() || 6 < a.get_size() || .5 < a.narrow.length / a.get_size() || 2 < a.countDoors() ? !1 : !0
            };
            var Ql = function () {
            };
            h["dwellings.model.rooms.Laboratory"] = Ql;
            Ql.__name__ = "dwellings.model.rooms.Laboratory";
            Ql.proto = function () {
                var a = new Z("laboratory", Z.checkBasic(4, 6, .3, 2));
                a.doors = Z.doorsFixed(ad.REGULAR);
                return a
            };
            var ai = function () {
            };
            h["dwellings.model.rooms.Library"] = ai;
            ai.__name__ = "dwellings.model.rooms.Library";
            ai.proto = function () {
                var a = new Z("library", ai.validate);
                a.fill = function (a) {
                    a.clutter = new Hd(a);
                    a.clutter.fill(.35, 1, 1, .5, 1, 1, 1)
                };
                return a
            };
            ai.validate = function (a) {
                return 4 > a.get_size() || 9 < a.get_size() || .8 < a.narrow.length / a.get_size() || 3 < a.countDoors() || a.hasExit() || Z.underground(a) ? !1 : !0
            };
            var bi = function () {
            };
            h["dwellings.model.rooms.Lookout"] = bi;
            bi.__name__ =
                "dwellings.model.rooms.Lookout";
            bi.proto = function () {
                var a = new Z("lookout", bi.validate);
                a.windows = Z.winRatio(1);
                return a
            };
            bi.validate = function (a) {
                if (2 > a.plan.house.floors.length || !Z.topFloor(a) || 9 < a.get_size()) return !1;
                var b = a.contour.length;
                return .5 > ca.intersect(a.contour, a.plan.contour).length / b ? !1 : !0
            };
            var ci = function () {
            };
            h["dwellings.model.rooms.Observatory"] = ci;
            ci.__name__ = "dwellings.model.rooms.Observatory";
            ci.proto = function () {
                var a = new Z("observatory", ci.validate);
                a.fill = function (a) {
                    a.clutter = new Hd(a);
                    a.clutter.fill(.5, 0, 10, .9, 1, .4, .2)
                };
                return a
            };
            ci.validate = function (a) {
                return !Z.topFloor(a) || 4 > a.get_size() || 9 < a.get_size() || .2 < a.narrow.length / a.get_size() || 2 < a.countDoors() ? !1 : !0
            };
            var og = function () {
            };
            h["dwellings.model.rooms.Passage"] = og;
            og.__name__ = "dwellings.model.rooms.Passage";
            og.proto = function () {
                var a = new Z("secret passage", og.validate);
                a.windows = Z.winFixed(0);
                a.fill = og.populate;
                return a
            };
            og.validate = function (a) {
                return 3 > a.get_size() ||
                1 > a.narrow.length / a.get_size() || 2 > a.countDoors() || a.hasExit() || 0 != a.plan.getFloor() && a.hasSpiral() ? !1 : !0
            };
            og.populate = function (a) {
                for (var b = a.plan, c = b.grid, d = [], g = 0, f = b.stairs; g < f.length;) {
                    var k = f[g];
                    ++g;
                    d.push(k.cell)
                }
                g = d;
                f = b.graph;
                var q = b.findStart();
                k = 65535;
                d = null;
                b = f.findNode(null != q ? q : b.rooms[0]);
                q = a.doors;
                for (var l = q.keys(); l.hasNext();) {
                    var h = l.next();
                    q.get(h);
                    var n = f.findNode(h);
                    n = f.aStar(b, n);
                    if (null == n) {
                        Ub.trace("One of the room is not connected?!!!", {

                            className: "dwellings.model.rooms.Passage",
                            methodName: "populate"
                        });
                        return
                    }
                    n = n.length;
                    k > n && (k = n, d = h)
                }
                f = d.contour;
                k = f.length;
                b = d.doors.h[a.__id__];
                q = d == b.room1 ? b.edge1 : d == b.room2 ? b.edge2 : null;
                h = l = f.indexOf(q);
                for (d = []; ;)
                    if (h = (h + k - 1) % k, n = f[h], n.dir == q.dir && -1 == g.indexOf(c.edge2cell(n))) d.push(n);
                    else break;
                b = d;
                h = l;
                for (d = []; ;)
                    if (h = (h + 1) % k, n = f[h], n.dir == q.dir && -1 == g.indexOf(c.edge2cell(n))) d.push(n);
                    else break;
                c = d;
                for (g = [q]; 3 > g.length && 0 < b.length + c.length;) 0 < b.length && g.unshift(b.shift()),
                0 < c.length && g.push(c.shift());
                c = new di(g[0].a, g[g.length - 1].b);
                a.props.add(c);
                a.defaultLight(!1)
            };
            var di = function (a, b) {
                X.call(this);
                this.a = a;
                this.b = b
            };
            h["dwellings.model.props.Curtain"] = di;
            di.__name__ = "dwellings.model.props.Curtain";
            di.__super__ = ge;
            di.prototype = w(ge.prototype, {
                update: function () {
                    var a = this.a,
                        b = new F(a.j, a.i);
                    a = this.b;
                    a = new F(a.j, a.i);
                    var c = hb.proto.innerTh / 2 + .1,
                        d = a.subtract(b);
                    d.normalize(c);
                    b.x += d.x;
                    b.y += d.y;
                    a.x -= d.x;
                    a.y -= d.y;
                    var g = new F(b.y - a.y, a.x - b.x);
                    g.normalize(c);
                    b.x += g.x;
                    b.y += g.y;
                    a.x += g.x;
                    a.y += g.y;
                    var f = F.distance(b, a);
                    c = this.get_graphics();
                    c.clear();
                    var k = Math.round(f / .1);
                    f /= k;
                    g.normalize(f / 4);
                    d.normalize(f / 8);
                    f = [];
                    for (var q = 0, l = k + 1; q < l;) {
                        var h = q++,
                            n = Kb.lerp(b, a, h / k);
                        h = 0 == (h & 1) ? 1 : -1;
                        var r = new F(n.x + g.x * h, n.y + g.y * h);
                        f.push(new F(r.x + -1 * d.x, r.y + -1 * d.y));
                        h = -h;
                        n = new F(n.x + g.x * h, n.y + g.y * h);
                        f.push(new F(n.x + d.x, n.y + d.y))
                    }
                    c.lineStyle(J.strokeNormal, J.colorInk);
                    Za.drawPolyline(c, ei.render(f, !1, 2))
                },
                __class__: di
            });
            var fi = function () {
            };
            h["dwellings.model.rooms.LivingRoom"] =
                fi;
            fi.__name__ = "dwellings.model.rooms.LivingRoom";
            fi.proto = function () {
                var a = new Z("living room", fi.validate);
                a.windows = Z.winRatio(.4);
                a.fill = function (a) {
                    a.clutter = new Hd(a);
                    a.clutter.fill(.5, .4, 2, .9, .2, .7, .3)
                };
                return a
            };
            fi.validate = function (a) {
                return 5 > a.get_size() || .5 < a.narrow.length / a.get_size() || Z.underground(a) ? !1 : !0
            };
            var gi = function () {
            };
            h["dwellings.model.rooms.Study"] = gi;
            gi.__name__ = "dwellings.model.rooms.Study";
            gi.proto = function () {
                var a = new Z("study", gi.validate);
                a.doors = Z.doorsFixed(ad.REGULAR);
                return a
            };
            gi.validate = function (a) {
                return !Z.aboveGround(a) || 4 > a.get_size() || 6 < a.get_size() || .5 < a.narrow.length / a.get_size() || 1 < a.countDoors() ? !1 : !0
            };
            var Rl = function () {
            };
            h["dwellings.model.rooms.Workshop"] = Rl;
            Rl.__name__ = "dwellings.model.rooms.Workshop";
            Rl.proto = function () {
                var a = new Z("workshop", Z.checkBasic(4, 6, .3, 2));
                a.doors = Z.doorsFixed(ad.REGULAR);
                a.fill = function (a) {
                    a.clutter = new Hd(a);
                    a.clutter.fill(.35, 1, 3, .8, 1, .8, 1)
                };
                return a
            };
            var pg = function () {
            };
            h["dwellings.model.rooms.Studio"] = pg;
            pg.__name__ = "dwellings.model.rooms.Studio";
            pg.proto = function () {
                var a = new Z("studio", pg.validate);
                a.fill = pg.populate;
                return a
            };
            pg.validate = function (a) {
                return 6 > a.get_size() || 9 < a.get_size() || .4 < a.narrow.length / a.get_size() || 2 < a.countDoors() || a.hasExit() || Z.underground(a) ? !1 : !0
            };
            pg.populate = function (a) {
                var b = a.props.available();
                if (null != b) {
                    var c = new ng(new F(b.j + .5, b.i + .5));
                    a.props.add(c);
                    a.light = Dc.cell(a, b)
                }
            };
            var hi = function () {
            };
            h["dwellings.model.rooms.Trophy"] =
                hi;
            hi.__name__ = "dwellings.model.rooms.Trophy";
            hi.proto = function () {
                var a = new Z("trophy room", Z.checkBasic(4, 9, .5, 2));
                a.fill = hi.populate;
                return a
            };
            hi.populate = function (a) {
                var b = a.props.available();
                if (null != b) {
                    var c = new ng(new F(b.j + .5, b.i + .5));
                    a.props.add(c);
                    a.light = Dc.cell(a, b)
                }
            };
            var ii = function () {
            };
            h["dwellings.model.rooms.Vault"] = ii;
            ii.__name__ = "dwellings.model.rooms.Vault";
            ii.proto = function () {
                var a = new Z("vault", ii.validate);
                a.windows = Z.winFixed(0);
                a.doors = Z.doorsFixed(ad.REGULAR);
                return a
            };
            ii.validate = function (a) {
                return 4 > a.get_size() || .3 < a.narrow.length / a.get_size() || 1 < a.countDoors() || a.plan.getFloor() != (null == a.plan.house.basement ? 0 : -1) ? !1 : !0
            };
            var ji = function () {
            };
            h["dwellings.model.rooms.Storage"] = ji;
            ji.__name__ = "dwellings.model.rooms.Storage";
            ji.proto = function () {
                var a = new Z("storage", ji.validate);
                a.windows = Z.winFixed(0);
                a.doors = Z.doorsFixed(ad.REGULAR);
                return a
            };
            ji.validate = function (a) {
                return 2 > a.get_size() || 5 < a.get_size() || 1 < a.countDoors() || a.hasExit() ?
                    !1 : !0
            };
            var Z = function (a, b) {
                this.name = a;
                this.validate = b
            };
            h["dwellings.model.RoomType"] = Z;
            Z.__name__ = "dwellings.model.RoomType";
            Z.aboveGround = function (a) {
                var b = a.plan.getFloor();
                return 0 >= b ? 0 == b ? 1 == a.plan.house.floors.length : !1 : !0
            };
            Z.topFloor = function (a) {
                return a.plan.getFloor() == a.plan.house.floors.length - 1
            };
            Z.underground = function (a) {
                return 0 > a.plan.getFloor()
            };
            Z.singular = function (a) {
                return 1 == a.plan.rooms.length
            };
            Z.checkBasic = function (a, b, c, d, g) {
                null == g && (g = !1);
                null == d && (d =
                    1);
                return function (f) {
                    return f.get_size() < a || f.get_size() > b || f.narrow.length / f.get_size() > c || f.countDoors() > d ? !1 : !0
                }
            };
            Z.doorsFixed = function (a) {
                return function (b) {
                    for (b = b.doors.iterator(); b.hasNext();) b.next().type = a
                }
            };
            Z.winFixed = function (a) {
                return function (b) {
                    b.spawnWindows(a)
                }
            };
            Z.winRatio = function (a) {
                return function (b) {
                    b.spawnWindows(Math.round(b.contour.length * a))
                }
            };
            Z.assign = function (a) {
                for (var b = Z.gothicSet ? Z.gothic(a) : Z.pickRoomTypes(a), c = b[0], d = b[1], g = 0; g < b.length;) {
                    var f = b[g];
                    ++g;
                    for (var k = [], q = 0; q < f.length;) {
                        var l = f[q];
                        ++q;
                        k.push(l.name)
                    }
                    Ub.trace(k, {

                        className: "dwellings.model.RoomType",
                        methodName: "assign"
                    })
                }
                var h = function (a, b) {
                    for (var c = 0; c < a.length;) {
                        var d = a[c];
                        ++c;
                        d.reset()
                    }
                    for (; 0 < b.length && 0 < a.length;) {
                        var f = ca.pick(b);
                        for (c = 0; c < a.length;)
                            if (d = a[c], ++c, null == d.type && f.validate(d)) {
                                d.type = f;
                                M.remove(a, d);
                                break
                            }
                    }
                };
                b = function (a, b) {
                    for (var c = a.length + 1, d = -1, f = 0, g = a.length * b.length; f < g;) {
                        f++;
                        var k = t.seed,
                            l = ca.shuffle(a);
                        h(l, b.slice());
                        if (c > l.length && (c = l.length, d = k, 0 == c)) break
                    }
                    t.reset(d);
                    h(ca.shuffle(a), b)
                };
                b(a.rooms, c);
                g = [];
                k = 0;
                for (q = a.rooms; k < q.length;) c = q[k], ++k, null == c.type && g.push(c);
                b(g, d);
                g = 0;
                for (k = a.rooms; g < k.length;) d = k[g], ++g, null == d.type && Z.assignGeneric(d);
                g = 0;
                for (k = a.rooms; g < k.length;) d = k[g], ++g, d.fill()
            };
            Z.assignGeneric = function (a) {
                var b = a.area.length,
                    c = a.plan.stairwell;
                if (a == (null != c ? c.room : null)) a.type = Z.stairwell;
                else {
                    for (var d = c = 0, g = a.getStairs(); d < g.length;) {
                        var f = g[d];
                        ++d;
                        null !=
                        f.dir && ++c
                    }
                    0 < c && 6 >= b || 1 < c ? a.type = Z.stairhall : 2 < b ? a.narrow.length == a.area.length && 1 < a.countDoors() ? a.type = Z.corridor : a.type = Z.generic : a.type = Z.empty
                }
            };
            Z.pickRoomTypes = function (a) {
                var b = -1 != a.bp.tags.indexOf("generic") ? [] : ca.subset(Z.special, Math.floor(1 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * 2)),
                    c = [Z.salon, Z.bathroom, Z.bedroom];
                0 < b.length && c.push(b[0]);
                for (var d = [Z.kitchen, Z.storage, Z.hall, Z.gallery], g = 1, f = b.length; g < f;) {
                    var k = g++;
                    d.push(b[k])
                }
                g = ca.random([Z.study, Z.library, Z.workshop]);
                -
                    1 ==
                b.indexOf(g) && d.push(g);
                g = 1;
                for (f = a.floors.length; g < f;) g++, d.push(Z.bedroom);
                1 < a.floors.length && d.push(Z.bathroom);
                1 < a.floors.length && d.push(Z.attic);
                null != a.basement && d.push(Z.cellar);
                return [c, d]
            };
            Z.gothic = function (a) {
                a = Yb.getText("gothic");
                var b = (new Jf).parse(a, null),
                    c = b.rooms;
                a = Object.create(null);
                for (var d = L.fields(c), g = 0; g < d.length;) {
                    var f = d[g++],
                        k = f;
                    a[k] = ki.from(k, c[f])
                }
                c = b.primary;
                b = [];
                for (d = 0; d < c.length;) g = c[d], ++d, b.push(a[g]);
                c = b;
                b = [];
                d = Object.keys(a);
                g = d.length;
                for (f = 0; f < g;) k = a[d[f++]],
                    b.push(k);
                a = ca.difference(b, c);
                return [c, a]
            };
            Z.prototype = {
                __class__: Z
            };
            var fa = function () {
            };
            h["dwellings.model.Specs"] = fa;
            fa.__name__ = "dwellings.model.Specs";
            fa.nFloors = null;
            fa.shape = null;
            fa.contour = null;
            fa.entrance = null;
            fa.stairwell = null;
            fa.spiral = null;
            fa.basement = null;
            fa.process = function (a) {
                t.seed = 48271 * t.seed % 2147483647 | 0;
                fa.pickShape(a);
                fa.pickEntrance(a);
                fa.nFloors = 0 < a.nFloors ? a.nFloors : fa.randNFloors(a, fa.shape.area.length);
                2 > fa.nFloors && (-1 != a.tags.indexOf("stairwell") ||
                    -1 != a.tags.indexOf("spiral")) && (fa.nFloors = 2);
                fa.rollStairs(a);
                -
                    1 == a.tags.indexOf("basement") ? (a = fa.nFloors / (fa.nFloors + 1), null == a && (a = .5), a = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < a) : a = !0;
                fa.basement = a
            };
            fa.randNFloors = function (a, b) {
                b = Math.sqrt(b) - 1;
                a = oc.pick(a, oc.HEIGHT);
                a = "low" == a ? Math.round(b * Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1)) :
                    "tall" == a ? Math.round(b * (1 + .5 * Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1))) : Math.round(b * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3));
                return Zc.gatei(a, 1, 8)
            };
            fa.pickShape = function (a) {
                var b = Cc.fromCode(a.plan, a.width, a.height);
                if (null != b) a = b;
                else switch (a.plan =
                    null, b = oc.pick(a, oc.SIZE), b = null != b ? b : oc.randomSize(), a = -1 != a.tags.indexOf("square"), b) {
                    case "large":
                        a = Cc.getShape(24, 34, a);
                        break;
                    case "medium":
                        a = Cc.getShape(16, 24, a);
                        break;
                    case "small":
                        a = Cc.getShape(10, 16, a);
                        break;
                    default:
                        a = null
                }
                fa.shape = a;
                fa.contour = fa.shape.grid.outline(fa.shape.area)
            };
            fa.pickEntrance = function (a) {
                for (var b = [], c = 0, d = fa.contour; c < d.length;) {
                    var g = d[c];
                    ++c;
                    var f = vb.prev(fa.contour, g).dir,
                        k = g.dir;
                    g = vb.next(fa.contour, g).dir;
                    f == k && k == g ? b.push(5) : f.cw == k && k.cw == g ? b.push(3) : f.ccw != k &&
                    k.ccw != g ? b.push(1) : b.push(0)
                }
                b = ca.weighted(fa.contour, b);
                null != a.entrance && (b = Cc.decodeEdge(fa.shape.grid, a.entrance, fa.shape.trimx, fa.shape.trimy));
                fa.entrance = {
                    door: b,
                    landing: fa.shape.grid.edge2cell(b)
                }
            };
            fa.rollStairs = function (a) {
                fa.spiral = null;
                fa.stairwell = null;
                if (1 >= fa.nFloors) var b = a = !1;
                else -1 != a.tags.indexOf("spiral") ? (a = !0, b = !1) : -1 != a.tags.indexOf("stairwell") ? (a = !1, b = !0) : (b = 2 == fa.nFloors ? .1 : .3, null == b && (b = .5), (a = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < b) ? b = !1 : (b = (fa.nFloors - 1) / (fa.nFloors +
                    1), null == b && (b = .5), b = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < b));
                a ? fa.rollSpiral() : b && fa.rollStairwell()
            };
            fa.rollSpiral = function () {
                for (var a = [], b = fa.contour.length, c = 0; c < b;) {
                    var d = c++,
                        g = fa.contour[d],
                        f = fa.contour[(d + b - 1) % b],
                        k = fa.contour[(d + b - 2) % b];
                    d = fa.contour[(d + 1) % b];
                    g.dir == f.dir.cw && g.dir == k.dir.cw && g.dir == d.dir && g != fa.entrance.door && f != fa.entrance.door && a.push(g)
                }
                a = ca.random(a);
                fa.spiral = {
                    entrance: a,
                    exit: vb.prev(fa.contour, a),
                    landing: fa.shape.grid.edge2cell(a)
                }
            };
            fa.rollStairwell = function () {
                for (var a = [], b = 0, c = fa.shape.area; b < c.length;) {
                    var d = c[b];
                    ++b;
                    var g = ca.difference(fa.shape.area, [d]);
                    md.fill(fa.shape.grid, g, g[0]).length == g.length && a.push(d)
                }
                c = a;
                M.remove(c, fa.entrance.landing);
                a = [];
                for (b = 0; b < c.length;) d = [c[b]], ++b, a.push(4 - ca.count(qa.CARDINAL, function (a) {
                    return function (b) {
                        b = fa.shape.grid.cell(a[0].i + b.di, a[0].j + b.dj);
                        return -1 != fa.shape.area.indexOf(b)
                    }
                }(d)));
                d = ca.weighted(c, a);
                a = [];
                b = 0;
                for (c = qa.CARDINAL; b < c.length;) {
                    g = c[b];
                    ++b;
                    var f = fa.shape.grid.cell(d.i + g.di, d.j + g.dj);
                    -
                        1 != fa.shape.area.indexOf(f) &&
                    a.push(g)
                }
                a = ca.random(a);
                b = fa.shape.grid.cell(d.i + a.di, d.j + a.dj);
                fa.stairwell = {
                    stair: d,
                    landing: b,
                    exit: a
                }
            };
            var ff = function (a, b, c) {
                this.plan = a;
                this.cell = b;
                this.dir = c;
                a.stairs.push(this)
            };
            h["dwellings.model.Staircase"] = ff;
            ff.__name__ = "dwellings.model.Staircase";
            ff.prototype = {
                link: function (a) {
                    this.to = a;
                    a.to = this
                },
                isGoingUp: function () {
                    return this.to.plan.getFloor() > this.plan.getFloor()
                },
                __class__: ff
            };
            var oc = function () {
            };
            h["dwellings.model.Tags"] = oc;
            oc.__name__ = "dwellings.model.Tags";
            oc.resolve = function (a, b) {
                for (var c = [oc.SIZE, oc.HEIGHT, ["blank", "transparent"],
                    ["mechanical", "organic"],
                    ["spiral", "stairwell"]
                ], d = 0; d < c.length;) {
                    var g = c[d];
                    ++d;
                    -
                        1 != g.indexOf(b) && ca.removeAll(a, ca.difference(g, [b]))
                }
                null != b && a.push(b)
            };
            oc.random = function () {
                var a = [oc.randomSize()],
                    b = .1;
                null == b && (b = .5);
                (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < b && a.push("square");
                b = .2;
                null == b && (b = .5);
                (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < b && (a.push(ca.random(oc.HEIGHT)), -1 != a.indexOf("tall") ? (b = .5, null == b &&
                (b = .5), b = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < b) : b = !1, b && a.push("slab"));
                .5 > (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 && (b = .6666666666666666, null == b && (b = .5), a.push((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < b ? "organic" : "mechanical"));
                b = .2;
                null == b && (b = .5);
                (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < b && a.push("hallways");
                return a
            };
            oc.pick = function (a, b) {
                return ca.intersect(a.tags, b)[0]
            };
            oc.randomSize = function () {
                return ca.random(["small", "medium", "medium", "large"])
            };
            oc.getInfo = function (a) {
                switch (a) {
                    case "basement":
                        return "Basement.";
                    case "blank":
                        return "As few windows as possible.";
                    case "generic":
                        return "No special rooms.";
                    case "hallways":
                        return "More corridors and rooms with nooks.";
                    case "large":
                        return "Large ground floor.";
                    case "low":
                        return "Low number of floors.";
                    case "mechanical":
                        return "Inner walls bisect the outer shape.";
                    case "medium":
                        return "Medium-sized ground floor.";
                    case "organic":
                        return "Inner walls follow the outer shape.";
                    case "slab":
                        return "All floors have the same shape.";
                    case "small":
                        return "Small ground floor.";
                    case "spiral":
                        return "Spiral staircase instead of regular ones.";
                    case "square":
                        return "Rectangular ground plan.";
                    case "stairwell":
                        return "All staircases are located one above the other.";
                    case "tall":
                        return "High number of floors.";
                    case "transparent":
                        return "As many windows as possible.";
                    default:
                        return "No info."
                }
            };
            var Gk = function () {
                X.call(this)
            };
            h["dwellings.model.props.Bed"] = Gk;
            Gk.__name__ = "dwellings.model.props.Bed";
            Gk.__super__ = ge;
            Gk.prototype = w(ge.prototype, {
                update: function () {
                    var a = this.get_graphics();
                    a.clear();
                    a.lineStyle(J.strokeNormal,
                        J.colorInk);
                    a.beginFill(J.colorProps);
                    a.drawRect(-.4, -.2, .8, .4);
                    a.endFill();
                    a.lineStyle(J.strokeNormal, J.colorInk);
                    a.moveTo(.2, -.2);
                    a.lineTo(.2, .2);
                    a.moveTo(.15, -.2);
                    a.lineTo(.2, .1);
                    a.drawRect(.2, -.1, .15, .2)
                },
                __class__: Gk
            });
            var Fk = function (a) {
                this.set = [];
                this.room = a
            };
            h["dwellings.model.props.PropSet"] = Fk;
            Fk.__name__ = "dwellings.model.props.PropSet";
            Fk.prototype = {
                clear: function () {
                    this.set = []
                },
                add: function (a) {
                    this.set.push(a)
                },
                update: function () {
                    for (var a = 0, b = this.set; a < b.length;) {
                        var c =
                            b[a];
                        ++a;
                        c.update()
                    }
                },
                available: function (a) {
                    null == a && (a = !1);
                    a = a ? this.wallCells() : this.room.area;
                    var b = ca.difference(ca.difference(ca.difference(a, this.doors()), this.stairs()), this.landings());
                    a = [];
                    for (var c = 0; c < b.length;) {
                        var d = b[c];
                        ++c;
                        a: {
                            var g = d;
                            if (-1 != this.room.narrow.indexOf(g))
                                for (var f = 0, k = this.room.plan.grid, q = 0, l = qa.CARDINAL; q < l.length;) {
                                    var h = l[q];
                                    ++q;
                                    if (-1 != this.room.area.indexOf(k.cell(g.i + h.di, g.j + h.dj)) && (++f, 2 <= f)) {
                                        g = !1;
                                        break a
                                    }
                                }
                            g = !0
                        }
                        g && a.push(d)
                    }
                    b = a;
                    return 0 < b.length ? ca.random(b) : null
                },
                wallCells: function () {
                    for (var a = [], b = this.room.plan.grid, c = 0, d = this.room.contour; c < d.length;) {
                        var g = d[c];
                        ++c;
                        ca.add(a, b.edge2cell(g))
                    }
                    return a
                },
                doors: function () {
                    for (var a = [], b = this.room.doors.iterator(); b.hasNext();) {
                        var c = b.next(),
                            d = this.room;
                        ca.add(a, c.plan.grid.edge2cell(d == c.room1 ? c.edge1 : d == c.room2 ? c.edge2 : null))
                    }
                    null != this.room.plan.entrance && ca.add(a, this.room.plan.entrance.landing);
                    this.room.hasSpiral() && ca.add(a, this.room.plan.spiral.landing);
                    return a
                },
                stairs: function () {
                    for (var a = [], b = 0, c =
                        this.room.plan.stairs; b < c.length;) {
                        var d = c[b];
                        ++b;
                        a.push(d.cell)
                    }
                    return a
                },
                landings: function () {
                    for (var a = this.room.plan.grid, b = [], c = 0, d = this.room.plan.stairs; c < d.length;) {
                        var g = d[c];
                        ++c;
                        if (null != g.dir) {
                            var f = g.cell;
                            g = g.dir.op;
                            ca.add(b, a.cell(f.i + g.di, f.j + g.dj))
                        }
                    }
                    this.room.hasSpiral() && ca.add(b, this.room.plan.spiral.landing);
                    return b
                },
                __class__: Fk
            };
            var ki = function () {
            };
            h["dwellings.model.rooms.Loadable"] = ki;
            ki.__name__ = "dwellings.model.rooms.Loadable";
            ki.from = function (a, b) {
                var c =
                    b.name;
                a = new Z(null != c ? c : a, ki.getValidate(b));
                a.short = b["short"];
                c = b.windows;
                null != c && (a.windows = Z.winRatio(c));
                "regular" == b.doors && (a.doors = Z.doorsFixed(ad.REGULAR));
                var d = b.fill;
                null != d && (a.fill = "" == d ? function (a) {
                } : function (a) {
                    for (var b = [], c = 0, g = d.split(", "); c < g.length;) {
                        var l = g[c];
                        ++c;
                        b.push(parseFloat(l))
                    }
                    l = b;
                    a.clutter = new Hd(a);
                    a.clutter.fill(l[0], l[1], l[2] | 0, l[3], l[4], l[5], l[6])
                });
                return a
            };
            ki.getValidate = function (a) {
                var b = a.minSize,
                    c = a.maxSize,
                    d = a.minNarr,
                    g = a.maxNarr,
                    f = a.floor,
                    k = a.maxDoors,
                    q = a.entrance,
                    l = a.topFloor,
                    h = a.groundFloor,
                    n = a.basement,
                    r = a.aboveGround,
                    t = a.singular;
                return function (a) {
                    if (null != b && a.get_size() < b || null != c && a.get_size() > c) return !1;
                    var p = a.narrow.length / a.get_size();
                    return null != d && p < d || null != g && p > g || null != f && a.plan.getFloor() != f || null != k && a.countDoors() > k || null != q && q != a.hasExit() || null != l && l != Z.topFloor(a) || null != h && h != a.plan.isGroundFloor() || null != n && n != Z.underground(a) || null != r && r != Z.aboveGround(a) || null != t && t != Z.singular(a) ? !1 : !0
                }
            };
            var ub = function () {
                var a = this;
                Jb.call(this);
                this.house = fd.inst;
                this.modeSelector = new li;
                this.modeSelector.update(ub.planView);
                this.modeSelector.mode.add(function (b) {
                    a.switchView()
                });
                this.modeSelector.menu.add(m(this, this.onMenuButton));
                ma.layer.add(this.modeSelector);
                this.keyEvent.add(m(this, this.onKey))
            };
            h["dwellings.scenes.DwellingScene"] = ub;
            ub.__name__ = "dwellings.scenes.DwellingScene";
            ub.getScene = function () {
                return ub.planView ? sd : bd
            };
            ub.__super__ = Jb;
            ub.prototype = w(Jb.prototype, {
                activate: function () {
                    Jb.prototype.activate.call(this);
                    this.stage.addEventListener("touchTap", m(this, this.onTap));
                    this.stage.addEventListener("click", m(this, this.onClick));
                    this.stage.addEventListener("rightClick", m(this, this.onRightClick))
                },
                deactivate: function () {
                    Jb.prototype.deactivate.call(this);
                    ma.layer.removeChild(this.modeSelector);
                    this.stage.removeEventListener("touchTap", m(this, this.onTap));
                    this.stage.removeEventListener("click", m(this, this.onClick));
                    this.stage.removeEventListener("rightClick", m(this, this.onRightClick))
                },
                onTap: function (a) {
                    ma.checkTarget(a.target) ||
                    this.reset()
                },
                onClick: function (a) {
                },
                onRightClick: function (a) {
                    ma.checkTarget(a.target) || this.showContextMenu()
                },
                onMenuButton: function (a) {
                    a = a.getBounds(ma.layer);
                    this.showContextMenu(a.get_left(), a.get_bottom())
                },
                showContextMenu: function (a, b) {
                    null == b && (b = 0);
                    null == a && (a = 0);
                    var c = this,
                        d = new Ac;
                    d.addItem("New house", function () {c.reset(Xd.random())});

                    this.fillViewMenu(d);
                    d.addItem("About", function () {
                        null == ma.findForm(AboutDialogForm) && ma.showDialog(new AboutDialogForm)
                    });
                    0 == a && 0 == b ? ma.showMenu(d) : ma.showMenuAt(d, a, b)
                },
                fillViewMenu: function (a) {
                    a.addSeparator();
                    Oa.mobile || a.addItem("Fullscreen", m(this, this.toggleFullscreen), 2 != this.stage.get_displayState())
                },
                fillExportMenu: function (a) {
                    a.addItem("PNG", m(this, this.exportAsPNG));
                    a.addItem("SVG", m(this, this.exportAsSVG))
                },
                onEsc: function () {
                    ma.hideMenu() || Jb.prototype.onEsc.call(this)
                },
                onKey: function (a,
                                 b) {
                    if (b) switch (a) {
                        case 13:
                            this.reset();
                            break;
                        case 32:
                            ma.showToast(this.house.name);
                            break;
                        case 49:
                            this.applyColorsPreset("natural");
                            break;
                        case 50:
                            this.applyColorsPreset("wooden");
                            break;
                        case 51:
                            this.applyColorsPreset("plain");
                            break;
                        case 52:
                            this.applyColorsPreset("blueprint");
                            break;
                        case 53:
                            this.applyColorsPreset("bw");
                            break;
                        case 9:
                        case 84:
                            this.showParams()
                    }
                },
                reset: function (a) {
                    this.house = fd.reset(null != a ? a : Xd.random());
                    ma.showToast(this.house.name)
                },
                switchView: function () {
                    ub.planView = !ub.planView;
                    this.switchBack()
                },
                switchToBlueprint: function () {
                    Oa.switchScene(mi)
                },
                switchBack: function () {
                    Oa.switchScene(ub.getScene())
                },
                showParams: function () {
                    var a = this;
                    if (null == ma.findForm(Oe)) {
                        var b = new Oe(this.house.bp, function (b, d) {
                            b = new Xd(null, b, d);
                            a.reset(b);
                            return b.tags
                        });
                        ma.showDialog(b).minimizable = !0
                    }
                },
                toggleFullscreen: function () {
                    this.stage.set_displayState(2 == this.stage.get_displayState() ? 1 : 2)
                },
                onPermalink: function () {
                    var a = this;
                    null == ma.findForm(ah) && ma.showDialog(new ah(function (b) {
                        Va.fromString(b);
                        a.reset(Xd.fromURL())
                    }))
                },
                applyColors: function (a) {
                    J.setPalette(a, !0);
                    ac.setUIColors([J.colorPaper, J.colorFloor], J.colorInk);
                    this.modeSelector.update(ub.planView)
                },
                applyColorsPreset: function (a) {
                    this.applyColors($c.fromAsset(a))
                },
                exportAsPNG: function () {
                },
                exportAsSVG: function () {
                },
                goToPrimarySource: function (inNewWindow=true) {
                    const adr = FuncProto.paramsUrlString(params.routes.primary_source);
                    if(inNewWindow){
                        window.open(adr, "_blank")
                    }else{
                        window.open(adr, "_self")
                    }
                },
                goToGithub: function (inNewWindow=true) {
                    const adr = FuncProto.paramsUrlString(params.routes.github);
                    if(inNewWindow){
                        window.open(adr, "_blank")
                    }else{
                        window.open(adr, "_self")
                    }
                },
                goToHomepage: function (inNewWindow=true) {
                    const adr = FuncProto.paramsUrlString(params.routes.homepage);
                    if(inNewWindow){
                        window.open(adr, "_blank")
                    }else{
                        window.open(adr, "_self")
                    }
                },
                goToCave: function (inNewWindow=true) {
                    const adr = FuncProto.paramsUrlString(params.routes.cave);
                    if(inNewWindow){
                        window.open(adr, "_blank")
                    }else{
                        window.open(adr, "_self")
                    }
                },
                goToDwellings: function (inNewWindow=true) {
                    const adr = FuncProto.paramsUrlString(params.routes.dwellings);
                    if(inNewWindow){
                        window.open(adr, "_blank")
                    }else{
                        window.open(adr, "_self")
                    }
                },
                goToMfcg: function (inNewWindow=true) {
                    const adr = FuncProto.paramsUrlString(params.routes.mfcg);
                    if(inNewWindow){
                        window.open(adr, "_blank")
                    }else{
                        window.open(adr, "_self")
                    }
                },
                goToVillage: function (inNewWindow=true) {
                    const adr = FuncProto.paramsUrlString(params.routes.village);
                    if(inNewWindow){
                        window.open(adr, "_blank")
                    }else{
                        window.open(adr, "_self")
                    }
                },
                goToViewer: function (inNewWindow=true) {
                    const adr = FuncProto.paramsUrlString(params.routes.viewer);
                    if(inNewWindow){
                        window.open(adr, "_blank")
                    }else{
                        window.open(adr, "_self")
                    }
                },
                __class__: ub
            });
            var mi = function () {
                ub.call(this);
                this.grid = new Gf(fa.MAX_SIZE, fa.MAX_SIZE);
                this.area = [];
                for (var a = fd.inst.floors[0], b = fa.MAX_SIZE - a.grid.w >> 1, c =
                    fa.MAX_SIZE - a.grid.h >> 1, d = 0, g = a.area; d < g.length;) {
                    var f = g[d];
                    ++d;
                    this.area.push(this.grid.cell(f.i + c, f.j + b))
                }
                g = a.entrance.door;
                a = this.grid;
                d = this.grid.node(g.a.i + c, g.a.j + b);
                b = this.grid.node(g.b.i + c, g.b.j + b);
                this.door = a.edges.h[d.__id__].h[b.__id__];
                this.view = new he(this.grid);
                this.view.onDoor.add(m(this, this.onDoor));
                this.updateView();
                this.addChild(this.view)
            };
            h["dwellings.scenes.BlueprintScene"] = mi;
            mi.__name__ = "dwellings.scenes.BlueprintScene";
            mi.__super__ = ub;
            mi.prototype =
                w(ub.prototype, {
                    activate: function () {
                        ub.prototype.activate.call(this);
                        this.stage.addEventListener("mouseDown", m(this, this.onMouseDown));
                        ma.showToast("Hold Shift to specify the entrance location.")
                    },
                    deactivate: function () {
                        ub.prototype.deactivate.call(this);
                        this.stage.removeEventListener("mouseDown", m(this, this.onMouseDown))
                    },
                    layout: function () {
                        var a = .09 * Math.min(this.rWidth, this.rHeight);
                        this.view.set_scaleX(this.view.set_scaleY(a));
                        this.view.set_x((this.rWidth - a * fa.MAX_SIZE) / 2);
                        this.view.set_y((this.rHeight -
                            a * fa.MAX_SIZE) / 2)
                    },
                    onEsc: function () {
                        this.discard()
                    },
                    onKey: function (a, b) {
                        if (b) switch (a) {
                            case 8:
                                this.clear();
                                break;
                            case 13:
                                this.submit();
                                break;
                            case 16:
                                this.view.set_showWalls(!0);
                                break;
                            case 66:
                                this.discard();
                                break;
                            case 82:
                                this.random();
                                break;
                            case 88:
                                this.box();
                                break;
                            default:
                                ub.prototype.onKey.call(this, a, b)
                        } else 16 == a && this.view.set_showWalls(!1)
                    },
                    fillViewMenu: function (a) {
                        a.addItem("Random", m(this, this.random));
                        a.addItem("Box", m(this, this.box));
                        a.addItem("Clear", m(this, this.clear));
                        a.addSeparator();
                        a.addItem("Submit", m(this, this.submit));
                        a.addItem("Discard", m(this, this.discard));
                        a.addSeparator();
                        ub.prototype.fillViewMenu.call(this, a)
                    },
                    submit: function () {
                        this.reset(fd.inst.bp)
                    },
                    discard: function () {
                        this.switchBack()
                    },
                    onMouseDown: function (a) {
                        if (!ma.checkTarget(a.target) && !this.view.get_showWalls()) {
                            a = Math.floor(this.view.get_mouseY());
                            var b = Math.floor(this.view.get_mouseX());
                            this.verifyCoords(a, b) && (this.toggle(a, b, !0), this.updateView(), this.stage.addEventListener("mouseMove", m(this, this.onMouseMove)),
                                this.stage.addEventListener("mouseUp", m(this, this.onMouseUp)))
                        }
                    },
                    onMouseUp: function (a) {
                        this.stage.removeEventListener("mouseMove", m(this, this.onMouseMove));
                        this.stage.removeEventListener("mouseUp", m(this, this.onMouseUp))
                    },
                    onMouseMove: function (a) {
                        a = Math.floor(this.view.get_mouseY());
                        var b = Math.floor(this.view.get_mouseX());
                        this.verifyCoords(a, b) && this.toggle(a, b) && this.updateView()
                    },
                    verifyCoords: function (a, b) {
                        return 0 <= a && 0 <= b && a < fa.MAX_SIZE ? b < fa.MAX_SIZE : !1
                    },
                    toggle: function (a, b, c) {
                        null == c && (c = !1);
                        a = this.grid.cell(a, b);
                        b = -1 != this.area.indexOf(a);
                        c && (this.paint = !b);
                        this.paint && !b && this.area.push(a);
                        !this.paint && b && M.remove(this.area, a);
                        return b != this.paint
                    },
                    updateView: function () {
                        this.view.update(this.area, this.door)
                    },
                    applyColors: function (a) {
                        ub.prototype.applyColors.call(this, a);
                        this.stage.set_color(J.colorPaper);
                        this.view.drawGrid();
                        this.updateView()
                    },
                    clear: function () {
                        this.erase();
                        this.updateView()
                    },
                    random: function () {
                        this.erase();
                        var a = $a.create(Math.round(2 - Math.abs(((t.seed = 48271 * t.seed % 2147483647 |
                                0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1)), Math.round(2 + Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1))),
                            b = a[0],
                            c = b.x,
                            d = b.x,
                            g = b.y;
                        b = b.y;
                        for (var f = 0; f < a.length;) {
                            var k = a[f];
                            ++f;
                            k.x < c ? c = k.x : k.x > d && (d = k.x);
                            k.y < g ? g = k.y : k.y > b && (b = k.y)
                        }
                        f =
                            (fa.MAX_SIZE - d - c - 1) / 2;
                        k = f - (f | 0);
                        null == k && (k = .5);
                        c = (f | 0) + ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < k ? 1 : 0);
                        f = (fa.MAX_SIZE - b - g - 1) / 2;
                        k = f - (f | 0);
                        null == k && (k = .5);
                        g = (f | 0) + ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < k ? 1 : 0);
                        for (f = 0; f < a.length;) k = a[f], ++f, this.area.push(this.grid.cell(g + k.y, c + k.x));
                        this.updateView()
                    },
                    box: function () {
                        this.erase();
                        var a = 10 + 25 * Math.pow((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647, 2),
                            b = Math.pow(2, 2 * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) - 1),
                            c = Math.sqrt(a * b),
                            d = c -
                                (c | 0);
                        null == d && (d = .5);
                        b = (c | 0) + ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < d ? 1 : 0);
                        c = a / b;
                        d = c - (c | 0);
                        null == d && (d = .5);
                        a = (c | 0) + ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < d ? 1 : 0);
                        c = (fa.MAX_SIZE - b) / 2;
                        d = c - (c | 0);
                        null == d && (d = .5);
                        var g = (c | 0) + ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < d ? 1 : 0);
                        c = (fa.MAX_SIZE - a) / 2;
                        d = c - (c | 0);
                        null == d && (d = .5);
                        c = (c | 0) + ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < d ? 1 : 0);
                        for (d = 0; d < a;)
                            for (var f = d++, k = 0, q = b; k < q;) {
                                var l = k++;
                                this.area.push(this.grid.cell(f + c, l + g))
                            }
                        this.updateView()
                    },
                    reset: function (a) {
                        var b = this.view.shape,
                            c = vb.fill(this.grid, b);
                        c = md.toBitmap(this.grid, c);
                        a.width = a.height = fa.MAX_SIZE;
                        a.plan = Cc.encodeBitmap(c);
                        a.entrance = -1 != b.indexOf(this.door) ? Cc.encodeEdge(this.door) : null;
                        ub.prototype.reset.call(this, a);
                        this.switchBack()
                    },
                    erase: function () {
                        this.area = [];
                        this.door = null
                    },
                    onDoor: function (a) {
                        this.door = this.door != a ? a : null;
                        this.updateView()
                    },
                    fillExportMenu: function (a) {
                    },
                    __class__: mi
                });
            var bd = function () {
                var a = this;
                bd.dark = ib.get("colorize", !1);
                bd.dark ? I.setDark() : I.setInherited();
                ac.setUIColors([I.colorBg], I.colorInk);
                ub.call(this);
                this.sideSelector = new oi;
                this.sideSelector.click.add(function (b) {
                    a.setDir(b)
                });
                ma.layer.addChildAt(this.sideSelector, 0);
                this.sideSelector.update(this.house);
                this.view = new Ae;
                this.addChild(this.view);
                this.updateView();
                this.setDir(bd.curDir)
            };
            h["dwellings.scenes.ElevationScene"] = bd;
            bd.__name__ = "dwellings.scenes.ElevationScene";
            bd.curDir = null;
            bd.__super__ = ub;
            bd.prototype = w(ub.prototype, {
                activate: function () {
                    ub.prototype.activate.call(this);
                    this.stage.set_color(I.colorBg)
                },
                deactivate: function () {
                    ub.prototype.deactivate.call(this);
                    ma.layer.removeChild(this.sideSelector)
                },
                layout: function () {
                    var a = Math.min(this.rWidth, this.rHeight) / 640;
                    this.view.set_scaleX(this.view.set_scaleY(a));
                    var b = this.house.floors.length * A.floorHeight + A.baseHeight + A.roofSlope * A.columnWidth;
                    this.view.set_x((this.rWidth - this.elevation.width * A.columnWidth * a) / 2);
                    this.view.set_y((this.rHeight + b * a) / 2);
                    this.sideSelector.set_x(this.rWidth - this.sideSelector.get_width());
                    this.sideSelector.set_y(this.rHeight -
                        this.sideSelector.get_height())
                },
                onEsc: function () {
                    this.switchView()
                },
                onKey: function (a, b) {
                    if (b) switch (a) {
                        case 37:
                            this.sideSelector.prev();
                            break;
                        case 39:
                            this.sideSelector.next();
                            break;
                        case 66:
                            this.switchToBlueprint();
                            break;
                        case 68:
                            this.toggleColors();
                            break;
                        case 69:
                            this.switchView();
                            break;
                        case 70:
                            this.toggleFading();
                            break;
                        case 82:
                            this.rerollDimensions();
                            break;
                        default:
                            ub.prototype.onKey.call(this, a, b)
                    }
                },
                fillViewMenu: function (a) {
                    a.addItem("Floor plans", m(this, this.switchView));
                    a.addItem("Blueprint", m(this,
                        this.switchToBlueprint));
                    a.addSeparator();
                    a.addItem("Reroll", m(this, this.rerollDimensions));
                    a.addItem("Fortified", m(this, this.toggleFortified)).setCheck(A.fortified);
                    a.addItem("Dark", m(this, this.toggleColors)).setCheck(I.mode == Pe.DARK);
                    a.addItem("Fade", m(this, this.toggleFading)).setCheck(Ae.useFading);
                    ub.prototype.fillViewMenu.call(this, a)
                },
                setDir: function (a) {
                    this.sideSelector.select(bd.curDir = a);
                    this.updateView()
                },
                updateView: function () {
                    this.elevation = this.house.getElevations().h[bd.curDir.__id__];
                    this.view.update(this.elevation);
                    this.layout()
                },
                rerollDimensions: function () {
                    A.random();
                    this.updateView()
                },
                toggleFortified: function () {
                    A.fortified = !A.fortified;
                    A.random();
                    this.updateView()
                },
                toggleColors: function () {
                    ib.set("colorize", bd.dark = !bd.dark);
                    bd.dark ? I.setDark() : I.setInherited();
                    ac.setUIColors([I.colorBg], I.colorInk);
                    this.modeSelector.update(ub.planView);
                    this.sideSelector.select(bd.curDir);
                    this.stage.set_color(I.colorBg);
                    this.updateView()
                },
                toggleFading: function () {
                    ib.set("fading", Ae.useFading = !Ae.useFading);
                    this.updateView()
                },
                reset: function (a) {
                    ub.prototype.reset.call(this, a);
                    this.sideSelector.update(this.house);
                    this.sideSelector.select(bd.curDir);
                    this.updateView()
                },
                exportAsPNG: function () {
                    zb.facadeAsPNG(this.house, this.elevation, this.view)
                },
                exportAsSVG: function () {
                    zb.facadeAsSVG(this.house, this.elevation, this.view)
                },
                applyColors: function (a) {
                    ub.prototype.applyColors.call(this, a);
                    I.setInherited();
                    ib.set("colorize", bd.dark = !1);
                    this.sideSelector.select(bd.curDir);
                    this.stage.set_color(I.colorBg);
                    this.house.updateProps();
                    this.updateView()
                },
                __class__: bd
            });
            var sd = function () {
                var a = this;
                ac.setUIColors([J.colorPaper, J.colorFloor], J.colorInk);
                ub.call(this);
                nd.mode = ib.get("doors", "hidden");
                mb.mode = ib.get("grid", "dots");
                mb.double = ib.get("doubleGrid", !1);
                Sa.showArrows = ib.get("arrows", !0);
                Sa.showProps = ib.get("props", !0);
                Sa.showAO = ib.get("ao", !0);
                Sa.showLights = ib.get("lights", !0);
                Qc.isVisible = ib.get("labels", !0);
                Ae.useFading = ib.get("fading", !0);
                this.map = new pi;
                this.addChild(this.map);
                this.floor = new qi;
                this.floor.click.add(function (b) {
                    a.setFloor(b)
                });
                ma.layer.addChildAt(this.floor, 0);
                this.floor.update(this.house);
                this.setFloor(sd.curFloor)
            };
            h["dwellings.scenes.PlanScene"] = sd;
            sd.__name__ = "dwellings.scenes.PlanScene";
            sd.__super__ = ub;
            sd.prototype = w(ub.prototype, {
                activate: function () {
                    ub.prototype.activate.call(this);
                    this.stage.set_color(J.colorPaper)
                },
                deactivate: function () {
                    ub.prototype.deactivate.call(this);
                    ma.layer.removeChild(this.floor)
                },
                layout: function () {
                    var a = md.getRect(this.house.floors[0].area),
                        b = Oa.mobile ? Math.min(this.rWidth / (a.width + 2), this.rHeight / (a.height + 2)) : .09 * Math.min(this.rWidth, this.rHeight);
                    this.map.set_scaleX(this.map.set_scaleY(b));
                    this.map.set_x(this.rWidth / 2 - b * (a.left + a.width / 2));
                    this.map.set_y(this.rHeight / 2 - b * (a.top + a.height / 2));
                    this.floor.set_x(this.rWidth - this.floor.get_width());
                    this.floor.set_y(this.rHeight - this.floor.get_height())
                },
                onTap: function (a) {
                    a.target != this.map && ub.prototype.onTap.call(this, a)
                },
                onClick: function (a) {
                    if (Nd.__eq(a.target, this.map) && (a = this.map.getRoom(this.map.get_mouseX(),
                        this.map.get_mouseY()), null != a))
                        if (this.keyShift) null != a.light && (a.light.on = !a.light.on), this.map.updateShading();
                        else if (this.keyCtrl) {
                            for (var b = 0, c = Ua.__cast(this.map.view, Sa).plan.rooms; b < c.length;) {
                                var d = c[b];
                                ++b;
                                null != d.light && (d.light.on = d == a)
                            }
                            this.map.updateShading()
                        } else this.editName(a)
                },
                fillViewMenu: function (a) {
                    var b = this,
                        c = new Ac;
                    c.addItem("Regular", m(this, this.toggleRoomSet), !Z.gothicSet);
                    c.addItem("Gothic", m(this, this.toggleRoomSet), Z.gothicSet);
                    var d = new Ac,
                        g = function (a, c) {
                            d.addItem(a,
                                function () {
                                    ib.set("grid", mb.mode = c);
                                    b.updateView()
                                }).setCheck(mb.mode == c)
                        };
                    g("Hidden", "hidden");
                    g("Solid", "solid");
                    g("Dashes", "dashes");
                    g("Dots", "dots");
                    g("Planks", "planks");
                    g("Tiles", "tiles");
                    d.addSeparator();
                    d.addItem("Double", m(this, this.toggleDoubleGrid)).setCheck(mb.double);
                    var f = new Ac;
                    g = function (a, c) {
                        f.addItem(a, function () {
                            ib.set("doors", nd.mode = c);
                            b.updateView()
                        }).setCheck(nd.mode == c)
                    };
                    g("Hidden", "hidden");
                    g("Simple", "simple");
                    g("Open", "open");
                    var k = new Ac;
                    k.addItem("Names", m(this, this.labelsShown),
                        Qc.isVisible && !Qc.showNumbers);
                    k.addItem("Numbers", m(this, this.labelsNumbers), Qc.isVisible && Qc.showNumbers);
                    k.addItem("Hidden", m(this, this.labelsHidden), !Qc.isVisible);
                    var q = this.getRoofSubmenu();
                    g = new Ac;
                    g.addSubmenu("Grid", d);
                    g.addSubmenu("Doors", f);
                    g.addSubmenu("Labels", k);
                    g.addSubmenu("Roof", q);
                    g.addItem("Arrows", m(this, this.toggleArrows), Sa.showArrows);
                    g.addItem("Props", m(this, this.toggleProps), Sa.showProps);
                    g.addItem("AO", m(this, this.toggleAO), Sa.showAO);
                    g.addItem("Lights", m(this, this.toggleLights),
                        Sa.showLights);
                    var l = new Ac;
                    k = function (a, c) {
                        l.addItem(a, function () {
                            b.applyArchiPreset(c)
                        })
                    };
                    k("Simple", "simple");
                    k("Castle", "castle");
                    k("Log house", "logs");
                    k("Modern", "modern");
                    k("Sci-fi", "scifi");

                    a.addItem("Elevation", m(this, this.switchView));
                    a.addItem("Blueprint", m(this, this.switchToBlueprint));
                    var g = new Ac;
                    this.fillExportMenu(g);
                    0 < g.items.length && a.addSubmenu("Export as", g);
                    a.addItem("Permalink...", m(this, this.onPermalink));

                    a.addSeparator();
                    a.addItem("Parameters...", m(this, this.showParams));
                    a.addSubmenu("Layers", g);
                    a.addSubmenu("Rooms", c);
                    a.addSubmenu("Walls", l);
                    a.addItem("Style...", m(this, this.showColors));
                    ub.prototype.fillViewMenu.call(this, a)
                },
                fillExportMenu: function (a) {
                    var b =
                        this;
                    ub.prototype.fillExportMenu.call(this, a);
                    a.addItem("JSON", function () {sb.export(b.house)});
                    a.addItem("PROTO",function(){sb.exportAsProto(b.house)});
                    a.addItem("Advanced...", m(this, this.multiExport))
                },
                reset: function (a) {
                    ub.prototype.reset.call(this, a);
                    this.floor.update(this.house);
                    this.floor.select(sd.curFloor);
                    this.updateView()
                },
                reroll: function () {
                    this.house.reroll();
                    this.updateView()
                },
                rerollRooms: function () {
                    this.house.reassignRooms();
                    this.updateView()
                },
                updateView: function () {
                    this.map.updatePlan(this.house, sd.curFloor);
                    this.layout()
                },
                toggleRoomSet: function () {
                    Z.gothicSet = !Z.gothicSet;
                    this.rerollRooms()
                },
                onKey: function (a, b) {
                    if (b) switch (a) {
                        case 13:
                            this.keyShift ? this.reroll() : this.keyCtrl ? this.rerollRooms() : this.reset();
                            break;
                        case 37:
                        case 40:
                            this.floor.prev();
                            break;
                        case 38:
                        case 39:
                            this.floor.next();
                            break;
                        case 48:
                            this.applyArchiPreset("scifi");
                            break;
                        case 54:
                            this.applyArchiPreset("simple");
                            break;
                        case 55:
                            this.applyArchiPreset("castle");
                            break;
                        case 56:
                            this.applyArchiPreset("logs");
                            break;
                        case 57:
                            this.applyArchiPreset("modern");
                            break;
                        case 65:
                            this.toggleArrows();
                            break;
                        case 66:
                            this.switchToBlueprint();
                            break;
                        case 68:
                            this.toggleDoors();
                            break;
                        case 69:
                            this.switchView();
                            break;
                        case 71:
                            this.keyCtrl ? this.toggleDoubleGrid() : this.keyShift ? this.toggleGridVisible() : this.toggleGridMode();
                            break;
                        case 76:
                            this.toggleLights();
                            break;
                        case 79:
                            this.toggleAO();
                            break;
                        case 80:
                            this.toggleProps();
                            break;
                        case 82:
                            this.toggleLabels();
                            break;
                        case 83:
                            this.showColors();
                            break;
                        case 88:
                            this.multiExport();
                            break;
                        default:
                            ub.prototype.onKey.call(this, a, b)
                    }
                },
                setFloor: function (a) {
                    this.floor.select(sd.curFloor = a);
                    this.updateView()
                },
                toggleGridMode: function () {
                    mb.togggleMode();
                    ib.set("grid", mb.mode);
                    this.updateView()
                },
                toggleGridVisible: function () {
                    mb.togggleVisibility();
                    ib.set("grid", mb.mode);
                    this.updateView()
                },
                toggleDoubleGrid: function () {
                    ib.set("doubleGrid", mb.double = !mb.double);
                    "hidden" == mb.mode ? this.toggleGridVisible() : this.updateView()
                },
                toggleDoors: function () {
                    nd.toggleMode();
                    ib.set("doors", nd.mode);
                    this.updateView()
                },
                toggleLabels: function () {
                    this.map.labels.set(!Qc.isVisible, Qc.showNumbers);
                    this.map.updateLabels(this.house)
                },
                getRoofSubmenu: function () {
                    var a = this,
                        b = new Ac;
                    b.addItem("Simple", function () {
                        a.setRoofMode(!0, !1)
                    }, Ea.displayed && !Ea.detailed);
                    b.addItem("Detailed", function () {
                        a.setRoofMode(!0, !0)
                    }, Ea.displayed && Ea.detailed);
                    b.addItem("Hidden", function () {
                        a.setRoofMode(!1, !1)
                    }, !Ea.displayed);
                    b.addSeparator();
                    b.addItem("Shade", Ea.detailed ? m(this, this.toggleRoofShading) : null, Ea.shading);
                    b.addItem("Fade", Ea.displayed ? m(this, this.toggleRoofFading) : null, Ea.fading);
                    b.addItem("Shrink", Ea.detailed ? m(this, this.toggleRoofShrinking) : null, Ea.shrinking);
                    return b
                },
                setRoofMode: function (a,
                                       b) {
                    Ea.displayed = a;
                    Ea.detailed = b;
                    !b && sd.curFloor >= this.house.floors.length && (sd.curFloor = this.house.floors.length - 1);
                    this.floor.update(this.house);
                    this.floor.select(sd.curFloor);
                    this.map.roof.reset();
                    this.updateView()
                },
                toggleRoofShading: function () {
                    Ea.shading = !Ea.shading;
                    this.map.roof.reset();
                    this.updateView()
                },
                toggleRoofFading: function () {
                    Ea.fading = !Ea.fading;
                    this.updateView()
                },
                toggleRoofShrinking: function () {
                    Ea.shrinking = !Ea.shrinking;
                    this.map.roof.reset();
                    this.updateView()
                },
                labelsShown: function () {
                    this.map.labels.set(!0,
                        !1);
                    this.map.updateLabels(this.house)
                },
                labelsNumbers: function () {
                    this.map.labels.set(!0, !0);
                    this.map.updateLabels(this.house)
                },
                labelsHidden: function () {
                    this.map.labels.set(!1, Qc.showNumbers);
                    this.map.updateLabels(this.house)
                },
                toggleArrows: function () {
                    ib.set("arrows", Sa.showArrows = !Sa.showArrows);
                    this.updateView()
                },
                toggleProps: function () {
                    ib.set("props", Sa.showProps = !Sa.showProps);
                    this.updateView()
                },
                toggleAO: function () {
                    ib.set("ao", Sa.showAO = !Sa.showAO);
                    this.map.updateShading()
                },
                toggleLights: function () {
                    ib.set("lights",
                        Sa.showLights = !Sa.showLights);
                    this.map.updateShading()
                },
                applyColors: function (a) {
                    ub.prototype.applyColors.call(this, a);
                    this.floor.select(sd.curFloor);
                    this.stage.set_color(J.colorPaper);
                    this.house.updateProps();
                    this.map.roof.reset();
                    this.updateView()
                },
                applyArchitecture: function (a) {
                    hb.setStyle(a);
                    this.house.updateProps();
                    this.map.roof.reset();
                    this.updateView()
                },
                applyArchiPreset: function (a) {
                    this.applyArchitecture(a)
                },
                showColors: function () {
                    if (null == ma.findForm(Sb)) {
                        var a = new Sb(m(this, this.applyColors),
                            "Natural;natural;Wooden;wooden;Plain;plain;Blueprint;blueprint;Black & white;bw".split(";"));
                        a.getName = Sb.swatches(null, ["colorWalls", "colorFloor"]);
                        J.fillForm(a);
                        ma.showDialog(a, "Style")
                    }
                },
                editName: function (a) {
                    var b = this;
                    if (null == ma.findForm(bh)) {
                        var c = new bh(a, function (c) {
                            a.name = "" != c ? c : null;
                            b.map.updateLabels(b.house)
                        });
                        ma.showDialog(c)
                    }
                },
                exportAsPNG: function () {
                    zb.planAsPNG(this.house, this.map, sd.curFloor);
                    this.map.updateLabels(this.house)
                },
                exportAsSVG: function () {
                    zb.planAsSVG(this.house, this.map,
                        sd.curFloor)
                },
                multiExport: function () {
                    null == ma.findForm(sc) && ma.showDialog(new sc(this.house, m(this, this.updateView)))
                },
                __class__: sd
            });
            var Od = function () {
                this.buttons = [];
                this.looped = !1;
                this.click = new gc;
                R.call(this)
            };
            h["dwellings.ui.ButtonStripe"] = Od;
            Od.__name__ = "dwellings.ui.ButtonStripe";
            Od.__super__ = R;
            Od.prototype = w(R.prototype, {
                addButton: function (a, b) {
                    var c = this;
                    a = new Kf(a, b);
                    a.click.add(function () {
                        c.click.dispatch(b)
                    });
                    a.select(!1);
                    this.addChild(a);
                    var d = this.buttons.length;
                    0 == d ? d = 0 : (d = this.buttons[d - 1], d = d.get_x() + d.rWidth);
                    a.set_x(d);
                    this.buttons.push(a);
                    this.rWidth = a.get_x() + a.rWidth;
                    this.rHeight = a.get_y() + a.rHeight;
                    return a
                },
                clear: function () {
                    this.removeChildren();
                    this.buttons = []
                },
                select: function (a) {
                    for (var b = 0, c = this.buttons; b < c.length;) {
                        var d = c[b];
                        ++b;
                        d.select(d.value == a)
                    }
                },
                selected: function () {
                    for (var a = 0, b = this.buttons.length; a < b;) {
                        var c = a++;
                        if (this.buttons[c].selected) return c
                    }
                    return -1
                },
                next: function () {
                    var a = this.selected(),
                        b = this.buttons.length;
                    (this.looped ||
                        a < b - 1) && this.click.dispatch(this.buttons[(a + 1) % b].value)
                },
                prev: function () {
                    var a = this.selected(),
                        b = this.buttons.length;
                    (this.looped || 0 < a) && this.click.dispatch(this.buttons[(a + b - 1) % b].value)
                },
                __class__: Od
            });
            var Kf = function (a, b) {
                this.selected = !1;
                this.click = new Yd;
                R.call(this);
                this.value = b;
                this.tf = Gc.get(a, Gc.format("ui_font_mono", 32));
                this.tf.mouseEnabled = !1;
                this.addChild(this.tf);
                a = this.tf.getCharBoundaries(0);
                this.setSize(2 * a.width + 2 * Kf.MARGIN, a.height + 2 * Kf.MARGIN);
                this.addEventListener("click", m(this,
                    this.onClick))
            };
            h["dwellings.ui.Button"] = Kf;
            Kf.__name__ = "dwellings.ui.Button";
            Kf.__super__ = R;
            Kf.prototype = w(R.prototype, {
                select: function (a) {
                    this.selected = a;
                    this.get_graphics().clear();
                    this.get_graphics().beginFill(ia.dark, a ? 1 : 0);
                    this.get_graphics().drawRect(0, 0, this.rWidth, this.rHeight);
                    this.tf.set_textColor(a ? ia.white : ia.dark);
                    this.tf.set_x((this.rWidth - this.tf.get_width()) / 2);
                    this.tf.set_y((this.rHeight - this.tf.get_height()) / 2);
                    this.set_buttonMode(!a)
                },
                onClick: function (a) {
                    this.get_buttonMode() &&
                    this.click.dispatch()
                },
                __class__: Kf
            });
            var sc = function (a, b) {
                Ga.call(this, ["PNG", "SVG"]);
                this.house = a;
                this.onExport = b;
                this.createRangeSection();
                this.hr();
                this.createTableSection();
                this.hr();
                this.createLayersSection();
                this.onRange()
            };
            h["dwellings.ui.ExportForm"] = sc;
            sc.__name__ = "dwellings.ui.ExportForm";
            sc.__super__ = Ga;
            sc.prototype = w(Ga.prototype, {
                getTitle: function () {
                    return "Export"
                },
                onButton: function (a) {
                    if ("PNG" == a || "SVG" == a) {
                        sc.lastDPC = this.inpDPC.get_value();
                        sc.lastCols = this.cmbCols.get_value();
                        var b = this.cmbFrom.get_value(),
                            c = this.cmbTo.get_value();
                        null != this.house.basement && (--b, --c);
                        this.btnLayers.expanded && (Sa.exportFloor = sc.lastFloor = this.chkFloor.get_value(), Sa.exportProps = sc.lastProps = this.chkProps.get_value(), Sa.exportAnnote = sc.lastAnnote = this.chkAnnote.get_value());
                        zb.multiFloor(this.house, b, c, sc.lastCols, sc.lastDPC, "PNG" == a);
                        Sa.exportFloor = !0;
                        Sa.exportProps = !0;
                        Sa.exportAnnote = !0;
                        this.dialog.hide();
                        if (null != this.onExport) this.onExport()
                    } else Ga.prototype.onButton.call(this, a)
                },
                createRangeSection: function () {
                    for (var a = this, b = new Pc, c = null != this.house.basement ? ["B", "GF"] : ["GF"], d = 1, g = this.house.floors.length; d < g;) {
                        var f = d++;
                        c.push(f + "F")
                    }
                    Ea.detailed && c.push("R");
                    b.add(new Vb("Floors"));
                    this.cmbFrom = Lc.ofInts(c);
                    this.cmbFrom.setSize(60, this.cmbFrom.get_height());
                    this.cmbFrom.set_centered(!0);
                    this.cmbFrom.set_value(0);
                    b.add(this.cmbFrom);
                    b.add(new Vb("-"));
                    this.cmbTo = Lc.ofInts(c);
                    this.cmbTo.setSize(60, this.cmbFrom.get_height());
                    this.cmbTo.set_centered(!0);
                    this.cmbTo.set_value(c.length -
                        1);
                    b.add(this.cmbTo);
                    this.cmbFrom.update.add(function (b) {
                        a.cmbTo.get_value() < b && a.cmbTo.set_value(b);
                        a.onRange()
                    });
                    this.cmbTo.update.add(function (b) {
                        a.cmbFrom.get_value() > b && a.cmbFrom.set_value(b);
                        a.onRange()
                    });
                    this.add(b)
                },
                createTableSection: function () {
                    var a = new Ef(2),
                        b = new Vb("As table");
                    b.valign = "center";
                    a.add(b);
                    b = new Pc;
                    b.setMargins(0, 4);
                    this.cmbCols = Lc.ofInts(["0"]);
                    this.cmbCols.update.add(m(this, this.onCols));
                    this.cmbCols.set_centered(!0);
                    this.cmbCols.set_width(60);
                    b.add(this.cmbCols);
                    var c =
                        new Vb("x");
                    b.add(c);
                    this.inpRows = new pc(null, !0);
                    this.inpRows.set_readOnly(!0);
                    this.inpRows.set_centered(!0);
                    this.inpRows.set_width(60);
                    b.add(this.inpRows);
                    a.add(b);
                    b = new Vb("Dots per cell");
                    b.valign = "center";
                    a.add(b);
                    b = new Pc;
                    b.setMargins(0, 10);
                    this.inpDPC = new rc(sc.lastDPC, 20, 500, 3);
                    this.inpDPC.set_centered(!0);
                    this.inpDPC.set_width(60);
                    b.add(this.inpDPC);
                    this.lblDPC = new Vb("max", !0);
                    this.lblDPC.set_color(ia.medium);
                    this.lblDPC.valign = "center";
                    b.add(this.lblDPC);
                    a.add(b);
                    this.add(a)
                },
                createLayersSection: function () {
                    var a =
                            this,
                        b = new tb,
                        c = new tb;
                    c.setMargins(0, 10);
                    this.chkFloor = new yb("Floor");
                    this.chkFloor.set_value(sc.lastFloor);
                    c.add(this.chkFloor);
                    this.chkProps = new yb("Props");
                    this.chkProps.set_value(sc.lastProps);
                    c.add(this.chkProps);
                    this.chkAnnote = new yb("Annotations");
                    this.chkAnnote.set_value(sc.lastAnnote);
                    c.add(this.chkAnnote);
                    this.btnLayers = new Qe;
                    this.btnLayers.set(!(sc.lastFloor && sc.lastProps && sc.lastAnnote));
                    this.btnLayers.click.add(function () {
                        a.btnLayers.expanded ? b.add(c) : b.remove(c);
                        b.layout();
                        a.layout();
                        Ua.__cast(a.parent, Jc).resize()
                    });
                    b.add(this.btnLayers);
                    this.btnLayers.expanded && b.add(c);
                    this.add(b)
                },
                onRange: function () {
                    this.nFloors = this.cmbTo.get_value() - this.cmbFrom.get_value() + 1;
                    for (var a = [], b = 0, c = this.nFloors; b < c;) {
                        var d = b++;
                        a.push(d + 1)
                    }
                    c = a;
                    a = [];
                    for (b = 0; b < c.length;) d = c[b], ++b, a.push(null == d ? "null" : "" + d);
                    this.cmbCols.load(a, c);
                    this.cmbCols.set_value(sc.lastCols <= this.nFloors ? sc.lastCols : this.nFloors);
                    this.onCols(this.cmbCols.get_value())
                },
                onCols: function (a) {
                    var b = Math.ceil(this.nFloors / a);
                    this.inpRows.set_text(null == b ? "null" : "" + b);
                    var c = this.house.floors[0].grid;
                    a = Math.floor(Math.sqrt(zb.MAX_SIZE / (a * (c.w + zb.MARGINS) * b * (c.h + zb.MARGINS))));
                    this.inpDPC.setRange(20, a);
                    this.lblDPC.set_text("max " + a)
                },
                __class__: sc
            });
            var Qe = function () {
                this.click = new Yd;
                this.expanded = !1;
                Vb.call(this, Qe.COLLAPSED, !0);
                this.addEventListener("click", m(this, this.onClick));
                this.set_buttonMode(!0);
                this.set(!1)
            };
            h["dwellings.ui.LayersButton"] = Qe;
            Qe.__name__ = "dwellings.ui.LayersButton";
            Qe.__super__ =
                Vb;
            Qe.prototype = w(Vb.prototype, {
                set: function (a) {
                    this.expanded = a;
                    this.set_text(a ? Qe.EXPANDED : Qe.COLLAPSED)
                },
                onClick: function (a) {
                    this.set(!this.expanded);
                    this.click.dispatch()
                },
                __class__: Qe
            });
            var qi = function () {
                Od.call(this)
            };
            h["dwellings.ui.FloorSelector"] = qi;
            qi.__name__ = "dwellings.ui.FloorSelector";
            qi.__super__ = Od;
            qi.prototype = w(Od.prototype, {
                update: function (a) {
                    this.clear();
                    null != a.basement && this.addButton("B", -1);
                    for (var b = 0, c = a.floors.length; b < c;) {
                        var d = b++;
                        this.addButton(0 ==
                        d ? "GF" : d + "F", d)
                    }
                    Ea.detailed && this.addButton("R", a.floors.length)
                },
                __class__: qi
            });
            var li = function () {
                this.menu = new gc;
                this.mode = new gc;
                Od.call(this);
                this.btnMenu = this.addButton("=", "menu");
                this.addButton("P", "plan");
                this.addButton("E", "elevation");
                this.click.add(m(this, this.onButton))
            };
            h["dwellings.ui.ModeSelector"] = li;
            li.__name__ = "dwellings.ui.ModeSelector";
            li.__super__ = Od;
            li.prototype = w(Od.prototype, {
                select: function (a) {
                    Od.prototype.select.call(this, a);
                    this.btnMenu.select(!0);
                    this.btnMenu.set_buttonMode(!0)
                },
                update: function (a) {
                    this.select(a ? "plan" : "elevation")
                },
                onButton: function (a) {
                    switch (a) {
                        case "elevation":
                            this.mode.dispatch(!1);
                            break;
                        case "plan":
                            this.mode.dispatch(!0);
                            break;
                        default:
                            this.menu.dispatch(this.buttons[0])
                    }
                },
                __class__: li
            });
            var Oe = function (a, b) {
                var c = this;
                hc.getTags = function () {
                    return oc.ALL
                };
                hc.getInfo = oc.getInfo;
                hc.resTags = oc.resolve;
                jd.call(this, a.tags, function (a) {
                    return b(a, c.cmbNFloors.get_value())
                });
                this.tags.update.add(m(this, this.onTag))
            };
            h["dwellings.ui.ParamsForm"] =
                Oe;
            Oe.__name__ = "dwellings.ui.ParamsForm";
            Oe.__super__ = jd;
            Oe.prototype = w(jd.prototype, {
                getTitle: function () {
                    return "Parameters"
                },
                addAbove: function () {
                    var a = new Pc;
                    a.setMargins(0, 10);
                    var b = new Vb("Number of floors");
                    b.valign = "center";
                    a.add(b);
                    this.cmbNFloors = Lc.ofInts("random 1 2 3 4 5 6 7 8".split(" "));
                    this.cmbNFloors.update.add(m(this, this.onNFloors));
                    this.cmbNFloors.set_centered(!0);
                    this.cmbNFloors.set_value(Oe.nFloors);
                    a.add(this.cmbNFloors);
                    this.content.add(a)
                },
                onNFloors: function (a) {
                    Oe.nFloors =
                        a;
                    0 < a && (this.tags.select("low", !1), this.tags.select("tall", !1))
                },
                onTag: function (a, b) {
                    b && -1 != oc.HEIGHT.indexOf(a) && (Oe.nFloors = this.cmbNFloors.set_value(0))
                },
                __class__: Oe
            });
            var bh = function (a, b) {
                var c = this;
                Ga.call(this, ["OK", "Cancel"]);
                this.onOK = b;
                b = new Gd;
                var d = a.name;
                this.txtName = new pc(null != d ? d : "");
                this.txtName.set_width(240);
                this.txtName.set_prompt(null != a.type ? Qh.capitalize(a.type.name) : "");
                this.txtName.enter.add(function (a) {
                    c.onEnter()
                });
                b.add(this.txtName);
                this.add(b)
            };
            h["dwellings.ui.RoomForm"] =
                bh;
            bh.__name__ = "dwellings.ui.RoomForm";
            bh.__super__ = Ga;
            bh.prototype = w(Ga.prototype, {
                getTitle: function () {
                    return "Room name"
                },
                onShow: function () {
                    Ga.prototype.onShow.call(this);
                    this.txtName.selecteAll();
                    this.stage.set_focus(this.txtName)
                },
                onButton: function (a) {
                    if ("OK" == a) {
                        if (null != this.onOK) this.onOK(this.txtName.get_text());
                        this.dialog.hide()
                    } else Ga.prototype.onButton.call(this, a)
                },
                __class__: bh
            });
            var oi = function () {
                Od.call(this)
            };
            h["dwellings.ui.SideSelector"] = oi;
            oi.__name__ = "dwellings.ui.SideSelector";
            oi.__super__ = Od;
            oi.prototype = w(Od.prototype, {
                update: function (a) {
                    this.clear();
                    a = fa.entrance.door.dir;
                    this.addButton("L", a.cw);
                    this.addButton("F", a);
                    this.addButton("R", a.ccw);
                    this.addButton("B", a.op);
                    this.looped = !0
                },
                __class__: oi
            });
            var ah = function (a) {
                var b = this;
                Ga.call(this, ["Copy", "Generate"]);
                this.onGenerate = a;
                a = new Gd;
                this.input = new pc(Va.getURL());
                this.input.enter.add(function (a) {
                    b.onEnter()
                });
                this.input.set_prompt("URL");
                this.input.set_width(400);
                a.add(this.input);
                this.add(a)
            };
            h["dwellings.ui.URLForm"] =
                ah;
            ah.__name__ = "dwellings.ui.URLForm";
            ah.__super__ = Ga;
            ah.prototype = w(Ga.prototype, {
                onShow: function () {
                    this.highlight()
                },
                getTitle: function () {
                    return "Permalink"
                },
                onEnter: function () {
                    this.onButton("Generate")
                },
                onButton: function (a) {
                    switch (a) {
                        case "Copy":
                            ie.get_generalClipboard().setData(2, this.input.get_text());
                            this.highlight();
                            break;
                        case "Generate":
                            this.onGenerate(this.input.get_text());
                            this.highlight();
                            break;
                        default:
                            Ga.prototype.onButton.call(this, a)
                    }
                },
                highlight: function () {
                    this.stage.set_focus(this.input);
                    this.input.selecteAll()
                },
                __class__: ah
            });
            var md = function () {
            };
            h["dwellings.utils.AreaUtils"] = md;
            md.__name__ = "dwellings.utils.AreaUtils";
            md.getRect = function (a) {
                var b = a[0],
                    c = b.j,
                    d = b.j,
                    g = b.i;
                b = b.i;
                for (var f = 1, k = a.length; f < k;) {
                    var q = f++;
                    q = a[q];
                    d < q.j && (d = q.j);
                    c > q.j && (c = q.j);
                    b < q.i && (b = q.i);
                    g > q.i && (g = q.i)
                }
                return new ri(c, g, d - c + 1, b - g + 1)
            };
            md.compactness = function (a) {
                var b = md.getRect(a);
                return a.length / (b.width * b.height)
            };
            md.findLargestRect = function (a, b) {
                var c = md.getRect(b),
                    d = c.top + c.height;
                c = c.left + c.width;
                for (var g = null, f = 0, k = 0, q = 0; q < b.length;) {
                    var l = b[q];
                    ++q;
                    for (var h = 0, n = d - l.i; h < n;)
                        for (var r = h++, t = 0, p = c - l.j; t < p;) {
                            var y = t++ + 1,
                                u = r + 1,
                                x = y * u;
                            if (!(x < f * k || x == f * k && (y < f || y + u > f + k))) {
                                x = !0;
                                for (var z = 0, A = u; z < A;)
                                    for (var m = z++, Q = 0, O = y; Q < O;) {
                                        var v = Q++;
                                        v = a.cell(l.i + m, l.j + v);
                                        if (-1 == b.indexOf(v)) {
                                            x = !1;
                                            break
                                        }
                                    }
                                x && (g = new ri(l.j, l.i, y, u), f = y, k = u)
                            }
                        }
                }
                return g
            };
            md.toBitmap = function (a, b) {
                for (var c = [], d = 0, g = a.h; d < g;) {
                    for (var f = d++, k = [], q = 0, l = a.w; q < l;) {
                        var h = q++;
                        k.push(-1 != b.indexOf(a.cell(f, h)))
                    }
                    c.push(k)
                }
                return c
            };
            md.fill = function (a, b, c) {
                var d = [],
                    g = [c];
                for (c = [c]; 0 < c.length;) {
                    var f = c.pop();
                    if (-1 != b.indexOf(f)) {
                        d.push(f);
                        for (var k = 0, q = qa.CARDINAL; k < q.length;) {
                            var l = q[k];
                            ++k;
                            l = a.cell(f.i + l.di, f.j + l.dj);
                            null != l && -1 == g.indexOf(l) && (c.push(l), g.push(l))
                        }
                    }
                }
                return d
            };
            var Gf = function (a, b) {
                qa.init();
                this.w = a;
                this.h = b;
                for (var c = [], d = 0, g = b + 1; d < g;) {
                    for (var f = d++, k = [], q = 0, l = a + 1; q < l;) {
                        var h = q++;
                        k.push(new ig(f, h))
                    }
                    c.push(k)
                }
                this.nodes = c;
                c = [];
                d = 0;
                for (g = b; d < g;) {
                    f = d++;
                    k = [];
                    q = 0;
                    for (l = a; q < l;) h = q++, k.push(new Hk(f, h));
                    c.push(k)
                }
                this.cells =
                    c;
                this.edges = new Ba;
                c = 0;
                for (d = b + 1; c < d;)
                    for (f = c++, g = 0, k = a + 1; g < k;) {
                        h = g++;
                        q = this.nodes[f][h];
                        l = this.edges;
                        var n = new Ba;
                        l.set(q, n);
                        l = n;
                        if (0 < f) {
                            n = this.nodes[f - 1][h];
                            var r = new If(q, this.nodes[f - 1][h], qa.NORTH);
                            l.set(n, r)
                        }
                        f < b && (n = this.nodes[f + 1][h], r = new If(q, this.nodes[f + 1][h], qa.SOUTH), l.set(n, r));
                        0 < h && (n = this.nodes[f][h - 1], r = new If(q, this.nodes[f][h - 1], qa.WEST), l.set(n, r));
                        h < a && (n = this.nodes[f][h + 1], h = new If(q, this.nodes[f][h + 1], qa.EAST), l.set(n, h))
                    }
            };
            h["dwellings.utils.Grid"] = Gf;
            Gf.__name__ =
                "dwellings.utils.Grid";
            Gf.cloud2gridNArea = function (a) {
                var b = a.length;
                if (0 == b) return null;
                for (var c = a[0], d = c.x, g = c.x, f = c.y, k = c.y, q = 1; q < b;) c = q++, c = a[c], d > c.x ? d = c.x : g < c.x && (g = c.x), f > c.y ? f = c.y : k < c.y && (k = c.y);
                g = new Gf(g - d + 1, k - f + 1);
                q = [];
                for (b = 0; b < a.length;) c = a[b], ++b, q.push(g.cell(c.y - f, c.x - d));
                return {
                    grid: g,
                    area: q,
                    trimx: d,
                    trimy: f
                }
            };
            Gf.prototype = {
                node: function (a, b) {
                    return 0 <= a && a <= this.h && 0 <= b && b <= this.w ? this.nodes[a][b] : null
                },
                cell: function (a, b) {
                    return 0 <= a && a < this.h && 0 <= b && b < this.w ? this.cells[a][b] :
                        null
                },
                nodeNdir2edge: function (a, b) {
                    b = this.node(a.i + b.di, a.j + b.dj);
                    return null != b ? this.edges.h[a.__id__].h[b.__id__] : null
                },
                cellNdir2edge: function (a, b) {
                    var c = a.i;
                    a = a.j;
                    return b == qa.NORTH ? this.edges.h[this.nodes[c][a].__id__].h[this.nodes[c][a + 1].__id__] : b == qa.EAST ? this.edges.h[this.nodes[c][a + 1].__id__].h[this.nodes[c + 1][a + 1].__id__] : b == qa.SOUTH ? this.edges.h[this.nodes[c + 1][a + 1].__id__].h[this.nodes[c + 1][a].__id__] : b == qa.WEST ? this.edges.h[this.nodes[c + 1][a].__id__].h[this.nodes[c][a].__id__] : null
                },
                nodeOffset: function (a,
                                      b, c) {
                    null == c && (c = 1);
                    return this.node(a.i + b.di * c, a.j + b.dj * c)
                },
                edge2cell: function (a) {
                    var b = a.a;
                    return a.dir == qa.EAST ? this.cell(b.i, b.j) : a.dir == qa.SOUTH ? this.cell(b.i, b.j - 1) : a.dir == qa.WEST ? this.cell(b.i - 1, b.j - 1) : a.dir == qa.NORTH ? this.cell(b.i - 1, b.j) : null
                },
                outline: function (a) {
                    a = this.outlineEx(a);
                    return 0 < a.length ? a[0] : []
                },
                outlineEx: function (a) {
                    for (var b = [], c = 0; c < a.length;) {
                        var d = a[c];
                        ++c;
                        var g = this.nodes[d.i][d.j],
                            f = this.nodes[d.i][d.j + 1],
                            k = this.nodes[d.i + 1][d.j + 1],
                            q = this.nodes[d.i + 1][d.j];
                        -
                            1 == a.indexOf(this.cell(d.i -
                            1, d.j)) && b.push(this.edges.h[g.__id__].h[f.__id__]);
                        -
                            1 == a.indexOf(this.cell(d.i, d.j + 1)) && b.push(this.edges.h[f.__id__].h[k.__id__]);
                        -
                            1 == a.indexOf(this.cell(d.i + 1, d.j)) && b.push(this.edges.h[k.__id__].h[q.__id__]);
                        -
                            1 == a.indexOf(this.cell(d.i, d.j - 1)) && b.push(this.edges.h[q.__id__].h[g.__id__])
                    }
                    for (a = []; !ca.isEmpty(b);) {
                        d = b.pop();
                        g = [d];
                        a.push(g);
                        do {
                            k = null;
                            c = 0;
                            for (f = [d.dir.cw, d.dir, d.dir.ccw]; c < f.length && (k = f[c], ++c, k = this.nodeNdir2edge(d.b, k), null == k || -1 == b.indexOf(k));) ;
                            M.remove(b, k);
                            g.push(k);
                            d = k
                        } while (d.b !=
                        g[0].a)
                    }
                    return a
                },
                isConnected: function (a) {
                    a = a.slice();
                    for (var b = [a.pop()]; 0 < a.length;) {
                        for (var c = !1, d = 0; d < a.length;) {
                            var g = a[d];
                            ++d;
                            for (var f = 0, k = qa.CARDINAL; f < k.length;) {
                                var q = k[f];
                                ++f;
                                q = this.cell(g.i + q.di, g.j + q.dj);
                                if (-1 != b.indexOf(q)) {
                                    c = !0;
                                    break
                                }
                            }
                            if (c) {
                                b.push(g);
                                M.remove(a, g);
                                break
                            }
                        }
                        if (!c) return !1
                    }
                    return !0
                },
                contour2area: function (a) {
                    var b = this.edge2cell(a[0]),
                        c = [b];
                    for (b = [b]; 0 < b.length;)
                        for (var d = b.pop(), g = 0, f = qa.CARDINAL; g < f.length;) {
                            var k = f[g];
                            ++g;
                            var q = this.cell(d.i + k.di, d.j + k.dj);
                            null != q && -1 ==
                            c.indexOf(q) && (k = this.cellNdir2edge(d, k), -1 == a.indexOf(k) && (c.push(q), b.push(q)))
                        }
                    return c
                },
                revertChain: function (a) {
                    for (var b = [], c = 0; c < a.length;) {
                        var d = a[c];
                        ++c;
                        b.unshift(this.edges.h[d.b.__id__].h[d.a.__id__])
                    }
                    return b
                },
                __class__: Gf
            };
            var ig = function (a, b) {
                this.i = a;
                this.j = b
            };
            h["dwellings.utils.Node"] = ig;
            ig.__name__ = "dwellings.utils.Node";
            ig.distance = function (a, b) {
                var c = a.i - b.i;
                a = a.j - b.j;
                return (0 <= c ? c : -c) + (0 <= a ? a : -a)
            };
            ig.prototype = {
                __class__: ig
            };
            var Hk = function (a, b) {
                this.i = a;
                this.j = b
            };
            h["dwellings.utils.Cell"] = Hk;
            Hk.__name__ = "dwellings.utils.Cell";
            Hk.prototype = {
                __class__: Hk
            };
            var qa = function (a, b) {
                this.di = a;
                this.dj = b
            };
            h["dwellings.utils.Dir"] = qa;
            qa.__name__ = "dwellings.utils.Dir";
            qa.init = function () {
                qa.NORTH.cw = qa.EAST;
                qa.NORTH.ccw = qa.WEST;
                qa.NORTH.op = qa.SOUTH;
                qa.EAST.cw = qa.SOUTH;
                qa.EAST.ccw = qa.NORTH;
                qa.EAST.op = qa.WEST;
                qa.SOUTH.cw = qa.WEST;
                qa.SOUTH.ccw = qa.EAST;
                qa.SOUTH.op = qa.NORTH;
                qa.WEST.cw = qa.NORTH;
                qa.WEST.ccw = qa.SOUTH;
                qa.WEST.op =
                    qa.EAST
            };
            qa.prototype = {
                __class__: qa
            };
            var Ik = function () {
            };
            h["dwellings.utils.PolyUtils"] = Ik;
            Ik.__name__ = "dwellings.utils.PolyUtils";
            Ik.outset = function (a, b) {
                for (var c = [], d = a.length, g = 0; g < d;) {
                    var f = g++,
                        k = a[(f + 1) % d],
                        q = a[(f + 2) % d];
                    f = k.subtract(a[f]);
                    f = f.clone();
                    f.normalize(1);
                    q = q.subtract(k);
                    q = q.clone();
                    q.normalize(1);
                    var l = q;
                    q = b / Math.sqrt((1 + (f.x * l.x + f.y * l.y)) / 2);
                    f.setTo(f.y, -f.x);
                    l.setTo(l.y, -l.x);
                    f = f.add(l);
                    null == q && (q = 1);
                    f = f.clone();
                    f.normalize(q);
                    k = k.add(f);
                    c.push(k)
                }
                return c
            };
            var $a = function () {
            };
            h["dwellings.utils.Polyomino"] = $a;
            $a.__name__ = "dwellings.utils.Polyomino";
            $a.mirrorx = null;
            $a.mirrory = null;
            $a.rotate = null;
            $a.cols = null;
            $a.rows = null;
            $a.create = function (a, b) {
                for (var c = 3 * b + 2, d = [], g = 0, f = c; g < f;) {
                    g++;
                    for (var k = [], q = 0, l = c; q < l;) q++, k.push(!1);
                    d.push(k)
                }
                l = d;
                $a.mirrorx = .5 > (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647;
                $a.mirrory = .5 > (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647;
                $a.rotate = .5 > (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647;
                d = [];
                d.push(Math.floor(a +
                    (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * (b + 1 - a)));
                d.push(Math.floor(a + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * (b + 1 - a)));
                d.push(Math.floor(a + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * (b + 1 - a)));
                $a.cols = d;
                d = [];
                d.push(Math.floor(a + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * (b + 1 - a)));
                d.push(Math.floor(a + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * (b + 1 - a)));
                d.push(Math.floor(a + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * (b + 1 - a)));
                $a.rows = d;
                $a.draw(l, ca.random($a.tetro.concat($a.pento)));
                d = [];
                g = 0;
                for (f = c; g < f;)
                    for (a = g++, k = 0, q = c; k < q;) b = k++, l[a][b] && d.push(new Hf(b, a));
                return d
            };
            $a.draw = function (a, b) {
                for (var c = 0, d = b.length; c < d;) {
                    var g = c++;
                    " " != b.charAt(g) && $a.set(a, g % 3, g / 3 | 0)
                }
            };
            $a.set = function (a, b, c) {
                $a.mirrorx && (b = 2 - b);
                $a.mirrory && (c = 2 - c);
                if ($a.rotate) {
                    var d = b;
                    b = c;
                    c = d
                }
                for (var g = 1, f = 0, k = b; f < k;) {
                    var q = f++;
                    g += $a.cols[q]
                }
                d = 1;
                f = 0;
                for (k = c; f < k;) q = f++, d += $a.rows[q];
                k = function () {
                    return ca.random([0, 0, 1])
                };
                f = g - k();
                b = g + k() + $a.cols[b];
                g = d - k();
                c = d + k() + $a.rows[c];
                $a.rect(a, f, g, b - f, c - g)
            };
            $a.rect =
                function (a, b, c, d, g) {
                    var f = c;
                    for (c += g; f < c;) {
                        g = f++;
                        for (var k = b, q = b + d; k < q;) {
                            var l = k++;
                            a[g][l] = !0
                        }
                    }
                };
            var Jd = function () {
            };
            h["dwellings.view.ArrowView"] = Jd;
            Jd.__name__ = "dwellings.view.ArrowView";
            Jd.draw = function (a, b, c, d) {
                null == d && (d = !1);
                if (Sa.showArrows && Sa.exportAnnote) {
                    d && b.reverse();
                    a.lineStyle(J.strokeNormal, J.colorInk);
                    Za.drawPolyline(a, ei.render(b, !1, 3));
                    d = b[b.length - 1];
                    var g = b[b.length - 2].subtract(d),
                        f = Jd.HEAD_SIZE;
                    null == f && (f = 1);
                    g = g.clone();
                    g.normalize(f);
                    f = g;
                    var k = Jd.HEAD_ANGLE /
                        2;
                    g = Math.sin(k);
                    k = Math.cos(k);
                    g = d.add(new F(f.x * k - f.y * g, f.y * k + f.x * g));
                    a.moveTo(d.x, d.y);
                    a.lineTo(g.x, g.y);
                    k = -Jd.HEAD_ANGLE / 2;
                    g = Math.sin(k);
                    k = Math.cos(k);
                    g = d.add(new F(f.x * k - f.y * g, f.y * k + f.x * g));
                    a.moveTo(d.x, d.y);
                    a.lineTo(g.x, g.y);
                    c && a.drawCircle(b[0].x, b[0].y, J.strokeNormal);
                    a.lineStyle()
                }
            };
            Jd.arc = function (a, b, c, d, g, f) {
                for (var k = c.subtract(b), q = 1 / Math.cos((g - d) / 4), l = [], h = 1; 4 > h;) {
                    c = h++ / 4;
                    null == c && (c = .5);
                    var n = d + (g - d) * c;
                    c = Math.sin(n);
                    n = Math.cos(n);
                    c = new F(k.x * n - k.y * c, k.y * n + k.x * c);
                    l.push(b.add(new F(c.x *
                        q, c.y * q)))
                }
                c = Math.sin(d);
                n = Math.cos(d);
                l.unshift(b.add(new F(k.x * n - k.y * c, k.y * n + k.x * c)));
                c = Math.sin(g);
                n = Math.cos(g);
                l.push(b.add(new F(k.x * n - k.y * c, k.y * n + k.x * c)));
                Jd.draw(a, l, f, !1)
            };
            var he = function (a) {
                this.onDoor = new gc;
                X.call(this);
                this.grid = a;
                this.floor = new X;
                this.addChild(this.floor);
                this.walls = new X;
                this.walls.set_visible(!1);
                this.addChild(this.walls);
                this.drawGrid()
            };
            h["dwellings.view.BlueprintView"] = he;
            he.__name__ = "dwellings.view.BlueprintView";
            he.ln = function (a, b, c, d,
                              g) {
                a.moveTo(b, c);
                a.lineTo(d, g)
            };
            he.__super__ = X;
            he.prototype = w(X.prototype, {
                get_showWalls: function () {
                    return this.walls.get_visible()
                },
                set_showWalls: function (a) {
                    return this.walls.set_visible(a)
                },
                drawGrid: function () {
                    var a = this.get_graphics();
                    a.clear();
                    a.lineStyle(J.strokeGrid, J.colorInk, J.alphaGrid);
                    for (var b = 1, c = this.grid.h; b < c;)
                        for (var d = b++, g = 1, f = this.grid.w; g < f;) {
                            var k = g++;
                            he.ln(a, k - .1, d, k + .1, d);
                            he.ln(a, k, d - .1, k, d + .1)
                        }
                },
                update: function (a, b) {
                    var c = this;
                    this.walls.removeChildren();
                    var d = this.floor.get_graphics();
                    d.clear();
                    d.lineStyle(J.strokeGrid, J.colorInk);
                    for (var g = 0; g < a.length;) {
                        var f = a[g];
                        ++g;
                        var k = f.i,
                            q = f.j;
                        he.ln(d, q, k, q + 1, k + 1);
                        for (f = 1; 4 > f;) {
                            var l = f++;
                            he.ln(d, q, k + l / 4, q + 1 - l / 4, k + 1);
                            he.ln(d, q + l / 4, k, q + 1, k + 1 - l / 4)
                        }
                    }
                    g = this.grid.outlineEx(a);
                    if (0 < g.length) {
                        this.shape = ca.max(g, function (a) {
                            return Ff.area(vb.toPoly(a))
                        });
                        d.lineStyle(J.strokeNormal, J.colorInk);
                        g = 0;
                        for (f = this.shape; g < f.length;) a = [f[g]], ++g, he.ln(d, a[0].a.j, a[0].a.i, a[0].b.j, a[0].b.i), this.walls.addChild(new si(a[0], function (a) {
                            return function () {
                                c.onDoor.dispatch(a[0])
                            }
                        }(a)));
                        -
                            1 == this.shape.indexOf(b) && (b = null);
                        null != b && this.drawEntrance(b)
                    } else this.shape = null
                },
                drawEntrance: function (a) {
                    var b = this.floor.get_graphics(),
                        c = a.dir,
                        d = new F(c.dj, c.di);
                    c = a.dir.ccw;
                    c = new F(c.dj, c.di);
                    var g = a.point();
                    a = new F(g.x + .25 * c.x, g.y + .25 * c.y);
                    var f = new F(g.x + .75 * c.x, g.y + .75 * c.y),
                        k = new F(g.x + .35 * c.x, g.y + .35 * c.y),
                        q = new F(k.x + .1 * d.x, k.y + .1 * d.y);
                    k = new F(g.x + .35 * c.x, g.y + .35 * c.y);
                    d = new F(k.x + -.1 * d.x, k.y + -.1 * d.y);
                    b.moveTo(a.x, a.y);
                    b.lineTo(f.x, f.y);
                    b.moveTo(a.x, a.y);
                    b.lineTo(q.x, q.y);
                    b.moveTo(a.x,
                        a.y);
                    b.lineTo(d.x, d.y)
                },
                __class__: he,
                __properties__: w(X.prototype.__properties__, {
                    set_showWalls: "set_showWalls",
                    get_showWalls: "get_showWalls"
                })
            });
            var si = function (a, b) {
                X.call(this);
                this.edge = a;
                var c = this.get_graphics();
                a = a.point();
                c.beginFill(J.colorInk, J.alphaGrid);
                c.drawRect(a.x - .1, a.y - .1, .2, .2);
                this.set_buttonMode(!0);
                this.addEventListener("click", function (a) {
                    b()
                })
            };
            h["dwellings.view._BlueprintView.DoorButton"] = si;
            si.__name__ = "dwellings.view._BlueprintView.DoorButton";
            si.__super__ =
                X;
            si.prototype = w(X.prototype, {
                __class__: si
            });
            var Sl = function () {
            };
            h["dwellings.view.ClutterView"] = Sl;
            Sl.__name__ = "dwellings.view.ClutterView";
            Sl.draw = function (a, b) {
                if (null != (null != a ? a.shapes : null) && 0 != a.shapes.length) {
                    b = b.get_graphics();
                    var c = 0;
                    for (a = a.shapes; c < a.length;) {
                        var d = a[c];
                        ++c;
                        if (J.colorProps != J.colorInk) {
                            b.lineStyle(2 * J.strokeNormal, J.colorInk, J.alphaGrid);
                            for (var g = 0; g < d.length;) {
                                var f = d[g];
                                ++g;
                                Za.drawPolygon(b, f)
                            }
                            b.lineStyle()
                        }
                        for (g = 0; g < d.length;) f = d[g], ++g, b.beginFill(J.colorProps),
                            Za.drawPolygon(b, f);
                        b.endFill();
                        J.colorProps != J.colorInk && (b.lineStyle(J.strokeNormal, J.colorInk, J.alphaGrid), d = d[0], g = Ff.area(d), d = Lf.insetEq(d, Math.sqrt(g) / 8), Za.drawPolygon(b, d), b.lineStyle())
                    }
                }
            };
            var nd = function () {
            };
            h["dwellings.view.DoorView"] = nd;
            nd.__name__ = "dwellings.view.DoorView";
            nd.draw = function (a, b) {
                if ("hidden" != nd.mode) {
                    var c = hb.proto,
                        d = b.type == ad.NULL ? 1 - c.innerTh : c.doorWidth,
                        g = b.edge1.point(),
                        f = b.edge1.dir,
                        k = new F(f.dj, f.di),
                        q = -d / 2;
                    f = g.add(new F(k.x * q, k.y * q));
                    q =
                        d / 2;
                    d = g.add(new F(k.x * q, k.y * q));
                    b.type == ad.REGULAR && ("simple" == nd.mode ? (a.lineStyle(c.innerTh + 2 * J.strokeNormal, J.colorInk, null, null, null, 0), q = -J.strokeNormal, b = f.add(new F(k.x * q, k.y * q)), q = J.strokeNormal, q = d.add(new F(k.x * q, k.y * q)), a.moveTo(b.x, b.y), a.lineTo(q.x, q.y), a.lineStyle(c.innerTh, J.colorStairs, null, null, null, 0), a.moveTo(f.x, f.y), a.lineTo(d.x, d.y)) : (q = d.subtract(f), k = nd.OPEN_ANGLE, b = Math.sin(k), k = Math.cos(k), c = new F(q.x * k - q.y * b, q.y * k + q.x * b), k = nd.OPEN_ANGLE / 2, b = Math.sin(k), k = Math.cos(k), b = new F(q.x *
                        k - q.y * b, q.y * k + q.x * b), q = 1 / Math.cos(nd.OPEN_ANGLE / 2), b.x *= q, b.y *= q, c = f.add(c), q = f.add(b), a.lineStyle(J.strokeGrid, J.colorInk), a.moveTo(d.x, d.y), a.curveTo(q.x, q.y, c.x, c.y), a.lineStyle(J.strokeNormal, J.colorInk, null, null, null, 2), a.moveTo(f.x, f.y), a.lineTo(c.x, c.y)), a.endFill())
                }
            };
            nd.toggleMode = function () {
                switch (nd.mode) {
                    case "hidden":
                        var a = "simple";
                        break;
                    case "simple":
                        a = "open";
                        break;
                    default:
                        a = "hidden"
                }
                nd.mode = a
            };
            var je = function () {
            };
            h["dwellings.view.EarthView"] = je;
            je.__name__ = "dwellings.view.EarthView";
            je.draw = function (a, b) {
                var c = hb.proto;
                je.hatch(a, Ik.outset(b, 2 * c.outerTh - c.innerTh / 2))
            };
            je.hatch = function (a, b) {
                a.lineStyle(J.strokeGrid, J.colorInk);
                var c = Math.max(5 * J.strokeGrid, .04);
                b = Id.rotateYX(b, je.angle.y, je.angle.x);
                var d = qg.rect(b),
                    g = d.get_bottom(),
                    f = d.get_topLeft();
                d = new F(f.x, f.y + c);
                for (var k = new F(d.x + 1, d.y); d.y < g;) {
                    for (var q = Lf.pierce(b, d, k); 2 <= q.length;) {
                        f = q.shift();
                        var l = -je.angle.y,
                            h = je.angle.x;
                        f = new F(f.x * h - f.y * l, f.y * h + f.x * l);
                        l = q.shift();
                        h = -je.angle.y;
                        var n = je.angle.x;
                        l = new F(l.x * n -
                            l.y * h, l.y * n + l.x * h);
                        a.moveTo(l.x, l.y);
                        a.lineTo(f.x, f.y)
                    }
                    d.y += c;
                    k.y += c
                }
                a.lineStyle()
            };
            var Ae = function (a) {
                X.call(this);
                null != a && this.update(a)
            };
            h["dwellings.view.ElevationView"] = Ae;
            Ae.__name__ = "dwellings.view.ElevationView";
            Ae.__super__ = X;
            Ae.prototype = w(X.prototype, {
                update: function (a) {
                    this.removeChildren();
                    for (var b = Object.create(null), c = 0, d = z.getClassFields(I); c < d.length;) {
                        var g = d[c];
                        ++c;
                        if ("color" == M.substr(g, 0, 5)) {
                            var f = L.field(I, g);
                            b[g] = f
                        }
                    }
                    c = 0;
                    for (d = a.layers; c < d.length;) {
                        g =
                            d[c];
                        ++c;
                        if (Ae.useFading) {
                            f = Math.pow(.8, g.dist);
                            var k = b,
                                q = k;
                            k = Object.keys(k);
                            for (var l = k.length, h = 0; h < l;) {
                                var n = k[h++];
                                I[n] = Ia.lerp(I.colorBg, q[n], f)
                            }
                        }
                        g instanceof ef && (f = Ua.__cast(g, ef), q = new ti, q.set_x(f.offset * A.columnWidth), q.draw(f.facade), this.addChild(q), k = new ui, k.update(f.facade), k.set_x(q.get_x()), this.addChild(k));
                        g instanceof jg && (f = Ua.__cast(g, jg), q = new Mf(a.height, f.dir), q.set_x(f.offset * A.columnWidth), this.addChild(q));
                        g instanceof kg && (g = Ua.__cast(g, kg), f = new vi(g.right), f.set_x(g.offset *
                            A.columnWidth), f.set_y(-A.baseHeight), this.addChild(f))
                    }
                },
                __class__: Ae
            });
            var Be = function () {
            };
            h["dwellings.view.EntranceView"] = Be;
            Be.__name__ = "dwellings.view.EntranceView";
            Be.draw = function (a, b, c) {
                null == c && (c = 1);
                var d = b.point(),
                    g = b.dir,
                    f = new F(g.dj, g.di);
                g = b.dir.ccw;
                b = new F(g.dj, g.di);
                g = hb.proto;
                var k = g.outerTh - g.innerTh / 2;
                k *= c;
                c = (1 + g.exitWidth) / 4;
                f = new F(f.x * c, f.y * c);
                c = Be.stepSize * g.nSteps + k;
                c = new F(b.x * c, b.y * c);
                c = [d.add(f), d.add(f).add(c), d.subtract(f).add(c), d.subtract(f)];
                a.beginFill(J.colorFloor);
                Za.drawPolygon(a, c);
                a.endFill();
                a.lineStyle(J.strokeNormal, J.colorInk);
                c = Be.stepSize;
                c = new F(b.x * c, b.y * c);
                k = new F(b.x * k, b.y * k);
                d.x += k.x;
                d.y += k.y;
                k = 0;
                for (g = g.nSteps; k < g;) {
                    k++;
                    var q = [d.add(f), d.add(f).add(c), d.subtract(f).add(c), d.subtract(f)];
                    Za.drawPolyline(a, q);
                    d.x += c.x;
                    d.y += c.y
                }
                a.endFill();
                Jd.draw(a, [new F(d.x + .7 * b.x, d.y + .7 * b.y), new F(d.x + .2 * b.x, d.y + .2 * b.y)], !1)
            };
            Be.drawBelow = function (a, b) {
                var c = b.point(),
                    d = b.dir,
                    g = new F(d.dj, d.di);
                d = b.dir.ccw;
                b = new F(d.dj, d.di);
                d = hb.proto;
                var f = d.outerTh - d.innerTh / 2,
                    k = (1 + d.exitWidth) / 4;
                g = new F(g.x * k, g.y * k);
                k = Be.stepSize * d.nSteps + f;
                k = new F(b.x * k, b.y * k);
                k = [c.add(g), c.add(g).add(k), c.subtract(g).add(k), c.subtract(g)];
                a.lineStyle(J.strokeNormal, J.colorInk);
                a.beginFill(J.colorPaper);
                Za.drawPolygon(a, k);
                a.endFill();
                a.lineStyle(J.strokeGrid, J.colorInk);
                c.x += b.x * f;
                c.y += b.y * f;
                f = 0;
                for (d = d.nSteps; f < d;) {
                    f++;
                    k = c.add(g);
                    var q = c.subtract(g);
                    a.moveTo(k.x, k.y);
                    a.lineTo(q.x, q.y);
                    k = Be.stepSize;
                    c.x += b.x * k;
                    c.y += b.y * k
                }
                a.endFill()
            };
            var pi = function () {
                X.call(this);
                this.roof = new $g;
                this.addChild(this.roof);
                this.labels = new Qc;
                this.addChild(this.labels);
                this.mouseChildren = !1
            };
            h["dwellings.view.FloorMap"] = pi;
            pi.__name__ = "dwellings.view.FloorMap";
            pi.__super__ = X;
            pi.prototype = w(X.prototype, {
                updatePlan: function (a, b) {
                    this.roof.update(a, b);
                    this.roof.set_visible(0 <= b);
                    null != this.view && this.removeChild(this.view);
                    b < a.floors.length ? (this.view = new Sa(0 <= b ? a.floors[b] : a.basement), this.addChild(this.view)) : this.view = null;
                    this.updateLabels(a);
                    this.addChild(this.labels)
                },
                updateLabels: function (a) {
                    var b = this.view;
                    this.labels.update(a, null != b ? b.plan : null)
                },
                updateShading: function () {
                    if (this.view instanceof Sa) {
                        var a = Ua.__cast(this.view, Sa);
                        a.shading.shadePlan(a.plan);
                        a.shading.shadow.set_visible(Sa.showAO);
                        a.shading.light.set_visible(Sa.showLights)
                    }
                },
                getRoom: function (a, b) {
                    if (null == this.view) return null;
                    b = Math.floor(b);
                    var c = Math.floor(a);
                    a = Ua.__cast(this.view, Sa).plan;
                    b = a.grid.cell(b, c);
                    return null != b ? a.getRoom(b) : null
                },
                __class__: pi
            });
            var mb = function () {
            };
            h["dwellings.view.GridView"] =
                mb;
            mb.__name__ = "dwellings.view.GridView";
            mb.draw = function (a, b, c, d) {
                if ("hidden" != mb.mode) {
                    var g = mb.double ? 2 : 1,
                        f = [qa.NORTH, qa.EAST];
                    if ("planks" == mb.mode) {
                        var k = c[0];
                        f = [f[(k.i & 1) == (k.j & 1) ? 0 : 1]];
                        g *= 4
                    }
                    a.lineStyle(J.strokeGrid, J.colorInk, J.alphaGrid * ("planks" == mb.mode && mb.double ? .5 : 1));
                    for (var q = 0; q < c.length;) {
                        k = c[q];
                        ++q;
                        for (var l = 0; l < f.length;) {
                            var h = f[l];
                            ++l;
                            var n = b.cellNdir2edge(k, h);
                            if (-1 == d.indexOf(n)) {
                                var r = n.a;
                                r = new F(r.j, r.i);
                                n = n.b;
                                mb.line(a, r, new F(n.j, n.i))
                            }
                            n = 1;
                            for (r = g; n < r;) {
                                var y =
                                        n++,
                                    p = y / g,
                                    u = b.cellNdir2edge(k, h.cw).point(p);
                                p = b.cellNdir2edge(k, h.ccw).point(1 - p);
                                mb.line(a, u, p);
                                "planks" == mb.mode && (y = (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3 + (0 == (y & 1) ? .25 : .75)) % 1, u = Kb.lerp(u, p, y), y = new F(h.dj, h.di), p = 1 / g, y = new F(u.x + y.x * p, u.y + y.y * p), mb.line(a, u, y))
                            }
                        }
                    }
                }
            };
            mb.line = function (a, b, c) {
                var d = mb.getPattern();
                d == mb.solid ? (a.moveTo(b.x, b.y), a.lineTo(c.x, c.y)) : Za.dashedLine(a, b, c, d)
            };
            mb.getPattern =
                function () {
                    switch (mb.mode) {
                        case "dashes":
                            return mb.dashes;
                        case "dots":
                            return mb.dots;
                        case "tiles":
                            return .5 > (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 ? mb.solid : [1 - Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1), Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) /
                                2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1)];
                        default:
                            return mb.solid
                    }
                };
            mb.togggleMode = function () {
                switch (mb.mode) {
                    case "dashes":
                        var a = "dots";
                        break;
                    case "dots":
                        a = "planks";
                        break;
                    case "planks":
                        a = "tiles";
                        break;
                    case "solid":
                        a = "dashes";
                        break;
                    case "tiles":
                        a = "hidden";
                        break;
                    default:
                        a = "solid"
                }
                mb.mode = a
            };
            mb.togggleVisibility = function () {
                mb.mode = "hidden" == mb.mode ? "dots" : "hidden"
            };
            var Kd = function () {
                X.call(this)
            };
            h["dwellings.view.Hatching"] = Kd;
            Kd.__name__ = "dwellings.view.Hatching";
            Kd.getPoisson = function (a) {
                a = new wi(a);
                for (a = new Ce(Kd.clusterSize / Kd.z, a); a.step();) ;
                return a
            };
            Kd.__super__ = X;
            Kd.prototype = w(X.prototype, {
                draw: function (a, b) {
                    this.get_graphics().clear();
                    for (var c = 0; c < a.length;) {
                        var d = a[c];
                        ++c;
                        d.inflate(b)
                    }
                    this.doHatching(a)
                },
                doHatching: function (a) {
                    Re.start();
                    a = Kd.getPoisson(a);
                    var b = a.points;
                    Ub.trace(Re.next(), {

                        className: "dwellings.view.Hatching",
                        methodName: "doHatching",
                        customParams: [b.length]
                    });
                    var c = Kd.nStrokes,
                        d = (c - 1) / 2,
                        g = new Ba;
                    this.get_graphics().lineStyle(J.strokeGrid, J.colorInk, J.alphaGrid);
                    for (var f = 0; f < b.length;) {
                        var k = [b[f]];
                        ++f;
                        var q = [];
                        g.set(k[0], q);
                        var l = a.getNeighbours(k[0]),
                            h = ca.min(l, function (a) {
                                return function (b) {
                                    return b != a[0] ? F.distance(a[0], b) : Infinity
                                }
                            }(k));
                        h = Math.atan2(k[0].y - h.y, k[0].x - h.x);
                        0 < h && (h += Math.PI / 6 * (1 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647));
                        var n = F.polar(.5 * Kd.clusterSize * Kd.z, h);
                        h = n.x;
                        n = n.y;
                        for (var r = Math.pow(2, Math.abs(((t.seed = 48271 * t.seed % 2147483647 |
                            0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1)) / (Math.sqrt(3) / 2), y = 0, p = c; y < p;) {
                            var u = y++,
                                x = (u - d) / d,
                                z = (u + 1) / c * r;
                            x = new F(k[0].x + -n * x, k[0].y + h * x);
                            u = x.x;
                            for (var A = x.y, m = [], Q = -1 * h * z, O = -1 * n * z, v = 1, w = 0; w < l.length;) {
                                var N = l[w];
                                ++w;
                                N = g.h[N.__id__];
                                if (null != N)
                                    for (var D = 0; D < N.length;) {
                                        var H = N[D];
                                        ++D;
                                        var ta = H[0];
                                        H = Kb.intersectLines(u, A, Q, O, ta.x, ta.y, H[1].x - ta.x, H[1].y - ta.y);
                                        null != H && 0 < H.x && H.x < v && 0 <=
                                        H.y && 1 >= H.y && (v = H.x)
                                    }
                            }
                            m.push(new F(x.x + Q * v, x.y + O * v));
                            Q = 1 * h * z;
                            z *= 1 * n;
                            O = 1;
                            for (v = 0; v < l.length;)
                                if (w = l[v], ++v, w = g.h[w.__id__], null != w)
                                    for (N = 0; N < w.length;) D = w[N], ++N, H = D[0], D = Kb.intersectLines(u, A, Q, z, H.x, H.y, D[1].x - H.x, D[1].y - H.y), null != D && 0 < D.x && D.x < O && 0 <= D.y && 1 >= D.y && (O = D.x);
                            m.push(new F(x.x + Q * O, x.y + z * O));
                            x = m;
                            q.push(x);
                            u = this.get_graphics();
                            A = x[0];
                            u.moveTo(A.x, A.y);
                            u = this.get_graphics();
                            x = x[1];
                            u.lineTo(x.x, x.y)
                        }
                    }
                    Ub.trace(Re.next(), {

                        className: "dwellings.view.Hatching",
                        methodName: "doHatching"
                    })
                },
                __class__: Kd
            });
            var Qc = function () {
                X.call(this);
                this.set_visible(Qc.isVisible)
            };
            h["dwellings.view.LabelsLayer"] = Qc;
            Qc.__name__ = "dwellings.view.LabelsLayer";
            Qc.__super__ = X;
            Qc.prototype = w(X.prototype, {
                update: function (a, b) {
                    this.removeChildren();
                    if (this.get_visible() && null != b) {
                        for (var c = [], d = 0, g = b.stairs; d < g.length;) {
                            var f = g[d];
                            ++d;
                            c.push(f.cell)
                        }
                        g = c;
                        f = hb.proto.innerTh;
                        c = 0;
                        for (d = b.rooms; c < d.length;) {
                            var k =
                                d[c];
                            ++c;
                            if (Qc.showNumbers) var q = E.string(a.rooms.indexOf(k) + 1);
                            else q = k.name, null == q && (q = k.type, q = null != q ? q.name : null);
                            if (null != q && "" != q) {
                                var l = ca.difference(k.area, g);
                                0 == l.length && (l = k.area);
                                l = md.findLargestRect(b.grid, l);
                                l = new sa(l.left, l.top, l.width, l.height);
                                l.inflate(-f, -f);
                                var h = q.split(" ");
                                if (1 == h.length) var n = this.createLabel(q, l);
                                else n = this.createLabel(q, l), h = this.createLabel(h.join("\n"), l), n = n.get_scaleX() > h.get_scaleX() ? n : h;
                                .01 > n.get_scaleX() && q != k.name && null != k.type.short && (n = this.createLabel(k.type.short,
                                    l));
                                n.set_x(l.x + l.width / 2);
                                n.set_y(l.y + l.height / 2);
                                this.addChild(n)
                            }
                        }
                        a = J.strokeNormal / .02;
                        b = J.colorFloor;
                        Sa.showAO && (b = Ia.scale(b, 1 - J.alphaAO));
                        if (null == this.glow || this.glow.get_color() != b || this.glow.get_blurX() != a) this.glow = new kd(b, 1, a, a, 255);
                        this.outlines(!0)
                    } else this.outlines(!1)
                },
                createLabel: function (a, b) {
                    a = new xi(a);
                    var c = Math.min(b.width / a.get_width(), b.height / a.get_height());
                    .02 < c && (c = .02 * Math.sqrt(c / .02));
                    b = Math.min(b.width / a.get_height(), b.height / a.get_width());
                    .02 < b && (b = .02 * Math.sqrt(b /
                        .02));
                    !Qc.showNumbers && b > 1.2 * c ? (a.set_scaleX(a.set_scaleY(b)), a.set_rotation(-90)) : a.set_scaleX(a.set_scaleY(c));
                    return a
                },
                set: function (a, b) {
                    Qc.isVisible = a;
                    Qc.showNumbers = b;
                    ib.set("labels", this.set_visible(a))
                },
                outlines: function (a) {
                    null == a && (a = !0);
                    this.set_filters(a && Sa.exportFloor && null != this.glow ? [this.glow] : null)
                },
                __class__: Qc
            });
            var xi = function (a) {
                X.call(this);
                var b = J.formatRoom;
                b.align = 0;
                b.leading = -(b.size >> 1);
                a = Gc.get(Qh.capitalize(a), b);
                a.set_x(-a.get_width() / 2);
                a.set_y(-a.get_height() / 2);
                this.addChild(a)
            };
            h["dwellings.view._LabelsLayer.Label"] = xi;
            xi.__name__ = "dwellings.view._LabelsLayer.Label";
            xi.__super__ = X;
            xi.prototype = w(X.prototype, {
                __class__: xi
            });
            var ch = function () {
                X.call(this)
            };
            h["dwellings.view.TopDownView"] = ch;
            ch.__name__ = "dwellings.view.TopDownView";
            ch.__super__ = X;
            ch.prototype = w(X.prototype, {
                __class__: ch
            });
            var Sa = function (a) {
                X.call(this);
                this.plan = a;
                Sa.exportFloor && this.drawOuter();
                if (Sa.exportFloor) {
                    for (var b = this.addLayer("floor"), c = 0, d = a.rooms; c <
                    d.length;) {
                        var g = d[c];
                        ++c;
                        this.drawRoom(b, g)
                    }
                    null != a.spiral && this.drawSpiral(b, a.spiral.entrance);
                    this.drawExit(b);
                    this.drawGrid()
                }
                Sa.exportProps && this.drawProps();
                this.drawStairs();
                this.shading = new rg;
                this.shading.shadePlan(a);
                Sa.exportFloor && (this.addChild(this.shading.shadow), this.shading.shadow.set_visible(Sa.showAO));
                Sa.exportFloor && (this.addChild(this.shading.light), this.shading.light.set_visible(Sa.showLights));
                this.addChild(hb.proto.create(a));
                this.drawWindows();
                this.drawDoors()
            };
            h["dwellings.view.PlanView"] =
                Sa;
            Sa.__name__ = "dwellings.view.PlanView";
            Sa.outerEdge2point = function (a) {
                var b = a.point();
                a = a.dir.ccw;
                var c = hb.proto;
                b.x += a.dj * (c.outerTh - c.innerTh) / 2;
                b.y += a.di * (c.outerTh - c.innerTh) / 2;
                return b
            };
            Sa.__super__ = ch;
            Sa.prototype = w(ch.prototype, {
                drawOuter: function () {
                    if (-1 == this.plan.getFloor()) {
                        var a = vb.toPoly(this.plan.contour);
                        je.draw(this.addLayer("outer"), a)
                    }
                },
                drawRoom: function (a, b) {
                    b = vb.toPoly(b.contour);
                    a.beginFill(J.colorFloor);
                    a.lineStyle(J.strokeGrid, J.colorFloor);
                    Za.drawPolygon(a, b);
                    a.endFill()
                },
                drawGrid: function () {
                    var a = this.addLayer("grid");
                    if ("planks" == mb.mode)
                        for (var b = 0, c = this.plan.rooms; b < c.length;) {
                            var d = c[b];
                            ++b;
                            mb.draw(a, this.plan.grid, d.area, this.plan.contour)
                        } else mb.draw(a, this.plan.grid, this.plan.area, this.plan.contour)
                },
                drawProps: function () {
                    if (Sa.showProps) {
                        var a = new X;
                        a.set_name("props");
                        this.addChild(a);
                        for (var b = 0, c = this.plan.rooms; b < c.length;) {
                            var d = c[b];
                            ++b;
                            var g = 0;
                            for (d = d.props.set; g < d.length;) {
                                var f = d[g];
                                ++g;
                                a.addChild(f)
                            }
                        }
                        b = 0;
                        for (c = this.plan.rooms; b < c.length;) d =
                            c[b], ++b, Sl.draw(d.clutter, a)
                    }
                },
                drawStairs: function () {
                    var a = this,
                        b = this.addLayer("stairs"),
                        c = ca.find(this.plan.stairs, function (b) {
                            return ca.some(a.plan.stairs, function (a) {
                                return b != a ? b.cell == a.cell : !1
                            })
                        });
                    null != c && wc.draw(b, c, !0);
                    for (var d = 0, g = this.plan.stairs; d < g.length;) {
                        var f = g[d];
                        ++d;
                        f.cell != (null != c ? c.cell : null) && wc.draw(b, f)
                    }
                },
                drawDoors: function () {
                    for (var a = this.addLayer("doors"), b = 0, c = this.plan.getDoors(); b < c.length;) {
                        var d = c[b];
                        ++b;
                        nd.draw(a, d)
                    }
                },
                drawWindows: function () {
                    for (var a = this.addLayer("windows"),
                             b = 0, c = this.plan.windows; b < c.length;) {
                        var d = c[b];
                        ++b;
                        var g = Sa.outerEdge2point(d);
                        Nf.draw(a, g, d.dir)
                    }
                    if (null != this.plan.spiral) {
                        d = this.plan.spiral.entrance;
                        var f = d.a;
                        g = new F(f.j, f.i);
                        b = hb.proto;
                        c = b.spiralRad + b.outerTh / 2;
                        f = d.dir;
                        d = new F(f.dj, f.di);
                        d = Math.atan2(d.y, d.x) - .75 * Math.PI;
                        Nf.arc(a, g, c, d - b.winWidth / c / 2, d + b.winWidth / c / 2)
                    }
                },
                drawExit: function (a) {
                    null != this.plan.entrance && Be.draw(a, this.plan.entrance.door)
                },
                drawSpiral: function (a, b) {
                    var c = b.dir,
                        d = new F(c.dj, c.di),
                        g = Math.atan2(d.y, d.x),
                        f = hb.proto.spiralRad;
                    c = b.a;
                    d = new F(c.j, c.i);
                    a.beginFill(J.colorStairs);
                    Za.drawArc(a, d.x, d.y, f, g - 1.5 * Math.PI, g);
                    a.lineTo(d.x, d.y);
                    a.endFill();
                    a.lineStyle(J.strokeNormal, J.colorInk);
                    c = Math.round(f * Math.PI * .75 / .1);
                    for (var k = 0, q = c + 1; k < q;) {
                        var l = k++;
                        l = F.polar(f, g - 1.5 * Math.PI * l / c);
                        l = d.add(l);
                        a.moveTo(d.x, d.y);
                        a.lineTo(l.x, l.y)
                    }
                    a.lineStyle();
                    g = f + hb.proto.outerTh + .2;
                    c = b.dir;
                    l = new F(c.dj, c.di);
                    b = g;
                    null == b && (b = 1);
                    l = l.clone();
                    l.normalize(b);
                    b = l;
                    this.plan.getFloor() < this.plan.house.floors.length - 1 && Jd.arc(a, d, d.add(b), -Math.PI / 6,
                        -Math.PI / 2, !0);
                    0 < this.plan.getFloor() && Jd.arc(a, d, d.add(b), -Math.PI, 4 * -Math.PI / 3, !1)
                },
                addLayer: function (a, b) {
                    var c = new X;
                    c.set_name(a);
                    null != b && c.set_blendMode(b);
                    this.addChild(c);
                    return c.get_graphics()
                },
                __class__: Sa
            });
            var Ea = function () {
            };
            h["dwellings.view.RoofPainter"] = Ea;
            Ea.__name__ = "dwellings.view.RoofPainter";
            Ea.draw = function (a, b, c) {
                null == c && (c = 1);
                Ea.detailed ? (null != b.entrance && Be.draw(a, b.entrance.door, c), Ea.drawDetailed(a, b, c)) : (null != b.entrance && Be.drawBelow(a, b.entrance.door),
                    Ea.drawSimple(a, b))
            };
            Ea.drawSimple = function (a, b) {
                b = b.contour;
                a.beginFill(J.colorPaper);
                a.lineStyle(J.strokeNormal, J.colorInk);
                var c = vb.toPoly(b);
                Za.drawPolygon(a, c);
                a.endFill();
                a.lineStyle(J.strokeGrid, J.colorInk);
                c = b.length;
                for (var d = 0; d < c;) {
                    var g = d++,
                        f = b[g],
                        k = b[(g + 1) % c];
                    f.dir != k.dir && (g = k.a, g = new F(g.j, g.i), k = k.b, k = new F(k.j, k.i), f = f.a, f = k.subtract(new F(f.j, f.i)), f.normalize(1 / Math.sqrt(2)), f.setTo(-f.y, f.x), f = g.add(f), a.moveTo(g.x, g.y), a.lineTo(f.x, f.y))
                }
                a.lineStyle()
            };
            Ea.drawDetailed = function (a,
                                        b, c) {
                null == c && (c = 1);
                var d = hb.proto,
                    g = d.outerTh - d.innerTh / 2 - J.strokeNormal / 2;
                d = vb.toGoodPoly(b.contour);
                d = Ik.outset(d, g * c);
                c = Ea.getSkele(d, !1);
                g = new Ba;
                for (var f = 0, k = c.segments; f < k.length;) {
                    var q = k[f];
                    ++f;
                    if (null == c.gables || -1 == c.gables.indexOf(q)) {
                        var l = Ea.shadeFace(a, c, q);
                        g.set(q, l);
                        Ea.hatchFace(a, c, q)
                    }
                }
                a.lineStyle(J.strokeNormal, J.colorInk);
                Za.drawPolygon(a, d);
                a.lineStyle();
                if (0 < J.alphaGrid)
                    for (f = 0, k = c.bones; f < k.length;) d = k[f], ++f, q = d.a.point, Ea.coverRidge(a, q, d.b.point, null != c.leaves.h.__keys__[q.__id__],
                        (g.h[d.left.__id__] + g.h[d.right.__id__]) / 2);
                d = b.getFloor();
                b = b.house.chimneys;
                for (c = b.keys(); c.hasNext();) f = c.next(), g = b.get(f), g == d && (g = new F(f.j + .5, f.i + .5), a.lineStyle(J.strokeNormal, J.colorInk), a.beginFill(J.colorChimney), a.drawRect(g.x - .2, g.y - .2, .4, .4), a.beginFill(J.colorBlack), a.drawRoundRect(g.x - .1, g.y - .1, .2, .2, .1), a.endFill(), a.lineStyle())
            };
            Ea.drawTower = function (a, b) {
                var c = 2 * Math.PI,
                    d = hb.proto;
                b = b.spiral.entrance.a;
                b = new F(b.j, b.i);
                d = d.spiralRad + d.outerTh;
                for (var g = Math.floor(c * d / Ea.TILEW),
                         f = 0, k = g; f < k;) {
                    var q = f++;
                    if (Ea.shading) {
                        var l = F.polar(1, Ea.LIGHTDIR);
                        var h = F.polar(d, c * (q + .5) / g);
                        l = l.x * h.x + l.y * h.y
                    } else l = 0;
                    l = Ia.scale(J.colorRoof, Math.pow(Ea.TOWER_L, l));
                    h = c * q / g;
                    var n = c * (q + 1) / g;
                    a.beginFill(l);
                    a.lineStyle(J.strokeGrid, l);
                    Za.drawArc(a, b.x, b.y, d, h, n, !0);
                    a.lineTo(b.x, b.y);
                    a.endFill()
                }
                a.lineStyle(J.strokeGrid, J.colorInk, J.alphaGrid);
                l = Math.floor(d / Ea.TILEL);
                f = 0;
                for (k = l; f < k;) {
                    q = f++;
                    0 < q && (h = rd.regular(g, d * q / l), Id.asTranslate(h, b.x, b.y), Za.dashedPolyline(a, h, !0, Ea.getPattern()));
                    h = d * (q + 1) /
                        l;
                    n = d * q / l;
                    q = (q + 1) / l;
                    null == q && (q = .5);
                    q = Math.round(c * (h + (n - h) * q) / Ea.TILEW);
                    for (var r = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647, y = 0, p = q; y < p;) {
                        var u = y++;
                        u = c * (u + r) / q;
                        Za.dashedLine(a, F.polar(h, u).add(b), F.polar(n, u).add(b), Ea.getPattern())
                    }
                }
                a.lineStyle(J.strokeNormal, J.colorInk);
                a.drawCircle(b.x, b.y, d);
                a.drawCircle(b.x, b.y, J.strokeNormal / 2);
                a.lineStyle()
            };
            Ea.getSkele = function (a, b) {
                null == b && (b = !1);
                for (var c = [], d = 0; d < a.length;) {
                    var g = a[d];
                    ++d;
                    c.push(g.clone())
                }
                for (var f = c, k = new Ne(f, !0); 0 < k.ribs.length;) {
                    c = [];
                    for (d = 0; d < f.length;) g = f[d], ++d, c.push(g.add(F.polar(.1 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), Math.PI * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647))));
                    f = c;
                    k = new Ne(f, !0)
                }
                c = 0;
                for (d = k.bones; c < d.length;) {
                    var q = d[c];
                    ++c;
                    g = q.a.point;
                    g.setTo(Math.round(2 * g.x) / 2, Math.round(2 * g.y) / 2);
                    g = q.b.point;
                    g.setTo(Math.round(2 * g.x) / 2, Math.round(2 * g.y) / 2)
                }
                c = 0;
                for (d = k.segments; c < d.length;) g = d[c], ++c, g.dir.x =
                    Math.round(g.dir.x), g.dir.y = Math.round(g.dir.y);
                c = 0;
                for (d = a.length; c < d;) g = c++, Jk.set(f[g], a[g]);
                b && k.addGables();
                return k
            };
            Ea.shadeFace = function (a, b, c) {
                if (Ea.shading) {
                    var d = F.polar(1, Ea.LIGHTDIR);
                    var g = c.dir;
                    d = d.x * g.y - d.y * g.x
                } else d = 0;
                g = Ia.scale(J.colorRoof, Math.pow(Ea.FACE_L, d));
                b = b.getFace(c);
                a.beginFill(g);
                Za.drawPolygon(a, b);
                a.endFill();
                return d
            };
            Ea.hatchFace = function (a, b, c) {
                b = b.getFace(c);
                b = Id.rotateYX(b, -c.dir.y, c.dir.x);
                var d = qg.aabb(b),
                    g = d[0];
                d = d[1];
                a.lineStyle(J.strokeGrid, J.colorInk, J.alphaGrid);
                for (var f = Math.ceil(F.distance(g, d) / Ea.TILEW), k = 1; k < f;) {
                    var q = k++;
                    q = Kb.lerp(g, d, (q + .05) / f);
                    for (q = Lf.pierce(b, q, new F(q.x, q.y + 1)); 2 <= q.length;) {
                        var l = Id.rotateYX([q.pop(), q.pop()], c.dir.y, c.dir.x);
                        Za.dashedPolyline(a, l, null, Ea.getPattern())
                    }
                }
                a.lineStyle()
            };
            Ea.coverRidge = function (a, b, c, d, g) {
                if (d) {
                    var f = c.subtract(b),
                        k = Ea.TILEW / 2;
                    null == k && (k = 1);
                    f = f.clone();
                    f.normalize(k);
                    b = b.add(f)
                }
                f = Math.pow(Ea.FACE_L, g);
                k = Ia.lerp(J.colorRoof, J.colorInk, J.alphaGrid);
                g = Ia.scale(J.colorRoof, f);
                f = Ia.scale(k, f);
                k = Math.floor(F.distance(b,
                    c) / Ea.TILEL);
                for (var q = 0; q < k;) {
                    var l = q++,
                        h = Kb.lerp(b, c, l / k),
                        n = Kb.lerp(b, c, (l + 1) / k);
                    a.lineStyle(Ea.TILEW + J.strokeGrid, f);
                    a.moveTo(h.x, h.y);
                    a.lineTo(n.x, n.y);
                    d && 0 == l && (a.lineStyle(), a.beginFill(J.colorInk), a.drawCircle(h.x, h.y, (Ea.TILEW + J.strokeGrid) / 2), a.endFill());
                    a.lineStyle(Ea.TILEW - J.strokeGrid, g);
                    a.moveTo(h.x, h.y);
                    a.lineTo(n.x, n.y)
                }
            };
            Ea.getPattern = function () {
                if (10 <= Ea.patterns.length) {
                    var a = Math.floor((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * (Ea.patterns.length - 1)),
                        b = Ea.patterns[a];
                    Ea.patterns.splice(a,
                        1)
                } else b = [.4 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3), .1 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3), .4 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3), .1 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 +
                    (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3)];
                Ea.patterns.push(b);
                return b
            };
            var $g = function () {
                X.call(this)
            };
            h["dwellings.view.RoofStack"] = $g;
            $g.__name__ = "dwellings.view.RoofStack";
            $g.__super__ = X;
            $g.prototype = w(X.prototype, {
                reset: function () {
                    this.house = null
                },
                update: function (a, b) {
                    if (Ea.shrinking || a != this.house) {
                        this.removeChildren();
                        this.house = a;
                        this.layers = [];
                        var c = 0;
                        for (a = a.floors; c < a.length;) {
                            var d = a[c];
                            ++c;
                            d = new yi(d);
                            this.layers.push(d);
                            this.addChild(d)
                        }
                    }
                    c = 0;
                    for (a = this.layers.length; c < a;) d = c++, this.layers[d].display(Ea.displayed && d < b, Ea.fading && d < b - 1, Ea.shrinking ? 2 / (1 + Math.max(b - d, 1)) : 1)
                },
                __class__: $g
            });
            var yi = function (a) {
                this.drawn = !1;
                X.call(this);
                this.plan = a;
                var b = a.grid.w;
                a = a.grid.h;
                this.fader = new X;
                var c = Ea.detailed ? .1 : .3;
                this.fader.get_graphics().beginFill(J.colorPaper, c);
                this.fader.get_graphics().drawRect(-2, -2, b + 4, a + 4);
                this.addChild(this.fader)
            };
            h["dwellings.view._RoofStack.Layer"] = yi;
            yi.__name__ = "dwellings.view._RoofStack.Layer";
            yi.__super__ = X;
            yi.prototype = w(X.prototype, {
                display: function (a, b, c) {
                    null == c && (c = 1);
                    a && !this.drawn && (this.draw(c), this.drawn = !0);
                    this.set_visible(a);
                    this.fader.set_visible(b)
                },
                draw: function (a) {
                    null == a && (a = 1);
                    Ea.draw(this.get_graphics(), this.plan, a);
                    null != this.plan.spiral && this.plan.isTopFloor() && Ea.drawTower(this.get_graphics(), this.plan)
                },
                __class__: yi
            });
            var rg = function () {
                this.shadow = new xe;
                this.shadow.set_blendMode(9);
                this.light = new xe;
                this.light.set_blendMode(0);
                var a = Ia.rgb2hsv(J.colorWall);
                a = Ia.hsv(a.x,
                    a.y, .2);
                var b = [],
                    c = 0;
                b.push({
                    color: a,
                    ratio: c,
                    alpha: J.alphaAO * (c * c - 2 * c + 1)
                });
                c = .25;
                b.push({
                    color: a,
                    ratio: c,
                    alpha: J.alphaAO * (c * c - 2 * c + 1)
                });
                c = .5;
                b.push({
                    color: a,
                    ratio: c,
                    alpha: J.alphaAO * (c * c - 2 * c + 1)
                });
                c = .75;
                b.push({
                    color: a,
                    ratio: c,
                    alpha: J.alphaAO * (c * c - 2 * c + 1)
                });
                c = 1;
                b.push({
                    color: a,
                    ratio: c,
                    alpha: J.alphaAO * (c * c - 2 * c + 1)
                });
                this.shadowStops = b;
                b = Ia.lerp(J.colorFloor, 16763904);
                a = Ia.rgb2hsv(b);
                b = [];
                c = 0;
                c = c * c * (3 - 2 * c);
                b.push(Ia.hsl(a.x - 30 * c, a.y + (1 - a.y) * c, 1));
                c = .2;
                c = c * c * (3 - 2 * c);
                b.push(Ia.hsl(a.x - 30 * c, a.y + (1 - a.y) * c, 1));
                c = .4;
                c = c * c * (3 - 2 * c);
                b.push(Ia.hsl(a.x - 30 * c, a.y + (1 - a.y) * c, 1));
                c = .6;
                c = c * c * (3 - 2 * c);
                b.push(Ia.hsl(a.x - 30 * c, a.y + (1 - a.y) * c, 1));
                c = .8;
                c = c * c * (3 - 2 * c);
                b.push(Ia.hsl(a.x - 30 * c, a.y + (1 - a.y) * c, 1));
                c = 1;
                c = c * c * (3 - 2 * c);
                b.push(Ia.hsl(a.x - 30 * c, a.y + (1 - a.y) * c, 1));
                this.lightColors = b;
                b = [];
                b.push(0);
                b.push(51);
                b.push(102);
                b.push(153);
                b.push(204);
                b.push(255);
                this.lightRatios = b
            };
            h["dwellings.view.Shading"] = rg;
            rg.__name__ = "dwellings.view.Shading";
            rg.getLightAlphas = function (a) {
                var b = [],
                    c = 0;
                b.push(a * (1 - c *
                    c * (3 - 2 * c)));
                c = .2;
                b.push(a * (1 - c * c * (3 - 2 * c)));
                c = .4;
                b.push(a * (1 - c * c * (3 - 2 * c)));
                c = .6;
                b.push(a * (1 - c * c * (3 - 2 * c)));
                c = .8;
                b.push(a * (1 - c * c * (3 - 2 * c)));
                c = 1;
                b.push(a * (1 - c * c * (3 - 2 * c)));
                return b
            };
            rg.prototype = {
                shadePlan: function (a) {
                    var b = this;
                    this.shadow.get_graphics().clear();
                    this.light.get_graphics().clear();
                    if (0 < J.alphaAO)
                        for (var c = 0, d = a.rooms; c < d.length;) {
                            var g = d[c];
                            ++c;
                            this.shadePoly(g.get_poly())
                        }
                    c = function (a, c, d, f) {
                        null == f && (f = .5);
                        b.spotLight(a.point(f + c * (.5 - f)), 1, 1, d.get_poly(), !1)
                    };
                    if (null != a.entrance) {
                        var f =
                            a.entrance.door;
                        g = a.edge2room(f);
                        c(f, 0, g)
                    }
                    d = a.spiral;
                    if (null != d) {
                        f = hb.proto.spiralRad;
                        g = this.shadow.get_graphics();
                        var k = d.entrance.a,
                            q = new F(k.j, k.i);
                        od.beginRadialFill(g, this.shadowStops, q, new F(q.x + f, q.y), !0);
                        var l = q.x,
                            h = q.y;
                        k = d.exit.dir;
                        k = new F(k.dj, k.di);
                        var n = Math.atan2(k.y, k.x) + Math.PI;
                        k = d.exit.dir;
                        k = new F(k.dj, k.di);
                        Za.drawArc(g, l, h, f, n, Math.atan2(k.y, k.x) + 2.5 * Math.PI, !0);
                        g.lineTo(q.x, q.y);
                        g.endFill();
                        g = a.findSpiral();
                        a.isTopFloor() || c(d.entrance, f, g, 0);
                        a.isGroundFloor() || c(d.exit, f, g, 1)
                    }
                    g =
                        vb.toGoodPoly(a.contour);
                    c = 0;
                    for (d = a.getDoors(); c < d.length;) f = d[c], ++c, this.spotLight(f.edge1.point(), 1, 1, g, !1);
                    if (Sa.showLights && 0 < J.alphaLight)
                        for (c = 0, d = a.rooms; c < d.length;) g = d[c], ++c, a = g.light, null != a && a.on && this.spotLight(a.pos, a.radius, J.alphaLight * a.power, g.get_poly())
                },
                shadePoly: function (a) {
                    for (var b = a.length, c = [], d = 0; d < b;) {
                        var g = d++,
                            f = a[(g + b - 1) % b],
                            k = a[g],
                            q = a[(g + 1) % b],
                            l = k.subtract(f);
                        l.normalize(1);
                        f = q.subtract(k);
                        f.normalize(1);
                        var h = l.x * f.x + l.y * f.y,
                            n = l.x * f.y - l.y * f.x;
                        c.push((0 == n ? 0 : 0 > n ? -1 :
                            1) * Math.sqrt((1 - h) / (1 + h)))
                    }
                    h = c;
                    n = .5;
                    c = 0;
                    for (d = b; c < d;) {
                        g = c++;
                        f = a[g];
                        k = a[(g + 1) % b];
                        var r = F.distance(f, k);
                        k = n * (Math.max(h[g], 0) + Math.max(h[(g + 1) % b], 0));
                        k > r && (n *= r / k)
                    }
                    r = this.shadow.get_graphics();
                    c = 0;
                    for (d = b; c < d;) {
                        g = c++;
                        f = a[g];
                        k = a[(g + 1) % b];
                        l = k.subtract(f);
                        l.normalize(1);
                        var t = h[g];
                        q = h[(g + 1) % b];
                        0 < t && (g = n * t, f = new F(f.x + l.x * g, f.y + l.y * g));
                        0 < q && (q *= -n, k = new F(k.x + l.x * q, k.y + l.y * q));
                        g = new F(-l.y, l.x);
                        g = new F(g.x * n, g.y * n);
                        od.beginLinearFill(r, this.shadowStops, f, f.add(g));
                        Za.drawPolygon(r, [f, k, k.add(g), f.add(g)]);
                        r.endFill()
                    }
                    c = 0;
                    for (d = b; c < d;) {
                        g = c++;
                        f = a[(g + b - 1) % b];
                        k = a[g];
                        q = a[(g + 1) % b];
                        l = k.subtract(f);
                        l.normalize(1);
                        f = q.subtract(k);
                        f.normalize(1);
                        q = h[g];
                        if (0 < q) g = n * q, t = new F(k.x + f.x * g, k.y + f.y * g), g = new F(-f.y, f.x), g = new F(g.x * n, g.y * n), od.beginRadialFill(r, this.shadowStops, t.add(g), t, !0), q *= -n, Za.drawPolygon(r, [k, t, t.add(g), new F(k.x + l.x * q, k.y + l.y * q)]);
                        else {
                            g = new F(-l.y, l.x);
                            g = new F(g.x * n, g.y * n);
                            q = new F(-f.y, f.x);
                            t = new F(q.x * n, q.y * n);
                            od.beginRadialFill(r, this.shadowStops, k, k.add(t));
                            q = k.add(t);
                            t = k.add(t);
                            var p = -n;
                            f = new F(t.x + f.x * p, t.y + f.y * p);
                            t = k.add(g);
                            Za.drawPolygon(r, [k, q, f, new F(t.x + l.x * n, t.y + l.y * n), k.add(g)])
                        }
                        r.endFill()
                    }
                },
                spotLight: function (a, b, c, d, g) {
                    null == g && (g = !0);
                    a = od.radialGrad(a, new F(a.x + b, a.y));
                    g && (g = this.light.get_graphics(), g.beginGradientFill(1, this.lightColors, rg.getLightAlphas(c), this.lightRatios, a), Za.drawPolygon(g, d));
                    0 < J.alphaAO && (g = this.shadow.get_graphics(), b = [], b.push(16777215), b.push(16777215), b.push(16777215), b.push(16777215), b.push(16777215), b.push(16777215), g.beginGradientFill(1,
                        b, rg.getLightAlphas(c), this.lightRatios, a), Za.drawPolygon(g, d))
                },
                __class__: rg
            };
            var wc = function () {
            };
            h["dwellings.view.StaircaseView"] = wc;
            wc.__name__ = "dwellings.view.StaircaseView";
            wc.draw = function (a, b, c) {
                null == c && (c = !1);
                var d = b.cell,
                    g = new F(d.j + .5, d.i + .5),
                    f = b.dir;
                if (null == f) wc.drawTrapdoor(a, g);
                else {
                    var k = new F(f.dj, f.di),
                        q = new F(.25 * k.x, .25 * k.y);
                    d = f.cw;
                    var l = new F(d.dj, d.di);
                    d = f.ccw;
                    d = new F(d.dj, d.di);
                    l = new F(.25 * l.x, .25 * l.y);
                    d = new F(.25 * d.x, .25 * d.y);
                    var h = hb.proto.landings,
                        n = null;
                    f == b.to.dir.op ? (wc.drawStair(a, g, f, .5, 1), n = [g.subtract(new F(3 * q.x, 3 * q.y)), g]) : f == b.to.dir ? (b.isGoingUp() || (n = l, l = d, d = n), wc.drawStair(a, g.add(l).subtract(q), f, .5, .5), wc.drawStair(a, g.add(d).subtract(q), f.op, .5, .5), f = wc.getRectSize(f, 1, .5), wc.drawRect(a, g.add(q), f.x, f.y), h || wc.drawTurning(a, g, Math.atan2(k.y, k.x), -.5, .5), k = g.add(l), n = [new F(k.x + -3 * q.x, k.y + -3 * q.y), g.add(l).subtract(q), g.add(l).add(q), g.add(d).add(q), g.add(d).subtract(q)]) : f == b.to.dir.cw ? (wc.drawStair(a, g.add(d).subtract(q), f,
                        .5, .5), wc.drawStair(a, g.add(l).add(q), f.cw, .5, .5), wc.drawRect(a, g.add(d).add(q), .5, .5), h || wc.drawTurning(a, g, Math.atan2(k.y, k.x), -.5, 0), k = g.add(d), n = [new F(k.x + -3 * q.x, k.y + -3 * q.y), g.add(d).subtract(q), g.add(d).add(q), g.add(l).add(q)]) : f == b.to.dir.ccw && (wc.drawStair(a, g.add(l).subtract(q), f, .5, .5), wc.drawStair(a, g.add(d).add(q), f.ccw, .5, .5), wc.drawRect(a, g.add(l).add(q), .5, .5), h || wc.drawTurning(a, g, Math.atan2(k.y, k.x), 0, .5), k = g.add(l), n = [new F(k.x + -3 * q.x, k.y + -3 * q.y), g.add(l).subtract(q), g.add(l).add(q),
                        g.add(d).add(q)
                    ]);
                    c ? (b.isGoingUp() && (b = l, l = d, d = b), b = g.add(l).subtract(q), k = g.add(l), b = [b, new F(k.x + -3 * q.x, k.y + -3 * q.y)], k = g.add(d), g = [new F(k.x + -3 * q.x, k.y + -3 * q.y), g.add(d).subtract(q)], Jd.draw(a, b, !1), Jd.draw(a, g, !0)) : (g = b.isGoingUp(), Jd.draw(a, n, g, !g))
                }
            };
            wc.drawStair = function (a, b, c, d, g) {
                var f = Math.round(g / .1),
                    k = g / f,
                    q = new F(c.dj, c.di),
                    l = -(g - k) / 2,
                    h = new F(b.x + q.x * l, b.y + q.y * l);
                l = (g - k) / 2;
                b = new F(b.x + q.x * l, b.y + q.y * l);
                c = wc.getRectSize(c, d, k);
                for (d = 0; d < f;) k = d++, k = Kb.lerp(h, b, k / (f - 1)), wc.drawRect(a, k, c.x,
                    c.y)
            };
            wc.drawTurning = function (a, b, c, d, g) {
                var f = Math.round(Math.sqrt(2) * Math.PI * .25 * (g - d) / .1);
                a.lineStyle(J.strokeNormal, J.colorInk);
                for (var k = 1; k < f;) {
                    var q = k++ / f;
                    null == q && (q = .5);
                    q = F.polar(1, c + (d + (g - d) * q) * Math.PI);
                    var l = .5 / Math.max(Math.abs(q.x), Math.abs(q.y));
                    q.x *= l;
                    q.y *= l;
                    q = b.add(q);
                    a.moveTo(b.x, b.y);
                    a.lineTo(q.x, q.y)
                }
            };
            wc.getRectSize = function (a, b, c) {
                return new F(a == qa.NORTH || a == qa.SOUTH ? b : c, a == qa.EAST || a == qa.WEST ? b : c)
            };
            wc.drawRect = function (a, b, c, d) {
                a.lineStyle(J.strokeNormal, J.colorInk);
                a.beginFill(J.colorStairs);
                a.drawRect(b.x - c / 2, b.y - d / 2, c, d);
                a.endFill()
            };
            wc.drawTrapdoor = function (a, b) {
                a.lineStyle(J.strokeNormal, J.colorInk);
                a.beginFill(J.colorFloor);
                a.drawRect(b.x - .15, b.y - .15, .3, .3);
                a.endFill();
                a.lineStyle(J.strokeNormal, J.colorInk);
                var c = new F(b.x + -.15, b.y + -.15),
                    d = new F(b.x + .15, b.y + .15);
                a.moveTo(c.x, c.y);
                a.lineTo(d.x, d.y);
                c = new F(b.x + -.15, b.y + .15);
                d = new F(b.x + .15, b.y + -.15);
                a.moveTo(c.x, c.y);
                a.lineTo(d.x, d.y);
                a.endFill()
            };
            var J = function () {
            };
            h["dwellings.view.Style"] = J;
            J.__name__ = "dwellings.view.Style";
            J.formatRoom = null;
            J.setPalette = function (a, b) {
                null == b && (b = !1);
                J.colorInk = a.getColor("colorInk", 3158840);
                J.colorPaper = a.getColor("colorPaper", 14869216);
                J.colorFloor = a.getColor("colorFloor", 15790320);
                J.colorWall = a.getColor("colorWalls", 3158840);
                J.colorProps = a.getColor("colorProps", 15790320);
                J.colorWindow = a.getColor("colorWindows", 15790320);
                J.colorStairs = a.getColor("colorStairs", 15790320);
                J.colorRoof = a.getColor("colorRoof", 15790320);
                J.colorLabels = a.getColor("colorLabels", 3357542);
                J.strNormal10 = a.getFloat("strNormal10",
                    .3);
                J.strGrid10 = a.getFloat("strGrid10", .2);
                J.alphaGrid = a.getFloat("alphaGrid", .5);
                J.alphaAO = a.getFloat("alphaAO", .3);
                J.alphaLight = a.getFloat("alphaLights", 0);
                J.fontRoom = a.getFont("fontRoom", J.fontRoom);
                J.hatching = a.getBool("hatching", J.hatching);
                J.strokeNormal = J.strNormal10 / 10;
                J.strokeGrid = J.strGrid10 / 10;
                J.formatRoom = $c.font2format(J.fontRoom);
                J.formatRoom.color = J.colorLabels;
                J.colorBlack = ca.min([J.colorInk, J.colorPaper, J.colorWall], function (a) {
                    return Ia.brightness(a)
                });
                J.colorChimney = ca.max([J.colorWall,
                    J.colorFloor
                ], function (a) {
                    return Ia.brightness(a)
                });
                b && ib.set("style", a.data())
            };
            J.restorePalette = function () {
                var a = ib.get("style");
                null != a ? J.setPalette($c.fromData(a)) : J.setPalette($c.fromAsset("natural"))
            };
            J.fillForm = function (a) {
                a.addTab("Colors");
                a.addColor("colorInk", "Ink", J.colorInk);
                a.addColor("colorPaper", "Paper", J.colorPaper);
                a.addColor("colorFloor", "Floor", J.colorFloor);
                a.addColor("colorWalls", "Walls", J.colorWall);
                a.addColor("colorProps", "Props", J.colorProps);
                a.addColor("colorWindows", "Windows",
                    J.colorWindow);
                a.addColor("colorStairs", "Stairs", J.colorStairs);
                a.addColor("colorRoof", "Roof", J.colorRoof);
                a.addColor("colorLabels", "Labels", J.colorLabels);
                a.addTab("Misc.");
                a.addFloat("strNormal10", "Normal stroke", J.strNormal10, .01, .5);
                a.addFloat("strGrid10", "Thin stroke", J.strGrid10, .01, .5);
                a.addFloat("alphaGrid", "Grid opacity", J.alphaGrid, 0, 1);
                a.addFloat("alphaAO", "Shading", J.alphaAO, 0, 1);
                a.addFloat("alphaLights", "Lighting", J.alphaLight, 0, 1);
                a.addFont("fontRoom", "Room labels", J.fontRoom, !0, "ui_font");
                a.addCheck("hatching", "Hatching", J.hatching)
            };
            var hb = function () {
                this.landings = !0;
                this.insulated = this.rounded = !1;
                X.call(this)
            };
            h["dwellings.view.WallsView"] = hb;
            hb.__name__ = "dwellings.view.WallsView";
            hb.proto = null;
            hb.setStyle = function (a, b) {
                null == b && (b = !0);
                switch (a) {
                    case "castle":
                        var c = new zi;
                        break;
                    case "logs":
                        c = new Ai;
                        break;
                    case "modern":
                        c = new Bi;
                        break;
                    case "scifi":
                        c = new Ci;
                        break;
                    default:
                        c = new Di
                }
                hb.proto = c;
                b && ib.set("architecture", a)
            };
            hb.restoreStyle = function () {
                var a = ib.get("architecture");
                hb.setStyle(null != a ? a : "simple", !1)
            };
            hb.__super__ = X;
            hb.prototype = w(X.prototype, {
                create: function (a) {
                    return z.createInstance(Ua.getClass(this), []).draw(a)
                },
                draw: function (a) {
                    this.plan = a;
                    this.set_name("walls");
                    this.get_graphics().clear();
                    this.color = J.colorInk;
                    this.outline = !0;
                    this.drawAll();
                    J.colorWall != J.colorInk && (this.get_graphics().endFill(), this.get_graphics().lineStyle(), this.color = J.colorWall, this.outline = !1, this.drawAll(), J.hatching && this.drawHatching(this.get_graphics()));
                    return this
                },
                paint: function () {
                    this.get_graphics().beginFill(this.color);
                    this.outline && this.get_graphics().lineStyle(2 * J.strokeNormal, this.color, null, null, null, 2, 1)
                },
                drawAll: function () {
                    for (var a = this.get_graphics(), b = this.plan.grid, c = [], d = this.outerTh - 2 * J.strokeNormal, g = 0, f = this.plan.contour; g < f.length;) {
                        var k = f[g];
                        ++g;
                        c.push(k);
                        var q = k.dir.ccw,
                            l = new F(q.dj, q.di),
                            h = (this.outerTh - this.innerTh) / 2;
                        l.x *= h;
                        l.y *= h;
                        q = k.a;
                        var n = new F(q.j, q.i);
                        q = k.b;
                        h = new F(q.j, q.i);
                        this.paint();
                        var r = this.plan.entrance;
                        if (k == (null != r ? r.door : null)) {
                            h = this.exitWidth / 2;
                            q = 0;
                            var t = .5 - h;
                            q = [k.point(q),
                                k.point(t)
                            ];
                            Id.asTranslate(q, l.x, l.y);
                            q = rd.stripe(q, d, 0);
                            Za.drawPolygon(a, q);
                            q = .5 + h;
                            t = 1;
                            q = [k.point(q), k.point(t)];
                            Id.asTranslate(q, l.x, l.y);
                            q = rd.stripe(q, d, 0);
                            Za.drawPolygon(a, q)
                        } else r = this.plan.spiral, k == (null != r ? r.entrance : null) ? k = [k.point(this.spiralRad), h] : (r = this.plan.spiral, k = k == (null != r ? r.exit : null) ? [n, k.point(1 - this.spiralRad)] : [n, h]), k = Id.translate(k, l.x, l.y), q = rd.stripe(k, d, .1), Za.drawPolygon(a, q);
                        this.onVertex(n)
                    }
                    this.drawCorners();
                    null != this.plan.spiral && this.drawShaft();
                    d = this.innerTh -
                        2 * J.strokeNormal;
                    h = this.doorWidth / 2 + J.strokeNormal;
                    g = 0;
                    for (f = this.plan.rooms; g < f.length;)
                        for (l = f[g], ++g, n = 0, r = l.contour; n < r.length;) k = r[n], ++n, -1 == c.indexOf(k) && (c.push(b.edges.h[k.b.__id__].h[k.a.__id__]), this.paint(), q = l.getDoor(k), null == q ? (q = k.a, t = new F(q.j, q.i), q = k.b, q = [t, new F(q.j, q.i)], q = rd.stripe(q, d), Za.drawPolygon(a, q)) : q.type != ad.NULL && (q = 0, t = .5 - h, q = [k.point(q), k.point(t)], q = rd.stripe(q, d, 0), Za.drawPolygon(a, q), q = .5 + h, t = 1, q = [k.point(q), k.point(t)], q = rd.stripe(q, d, 0), Za.drawPolygon(a, q)),
                            q = k.a, this.onVertex(new F(q.j, q.i)), a.endFill(), a.lineStyle())
                },
                onVertex: function (a) {
                },
                drawCorners: function () {
                    this.paint();
                    for (var a = this.plan.contour.length, b = 0; b < a;) {
                        var c = b++,
                            d = this.plan.contour[c];
                        c = this.plan.contour[(c + 1) % a];
                        var g = this.plan.spiral;
                        if (c != (null != g ? g.entrance : null))
                            if (g = d.b, g = new F(g.j, g.i), d.dir == c.dir.ccw) this.onOuterCorner(g, d.dir, c.dir);
                            else if (d.dir == c.dir.cw) this.onInnerCorner(g, d.dir, c.dir)
                    }
                },
                onOuterCorner: function (a, b, c) {
                    b = (new F(b.dj, b.di)).subtract(new F(c.dj, c.di));
                    c =
                        (this.outerTh - this.innerTh) / 2;
                    a = a.add(new F(b.x * c, b.y * c));
                    this.drawSquare(a, this.outerTh / 2 - J.strokeNormal)
                },
                onInnerCorner: function (a, b, c) {
                    b = (new F(b.dj, b.di)).subtract(new F(c.dj, c.di));
                    c = -((this.outerTh - this.innerTh) / 2);
                    a = a.add(new F(b.x * c, b.y * c));
                    this.drawSquare(a, this.outerTh / 2 - J.strokeNormal)
                },
                drawShaft: function () {
                    var a = this.plan.spiral.entrance,
                        b = a.a,
                        c = new F(b.j, b.i);
                    b = a.dir;
                    b = Math.atan2(b.di, b.dj);
                    var d = b - 1.5 * Math.PI,
                        g = this.get_graphics();
                    this.paint();
                    Za.drawArc(g, c.x, c.y, this.spiralRad + this.outerTh -
                        J.strokeNormal, d, b);
                    var f = c.add(F.polar(this.spiralRad, b));
                    g.lineTo(f.x, f.y);
                    Za.drawArc(g, c.x, c.y, this.spiralRad + J.strokeNormal, b, d, !1);
                    b = null;
                    this.plan.isTopFloor() && (b = a.b, b = [c, new F(b.j, b.i)]);
                    this.plan.isGroundFloor() && (b = this.plan.spiral.exit.a, b = [new F(b.j, b.i), c]);
                    null != b && (this.paint(), a = rd.stripe(b, this.innerTh - 2 * J.strokeNormal), Za.drawPolygon(g, a))
                },
                drawSquare: function (a, b) {
                    this.get_graphics().drawRect(a.x - b, a.y - b, 2 * b, 2 * b)
                },
                drawHatching: function (a) {
                    var b = md.getRect(this.plan.area);
                    b = [new Ei(b.left,
                        b.top, b.width, b.height)];
                    if (null != this.plan.spiral) {
                        var c = this.plan.spiral.entrance.a;
                        c = new F(c.j, c.i);
                        b.push(new Fi(c.x, c.y, this.spiralRad))
                    }
                    c = new Kd;
                    c.draw(b, this.outerTh);
                    this.addChild(c);
                    b = new X;
                    c.addChild(b);
                    c.set_mask(b);
                    b.get_graphics().drawGraphicsData(a.readGraphicsData(!1))
                },
                __class__: hb
            });
            var Nf = function () {
            };
            h["dwellings.view.WindowView"] = Nf;
            Nf.__name__ = "dwellings.view.WindowView";
            Nf.curve = function (a, b) {
                var c = hb.proto,
                    d = c.rounded;
                if (J.colorWall != J.colorInk) {
                    var g =
                            b.length - 1,
                        f = b[0],
                        k = b[g];
                    if (!d) {
                        var q = f.subtract(b[1]),
                            l = J.strokeNormal / q.get_length();
                        b[0] = new F(f.x + q.x * l, f.y + q.y * l);
                        q = k.subtract(b[g - 1]);
                        l = J.strokeNormal / q.get_length();
                        b[g] = new F(k.x + q.x * l, k.y + q.y * l)
                    }
                    a.lineStyle(c.outerTh, J.colorInk, null, null, null, d ? 1 : 0);
                    Za.drawPolyline(a, b);
                    b[0] = f;
                    b[g] = k
                }
                a.lineStyle(c.outerTh - 2 * J.strokeNormal, J.colorWindow, null, null, null, d ? 1 : 0);
                Za.drawPolyline(a, b);
                c.insulated && (a.lineStyle(J.strokeNormal, J.colorInk), Za.drawPolyline(a, b));
                a.endFill()
            };
            Nf.draw = function (a, b, c) {
                c =
                    new F(c.dj, c.di);
                var d = hb.proto.winWidth / 2,
                    g = -d;
                g = new F(b.x + c.x * g, b.y + c.y * g);
                b = new F(b.x + c.x * d, b.y + c.y * d);
                Nf.curve(a, [g, b])
            };
            Nf.arc = function (a, b, c, d, g) {
                var f = 2 + Math.floor(6 * (g - d));
                c = F.polar(c, 0);
                for (var k = [], q = 0; q < f;) {
                    var l = q++ / (f - 1);
                    null == l && (l = .5);
                    var h = d + (g - d) * l;
                    l = Math.sin(h);
                    h = Math.cos(h);
                    k.push(b.add(new F(c.x * h - c.y * l, c.y * h + c.x * l)))
                }
                Nf.curve(a, k)
            };
            var zi = function () {
                hb.call(this);
                this.innerTh = .15;
                this.doorWidth = this.outerTh = .3;
                this.exitWidth = .4;
                this.winWidth = .16;
                this.spiralRad = .6;
                this.nSteps =
                    4;
                this.landings = !1
            };
            h["dwellings.view.architecture.Castle"] = zi;
            zi.__name__ = "dwellings.view.architecture.Castle";
            zi.__super__ = hb;
            zi.prototype = w(hb.prototype, {
                onVertex: function (a) {
                    this.paint();
                    this.drawSquare(a, .75 * this.innerTh - J.strokeNormal)
                },
                onOuterCorner: function (a, b, c) {
                    var d = this.get_graphics(),
                        g = this.outerTh;
                    b = new F(b.dj, b.di);
                    c = new F(c.dj, c.di);
                    d.moveTo(a.x, a.y);
                    var f = -g;
                    f = new F(a.x + b.x * f, a.y + b.y * f);
                    d.lineTo(f.x, f.y);
                    f = -g;
                    var k = new F(a.x + b.x * f, a.y + b.y * f);
                    f = -g;
                    f = new F(k.x +
                        c.x * f, k.y + c.y * f);
                    d.lineTo(f.x, f.y);
                    k = new F(a.x + b.x * g, a.y + b.y * g);
                    f = -g;
                    f = new F(k.x + c.x * f, k.y + c.y * f);
                    d.lineTo(f.x, f.y);
                    k = new F(a.x + b.x * g, a.y + b.y * g);
                    f = new F(k.x + c.x * g, k.y + c.y * g);
                    d.lineTo(f.x, f.y);
                    f = new F(a.x + c.x * g, a.y + c.y * g);
                    d.lineTo(f.x, f.y)
                },
                __class__: zi
            });
            var Ai = function () {
                hb.call(this);
                this.outerTh = this.innerTh = .26;
                this.exitWidth = this.doorWidth = .35;
                this.winWidth = .2;
                this.spiralRad = .6;
                this.nSteps = 5
            };
            h["dwellings.view.architecture.LogHouse"] = Ai;
            Ai.__name__ = "dwellings.view.architecture.LogHouse";
            Ai.__super__ = hb;
            Ai.prototype = w(hb.prototype, {
                onOuterCorner: function (a, b, c) {
                    this.drawCorner(a, b, c, .666)
                },
                onInnerCorner: function (a, b, c) {
                    this.drawCorner(a, b, c, .333)
                },
                drawCorner: function (a, b, c, d) {
                    var g = this.outerTh - 2 * J.strokeNormal;
                    d *= g;
                    var f = new F(b.dj, b.di),
                        k = c.op;
                    f = f.add(new F(k.dj, k.di));
                    k = (this.outerTh - this.innerTh) / 2;
                    f.x *= k;
                    f.y *= k;
                    a = a.add(f);
                    f = this.get_graphics();
                    this.paint();
                    b = new F(b.dj, b.di);
                    b = rd.stripe([a, new F(a.x + b.x * d, a.y + b.y * d)], g);
                    Za.drawPolygon(f, b);
                    this.paint();
                    b = new F(c.dj, c.di);
                    c = -d;
                    a = rd.stripe([a, new F(a.x + b.x * c, a.y + b.y * c)], g);
                    Za.drawPolygon(f, a)
                },
                __class__: Ai
            });
            var Bi = function () {
                hb.call(this);
                this.innerTh = .08;
                this.outerTh = .16;
                this.winWidth = this.exitWidth = this.doorWidth = .4;
                this.spiralRad = .8;
                this.nSteps = 2;
                this.insulated = !0
            };
            h["dwellings.view.architecture.Modern"] = Bi;
            Bi.__name__ = "dwellings.view.architecture.Modern";
            Bi.__super__ = hb;
            Bi.prototype = w(hb.prototype, {
                __class__: Bi
            });
            var Ci = function () {
                hb.call(this);
                this.innerTh = .1;
                this.outerTh = .22;
                this.doorWidth =
                    .5;
                this.exitWidth = .6;
                this.winWidth = .2;
                this.spiralRad = .65;
                this.nSteps = 1;
                this.rounded = !0;
                this.landings = !1
            };
            h["dwellings.view.architecture.SciFi"] = Ci;
            Ci.__name__ = "dwellings.view.architecture.SciFi";
            Ci.__super__ = hb;
            Ci.prototype = w(hb.prototype, {
                onOuterCorner: function (a, b, c) {
                    var d = this.get_graphics(),
                        g = this.outerTh - this.innerTh / 2 - J.strokeNormal;
                    b = Math.atan2(b.di, b.dj) - Math.PI / 2;
                    var f = b + Math.PI / 2;
                    d.moveTo(a.x, a.y);
                    c = new F(c.dj, c.di);
                    c = new F(a.x + c.x * g, a.y + c.y * g);
                    d.lineTo(c.x, c.y);
                    Za.drawArc(d, a.x, a.y, g, b, f);
                    d.lineTo(a.x, a.y)
                },
                __class__: Ci
            });
            var Di = function () {
                this.innerTh = .1;
                this.outerTh = .2;
                this.doorWidth = .32;
                this.exitWidth = .5;
                this.winWidth = .28;
                this.spiralRad = .7;
                this.nSteps = 3;
                hb.call(this)
            };
            h["dwellings.view.architecture.Simple"] = Di;
            Di.__name__ = "dwellings.view.architecture.Simple";
            Di.__super__ = hb;
            Di.prototype = w(hb.prototype, {
                onVertex: function (a) {
                    this.paint();
                    this.drawSquare(a, .75 * this.innerTh - J.strokeNormal)
                },
                __class__: Di
            });
            var Ka = function (a, b) {
                this.width =
                    a;
                this.height = b;
                this.root = x.createElement("svg");
                this.root.set("width", E.string(Math.round(1E3 * a) / 1E3));
                this.root.set("height", E.string(Math.round(1E3 * b) / 1E3));
                this.root.set("xmlns", "http://www.w3.org/2000/svg")
            };
            h["formats.SVG"] = Ka;
            Ka.__name__ = "formats.SVG";
            Ka.setOpacity = function (a, b) {
                a.set("opacity", null == b ? "null" : "" + b);
                return a
            };
            Ka.setFill = function (a, b, c) {
                null == c && (c = 1);
                a.set("fill", "#" + T.hex(b, 6));
                1 > c && a.set("fill-opacity", null == c ? "null" : "" + c);
                return a
            };
            Ka.noFill = function (a) {
                a.set("fill",
                    "none");
                return a
            };
            Ka.fillRule = function (a, b) {
                a.set("fill-rule", b);
                return a
            };
            Ka.setStroke = function (a, b, c, d, g) {
                null == c && (c = 0);
                a.set("stroke", "#" + T.hex(b, 6));
                0 != c && a.set("stroke-width", E.string(Math.round(1E3 * c) / 1E3));
                Ka.joinNcap(a, d, g);
                return a
            };
            Ka.strokeOpacity = function (a, b) {
                a.set("stroke-opacity", null == b ? "null" : "" + b);
                return a
            };
            Ka.joinNcap = function (a, b, c) {
                null != b && a.set("stroke-linejoin", b);
                null != c && a.set("stroke-linecap", c);
                return a
            };
            Ka.style = function (a, b) {
                a.set("style", b);
                return a
            };
            Ka.clearTransform =
                function (a) {
                    a.remove("transform");
                    return a
                };
            Ka.addTransform = function (a, b) {
                var c = a.get("transform");
                a.set("transform", null == c ? b : "" + b + " " + c);
                return a
            };
            Ka.translate = function (a, b, c) {
                return Ka.addTransform(a, "translate(" + E.string(Math.round(1E3 * b) / 1E3) + " " + E.string(Math.round(1E3 * c) / 1E3) + ")")
            };
            Ka.scale = function (a, b, c) {
                return Ka.addTransform(a, "scale(" + E.string(Math.round(1E3 * b) / 1E3) + " " + E.string(Math.round(1E3 * c) / 1E3) + ")")
            };
            Ka.rotate = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 0);
                return Ka.addTransform(a,
                    "rotate(" + E.string(Math.round(1E3 * b) / 1E3) + " " + E.string(Math.round(1E3 * c) / 1E3) + " " + E.string(Math.round(1E3 * d) / 1E3) + ")")
            };
            Ka.x = function (a, b) {
                a.set("x", E.string(Math.round(1E3 * b) / 1E3))
            };
            Ka.y = function (a, b) {
                a.set("y", E.string(Math.round(1E3 * b) / 1E3))
            };
            Ka.linearGradient = function (a, b, c) {
                null == b && (b = "userSpaceOnUse");
                var d = x.createElement("linearGradient");
                d.set("id", a);
                d.set("gradientUnits", b);
                null != c && (a = c.transformPoint(Ka._p0), c = c.transformPoint(Ka._p1), d.set("x1", E.string(Math.round(1E3 * a.x) / 1E3)), d.set("y1",
                    E.string(Math.round(1E3 * a.y) / 1E3)), d.set("x2", E.string(Math.round(1E3 * c.x) / 1E3)), d.set("y2", E.string(Math.round(1E3 * c.y) / 1E3)));
                return d
            };
            Ka.radialGradient = function (a, b, c) {
                null == b && (b = "userSpaceOnUse");
                var d = x.createElement("radialGradient");
                d.set("id", a);
                d.set("gradientUnits", b);
                null != c && (d.set("cx", E.string(Math.round(1E3 * c.tx) / 1E3)), d.set("cy", E.string(Math.round(1E3 * c.ty) / 1E3)), d.set("r", E.string(Math.round(819200 * c.a) / 1E3)));
                return d
            };
            Ka.stop = function (a, b, c) {
                null == c && (c = 1);
                var d = x.createElement("stop");
                d.set("offset", Math.round(100 * a) + "%");
                d.set("stop-color", "#" + T.hex(b, 6));
                1 > c && d.set("stop-opacity", null == c ? "null" : "" + c);
                return d
            };
            Ka.group = function (a) {
                var b = x.createElement("g");
                null != a && b.set("id", a);
                return b
            };
            Ka.clipPath = function (a) {
                var b = x.createElement("clipPath");
                b.set("id", a);
                Ka.setFill(b, 16777215);
                return b
            };
            Ka.text = function (a, b, c) {
                var d = x.createElement("text");
                a = x.createPCData(a);
                d.addChild(a);
                null != b && d.set("text-anchor", b);
                null != c && d.set("dominant-baseline", c);
                return d
            };
            Ka.tspan = function (a) {
                var b =
                    x.createElement("tspan");
                a = x.createPCData(a);
                b.addChild(a);
                return b
            };
            Ka.rect = function (a, b, c, d) {
                var g = x.createElement("rect");
                g.set("x", E.string(Math.round(1E3 * a) / 1E3));
                g.set("y", E.string(Math.round(1E3 * b) / 1E3));
                g.set("width", E.string(Math.round(1E3 * c) / 1E3));
                g.set("height", E.string(Math.round(1E3 * d) / 1E3));
                return g
            };
            Ka.prototype = {
                __class__: Ka
            };
            var Qb = function () {
                this.buff = new fb
            };
            h["formats.SVGPath"] = Qb;
            Qb.__name__ = "formats.SVGPath";
            Qb.prototype = {
                xml: function () {
                    var a = x.createElement("path");
                    a.set("d", this.buff.b);
                    return a
                },
                __class__: Qb
            };
            var Da = function () {
            };
            h["formats.Sprite2SVG"] = Da;
            Da.__name__ = "formats.Sprite2SVG";
            Da.create = function (a, b, c, d) {
                null == d && (d = !0);
                null == c && (c = -1);
                d && (Da.resetGradients(), Da.resetImports());
                d = new Ka(a, b);
                Da.defaultAttributes(d.root);
                -
                    1 != c && (a = Ka.rect(0, 0, a, b), Ka.setFill(a, c), d.root.addChild(a));
                return d
            };
            Da.defaultAttributes = function (a) {
                Ka.joinNcap(a, "round", "round");
                Ka.fillRule(a, "evenodd");
                Ka.noFill(a)
            };
            Da.drawSprite = function (a) {
                var b =
                    a.__isMask ? Ka.clipPath(a.get_name()) : Ka.group();
                Da.copyAttributes(a, b);
                Da.drawGraphics(a.get_graphics(), b);
                Da.drawChildren(a, b);
                return b
            };
            Da.drawShape = function (a) {
                var b = a.__isMask ? Ka.clipPath(a.get_name()) : Ka.group();
                Da.copyAttributes(a, b);
                Da.drawGraphics(a.get_graphics(), b);
                return b
            };
            Da.copyAttributes = function (a, b) {
                1 == a.get_scaleX() && 1 == a.get_scaleY() || Ka.scale(b, a.get_scaleX(), a.get_scaleY());
                0 != a.get_rotation() && Ka.rotate(b, a.get_rotation());
                0 == a.get_x() && 0 == a.get_y() || Ka.translate(b, a.get_x(),
                    a.get_y());
                1 > a.get_alpha() && Ka.setOpacity(b, a.get_alpha());
                if (10 != a.get_blendMode()) {
                    var c = Da.BLEND_MODES,
                        d = a.get_blendMode();
                    Ka.style(b, "mix-blend-mode: " + c.h[d])
                }
                null != a.get_mask() && b.set("clip-path", "url(#" + a.get_mask().get_name() + ")")
            };
            Da.drawGraphics = function (a, b) {
                var c = !1,
                    d = 0,
                    g = 1,
                    f = 1,
                    k = 2,
                    q = 1,
                    l = !1,
                    h = 0,
                    n = 1,
                    r = null;
                for (a = a.readGraphicsData(!1).iterator(); a.hasNext();) {
                    var t = a.next();
                    switch (t.__graphicsDataType) {
                        case 0:
                            c = t;
                            g = c.thickness;
                            f = c.fill;
                            d = f.color;
                            f = f.alpha;
                            k = c.joints;
                            q = c.caps;
                            c = !0;
                            break;
                        case 1:
                            r = null;
                            l = t;
                            h = l.color;
                            n = l.alpha;
                            l = !0;
                            break;
                        case 2:
                            r = t;
                            Da.gradients.push(r);
                            l = !0;
                            break;
                        case 3:
                            t = Da.drawPath(t.commands, t.data, t.winding);
                            l && (null == r ? Ka.setFill(t, h, n) : t.set("fill", "url(#grad" + Da.gradients.length + ")"));
                            c && (Ka.setStroke(t, d, g), 2 == k && 1 == q || Ka.joinNcap(t, Da.JOINTS.h[k], Da.CAPS.h[q]), 1 > f && Ka.strokeOpacity(t, f));
                            b.addChild(t);
                            break;
                        case 5:
                            l = c = !1, r = null
                    }
                }
            };
            Da.drawPath = function (a, b, c) {
                c = new Qb;
                var d = 0;
                a = a.iterator();
                a: for (; a.hasNext();) switch (a.next()) {
                    case 1:
                        var g = b.get(d),
                            f = Qb.ly =
                                b.get(d + 1);
                        c.buff.b += E.string(" M " + (E.string(Math.round(1E3 * (Qb.lx = g)) / 1E3) + "," + E.string(Math.round(1E3 * f) / 1E3)));
                        d += 2;
                        break;
                    case 2:
                        g = b.get(d);
                        f = b.get(d + 1);
                        if (0 == c.buff.b.length) {
                            var k = Qb.ly = Qb.ly;
                            c.buff.b += E.string(" M " + (E.string(Math.round(1E3 * (Qb.lx = Qb.lx)) / 1E3) + "," + E.string(Math.round(1E3 * k) / 1E3)))
                        }
                        f = Qb.ly = f;
                        c.buff.b += E.string(" L " + (E.string(Math.round(1E3 * (Qb.lx = g)) / 1E3) + "," + E.string(Math.round(1E3 * f) / 1E3)));
                        d += 2;
                        break;
                    case 3:
                        k = b.get(d);
                        var q = b.get(d + 1);
                        g = b.get(d + 2);
                        f = b.get(d + 3);
                        if (0 == c.buff.b.length) {
                            var l =
                                Qb.ly = Qb.ly;
                            c.buff.b += E.string(" M " + (E.string(Math.round(1E3 * (Qb.lx = Qb.lx)) / 1E3) + "," + E.string(Math.round(1E3 * l) / 1E3)))
                        }
                        k = "Q " + (E.string(Math.round(1E3 * k) / 1E3) + "," + E.string(Math.round(1E3 * q) / 1E3)) + " ";
                        f = Qb.ly = f;
                        c.buff.b += E.string(" " + (k + (E.string(Math.round(1E3 * (Qb.lx = g)) / 1E3) + "," + E.string(Math.round(1E3 * f) / 1E3))));
                        d += 4;
                        break;
                    case 4:
                        a = b.get(d + 2);
                        b = Qb.ly = b.get(d + 3);
                        c.buff.b += E.string(" M " + (E.string(Math.round(1E3 * (Qb.lx = a)) / 1E3) + "," + E.string(Math.round(1E3 * b) / 1E3)));
                        break a;
                    case 5:
                        a = b.get(d + 2);
                        b =
                            b.get(d + 3);
                        0 == c.buff.b.length && (d = Qb.ly = Qb.ly, c.buff.b += E.string(" M " + (E.string(Math.round(1E3 * (Qb.lx = Qb.lx)) / 1E3) + "," + E.string(Math.round(1E3 * d) / 1E3))));
                        b = Qb.ly = b;
                        c.buff.b += E.string(" L " + (E.string(Math.round(1E3 * (Qb.lx = a)) / 1E3) + "," + E.string(Math.round(1E3 * b) / 1E3)));
                        break a;
                    case 6:
                        g = b.get(d);
                        f = b.get(d + 1);
                        k = b.get(d + 2);
                        q = b.get(d + 3);
                        l = b.get(d + 4);
                        var h = b.get(d + 5);
                        c.buff.b += E.string(" C " + (g + "," + f + " " + k + "," + q + " " + l + "," + h));
                        d += 6
                }
                return c.xml()
            };
            Da.drawChildren = function (a, b) {
                for (var c = 0, d = a.get_numChildren(); c <
                d;) {
                    var g = c++;
                    g = a.getChildAt(g);
                    if (g.get_visible()) {
                        var f = null;
                        null != Da.handleObject && (f = Da.handleObject(g));
                        null == f && (g instanceof X ? f = Da.drawSprite(g) : g instanceof xe ? f = Da.drawShape(g) : g instanceof Yc && (f = Da.drawText(g)));
                        if (null != f) {
                            for (var k = 0, q = g.get_filters(); k < q.length;) {
                                var l = q[k];
                                ++k;
                                Da.handleFilter(g, l, f, b)
                            }
                            b.addChild(f)
                        }
                    }
                }
            };
            Da.drawText = function (a) {
                var b = a.get_defaultTextFormat(),
                    c = 1 < a.get_numLines(),
                    d = Ka.text(c ? "" : a.get_text(), null, "text-before-edge");
                Ka.style(d, Da.svgFont(b));
                Ka.setFill(d,
                    b.color);
                1 == a.get_scaleX() && 1 == a.get_scaleY() || Ka.scale(d, a.get_scaleX(), a.get_scaleY());
                0 != a.get_rotation() && Ka.rotate(d, a.get_rotation());
                1 > a.get_alpha() && Ka.setOpacity(d, a.get_alpha());
                if (c)
                    for (Ka.translate(d, a.get_x(), a.get_y()), b = 0, c = a.get_numLines(); b < c;) {
                        var g = b++,
                            f = Ka.tspan(a.getLineText(g));
                        g = a.getCharBoundaries(a.getLineOffset(g));
                        Ka.x(f, g.x);
                        Ka.y(f, g.y);
                        d.addChild(f)
                    } else g = a.getCharBoundaries(a.getLineOffset(0)), Ka.translate(d, a.get_x() + g.x * a.get_scaleX(), a.get_y() + g.y * a.get_scaleY());
                return d
            };
            Da.substituteGenerics = HaxeShared.substituteGenerics;
            Da.svgFont = function (a) {
                var b = Da.substituteFont(a.font),
                    c = "font: ";
                a.bold && (c += "bold ");
                a.italic && (c += "italic ");
                c += "" + a.size + "px " + b;
                0 != a.letterSpacing && (c += "; letter-spacing: " + a.letterSpacing + "px");
                return c
            };
            Da.resetGradients = function () {
                Da.gradients = []
            };
            Da.getGradients = function () {
                for (var a = x.createElement("defs"), b = 0, c = Da.gradients.length; b <
                c;) {
                    var d = b++,
                        g = "grad" + (d + 1);
                    d = Da.gradients[d];
                    if (0 == d.type) {
                        g = Ka.linearGradient(g, null, d.matrix);
                        for (var f = 0, k = d.colors.length; f < k;) {
                            var q = f++;
                            g.addChild(Ka.stop(d.ratios[q] / 255, d.colors[q], d.alphas[q]))
                        }
                        a.addChild(g)
                    } else {
                        g = Ka.radialGradient(g, null, d.matrix);
                        f = 0;
                        for (k = d.colors.length; f < k;) q = f++, g.addChild(Ka.stop(d.ratios[q] / 255, d.colors[q], d.alphas[q]));
                        a.addChild(g)
                    }
                }
                return a
            };
            Da.resetImports = function () {
                Da.imports = []
            };
            Da.addImport = function (a) {
                -1 == Da.imports.indexOf(a) && Da.imports.push(a)
            };
            Da.getImports =
                function () {
                    for (var a = x.createElement("style"), b = "", c = 0, d = Da.imports; c < d.length;) {
                        var g = d[c];
                        ++c;
                        b += E.string('@import url("' + g + '");')
                    }
                    a.addChild(x.createCData(b));
                    return a
                };
            Da.handleFilter = function (a, b, c, d) {
                if (b instanceof kd) {
                    for (var g = 1; null != a.parent;) g *= a.get_scaleX(), a = a.parent;
                    g = a.get_scaleX();
                    a = x.parse(Ke.print(c)).firstElement();
                    Ka.setStroke(a, b.get_color(), 2 * b.get_blurX() / g);
                    1 > b.get_alpha() && Ka.strokeOpacity(a, b.get_alpha());
                    d.addChild(a)
                }
            };
            var ei = function () {
            };
            h["geom.Chaikin"] =
                ei;
            ei.__name__ = "geom.Chaikin";
            ei.render = function (a, b, c, d) {
                null == c && (c = 1);
                for (var g = 0; g < c;) {
                    g++;
                    for (var f = [], k = a.length, q = 1, l = k - 1; q < l;) {
                        var h = q++,
                            n = a[h];
                        null == d || -1 == d.indexOf(n) ? (f.push(Kb.lerp(n, a[h - 1], .25)), f.push(Kb.lerp(n, a[h + 1], .25))) : f.push(n)
                    }
                    b ? (q = a[k - 1], null == d || -1 == d.indexOf(q) ? (f.push(Kb.lerp(q, a[k - 2], .25)), f.push(Kb.lerp(q, a[0], .25))) : f.push(q), q = a[0], null == d || -1 == d.indexOf(q) ? (f.push(Kb.lerp(q, a[k - 1], .25)), f.push(Kb.lerp(q, a[1], .25))) : f.push(q)) : (f.unshift(a[0]), f.push(a[k -
                    1]));
                    a = f
                }
                return a
            };
            var Ia = function () {
            };
            h["geom.Color"] = Ia;
            Ia.__name__ = "geom.Color";
            Ia.rgbfSafe = function (a, b, c) {
                return (Zc.gate(255 * a, 0, 255) | 0) << 16 | (Zc.gate(255 * b, 0, 255) | 0) << 8 | Zc.gate(255 * c, 0, 255) | 0
            };
            Ia.lerp = function (a, b, c) {
                null == c && (c = .5);
                var d = a >>> 8 & 255,
                    g = a & 255,
                    f = b >>> 16,
                    k = b >>> 8 & 255;
                b &= 255;
                var q = 1 - c;
                return (Ja.toFloat(a >>> 16) * q + Ja.toFloat(f) * c | 0) << 16 | (Ja.toFloat(d) * q + Ja.toFloat(k) * c | 0) << 8 | Ja.toFloat(g) * q + Ja.toFloat(b) * c | 0
            };
            Ia.lerpHSV = function (a, b, c) {
                null == c && (c = .5);
                a = Ia.rgb2hsv(a);
                b = Ia.rgb2hsv(b);
                var d = 0 == a.y ? b.x : 0 == b.y ? a.x : Ia.lerpHue(a.x, b.x, c),
                    g = 1 - c;
                return Ia.hsv(d, a.y * g + b.y * c, a.z * g + b.z * c)
            };
            Ia.lerpHue = HaxeShared.lerpHue;
            Ia.scale = function (a, b) {
                return Ia.rgbfSafe(Ja.toFloat(a >>> 16) / Ja.toFloat(255) * b, Ja.toFloat(a >>> 8 & 255) / Ja.toFloat(255) * b, Ja.toFloat(a & 255) / Ja.toFloat(255) * b)
            };
            Ia.hsv = function (a, b, c) {
                var d = function (a) {
                        a -= 360 * Math.floor(a / 360);
                        return Zc.gate(Math.abs(a /
                            60 - 3) - 1, 0, 1)
                    },
                    g = d(a),
                    f = d(a - 120);
                a = d(a + 120);
                return Ia.rgbfSafe((g * b + 1 - b) * c, (f * b + 1 - b) * c, (a * b + 1 - b) * c)
            };
            Ia.hsl = function (a, b, c) {
                a *= Math.PI / 180;
                return Ia.rgbfSafe(((Math.cos(a) / 2 + .5) * b + 1 - b) * c, ((Math.cos(a - 2 * Math.PI / 3) / 2 + .5) * b + 1 - b) * c, ((Math.cos(a + 2 * Math.PI / 3) / 2 + .5) * b + 1 - b) * c)
            };
            Ia.rgb2hsv = function (a) {
                var b = Ja.toFloat(a >>> 16) / Ja.toFloat(255),
                    c = Ja.toFloat(a >>> 8 & 255) / Ja.toFloat(255);
                a = Ja.toFloat(a & 255) / Ja.toFloat(255);
                var d = Math.min(b, Math.min(c, a)),
                    g = Math.max(b, Math.max(c, a));
                return d == g ? new gf(0, 0, d) : new gf(60 *
                    ((b == d ? 3 : a == d ? 1 : 5) - (b == d ? c - a : a == d ? b - c : a - b) / (g - d)), (g - d) / g, g)
            };
            Ia.brightness = function (a) {
                var b = Ja.toFloat(a >>> 16) / Ja.toFloat(255),
                    c = Ja.toFloat(a >>> 8 & 255) / Ja.toFloat(255);
                a = Ja.toFloat(a & 255) / Ja.toFloat(255);
                return Math.sqrt(.299 * b * b + .587 * c * c + .114 * a * a)
            };
            Ia.grey = function (a) {
                a = Math.round(255 * a);
                return a << 16 | a << 8 | a
            };
            Ia.dist = function (a, b) {
                return gf.distance(new gf(Ja.toFloat(a >>> 16) / Ja.toFloat(255), Ja.toFloat(a >>> 8 & 255) / Ja.toFloat(255), Ja.toFloat(a & 255) / Ja.toFloat(255)), new gf(Ja.toFloat(b >>> 16) / Ja.toFloat(255),
                    Ja.toFloat(b >>> 8 & 255) / Ja.toFloat(255), Ja.toFloat(b & 255) / Ja.toFloat(255))) / Math.sqrt(3)
            };
            var Hf = function (a, b) {
                null == b && (b = 0);
                null == a && (a = 0);
                this.x = a;
                this.y = b
            };
            h["geom.Dot"] = Hf;
            Hf.__name__ = "geom.Dot";
            Hf.prototype = {
                __class__: Hf
            };
            var Kb = function () {
            };
            h["geom.GeomUtils"] = Kb;
            Kb.__name__ = "geom.GeomUtils";
            Kb.intersectLines = function (a, b, c, d, g, f, k, q) {
                var l = c * q - d * k;
                if (0 == l) return null;
                l = (d * (g - a) - c * (f - b)) / l;
                return new F(Math.abs(c) > Math.abs(d) ? (g - a + k * l) / c : (f - b + q *
                    l) / d, l)
            };
            Kb.lerp = function (a, b, c) {
                null == c && (c = .5);
                var d = a.x,
                    g = c;
                null == g && (g = .5);
                var f = a.y;
                a = c;
                null == a && (a = .5);
                return new F(d + (b.x - d) * g, f + (b.y - f) * a)
            };
            var Dk = function () {
                this.nodes = []
            };
            h["geom.Graph"] = Dk;
            Dk.__name__ = "geom.Graph";
            Dk.prototype = {
                add: function (a) {
                    this.nodes.push(a);
                    return a
                },
                findNode: function (a) {
                    for (var b = 0, c = this.nodes; b < c.length;) {
                        var d = c[b];
                        ++b;
                        if (d.data == a) return d
                    }
                    return null
                },
                aStar: function (a, b, c) {
                    c = null != c ? c.slice() : [];
                    var d = [a],
                        g = new Ba,
                        f = new Ba;
                    for (f.set(a,
                        0); 0 < d.length;) {
                        a = d.shift();
                        if (a == b) return this.buildPath(g, a);
                        M.remove(d, a);
                        c.push(a);
                        var k = f.h[a.__id__],
                            q = a.links,
                            l = q;
                        for (q = q.keys(); q.hasNext();) {
                            var h = q.next(),
                                n = l.get(h);
                            if (-1 == c.indexOf(h)) {
                                n = k + n;
                                if (-1 == d.indexOf(h)) d.push(h);
                                else if (n >= f.h[h.__id__]) continue;
                                g.set(h, a);
                                f.set(h, n)
                            }
                        }
                    }
                    return null
                },
                buildPath: function (a, b) {
                    for (var c = [b]; null != a.h.__keys__[b.__id__];) b = a.h[b.__id__], c.push(b);
                    return c
                },
                __class__: Dk
            };
            var Ek = function (a) {
                this.links = new Ba;
                this.data = a
            };
            h["geom.Node"] = Ek;
            Ek.__name__ = "geom.Node";
            Ek.prototype = {
                link: function (a, b, c) {
                    null == c && (c = !0);
                    null == b && (b = 1);
                    this.links.set(a, b);
                    c && a.links.set(this, b)
                },
                __class__: Ek
            };
            var Ce = function (a, b) {
                this.r = a;
                this.shape = b;
                this.points = [];
                this.cellSize = a / Math.sqrt(2);
                this.setBounds(b.getBounds(this));
                this.queue = [];
                this.emit(b.getFirst())
            };
            h["geom.PoissonDisk"] = Ce;
            Ce.__name__ = "geom.PoissonDisk";
            Ce.prototype = {
                setBounds: function (a) {
                    this.xmin = a.get_left();
                    this.ymin = a.get_top();
                    this.xmax = a.get_right();
                    this.ymax = a.get_bottom();
                    this.gridWidth = Math.ceil((this.xmax - this.xmin) / this.cellSize);
                    this.gridHeight = Math.ceil((this.ymax - this.ymin) / this.cellSize);
                    a = [];
                    for (var b = 0, c = this.gridWidth * this.gridHeight; b < c;) b++, a.push(null);
                    this.grid = a
                },
                step: function () {
                    if (0 == this.queue.length) return !1;
                    for (var a = ca.random(this.queue), b = !1, c = 0; 30 > c;) {
                        c++;
                        var d = F.polar(this.r + this.r * Ce.rnd(), 2 * Math.PI * Ce.rnd());
                        d.x += a.x;
                        d.y += a.y;
                        this.shape.validate(d) && this.validate(d) && (b = !0, this.emit(d))
                    }
                    b || M.remove(this.queue, a);
                    return 0 <
                        this.queue.length
                },
                validate: function (a) {
                    var b = Math.floor((a.x - this.xmin) / this.cellSize),
                        c = Math.floor((a.y - this.ymin) / this.cellSize);
                    if (0 > b || 0 > c || b >= this.gridWidth || c >= this.gridHeight) return !1;
                    for (var d = 0 < b - 2 ? b - 2 : 0, g = b + 2 + 1 < this.gridWidth ? b + 2 + 1 : this.gridWidth, f = 0 < c - 2 ? c - 2 : 0, k = c + 2 + 1 < this.gridHeight ? c + 2 + 1 : this.gridHeight; f < k;) {
                        c = f++;
                        c *= this.gridWidth;
                        for (var q = d, l = g; q < l;)
                            if (b = q++, b = this.grid[c + b], null != b && F.distance(a, b) < this.r) return !1
                    }
                    return !0
                },
                emit: function (a) {
                    this.points.push(a);
                    this.queue.push(a);
                    this.grid[Math.floor((a.y - this.ymin) / this.cellSize) * this.gridWidth + Math.floor((a.x - this.xmin) / this.cellSize)] = a
                },
                getNeighbours: function (a) {
                    var b = [],
                        c = Math.floor((a.x - this.xmin) / this.cellSize),
                        d = Math.floor((a.y - this.ymin) / this.cellSize);
                    a = 0 < c - 2 ? c - 2 : 0;
                    for (var g = c + 2 + 1 < this.gridWidth ? c + 2 + 1 : this.gridWidth, f = 0 < d - 2 ? d - 2 : 0, k = d + 2 + 1 < this.gridHeight ? d + 2 + 1 : this.gridHeight; f < k;) {
                        d = f++;
                        d *= this.gridWidth;
                        for (var q = a, l = g; q < l;) c = q++, c = this.grid[d + c], null != c && b.push(c)
                    }
                    return b
                },
                __class__: Ce
            };
            var sg = function () {
            };
            h["geom.IPoissonDiskShape"] =
                sg;
            sg.__name__ = "geom.IPoissonDiskShape";
            sg.__isInterface__ = !0;
            sg.prototype = {
                __class__: sg
            };
            var Ei = function (a, b, c, d) {
                this.x = a;
                this.y = b;
                this.w = c;
                this.h = d
            };
            h["geom.PoissonDiskRect"] = Ei;
            Ei.__name__ = "geom.PoissonDiskRect";
            Ei.__interfaces__ = [sg];
            Ei.prototype = {
                getBounds: function (a) {
                    return new sa(this.x, this.y, this.w, this.h)
                },
                getFirst: function () {
                    return new F(this.x + this.w * Ce.rnd(), this.y + this.h * Ce.rnd())
                },
                validate: function (a) {
                    return a.x >= this.x && a.y >= this.y && a.x < this.x +
                    this.w ? a.y < this.y + this.h : !1
                },
                inflate: function (a) {
                    this.x -= a;
                    this.y -= a;
                    this.w += 2 * a;
                    this.h += 2 * a
                },
                __class__: Ei
            };
            var Fi = function (a, b, c) {
                this.x = a;
                this.y = b;
                this.r = c;
                this.r2 = c * c
            };
            h["geom.PoissonDiskCircle"] = Fi;
            Fi.__name__ = "geom.PoissonDiskCircle";
            Fi.__interfaces__ = [sg];
            Fi.prototype = {
                getBounds: function (a) {
                    return new sa(this.x - this.r, this.y - this.r, 2 * this.r, 2 * this.r)
                },
                getFirst: function () {
                    var a = F.polar(this.r * Math.sqrt(Ce.rnd()), 2 * Math.PI * Ce.rnd());
                    a.x += this.x;
                    a.y += this.y;
                    return a
                },
                validate: function (a) {
                    var b =
                        this.x - a.x;
                    a = this.y - a.y;
                    return b * b + a * a <= this.r2
                },
                inflate: function (a) {
                    this.r += a;
                    this.r2 = this.r * this.r
                },
                __class__: Fi
            };
            var wi = function (a) {
                this.shapes = a
            };
            h["geom.PoissonDiskShapeCollection"] = wi;
            wi.__name__ = "geom.PoissonDiskShapeCollection";
            wi.__interfaces__ = [sg];
            wi.prototype = {
                getBounds: function (a) {
                    for (var b = this.shapes[0].getBounds(a), c = 1, d = this.shapes.length; c < d;) {
                        var g = c++;
                        b = b.union(this.shapes[g].getBounds(a))
                    }
                    return b
                },
                getFirst: function () {
                    return ca.random(this.shapes).getFirst()
                },
                validate: function (a) {
                    for (var b = 0, c = this.shapes; b < c.length;) {
                        var d = c[b];
                        ++b;
                        if (d.validate(a)) return !0
                    }
                    return !1
                },
                inflate: function (a) {
                    for (var b = 0, c = this.shapes; b < c.length;) {
                        var d = c[b];
                        ++b;
                        d.inflate(a)
                    }
                },
                __class__: wi
            };
            var Kk = function (a, b, c, d) {
                null == d && (d = 0);
                this.width = a;
                this.height = b;
                this.dist = c;
                this.dist2 = c * c;
                this.cellSize = c / Math.sqrt(2);
                this.gridWidth = Math.ceil(this.width / this.cellSize);
                this.gridHeight = Math.ceil(this.height / this.cellSize);
                c = [];
                for (var g = 0, f = this.gridWidth * this.gridHeight; g < f;) g++, c.push(null);
                this.grid = c;
                this.points = [];
                this.queue = [];
                for (this.emit(new F(a * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647), b * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647))); this.step();) ;
                0 < d && this.uneven(d)
            };
            h["geom.PoissonPattern"] = Kk;
            Kk.__name__ = "geom.PoissonPattern";
            Kk.prototype = {
                emit: function (a) {
                    this.points.push(a);
                    this.queue.push(a);
                    this.grid[Math.floor(a.y / this.cellSize) * this.gridWidth + Math.floor(a.x / this.cellSize)] = a
                },
                step: function () {
                    if (0 == this.queue.length) return !1;
                    for (var a =
                        ca.random(this.queue), b = !1, c = 0; 50 > c;) {
                        c++;
                        var d = F.polar(this.dist * (1 + .1 * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647)), 6.28318530718 * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647));
                        d.x += a.x;
                        d.y += a.y;
                        this.warp(d);
                        this.validate(d) && (b = !0, this.emit(d))
                    }
                    b || M.remove(this.queue, a);
                    return 0 < this.queue.length
                },
                warp: function (a) {
                    0 > a.x ? a.x += this.width : a.x >= this.width && (a.x -= this.width);
                    0 > a.y ? a.y += this.height : a.y >= this.height && (a.y -= this.height)
                },
                validate: function (a) {
                    var b = a.x;
                    a = a.y;
                    for (var c = Math.floor(b /
                        this.cellSize), d = Math.floor(a / this.cellSize), g = c - 2, f = c + 2 + 1, k = d - 2, q = d + 2 + 1; k < q;) {
                        d = k++;
                        d = (d + this.gridHeight) % this.gridHeight * this.gridWidth;
                        for (var l = g, h = f; l < h;) {
                            c = l++;
                            var n = this.grid[d + (c + this.gridWidth) % this.gridWidth];
                            if (null != n && (c = Math.abs(n.x - b), n = Math.abs(n.y - a), c > this.width - c && (c = this.width - c), n > this.height - n && (n = this.height - n), c * c + n * n < this.dist2)) return !1
                        }
                    }
                    return !0
                },
                uneven: function (a) {
                    if (0 != a)
                        for (var b = 0, c = this.points; b < c.length;) {
                            var d = c[b];
                            ++b;
                            var g = F.polar(this.dist * a * ((t.seed = 48271 * t.seed %
                                2147483647 | 0) / 2147483647), 6.28318530718 * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647));
                            d.x += g.x;
                            d.y += g.y;
                            this.warp(d)
                        }
                },
                scale: function (a, b) {
                    for (var c = 0, d = this.points; c < d.length;) {
                        var g = d[c];
                        ++c;
                        g.x *= a;
                        g.y *= b
                    }
                    this.width *= a;
                    this.height *= b
                },
                fill: function (a) {
                    var b = a.getBounds(),
                        c = Math.floor(b.get_left() / this.width),
                        d = Math.floor(b.get_top() / this.height),
                        g = Math.ceil(b.get_right() / this.width);
                    b = Math.ceil(b.get_bottom() / this.height);
                    for (var f = []; d < b;)
                        for (var k = d++, q = c, l = g; q < l;)
                            for (var h = q++, n = a.validateRect(h *
                                this.width, k * this.height, this.width, this.height), r = 0, t = this.points; r < t.length;) {
                                var p = t[r];
                                ++r;
                                if (0 != k || 0 != h) p = new F(p.x + h * this.width, p.y + k * this.height);
                                (n || a.validate(p)) && f.push(p)
                            }
                    return f
                },
                __class__: Kk
            };
            var Gi = function () {
            };
            h["geom.IFillableShape"] = Gi;
            Gi.__name__ = "geom.IFillableShape";
            Gi.__isInterface__ = !0;
            Gi.prototype = {
                __class__: Gi
            };
            var Hi = function (a, b, c, d) {
                this.x = a;
                this.y = b;
                this.w = c;
                this.h = d
            };
            h["geom.FillableRect"] = Hi;
            Hi.__name__ = "geom.FillableRect";
            Hi.__interfaces__ = [Gi];
            Hi.prototype = {
                getBounds: function () {
                    return new sa(this.x, this.y, this.w, this.h)
                },
                validate: function (a) {
                    return a.x >= this.x && a.y >= this.y && a.x < this.x + this.w ? a.y < this.y + this.h : !1
                },
                validateRect: function (a, b, c, d) {
                    return !1
                },
                __class__: Hi
            };
            var ri = function (a, b, c, d) {
                null == d && (d = 1);
                null == c && (c = 1);
                this.left = a;
                this.top = b;
                this.width = c;
                this.height = d
            };
            h["geom.Rect"] = ri;
            ri.__name__ = "geom.Rect";
            ri.prototype = {
                centerX: function () {
                    return this.left + (this.width >> 1)
                },
                centerY: function () {
                    return this.top +
                        (this.height >> 1)
                },
                __class__: ri
            };
            var Ne = function (a, b) {
                null == b && (b = !1);
                this.height = 0;
                this.poly = a;
                for (var c = a.length, d = [], g = 0, f = c; g < f;) {
                    var k = g++;
                    d.push(new Lk(a[k], a[(k + 1) % c]))
                }
                this.segments = d;
                this.leaves = new Ba;
                d = [];
                g = 0;
                for (f = c; g < f;) {
                    k = g++;
                    var q = new Ii(a[k]);
                    this.leaves.set(a[k], q);
                    d.push(new dh(q, this.segments[k], this.segments[(k + c - 1) % c]))
                }
                this.ribs = d;
                this.bones = [];
                b && this.run()
            };
            h["geom.Skeleton"] = Ne;
            Ne.__name__ = "geom.Skeleton";
            Ne.intersect = function (a, b) {
                return Kb.intersectLines(a.a.point.x,
                    a.a.point.y, a.slope.x, a.slope.y, b.a.point.x, b.a.point.y, b.slope.x, b.slope.y)
            };
            Ne.prototype = {
                run: function () {
                    for (; this.step();) ;
                },
                step: function () {
                    if (2 >= this.ribs.length) return 2 == this.ribs.length && (this.root = this.ribs[0], this.root.b = this.ribs[1].a, this.root.b.parent = this.root, this.bones.push(this.root), this.ribs = []), !1;
                    for (var a = Infinity, b = null, c = null, d = null, g = 0, f = this.ribs; g < f.length;) {
                        var k = f[g];
                        ++g;
                        var q = Infinity,
                            l = null,
                            h = null,
                            n = k.right.lRib,
                            r = Ne.intersect(k, n);
                        if (null != r && 0 <= r.x && 0 <= r.y) {
                            var t =
                                r.x + k.a.height;
                            q > t && (q = t, h = r, l = n)
                        }
                        r = k.left.rRib;
                        n = Ne.intersect(k, r);
                        null != n && 0 <= n.x && 0 <= n.y && q > n.x + k.a.height && (h = n, l = r);
                        null != h && (q = h.y + l.a.height, a > q && (a = q, b = k, c = l, d = h))
                    }
                    return null != d ? (this.height = a, a = b.a.point, g = b.slope, r = d.x, d = new F(a.x + g.x * r, a.y + g.y * r), this.merge(b, c, d), !0) : !1
                },
                merge: function (a, b, c) {
                    c = new Ii(c, this.height, a, b);
                    c = a.right == b.left ? new dh(c, a.left, b.right) : new dh(c, b.left, a.right);
                    this.ribs.push(c);
                    this.bones.push(a);
                    M.remove(this.ribs, a);
                    this.bones.push(b);
                    M.remove(this.ribs, b);
                    return c
                },
                addGables: function () {
                    this.gables = [];
                    for (var a = 0, b = this.segments; a < b.length;) {
                        var c = b[a];
                        ++a;
                        var d = this.leaves.h[c.p0.__id__].parent,
                            g = this.leaves.h[c.p1.__id__].parent;
                        if (d.b == g.b) {
                            var f = d.b,
                                k = f.point;
                            d = (d == this.root ? g == f.child1 ? f.child2 : g == f.child2 ? f.child1 : null : g == this.root ? d == f.child1 ? f.child2 : d == f.child2 ? f.child1 : null : f.parent).slope;
                            f = Kb.intersectLines(c.p0.x, c.p0.y, c.dir.x, c.dir.y, k.x, k.y, d.x, d.y);
                            null != f && 0 < f.x && f.x < c.len && (d = c.p0, g = c.dir, f = f.x, d = new F(d.x + g.x * f, d.y + g.y * f), Jk.set(k,
                                d), this.gables.push(c))
                        }
                    }
                },
                getFace: function (a) {
                    for (var b = this.leaves.h[a.p0.__id__].parent, c = [a.p0]; b != this.root && b.left == a;) c.unshift(b.b.point), b = b.b.parent;
                    b = this.leaves.h[a.p1.__id__].parent;
                    for (var d = [a.p1]; b != this.root && b.right == a;) d.push(b.b.point), b = b.b.parent;
                    c[0] == d[d.length - 1] && d.pop();
                    return d.concat(c)
                },
                __class__: Ne
            };
            var dh = function (a, b, c) {
                this.a = a;
                this.a.parent = this;
                this.left = b;
                this.right = c;
                b.lRib = this;
                c.rRib = this;
                a = c.dir;
                b = b.dir;
                c = a.x * b.x + a.y * b.y;
                .99999 < c ? this.slope = new F(-a.y, a.x) :
                    (c = Math.sqrt((1 + c) / 2), this.slope = b.subtract(a), this.slope.normalize(1 / c), null == this.a.child1 && 0 > a.x * b.y - a.y * b.x && (a = this.slope, a.x *= -1, a.y *= -1))
            };
            h["geom.Rib"] = dh;
            dh.__name__ = "geom.Rib";
            dh.prototype = {
                __class__: dh
            };
            var Ii = function (a, b, c, d) {
                null == b && (b = 0);
                this.point = a;
                this.height = b;
                this.child1 = c;
                this.child2 = d;
                null != this.child1 && (this.child1.b = this, this.child2.b = this)
            };
            h["geom._Skeleton.Node"] = Ii;
            Ii.__name__ = "geom._Skeleton.Node";
            Ii.prototype = {
                __class__: Ii
            };
            var Lk = function (a, b) {
                this.p0 = a;
                this.p1 = b;
                this.dir = b.subtract(a);
                this.len = this.dir.get_length();
                a = this.dir;
                b = 1 / this.len;
                a.x *= b;
                a.y *= b
            };
            h["geom._Skeleton.Segment"] = Lk;
            Lk.__name__ = "geom._Skeleton.Segment";
            Lk.prototype = {
                __class__: Lk
            };
            var qg = function () {
            };
            h["geom.polygons.PolyBounds"] = qg;
            qg.__name__ = "geom.polygons.PolyBounds";
            qg.rect = function (a) {
                for (var b = Infinity, c = Infinity, d = -Infinity, g = -Infinity, f = 0; f < a.length;) {
                    var k = a[f];
                    ++f;
                    var q = k.x;
                    k = k.y;
                    q < b && (b = q);
                    k < c && (c = k);
                    q > d && (d = q);
                    k > g && (g = k)
                }
                return new sa(b, c, d - b, g - c)
            };
            qg.aabb = function (a) {
                for (var b = Infinity, c = Infinity, d = -Infinity, g = -Infinity, f = 0; f < a.length;) {
                    var k = a[f];
                    ++f;
                    var q = k.x;
                    k = k.y;
                    q < b && (b = q);
                    k < c && (c = k);
                    q > d && (d = q);
                    k > g && (g = k)
                }
                return [new F(b, c), new F(d, c), new F(d, g), new F(b, g)]
            };
            var Ff = function () {
            };
            h["geom.polygons.PolyCore"] = Ff;
            Ff.__name__ = "geom.polygons.PolyCore";
            Ff.area = function (a) {
                for (var b = a.length, c = a[b - 1], d = a[0], g = c.x * d.y - d.x * c.y, f = 1; f < b;) {
                    var k = f++;
                    c = d;
                    d = a[k];
                    g += c.x *
                        d.y - d.x * c.y
                }
                return .5 * g
            };
            Ff.$length = function (a) {
                for (var b = 0, c = 1, d = a.length; c < d;) {
                    var g = c++;
                    b += F.distance(a[g - 1], a[g])
                }
                return b
            };
            Ff.center = function (a) {
                for (var b = a.length, c = a[0].clone(), d = 1; d < b;) {
                    var g = d++;
                    g = a[g];
                    c.x += g.x;
                    c.y += g.y
                }
                a = 1 / b;
                c.x *= a;
                c.y *= a;
                return c
            };
            var rd = function () {
            };
            h["geom.polygons.PolyCreate"] = rd;
            rd.__name__ = "geom.polygons.PolyCreate";
            rd.rect = function (a, b) {
                a /= 2;
                b /= 2;
                return [new F(-a, -b), new F(a, -b), new F(a, b), new F(-a, b)]
            };
            rd.regular = function (a, b, c) {
                null == c && (c =
                    0);
                for (var d = [], g = 0; g < a;) {
                    var f = g++;
                    d.push(F.polar(b, c + 2 * Math.PI * f / a))
                }
                return d
            };
            rd.stripe = function (a, b, c) {
                null == c && (c = 1);
                var d = b / 2,
                    g = a.length;
                b = [];
                var f = [],
                    k = a[0],
                    q = a[1],
                    l = q.subtract(k);
                l.normalize(1);
                if (0 < c) {
                    var h = new F(l.x * d, l.y * d),
                        n = new F(-h.y, h.x);
                    k = k.subtract(new F(h.x * c, h.y * c));
                    b.unshift(k.subtract(n));
                    f.unshift(k.add(n))
                } else {
                    var r = new F(l.x * d, l.y * d);
                    n = new F(-r.y, r.x);
                    b.unshift(k.subtract(n));
                    f.unshift(k.add(n))
                }
                n = 1;
                for (--g; n < g;) h = n++, k = q, q = a[h + 1], r = l, l = q.subtract(k), l.normalize(1), h = r.x *
                    l.x + r.y * l.y, r = r.add(l), r = new F(-r.y, r.x), r.normalize(d * Math.sqrt(2 / (1 + h))), b.push(k.subtract(r)), f.push(k.add(r));
                0 < c ? (h = new F(l.x * d, l.y * d), n = new F(-h.y, h.x), a = q.add(new F(h.x * c, h.y * c)), b.push(a.subtract(n)), f.push(a.add(n))) : (r = new F(l.x * d, l.y * d), n = new F(-r.y, r.x), b.push(q.subtract(n)), f.push(q.add(n)));
                return b.concat(ca.revert(f))
            };
            var Lf = function () {
            };
            h["geom.polygons.PolyCut"] = Lf;
            Lf.__name__ = "geom.polygons.PolyCut";
            Lf.pierce = function (a, b, c) {
                for (var d = b.x, g = b.y, f = c.x - d,
                         k = c.y - g, q = a.length, l = [], h = 0, n = q; h < n;) {
                    var r = h++,
                        t = a[r];
                    r = a[(r + 1) % q];
                    var p = t.x;
                    t = t.y;
                    t = Kb.intersectLines(d, g, f, k, p, t, r.x - p, r.y - t);
                    null != t && 0 <= t.y && 1 >= t.y && l.push(t.x)
                }
                l.sort(function (a, b) {
                    a -= b;
                    return 0 == a ? 0 : 0 > a ? -1 : 1
                });
                h = [];
                for (n = 0; n < l.length;) t = l[n], ++n, h.push(Kb.lerp(b, c, t));
                return h
            };
            Lf.insetEq = function (a, b) {
                var c = a.length,
                    d = a[c - 2],
                    g = a[c - 1],
                    f = g.subtract(d);
                f.normalize(1);
                for (var k = [], q = 0; q < c;) {
                    var l = q++;
                    d = g;
                    g = a[l];
                    l = f;
                    f = g.subtract(d);
                    f.normalize(1);
                    var h = l.add(f);
                    h = new F(-h.y, h.x);
                    l = l.x * f.x + l.y *
                        f.y;
                    -
                        .999 < l ? (h.normalize(b / Math.sqrt((1 + l) / 2)), k.push(d.add(h))) : k.push(d)
                }
                return k
            };
            var Id = function () {
            };
            h["geom.polygons.PolyTransform"] = Id;
            Id.__name__ = "geom.polygons.PolyTransform";
            Id.translate = function (a, b, c) {
                for (var d = [], g = 0; g < a.length;) {
                    var f = a[g];
                    ++g;
                    d.push(new F(f.x + b, f.y + c))
                }
                return d
            };
            Id.asTranslate = function (a, b, c) {
                for (var d = 0; d < a.length;) {
                    var g = a[d];
                    ++d;
                    g.x += b;
                    g.y += c
                }
            };
            Id.rotateYX = function (a, b, c) {
                for (var d = [], g = 0; g < a.length;) {
                    var f = a[g];
                    ++g;
                    d.push(new F(f.x * c - f.y *
                        b, f.y * c + f.x * b))
                }
                return d
            };
            Id.asRotateYX = function (a, b, c) {
                for (var d = 0; d < a.length;) {
                    var g = a[d];
                    ++d;
                    g.setTo(g.x * c - g.y * b, g.y * c + g.x * b)
                }
            };
            var Ji = function () {
                this.complete = new Yd
            };
            h["processes.Process"] = Ji;
            Ji.__name__ = "processes.Process";
            Ji.prototype = {
                onComplete: function (a) {
                    null != a && this.complete.add(a);
                    return this
                },
                __class__: Ji
            };
            var df = function () {
                this.complete = new Yd
            };
            h["processes.Tweener"] = df;
            df.__name__ = "processes.Tweener";
            df.create = function (a, b) {
                var c = new df;
                c.time = a;
                c.updateCallback = b;
                return c
            };
            df.run = function (a, b) {
                a = df.create(a, b);
                a.start();
                return a
            };
            df.__super__ = Ji;
            df.prototype = w(Ji.prototype, {
                start: function () {
                    this.passed = 0;
                    this.paused = !1;
                    this.updateCallback(0);
                    return this.resume()
                },
                stop: function () {
                    return this.pause()
                },
                resume: function () {
                    Mb.get_tick().add(m(this, this.update));
                    this.paused = !1;
                    return this
                },
                pause: function () {
                    Mb.get_tick().remove(m(this, this.update));
                    this.paused = !0;
                    return this
                },
                update: function (a) {
                    this.paused || ((this.passed += a) < this.time ?
                        this.updateCallback(this.passed / this.time) : (this.updateCallback(1), this.stop(), this.complete.dispatch()))
                },
                __class__: df
            });
            var id = function () {
            };
            h["system.Exporter"] = id;
            id.__name__ = "system.Exporter";
            id.saveBinary = function (a, b, c) {
                b = id.fixName(b);
                a = Pd.toArrayBuffer(a);
                window.saveAs(new Blob([a], {
                    type: c
                }), b, !0)
            };
            id.saveText = function (a, b, c) {
                b = id.fixName(b);
                window.saveAs(new Blob([a], {
                    type: c
                }), b, !0)
            };
            id.savePNG = function (a, b) {
                a = a.encode(a.rect, new Ki);
                id.saveBinary(a, b + ".dw.png", "image/png")
            };
            id.saveJSON = function (a, b, c) {
                null == c && (c = !1);
                a = JSON.stringify(a, null, c ? "  " : null);
                id.saveText(a, b + ".dw.json", "application/json")
            };
            id.fixName = function (a) {
                return (new Ya("[ ']", "g")).split(a.toLowerCase()).join("_")
            };
            var ib = function () {
            };
            h["system.State"] = ib;
            ib.__name__ = "system.State";
            ib.so = null;
            ib.data = null;
            ib.init = function (a, b) {
                null == ib.so && (null == a && (a = C.current.meta.h.packageName), ib.so = cd.getLocal(a), ib.data = ib.so.data, null != b && 0 == L.fields(ib.data).length && b(ib.data))
            };
            ib.get =
                function (a, b) {
                    ib.init();
                    return Object.prototype.hasOwnProperty.call(ib.data, a) ? ib.data[a] : b
                };
            ib.set = function (a, b) {
                ib.init();
                ib.data[a] = b;
                ib.so.flush()
            };
            var Va = function () {
            };
            h["system.URLState"] = Va;
            Va.__name__ = "system.URLState";
            Va.data = null;
            Va.init = function () {
                if (null == Va.data) {
                    Va.data = {};
                    var a = new URLSearchParams(B.location.search);
                    null != a && a.forEach(function (a, c) {
                        return Va.data[c] = a
                    })
                }
            };
            Va.reset = function () {
                Va.data = {};
                Va.update()
            };
            Va.get = function (a, b) {
                Va.init();
                return Object.prototype.hasOwnProperty.call(Va.data,
                    a) ? Va.data[a] : b
            };
            Va.getInt = function (a, b) {
                null == b && (b = 0);
                Va.init();
                return Object.prototype.hasOwnProperty.call(Va.data, a) ? E.parseInt(Va.data[a]) : b
            };
            Va.set = function (a, b) {
                Va.init();
                Va.data[a] = b;
                Va.update()
            };
            Va.getParams = function () {
                for (var a = "", b = Va.data, c = L.fields(b), d = 0; d < c.length;) {
                    var g = c[d++];
                    a += ("" == a ? "?" : "&") + ("" + g + "=" + E.string(b[g]))
                }
                return a
            };
            Va.getURL = function () {
                return Va.baseURL + Va.getParams()
            };
            Va.update = function () {
                window.history.replaceState(Va.data, "", Va.getParams())
            };
            Va.fromString = function (a) {
                Va.data = {};
                a = M.substr(a, a.indexOf("?") + 1, null).split("&");
                for (var b = 0; b < a.length;) {
                    var c = a[b];
                    ++b;
                    var d = c.indexOf("="),
                        g = M.substr(c, 0, d);
                    c = M.substr(c, d + 1, null);
                    c = decodeURIComponent(c.split("+").join(" "));
                    Va.data[g] = c
                }
                Va.update()
            };
            var Ak = function (a, b, c) {
                null == b && (b = -1);
                var d = a.length;
                this.columns = a;
                this.door = b;
                this.windows = c;
                c = b / (d - 1);
                null == c && (c = .5);
                this.signLeft = !((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < c);
                this.sections = [];
                var g = 0;
                do {
                    var f = a[g];
                    c = g;
                    for (var k = d + 1; c < k;) {
                        var q = c++;
                        if (q == d || a[q] != f) {
                            c =
                                new hf(this, q - g, f);
                            this.sections.push(c);
                            g = q;
                            break
                        }
                    }
                } while (g < d);
                c = 1;
                for (k = this.sections.length; c < k;) q = c++, this.sections[q].prev = this.sections[q - 1], this.sections[q - 1].next = this.sections[q];
                c = 0;
                for (k = this.sections; c < k.length;) q = k[c], ++c, q.init();
                c = .3333333333333333;
                null == c && (c = .5);
                if ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < c) {
                    c = [];
                    k = 0;
                    for (g = this.sections; k < g.length;) f = g[k], ++k, 1 == f.gableSize && c.push(f);
                    g = c;
                    if (0 < g.length) {
                        q = ca.max(g, function (a) {
                            return a.height
                        }).height;
                        c = [];
                        for (k = 0; k < g.length;) f =
                            g[k], ++k, f.height == q && c.push(f);
                        ca.random(c).spire = !0
                    }
                }
                c = 1;
                null == c && (c = .5);
                (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < c && (a = 1 < a[b], c = 0 != b && b != this.get_width() - 1, this.lamps = a && c ? 1 : a ? 1 : c ? 2 : 0, -1 != b && (A.lamps = this.lamps));
                c = .2;
                a = this.getSection(b);
                null == a && (c = 0);
                0 != b && b != d - 1 || 1 != a.height || (c *= .5);
                null == c && (c = .5);
                (this.porch = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < c) && 1 == a.height && (a.dormers = !1);
                null != a && (A.porch = this.porch)
            };
            h["tinypubs.model.Facade"] = Ak;
            Ak.__name__ = "tinypubs.model.Facade";
            Ak.prototype = {
                get_width: function () {
                    return this.columns.length
                },
                getSection: function (a) {
                    for (var b = 0, c = 0, d = this.sections; c < d.length;) {
                        var g = d[c];
                        ++c;
                        if (a >= b && a < b + g.width) return g;
                        b += g.width
                    }
                    return null
                },
                hasWindow: function (a, b) {
                    if (null == this.windows) return 0 >= b ? a != this.door : !0;
                    for (var c = 0, d = this.windows; c < d.length;) {
                        var g = d[c];
                        ++c;
                        if (g.x == a && g.y == b) return !0
                    }
                    return !1
                },
                __class__: Ak,
                __properties__: {
                    get_width: "get_width"
                }
            };
            var hf = function (a, b, c) {
                this.chimney = -1;
                this.facade = a;
                this.width = b;
                this.height = c;
                this.next =
                    this.prev = null
            };
            h["tinypubs.model.Section"] = hf;
            hf.__name__ = "tinypubs.model.Section";
            hf.prototype = {
                getPos: function () {
                    return null == this.prev ? 0 : this.prev.getPos() + this.prev.width
                },
                init: function () {
                    this.gableSize = this.gablePos = 0;
                    this.leftLower = null == this.prev || this.prev.height < this.height;
                    this.rightLower = null == this.next || this.next.height < this.height;
                    this.leftLower && this.rightLower ? 2 >= this.width ? (this.gableSize = this.width, this.gablePos = 0) : (this.gableSize = 2, this.gablePos = Math.floor((t.seed =
                        48271 * t.seed % 2147483647 | 0) / 2147483647 * (this.width - this.gableSize + 1))) : this.leftLower ? 2 < this.width && (this.gableSize = 2, this.gablePos = Math.floor((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * (this.width - this.gableSize))) : this.rightLower ? 2 < this.width && (this.gableSize = 2, this.gablePos = Math.floor(1 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * (this.width - this.gableSize + 1 - 1))) : 4 <= this.width && (this.gableSize = 2, this.gablePos = Math.floor(1 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * (this.width - this.gableSize -
                        1)));
                    if (0 < this.gableSize) {
                        var a = (this.width - 2) / this.facade.get_width();
                        null == a && (a = .5);
                        a = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < a
                    } else a = !1;
                    a && (this.gableSize = this.gablePos = 0);
                    this.gableWallLeft = this.leftLower;
                    this.gableWallRight = this.rightLower;
                    0 < this.gableSize && (this.gableWallLeft = this.gableWallLeft && 0 < this.gablePos, this.gableWallRight = this.gableWallRight && this.gablePos + this.gableSize < this.width);
                    a = 2 / (this.height + 2);
                    null == a && (a = .5);
                    this.dormers = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 <
                        a
                },
                addChimney: function () {
                    var a = ca.random([hf.gold, hf.gold, hf.gold, .3333333333333333, .3333333333333333, .5]);
                    this.dormers && (a = hf.gold);
                    if (0 == this.gableSize) a = this.width * (this.leftLower && this.rightLower ? this.chimney = ca.random([a, 1 - a]) : this.leftLower ? this.chimney = a : this.rightLower ? this.chimney = 1 - a : this.prev.height < this.next.height ? a : 1 - a);
                    else if (0 == this.gablePos) a = this.gableSize / 2 + (this.width - this.gableSize / 2) * (1 - a);
                    else if (this.gablePos + this.gableSize == this.width) a *= this.width - this.gableSize / 2;
                    else {
                        var b =
                                this.gablePos + this.gableSize / 2,
                            c = this.width - this.gablePos - this.gableSize / 2;
                        a = this.leftLower && !this.rightLower ? b * a : this.rightLower && !this.leftLower ? this.width - c * a : b > c || b == c && .5 > (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 ? b * a : this.width - c * a
                    }
                    this.chimney = a
                },
                getPinnacle: function () {
                    var a = A.baseHeight + this.height * A.floorHeight;
                    a += this.gableSize / 2 * A.columnWidth * A.roofSlope;
                    if (null != A.gableEnds) {
                        var b = A.gableEnds;
                        a += b.height;
                        1 < this.gableSize && (a += b.capHeight);
                        if (0 < b.step) {
                            var c = this.gableSize * A.columnWidth;
                            a += c / (Math.floor(c / b.step) | 1) * A.roofSlope / 2
                        }
                    }
                    null != A.gableRoof && (a += A.gableRoof.thickness / Math.cos(Math.atan(A.roofSlope)));
                    null != A.hipRoof && (a += A.hipRoof.eave * A.roofSlope);
                    return a
                },
                __class__: hf
            };
            var Mk = function () {
                this.merlon = A.nml(12, 20);
                this.crenel = this.merlon * A.nml(.6, 1);
                this.height = this.merlon * A.nml(.6, 1.2);
                var a = A.nml(-.7, .7);
                this.point = this.height * (0 < a ? a : -a * a);
                2 > Math.abs(this.point) && (this.point = 0)
            };
            h["tinypubs.params.CastellatedRoofData"] = Mk;
            Mk.__name__ = "tinypubs.params.CastellatedRoofData";
            Mk.prototype = {
                __class__: Mk
            };
            var Nk = function () {
                this.w0 = 8 + 8 * A.nml2();
                this.w1 = this.w0 * (1 + A.nml(0, .4));
                this.h0 = Math.min(A.floorHeight, A.columnWidth * A.roofSlope) * (.2 + .6 * A.nml2());
                this.h1 = this.w1 * (.2 + A.nml2())
            };
            h["tinypubs.params.ChimneyData"] = Nk;
            Nk.__name__ = "tinypubs.params.ChimneyData";
            Nk.prototype = {
                __class__: Nk
            };
            var A = function () {
            };
            h["tinypubs.params.Dimensions"] = A;
            A.__name__ = "tinypubs.params.Dimensions";
            A.gableEnds = null;
            A.gableRoof = null;
            A.hipRoof = null;
            A.castel = null;
            A.window = null;
            A.gableWin = null;
            A.dormer = null;
            A.door = null;
            A.porch = null;
            A.lamps = null;
            A.chimney = null;
            A.sign = null;
            A.lamp = null;
            A.spire = null;
            A.roof = null;
            A.stonework = null;
            A.fachwerk1 = null;
            A.fachwerk2 = null;
            A.random = function () {
                A.columnWidth = A.nml(35, 45);
                A.floorHeight = A.nml(50, 70);
                A.roofSlope = Math.sin(Math.PI / 2 * A.nml(.3333333333333333, .6666666666666666));
                A.window = [new ke];
                var a = .6666666666666666;
                null == a && (a = .5);
                (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < a && (A.window.push(new ke), a = .25, null ==
                a && (a = .5), (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < a && A.window.push(new ke));
                if (null != A.castel) {
                    a = 0;
                    for (var b = A.window; a < b.length;) {
                        var c = b[a];
                        ++a;
                        c.width *= .7;
                        c.height *= .9
                    }
                }
                A.baseThickness = A.nml(0, 4);
                1 > A.baseThickness && (A.baseThickness = 0);
                A.baseHeight = .5 * A.floorHeight * Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                5 > A.baseHeight && (A.baseHeight =
                    0, A.baseThickness = 0);
                a = A.floorHeight - (A.window[0].height + 2 * A.window[0].frame);
                A.apronHeight = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * a / 2;
                A.apronHeight > .5 * A.floorHeight - A.baseHeight && (A.apronHeight = .5 * A.floorHeight - A.baseHeight);
                5 > A.apronHeight && (A.apronHeight = 0);
                A.gableEnds = null;
                A.gableRoof = null;
                A.hipRoof = null;
                A.castel = null;
                A.fortified ? (A.castel = new Mk, A.roofSlope = Math.tan(Math.PI / 2 * A.rnd(0, .7)), A.roofSlope * A.columnWidth < A.castel.height && (A.roofSlope = 0)) : (A.hipRoof = new Ok, A.roofSlope = Math.tan(Math.PI /
                    2 * A.rnd(.25, .75)));
                A.door = new Pk;
                A.gableWin = new Qk;
                A.dormer = new Rk;
                A.chimney = new Nk;
                A.sign = new Sk;
                A.lamp = new Tk;
                A.spire = new Uk;
                a = .75;
                null == a && (a = .5);
                A.roof = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < a ? new Li : new Mi;
                a = A.baseHeight / 20;
                null == a && (a = .5);
                (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < a ? A.stonework = new Ni : A.stonework = null;
                A.fortified ? a = !1 : (a = .1, null == a && (a = .5), a = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < a);
                a ? (A.fachwerk1 = new Oi, A.fachwerk2 = .5 > (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 ?
                    new Oi : null) : (A.fachwerk1 = null, A.fachwerk2 = null);
                A.porch = !1
            };
            A.rnd = function (a, b) {
                return a + (b - a) * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647)
            };
            A.nml = function (a, b) {
                return a + (b - a) * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3)
            };
            A.nml2 = function () {
                return Math.pow(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3,
                    2)
            };
            var Pk = function () {
                this.cap = 0;
                this.height = 35;
                this.width = 16;
                this.width = A.nml(12, 20);
                this.height = this.width * A.nml(2, 2.5);
                var a = (A.floorHeight + A.window[0].height) / 2;
                this.height < a && (this.height = a);
                a = this.width / this.height;
                null == a && (a = .5);
                (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < a ? (this.cap = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647, .2 > this.cap ? this.cap = 0 : .9 < this.cap && (this.cap = 1), this.cap *= this.width / 2) : this.cap = 0
            };
            h["tinypubs.params.DoorData"] = Pk;
            Pk.__name__ = "tinypubs.params.DoorData";
            Pk.prototype = {
                getPorchWidth: function () {
                    return (this.getWidth() + A.columnWidth) / 2
                },
                getFrame: function () {
                    if (0 == A.apronHeight) return A.window[0].frame;
                    for (var a = 0, b = A.window; a < b.length;) {
                        var c = b[a];
                        ++a;
                        if (0 < c.frame) return c.frame
                    }
                    return null != A.stonework ? 3 : 0
                },
                getHeight: function () {
                    return this.height + this.getFrame()
                },
                getWidth: function () {
                    return this.width + 2 * this.getFrame()
                },
                __class__: Pk
            };
            var Rk = function () {
                this.window = new ke;
                this.window.frame = 0;
                this.window.scale(1, .8333333333333334);
                this.border = A.nml(3, 6);
                this.slope = A.roofSlope * (1 - Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                this.gable = this.slope * (this.window.width / 2 + this.border);
                this.borderT = this.border * Math.sin(Math.atan(1 / this.slope));
                this.top = this.window.height / 2 + this.borderT + this.gable;
                this.bottom = this.window.height / 2 + this.border;
                var a = this.bottom / (A.floorHeight / 2);
                null == a && (a = .5);
                this.wall =
                    (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < a
            };
            h["tinypubs.params.DormerData"] = Rk;
            Rk.__name__ = "tinypubs.params.DormerData";
            Rk.prototype = {
                __class__: Rk
            };
            var Oi = function () {
                switch (Math.floor((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * 10)) {
                    case 0:
                        var a = [
                            [0, 0, 1, 3],
                            [1, 0, 2, 1],
                            [1, 2, 2, 3]
                        ];
                        break;
                    case 1:
                        a = [
                            [0, 0, 3, 1],
                            [0, 1, 1, 2],
                            [0, 2, 3, 3]
                        ];
                        break;
                    case 2:
                        a = [
                            [0, 0, 3, 1],
                            [0, 1, 1, 3],
                            [1, 2, 2, 3]
                        ];
                        break;
                    case 3:
                        a = [
                            [0, 0, 1, 2],
                            [1, 0, 2, 1],
                            [0, 2, 3, 3]
                        ];
                        break;
                    case 4:
                        a = [
                            [0, 0, 3, 1],
                            [0, 1, 1, 2],
                            [0, 2, 1, 3],
                            [1, 2,
                                2, 3
                            ]
                        ];
                        break;
                    case 5:
                        a = [
                            [0, 0, 1, 1],
                            [1, 0, 2, 1],
                            [0, 1, 1, 2],
                            [0, 2, 3, 3]
                        ];
                        break;
                    case 6:
                        a = [
                            [0, 0, 1, 1],
                            [1, 0, 2, 1],
                            [0, 1, 1, 3],
                            [1, 2, 2, 3]
                        ];
                        break;
                    case 7:
                        a = [
                            [0, 0, 1, 2],
                            [1, 0, 2, 1],
                            [0, 2, 1, 3],
                            [1, 2, 2, 3]
                        ];
                        break;
                    default:
                        a = [
                            [0, 0, 1, 1],
                            [1, 0, 2, 1],
                            [0, 1, 1, 2],
                            [0, 2, 1, 3],
                            [1, 2, 2, 3]
                        ]
                }
                do {
                    this.pieces = [];
                    for (var b = 0; b < a.length;) {
                        var c = a[b];
                        ++b;
                        var d = 3 == c[0] + c[2];
                        0 < c[0] && this.pieces.push([c[0], c[1], c[0], c[3]]);
                        0 < c[1] && this.pieces.push([c[0], c[1], c[2], c[1]]);
                        d || (this.pieces.push([c[0] + 2, c[1], c[0] + 2, c[3]]), 0 < c[1] && this.pieces.push([c[0] + 2, c[1],
                            c[2] + 2, c[1]
                        ]));
                        if (d) 1 == Math.floor((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * 2) && (this.pieces.push([c[0], c[1], c[2], c[3]]), this.pieces.push([c[0], c[3], c[2], c[1]]));
                        else switch (Math.floor((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * 4)) {
                            case 1:
                                this.pieces.push([c[0], c[1], c[2], c[3]]);
                                this.pieces.push([c[0], c[3], c[2], c[1]]);
                                this.pieces.push([c[0] + 2, c[1], c[2] + 2, c[3]]);
                                this.pieces.push([c[0] + 2, c[3], c[2] + 2, c[1]]);
                                break;
                            case 2:
                                this.pieces.push([c[0], c[1], c[2], c[3]]);
                                this.pieces.push([c[0] + 2, c[3], c[2] +
                                2, c[1]
                                ]);
                                break;
                            case 3:
                                this.pieces.push([c[0], c[3], c[2], c[1]]), this.pieces.push([c[0] + 2, c[1], c[2] + 2, c[3]])
                        }
                    }
                } while (6 > this.pieces.length || 16 < this.pieces.length)
            };
            h["tinypubs.params.FachwerkData"] = Oi;
            Oi.__name__ = "tinypubs.params.FachwerkData";
            Oi.prototype = {
                getSegments: function (a, b, c, d, g) {
                    a = [-a, -c, c, a];
                    b = [-b, -d, d, b];
                    d = [];
                    c = 0;
                    for (var f = this.pieces; c < f.length;) {
                        var k = f[c];
                        ++c;
                        (!g || 3 > k[1] && 3 > k[3]) && d.push([a[k[0]], b[k[1]], a[k[2]], b[k[3]]])
                    }
                    return d
                },
                __class__: Oi
            };
            var Tl = function () {
                this.capHeight =
                    8;
                this.capWidth = 6;
                this.step = 0;
                this.height = 4;
                this.thickness = 6;
                this.thickness = A.nml(5, 8);
                this.height = A.nml(2, 6);
                this.capWidth = this.thickness * Math.max(1, A.nml(.5, 1.5));
                this.capHeight = this.height * Math.pow(2, A.nml(0, 2));
                var a = this.capHeight / this.thickness;
                null == a && (a = .5);
                (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < a || (this.capHeight = 0);
                a = A.roofSlope * A.roofSlope / 5;
                null == a && (a = .5);
                (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < a ? (this.step = 4 + 4 * Math.pow(A.nml(0, 1), 2), this.height = 0) : this.step = 0
            };
            h["tinypubs.params.GableEndsData"] =
                Tl;
            Tl.__name__ = "tinypubs.params.GableEndsData";
            Tl.prototype = {
                __class__: Tl
            };
            var Ul = function () {
                this.thickness = 2 + 4 * Math.pow(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3, 2);
                this.rake = A.baseThickness + 8 * (this.thickness - A.baseThickness) * Math.pow(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3, 2)
            };
            h["tinypubs.params.GableRoofData"] =
                Ul;
            Ul.__name__ = "tinypubs.params.GableRoofData";
            Ul.prototype = {
                __class__: Ul
            };
            var Qk = function () {
                if (.5 > (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) {
                    this.window = new ke;
                    this.window.frame = 0;
                    var a = .6666666666666666;
                    null == a && (a = .5);
                    (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < a ? (this.window.scale(1, .5), this.distance = 0) : (this.window.scale(.5, .6666666666666666), this.distance = this.window.width * (1 + 2 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed =
                        48271 * t.seed % 2147483647 | 0) / 2147483647) / 3)), 2 * this.window.frame > this.distance - this.window.width && (this.window.frame = 0));
                    this.window.cap = Math.min(2 * this.window.cap, this.window.height)
                } else a = A.window, this.distance = Math.max(a[a.length - 1].width / 3, 5)
            };
            h["tinypubs.params.GableWindow"] = Qk;
            Qk.__name__ = "tinypubs.params.GableWindow";
            Qk.prototype = {
                __class__: Qk
            };
            var Ok = function () {
                this.eave = 8 * A.baseThickness * Math.pow(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 |
                    0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3, 2);
                3 > this.eave && (this.eave = 3)
            };
            h["tinypubs.params.HipRoofData"] = Ok;
            Ok.__name__ = "tinypubs.params.HipRoofData";
            Ok.prototype = {
                __class__: Ok
            };
            var Tk = function () {
                this.h1 = 2.5;
                this.h0 = 10;
                this.w1 = 5;
                this.w0 = 2.5;
                this.w0 = 2 + Math.pow(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3, 2);
                this.w1 = this.w0 * (1 + ((t.seed = 48271 * t.seed % 2147483647 |
                    0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3);
                this.h1 = 2 + Math.pow(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3, 2);
                this.h0 = Math.min(this.h1 * (3 + 2 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3)), 5 * this.w0)
            };
            h["tinypubs.params.LampData"] =
                Tk;
            Tk.__name__ = "tinypubs.params.LampData";
            Tk.prototype = {
                __class__: Tk
            };
            var Sk = function () {
                this.hanging = !0;
                this.round = !1;
                this.e = this.f = 0;
                this.d = 5;
                this.c = 20;
                this.b = 15;
                this.a = 25;
                this.a = 24 + 5 * Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                this.b = 15 + 5 * Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 +
                    (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                this.c = this.b * (1 + Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                this.d = 4 + 5 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3);
                var a = (this.c - this.b) / this.b,
                    b =
                        Math.sqrt(a);
                null == b && (b = .5);
                (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < b && (a = Math.min(Math.pow(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3, 2), 2 * a), .1 <= a && (this.round = .5 > (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647, this.e = .5 * this.b * a));
                b = .8;
                null == b && (b = .5);
                (this.hanging = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < b) ? (this.f = 6 * Math.sqrt(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 *
                    t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3), 4 > this.f && (this.f = 0)) : this.f = 0;
                this.sl = this.f + (this.a - this.b) / 2;
                this.sr = this.sl + this.b;
                this.sc = this.sl + this.b / 2;
                this.st = this.d;
                this.sb = this.d + this.c - this.e
            };
            h["tinypubs.params.SignData"] = Sk;
            Sk.__name__ = "tinypubs.params.SignData";
            Sk.prototype = {
                __class__: Sk
            };
            var Uk = function () {
                this.length = (A.floorHeight + A.columnWidth * A.roofSlope) / (2 + 2 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 *
                    t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3));
                var a = .6666666666666666;
                null == a && (a = .5);
                this.ball = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < a;
                this.cross = .5 > (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647;
                a = .3333333333333333;
                null == a && (a = .5);
                this.pike = (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < a;
                a = .8;
                null == a && (a = .5);
                (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < a ? (this.nsew = A.nml(6, 10), this.arrow = A.nml(6, 12)) : this.arrow = this.nsew = 0
            };
            h["tinypubs.params.SpireData"] =
                Uk;
            Uk.__name__ = "tinypubs.params.SpireData";
            Uk.prototype = {
                __class__: Uk
            };
            var Pe = N["tinypubs.params.ColorMode"] = {
                __ename__: "tinypubs.params.ColorMode",
                __constructs__: null,
                LINEWORK: {
                    _hx_name: "LINEWORK",
                    _hx_index: 0,
                    __enum__: "tinypubs.params.ColorMode",
                    toString: u
                },
                COLORIZED: {
                    _hx_name: "COLORIZED",
                    _hx_index: 1,
                    __enum__: "tinypubs.params.ColorMode",
                    toString: u
                },
                DARK: {
                    _hx_name: "DARK",
                    _hx_index: 2,
                    __enum__: "tinypubs.params.ColorMode",
                    toString: u
                },
                VIVID: {
                    _hx_name: "VIVID",
                    _hx_index: 3,
                    __enum__: "tinypubs.params.ColorMode",
                    toString: u
                },
                NIGHT: {
                    _hx_name: "NIGHT",
                    _hx_index: 4,
                    __enum__: "tinypubs.params.ColorMode",
                    toString: u
                },
                INHERITED: {
                    _hx_name: "INHERITED",
                    _hx_index: 5,
                    __enum__: "tinypubs.params.ColorMode",
                    toString: u
                }
            };
            Pe.__constructs__ = [Pe.LINEWORK, Pe.COLORIZED, Pe.DARK, Pe.VIVID, Pe.NIGHT, Pe.INHERITED];
            var I = function () {
            };
            h["tinypubs.params.Style"] = I;
            I.__name__ = "tinypubs.params.Style";
            I.setDark =
                function () {
                    I.mode = Pe.DARK;
                    I.colorInk = 2236962;
                    I.colorBg = 13685460;
                    I.colorWall = Ia.hsl(60 + 20 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), .1 * Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1), .6 + .1 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed =
                        48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3));
                    I.colorRoof = Ia.hsl(220 + 30 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), .3 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3), .35 + .15 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) /
                        2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3));
                    I.colorBase = Ia.lerp(I.colorWall, Ia.grey(.5 + .1 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3)));
                    I.colorStairs = Ia.scale(I.colorBase, .95);
                    I.colorDoor = Ia.hsl(35 + 20 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), .2 * (((t.seed = 48271 * t.seed % 2147483647 |
                        0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3), .4 + .1 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1));
                    I.colorWindow = 3290166;
                    I.colorFrame = Ia.scale(I.colorWall, 1 + .3 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1));
                    I.colorGrass = 4478242;
                    I.colorLamp =
                        Ia.lerp(I.colorWall, 16772778);
                    I.colorSign1 = Ia.hsl(360 * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647), .3, .3);
                    I.colorSign2 = 16777215;
                    I.strokeNormal = 1.6;
                    I.strokeFine = 1
                };
            I.setInherited = function () {
                I.mode = Pe.INHERITED;
                for (var a = J.colorPaper, b = Ia.brightness(a), c = [], d = 0, g = z.getClassFields(J); d < g.length;) {
                    var f = g[d];
                    ++d;
                    "color" == M.substr(f, 0, 5) && (f = L.field(J, f), f != a && c.push(f))
                }
                var k = c,
                    q = [];
                g = [];
                d = a;
                for (c = 0; c < k.length;) {
                    f = k[c];
                    ++c;
                    var l = Ia.brightness(f);
                    l > b && q.push(f);
                    l < b && f != J.colorInk && g.push(f);
                    l < Ia.brightness(d) &&
                    (d = f)
                }
                b = 0 < q.length ? ca.min(q, function (a) {
                    return Ia.brightness(a)
                }) : a;
                a = 0 < g.length ? ca.max(g, function (a) {
                    return Ia.brightness(a)
                }) : a;
                I.colorInk = J.colorInk;
                I.colorBg = J.colorPaper;
                I.colorWall = b;
                I.colorRoof = J.colorRoof;
                I.colorBase = a;
                I.colorStairs = b;
                I.colorDoor = a;
                I.colorWindow = d;
                I.colorFrame = I.colorBg;
                I.colorGrass = I.colorInk;
                I.colorLamp = b;
                I.colorSign1 = b;
                I.colorSign2 = I.colorInk;
                I.strokeNormal = 57.599999999999994 * J.strokeNormal;
                I.strokeFine = 57.599999999999994 * J.strokeGrid
            };
            I.pickContrast = function (a, b, c) {
                c =
                    Ia.brightness(c);
                var d = Ia.brightness(a),
                    g = Ia.brightness(b);
                return Math.abs(c - d) > Math.abs(c - g) ? a : b
            };
            var ke = function () {
                this.frame = 3;
                this.cap = 0;
                this.height = 18;
                this.width = 10;
                this.width = A.nml(9, 12);
                this.height = this.width * A.nml(1, ke.maxRatio);
                this.frame = A.nml(0, 5);
                1.5 > this.frame && (this.frame = 0);
                var a = (this.height / this.width - 1) / (ke.maxRatio - 1),
                    b = a * a;
                null == b && (b = .5);
                (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < b ? (this.cap = a * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647), .2 > this.cap ? this.cap = 0 : .9 < this.cap &&
                    (this.cap = 1), this.cap *= this.width / 2) : this.cap = 0;
                this.scale(1, 1)
            };
            h["tinypubs.params.WindowData"] = ke;
            ke.__name__ = "tinypubs.params.WindowData";
            ke.prototype = {
                scale: function (a, b) {
                    this.width *= a;
                    this.height *= b;
                    this.cols = Math.round(this.width / 6);
                    this.rows = Math.round(this.height / 6)
                },
                clone: function () {
                    var a = new ke;
                    a.width = this.width;
                    a.height = this.height;
                    a.cap = this.cap;
                    a.frame = this.frame;
                    a.cols = this.cols;
                    a.rows = this.rows;
                    return a
                },
                __class__: ke
            };
            var Ic = function () {
            };
            h["tinypubs.utils.Brush"] =
                Ic;
            Ic.__name__ = "tinypubs.utils.Brush";
            Ic.use = function (a, b, c, d) {
                null == d && (d = 0);
                Ic.f = null != a ? a : Ic.decay;
                Ic.color = b;
                Ic.th0 = c;
                Ic.th1 = d
            };
            Ic.decay = function (a, b) {
                return Ic.th0 * (1 - a / b) + a / b * Ic.th1
            };
            Ic.stroke = function (a, b) {
                var c = Ff.$length(b),
                    d = 0,
                    g = b[0],
                    f = b[1],
                    k = f.subtract(g),
                    q = k.get_length();
                k.normalize(1);
                var l = Ic.f(0, c),
                    h = new F(-k.y, k.x),
                    n = l / 2;
                h.x *= n;
                h.y *= n;
                var r = [g.add(h)],
                    t = [g.subtract(h)];
                n = 2;
                for (var p = b.length; n < p;) {
                    l = n++;
                    d += q;
                    g = f;
                    f = b[l];
                    var y = k;
                    k = f.subtract(g);
                    q = k.get_length();
                    k.normalize(1);
                    l = Ic.f(d, c);
                    h = y.add(k);
                    h = new F(-h.y, h.x);
                    y = Math.sqrt((1 + (y.x * k.x + y.y * k.y)) / 2);
                    .1 > y && (y = .1);
                    h.normalize(l / 2 / y);
                    r.push(g.add(h));
                    t.unshift(g.subtract(h))
                }
                l = Ic.f(c, c);
                h = new F(-k.y, k.x);
                n = l / 2;
                h.x *= n;
                h.y *= n;
                r.push(f.add(h));
                t.unshift(f.subtract(h));
                a.beginFill(Ic.color);
                Za.drawPolygon(a, r.concat(t));
                a.endFill()
            };
            var Vc = function () {
            };
            h["tinypubs.utils.Drawing"] = Vc;
            Vc.__name__ = "tinypubs.utils.Drawing";
            Vc.horArc = function (a, b, c, d, g, f, k) {
                null == k && (k = 0);
                null == f && (f = !0);
                d *= .5;
                var q = (d *
                        d + g * g) / (2 * g),
                    l = Math.asin(d / q);
                isNaN(l) && (l = Math.PI / 2);
                var h = b;
                c = c - g + q;
                Za.drawArc(a, h, c, q, 3 * Math.PI / 2 - l, 3 * Math.PI / 2 + l, f);
                if (0 == k) return null;
                a = [];
                f = 1;
                for (g = k + 1; f < g;) b = f++, l = -d, b /= k + 1, null == b && (b = .5), b = l + (d - l) * b, l = F.polar(q, -Math.acos(b / q)), a.push(new F(l.x + h, l.y + c));
                return a
            };
            Vc.dashedHor = function (a, b, c, d, g, f) {
                null == f && (f = 0);
                null == g && (g = 0);
                var k = Math.max(Math.abs(d), Math.abs(f)),
                    q = (0 != d && 0 != f ? Math.min(Math.abs(d), Math.abs(f)) : k) / 5;
                f = b + d + g + f;
                k = Vc.dashes(q, q, 2 * Math.floor(k / q));
                Za.dashedLine(a, new F(b,
                    c), new F(f, c), k);
                0 != g && (a.moveTo(b + d, c), a.lineTo(b + d + g, c))
            };
            Vc.dashes = function (a, b, c) {
                null == c && (c = 10);
                for (var d = [], g = 0; g < c;) {
                    var f = g++;
                    d.push((0 == (f & 1) ? a : b) * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647))
                }
                return d
            };
            var Pi = function () {
                X.call(this);
                var a = A.chimney.w0 / 2,
                    b = A.chimney.w1 / 2,
                    c = b - a,
                    d = A.chimney.h0,
                    g = d + A.chimney.h1,
                    f = this.get_graphics(),
                    k = a * A.roofSlope;
                f.lineStyle(I.strokeNormal, I.colorInk);
                f.beginFill(I.colorWall);
                f.moveTo(-a, k);
                f.lineTo(-a, -d);
                f.lineTo(-b, -d);
                f.lineTo(-b, -g);
                1.5 < c && (f.lineTo(-a,
                    -g), f.lineTo(-a, -g - c), f.lineTo(a, -g - c), f.lineTo(a, -g));
                f.lineTo(b, -g);
                f.lineTo(b, -d);
                f.lineTo(a, -d);
                f.lineTo(a, k);
                f.endFill();
                f.lineStyle(I.strokeFine, I.colorInk);
                f.moveTo(.6 * -a, -d);
                f.lineTo(.6 * a, -d);
                1.5 < c && (f.moveTo(-a, -g), f.lineTo(a, -g))
            };
            h["tinypubs.view.ChimneyView"] = Pi;
            Pi.__name__ = "tinypubs.view.ChimneyView";
            Pi.__super__ = X;
            Pi.prototype = w(X.prototype, {
                __class__: Pi
            });
            var Qi = function () {
                X.call(this);
                var a = this.get_graphics(),
                    b = A.door.width,
                    c = A.door.height,
                    d = A.door.cap,
                    g = A.door.getFrame(),
                    f = 3 + 2 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3),
                    k = Math.round(b / f);
                f = b / k;
                if (0 < d) {
                    var q = g * (1 - d / (b / 2));
                    a.lineStyle(I.strokeFine, I.colorInk);
                    a.beginFill(I.colorFrame);
                    this.drawShape(b / 2 + g, c - d + q, d + g - q);
                    a.endFill();
                    a.lineStyle(I.strokeNormal, I.colorInk);
                    a.beginFill(I.colorDoor);
                    k = this.drawShape(b / 2, c - d, d, k - 1);
                    a.endFill();
                    a.lineStyle(I.strokeFine, I.colorInk);
                    for (d = 0; d < k.length;) g = k[d], ++d, a.moveTo(g.x, 0),
                        a.lineTo(g.x, g.y)
                } else
                    for (a.lineStyle(I.strokeFine, I.colorInk), a.beginFill(I.colorFrame), a.drawRect(-b / 2 - g, 0, b + 2 * g, -c - g), a.lineStyle(I.strokeNormal, I.colorInk), a.beginFill(I.colorDoor), a.drawRect(-b / 2, 0, b, -c), a.endFill(), a.lineStyle(I.strokeFine, I.colorInk), d = 1; d < k;) g = d++, g = -b / 2 + g * f, a.moveTo(g, 0), a.lineTo(g, -c);
                g = -b / 2 + (4.5 > f ? f : f / 2);
                b = -c / 2;
                a.lineStyle(2, I.colorInk);
                a.moveTo(g, b - 2);
                a.lineTo(g, b + 3)
            };
            h["tinypubs.view.DoorView"] = Qi;
            Qi.__name__ = "tinypubs.view.DoorView";
            Qi.__super__ =
                X;
            Qi.prototype = w(X.prototype, {
                drawShape: function (a, b, c, d) {
                    null == d && (d = 0);
                    var g = this.get_graphics();
                    g.moveTo(-a, 0);
                    g.lineTo(-a, -b);
                    b = Vc.horArc(g, 0, -b, 2 * a, c, !1, d);
                    g.lineTo(a, 0);
                    return b
                },
                __class__: Qi
            });
            var Ri = function () {
                X.call(this);
                var a = A.dormer.window,
                    b = new tg(a);
                this.addChild(b);
                b = this.get_graphics();
                var c = a.width / 2 + A.dormer.border;
                a = a.height / 2;
                var d = [new F(-c, a + A.dormer.border), new F(-c, -a - A.dormer.borderT), new F(0, -A.dormer.top), new F(c, -a - A.dormer.borderT), new F(c, a + A.dormer.border)];
                b.beginFill(I.colorWall);
                A.dormer.wall ? (d[0].y += I.strokeNormal, d[4].y += I.strokeNormal, Za.drawPolygon(b, d), b.endFill(), d[0].y -= I.strokeNormal, d[4].y -= I.strokeNormal, b.lineStyle(I.strokeNormal, I.colorInk), Za.drawPolyline(b, d)) : (b.lineStyle(I.strokeNormal, I.colorInk), Za.drawPolygon(b, d));
                b.endFill();
                null != A.gableRoof && Of.paintGable(b, -c, a + A.dormer.borderT, 2 * c, A.dormer.gable, A.gableRoof.thickness)
            };
            h["tinypubs.view.DormerView"] = Ri;
            Ri.__name__ = "tinypubs.view.DormerView";
            Ri.__super__ = X;
            Ri.prototype = w(X.prototype, {
                __class__: Ri
            });
            var ti = function () {
                X.call(this)
            };
            h["tinypubs.view.FacadeView"] = ti;
            ti.__name__ = "tinypubs.view.FacadeView";
            ti.__super__ = X;
            ti.prototype = w(X.prototype, {
                draw: function (a) {
                    this.removeChildren();
                    this.get_graphics().clear();
                    this.drawSlopes(a);
                    this.drawWall(a);
                    null != A.gableRoof && this.drawFrontSlopes(a);
                    this.drawBase(a);
                    this.drawSeparator(a);
                    this.drawWindows(a);
                    this.drawSpire(a);
                    this.drawDoor(a)
                },
                drawBase: function (a) {
                    var b = this.get_graphics();
                    a = a.get_width() * A.columnWidth;
                    var c = A.baseHeight + A.apronHeight;
                    b.beginFill(I.colorBase);
                    b.drawRect(-A.baseThickness, 0, a + 2 * A.baseThickness, -c);
                    b.endFill();
                    b.lineStyle(I.strokeNormal, I.colorInk, null, null, null, 2);
                    b.moveTo(0, -c);
                    b.lineTo(-A.baseThickness, -c);
                    b.lineTo(-A.baseThickness, 0);
                    b.lineTo(a + A.baseThickness, 0);
                    b.lineTo(a + A.baseThickness, -c);
                    b.lineTo(a, -c);
                    b.endFill();
                    if (null != A.stonework) A.stonework.rect(b, -A.baseThickness, -c, a + 2 * A.baseThickness, c);
                    else {
                        var d = I.strokeNormal + I.strokeFine;
                        b.lineStyle(I.strokeFine, I.colorInk);
                        b.moveTo(d, -c);
                        b.lineTo(a - d, -c)
                    }
                },
                drawSlopes: function (a) {
                    if (!(0 >= A.roofSlope)) {
                        var b = this.get_graphics(),
                            c = .95 * A.floorHeight;
                        null != A.gableEnds && (c += A.gableEnds.height);
                        var d = 2 * A.columnWidth * A.roofSlope / 2;
                        null != A.hipRoof && (d += A.hipRoof.eave * A.roofSlope);
                        var g = 0;
                        for (a = a.sections; g < a.length;) {
                            var f = a[g];
                            ++g;
                            var k = f.getPos() + 0,
                                q = -A.baseHeight - f.height * A.floorHeight,
                                l = d < c || f.leftLower && f.rightLower ? d : c;
                            if (null != A.hipRoof) {
                                var h = k * A.columnWidth,
                                    n = h + f.width * A.columnWidth,
                                    r = new F(h, q),
                                    t = new F(n, q);
                                1 == f.width &&
                                f.leftLower && f.rightLower ? (r.x -= A.hipRoof.eave, t.x += A.hipRoof.eave, h = new F((r.x + t.x) / 2, q - (t.x - r.x) / 2 * A.roofSlope), A.roof.poly(b, [r, t, h])) : (n = new F(n, q - l), h = new F(h, q - l), f.rightLower && (t.x += A.hipRoof.eave, n.x += A.hipRoof.eave - l / A.roofSlope), f.leftLower && (r.x -= A.hipRoof.eave, h.x -= A.hipRoof.eave - l / A.roofSlope), A.roof.poly(b, [r, t, n, h]))
                            } else if (null != A.castel) h = k * A.columnWidth, n = h + f.width * A.columnWidth, r = new F(h, q), t = new F(n, q), 2 >= f.width && f.leftLower && f.rightLower || (n = new F(n, q - l), h = new F(h, q - l), f.rightLower &&
                            (t.x -= A.columnWidth / 2, n.x -= A.columnWidth / 2 + l / A.roofSlope), f.leftLower && (r.x += A.columnWidth / 2, h.x += A.columnWidth / 2 + l / A.roofSlope), A.roof.poly(b, [r, t, n, h]));
                            else if (0 == f.gableSize || f.gableSize < f.width) r = k, t = k + f.width, null == A.gableRoof && 0 < f.gableSize && (h = k + f.gablePos + f.gableSize / 2, 0 == f.gablePos && (r = h), f.gablePos + f.gableSize == f.width && (t = h)), h = r * A.columnWidth, n = t * A.columnWidth, r == k && f.leftLower && (null != A.gableEnds && (h += A.gableEnds.thickness), null != A.gableRoof && (h -= A.gableRoof.rake)), t == k + f.width && f.rightLower &&
                            (null != A.gableEnds && (n -= A.gableEnds.thickness), null != A.gableRoof && (n += A.gableRoof.rake)), A.roof.rect(b, h, q, n - h, l);
                            0 < f.chimney && null == A.castel && (r = new Pi, r.set_x((k + f.chimney) * A.columnWidth), r.set_y(q - l * (null == A.hipRoof ? 1 : .6666666666666666)), this.addChild(r));
                            f.dormers && A.dormer.top + A.dormer.bottom < .9 * l && this.placeDormers(f)
                        }
                    }
                },
                placeDormers: function (a) {
                    var b = this,
                        c = a.getPos(),
                        d = -(A.baseHeight + a.height * A.floorHeight);
                    d = A.dormer.wall ? d - (A.dormer.window.height / 2 + A.dormer.border) : d - ((A.columnWidth * A.roofSlope -
                        (A.dormer.top + A.dormer.bottom)) / 2 + A.dormer.bottom);
                    var g = function (a, g, q) {
                        null == q && (q = !1);
                        q && --g;
                        if (2 <= g - a)
                            for (; a < g;) {
                                var f = a++,
                                    k = new Ri;
                                k.set_x((c + f + (q ? .5 : 0) + .5) * A.columnWidth);
                                k.set_y(d);
                                b.addChild(k)
                            }
                    };
                    null != A.hipRoof ? g(0, a.width, a.leftLower || a.rightLower) : null != A.gableRoof ? (g(0, a.gablePos), g(a.gablePos + a.gableSize, a.width)) : null != A.gableEnds && (0 == a.gableSize ? g(0, a.width, a.leftLower || a.rightLower) : (g(0, a.gablePos, a.leftLower), g(a.gablePos + a.gableSize, a.width, a.rightLower)))
                },
                drawWall: function (a) {
                    null !=
                    A.hipRoof ? Vl.paint(this.get_graphics(), a) : null != A.gableEnds ? ug.paint(this.get_graphics(), a) : null != A.castel ? Wl.paint(this.get_graphics(), a) : Of.paint(this.get_graphics(), a)
                },
                drawFrontSlopes: function (a) {
                    var b = 0;
                    for (a = a.sections; b < a.length;) {
                        var c = a[b];
                        ++b;
                        0 < c.gableSize && Of.paintFront(this.get_graphics(), c)
                    }
                },
                drawSeparator: function (a) {
                    if (a.separator && null == A.fachwerk1) {
                        var b = this.get_graphics();
                        b.lineStyle(I.strokeFine, I.colorInk);
                        var c = -A.baseHeight - A.floorHeight + 4,
                            d = A.columnWidth * Math.sqrt(a.get_width() /
                                2);
                        Vc.dashedHor(b, 0, c, 0, d / 2, d / 2);
                        Vc.dashedHor(b, a.get_width() * A.columnWidth, c, 0, -d / 2, -d / 2);
                        b.endFill()
                    }
                },
                drawDoor: function (a) {
                    if (!(0 > a.door)) {
                        var b = new Si(a);
                        b.set_x((a.door + .5) * A.columnWidth);
                        b.set_y(-A.baseHeight);
                        this.addChild(b)
                    }
                },
                drawWindows: function (a) {
                    for (var b = 0, c = a.get_width(); b < c;)
                        for (var d = b++, g = 0, f = a.columns[d]; g < f;) {
                            var k = g++;
                            if (a.hasWindow(d, k)) {
                                var q = (d + .5) * A.columnWidth,
                                    l = -A.baseHeight - (k + .5) * A.floorHeight,
                                    h = k;
                                h >= A.window.length && (h = A.window.length - 1);
                                1 < h && 1 == a.getSection(d).width &&
                                (h = 1);
                                h = A.window[h];
                                var n = new tg(h);
                                n.set_x(q);
                                n.set_y(l);
                                this.addChild(n);
                                if (null != A.fachwerk1) {
                                    n = 0 < d && a.columns[d - 1] > k;
                                    var r = 1 < k && null != A.fachwerk2 ? A.fachwerk2 : A.fachwerk1;
                                    Rb.paint(this.get_graphics(), q, l, h, r, n, 0 == k && 0 < A.apronHeight)
                                }
                            } else null != A.fachwerk1 && Rb.emptyPanel(this.get_graphics(), d, k)
                        }
                },
                drawSpire: function (a) {
                    if (null == A.castel) {
                        var b = 0;
                        for (a = a.sections; b < a.length;) {
                            var c = a[b];
                            ++b;
                            if (c.spire) {
                                var d = new eh;
                                d.set_y(-c.getPinnacle());
                                d.set_x((c.getPos() + c.gablePos + c.gableSize / 2) * A.columnWidth);
                                this.addChild(d)
                            }
                        }
                    }
                },
                __class__: ti
            });
            var Wl = function () {
            };
            h["tinypubs.view.FrontWallCastellatedPainter"] = Wl;
            Wl.__name__ = "tinypubs.view.FrontWallCastellatedPainter";
            Wl.paint = function (a, b) {
                a.lineStyle(I.strokeNormal, I.colorInk);
                a.beginFill(I.colorWall);
                a.moveTo(0, 0);
                for (var c = 0, d = b.sections; c < d.length;) {
                    var g = d[c];
                    ++c;
                    var f = A.baseHeight + g.height * A.floorHeight,
                        k = g.getPos(),
                        q = A.castel.merlon,
                        l = A.castel.crenel,
                        h = q + l,
                        n = g.width * A.columnWidth;
                    g = Math.round((n + l) / h);
                    l = n / (g * q + l * (g - 1));
                    q *= l;
                    h *= l;
                    l = 0;
                    for (n = g; l < n;) {
                        var r = l++;
                        a.lineTo(k * A.columnWidth + r * h, -f - A.castel.height);
                        a.lineTo(k * A.columnWidth + r * h + q / 2, -f - A.castel.height - A.castel.point);
                        a.lineTo(k * A.columnWidth + r * h + q, -f - A.castel.height);
                        r < g - 1 && (a.lineTo(k * A.columnWidth + r * h + q, -f), a.lineTo(k * A.columnWidth + r * h + h, -f))
                    }
                }
                a.lineTo(b.get_width() * A.columnWidth, 0);
                a.endFill()
            };
            var ug = function () {
            };
            h["tinypubs.view.FrontWallEndsPainter"] = ug;
            ug.__name__ = "tinypubs.view.FrontWallEndsPainter";
            ug.paint = function (a, b) {
                var c = [];
                a.lineStyle(I.strokeNormal, I.colorInk);
                a.beginFill(I.colorWall);
                a.moveTo(0, -A.baseHeight);
                for (var d = 2 * A.columnWidth * A.roofSlope / 2, g = 0, f = b.sections; g < f.length;) {
                    var k = f[g];
                    ++g;
                    var q = A.baseHeight + k.height * A.floorHeight,
                        l = k.getPos(),
                        h = l * A.columnWidth;
                    l = (l + k.width) * A.columnWidth;
                    var n = -q - d - A.gableEnds.height,
                        r = n + A.gableEnds.capWidth / 2 * A.roofSlope,
                        t = n - A.gableEnds.capHeight,
                        p = n = 0;
                    0 < A.gableEnds.step && (n = 2 * A.columnWidth, p = Math.floor(n / A.gableEnds.step) | 1, n = n / p * A.roofSlope, t = -q - (p / 2 + .5) * n - A.gableEnds.capHeight);
                    a.lineTo(h, -q);
                    if (k.gableWallLeft)
                        if (a.lineTo(h, t), a.lineTo(h + A.gableEnds.thickness, t), a.lineTo(h + A.gableEnds.thickness, -q), 0 < n)
                            for (var y = 1, u = (p >> 1) + 1; y < u;) {
                                var x = y++;
                                c.push(new F(h, -q - n * x))
                            } else c.push(new F(h, -q - A.gableEnds.height)), 0 < A.gableEnds.height && c.push(new F(h, r));
                    0 < k.gableSize && (0 < A.gableEnds.step ? ug.drawSteppedGable(a, k) : ug.drawRegularGable(a, k));
                    if (k.gableWallRight)
                        if (a.lineTo(l - A.gableEnds.thickness, -q), a.lineTo(l - A.gableEnds.thickness, t), a.lineTo(l, t), k = l - A.gableEnds.thickness, 0 < n)
                            for (h =
                                     1, r = (p >> 1) + 1; h < r;) p = h++, c.push(new F(k, -q - n * p));
                        else c.push(new F(k, -q - A.gableEnds.height)), 0 < A.gableEnds.capHeight && c.push(new F(k, r));
                    a.lineTo(l, -q)
                }
                a.lineTo(b.get_width() * A.columnWidth, -A.baseHeight);
                a.endFill();
                a.lineStyle(I.strokeFine, I.colorInk);
                for (g = 0; g < c.length;) b = c[g], ++g, a.moveTo(b.x + .25 * A.gableEnds.thickness, b.y), a.lineTo(b.x + .75 * A.gableEnds.thickness, b.y);
                a.endFill()
            };
            ug.drawRegularGable = function (a, b) {
                var c = A.baseHeight + b.height * A.floorHeight,
                    d = (b.getPos() + b.gablePos) * A.columnWidth,
                    g =
                        b.gableSize * A.columnWidth,
                    f = d + g / 2,
                    k = g * A.roofSlope / 2;
                a.lineTo(d, -c);
                a.lineTo(d, -c - A.gableEnds.height);
                k = -c - A.gableEnds.height - k;
                1 < b.gableSize && 0 < A.gableEnds.capHeight ? (b = A.gableEnds.capWidth / 2, a.lineTo(f - b, k + b * A.roofSlope), a.lineTo(f - b, k - A.gableEnds.capHeight), a.lineTo(f + b, k - A.gableEnds.capHeight), a.lineTo(f + b, k + b * A.roofSlope)) : a.lineTo(f, k);
                a.lineTo(d + g, -c - A.gableEnds.height);
                a.lineTo(d + g, -c)
            };
            ug.drawSteppedGable = function (a, b) {
                var c = A.baseHeight + b.height * A.floorHeight,
                    d = (b.getPos() + b.gablePos) * A.columnWidth,
                    g = b.gableSize * A.columnWidth,
                    f = d + g / 2,
                    k = Math.floor(g / A.gableEnds.step) | 1;
                g /= k;
                var q = g * A.roofSlope;
                c = -c;
                b = 1 < b.gableSize ? k >> 1 : -100;
                var l = 0;
                for (k += 1; l < k;) {
                    var h = l++;
                    a.lineTo(d, c);
                    var n = d - f;
                    c += q * (0 == n ? 0 : 0 > n ? -1 : 1);
                    h == b && (c -= A.gableEnds.capHeight);
                    h == b + 1 && (c += A.gableEnds.capHeight);
                    a.lineTo(d, c);
                    d += g
                }
            };
            var Of = function () {
            };
            h["tinypubs.view.FrontWallGablePainter"] = Of;
            Of.__name__ = "tinypubs.view.FrontWallGablePainter";
            Of.paint = function (a, b) {
                a.lineStyle(I.strokeNormal, I.colorInk);
                a.beginFill(I.colorWall);
                a.moveTo(0, -A.baseHeight);
                for (var c = 0, d = b.sections; c < d.length;) {
                    var g = d[c];
                    ++c;
                    var f = A.baseHeight + g.height * A.floorHeight,
                        k = g.getPos();
                    a.lineTo(k * A.columnWidth, -f);
                    if (0 < g.gableSize) {
                        var q = (k + g.gablePos) * A.columnWidth,
                            l = g.gableSize * A.columnWidth;
                        a.lineTo(q, -f);
                        a.lineTo(q + l / 2, -f - l * A.roofSlope / 2);
                        a.lineTo(q + l, -f)
                    }
                    a.lineTo((k + g.width) * A.columnWidth, -f)
                }
                a.lineTo(b.get_width() * A.columnWidth, -A.baseHeight);
                a.endFill()
            };
            Of.paintGable = function (a, b, c, d, g, f) {
                a.lineStyle(I.strokeNormal, I.colorInk);
                a.beginFill(I.colorRoof);
                var k = b + d / 2,
                    q = new F(b, -c);
                g = new F(k, -c - g);
                b = new F(b + d, -c);
                d = new F(g.y - q.y, q.x - g.x);
                k = f;
                null == k && (k = 1);
                d = d.clone();
                d.normalize(k);
                c = d;
                d = new F(b.y - g.y, g.x - b.x);
                k = f;
                null == k && (k = 1);
                d = d.clone();
                d.normalize(k);
                k = d;
                var l = g.subtract(q);
                l.normalize(1);
                var h = b.subtract(g);
                h.normalize(1);
                d = l.add(h);
                d = new F(-d.y, d.x);
                d.normalize(-f / Math.sqrt((1 + (h.x * l.x + h.y * l.y)) / 2));
                f = [q, g, b, b.add(k), g.add(d), q.add(c)];
                Za.drawPolygon(a, f);
                a.endFill()
            };
            Of.paintFront = function (a, b) {
                var c = (b.getPos() + b.gablePos) * A.columnWidth,
                    d =
                        b.gableSize * A.columnWidth;
                Of.paintGable(a, c, A.baseHeight + b.height * A.floorHeight, d, d * A.roofSlope / 2, A.gableRoof.thickness)
            };
            var Vl = function () {
            };
            h["tinypubs.view.FrontWallHipPainter"] = Vl;
            Vl.__name__ = "tinypubs.view.FrontWallHipPainter";
            Vl.paint = function (a, b) {
                var c = A.hipRoof.eave;
                a.lineStyle(I.strokeNormal, I.colorInk);
                a.beginFill(I.colorWall);
                a.moveTo(0, 0);
                for (var d = 0, g = b.sections; d < g.length;) {
                    var f = g[d];
                    ++d;
                    var k = A.baseHeight + f.height * A.floorHeight,
                        q = f.getPos();
                    f.leftLower ? (a.lineTo(q *
                        A.columnWidth, -k + c), a.lineTo(q * A.columnWidth - c / 2, -k)) : a.lineTo(q * A.columnWidth, -k);
                    f.rightLower ? (a.lineTo((q + f.width) * A.columnWidth + c / 2, -k), a.lineTo((q + f.width) * A.columnWidth, -k + c)) : a.lineTo((q + f.width) * A.columnWidth, -k)
                }
                a.lineTo(b.get_width() * A.columnWidth, 0);
                a.endFill()
            };
            var ui = function () {
                X.call(this)
            };
            h["tinypubs.view.GroundView"] = ui;
            ui.__name__ = "tinypubs.view.GroundView";
            ui.__super__ = X;
            ui.prototype = w(X.prototype, {
                update: function (a, b) {
                    null == b && (b = 0);
                    var c = this.get_graphics();
                    c.clear();
                    a = a.get_width() * A.columnWidth;
                    Ic.use(null, I.colorGrass, I.strokeFine, I.strokeFine / 3);
                    for (var d = -A.baseThickness, g = 0, f = [d, a + A.baseThickness]; g < f.length;) {
                        var k = f[g];
                        ++g;
                        for (var q = Math.floor(3 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 * 5), l = A.columnWidth * q / 7, h = 0, n = q; h < n;) {
                            var r = h++,
                                y = 5 + 10 * Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                            r =
                                (r + 1 + (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1)) / q;
                            r *= r;
                            var p = l * r;
                            r = (r + .5 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1)) * Math.PI / 4;
                            k <= d && (p = -p, r = -r);
                            p = new F(k + p, 0);
                            var u = p.add(F.polar(.5 * y, -Math.PI / 2 + 2 * r / 3));
                            y = p.add(F.polar(y, -Math.PI / 2 + r));
                            Ic.stroke(c, ei.render([p, u, y], !1, 2))
                        }
                    }
                    b < a + A.columnWidth &&
                    (b = a + A.columnWidth);
                    d = (I.strokeNormal - I.strokeFine) / 2;
                    c.lineStyle(I.strokeFine, I.colorGrass);
                    Vc.dashedHor(c, -(b - a) / 2 - A.columnWidth, d, A.columnWidth, b, A.columnWidth)
                },
                __class__: ui
            });
            var Qd = function () {
                X.call(this);
                var a = A.lamp.w0,
                    b = A.lamp.w1,
                    c = A.lamp.h0,
                    d = A.lamp.h1,
                    g = this.get_graphics();
                g.beginFill(I.colorLamp);
                g.moveTo(-a, 0);
                g.lineTo(a, 0);
                g.lineTo(b, -c);
                g.lineTo(-b, -c);
                g.endFill();
                g.lineStyle(I.strokeNormal, I.colorInk);
                g.moveTo(-a, 0);
                g.lineTo(a, 0);
                g.beginFill(I.colorInk);
                g.moveTo(0, -c - d);
                g.lineTo(b,
                    -c);
                g.lineTo(-b, -c);
                g.endFill();
                g.lineStyle(I.strokeFine, I.colorInk);
                g.moveTo(-a, 0);
                g.lineTo(-b, -c);
                g.moveTo(a, 0);
                g.lineTo(b, -c);
                g.moveTo(0, 0);
                g.lineTo(0, -c);
                g.moveTo(0, -c - d);
                g.lineTo(0, -c - d - d)
            };
            h["tinypubs.view.LampView"] = Qd;
            Qd.__name__ = "tinypubs.view.LampView";
            Qd.side = function (a) {
                null == a && (a = !0);
                var b = new X,
                    c = A.columnWidth / 3,
                    d = c / 2,
                    g = A.lamp.h0 + A.lamp.h1 + A.lamp.h1 + I.strokeNormal / 2,
                    f = b.get_graphics();
                f.lineStyle(I.strokeNormal, I.colorInk);
                f.moveTo(0, -g);
                f.lineTo(c, -g);
                f.lineStyle(I.strokeFine,
                    I.colorInk);
                Za.drawArc(f, d, d - g, d, -Math.PI / 2, -Math.PI);
                d = new Qd;
                d.set_x(c);
                d.set_y(0);
                b.addChild(d);
                b.set_scaleX(a ? 1 : -1);
                return b
            };
            Qd.__super__ = X;
            Qd.prototype = w(X.prototype, {
                __class__: Qd
            });
            var Vk = function () {
                X.call(this);
                var a = A.sign,
                    b = this.get_graphics();
                b.lineStyle(I.strokeNormal, I.colorInk);
                b.beginFill(I.colorSign1);
                0 == a.e ? b.drawRect(a.sl, a.st, a.b, a.c) : (b.moveTo(a.sr, a.sb), b.lineTo(a.sr, a.d), b.lineTo(a.sl, a.d), b.lineTo(a.sl, a.sb), a.round ? Vc.horArc(b, a.sc, a.sb, a.b, -a.e) : b.lineTo(a.sc, a.d + a.c));
                b.endFill();
                if (a.hanging) b.lineStyle(I.strokeNormal, I.colorInk), b.moveTo(0, 0), b.lineTo(a.a + a.f, 0), b.lineStyle(I.strokeFine, I.colorInk), b.moveTo(a.sl, 0), b.lineTo(a.sl, a.d), b.moveTo(a.sr, 0), b.lineTo(a.sr, a.d), 0 < a.f && (b.moveTo(a.f, 0), b.lineTo(0, a.f));
                else {
                    var c = a.sl;
                    b.lineStyle(I.strokeFine, I.colorInk);
                    b.moveTo(0, a.st + c);
                    b.lineTo(a.sl, a.st + c);
                    b.moveTo(0, a.sb - c);
                    b.lineTo(a.sl, a.sb - c)
                }
            };
            h["tinypubs.view.SignView"] = Vk;
            Vk.__name__ = "tinypubs.view.SignView";
            Vk.__super__ = X;
            Vk.prototype = w(X.prototype, {
                __class__: Vk
            });
            var eh = function () {
                X.call(this);
                var a = A.spire,
                    b = this.get_graphics(),
                    c = 0;
                a.ball && (c += 3 * I.strokeNormal, b.lineStyle(I.strokeNormal, I.colorInk), b.drawCircle(this.get_x(), this.get_y() - c, I.strokeNormal), b.lineStyle());
                if (0 < a.nsew) {
                    c += a.nsew;
                    b.lineStyle(I.strokeFine, I.colorInk);
                    var d = F.polar(a.nsew, .5 * Math.PI / 2);
                    d.y /= 3;
                    b.moveTo(this.get_x(), this.get_y() - c);
                    b.lineTo(this.get_x() + d.x, this.get_y() - c + d.y);
                    b.drawCircle(this.get_x() + d.x, this.get_y() - c + d.y, I.strokeFine / 2);
                    d = F.polar(a.nsew, 1.5 * Math.PI /
                        2);
                    d.y /= 3;
                    b.moveTo(this.get_x(), this.get_y() - c);
                    b.lineTo(this.get_x() + d.x, this.get_y() - c + d.y);
                    b.drawCircle(this.get_x() + d.x, this.get_y() - c + d.y, I.strokeFine / 2);
                    d = F.polar(a.nsew, 2.5 * Math.PI / 2);
                    d.y /= 3;
                    b.moveTo(this.get_x(), this.get_y() - c);
                    b.lineTo(this.get_x() + d.x, this.get_y() - c + d.y);
                    b.drawCircle(this.get_x() + d.x, this.get_y() - c + d.y, I.strokeFine / 2);
                    d = F.polar(a.nsew, 3.5 * Math.PI / 2);
                    d.y /= 3;
                    b.moveTo(this.get_x(), this.get_y() - c);
                    b.lineTo(this.get_x() + d.x, this.get_y() - c + d.y);
                    b.drawCircle(this.get_x() + d.x, this.get_y() -
                        c + d.y, I.strokeFine / 2);
                    b.lineStyle()
                }
                0 < a.arrow && (d = a.arrow, c += Math.max(d, a.nsew), b.lineStyle(I.strokeFine, I.colorInk), b.moveTo(this.get_x() - d, this.get_y() - c), b.lineTo(this.get_x() + d, this.get_y() - c), b.lineTo(this.get_x() + d / 2, this.get_y() - c - d / 4), b.moveTo(this.get_x() + d, this.get_y() - c), b.lineTo(this.get_x() + d / 2, this.get_y() - c + d / 4), b.moveTo(this.get_x() - d, this.get_y() - c - d / 4), b.lineTo(this.get_x() - 3 * d / 4, this.get_y() - c), b.lineTo(this.get_x() - d, this.get_y() - c + d / 4), b.moveTo(this.get_x() - 3 * d / 4, this.get_y() -
                    c - d / 4), b.lineTo(this.get_x() - d / 2, this.get_y() - c), b.lineTo(this.get_x() - 3 * d / 4, this.get_y() - c + d / 4), b.lineStyle());
                if (c > a.length / 2) b.lineStyle(I.strokeFine, I.colorInk), b.moveTo(this.get_x(), this.get_y()), b.lineTo(this.get_x(), this.get_y() - c);
                else {
                    a.cross && (b.lineStyle(I.strokeFine, I.colorInk), b.moveTo(this.get_x() - I.strokeNormal, this.get_y() - (c + a.length) / 2), b.lineTo(this.get_x() + I.strokeNormal, this.get_y() - (c + a.length) / 2), b.lineStyle());
                    Ic.use(null, I.colorInk, I.strokeNormal, I.strokeFine);
                    c = this.get_x();
                    d = this.get_y();
                    var g = this.get_x(),
                        f = this.get_y() - a.length;
                    Ic.stroke(b, [new F(c, d), new F(g, f)]);
                    a.pike ? (b.lineStyle(I.strokeFine, I.colorInk), b.moveTo(this.get_x() - I.strokeNormal, this.get_y() - a.length + 3 * I.strokeNormal), b.lineTo(this.get_x(), this.get_y() - a.length), b.lineTo(this.get_x() + I.strokeNormal, this.get_y() - a.length + 3 * I.strokeNormal)) : (b.lineStyle(I.strokeNormal, I.colorInk), b.drawCircle(this.get_x(), this.get_y() - a.length, I.strokeNormal / 2));
                    b.lineStyle()
                }
            };
            h["tinypubs.view.SpireView"] =
                eh;
            eh.__name__ = "tinypubs.view.SpireView";
            eh.__super__ = X;
            eh.prototype = w(X.prototype, {
                __class__: eh
            });
            var vg = function (a) {
                null == a && (a = !0);
                X.call(this);
                for (var b = Math.round(A.baseHeight / Pf.STEP_HEIGHT), c = [new F(A.baseThickness, A.baseHeight), new F(A.baseThickness, 0)], d = 0; d < b;) {
                    var g = d++,
                        f = A.baseThickness + (g + 1) * vg.STEP_DEPTH;
                    g = A.baseHeight * g / b;
                    c.push(new F(f, g));
                    c.push(new F(f, g + A.baseHeight / b))
                }
                b = this.get_graphics();
                b.lineStyle(I.strokeNormal, I.colorInk);
                b.beginFill(I.colorStairs);
                Za.drawPolygon(b,
                    c);
                b.endFill();
                this.set_scaleX(a ? 1 : -1)
            };
            h["tinypubs.view.StairsSideView"] = vg;
            vg.__name__ = "tinypubs.view.StairsSideView";
            vg.__super__ = X;
            vg.prototype = w(X.prototype, {
                __class__: vg
            });
            var Pf = function (a) {
                X.call(this);
                a = this.get_graphics();
                var b = A.door.getPorchWidth(),
                    c = Math.round(A.baseHeight / Pf.STEP_HEIGHT);
                a.lineStyle(I.strokeNormal, I.colorInk);
                a.beginFill(I.colorStairs);
                a.drawRect(-b / 2, 0, b, -A.baseHeight);
                a.endFill();
                a.lineStyle(I.strokeFine, I.colorInk);
                for (var d = 1; d < c;) {
                    var g =
                        d++;
                    g = -A.baseHeight * g / c;
                    a.moveTo(-b / 2, g);
                    a.lineTo(b / 2, g)
                }
                a.endFill()
            };
            h["tinypubs.view.StairsView"] = Pf;
            Pf.__name__ = "tinypubs.view.StairsView";
            Pf.__super__ = X;
            Pf.prototype = w(X.prototype, {
                __class__: Pf
            });
            var Mf = function (a, b) {
                X.call(this);
                var c = this.get_graphics(),
                    d = hb.proto.spiralRad * A.columnWidth,
                    g = 1 + 2 * A.roofSlope,
                    f = A.floorHeight * a,
                    k = A.baseHeight + A.apronHeight;
                if (0 < k) {
                    var q = d + A.baseThickness;
                    c.beginFill(I.colorBase);
                    c.drawRect(-q, 0, 2 * q, -k);
                    c.beginFill(I.colorWall);
                    c.drawRect(-d,
                        -k, 2 * d, -(f - A.apronHeight));
                    c.endFill();
                    c.lineStyle(I.strokeNormal, I.colorInk);
                    c.moveTo(-q, 0);
                    c.lineTo(-q, -k);
                    c.lineTo(-d, -k);
                    c.lineTo(-d, -A.baseHeight - f);
                    c.lineTo(d, -A.baseHeight - f);
                    c.lineTo(d, -k);
                    c.lineTo(q, -k);
                    c.lineTo(q, 0);
                    null != A.stonework ? A.stonework.rect(c, -q, -k, 2 * q, k) : (q = I.strokeNormal + I.strokeFine, c.lineStyle(I.strokeFine, I.colorInk), c.moveTo(-d + q, -k), c.lineTo(d - q, -k))
                } else c.beginFill(I.colorWall), c.lineStyle(I.strokeNormal, I.colorInk), c.drawRect(-d, 0, 2 * d, -f);
                c.endFill();
                c.lineStyle(I.strokeFine,
                    I.colorInk);
                k = 1;
                for (q = a; k < q;) {
                    var l = k++;
                    l = -A.baseHeight - l * A.floorHeight + Mf.H;
                    Vc.dashedHor(c, -d, l, 0, d / 5, d / 3);
                    Vc.dashedHor(c, d, l, 0, -d / 5, -d / 3)
                }
                l = -A.baseHeight - a * A.floorHeight + Mf.H;
                Vc.dashedHor(c, -d, l, 0, d / 2, d / 2);
                Vc.dashedHor(c, d, l, 0, -d / 2, -d / 2);
                if (0 != b) {
                    var h = A.window[0].clone();
                    h.width *= 1 / Math.sqrt(2);
                    h.frame = 0;
                    k = 1;
                    for (q = a; k < q;) l = k++, a = new tg(h), a.set_x(b * d / Math.sqrt(2)), a.set_y(-A.baseHeight - l * A.floorHeight), this.addChild(a)
                }
                a = d + (null != A.hipRoof ? A.hipRoof.eave : A.baseThickness);
                b = a * g;
                g = Kb.intersectLines(-a,
                    0, 1, A.roofSlope, -d, 0, 1, g);
                d = a - g.x;
                g = g.x * A.roofSlope;
                f += A.baseHeight;
                k = [new F(-a, -f), new F(-d, -f - g), new F(0, -f - b), new F(d, -f - g), new F(a, -f)];
                c.lineStyle(I.strokeNormal, I.colorInk);
                c.beginFill(I.colorRoof);
                Za.drawPolygon(c, k);
                c.endFill();
                c.lineStyle();
                A.roof.cylinderEx(c, 0, -f, [new F(a, 0), new F(d, g), new F(0, b)]);
                c = new eh;
                c.set_y(-f - b);
                this.addChild(c)
            };
            h["tinypubs.view.TowerView"] = Mf;
            Mf.__name__ = "tinypubs.view.TowerView";
            Mf.__super__ = X;
            Mf.prototype = w(X.prototype, {
                __class__: Mf
            });
            var tg = function (a, b) {
                null == b && (b = !1);
                X.call(this);
                var c = this.get_graphics(),
                    d = a.width,
                    g = a.height,
                    f = a.cap,
                    k = a.frame,
                    q = d / 2,
                    l = k * (1 - f / q),
                    h = a.cols;
                a = a.rows;
                c.lineStyle(I.strokeFine, I.colorInk);
                c.beginFill(I.colorFrame);
                this.drawShape(q + k, g + 2 * k, f + k - l);
                c.endFill();
                l = b ? I.colorLamp : I.colorWindow;
                c.beginFill(l);
                b = this.drawShape(q, g, f, h - 1);
                c.endFill();
                l = I.pickContrast(0 < k ? I.colorFrame : I.colorWall, I.colorInk, l);
                c.lineStyle(I.strokeFine, l);
                k = 0;
                for (l = h - 1; k < l;) {
                    var n = k++;
                    n = b[n];
                    c.moveTo(n.x, n.y);
                    c.lineTo(n.x, g /
                        2)
                }
                k = 1;
                for (l = a; k < l;) n = k++, b = -g / 2 + g * n / a, c.moveTo(-d / 2, b), c.lineTo(d / 2, b);
                c.lineStyle(I.strokeNormal, I.colorInk);
                this.drawShape(q, g, f, h - 1);
                c.endFill()
            };
            h["tinypubs.view.WindowView"] = tg;
            tg.__name__ = "tinypubs.view.WindowView";
            tg.__super__ = X;
            tg.prototype = w(X.prototype, {
                drawShape: function (a, b, c, d) {
                    null == d && (d = 0);
                    var g = this.get_graphics();
                    if (.1 < c) return g.moveTo(-a, b / 2), g.lineTo(-a, -b / 2 + c), d = Vc.horArc(g, 0, -b / 2 + c, 2 * a, c, !1, d), g.lineTo(a, b / 2), g.lineTo(-a, b / 2), d;
                    g.drawRect(-a, -b / 2, 2 *
                        a, b);
                    g = [];
                    c = 0;
                    for (var f = d; c < f;) {
                        var k = c++;
                        g.push(new F(-a + 2 * a * (k + 1) / (d + 1), -b / 2))
                    }
                    return g
                },
                __class__: tg
            });
            var Rb = function () {
            };
            h["tinypubs.view.architecture.FachwerkPainter"] = Rb;
            Rb.__name__ = "tinypubs.view.architecture.FachwerkPainter";
            Rb.g = null;
            Rb.x = null;
            Rb.y = null;
            Rb.paint = function (a, b, c, d, g, f, k) {
                Rb.g = a;
                Rb.x = b;
                Rb.y = c;
                a = A.columnWidth / 2;
                b = A.floorHeight / 2;
                c = d.width / 2 + d.frame / 2;
                d = d.height / 2 + d.frame / 2;
                Rb.drawPiece(-a, -b, a, -b);
                f && Rb.drawPiece(-a, -b, -a, b - (k ? A.apronHeight : 0));
                f = 0;
                for (g =
                         g.getSegments(a, b, c, d, k); f < g.length;) k = g[f], ++f, Rb.drawPiece(k[0], k[1], k[2], k[3])
            };
            Rb.emptyPanel = function (a, b, c) {
                Rb.g = a;
                a = A.columnWidth / 2;
                var d = A.floorHeight / 2;
                Rb.x = (b + .5) * A.columnWidth;
                Rb.y = -A.baseHeight - (c + .5) * A.floorHeight;
                Rb.drawPiece(-a, -d, a, -d);
                0 < b && Rb.drawPiece(-a, -d, -a, d - (0 == c ? A.apronHeight : 0))
            };
            Rb.drawPiece = function (a, b, c, d) {
                Rb.g.lineStyle(I.strokeNormal, I.colorInk, .3);
                Rb.g.moveTo(Rb.x + a, Rb.y + b);
                Rb.g.lineTo(Rb.x + c, Rb.y + d);
                Rb.g.endFill()
            };
            var vi = function (a) {
                null == a && (a = !0);
                X.call(this);
                A.porch &&
                0 != A.roofSlope ? this.drawShedPorch(!0) : this.drawNoPorch(!0);
                var b = new vg(!0);
                this.addChild(b);
                this.set_scaleX(a ? 1 : -1)
            };
            h["tinypubs.view.architecture.PorchSideView"] = vi;
            vi.__name__ = "tinypubs.view.architecture.PorchSideView";
            vi.__super__ = X;
            vi.prototype = w(X.prototype, {
                drawShedPorch: function (a) {
                    null == a && (a = !0);
                    2 == A.lamps && this.place2lampsLow(a)
                },
                drawNoPorch: function (a) {
                    null == a && (a = !0);
                    switch (A.lamps) {
                        case 1:
                            this.place1lamp(a);
                            break;
                        case 2:
                            this.place2lamps(a)
                    }
                },
                place1lamp: function (a) {
                    null ==
                    a && (a = !0);
                    a = Qd.side(a);
                    a.set_y(-A.door.getHeight() - 5);
                    this.addChild(a)
                },
                place2lamps: function (a) {
                    null == a && (a = !0);
                    var b = A.lamp.h0 + 2 * A.lamp.h1;
                    b = A.door.height + b < A.floorHeight ? -A.door.height : -A.floorHeight + 4 + b;
                    a = Qd.side(a);
                    a.set_y(b);
                    this.addChild(a)
                },
                place2lampsLow: function (a) {
                    var b = A.lamp.h0 + 2 * A.lamp.h1;
                    a = Qd.side(a);
                    a.set_y(-A.door.height + b);
                    this.addChild(a)
                },
                __class__: vi
            });
            var Si = function (a) {
                X.call(this);
                this.facade = a;
                this.w = A.door.getPorchWidth();
                this.w2 = this.w / 2;
                a.porch && 0 != A.roofSlope ? this.drawShedPorch() :
                    this.drawNoPorch();
                var b = new Qi;
                b.set_x(this.get_x());
                b.set_y(0);
                this.addChild(b);
                a = new Pf(a);
                a.set_x(this.get_x());
                a.set_y(A.baseHeight);
                this.addChild(a)
            };
            h["tinypubs.view.architecture.PorchView"] = Si;
            Si.__name__ = "tinypubs.view.architecture.PorchView";
            Si.__super__ = X;
            Si.prototype = w(X.prototype, {
                drawShedPorch: function () {
                    var a = A.door.getHeight() + (A.columnWidth - this.w) / 2,
                        b = A.columnWidth / 4 * A.roofSlope;
                    if (1 == this.facade.getSection(this.facade.door).height && (b = Math.min(b, A.floorHeight -
                        4 - a), 5 > b)) {
                        this.drawNoPorch();
                        return
                    }
                    var c = this.get_graphics();
                    A.roof.rect(c, -A.columnWidth / 2, -a, A.columnWidth, b);
                    b = (A.columnWidth + this.w) / 4;
                    c.lineStyle(I.strokeNormal, I.colorInk);
                    c.moveTo(-b, -a);
                    c.lineTo(-b, -a + 4);
                    c.moveTo(b, -a);
                    c.lineTo(b, -a + 4);
                    2 == this.facade.lamps && this.place2lampsLow()
                },
                drawNoPorch: function () {
                    switch (this.facade.lamps) {
                        case 1:
                            this.place1lamp();
                            break;
                        case 2:
                            this.place2lamps()
                    }
                },
                place1lamp: function () {
                    var a = new Qd;
                    a.set_y(-A.door.getHeight() - 5);
                    this.addChild(a)
                },
                place2lamps: function () {
                    var a = -A.door.height,
                        b = A.lamp.h0 + 2 * A.lamp.h1;
                    if (A.door.height + b > A.floorHeight) {
                        var c = 1 == this.facade.getSection(this.facade.door).height;
                        c || (c = 1 == this.facade.getSection(this.facade.door - 1).height) || (c = 1 == this.facade.getSection(this.facade.door + 1).height);
                        c && (a = -A.floorHeight + 4 + b)
                    }
                    b = new Qd;
                    c = new Qd;
                    b.set_x(-A.columnWidth / 2);
                    c.set_x(A.columnWidth / 2);
                    b.set_y(c.set_y(a));
                    this.addChild(b);
                    this.addChild(c)
                },
                place2lampsLow: function () {
                    var a = A.lamp.h0 + 2 * A.lamp.h1,
                        b = new Qd,
                        c = new Qd;
                    b.set_x(-A.columnWidth / 2 + A.lamp.w1 /
                        2);
                    c.set_x(A.columnWidth / 2 - A.lamp.w1 / 2);
                    b.set_y(c.set_y(-A.door.height + a));
                    this.addChild(b);
                    this.addChild(c)
                },
                __class__: Si
            });
            var jf = function () {
            };
            h["tinypubs.view.surfaces.SurfacePainter"] = jf;
            jf.__name__ = "tinypubs.view.surfaces.SurfacePainter";
            jf.prototype = {
                rect: function (a, b, c, d, g) {
                },
                poly: function (a, b) {
                },
                cylinderEx: function (a, b, c, d) {
                    for (var g = [], f = 0; f < d.length;) {
                        var k = d[f];
                        ++f;
                        g.unshift(new F(b - k.x, c - k.y));
                        g.push(new F(b + k.x, c - k.y))
                    }
                    this.poly(a, g)
                },
                __class__: jf
            };
            var Mi = function () {
                this.light =
                    5;
                this.dark = 20;
                this.plank = 3 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647;
                this.dark = 10 * Math.pow(2, ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1);
                this.light = 5 * Math.pow(2, ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1)
            };
            h["tinypubs.view.surfaces.HatchingPainter"] = Mi;
            Mi.__name__ = "tinypubs.view.surfaces.HatchingPainter";
            Mi.__super__ = jf;
            Mi.prototype = w(jf.prototype, {
                rect: function (a, b, c, d, g) {
                    a.lineStyle(I.strokeNormal, I.colorInk);
                    a.beginFill(I.colorRoof);
                    a.drawRect(b, c, d, -g);
                    a.endFill();
                    var f = Math.round(d / this.plank);
                    a.lineStyle(I.strokeFine, I.colorInk);
                    for (var k = 1; k < f;) {
                        var q = k++;
                        q = b + d * q / f;
                        var l = c - g * Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                        a.moveTo(q, c);
                        a.lineTo(q,
                            l);
                        Za.dashedLine(a, new F(q, l), new F(q, c - g), Vc.dashes(this.dark, this.light))
                    }
                },
                poly: function (a, b) {
                    a.lineStyle(I.strokeNormal, I.colorInk);
                    a.beginFill(I.colorRoof);
                    Za.drawPolygon(a, b);
                    a.endFill();
                    var c = qg.rect(b),
                        d = Math.round(c.width / this.plank),
                        g = new F(0, c.get_top()),
                        f = new F(0, c.get_bottom());
                    a.lineStyle(I.strokeFine, I.colorInk);
                    for (var k = 1; k < d;) {
                        var q = k++;
                        g.x = f.x = c.get_left() + c.width * q / d;
                        for (q = Lf.pierce(b, g, f); 2 <= q.length;) {
                            var l = q.pop(),
                                h = q.pop(),
                                n = Kb.lerp(l, h, Math.abs(((t.seed = 48271 * t.seed % 2147483647 |
                                    0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                            Za.dashedLine(a, h, n, Vc.dashes(this.dark, this.light));
                            a.moveTo(n.x, n.y);
                            a.lineTo(l.x, l.y)
                        }
                    }
                },
                cylinderEx: function (a, b, c, d) {
                    var g = d[0].y,
                        f = d[d.length - 1].y - g,
                        k = ca.max(d, function (a) {
                            return a.x
                        }).x;
                    k = Math.ceil(.5 * Math.PI * k / this.plank);
                    var q = g;
                    f = g + f;
                    for (var l = 1; l < k;) {
                        var h = l++ / k * Math.PI, n = Math.cos(h);
                        a.lineStyle(I.strokeFine * Math.sin(h), I.colorInk);
                        h = Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                        null == h && (h = .5);
                        h = f + (q - f) * h;
                        var r = Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                        null == r && (r = .5);
                        r = q + (h - q) * r;
                        for (var y = 1, p = d.length; y < p;) {
                            var u = y++,
                                x = d[u - 1];
                            u = d[u];
                            g = x.y;
                            var z = u.y,
                                A = (q - g) / (z - g),
                                m = (r - g) / (z - g);
                            g = (h - g) / (z - g);
                            1 > A && 0 < m && (z = Zc.gate(A, 0, 1), A = Zc.gate(m, 0, 1), z = Kb.lerp(x, u, z), A = Kb.lerp(x, u, A), z = new F(b - z.x * n, c - z.y), A = new F(b - A.x * n, c - A.y), a.moveTo(z.x, z.y), a.lineTo(A.x, A.y));
                            1 > m && 0 < g && (m = Zc.gate(m, 0, 1), g = Zc.gate(g, 0, 1), m = Kb.lerp(x, u, m), x = Kb.lerp(x, u, g), Za.dashedLine(a, new F(b - m.x * n, c - m.y), new F(b - x.x * n, c - x.y), Vc.dashes(this.dark, this.light)))
                        }
                    }
                    a.endFill()
                },
                __class__: Mi
            });
            var Ni = function () {
                this.sh = 5;
                this.sw = 7.5;
                this.u = .2;
                this.u = .5 * Math.abs(((t.seed =
                    48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                this.sh = 6 * Math.pow(1.5, ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1);
                this.sw = this.sh * (1 + 1.5 * (((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 |
                    0) / 2147483647) / 3));
                this.pat = new Kk(5 * this.sw, 5 * this.sw, this.sw, this.u);
                this.pat.scale(1, this.sh / this.sw)
            };
            h["tinypubs.view.surfaces.StoneworkPainter"] = Ni;
            Ni.__name__ = "tinypubs.view.surfaces.StoneworkPainter";
            Ni.__super__ = jf;
            Ni.prototype = w(jf.prototype, {
                rect: function (a, b, c, d, g) {
                    var f = new Hi(b - this.sw / 4, c - this.sh / 4, d + this.sw / 2, g + this.sh / 2),
                        k = this.pat.fill(f);
                    f = (I.strokeNormal - I.strokeFine) / 2;
                    b += f;
                    c += f;
                    d -= 2 * f;
                    g -= 2 * f;
                    a.lineStyle(I.strokeFine, I.colorInk);
                    f = 0;
                    for (k = ca.shuffle(k); f <
                    k.length;) {
                        var q = k[f];
                        ++f;
                        a.beginFill(I.colorBase);
                        var l = this.sw * Math.pow(2, this.u * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647)),
                            h = this.sh * Math.pow(2, this.u * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647)),
                            n = 2 * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647),
                            r = 2 * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647),
                            y = 2 * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647),
                            p = 2 * ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647),
                            u = q.x - l / 2;
                        u < b && (u = b, n = y = 0);
                        l = q.x + l / 2;
                        l > b + d && (l = b + d, r = p = 0);
                        var x = q.y - h / 2;
                        x < c && (x = c, n =
                            r = 0);
                        q = q.y + h / 2;
                        q > c + g && (q = c + g, y = p = 0);
                        a.drawRoundRectComplex(u, x, l - u, q - x, n, r, y, p)
                    }
                },
                __class__: Ni
            });
            var Li = function () {
                this.light = 5;
                this.dark = 20;
                this.plank = 4;
                var a = Math.sqrt(A.roofSlope);
                this.plank = 3.5 * (0 < a ? a : 1);
                this.dark = 10 * Math.pow(2, ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1);
                this.light = 5 * Math.pow(2, ((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed =
                    48271 * t.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1)
            };
            h["tinypubs.view.surfaces.TilingPainter"] = Li;
            Li.__name__ = "tinypubs.view.surfaces.TilingPainter";
            Li.__super__ = jf;
            Li.prototype = w(jf.prototype, {
                rect: function (a, b, c, d, g) {
                    a.lineStyle(I.strokeNormal, I.colorInk);
                    a.beginFill(I.colorRoof);
                    a.drawRect(b, c, d, -g);
                    a.endFill();
                    var f = Math.round(g / this.plank);
                    a.lineStyle(I.strokeFine, I.colorInk);
                    for (var k = 1; k < f;) {
                        var q = k++;
                        q = c - g * q / f;
                        var l = b + .5 * d * Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 +
                                (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1),
                            h = b + d * (1 - .5 * Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                        a.moveTo(b, q);
                        a.lineTo(l, q);
                        Za.dashedLine(a, new F(l, q), new F(h, q), Vc.dashes(this.dark, this.light));
                        a.moveTo(h, q);
                        a.lineTo(b + d, q)
                    }
                },
                poly: function (a,
                                b) {
                    a.lineStyle(I.strokeNormal, I.colorInk);
                    a.beginFill(I.colorRoof);
                    Za.drawPolygon(a, b);
                    a.endFill();
                    var c = 3.5 * (1 + 1 / A.roofSlope),
                        d = qg.rect(b),
                        g = Math.round(d.height / this.plank),
                        f = new F(d.get_left()),
                        k = new F(d.get_right());
                    a.lineStyle(I.strokeFine, I.colorInk);
                    for (var q = 1; q < g;) {
                        var l = q++;
                        f.y = k.y = d.get_bottom() - d.height * l / g;
                        for (l = Lf.pierce(b, f, k); 2 <= l.length;) {
                            var h = l.pop(),
                                n = l.pop();
                            h.x < d.get_right() && (h.x -= c);
                            n.x > d.get_left() && (n.x += c);
                            if (!(n.x > h.x)) {
                                var r = Kb.lerp(n, h, .5 * Math.abs(((t.seed = 48271 * t.seed %
                                        2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1)),
                                    y = Kb.lerp(h, n, .5 * Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                                a.moveTo(n.x, n.y);
                                a.lineTo(r.x, r.y);
                                Za.dashedLine(a, r, y, Vc.dashes(this.dark, this.light));
                                a.moveTo(y.x, y.y);
                                a.lineTo(h.x,
                                    h.y)
                            }
                        }
                    }
                    a.endFill()
                },
                cylinderEx: function (a, b, c, d) {
                    a.lineStyle(I.strokeFine, I.colorInk);
                    for (var g = 1, f = d.length; g < f;)
                        for (var k = g++, q = Math.round((d[k].y - d[k - 1].y) / this.plank), l = 0 == k ? 1 : 0, h = q; l < h;) {
                            var n = l++ / q, r = Kb.lerp(d[k - 1], d[k], n);
                            n = new F(b - r.x, c - r.y);
                            r = new F(b + r.x, c - r.y);
                            var y = Kb.lerp(n, r, .5 * Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1)),
                                p = Kb.lerp(r,
                                    n, .5 * Math.abs(((t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 + (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                            a.moveTo(n.x, n.y);
                            a.lineTo(y.x, y.y);
                            Za.dashedLine(a, y, p, Vc.dashes(this.dark / 2, this.light));
                            a.moveTo(p.x, p.y);
                            a.lineTo(r.x, r.y)
                        }
                    a.endFill()
                },
                __class__: Li
            });
            var wg = function (a) {
                this.ruleSet = a;
                this.clearState()
            };
            h["tracery.RuleSelector"] = wg;
            wg.__name__ = "tracery.RuleSelector";
            wg.prototype = {
                select: function () {
                    var a = this.ruleSet.defaultRules,
                        b = Me.rng() * a.length | 0;
                    return a[b]
                },
                clearState: function () {
                },
                __class__: wg
            };
            var Rh = function (a) {
                wg.call(this, a)
            };
            h["tracery.DeckRuleSelector"] = Rh;
            Rh.__name__ = "tracery.DeckRuleSelector";
            Rh.__super__ = wg;
            Rh.prototype = w(wg.prototype, {
                select: function () {
                    0 == this.deck.length && this.clearState();
                    var a = Me.rng() * this.deck.length | 0,
                        b = this.deck[a];
                    this.deck.splice(a, 1);
                    return b
                },
                clearState: function () {
                    this.deck = this.ruleSet.defaultRules.slice()
                },
                __class__: Rh
            });
            var Ti = function (a, b, c) {
                this.grammar = a;
                this.key = b;
                this.baseRules = c;
                this.clearState()
            };
            h["tracery.Symbol"] = Ti;
            Ti.__name__ = "tracery.Symbol";
            Ti.prototype = {
                clearState: function () {
                    this.stack = [this.baseRules];
                    this.baseRules.clearState()
                },
                pushRules: function (a) {
                    this.pushRuleSet(new fh(this.grammar, a))
                },
                pushRuleSet: function (a) {
                    this.stack.push(a)
                },
                popRules: function () {
                    this.stack.pop()
                },
                selectRule: function () {
                    return 0 == this.stack.length ? (Ub.trace("The rule stack for " + this.key +
                        " is empty, too many pops?", {

                        className: "tracery.Symbol",
                        methodName: "selectRule"
                    }), "((" + this.key + "))") : this.top().selectRule()
                },
                top: function () {
                    return this.stack[this.stack.length - 1]
                },
                __class__: Ti
            };
            var Bk = function (a) {
                this.autoID = 0;
                this.defaultSelector = wg;
                this.modifiers = new ab;
                this.flags = [];
                this.loadFromRawObj(a)
            };
            h["tracery.Grammar"] = Bk;
            Bk.__name__ = "tracery.Grammar";
            Bk.prototype = {
                clearState: function () {
                    for (var a =
                        this.symbols.h, b = Object.keys(a), c = b.length, d = 0; d < c;) a[b[d++]].clearState();
                    this.flags = []
                },
                addModifiers: function (a) {
                    for (var b = Object.keys(a.h), c = b.length, d = 0; d < c;) {
                        var g = b[d++];
                        this.modifiers.h[g] = a.h[g]
                    }
                },
                loadFromRawObj: function (a) {
                    this.raw = a;
                    this.symbols = new ab;
                    this.subgrammars = [];
                    if (null != a)
                        for (var b = L.fields(a), c = 0; c < b.length;) {
                            var d = b[c++],
                                g = d;
                            d = a[d];
                            var f = "string" == typeof d ? [d] : d;
                            null == f && (Ub.trace(a, {

                                className: "tracery.Grammar",
                                methodName: "loadFromRawObj"
                            }), Ub.trace(g, {

                                className: "tracery.Grammar",
                                methodName: "loadFromRawObj"
                            }));
                            d = this.symbols;
                            f = new Ti(this, g, new fh(this, this.unwrap(a, f)));
                            d.h[g] = f
                        }
                },
                unwrap: function (a, b) {
                    for (var c = [], d = 0; d < b.length;) {
                        var g = b[d];
                        ++d;
                        if ("@" == M.substr(g, 0, 1)) {
                            var f = M.substr(g, 1, null);
                            g = null;
                            var k = f.indexOf("?-");
                            -
                                1 != k && (g = M.substr(f, 0, k), f = M.substr(f, k + 2, null));
                            k = a[f];
                            f = 0;
                            for (k = this.unwrap(a, "string" == typeof k ? [k] :
                                k); f < k.length;) {
                                var q = k[f];
                                ++f;
                                c.push(null == g ? q : "" + g + "?-" + q)
                            }
                        } else c.push(g)
                    }
                    return c
                },
                createRoot: function (a) {
                    return new gh(this, null, 0, {
                        type: -1,
                        raw: a
                    })
                },
                expand: function (a, b) {
                    null == b && (b = !1);
                    a = this.createRoot(a);
                    a.expand();
                    b || a.clearEscapeChars();
                    return a
                },
                flatten: function (a, b) {
                    null == b && (b = !1);
                    return this.expand(a, b).finishedText
                },
                execute: function (a) {
                    "set " == M.substr(a, 0, 4) ? (a = M.substr(a, 4, null), ca.addAll(this.flags, (new Ya(", +", "")).split(a))) : "clear " == M.substr(a, 0, 6) ? (a = M.substr(a, 6, null), ca.addAll(this.flags,
                        (new Ya(", +", "")).split(a))) : Ub.trace('Unknown function "' + a + '" is called', {

                        className: "tracery.Grammar",
                        methodName: "execute"
                    })
                },
                pushRules: function (a, b) {
                    if (Object.prototype.hasOwnProperty.call(this.symbols.h, a)) this.symbols.h[a].pushRules(b);
                    else {
                        var c = this.symbols;
                        b = new Ti(this, a, new fh(this, b));
                        c.h[a] = b
                    }
                },
                popRules: function (a) {
                    Object.prototype.hasOwnProperty.call(this.symbols.h, a) ? this.symbols.h[a].popRules() : Ub.trace("Can't pop: no symbol for key " +
                        a, {

                        className: "tracery.Grammar",
                        methodName: "popRules"
                    })
                },
                addAutoRules: function (a) {
                    var b = "_auto" + this.autoID++;
                    this.pushRules(b, a);
                    return b
                },
                selectRule: function (a) {
                    for (var b = this.symbols.h[a], c = 0, d = this.flags; c < d.length;) {
                        var g = d[c];
                        ++c;
                        g = this.symbols.h["" + g + "?-" + a];
                        if (null != g) {
                            b = g;
                            break
                        }
                    }
                    if (null != b && (c = b.selectRule(), null != c)) return c;
                    c = 0;
                    for (d = this.subgrammars; c < d.length;)
                        if (b = d[c], ++c, Object.prototype.hasOwnProperty.call(b.symbols.h,
                            a)) return b.symbols.h[a].selectRule();
                    Ub.trace('No symbol for "' + a + '"', {

                        className: "tracery.Grammar",
                        methodName: "selectRule"
                    });
                    return "((" + a + "))"
                },
                validateRule: function (a) {
                    var b = a.indexOf("?-");
                    if (-1 == b) return a;
                    var c = M.substr(a, 0, b);
                    return this.eval(c) ? M.substr(a, b + 2, null) : null
                },
                eval: function (a) {
                    var b = parseFloat(a);
                    if (!isNaN(b)) return a = b, null == a && (a = .5), (t.seed = 48271 * t.seed % 2147483647 | 0) / 2147483647 < a;
                    b = a.split("&");
                    if (1 <
                        b.length) {
                        for (a = 0; a < b.length;) {
                            var c = b[a];
                            ++a;
                            if (!this.eval(c)) return !1
                        }
                        return !0
                    }
                    a = (b = "!" == a.charAt(0)) ? M.substr(a, 1, null) : a;
                    return -1 != this.flags.indexOf(a) != b
                },
                __class__: Bk
            };
            var Ra = function () {
            };
            h["tracery.ModsEngBasic"] = Ra;
            Ra.__name__ = "tracery.ModsEngBasic";
            Ra.isVowel = function (a) {
                return -1 != "ieaou".indexOf(a.toLowerCase())
            };
            Ra.isAlphaNum = function (a) {
                return "a" <= a && "z" >= a || "A" <= a && "Z" >= a ? !0 : "0" <= a ? "9" >= a : !1
            };
            Ra.isPlural = function (a) {
                a = a.toLowerCase();
                return "s" == M.substr(a, -1,
                    null) ? "ss" != M.substr(a, -2, null) : !1
            };
            Ra.escapeRegExp = function (a) {
                return a.replace(/([.*+?^=!:${}()|\[\]/\\])/g, "\\$1")
            };
            Ra.replace = function (a, b) {
                var c = new RegExp(Ra.escapeRegExp(b[0]), "g");
                return a.replace(c, b[1])
            };
            Ra.capitalizeAll = function (a, b) {
                b = "";
                for (var c = !0, d = 0, g = a.length; d < g;) {
                    var f = d++;
                    f = a.charAt(f);
                    Ra.isAlphaNum(f) || "'" == f ? c ? (b += f.toUpperCase(), c = !1) : b += f : (c = !0, b += f)
                }
                return b
            };
            Ra.capitalize = function (a, b) {
                return a.charAt(0).toUpperCase() + M.substr(a, 1, null)
            };
            Ra.caps = function (a, b) {
                return a.toUpperCase()
            };
            Ra.a = function (a, b) {
                if (0 < a.length) {
                    if ("u" == a.charAt(0).toLowerCase() && 2 < a.length && "i" == a.charAt(2).toLowerCase()) return "a " + a;
                    if (Ra.isVowel(a.charAt(0))) return "an " + a
                }
                return "a " + a
            };
            Ra.firstS = function (a, b) {
                a = a.split(" ");
                return 1 == a.length ? Ra.s(a[0], null) : Ra.s(a[0], null) + " " + a.slice(1).join(" ")
            };
            Ra.s = function (a, b) {
                b = Ra.plurals.h;
                for (var c = Object.keys(b), d = c.length, g = 0; g < d;) {
                    var f = c[g++],
                        k = f;
                    f = b[f];
                    if (M.substr(a, -k.length, null) == k) return M.substr(a, 0, a.length - k.length) + f
                }
                b = M.substr(a, -1, null);
                if ("s" ==
                    b || "x" == b || "z" == b) return a + "es";
                if ("y" == b && -1 == "ieaou".indexOf(M.substr(a, -2, 1))) return M.substr(a, 0, -1) + "ies";
                b = M.substr(a, -2, null);
                return "ch" == b || "sh" == b ? a + "es" : a + "s"
            };
            Ra.possessive = function (a, b) {
                return "s" == M.substr(a, -1, null) ? a + "'" : a + "'s"
            };
            Ra.ed = function (a, b) {
                switch (M.substr(a, -1, null)) {
                    case "e":
                        return a + "d";
                    case "h":
                        return a + "ed";
                    case "s":
                        return a + "ed";
                    case "x":
                        return a + "ed";
                    case "y":
                        return Ra.isVowel(a.charAt(a.length - 2)) ? a + "d" : a.substring(0, a.length - 1) + "ied";
                    default:
                        return a + "ed"
                }
            };
            Ra.ing = function (a,
                               b) {
                return "e" == M.substr(a, -1, null) ? a.substring(0, a.length - 1) + "ing" : a + "ing"
            };
            Ra.thiss = function (a, b) {
                return Ra.isPlural(a) ? "these" : "this"
            };
            Ra.they = function (a, b) {
                return Ra.isPlural(a) ? "they" : "it"
            };
            Ra.them = function (a, b) {
                return Ra.isPlural(a) ? "them" : "it"
            };
            Ra.is = function (a, b) {
                return Ra.isPlural(a) ? "are" : "is"
            };
            Ra.was = function (a, b) {
                return Ra.isPlural(a) ? "were" : "was"
            };
            Ra.get = function () {
                var a = new ab;
                a.h.replace = Ra.replace;
                a.h.possessive = Ra.possessive;
                a.h.capitalize = Ra.capitalize;
                a.h.capitalizeAll = Ra.capitalizeAll;
                a.h.caps = Ra.caps;
                a.h.firstS = Ra.firstS;
                a.h.s = Ra.s;
                a.h.a = Ra.a;
                a.h.ed = Ra.ed;
                a.h.ing = Ra.ing;
                a.h["this"] = Ra.thiss;
                a.h.they = Ra.they;
                a.h.them = Ra.them;
                a.h.is = Ra.is;
                a.h.was = Ra.was;
                return a
            };
            var hh = function (a, b) {
                this.node = a;
                a = b.split(":");
                this.target = a[0];
                1 == a.length ? this.type = 2 : (this.rule = a[1], this.type = "POP" == this.rule ? 1 : 0)
            };
            h["tracery.NodeAction"] = hh;
            hh.__name__ = "tracery.NodeAction";
            hh.prototype = {
                createUndo: function () {
                    return 0 == this.type ? new hh(this.node, this.target + ":POP") : null
                },
                activate: function () {
                    var a = this.node.grammar;
                    switch (this.type) {
                        case 0:
                            for (var b = this.rule.split(","), c = [], d = 0; d < b.length;) {
                                var g = b[d];
                                ++d;
                                g = new gh(a, null, 0, {
                                    type: -1,
                                    raw: g
                                });
                                g.expand();
                                c.push(g.finishedText)
                            }
                            a.pushRules(this.target, c);
                            break;
                        case 1:
                            a.popRules(this.target);
                            break;
                        case 2:
                            a.execute(this.target)
                    }
                },
                __class__: hh
            };
            var fh = function (a, b) {
                this.grammar = a;
                a = [];
                for (var c = 0; c < b.length;) {
                    var d = b[c];
                    ++c;
                    a.push(this.process(d))
                }
                this.defaultRules = this.raw = a
            };
            h["tracery.RuleSet"] = fh;
            fh.__name__ =
                "tracery.RuleSet";
            fh.prototype = {
                process: function (a) {
                    var b = a.indexOf("{");
                    if (-1 == b) return a;
                    for (var c = -1, d = 1, g = [], f = b + 1, k = b + 1, q = a.length; k < q;) {
                        var l = k++,
                            h = a.charAt(l);
                        if ("|" == h && 1 == d) g.push(a.substring(f, l)), f = l + 1;
                        else if ("{" == h) ++d;
                        else if ("}" == h && 0 == --d) {
                            g.push(a.substring(f, l));
                            c = l;
                            break
                        }
                    }
                    return -1 != c ? (b = M.substr(a, 0, b), a = M.substr(a, c + 1, null), g = this.grammar.addAutoRules(1 == g.length ? [g[0], ""] : g), "" + b + "#" + g + "#" + this.process(a)) : a
                },
                selectRule: function () {
                    null == this.selector && (this.selector =
                        z.createInstance(this.grammar.defaultSelector, [this]));
                    for (; ;) {
                        var a = this.grammar.validateRule(this.selector.select());
                        if (null != a) return a
                    }
                },
                clearState: function () {
                    null != this.selector && this.selector.clearState()
                },
                __class__: fh
            };
            var Me = function () {
            };
            h["tracery.Tracery"] = Me;
            Me.__name__ = "tracery.Tracery";
            Me.parseTag = function (a) {
                for (var b = {
                    symbol: null,
                    preactions: [],
                    postactions: [],
                    modifiers: []
                }, c = Me.parse(a), d = null, g = 0; g < c.length;) {
                    var f = c[g];
                    ++g;
                    if (0 == f.type)
                        if (null == d) d = f.raw;
                        else throw aa.thrown("multiple main sections in " +
                            a);
                    else b.preactions.push(f.raw)
                }
                null != d && (a = d.split("."), b.symbol = a[0], b.modifiers = a.slice(1));
                return b
            };
            Me.parse = function (a) {
                var b = 0,
                    c = !1,
                    d = [],
                    g = !1,
                    f = 0,
                    k = "",
                    q = -1;
                if (null == a) return [];
                for (var l = function (b, c, f) {
                    1 > c - b && (1 == f && Ub.trace("" + b + ": empty tag", {

                        className: "tracery.Tracery",
                        methodName: "parse"
                    }), 2 == f && Ub.trace("" + b + ": empty action", {

                        className: "tracery.Tracery",
                        methodName: "parse"
                    }));
                    b = -1 != q ? k + "\\" + a.substring(q + 1, c) : a.substring(b, c);
                    d.push({
                        type: f,
                        raw: b
                    });
                    q = -1;
                    k = ""
                }, h = 0, n = a.length; h < n;) {
                    var r = h++;
                    if (g) g = !g;
                    else switch (a.charAt(r)) {
                        case "#":
                            0 == b && (c ? l(f, r, 1) : f < r && l(f, r, 0), f = r + 1, c = !c);
                            break;
                        case "[":
                            0 != b || c || (f < r && l(f, r, 0), f = r + 1);
                            ++b;
                            break;
                        case "\\":
                            g = !0;
                            k += a.substring(f, r);
                            f = r + 1;
                            q = r;
                            break;
                        case "]":
                            --b, 0 != b || c || (l(f, r, 2), f = r + 1)
                    }
                }
                f < a.length && l(f, a.length, 0);
                c && Ub.trace("Unclosed tag", {

                    className: "tracery.Tracery",
                    methodName: "parse"
                });
                0 < b && Ub.trace("Too many [", {

                    className: "tracery.Tracery",
                    methodName: "parse"
                });
                0 > b && Ub.trace("Too many ]", {

                    className: "tracery.Tracery",
                    methodName: "parse"
                });
                h = [];
                n = 0;
                for (b = d; n < b.length;) c = b[n], ++n, (0 != c.type || 0 < c.raw.length) && h.push(c);
                return d = h
            };
            var gh = function (a, b, c, d) {
                null == d.raw && (Ub.trace("Empty input for node", {
                    className: "tracery.TraceryNode",
                    methodName: "new"
                }), d.raw = "");
                this.grammar = a;
                this.parent = b;
                this.depth = null != b ? b.depth + 1 : 0;
                this.childIndex = c;
                this.raw = d.raw;
                this.type = d.type;
                this.isExpanded = !1
            };
            h["tracery.TraceryNode"] = gh;
            gh.__name__ = "tracery.TraceryNode";
            gh.prototype = {
                expandChildren: function (a, b) {
                    this.children = [];
                    this.finishedText = "";
                    this.childRule = a;
                    if (null != a) {
                        a = Me.parse(a);
                        for (var c = 0, d = a.length; c < d;) {
                            var g = c++,
                                f = new gh(this.grammar, this, g, a[g]);
                            this.children[g] = f;
                            b || f.expand(!1);
                            this.finishedText += f.finishedText
                        }
                    } else Ub.trace("No child rule provided, can't expand children", {

                        className: "tracery.TraceryNode",
                        methodName: "expandChildren"
                    })
                },
                expand: function (a) {
                    null == a && (a = !1);
                    if (!this.isExpanded) switch (this.isExpanded = !0, this.type) {
                        case 0:
                            this.finishedText = this.raw;
                            break;
                        case 1:
                            var b = Me.parseTag(this.raw);
                            this.symbol = b.symbol;
                            this.modifiers = b.modifiers;
                            var c = [],
                                d = 0;
                            for (b = b.preactions; d < b.length;) {
                                var g = b[d];
                                ++d;
                                c.push(new hh(this, g))
                            }
                            this.preactions = c;
                            this.postaction = [];
                            c = 0;
                            for (d = this.preactions; c < d.length;) g = d[c], ++c, 0 == g.type && this.postaction.push(g.createUndo());
                            c = 0;
                            for (d = this.preactions; c < d.length;) g = d[c], ++c, g.activate();
                            this.finishedText = this.raw;
                            c = this.grammar.selectRule(this.symbol);
                            this.expandChildren(c, a);
                            c = 0;
                            for (d = this.modifiers; c < d.length;) a = d[c], ++c, b = [], g = a.indexOf("("), -1 != g && (b = a.substring(g + 1, a.indexOf(")")).split(","), a = a.substring(0, g)),
                                g = this.grammar.modifiers.h[a], null == g ? (Ub.trace("Missing modifier " + a, {

                                className: "tracery.TraceryNode",
                                methodName: "expand"
                            }), this.finishedText += "((." + a + "))") : this.finishedText = g(this.finishedText, b);
                            c = 0;
                            for (d = this.postaction; c < d.length;) a = d[c], ++c, a.activate();
                            break;
                        case 2:
                            this.action = new hh(this, this.raw);
                            this.action.activate();
                            this.finishedText = "";
                            break;
                        default:
                            this.expandChildren(this.raw, a)
                    }
                },
                clearEscapeChars: function () {
                },
                __class__: gh
            };
            var Nh = function () {
            };
            h["utils.ColorNames"] = Nh;
            Nh.__name__ = "utils.ColorNames";
            Nh.get = function (a) {
                for (var b = a >>> 16, c = a >>> 8 & 255, d = a & 255, g = "", f = 1E10, k = Nh.values.h, q = Object.keys(k), l = q.length, h = 0; h < l;) {
                    var n = q[h++],
                        r = n;
                    a = k[n];
                    n = a >> 16;
                    var t = a >> 8 & 255;
                    a &= 255;
                    n = (b - n) * (b - n) + (c - t) * (c - t) + (d - a) * (d - a);
                    f > Ja.toFloat(n) && (f = Ja.toFloat(n), g = r)
                }
                return g
            };
            var od = function () {
            };
            h["utils.GradUtils"] = od;
            od.__name__ = "utils.GradUtils";
            od.gradient = function (a, b) {
                null ==
                b && (b = !1);
                for (var c = [], d = [], g = [], f = a.length, k = 0; k < f;) {
                    var q = k++,
                        l = a[q];
                    c.push(l.color);
                    var h = l.alpha;
                    d.push(null != h ? h : 1);
                    l = l.ratio;
                    q = null != l ? l : q / (f - 1);
                    g.push(255 * (b ? 1 - q : q) | 0)
                }
                b && (c.reverse(), d.reverse(), g.reverse());
                return {
                    colors: c,
                    alphas: d,
                    ratios: g
                }
            };
            od.beginGradientFill = function (a, b, c, d) {
                a.beginGradientFill(b, c.colors, c.alphas, c.ratios, d)
            };
            od.beginRadialFill = function (a, b, c, d, g) {
                null == g && (g = !1);
                od.beginGradientFill(a, 1, od.gradient(b, g), od.radialGrad(c, d))
            };
            od.beginLinearFill = function (a, b, c, d, g) {
                null ==
                g && (g = !1);
                od.beginGradientFill(a, 0, od.gradient(b, g), od.linearGrad(c, d))
            };
            od.radialGrad = function (a, b, c) {
                null == c && (c = new va);
                b = F.distance(a, b);
                c.createGradientBox(2 * b, 2 * b, 0, a.x - b, a.y - b);
                return c
            };
            od.linearGrad = function (a, b, c) {
                null == c && (c = new va);
                b = b.subtract(a);
                var d = b.get_length();
                c.createGradientBox(d, d, Math.atan2(b.y, b.x), a.x - d / 2 + b.x / 2, a.y - d / 2 + b.y / 2);
                return c
            };
            var Za = function () {
            };
            h["utils.GraphicsExtender"] = Za;
            Za.__name__ = "utils.GraphicsExtender";
            Za.drawPolygon = function (a,
                                       b) {
                var c = b[b.length - 1];
                a.moveTo(c.x, c.y);
                for (var d = 0; d < b.length;) c = b[d], ++d, a.lineTo(c.x, c.y)
            };
            Za.drawPolyline = function (a, b) {
                var c = b[0];
                a.moveTo(c.x, c.y);
                for (var d = 1, g = b.length; d < g;) c = d++, c = b[c], a.lineTo(c.x, c.y)
            };
            Za.dashedLine = function (a, b, c, d) {
                var g = !0,
                    f = 0;
                for (a.moveTo(b.x, b.y); ;) {
                    var k = F.distance(b, c),
                        q = d[f];
                    if (0 < q) {
                        if (k < q) {
                            g && a.lineTo(c.x, c.y);
                            break
                        }
                        b = Kb.lerp(b, c, q / k);
                        g ? a.lineTo(b.x, b.y) : a.moveTo(b.x, b.y)
                    }
                    ++f >= d.length && (f = 0);
                    g = !g
                }
            };
            Za.dashedPolyline = function (a, b, c, d) {
                null == c && (c = !1);
                if (!(2 > b.length)) {
                    var g = !0,
                        f = 0,
                        k = 0,
                        q = d[0],
                        l = c ? -1 : 0,
                        h = b[c ? b.length - 1 : 0];
                    c = b[c ? 0 : 1];
                    for (a.moveTo(h.x, h.y); ;) {
                        var n = F.distance(h, c);
                        if (k + n < q) {
                            g && a.lineTo(c.x, c.y);
                            if (++l >= b.length) break;
                            h = c;
                            c = b[l];
                            k += n
                        } else 0 < q && (h = Kb.lerp(h, c, (q - k) / n), g ? a.lineTo(h.x, h.y) : a.moveTo(h.x, h.y)), ++f >= d.length && (f = 0), q = d[f], k = 0, g = !g
                    }
                }
            };
            Za.drawArc = function (a, b, c, d, g, f, k) {
                null == k && (k = !0);
                var q = 3 + Math.floor(Math.abs(f - g) / (Math.PI / 4));
                f = (f - g) / q;
                k && a.moveTo(b + d * Math.cos(g), c + d * Math.sin(g));
                for (k = 0; k < q;) {
                    var l = k++,
                        h = g + l * f;
                    l = g + (l + 1) * f;
                    var n = (l - h) / 2,
                        r = d /
                            Math.cos(n);
                    a.curveTo(b + Math.cos(h + n) * r, c + Math.sin(h + n) * r, b + Math.cos(l) * d, c + Math.sin(l) * d)
                }
            };
            var Zc = function () {
            };
            h["utils.MathUtils"] = Zc;
            Zc.__name__ = "utils.MathUtils";
            Zc.gate = function (a, b, c) {
                return a < b ? b : a < c ? a : c
            };
            Zc.cycle = function (a, b, c) {
                for (; a < b;) a += c - b;
                for (; a > c;) a -= c - b;
                return a
            };
            Zc.gatei = function (a, b, c) {
                return a < b ? b : a < c ? a : c
            };
            var nc = N["utils.ParamType"] = {
                __ename__: "utils.ParamType",
                __constructs__: null,
                COLOR: {
                    _hx_name: "COLOR",
                    _hx_index: 0,
                    __enum__: "utils.ParamType",
                    toString: u
                },
                MULTI: {
                    _hx_name: "MULTI",
                    _hx_index: 1,
                    __enum__: "utils.ParamType",
                    toString: u
                },
                FONT: {
                    _hx_name: "FONT",
                    _hx_index: 2,
                    __enum__: "utils.ParamType",
                    toString: u
                },
                FLOAT: {
                    _hx_name: "FLOAT",
                    _hx_index: 3,
                    __enum__: "utils.ParamType",
                    toString: u
                },
                INT: {
                    _hx_name: "INT",
                    _hx_index: 4,
                    __enum__: "utils.ParamType",
                    toString: u
                },
                STRING: {
                    _hx_name: "STRING",
                    _hx_index: 5,
                    __enum__: "utils.ParamType",
                    toString: u
                },
                BOOL: {
                    _hx_name: "BOOL",
                    _hx_index: 6,
                    __enum__: "utils.ParamType",
                    toString: u
                }
            };
            nc.__constructs__ = [nc.COLOR, nc.MULTI, nc.FONT, nc.FLOAT, nc.INT, nc.STRING, nc.BOOL];
            var $c = function () {
                this.params = []
            };
            h["utils.Palette"] = $c;
            $c.__name__ = "utils.Palette";
            $c.float2str = function (a) {
                a = null == a ? "null" : "" + a;
                -
                    1 == a.indexOf(".") && (a += ".0");
                return a
            };
            $c.font2format = function (a) {
                if (null == a) return null;
                if (null != a.face) var b = a.face;
                else null != a.embedded && Yb.exists(a.embedded) ? (b = Yb.getFont(a.embedded), b = null != b ? b.name : null) : b = "_serif";
                return new Le(b, a.size, 0, a.bold,
                    a.italic)
            };
            $c.fromData = function (a) {
                for (var b = new $c, c = L.fields(a), d = 0; d < c.length;) {
                    var g = c[d++],
                        f = g;
                    g = a[g];
                    if ("number" == typeof g && (g | 0) === g) b.setInt(f, g);
                    else if ("number" == typeof g) b.setFloat(f, g);
                    else if ("boolean" == typeof g) b.setBool(f, g);
                    else if ("string" == typeof g) {
                        if (7 == g.length && "#" == g.charAt(0)) {
                            var k = E.parseInt("0x" + M.substr(g, 1, null));
                            if (null != k) {
                                b.setColor(f, k);
                                continue
                            }
                        }
                        k = parseFloat(g);
                        if (isNaN(k)) switch (g) {
                            case "false":
                                b.setBool(f, !1);
                                break;
                            case "true":
                                b.setBool(f, !0);
                                break;
                            default:
                                b.setString(f,
                                    g)
                        } else -1 == g.indexOf(".") ? b.setInt(f, k | 0) : b.setFloat(f, k)
                    } else if (g instanceof Array) {
                        k = [];
                        for (var q = 0; q < g.length;) {
                            var l = g[q];
                            ++q;
                            l = E.parseInt("0x" + M.substr(l, 1, null));
                            null != l && k.push(l)
                        }
                        b.setMulti(f, k)
                    } else null != g && b.setFont(f, g)
                }
                return b
            };
            $c.fromJSON = function (a) {
                a = JSON.parse(a);
                return $c.fromData(a)
            };
            $c.fromAsset = function (a) {
                return Yb.exists(a) ? $c.fromJSON(Yb.getText(a)) : null
            };
            $c.prototype = {
                getColor: function (a, b) {
                    null == b && (b = 0);
                    for (var c = 0, d = this.params; c < d.length;) {
                        var g = d[c];
                        ++c;
                        if (g.id == a) {
                            if (g.type ==
                                nc.COLOR) return g.color;
                            if (g.type == nc.MULTI) return g.multi[0];
                            break
                        }
                    }
                    return b
                },
                getMulti: function (a, b) {
                    null == b && (b = 0);
                    for (var c = 0, d = this.params; c < d.length;) {
                        var g = d[c];
                        ++c;
                        if (g.id == a) {
                            if (g.type == nc.MULTI) return g.multi;
                            if (g.type == nc.COLOR) return [g.color];
                            break
                        }
                    }
                    return [b]
                },
                getFont: function (a, b) {
                    for (var c = 0, d = this.params; c < d.length;) {
                        var g = d[c];
                        ++c;
                        if (g.id == a && g.type == nc.FONT) return g.font
                    }
                    return b
                },
                getFloat: function (a, b) {
                    null == b && (b = 0);
                    for (var c = 0, d = this.params; c < d.length;) {
                        var g = d[c];
                        ++c;
                        if (g.id ==
                            a && g.type == nc.FLOAT) return g.float
                    }
                    return b
                },
                getInt: function (a, b) {
                    null == b && (b = 0);
                    for (var c = 0, d = this.params; c < d.length;) {
                        var g = d[c];
                        ++c;
                        if (g.id == a && g.type == nc.INT) return g.int
                    }
                    return b
                },
                getString: function (a, b) {
                    for (var c = 0, d = this.params; c < d.length;) {
                        var g = d[c];
                        ++c;
                        if (g.id == a && g.type == nc.STRING) return g.string
                    }
                    return b
                },
                getBool: function (a, b) {
                    null == b && (b = !1);
                    for (var c = 0, d = this.params; c < d.length;) {
                        var g = d[c];
                        ++c;
                        if (g.id == a && g.type == nc.BOOL) return g.bool
                    }
                    return b
                },
                setColor: function (a, b) {
                    this.params.push({
                        id: a,
                        type: nc.COLOR,
                        color: b
                    })
                },
                setMulti: function (a, b) {
                    this.params.push({
                        id: a,
                        type: nc.MULTI,
                        multi: b
                    })
                },
                setFont: function (a, b) {
                    this.params.push({
                        id: a,
                        type: nc.FONT,
                        font: b
                    })
                },
                setFloat: function (a, b) {
                    this.params.push({
                        id: a,
                        type: nc.FLOAT,
                        float: b
                    })
                },
                setInt: function (a, b) {
                    this.params.push({
                        id: a,
                        type: nc.INT,
                        int: b
                    })
                },
                setString: function (a, b) {
                    this.params.push({
                        id: a,
                        type: nc.STRING,
                        string: b
                    })
                },
                setBool: function (a, b) {
                    this.params.push({
                        id: a,
                        type: nc.BOOL,
                        bool: b
                    })
                },
                data: function () {
                    for (var a = {}, b = 0, c = this.params; b < c.length;) {
                        var d =
                            c[b];
                        ++b;
                        switch (d.type._hx_index) {
                            case 0:
                                a[d.id] = "#" + T.hex(d.color, 6);
                                break;
                            case 1:
                                var g = d.id,
                                    f = [],
                                    k = 0;
                                for (d = d.multi; k < d.length;) {
                                    var q = d[k];
                                    ++k;
                                    f.push("#" + T.hex(q, 6))
                                }
                                a[g] = f;
                                break;
                            case 2:
                                a[d.id] = d.font;
                                break;
                            case 3:
                                a[d.id] = $c.float2str(d.float);
                                break;
                            case 4:
                                a[d.id] = null == d.int ? "null" : "" + d.int;
                                break;
                            case 5:
                                a[d.id] = d.string;
                                break;
                            case 6:
                                a[d.id] = null == d.bool ? "null" : "" + d.bool
                        }
                    }
                    return a
                },
                json: function () {
                    return JSON.stringify(this.data(), null, "  ")
                },
                __class__: $c
            };
            var Jk = function () {
            };
            h["utils.PointExtender"] =
                Jk;
            Jk.__name__ = "utils.PointExtender";
            Jk.set = function (a, b) {
                a.x = b.x;
                a.y = b.y
            };
            var Re = function () {
            };
            h["utils.Stopwatch"] = Re;
            Re.__name__ = "utils.Stopwatch";
            Re.startTime = null;
            Re.start = function () {
                Re.startTime = db.getTimer()
            };
            Re.next = function () {
                var a = db.getTimer(),
                    b = a - Re.startTime;
                Re.startTime = a;
                return b
            };
            var Qh = function () {
            };
            h["utils.StringUtils"] = Qh;
            Qh.__name__ = "utils.StringUtils";
            Qh.capitalize = function (a) {
                return M.substr(a, 0, 1).toUpperCase() + M.substr(a,
                    1, null)
            };
            var le = function (a) {
                null == a && (a = []);
                this.valueClasses = a;
                this.slots = td.NIL;
                this.priorityBased = !1
            };
            h["msignal.Signal"] = le;
            le.__name__ = "msignal.Signal";
            le.prototype = {
                add: function (a) {
                    return this.registerListener(a)
                },
                addOnce: function (a) {
                    return this.registerListener(a, !0)
                },
                addWithPriority: function (a, b) {
                    null == b && (b = 0);
                    return this.registerListener(a, !1, b)
                },
                addOnceWithPriority: function (a, b) {
                    null == b && (b = 0);
                    return this.registerListener(a, !0, b)
                },
                remove: function (a) {
                    var b = this.slots.find(a);
                    if (null == b) return null;
                    this.slots = this.slots.filterNot(a);
                    return b
                },
                removeAll: function () {
                    this.slots = td.NIL
                },
                registerListener: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    return this.registrationPossible(a, b) ? (a = this.createSlot(a, b, c), this.priorityBased || 0 == c || (this.priorityBased = !0), this.slots = this.priorityBased || 0 != c ? this.slots.insertWithPriority(a) : this.slots.prepend(a), a) : this.slots.find(a)
                },
                registrationPossible: function (a, b) {
                    return this.slots.nonEmpty && null != this.slots.find(a) ? !1 : !0
                },
                createSlot: function (a, b, c) {
                    return null
                },
                get_numListeners: function () {
                    return this.slots.get_length()
                },
                __class__: le,
                __properties__: {
                    get_numListeners: "get_numListeners"
                }
            };
            var gc = function (a) {
                le.call(this, [a])
            };
            h["msignal.Signal1"] = gc;
            gc.__name__ = "msignal.Signal1";
            gc.__super__ = le;
            gc.prototype = w(le.prototype, {
                dispatch: function (a) {
                    for (var b = this.slots; b.nonEmpty;) b.head.execute(a), b = b.tail
                },
                createSlot: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    return new Ui(this, a, b, c)
                },
                __class__: gc
            });
            var td = function (a, b) {
                this.nonEmpty = !1;
                null == a && null == b ?
                    this.nonEmpty = !1 : null != a && (this.head = a, this.tail = null == b ? td.NIL : b, this.nonEmpty = !0)
            };
            h["msignal.SlotList"] = td;
            td.__name__ = "msignal.SlotList";
            td.NIL = null;
            td.prototype = {
                get_length: function () {
                    if (!this.nonEmpty) return 0;
                    if (this.tail == td.NIL) return 1;
                    for (var a = 0, b = this; b.nonEmpty;) ++a, b = b.tail;
                    return a
                },
                prepend: function (a) {
                    return new td(a, this)
                },
                insertWithPriority: function (a) {
                    if (!this.nonEmpty) return new td(a);
                    var b = a.priority;
                    if (b >= this.head.priority) return this.prepend(a);
                    for (var c = new td(this.head),
                             d = c, g = this.tail; g.nonEmpty;) {
                        if (b > g.head.priority) return d.tail = g.prepend(a), c;
                        d = d.tail = new td(g.head);
                        g = g.tail
                    }
                    d.tail = new td(a);
                    return c
                },
                filterNot: function (a) {
                    if (!this.nonEmpty || null == a) return this;
                    if (this.head.listener == a) return this.tail;
                    for (var b = new td(this.head), c = b, d = this.tail; d.nonEmpty;) {
                        if (d.head.listener == a) return c.tail = d.tail, b;
                        c = c.tail = new td(d.head);
                        d = d.tail
                    }
                    return this
                },
                find: function (a) {
                    if (!this.nonEmpty) return null;
                    for (var b = this; b.nonEmpty;) {
                        if (b.head.listener == a) return b.head;
                        b = b.tail
                    }
                    return null
                },
                __class__: td,
                __properties__: {
                    get_length: "get_length"
                }
            };
            var Mb = function () {
            };
            h["utils.Updater"] = Mb;
            Mb.__name__ = "utils.Updater";
            Mb.__properties__ = {
                get_tick: "get_tick"
            };
            Mb.get_tick = function () {
                null == Mb.source && Mb.useTimer(60);
                return Mb._tick
            };
            Mb.fire = function () {
                var a = db.getTimer();
                0 == Mb.lastTime ? Mb._tick.dispatch(0) : Mb._tick.dispatch((a - Mb.lastTime) / 1E3 * Mb.timeScale);
                Mb.lastTime = a
            };
            Mb.useTimer = function (a) {
                null != Mb.source && Mb.source.stop();
                Mb.source = new Vi(a)
            };
            Mb.useEnterFrame = function (a) {
                null != Mb.source && Mb.source.stop();
                Mb.source = new Wi(a)
            };
            Mb.stop = function () {
                null != Mb.source && (Mb.source.stop(), Mb.source = null)
            };
            var xg = function () {
            };
            h["utils.RecurringEventDispatcher"] = xg;
            xg.__name__ = "utils.RecurringEventDispatcher";
            xg.prototype = {
                stop: function () {
                },
                __class__: xg
            };
            var Vi = function (a) {
                this.timer = new Xi(a);
                this.timer.addEventListener("timer", m(this, this.onTimer));
                this.timer.start()
            };
            h["utils._Updater.TimerEventDispatcher"] = Vi;
            Vi.__name__ = "utils._Updater.TimerEventDispatcher";
            Vi.__super__ = xg;
            Vi.prototype = w(xg.prototype, {
                onTimer: function (a) {
                    Mb.fire();
                    a.updateAfterEvent()
                },
                stop: function () {
                    this.timer.stop()
                },
                __class__: Vi
            });
            var Wi = function (a) {
                this.dispObj = a;
                a.addEventListener("enterFrame", m(this, this.onEnterFrame))
            };
            h["utils._Updater.FrameEventDispatcher"] = Wi;
            Wi.__name__ = "utils._Updater.FrameEventDispatcher";
            Wi.__super__ = xg;
            Wi.prototype = w(xg.prototype, {
                onEnterFrame: function (a) {
                    Mb.fire()
                },
                stop: function () {
                    this.dispObj.removeEventListener("enterFrame", m(this, this.onEnterFrame))
                },
                __class__: Wi
            });
            var me = N["haxe.StackItem"] = {
                __ename__: "haxe.StackItem",
                __constructs__: null,
                CFunction: {
                    _hx_name: "CFunction",
                    _hx_index: 0,
                    __enum__: "haxe.StackItem",
                    toString: u
                },
                Module: (H = function (a) {
                    return {
                        _hx_index: 1,
                        m: a,
                        __enum__: "haxe.StackItem",
                        toString: u
                    }
                }, H._hx_name = "Module", H.__params__ = ["m"], H),
                FilePos: (H = function (a, b, c, d) {
                    return {
                        _hx_index: 2,
                        s: a,
                        file: b,
                        line: c,
                        column: d,
                        __enum__: "haxe.StackItem",
                        toString: u
                    }
                },
                    H._hx_name = "FilePos", H.__params__ = ["s", "file", "line", "column"], H),
                Method: (H = function (a, b) {
                    return {
                        _hx_index: 3,
                        classname: a,
                        method: b,
                        __enum__: "haxe.StackItem",
                        toString: u
                    }
                }, H._hx_name = "Method", H.__params__ = ["classname", "method"], H),
                LocalFunction: (H = function (a) {
                    return {
                        _hx_index: 4,
                        v: a,
                        __enum__: "haxe.StackItem",
                        toString: u
                    }
                }, H._hx_name = "LocalFunction", H.__params__ = ["v"], H)
            };
            me.__constructs__ = [me.CFunction, me.Module, me.FilePos, me.Method, me.LocalFunction];
            var kf = {
                    callStack: function () {
                        return Ha.toHaxe(Ha.callStack())
                    },
                    exceptionStack: function (a) {
                        null == a && (a = !1);
                        var b = Ha.toHaxe(Ha.exceptionStack());
                        return a ? b : kf.subtract(b, kf.callStack())
                    },
                    toString: function (a) {
                        for (var b = new fb, c = 0; c < a.length;) {
                            var d = a[c];
                            ++c;
                            b.b += "\nCalled from ";
                            kf.itemToString(b, d)
                        }
                        return b.b
                    },
                    subtract: function (a, b) {
                        for (var c = -1, d = -1; ++d < a.length;) {
                            for (var g = 0, f = b.length; g < f;) {
                                var k = g++;
                                if (kf.equalItems(a[d], b[k])) {
                                    if (0 > c && (c = d), ++d, d >= a.length) break
                                } else c = -1
                            }
                            if (0 <= c) break
                        }
                        return 0 <= c ? a.slice(0, c) : a
                    },
                    equalItems: function (a, b) {
                        if (null == a) return null ==
                        b ? !0 : !1;
                        switch (a._hx_index) {
                            case 0:
                                return null == b ? !1 : 0 == b._hx_index ? !0 : !1;
                            case 1:
                                return null == b ? !1 : 1 == b._hx_index ? a.m == b.m : !1;
                            case 2:
                                if (null == b) return !1;
                                if (2 == b._hx_index) {
                                    var c = b.s,
                                        d = b.line,
                                        g = b.column,
                                        f = a.column,
                                        k = a.line,
                                        q = a.s;
                                    return a.file == b.file && k == d && f == g ? kf.equalItems(q, c) : !1
                                }
                                return !1;
                            case 3:
                                return null == b ? !1 : 3 == b._hx_index ? (c = b.method, d = a.method, a.classname == b.classname ? d == c : !1) : !1;
                            case 4:
                                return null == b ? !1 : 4 == b._hx_index ? a.v == b.v : !1
                        }
                    },
                    itemToString: function (a, b) {
                        switch (b._hx_index) {
                            case 0:
                                a.b +=
                                    "a C function";
                                break;
                            case 1:
                                b = b.m;
                                a.b += "module ";
                                a.b += null == b ? "null" : "" + b;
                                break;
                            case 2:
                                var c = b.s,
                                    d = b.file,
                                    g = b.line;
                                b = b.column;
                                null != c && (kf.itemToString(a, c), a.b += " (");
                                a.b += null == d ? "null" : "" + d;
                                a.b += " line ";
                                a.b += null == g ? "null" : "" + g;
                                null != b && (a.b += " column ", a.b += null == b ? "null" : "" + b);
                                null != c && (a.b += ")");
                                break;
                            case 3:
                                c = b.classname;
                                b = b.method;
                                a.b += E.string(null == c ? "<unknown>" : c);
                                a.b += ".";
                                a.b += null == b ? "null" : "" + b;
                                break;
                            case 4:
                                b = b.v, a.b += "local function #", a.b += null == b ? "null" : "" + b
                        }
                    }
                },
                aa = function (a, b, c) {
                    Error.call(this,
                        a);
                    this.message = a;
                    this.__previousException = b;
                    this.__nativeException = null != c ? c : this;
                    this.__skipStack = 0;
                    a = Error.prepareStackTrace;
                    Error.prepareStackTrace = function (a) {
                        return a.stack
                    };
                    if (c instanceof Error) this.stack = c.stack;
                    else {
                        c = null;
                        if (Error.captureStackTrace) Error.captureStackTrace(this, aa), c = this;
                        else if (c = Error(), "undefined" == typeof c.stack) {
                            try {
                                throw c;
                            } catch (d) {
                            }
                            this.__skipStack++
                        }
                        this.stack = c.stack
                    }
                    Error.prepareStackTrace = a
                };
            h["haxe.Exception"] = aa;
            aa.__name__ = "haxe.Exception";
            aa.caught = function (a) {
                return a instanceof
                aa ? a : a instanceof Error ? new aa(a.message, null, a) : new ih(a, null, a)
            };
            aa.thrown = function (a) {
                if (a instanceof aa) return a.get_native();
                if (a instanceof Error) return a;
                a = new ih(a);
                a.__skipStack++;
                return a
            };
            aa.__super__ = Error;
            aa.prototype = w(Error.prototype, {
                unwrap: function () {
                    return this.__nativeException
                },
                toString: function () {
                    return this.get_message()
                },
                __shiftStack: function () {
                    this.__skipStack++
                },
                get_message: function () {
                    return this.message
                },
                get_native: function () {
                    return this.__nativeException
                },
                get_stack: function () {
                    var a =
                        this.__exceptionStack;
                    null == a && (a = Ha.toHaxe(Ha.normalize(this.stack), this.__skipStack), this.setProperty("__exceptionStack", a));
                    return a
                },
                setProperty: function (a, b) {
                    try {
                        Object.defineProperty(this, a, {
                            value: b
                        })
                    } catch (c) {
                        this[a] = b
                    }
                },
                __class__: aa,
                __properties__: {
                    get_native: "get_native",
                    get_stack: "get_stack",
                    get_message: "get_message"
                }
            });
            var lb = function (a, b) {
                this.high = a;
                this.low = b
            };
            h["haxe._Int64.___Int64"] = lb;
            lb.__name__ = "haxe._Int64.___Int64";
            lb.prototype = {
                __class__: lb
            };
            var Ub = function () {
            };
            h["haxe.Log"] =
                Ub;
            Ub.__name__ = "haxe.Log";
            Ub.formatOutput = function (a, b) {
                var c = E.string(a);
                if (null == b) return c;
                if (null != b.customParams) {
                    var g = 0;
                    for (b = b.customParams; g < b.length;) a = b[g], ++g, c += ", " + E.string(a)
                }
                return c
            };
            Ub.trace = function (a, b) {
                a = Ub.formatOutput(a, b);
                "undefined" != typeof console && null != console.log && console.log(a)
            };
            var Ha = function () {
            };
            h["haxe.NativeStackTrace"] = Ha;
            Ha.__name__ = "haxe.NativeStackTrace";
            Ha.lastError = null;
            Ha.wrapCallSite = null;
            Ha.saveStack = function (a) {
                Ha.lastError =
                    a
            };
            Ha.callStack = function () {
                var a = Error(""),
                    b = Ha.tryHaxeStack(a);
                if ("undefined" == typeof b) {
                    try {
                        throw a;
                    } catch (c) {
                    }
                    b = a.stack
                }
                return Ha.normalize(b, 2)
            };
            Ha.exceptionStack = function () {
                return Ha.normalize(Ha.tryHaxeStack(Ha.lastError))
            };
            Ha.toHaxe = function (a, b) {
                null == b && (b = 0);
                if (null == a) return [];
                if ("string" == typeof a) {
                    a = a.split("\n");
                    "Error" == a[0] && a.shift();
                    for (var c = [], d = 0, g = a.length; d < g;) {
                        var f = d++;
                        if (!(b > f)) {
                            var k = a[f];
                            f = k.match(/^    at ([$A-Za-z0-9_. ]+) \(([^)]+):([0-9]+):([0-9]+)\)$/);
                            if (null != f) {
                                k =
                                    f[1].split(".");
                                "$hxClasses" == k[0] && k.shift();
                                var q = k.pop(),
                                    l = f[2],
                                    h = E.parseInt(f[3]);
                                f = E.parseInt(f[4]);
                                c.push(me.FilePos("Anonymous function" == q ? me.LocalFunction() : "Global code" == q ? null : me.Method(k.join("."), q), l, h, f))
                            } else c.push(me.Module(T.trim(k)))
                        }
                    }
                    return c
                }
                return 0 < b && Array.isArray(a) ? a.slice(b) : a
            };
            Ha.tryHaxeStack = function (a) {
                if (null == a) return [];
                var b = Error.prepareStackTrace;
                Error.prepareStackTrace = Ha.prepareHxStackTrace;
                a = a.stack;
                Error.prepareStackTrace = b;
                return a
            };
            Ha.prepareHxStackTrace =
                function (a, b) {
                    a = [];
                    for (var c = 0; c < b.length;) {
                        var d = b[c];
                        ++c;
                        null != Ha.wrapCallSite && (d = Ha.wrapCallSite(d));
                        var g = null,
                            f = d.getFunctionName();
                        if (null != f) {
                            var k = f.lastIndexOf(".");
                            0 <= k ? (g = f.substring(0, k), f = f.substring(k + 1), g = me.Method(g, f)) : g = me.Method(null, f)
                        }
                        f = d.getFileName();
                        k = null == f ? -1 : f.indexOf("file:");
                        null != Ha.wrapCallSite && 0 < k && (f = f.substring(k + 6));
                        a.push(me.FilePos(g, f, d.getLineNumber(), d.getColumnNumber()))
                    }
                    return a
                };
            Ha.normalize = function (a, b) {
                null == b && (b = 0);
                if (Array.isArray(a) && 0 < b) return a.slice(b);
                if ("string" == typeof a) {
                    switch (a.substring(0, 6)) {
                        case "Error\n":
                        case "Error:":
                            ++b
                    }
                    return Ha.skipLines(a, b)
                }
                return a
            };
            Ha.skipLines = function (a, b, c) {
                null == c && (c = 0);
                return 0 < b ? (c = a.indexOf("\n", c), 0 > c ? "" : Ha.skipLines(a, --b, c + 1)) : a.substring(c)
            };
            var ud = function () {
                this.buf = new fb;
                this.cache = [];
                this.useCache = ud.USE_CACHE;
                this.useEnumIndex = ud.USE_ENUM_INDEX;
                this.shash = new ab;
                this.scount = 0
            };
            h["haxe.Serializer"] = ud;
            ud.__name__ = "haxe.Serializer";
            ud.run = function (a) {
                var b = new ud;
                b.serialize(a);
                return b.toString()
            };
            ud.prototype = {
                toString: function () {
                    return this.buf.b
                },
                serializeString: function (a) {
                    var b = this.shash.h[a];
                    null != b ? (this.buf.b += "R", this.buf.b += null == b ? "null" : "" + b) : (this.shash.h[a] = this.scount++, this.buf.b += "y", a = encodeURIComponent(a), this.buf.b += E.string(a.length), this.buf.b += ":", this.buf.b += null == a ? "null" : "" + a)
                },
                serializeRef: function (a) {
                    for (var b = typeof a, c = 0, d = this.cache.length; c < d;) {
                        var g = c++,
                            f = this.cache[g];
                        if (typeof f == b && f == a) return this.buf.b += "r", this.buf.b += null == g ? "null" : "" + g, !0
                    }
                    this.cache.push(a);
                    return !1
                },
                serializeFields: function (a) {
                    for (var b = 0, c = L.fields(a); b < c.length;) {
                        var d = c[b];
                        ++b;
                        this.serializeString(d);
                        this.serialize(L.field(a, d))
                    }
                    this.buf.b += "g"
                },
                serialize: function (a) {
                    var b = z.typeof(a);
                    switch (b._hx_index) {
                        case 0:
                            this.buf.b += "n";
                            break;
                        case 1:
                            if (0 == a) {
                                this.buf.b += "z";
                                break
                            }
                            this.buf.b += "i";
                            this.buf.b += null == a ? "null" : "" + a;
                            break;
                        case 2:
                            isNaN(a) ? this.buf.b += "k" : isFinite(a) ? (this.buf.b += "d", this.buf.b += null == a ? "null" : "" + a) : this.buf.b += 0 > a ? "m" : "p";
                            break;
                        case 3:
                            this.buf.b += a ? "t" : "f";
                            break;
                        case 4:
                            Ua.__instanceof(a, qm) ? (a = a.__name__, this.buf.b += "A", this.serializeString(a)) : Ua.__instanceof(a, rm) ? (this.buf.b += "B", this.serializeString(a.__ename__)) : this.useCache && this.serializeRef(a) || (this.buf.b += "o", this.serializeFields(a));
                            break;
                        case 5:
                            throw aa.thrown("Cannot serialize function");
                        case 6:
                            b = b.c;
                            if (b == String) {
                                this.serializeString(a);
                                break
                            }
                            if (this.useCache && this.serializeRef(a)) break;
                            switch (b) {
                                case Array:
                                    var c = 0;
                                    this.buf.b += "a";
                                    for (var d = 0, g = a.length; d < g;) b = d++, null == a[b] ? ++c : (0 < c && (1 ==
                                    c ? this.buf.b += "n" : (this.buf.b += "u", this.buf.b += null == c ? "null" : "" + c), c = 0), this.serialize(a[b]));
                                    0 < c && (1 == c ? this.buf.b += "n" : (this.buf.b += "u", this.buf.b += null == c ? "null" : "" + c));
                                    this.buf.b += "h";
                                    break;
                                case Date:
                                    this.buf.b += "v";
                                    this.buf.b += E.string(a.getTime());
                                    break;
                                case Ec:
                                    this.buf.b += "q";
                                    for (b = a.keys(); b.hasNext();) c = b.next(), this.buf.b += ":", this.buf.b += null == c ? "null" : "" + c, this.serialize(a.h[c]);
                                    this.buf.b += "h";
                                    break;
                                case jb:
                                    this.buf.b += "l";
                                    for (a = a.h; null != a;) b = a.item, a = a.next, this.serialize(b);
                                    this.buf.b +=
                                        "h";
                                    break;
                                case Ba:
                                    this.buf.b += "M";
                                    for (b = a.keys(); b.hasNext();) {
                                        c = b.next();
                                        var f = L.field(c, "__id__");
                                        L.deleteField(c, "__id__");
                                        this.serialize(c);
                                        c.__id__ = f;
                                        this.serialize(a.h[c.__id__])
                                    }
                                    this.buf.b += "h";
                                    break;
                                case ab:
                                    this.buf.b += "b";
                                    c = Object.keys(a.h);
                                    f = c.length;
                                    for (d = 0; d < f;) b = c[d++], this.serializeString(b), this.serialize(a.h[b]);
                                    this.buf.b += "h";
                                    break;
                                case Db:
                                    this.buf.b += "s";
                                    this.buf.b += E.string(Math.ceil(8 * a.length / 6));
                                    this.buf.b += ":";
                                    b = 0;
                                    c = a.length - 2;
                                    f = ud.BASE64_CODES;
                                    if (null == f) {
                                        f = Array(ud.BASE64.length);
                                        d = 0;
                                        for (g = ud.BASE64.length; d < g;) {
                                            var k = d++;
                                            f[k] = M.cca(ud.BASE64, k)
                                        }
                                        ud.BASE64_CODES = f
                                    }
                                    for (; b < c;) d = a.b[b++], g = a.b[b++], k = a.b[b++], this.buf.b += String.fromCodePoint(f[d >> 2]), this.buf.b += String.fromCodePoint(f[(d << 4 | g >> 4) & 63]), this.buf.b += String.fromCodePoint(f[(g << 2 | k >> 6) & 63]), this.buf.b += String.fromCodePoint(f[k & 63]);
                                    b == c ? (d = a.b[b++], g = a.b[b++], this.buf.b += String.fromCodePoint(f[d >> 2]), this.buf.b += String.fromCodePoint(f[(d << 4 | g >> 4) & 63]), this.buf.b += String.fromCodePoint(f[g << 2 & 63])) : b == c + 1 && (d = a.b[b++],
                                        this.buf.b += String.fromCodePoint(f[d >> 2]), this.buf.b += String.fromCodePoint(f[d << 4 & 63]));
                                    break;
                                default:
                                    this.useCache && this.cache.pop(), null != a.hxSerialize ? (this.buf.b += "C", this.serializeString(b.__name__), this.useCache && this.cache.push(a), a.hxSerialize(this), this.buf.b += "g") : (this.buf.b += "c", this.serializeString(b.__name__), this.useCache && this.cache.push(a), this.serializeFields(a))
                            }
                            break;
                        case 7:
                            b = b.e;
                            if (this.useCache) {
                                if (this.serializeRef(a)) break;
                                this.cache.pop()
                            }
                            this.buf.b += E.string(this.useEnumIndex ?
                                "j" : "w");
                            this.serializeString(b.__ename__);
                            this.useEnumIndex ? (this.buf.b += ":", this.buf.b += E.string(a._hx_index)) : (b = a, this.serializeString(N[b.__enum__].__constructs__[b._hx_index]._hx_name));
                            this.buf.b += ":";
                            c = z.enumParameters(a);
                            this.buf.b += E.string(c.length);
                            for (b = 0; b < c.length;) f = c[b], ++b, this.serialize(f);
                            this.useCache && this.cache.push(a);
                            break;
                        default:
                            throw aa.thrown("Cannot serialize " + E.string(a));
                    }
                },
                __class__: ud
            };
            var Qf = function (a) {
                var b = this;
                this.id = setInterval(function () {
                    b.run()
                }, a)
            };
            h["haxe.Timer"] =
                Qf;
            Qf.__name__ = "haxe.Timer";
            Qf.delay = function (a, b) {
                var c = new Qf(b);
                c.run = function () {
                    c.stop();
                    a()
                };
                return c
            };
            Qf.prototype = {
                stop: function () {
                    null != this.id && (clearInterval(this.id), this.id = null)
                },
                run: function () {
                },
                __class__: Qf
            };
            var Yi = function () {
            };
            h["haxe._Unserializer.DefaultResolver"] = Yi;
            Yi.__name__ = "haxe._Unserializer.DefaultResolver";
            Yi.prototype = {
                resolveClass: function (a) {
                    return h[a]
                },
                resolveEnum: function (a) {
                    return N[a]
                },
                __class__: Yi
            };
            var pd = function (a) {
                this.buf = a;
                this.length = this.buf.length;
                this.pos =
                    0;
                this.scache = [];
                this.cache = [];
                a = pd.DEFAULT_RESOLVER;
                null == a && (a = new Yi, pd.DEFAULT_RESOLVER = a);
                this.resolver = a
            };
            h["haxe.Unserializer"] = pd;
            pd.__name__ = "haxe.Unserializer";
            pd.initCodes = function () {
                for (var a = [], b = 0, c = pd.BASE64.length; b < c;) {
                    var d = b++;
                    a[pd.BASE64.charCodeAt(d)] = d
                }
                return a
            };
            pd.run = function (a) {
                return (new pd(a)).unserialize()
            };
            pd.prototype = {
                setResolver: function (a) {
                    null == a ? (null == Rf.instance && (Rf.instance = new Rf), this.resolver = Rf.instance) : this.resolver = a
                },
                readDigits: function () {
                    for (var a = 0,
                             b = !1, c = this.pos; ;) {
                        var d = this.buf.charCodeAt(this.pos);
                        if (d != d) break;
                        if (45 == d) {
                            if (this.pos != c) break;
                            b = !0
                        } else {
                            if (48 > d || 57 < d) break;
                            a = 10 * a + (d - 48)
                        }
                        this.pos++
                    }
                    b && (a *= -1);
                    return a
                },
                readFloat: function () {
                    for (var a = this.pos; ;) {
                        var b = this.buf.charCodeAt(this.pos);
                        if (b != b) break;
                        if (43 <= b && 58 > b || 101 == b || 69 == b) this.pos++;
                        else break
                    }
                    return parseFloat(M.substr(this.buf, a, this.pos - a))
                },
                unserializeObject: function (a) {
                    for (; ;) {
                        if (this.pos >= this.length) throw aa.thrown("Invalid object");
                        if (103 == this.buf.charCodeAt(this.pos)) break;
                        var b = this.unserialize();
                        if ("string" != typeof b) throw aa.thrown("Invalid object key");
                        var c = this.unserialize();
                        a[b] = c
                    }
                    this.pos++
                },
                unserializeEnum: function (a, b) {
                    if (58 != this.buf.charCodeAt(this.pos++)) throw aa.thrown("Invalid enum format");
                    var c = this.readDigits();
                    if (0 == c) return z.createEnum(a, b);
                    for (var d = []; 0 < c--;) d.push(this.unserialize());
                    return z.createEnum(a, b, d)
                },
                unserialize: function () {
                    switch (this.buf.charCodeAt(this.pos++)) {
                        case 65:
                            var a = this.unserialize(),
                                b = this.resolver.resolveClass(a);
                            if (null ==
                                b) throw aa.thrown("Class not found " + a);
                            return b;
                        case 66:
                            a = this.unserialize();
                            b = this.resolver.resolveEnum(a);
                            if (null == b) throw aa.thrown("Enum not found " + a);
                            return b;
                        case 67:
                            a = this.unserialize();
                            b = this.resolver.resolveClass(a);
                            if (null == b) throw aa.thrown("Class not found " + a);
                            b = Object.create(b.prototype);
                            this.cache.push(b);
                            b.hxUnserialize(this);
                            if (103 != this.buf.charCodeAt(this.pos++)) throw aa.thrown("Invalid custom data");
                            return b;
                        case 77:
                            a = new Ba;
                            this.cache.push(a);
                            for (var c; 104 != this.buf.charCodeAt(this.pos);) b =
                                this.unserialize(), a.set(b, this.unserialize());
                            this.pos++;
                            return a;
                        case 82:
                            a = this.readDigits();
                            if (0 > a || a >= this.scache.length) throw aa.thrown("Invalid string reference");
                            return this.scache[a];
                        case 97:
                            b = [];
                            for (this.cache.push(b); ;) {
                                c = this.buf.charCodeAt(this.pos);
                                if (104 == c) {
                                    this.pos++;
                                    break
                                }
                                117 == c ? (this.pos++, a = this.readDigits(), b[b.length + a - 1] = null) : b.push(this.unserialize())
                            }
                            return b;
                        case 98:
                            a = new ab;
                            for (this.cache.push(a); 104 != this.buf.charCodeAt(this.pos);) b = this.unserialize(), c = this.unserialize(),
                                a.h[b] = c;
                            this.pos++;
                            return a;
                        case 99:
                            a = this.unserialize();
                            b = this.resolver.resolveClass(a);
                            if (null == b) throw aa.thrown("Class not found " + a);
                            b = Object.create(b.prototype);
                            this.cache.push(b);
                            this.unserializeObject(b);
                            return b;
                        case 100:
                            return this.readFloat();
                        case 102:
                            return !1;
                        case 105:
                            return this.readDigits();
                        case 106:
                            a = this.unserialize();
                            c = this.resolver.resolveEnum(a);
                            if (null == c) throw aa.thrown("Enum not found " + a);
                            this.pos++;
                            for (var d = this.readDigits(), g = c.__constructs__, f = Array(g.length), k = 0, q = g.length; k <
                            q;) b = k++, f[b] = g[b]._hx_name;
                            b = f[d];
                            if (null == b) throw aa.thrown("Unknown enum index " + a + "@" + d);
                            b = this.unserializeEnum(c, b);
                            this.cache.push(b);
                            return b;
                        case 107:
                            return NaN;
                        case 108:
                            b = new jb;
                            for (this.cache.push(b); 104 != this.buf.charCodeAt(this.pos);) b.add(this.unserialize());
                            this.pos++;
                            return b;
                        case 109:
                            return -Infinity;
                        case 110:
                            return null;
                        case 111:
                            return b = {}, this.cache.push(b), this.unserializeObject(b), b;
                        case 112:
                            return Infinity;
                        case 113:
                            a = new Ec;
                            this.cache.push(a);
                            for (c = this.buf.charCodeAt(this.pos++); 58 ==
                            c;) b = this.readDigits(), c = this.unserialize(), a.h[b] = c, c = this.buf.charCodeAt(this.pos++);
                            if (104 != c) throw aa.thrown("Invalid IntMap format");
                            return a;
                        case 114:
                            a = this.readDigits();
                            if (0 > a || a >= this.cache.length) throw aa.thrown("Invalid reference");
                            return this.cache[a];
                        case 115:
                            a = this.readDigits();
                            c = this.buf;
                            if (58 != this.buf.charCodeAt(this.pos++) || this.length - this.pos < a) throw aa.thrown("Invalid bytes length");
                            d = pd.CODES;
                            null == d && (d = pd.initCodes(), pd.CODES = d);
                            b = this.pos;
                            g = a & 3;
                            f = b + (a - g);
                            k = new Db(new ArrayBuffer(3 *
                                (a >> 2) + (2 <= g ? g - 1 : 0)));
                            for (q = 0; b < f;) {
                                var l = d[c.charCodeAt(b++)],
                                    h = d[c.charCodeAt(b++)];
                                k.b[q++] = l << 2 | h >> 4;
                                l = d[c.charCodeAt(b++)];
                                k.b[q++] = h << 4 | l >> 2;
                                h = d[c.charCodeAt(b++)];
                                k.b[q++] = l << 6 | h
                            }
                            2 <= g && (l = d[c.charCodeAt(b++)], h = d[c.charCodeAt(b++)], k.b[q++] = l << 2 | h >> 4, 3 == g && (l = d[c.charCodeAt(b++)], k.b[q++] = h << 4 | l >> 2));
                            this.pos += a;
                            this.cache.push(k);
                            return k;
                        case 116:
                            return !0;
                        case 118:
                            return 48 <= this.buf.charCodeAt(this.pos) && 57 >= this.buf.charCodeAt(this.pos) && 48 <= this.buf.charCodeAt(this.pos + 1) && 57 >= this.buf.charCodeAt(this.pos +
                                1) && 48 <= this.buf.charCodeAt(this.pos + 2) && 57 >= this.buf.charCodeAt(this.pos + 2) && 48 <= this.buf.charCodeAt(this.pos + 3) && 57 >= this.buf.charCodeAt(this.pos + 3) && 45 == this.buf.charCodeAt(this.pos + 4) ? (b = M.strDate(M.substr(this.buf, this.pos, 19)), this.pos += 19) : b = new Date(this.readFloat()), this.cache.push(b), b;
                        case 119:
                            a = this.unserialize();
                            c = this.resolver.resolveEnum(a);
                            if (null == c) throw aa.thrown("Enum not found " + a);
                            b = this.unserializeEnum(c, this.unserialize());
                            this.cache.push(b);
                            return b;
                        case 120:
                            throw aa.thrown(this.unserialize());
                        case 121:
                            a = this.readDigits();
                            if (58 != this.buf.charCodeAt(this.pos++) || this.length - this.pos < a) throw aa.thrown("Invalid string length");
                            b = M.substr(this.buf, this.pos, a);
                            this.pos += a;
                            b = decodeURIComponent(b.split("+").join(" "));
                            this.scache.push(b);
                            return b;
                        case 122:
                            return 0
                    }
                    this.pos--;
                    throw aa.thrown("Invalid char " + this.buf.charAt(this.pos) + " at position " + this.pos);
                },
                __class__: pd
            };
            var Rf = function () {
            };
            h["haxe._Unserializer.NullResolver"] = Rf;
            Rf.__name__ = "haxe._Unserializer.NullResolver";
            Rf.instance = null;
            Rf.prototype = {
                resolveClass: function (a) {
                    return null
                },
                resolveEnum: function (a) {
                    return null
                },
                __class__: Rf
            };
            var ih = function (a, b, c) {
                aa.call(this, String(a), b, c);
                this.value = a;
                this.__skipStack++
            };
            h["haxe.ValueException"] = ih;
            ih.__name__ = "haxe.ValueException";
            ih.__super__ = aa;
            ih.prototype = w(aa.prototype, {
                unwrap: function () {
                    return this.value
                },
                __class__: ih
            });
            var yg = function () {
                this.a1 = 1;
                this.a2 = 0
            };
            h["haxe.crypto.Adler32"] = yg;
            yg.__name__ = "haxe.crypto.Adler32";
            yg.read = function (a) {
                var b = new yg,
                    c = a.readByte(),
                    d = a.readByte(),
                    g = a.readByte();
                a = a.readByte();
                b.a1 = g << 8 | a;
                b.a2 = c << 8 | d;
                return b
            };
            yg.prototype = {
                update: function (a, b, c) {
                    var d = this.a1,
                        g = this.a2,
                        f = b;
                    for (b += c; f < b;) c = f++, d = (d + a.b[c]) % 65521, g = (g + d) % 65521;
                    this.a1 = d;
                    this.a2 = g
                },
                equals: function (a) {
                    return a.a1 == this.a1 ? a.a2 == this.a2 : !1
                },
                __class__: yg
            };
            var Db = function (a) {
                this.length = a.byteLength;
                this.b = new Uint8Array(a);
                this.b.bufferValue = a;
                a.hxBytes = this;
                a.bytes = this.b
            };
            h["haxe.io.Bytes"] = Db;
            Db.__name__ = "haxe.io.Bytes";
            Db.ofString = function (a, b) {
                if (b == Wk.RawNative) {
                    for (var c =
                        new Uint8Array(a.length << 1), d = 0, g = a.length; d < g;) {
                        b = d++;
                        var f = a.charCodeAt(b);
                        c[b << 1] = f & 255;
                        c[b << 1 | 1] = f >> 8
                    }
                    return new Db(c.buffer)
                }
                c = [];
                for (b = 0; b < a.length;) f = a.charCodeAt(b++), 55296 <= f && 56319 >= f && (f = f - 55232 << 10 | a.charCodeAt(b++) & 1023), 127 >= f ? c.push(f) : (2047 >= f ? c.push(192 | f >> 6) : (65535 >= f ? c.push(224 | f >> 12) : (c.push(240 | f >> 18), c.push(128 | f >> 12 & 63)), c.push(128 | f >> 6 & 63)), c.push(128 | f & 63));
                return new Db((new Uint8Array(c)).buffer)
            };
            Db.ofData = function (a) {
                var b = a.hxBytes;
                return null != b ? b : new Db(a)
            };
            Db.prototype = {
                blit: function (a, b, c, d) {
                    if (0 > a || 0 > c || 0 > d || a + d > this.length || c + d > b.length) throw aa.thrown(ne.OutsideBounds);
                    0 == c && d == b.b.byteLength ? this.b.set(b.b, a) : this.b.set(b.b.subarray(c, c + d), a)
                },
                setUInt16: function (a, b) {
                    null == this.data && (this.data = new DataView(this.b.buffer, this.b.byteOffset, this.b.byteLength));
                    this.data.setUint16(a, b, !0)
                },
                setInt32: function (a, b) {
                    null == this.data && (this.data = new DataView(this.b.buffer, this.b.byteOffset, this.b.byteLength));
                    this.data.setInt32(a, b, !0)
                },
                getString: function (a, b, c) {
                    if (0 >
                        a || 0 > b || a + b > this.length) throw aa.thrown(ne.OutsideBounds);
                    null == c && (c = Wk.UTF8);
                    var d = "",
                        g = this.b,
                        f = a;
                    a += b;
                    switch (c._hx_index) {
                        case 0:
                            for (; f < a;)
                                if (c = g[f++], 128 > c) {
                                    if (0 == c) break;
                                    d += String.fromCodePoint(c)
                                } else if (224 > c) c = (c & 63) << 6 | g[f++] & 127, d += String.fromCodePoint(c);
                                else if (240 > c) b = g[f++], c = (c & 31) << 12 | (b & 127) << 6 | g[f++] & 127, d += String.fromCodePoint(c);
                                else {
                                    b = g[f++];
                                    var k = g[f++];
                                    c = (c & 15) << 18 | (b & 127) << 12 | (k & 127) << 6 | g[f++] & 127;
                                    d += String.fromCodePoint(c)
                                }
                            break;
                        case 1:
                            for (; f < a;) c = g[f++] | g[f++] << 8, d += String.fromCodePoint(c)
                    }
                    return d
                },
                toString: function () {
                    return this.getString(0, this.length)
                },
                __class__: Db
            };
            var Wk = N["haxe.io.Encoding"] = {
                __ename__: "haxe.io.Encoding",
                __constructs__: null,
                UTF8: {
                    _hx_name: "UTF8",
                    _hx_index: 0,
                    __enum__: "haxe.io.Encoding",
                    toString: u
                },
                RawNative: {
                    _hx_name: "RawNative",
                    _hx_index: 1,
                    __enum__: "haxe.io.Encoding",
                    toString: u
                }
            };
            Wk.__constructs__ = [Wk.UTF8, Wk.RawNative];
            var Rc = function () {
            };
            h["haxe.ds.ArraySort"] = Rc;
            Rc.__name__ = "haxe.ds.ArraySort";
            Rc.sort = function (a, b) {
                Rc.rec(a, b, 0, a.length)
            };
            Rc.rec = function (a, b, c, d) {
                var g =
                    c + d >> 1;
                if (12 > d - c) {
                    if (!(d <= c))
                        for (g = c + 1; g < d;)
                            for (var f = g++; f > c;) {
                                if (0 > b(a[f], a[f - 1])) Rc.swap(a, f - 1, f);
                                else break;
                                --f
                            }
                } else Rc.rec(a, b, c, g), Rc.rec(a, b, g, d), Rc.doMerge(a, b, c, g, d, g - c, d - g)
            };
            Rc.doMerge = function (a, b, c, d, g, f, k) {
                if (0 != f && 0 != k)
                    if (2 == f + k) 0 > b(a[d], a[c]) && Rc.swap(a, d, c);
                    else {
                        if (f > k) {
                            var q = f >> 1;
                            var l = c + q;
                            var h = Rc.lower(a, b, d, g, l);
                            var n = h - d
                        } else n = k >> 1, h = d + n, l = Rc.upper(a, b, c, d, h), q = l - c;
                        Rc.rotate(a, b, l, d, h);
                        d = l + n;
                        Rc.doMerge(a, b, c, l, d, q, n);
                        Rc.doMerge(a, b, d, h, g, f - q, k - n)
                    }
            };
            Rc.rotate = function (a, b, c,
                                  d, g) {
                if (c != d && d != g)
                    for (b = Rc.gcd(g - c, d - c); 0 != b--;) {
                        for (var f = a[c + b], k = d - c, q = c + b, l = c + b + k; l != c + b;) a[q] = a[l], q = l, l = g - l > k ? l + k : c + (k - (g - l));
                        a[q] = f
                    }
            };
            Rc.gcd = function (a, b) {
                for (; 0 != b;) {
                    var c = a % b;
                    a = b;
                    b = c
                }
                return a
            };
            Rc.upper = function (a, b, c, d, g) {
                d -= c;
                for (var f, k; 0 < d;) f = d >> 1, k = c + f, 0 > b(a[g], a[k]) ? d = f : (c = k + 1, d = d - f - 1);
                return c
            };
            Rc.lower = function (a, b, c, d, g) {
                d -= c;
                for (var f, k; 0 < d;) f = d >> 1, k = c + f, 0 > b(a[k], a[g]) ? (c = k + 1, d = d - f - 1) : d = f;
                return c
            };
            Rc.swap = function (a, b, c) {
                var d = a[b];
                a[b] = a[c];
                a[c] = d
            };
            var Ec = function () {
                this.h = {}
            };
            h["haxe.ds.IntMap"] = Ec;
            Ec.__name__ = "haxe.ds.IntMap";
            Ec.__interfaces__ = [na];
            Ec.prototype = {
                set: function (a, b) {
                    this.h[a] = b
                },
                get: function (a) {
                    return this.h[a]
                },
                remove: function (a) {
                    if (!this.h.hasOwnProperty(a)) return !1;
                    delete this.h[a];
                    return !0
                },
                keys: function () {
                    var a = [],
                        b;
                    for (b in this.h) this.h.hasOwnProperty(b) && a.push(+b);
                    return new vf(a)
                },
                iterator: function () {
                    return {
                        ref: this.h,
                        it: this.keys(),
                        hasNext: function () {
                            return this.it.hasNext()
                        },
                        next: function () {
                            var a = this.it.next();
                            return this.ref[a]
                        }
                    }
                },
                keyValueIterator: function () {
                    return new Gh(this)
                },
                __class__: Ec
            };
            var Hh = function (a, b) {
                this.item = a;
                this.next = b
            };
            h["haxe.ds._List.ListNode"] = Hh;
            Hh.__name__ = "haxe.ds._List.ListNode";
            Hh.prototype = {
                __class__: Hh
            };
            var wk = function (a) {
                this.head = a
            };
            h["haxe.ds._List.ListIterator"] = wk;
            wk.__name__ = "haxe.ds._List.ListIterator";
            wk.prototype = {
                hasNext: function () {
                    return null != this.head
                },
                next: function () {
                    var a = this.head.item;
                    this.head = this.head.next;
                    return a
                },
                __class__: wk
            };
            var ab = function () {
                this.h = Object.create(null)
            };
            h["haxe.ds.StringMap"] = ab;
            ab.__name__ = "haxe.ds.StringMap";
            ab.__interfaces__ = [na];
            ab.prototype = {
                get: function (a) {
                    return this.h[a]
                },
                set: function (a, b) {
                    this.h[a] = b
                },
                remove: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.h, a) ? (delete this.h[a], !0) : !1
                },
                keys: function () {
                    return new Kh(this.h)
                },
                keyValueIterator: function () {
                    return new Xk(this.h)
                },
                __class__: ab
            };
            var Kh = function (a) {
                this.h = a;
                this.keys = Object.keys(a);
                this.length = this.keys.length;
                this.current = 0
            };
            h["haxe.ds._StringMap.StringMapKeyIterator"] = Kh;
            Kh.__name__ = "haxe.ds._StringMap.StringMapKeyIterator";
            Kh.prototype = {
                hasNext: function () {
                    return this.current < this.length
                },
                next: function () {
                    return this.keys[this.current++]
                },
                __class__: Kh
            };
            var Xk = function (a) {
                this.h = a;
                this.keys = Object.keys(a);
                this.length = this.keys.length;
                this.current = 0
            };
            h["haxe.ds._StringMap.StringMapKeyValueIterator"] = Xk;
            Xk.__name__ = "haxe.ds._StringMap.StringMapKeyValueIterator";
            Xk.prototype = {
                hasNext: function () {
                    return this.current < this.length
                },
                next: function () {
                    var a = this.keys[this.current++];
                    return {
                        key: a,
                        value: this.h[a]
                    }
                },
                __class__: Xk
            };
            var zg =
                function (a, b, c) {
                    aa.call(this, a, b);
                    this.posInfos = null == c ? {

                        className: "(unknown)",
                        methodName: "(unknown)"
                    } : c;
                    this.__skipStack++
                };
            h["haxe.exceptions.PosException"] = zg;
            zg.__name__ = "haxe.exceptions.PosException";
            zg.__super__ = aa;
            zg.prototype = w(aa.prototype, {
                toString: function () {
                    return "" + aa.prototype.toString.call(this) + " in " + this.posInfos.className + "." + this.posInfos.methodName
                },
                __class__: zg
            });
            var Zi = function (a, b,
                               c) {
                null == a && (a = "Not implemented");
                zg.call(this, a, b, c);
                this.__skipStack++
            };
            h["haxe.exceptions.NotImplementedException"] = Zi;
            Zi.__name__ = "haxe.exceptions.NotImplementedException";
            Zi.__super__ = zg;
            Zi.prototype = w(zg.prototype, {
                __class__: Zi
            });
            var $i = function () {
                this.size = this.pos = 0
            };
            h["haxe.io.BytesBuffer"] = $i;
            $i.__name__ = "haxe.io.BytesBuffer";
            $i.prototype = {
                addByte: function (a) {
                    this.pos == this.size && this.grow(1);
                    this.view.setUint8(this.pos++, a)
                },
                add: function (a) {
                    this.pos + a.length > this.size && this.grow(a.length);
                    if (0 != this.size) {
                        var b = new Uint8Array(a.b.buffer, a.b.byteOffset, a.length);
                        this.u8.set(b, this.pos);
                        this.pos += a.length
                    }
                },
                addBytes: function (a, b, c) {
                    if (0 > b || 0 > c || b + c > a.length) throw aa.thrown(ne.OutsideBounds);
                    this.pos + c > this.size && this.grow(c);
                    0 != this.size && (a = new Uint8Array(a.b.buffer, a.b.byteOffset + b, c), this.u8.set(a, this.pos), this.pos += c)
                },
                grow: function (a) {
                    var b = this.pos + a;
                    for (a = 0 == this.size ? 16 : this.size; a < b;) a = 3 * a >> 1;
                    b = new ArrayBuffer(a);
                    var c = new Uint8Array(b);
                    0 < this.size && c.set(this.u8);
                    this.size =
                        a;
                    this.buffer = b;
                    this.u8 = c;
                    this.view = new DataView(this.buffer)
                },
                getBytes: function () {
                    if (0 == this.size) return new Db(new ArrayBuffer(0));
                    var a = new Db(this.buffer);
                    a.length = this.pos;
                    return a
                },
                __class__: $i
            };
            var aj = function () {
            };
            h["haxe.io.Input"] = aj;
            aj.__name__ = "haxe.io.Input";
            aj.prototype = {
                readByte: function () {
                    throw new Zi(null, null, {

                        className: "haxe.io.Input",
                        methodName: "readByte"
                    });
                },
                readBytes: function (a, b, c) {
                    var d = c,
                        g = a.b;
                    if (0 > b || 0 > c || b + c > a.length) throw aa.thrown(ne.OutsideBounds);
                    try {
                        for (; 0 < d;) g[b] = this.readByte(), ++b, --d
                    } catch (f) {
                        if (Ha.lastError = f, !(aa.caught(f).unwrap() instanceof jh)) throw f;
                    }
                    return c - d
                },
                readFullBytes: function (a, b, c) {
                    for (; 0 < c;) {
                        var d = this.readBytes(a, b, c);
                        if (0 == d) throw aa.thrown(ne.Blocked);
                        b += d;
                        c -= d
                    }
                },
                read: function (a) {
                    for (var b = new Db(new ArrayBuffer(a)), c = 0; 0 < a;) {
                        var d = this.readBytes(b, c, a);
                        if (0 == d) throw aa.thrown(ne.Blocked);
                        c += d;
                        a -= d
                    }
                    return b
                },
                readInt16: function () {
                    var a = this.readByte(),
                        b = this.readByte();
                    a = this.bigEndian ? b | a << 8 : a | b << 8;
                    return 0 != (a & 32768) ?
                        a - 65536 : a
                },
                readUInt16: function () {
                    var a = this.readByte(),
                        b = this.readByte();
                    return this.bigEndian ? b | a << 8 : a | b << 8
                },
                readInt32: function () {
                    var a = this.readByte(),
                        b = this.readByte(),
                        c = this.readByte(),
                        d = this.readByte();
                    return this.bigEndian ? d | c << 8 | b << 16 | a << 24 : a | b << 8 | c << 16 | d << 24
                },
                readString: function (a, b) {
                    var c = new Db(new ArrayBuffer(a));
                    this.readFullBytes(c, 0, a);
                    return c.getString(0, a, b)
                },
                __class__: aj
            };
            var bj = function (a, b, c) {
                null == b && (b = 0);
                null == c && (c = a.length - b);
                if (0 > b || 0 > c || b + c > a.length) throw aa.thrown(ne.OutsideBounds);
                this.b = a.b;
                this.pos = b;
                this.totlen = this.len = c
            };
            h["haxe.io.BytesInput"] = bj;
            bj.__name__ = "haxe.io.BytesInput";
            bj.__super__ = aj;
            bj.prototype = w(aj.prototype, {
                readByte: function () {
                    if (0 == this.len) throw aa.thrown(new jh);
                    this.len--;
                    return this.b[this.pos++]
                },
                readBytes: function (a, b, c) {
                    if (0 > b || 0 > c || b + c > a.length) throw aa.thrown(ne.OutsideBounds);
                    if (0 == this.len && 0 < c) throw aa.thrown(new jh);
                    this.len < c && (c = this.len);
                    var d = this.b;
                    a = a.b;
                    for (var g = 0, f = c; g < f;) {
                        var k = g++;
                        a[b + k] = d[this.pos + k]
                    }
                    this.pos += c;
                    this.len -= c;
                    return c
                },
                __class__: bj
            });
            var jh = function () {
            };
            h["haxe.io.Eof"] = jh;
            jh.__name__ = "haxe.io.Eof";
            jh.prototype = {
                toString: function () {
                    return "Eof"
                },
                __class__: jh
            };
            var ne = N["haxe.io.Error"] = {
                __ename__: "haxe.io.Error",
                __constructs__: null,
                Blocked: {
                    _hx_name: "Blocked",
                    _hx_index: 0,
                    __enum__: "haxe.io.Error",
                    toString: u
                },
                Overflow: {
                    _hx_name: "Overflow",
                    _hx_index: 1,
                    __enum__: "haxe.io.Error",
                    toString: u
                },
                OutsideBounds: {
                    _hx_name: "OutsideBounds",
                    _hx_index: 2,
                    __enum__: "haxe.io.Error",
                    toString: u
                },
                Custom: (H = function (a) {
                    return {
                        _hx_index: 3,
                        e: a,
                        __enum__: "haxe.io.Error",
                        toString: u
                    }
                }, H._hx_name = "Custom", H.__params__ = ["e"], H)
            };
            ne.__constructs__ = [ne.Blocked, ne.Overflow, ne.OutsideBounds, ne.Custom];
            var ym = {
                    fromBytes: function (a, b, c) {
                        null == b && (b = 0);
                        null == c && (c = a.length - b >> 2);
                        return new Float32Array(a.b.bufferValue, b, c)
                    }
                },
                Rd = function (a) {
                    switch (a) {
                        case ".":
                        case "..":
                            this.dir = a;
                            this.file = "";
                            return
                    }
                    var b = a.lastIndexOf("/"),
                        c = a.lastIndexOf("\\");
                    b < c ? (this.dir = M.substr(a, 0, c), a = M.substr(a, c + 1, null), this.backslash = !0) : c < b ? (this.dir = M.substr(a, 0, b),
                        a = M.substr(a, b + 1, null)) : this.dir = null;
                    b = a.lastIndexOf(".");
                    -
                        1 != b ? (this.ext = M.substr(a, b + 1, null), this.file = M.substr(a, 0, b)) : (this.ext = null, this.file = a)
                };
            h["haxe.io.Path"] = Rd;
            Rd.__name__ = "haxe.io.Path";
            Rd.withoutDirectory = function (a) {
                a = new Rd(a);
                a.dir = null;
                return a.toString()
            };
            Rd.directory = function (a) {
                a = new Rd(a);
                return null == a.dir ? "" : a.dir
            };
            Rd.extension = function (a) {
                a = new Rd(a);
                return null == a.ext ? "" : a.ext
            };
            Rd.prototype = {
                toString: function () {
                    return (null == this.dir ? "" : this.dir + (this.backslash ? "\\" : "/")) +
                        this.file + (null == this.ext ? "" : "." + this.ext)
                },
                __class__: Rd
            };
            var vf = function (a) {
                this.current = 0;
                this.array = a
            };
            h["haxe.iterators.ArrayIterator"] = vf;
            vf.__name__ = "haxe.iterators.ArrayIterator";
            vf.prototype = {
                hasNext: function () {
                    return this.current < this.array.length
                },
                next: function () {
                    return this.array[this.current++]
                },
                __class__: vf
            };
            var Gh = function (a) {
                this.map = a;
                this.keys = a.keys()
            };
            h["haxe.iterators.MapKeyValueIterator"] = Gh;
            Gh.__name__ = "haxe.iterators.MapKeyValueIterator";
            Gh.prototype = {
                hasNext: function () {
                    return this.keys.hasNext()
                },
                next: function () {
                    var a = this.keys.next();
                    return {
                        value: this.map.get(a),
                        key: a
                    }
                },
                __class__: Gh
            };
            var Sc = function (a, b, c) {
                this.xml = b;
                this.message = a;
                this.position = c;
                this.lineNumber = 1;
                for (a = this.positionAtLine = 0; a < c;) {
                    var d = a++;
                    d = b.charCodeAt(d);
                    10 == d ? (this.lineNumber++, this.positionAtLine = 0) : 13 != d && this.positionAtLine++
                }
            };
            h["haxe.xml.XmlParserException"] = Sc;
            Sc.__name__ = "haxe.xml.XmlParserException";
            Sc.prototype = {
                toString: function () {
                    return Ua.getClass(this).__name__ + ": " + this.message + " at line " + this.lineNumber +
                        " char " + this.positionAtLine
                },
                __class__: Sc
            };
            var bf = function () {
            };
            h["haxe.xml.Parser"] = bf;
            bf.__name__ = "haxe.xml.Parser";
            bf.parse = function (a, b) {
                null == b && (b = !1);
                var c = x.createDocument();
                bf.doParse(a, b, 0, c);
                return c
            };
            bf.doParse = function (a, b, c, d) {
                null == c && (c = 0);
                for (var g = null, f = 1, k = 1, q = null, l = 0, h = 0, n = 0, r = new fb, t = 1, p = -1; c < a.length;) {
                    var y = a.charCodeAt(c);
                    switch (f) {
                        case 0:
                            switch (y) {
                                case 9:
                                case 10:
                                case 13:
                                case 32:
                                    break;
                                default:
                                    f = k;
                                    continue
                            }
                            break;
                        case 1:
                            if (60 == y) f = 0, k = 2;
                            else {
                                l = c;
                                f = 13;
                                continue
                            }
                            break;
                        case 2:
                            switch (y) {
                                case 33:
                                    if (91 ==
                                        a.charCodeAt(c + 1)) {
                                        c += 2;
                                        if ("CDATA[" != M.substr(a, c, 6).toUpperCase()) throw aa.thrown(new Sc("Expected <![CDATA[", a, c));
                                        c += 5;
                                        f = 17
                                    } else if (68 == a.charCodeAt(c + 1) || 100 == a.charCodeAt(c + 1)) {
                                        if ("OCTYPE" != M.substr(a, c + 2, 6).toUpperCase()) throw aa.thrown(new Sc("Expected <!DOCTYPE", a, c));
                                        c += 8;
                                        f = 16
                                    } else {
                                        if (45 != a.charCodeAt(c + 1) || 45 != a.charCodeAt(c + 2)) throw aa.thrown(new Sc("Expected \x3c!--", a, c));
                                        c += 2;
                                        f = 15
                                    }
                                    l = c + 1;
                                    break;
                                case 47:
                                    if (null == d) throw aa.thrown(new Sc("Expected node name", a, c));
                                    l = c + 1;
                                    f = 0;
                                    k = 10;
                                    break;
                                case 63:
                                    f =
                                        14;
                                    l = c;
                                    break;
                                default:
                                    f = 3;
                                    l = c;
                                    continue
                            }
                            break;
                        case 3:
                            if (!(97 <= y && 122 >= y || 65 <= y && 90 >= y || 48 <= y && 57 >= y || 58 == y || 46 == y || 95 == y || 45 == y)) {
                                if (c == l) throw aa.thrown(new Sc("Expected node name", a, c));
                                g = x.createElement(M.substr(a, l, c - l));
                                d.addChild(g);
                                ++h;
                                f = 0;
                                k = 4;
                                continue
                            }
                            break;
                        case 4:
                            switch (y) {
                                case 47:
                                    f = 11;
                                    break;
                                case 62:
                                    f = 9;
                                    break;
                                default:
                                    f = 5;
                                    l = c;
                                    continue
                            }
                            break;
                        case 5:
                            if (!(97 <= y && 122 >= y || 65 <= y && 90 >= y || 48 <= y && 57 >= y || 58 == y || 46 == y || 95 == y || 45 == y)) {
                                if (l == c) throw aa.thrown(new Sc("Expected attribute name", a, c));
                                q = M.substr(a,
                                    l, c - l);
                                if (g.exists(q)) throw aa.thrown(new Sc("Duplicate attribute [" + q + "]", a, c));
                                f = 0;
                                k = 6;
                                continue
                            }
                            break;
                        case 6:
                            if (61 == y) f = 0, k = 7;
                            else throw aa.thrown(new Sc("Expected =", a, c));
                            break;
                        case 7:
                            switch (y) {
                                case 34:
                                case 39:
                                    r = new fb;
                                    f = 8;
                                    l = c + 1;
                                    p = y;
                                    break;
                                default:
                                    throw aa.thrown(new Sc('Expected "', a, c));
                            }
                            break;
                        case 8:
                            switch (y) {
                                case 38:
                                    t = c - l;
                                    r.b += null == t ? M.substr(a, l, null) : M.substr(a, l, t);
                                    f = 18;
                                    t = 8;
                                    l = c + 1;
                                    break;
                                case 60:
                                case 62:
                                    if (b) throw aa.thrown(new Sc("Invalid unescaped " + String.fromCodePoint(y) + " in attribute value",
                                        a, c));
                                    y == p && (k = c - l, r.b += null == k ? M.substr(a, l, null) : M.substr(a, l, k), k = r.b, r = new fb, g.set(q, k), f = 0, k = 4);
                                    break;
                                default:
                                    y == p && (k = c - l, r.b += null == k ? M.substr(a, l, null) : M.substr(a, l, k), k = r.b, r = new fb, g.set(q, k), f = 0, k = 4)
                            }
                            break;
                        case 9:
                            l = c = bf.doParse(a, b, c, g);
                            f = 1;
                            break;
                        case 10:
                            if (!(97 <= y && 122 >= y || 65 <= y && 90 >= y || 48 <= y && 57 >= y || 58 == y || 46 == y || 95 == y || 45 == y)) {
                                if (l == c) throw aa.thrown(new Sc("Expected node name", a, c));
                                k = M.substr(a, l, c - l);
                                if (null == d || 0 != d.nodeType) throw aa.thrown(new Sc("Unexpected </" + k + ">, tag is not open",
                                    a, c));
                                if (d.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element but found " + (null == d.nodeType ? "null" : O.toString(d.nodeType)));
                                if (k != d.nodeName) {
                                    if (d.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element but found " + (null == d.nodeType ? "null" : O.toString(d.nodeType)));
                                    throw aa.thrown(new Sc("Expected </" + d.nodeName + ">", a, c));
                                }
                                f = 0;
                                k = 12;
                                continue
                            }
                            break;
                        case 11:
                            if (62 == y) f = 1;
                            else throw aa.thrown(new Sc("Expected >", a, c));
                            break;
                        case 12:
                            if (62 == y) return 0 == h && d.addChild(x.createPCData("")),
                                c;
                            throw aa.thrown(new Sc("Expected >", a, c));
                        case 13:
                            60 == y ? (k = c - l, r.b += null == k ? M.substr(a, l, null) : M.substr(a, l, k), k = x.createPCData(r.b), r = new fb, d.addChild(k), ++h, f = 0, k = 2) : 38 == y && (t = c - l, r.b += null == t ? M.substr(a, l, null) : M.substr(a, l, t), f = 18, t = 13, l = c + 1);
                            break;
                        case 14:
                            63 == y && 62 == a.charCodeAt(c + 1) && (++c, f = M.substr(a, l + 1, c - l - 2), d.addChild(x.createProcessingInstruction(f)), ++h, f = 1);
                            break;
                        case 15:
                            45 == y && 45 == a.charCodeAt(c + 1) && 62 == a.charCodeAt(c + 2) && (d.addChild(x.createComment(M.substr(a, l, c - l))), ++h, c += 2,
                                f = 1);
                            break;
                        case 16:
                            91 == y ? ++n : 93 == y ? --n : 62 == y && 0 == n && (d.addChild(x.createDocType(M.substr(a, l, c - l))), ++h, f = 1);
                            break;
                        case 17:
                            93 == y && 93 == a.charCodeAt(c + 1) && 62 == a.charCodeAt(c + 2) && (f = x.createCData(M.substr(a, l, c - l)), d.addChild(f), ++h, c += 2, f = 1);
                            break;
                        case 18:
                            if (59 == y) {
                                l = M.substr(a, l, c - l);
                                if (35 == l.charCodeAt(0)) l = 120 == l.charCodeAt(1) ? E.parseInt("0" + M.substr(l, 1, l.length - 1)) : E.parseInt(M.substr(l, 1, l.length - 1)), r.b += String.fromCodePoint(l);
                                else if (Object.prototype.hasOwnProperty.call(bf.escapes.h, l)) r.b +=
                                    E.string(bf.escapes.h[l]);
                                else {
                                    if (b) throw aa.thrown(new Sc("Undefined entity: " + l, a, c));
                                    r.b += E.string("&" + l + ";")
                                }
                                l = c + 1;
                                f = t
                            } else if (!(97 <= y && 122 >= y || 65 <= y && 90 >= y || 48 <= y && 57 >= y || 58 == y || 46 == y || 95 == y || 45 == y) && 35 != y) {
                                if (b) throw aa.thrown(new Sc("Invalid character in entity: " + String.fromCodePoint(y), a, c));
                                r.b += String.fromCodePoint(38);
                                f = c - l;
                                r.b += null == f ? M.substr(a, l, null) : M.substr(a, l, f);
                                --c;
                                l = c + 1;
                                f = t
                            }
                    }
                    ++c
                }
                1 == f && (l = c, f = 13);
                if (13 == f) {
                    if (0 == d.nodeType) {
                        if (d.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element but found " +
                            (null == d.nodeType ? "null" : O.toString(d.nodeType)));
                        throw aa.thrown(new Sc("Unclosed node <" + d.nodeName + ">", a, c));
                    }
                    if (c != l || 0 == h) t = c - l, r.b += null == t ? M.substr(a, l, null) : M.substr(a, l, t), d.addChild(x.createPCData(r.b));
                    return c
                }
                if (!b && 18 == f && 13 == t) return r.b += String.fromCodePoint(38), t = c - l, r.b += null == t ? M.substr(a, l, null) : M.substr(a, l, t), d.addChild(x.createPCData(r.b)), c;
                throw aa.thrown(new Sc("Unexpected end", a, c));
            };
            var Ke = function (a) {
                this.output = new fb;
                this.pretty = a
            };
            h["haxe.xml.Printer"] = Ke;
            Ke.__name__ =
                "haxe.xml.Printer";
            Ke.print = function (a, b) {
                null == b && (b = !1);
                b = new Ke(b);
                b.writeNode(a, "");
                return b.output.b
            };
            Ke.prototype = {
                writeNode: function (a, b) {
                    switch (a.nodeType) {
                        case 0:
                            this.output.b += E.string(b + "<");
                            if (a.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element but found " + (null == a.nodeType ? "null" : O.toString(a.nodeType)));
                            this.output.b += E.string(a.nodeName);
                            for (var c = a.attributes(); c.hasNext();) {
                                var d = c.next();
                                this.output.b += E.string(" " + d + '="');
                                d = T.htmlEscape(a.get(d), !0);
                                this.output.b +=
                                    E.string(d);
                                this.output.b += '"'
                            }
                            if (this.hasChildren(a)) {
                                this.output.b += ">";
                                this.pretty && (this.output.b += "\n");
                                if (a.nodeType != x.Document && a.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element or Document but found " + (null == a.nodeType ? "null" : O.toString(a.nodeType)));
                                c = 0;
                                for (d = a.children; c < d.length;) {
                                    var g = d[c++];
                                    this.writeNode(g, this.pretty ? b + "\t" : b)
                                }
                                this.output.b += E.string(b + "</");
                                if (a.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element but found " + (null == a.nodeType ?
                                    "null" : O.toString(a.nodeType)));
                                this.output.b += E.string(a.nodeName);
                                this.output.b += ">"
                            } else this.output.b += "/>";
                            this.pretty && (this.output.b += "\n");
                            break;
                        case 1:
                            if (a.nodeType == x.Document || a.nodeType == x.Element) throw aa.thrown("Bad node type, unexpected " + (null == a.nodeType ? "null" : O.toString(a.nodeType)));
                            a = a.nodeValue;
                            0 != a.length && (d = b + T.htmlEscape(a), this.output.b += E.string(d), this.pretty && (this.output.b += "\n"));
                            break;
                        case 2:
                            this.output.b += E.string(b + "<![CDATA[");
                            if (a.nodeType == x.Document || a.nodeType ==
                                x.Element) throw aa.thrown("Bad node type, unexpected " + (null == a.nodeType ? "null" : O.toString(a.nodeType)));
                            this.output.b += E.string(a.nodeValue);
                            this.output.b += "]]\x3e";
                            this.pretty && (this.output.b += "\n");
                            break;
                        case 3:
                            if (a.nodeType == x.Document || a.nodeType == x.Element) throw aa.thrown("Bad node type, unexpected " + (null == a.nodeType ? "null" : O.toString(a.nodeType)));
                            a = a.nodeValue;
                            a = a.replace(/[\n\r\t]+/g, "");
                            this.output.b += null == b ? "null" : "" + b;
                            d = T.trim("\x3c!--" + a + "--\x3e");
                            this.output.b += E.string(d);
                            this.pretty &&
                            (this.output.b += "\n");
                            break;
                        case 4:
                            if (a.nodeType == x.Document || a.nodeType == x.Element) throw aa.thrown("Bad node type, unexpected " + (null == a.nodeType ? "null" : O.toString(a.nodeType)));
                            this.output.b += E.string("<!DOCTYPE " + a.nodeValue + ">");
                            this.pretty && (this.output.b += "\n");
                            break;
                        case 5:
                            if (a.nodeType == x.Document || a.nodeType == x.Element) throw aa.thrown("Bad node type, unexpected " + (null == a.nodeType ? "null" : O.toString(a.nodeType)));
                            this.output.b += E.string("<?" + a.nodeValue + "?>");
                            this.pretty && (this.output.b +=
                                "\n");
                            break;
                        case 6:
                            if (a.nodeType != x.Document && a.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element or Document but found " + (null == a.nodeType ? "null" : O.toString(a.nodeType)));
                            c = 0;
                            for (d = a.children; c < d.length;) g = d[c++], this.writeNode(g, b)
                    }
                },
                hasChildren: function (a) {
                    if (a.nodeType != x.Document && a.nodeType != x.Element) throw aa.thrown("Bad node type, expected Element or Document but found " + (null == a.nodeType ? "null" : O.toString(a.nodeType)));
                    var b = 0;
                    for (a = a.children; b < a.length;) {
                        var c = a[b++];
                        switch (c.nodeType) {
                            case 0:
                            case 1:
                                return !0;
                            case 2:
                            case 3:
                                if (c.nodeType == x.Document || c.nodeType == x.Element) throw aa.thrown("Bad node type, unexpected " + (null == c.nodeType ? "null" : O.toString(c.nodeType)));
                                if (0 != T.ltrim(c.nodeValue).length) return !0
                        }
                    }
                    return !1
                },
                __class__: Ke
            };
            var Ag = N["haxe.zip.ExtraField"] = {
                __ename__: "haxe.zip.ExtraField",
                __constructs__: null,
                FUnknown: (H = function (a, b) {
                    return {
                        _hx_index: 0,
                        tag: a,
                        bytes: b,
                        __enum__: "haxe.zip.ExtraField",
                        toString: u
                    }
                }, H._hx_name = "FUnknown", H.__params__ = ["tag", "bytes"],
                    H),
                FInfoZipUnicodePath: (H = function (a, b) {
                    return {
                        _hx_index: 1,
                        name: a,
                        crc: b,
                        __enum__: "haxe.zip.ExtraField",
                        toString: u
                    }
                }, H._hx_name = "FInfoZipUnicodePath", H.__params__ = ["name", "crc"], H),
                FUtf8: {
                    _hx_name: "FUtf8",
                    _hx_index: 2,
                    __enum__: "haxe.zip.ExtraField",
                    toString: u
                }
            };
            Ag.__constructs__ = [Ag.FUnknown, Ag.FInfoZipUnicodePath, Ag.FUtf8];
            var oe = N["haxe.zip.Huffman"] = {
                __ename__: "haxe.zip.Huffman",
                __constructs__: null,
                Found: (H = function (a) {
                    return {
                        _hx_index: 0,
                        i: a,
                        __enum__: "haxe.zip.Huffman",
                        toString: u
                    }
                }, H._hx_name = "Found",
                    H.__params__ = ["i"], H),
                NeedBit: (H = function (a, b) {
                    return {
                        _hx_index: 1,
                        left: a,
                        right: b,
                        __enum__: "haxe.zip.Huffman",
                        toString: u
                    }
                }, H._hx_name = "NeedBit", H.__params__ = ["left", "right"], H),
                NeedBits: (H = function (a, b) {
                    return {
                        _hx_index: 2,
                        n: a,
                        table: b,
                        __enum__: "haxe.zip.Huffman",
                        toString: u
                    }
                }, H._hx_name = "NeedBits", H.__params__ = ["n", "table"], H)
            };
            oe.__constructs__ = [oe.Found, oe.NeedBit, oe.NeedBits];
            var Yk = function () {
            };
            h["haxe.zip.HuffTools"] = Yk;
            Yk.__name__ = "haxe.zip.HuffTools";
            Yk.prototype = {
                treeDepth: function (a) {
                    switch (a._hx_index) {
                        case 0:
                            return 0;
                        case 1:
                            var b = a.right;
                            a = this.treeDepth(a.left);
                            b = this.treeDepth(b);
                            return 1 + (a < b ? a : b);
                        case 2:
                            throw aa.thrown("assert");
                    }
                },
                treeCompress: function (a) {
                    var b = this.treeDepth(a);
                    if (0 == b) return a;
                    if (1 == b) {
                        if (1 == a._hx_index) return b = a.right, oe.NeedBit(this.treeCompress(a.left), this.treeCompress(b));
                        throw aa.thrown("assert");
                    }
                    for (var c = [], d = 0, g = 1 << b; d < g;) d++, c.push(oe.Found(-1));
                    this.treeWalk(c, 0, 0, b, a);
                    return oe.NeedBits(b, c)
                },
                treeWalk: function (a, b, c, d, g) {
                    if (1 == g._hx_index) {
                        var f = g.left,
                            k = g.right;
                        0 < d ? (this.treeWalk(a,
                            b, c + 1, d - 1, f), this.treeWalk(a, b | 1 << c, c + 1, d - 1, k)) : a[b] = this.treeCompress(g)
                    } else a[b] = this.treeCompress(g)
                },
                treeMake: function (a, b, c, d) {
                    if (d > b) throw aa.thrown("Invalid huffman");
                    var g = c << 5 | d;
                    if (a.h.hasOwnProperty(g)) return oe.Found(a.h[g]);
                    c <<= 1;
                    ++d;
                    return oe.NeedBit(this.treeMake(a, b, c, d), this.treeMake(a, b, c | 1, d))
                },
                make: function (a, b, c, d) {
                    if (1 == c) return oe.NeedBit(oe.Found(0), oe.Found(0));
                    var g = [],
                        f = [];
                    if (32 < d) throw aa.thrown("Invalid huffman");
                    for (var k = 0, q = d; k < q;) k++, g.push(0), f.push(0);
                    k = 0;
                    for (q =
                             c; k < q;) {
                        var l = k++;
                        l = a[l + b];
                        if (l >= d) throw aa.thrown("Invalid huffman");
                        g[l]++
                    }
                    var h = 0;
                    k = 1;
                    for (q = d - 1; k < q;) l = k++, h = h + g[l] << 1, f[l] = h;
                    g = new Ec;
                    k = 0;
                    for (q = c; k < q;) l = k++, c = a[l + b], 0 != c && (h = f[c - 1], f[c - 1] = h + 1, g.h[h << 5 | c] = l);
                    return this.treeCompress(oe.NeedBit(this.treeMake(g, d, 0, 1), this.treeMake(g, d, 1, 1)))
                },
                __class__: Yk
            };
            var Zk = function (a) {
                this.buffer = new Db(new ArrayBuffer(65536));
                this.pos = 0;
                a && (this.crc = new yg)
            };
            h["haxe.zip._InflateImpl.Window"] = Zk;
            Zk.__name__ = "haxe.zip._InflateImpl.Window";
            Zk.prototype = {
                slide: function () {
                    null !=
                    this.crc && this.crc.update(this.buffer, 0, 32768);
                    var a = new Db(new ArrayBuffer(65536));
                    this.pos -= 32768;
                    a.blit(0, this.buffer, 32768, this.pos);
                    this.buffer = a
                },
                addBytes: function (a, b, c) {
                    65536 < this.pos + c && this.slide();
                    this.buffer.blit(this.pos, a, b, c);
                    this.pos += c
                },
                addByte: function (a) {
                    65536 == this.pos && this.slide();
                    this.buffer.b[this.pos] = a;
                    this.pos++
                },
                getLastChar: function () {
                    return this.buffer.b[this.pos - 1]
                },
                available: function () {
                    return this.pos
                },
                checksum: function () {
                    null != this.crc && this.crc.update(this.buffer,
                        0, this.pos);
                    return this.crc
                },
                __class__: Zk
            };
            var Kc = N["haxe.zip._InflateImpl.State"] = {
                __ename__: "haxe.zip._InflateImpl.State",
                __constructs__: null,
                Head: {
                    _hx_name: "Head",
                    _hx_index: 0,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: u
                },
                Block: {
                    _hx_name: "Block",
                    _hx_index: 1,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: u
                },
                CData: {
                    _hx_name: "CData",
                    _hx_index: 2,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: u
                },
                Flat: {
                    _hx_name: "Flat",
                    _hx_index: 3,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: u
                },
                Crc: {
                    _hx_name: "Crc",
                    _hx_index: 4,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: u
                },
                Dist: {
                    _hx_name: "Dist",
                    _hx_index: 5,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: u
                },
                DistOne: {
                    _hx_name: "DistOne",
                    _hx_index: 6,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: u
                },
                Done: {
                    _hx_name: "Done",
                    _hx_index: 7,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: u
                }
            };
            Kc.__constructs__ = [Kc.Head, Kc.Block, Kc.CData, Kc.Flat, Kc.Crc, Kc.Dist, Kc.DistOne, Kc.Done];
            var dd = function (a, b, c) {
                null == c && (c = !0);
                null == b && (b = !0);
                this.isFinal = !1;
                this.htools = new Yk;
                this.huffman = this.buildFixedHuffman();
                this.huffdist = null;
                this.dist = this.len = 0;
                this.state = b ? Kc.Head : Kc.Block;
                this.input = a;
                this.needed = this.nbits = this.bits = 0;
                this.output = null;
                this.outpos = 0;
                this.lengths = [];
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.window = new Zk(c)
            };
            h["haxe.zip.InflateImpl"] = dd;
            dd.__name__ = "haxe.zip.InflateImpl";
            dd.prototype = {
                buildFixedHuffman: function () {
                    if (null != dd.FIXED_HUFFMAN) return dd.FIXED_HUFFMAN;
                    for (var a = [], b = 0; 288 > b;) {
                        var c = b++;
                        a.push(143 >= c ? 8 : 255 >= c ? 9 : 279 >= c ? 7 : 8)
                    }
                    dd.FIXED_HUFFMAN = this.htools.make(a, 0, 288, 10);
                    return dd.FIXED_HUFFMAN
                },
                readBytes: function (a, b, c) {
                    this.needed = c;
                    this.outpos = b;
                    this.output = a;
                    if (0 < c)
                        for (; this.inflateLoop();) ;
                    return c - this.needed
                },
                getBits: function (a) {
                    for (; this.nbits < a;) this.bits |= this.input.readByte() << this.nbits, this.nbits += 8;
                    var b = this.bits & (1 << a) - 1;
                    this.nbits -= a;
                    this.bits >>= a;
                    return b
                },
                getBit: function () {
                    0 == this.nbits && (this.nbits = 8, this.bits = this.input.readByte());
                    var a = 1 == (this.bits & 1);
                    this.nbits--;
                    this.bits >>= 1;
                    return a
                },
                getRevBits: function (a) {
                    return 0 == a ? 0 : this.getBit() ? 1 << a - 1 | this.getRevBits(a - 1) : this.getRevBits(a - 1)
                },
                resetBits: function () {
                    this.nbits = this.bits = 0
                },
                addBytes: function (a, b, c) {
                    this.window.addBytes(a, b, c);
                    this.output.blit(this.outpos, a, b, c);
                    this.needed -= c;
                    this.outpos += c
                },
                addByte: function (a) {
                    this.window.addByte(a);
                    this.output.b[this.outpos] = a;
                    this.needed--;
                    this.outpos++
                },
                addDistOne: function (a) {
                    for (var b = this.window.getLastChar(), c = 0; c < a;) c++, this.addByte(b)
                },
                addDist: function (a, b) {
                    this.addBytes(this.window.buffer, this.window.pos - a, b)
                },
                applyHuffman: function (a) {
                    switch (a._hx_index) {
                        case 0:
                            var b = a.i;
                            return b;
                        case 1:
                            return b = a.left, a = a.right, this.applyHuffman(this.getBit() ?
                                a : b);
                        case 2:
                            return b = a.n, this.applyHuffman(a.table[this.getBits(b)])
                    }
                },
                inflateLengths: function (a, b) {
                    for (var c = 0, d = 0; c < b;) {
                        var g = this.applyHuffman(this.huffman);
                        switch (g) {
                            case 0:
                            case 1:
                            case 2:
                            case 3:
                            case 4:
                            case 5:
                            case 6:
                            case 7:
                            case 8:
                            case 9:
                            case 10:
                            case 11:
                            case 12:
                            case 13:
                            case 14:
                            case 15:
                                d = g;
                                a[c] = g;
                                ++c;
                                break;
                            case 16:
                                g = c + 3 + this.getBits(2);
                                if (g > b) throw aa.thrown("Invalid data");
                                for (; c < g;) a[c] = d, ++c;
                                break;
                            case 17:
                                c += 3 + this.getBits(3);
                                if (c > b) throw aa.thrown("Invalid data");
                                break;
                            case 18:
                                c += 11 + this.getBits(7);
                                if (c > b) throw aa.thrown("Invalid data");
                                break;
                            default:
                                throw aa.thrown("Invalid data");
                        }
                    }
                },
                inflateLoop: function () {
                    switch (this.state._hx_index) {
                        case 0:
                            var a = this.input.readByte();
                            if (8 != (a & 15)) throw aa.thrown("Invalid data");
                            var b = this.input.readByte(),
                                c = 0 != (b & 32);
                            if (0 != ((a << 8) + b) % 31) throw aa.thrown("Invalid data");
                            if (c) throw aa.thrown("Unsupported dictionary");
                            this.state = Kc.Block;
                            return !0;
                        case 1:
                            switch (this.isFinal = this.getBit(), this.getBits(2)) {
                                case 0:
                                    this.len = this.input.readUInt16();
                                    if (this.input.readUInt16() !=
                                        65535 - this.len) throw aa.thrown("Invalid data");
                                    this.state = Kc.Flat;
                                    a = this.inflateLoop();
                                    this.resetBits();
                                    return a;
                                case 1:
                                    return this.huffman = this.buildFixedHuffman(), this.huffdist = null, this.state = Kc.CData, !0;
                                case 2:
                                    a = this.getBits(5) + 257;
                                    b = this.getBits(5) + 1;
                                    var d = this.getBits(4) + 4;
                                    c = 0;
                                    for (var g = d; c < g;) {
                                        var f = c++;
                                        this.lengths[dd.CODE_LENGTHS_POS[f]] = this.getBits(3)
                                    }
                                    c = d;
                                    for (g = 19; c < g;) f = c++, this.lengths[dd.CODE_LENGTHS_POS[f]] = 0;
                                    this.huffman = this.htools.make(this.lengths, 0, 19, 8);
                                    d = [];
                                    c = 0;
                                    for (g = a + b; c < g;) c++,
                                        d.push(0);
                                    this.inflateLengths(d, a + b);
                                    this.huffdist = this.htools.make(d, a, b, 16);
                                    this.huffman = this.htools.make(d, 0, a, 16);
                                    this.state = Kc.CData;
                                    return !0;
                                default:
                                    throw aa.thrown("Invalid data");
                            }
                        case 2:
                            b = this.applyHuffman(this.huffman);
                            if (256 > b) return this.addByte(b), 0 < this.needed;
                            if (256 == b) this.state = this.isFinal ? Kc.Crc : Kc.Block;
                            else {
                                b -= 257;
                                a = dd.LEN_EXTRA_BITS_TBL[b];
                                if (-1 == a) throw aa.thrown("Invalid data");
                                this.len = dd.LEN_BASE_VAL_TBL[b] + this.getBits(a);
                                b = null == this.huffdist ? this.getRevBits(5) : this.applyHuffman(this.huffdist);
                                a = dd.DIST_EXTRA_BITS_TBL[b];
                                if (-1 == a) throw aa.thrown("Invalid data");
                                this.dist = dd.DIST_BASE_VAL_TBL[b] + this.getBits(a);
                                if (this.dist > this.window.available()) throw aa.thrown("Invalid data");
                                this.state = 1 == this.dist ? Kc.DistOne : Kc.Dist
                            }
                            return !0;
                        case 3:
                            return a = this.len < this.needed ? this.len : this.needed, b = this.input.read(a), this.len -= a, this.addBytes(b, 0, a), 0 == this.len && (this.state = this.isFinal ? Kc.Crc : Kc.Block), 0 < this.needed;
                        case 4:
                            a = this.window.checksum();
                            if (null == a) return this.state = Kc.Done, !0;
                            b = yg.read(this.input);
                            if (!a.equals(b)) throw aa.thrown("Invalid CRC");
                            this.state = Kc.Done;
                            return !0;
                        case 5:
                            for (; 0 < this.len && 0 < this.needed;) a = this.len < this.dist ? this.len : this.dist, a = this.needed < a ? this.needed : a, this.addDist(this.dist, a), this.len -= a;
                            0 == this.len && (this.state = Kc.CData);
                            return 0 < this.needed;
                        case 6:
                            return a = this.len < this.needed ? this.len : this.needed, this.addDistOne(a), this.len -= a, 0 == this.len && (this.state = Kc.CData), 0 < this.needed;
                        case 7:
                            return !1
                    }
                },
                __class__: dd
            };
            var kh = function (a) {
                this.i = a
            };
            h["haxe.zip.Reader"] = kh;
            kh.__name__ = "haxe.zip.Reader";
            kh.readZip = function (a) {
                return (new kh(a)).read()
            };
            kh.prototype = {
                readZipDate: function () {
                    var a = this.i.readUInt16(),
                        b = a >> 11 & 31,
                        c = a >> 5 & 63;
                    a &= 31;
                    var d = this.i.readUInt16();
                    return new Date((d >> 9) + 1980, (d >> 5 & 15) - 1, d & 31, b, c, a << 1)
                },
                readExtraFields: function (a) {
                    for (var b = new jb; 0 < a;) {
                        if (4 > a) throw aa.thrown("Invalid extra fields data");
                        var c = this.i.readUInt16(),
                            d = this.i.readUInt16();
                        if (a < d) throw aa.thrown("Invalid extra fields data");
                        if (28789 == c) {
                            var g = this.i.readByte();
                            if (1 != g) {
                                var f =
                                    new $i;
                                f.addByte(g);
                                f.add(this.i.read(d - 1));
                                b.add(Ag.FUnknown(c, f.getBytes()))
                            } else c = this.i.readInt32(), g = this.i.read(d - 5).toString(), b.add(Ag.FInfoZipUnicodePath(g, c))
                        } else b.add(Ag.FUnknown(c, this.i.read(d)));
                        a -= 4 + d
                    }
                    return b
                },
                readEntryHeader: function () {
                    var a = this.i,
                        b = a.readInt32();
                    if (33639248 == b || 101010256 == b) return null;
                    if (67324752 != b) throw aa.thrown("Invalid Zip Data");
                    a.readUInt16();
                    b = a.readUInt16();
                    var c = 0 != (b & 2048);
                    if (0 != (b & 63473)) throw aa.thrown("Unsupported flags " + b);
                    var d = a.readUInt16(),
                        g = 0 != d;
                    if (g && 8 != d) throw aa.thrown("Unsupported compression " + d);
                    d = this.readZipDate();
                    var f = a.readInt32(),
                        k = a.readInt32(),
                        q = a.readInt32(),
                        l = a.readInt16(),
                        h = a.readInt16();
                    a = a.readString(l);
                    h = this.readExtraFields(h);
                    c && h.push(Ag.FUtf8);
                    0 != (b & 8) && (f = null);
                    return {
                        fileName: a,
                        fileSize: q,
                        fileTime: d,
                        compressed: g,
                        dataSize: k,
                        data: null,
                        crc32: f,
                        extraFields: h
                    }
                },
                read: function () {
                    for (var a = new jb, b = null; ;) {
                        var c = this.readEntryHeader();
                        if (null == c) break;
                        if (null == c.crc32) {
                            if (c.compressed) {
                                null == b && (b = new Db(new ArrayBuffer(65536)));
                                for (var d = new $i, g = new dd(this.i, !1, !1); ;) {
                                    var f = g.readBytes(b, 0, 65536);
                                    d.addBytes(b, 0, f);
                                    if (65536 > f) break
                                }
                                c.data = d.getBytes()
                            } else c.data = this.i.read(c.dataSize);
                            c.crc32 = this.i.readInt32();
                            134695760 == c.crc32 && (c.crc32 = this.i.readInt32());
                            c.dataSize = this.i.readInt32();
                            c.fileSize = this.i.readInt32();
                            c.dataSize = c.fileSize;
                            c.compressed = !1
                        } else c.data = this.i.read(c.dataSize);
                        a.add(c)
                    }
                    return a
                },
                __class__: kh
            };
            var lh = function () {
            };
            h["hxjson5.Undefined"] = lh;
            lh.__name__ = "hxjson5.Undefined";
            lh.prototype = {
                __class__: lh
            };
            var $k = function () {
            };
            h["hxjson5.Json5"] = $k;
            $k.__name__ = "hxjson5.Json5";
            var Wb = function (a, b) {
                this.type = a;
                this.value = b
            };
            h["hxjson5.Token"] = Wb;
            Wb.__name__ = "hxjson5.Token";
            Wb.prototype = {
                __class__: Wb
            };
            var al = function (a, b) {
                this.line = a;
                this.column = b
            };
            h["hxjson5.Json5PositionInfo"] = al;
            al.__name__ = "hxjson5.Json5PositionInfo";
            al.prototype = {
                __class__: al
            };
            var Jf = function () {
            };
            h["hxjson5.Parser"] = Jf;
            Jf.__name__ = "hxjson5.Parser";
            Jf.formatChar = function (a) {
                var b = Jf.replacements.h[a];
                return null != b ? b : 32 > a ? "\\x" + T.hex(a,
                    2).toLowerCase() : String.fromCodePoint(a)
            };
            Jf.prototype = {
                parse: function (a, b) {
                    this.source = a;
                    this.sourceLength = a.length;
                    this.parseState = 0;
                    this.stack = [];
                    this.pos = 0;
                    this.root = this.key = this.token = null;
                    this.rootIsNull = !0;
                    do
                        if (this.token = this.callLexState(), a = this.parseState, 10 == this.token.type) {
                            if (7 != a) throw b = this.getPosition(this.pos), this.syntaxError("JSON5: invalid end of input at " + b.line + ":" + b.column, b);
                        } else switch (a) {
                            case 0:
                                this.push();
                                break;
                            case 1:
                                switch (this.token.type) {
                                    case 2:
                                        this.pop();
                                        break;
                                    case 6:
                                    case 9:
                                        this.key = this.token.value, this.parseState = 2
                                }
                                break;
                            case 2:
                                this.parseState = 3;
                                break;
                            case 3:
                                this.push();
                                break;
                            case 4:
                                2 == this.token.type && 93 == this.token.value ? this.pop() : this.push();
                                break;
                            case 5:
                                switch (this.token.value) {
                                    case 44:
                                        this.parseState = 1;
                                        break;
                                    case 125:
                                        this.pop()
                                }
                                break;
                            case 6:
                                switch (this.token.value) {
                                    case 44:
                                        this.parseState = 4;
                                        break;
                                    case 93:
                                        this.pop()
                                }
                        }
                    while (10 != this.token.type);
                    return null != b ? this.internalize({
                        "": this.root
                    }, "", b) : this.root
                },
                internalize: function (a, b, c) {
                    var d = z.typeof(a);
                    switch (d._hx_index) {
                        case 0:
                            var g = null;
                            break;
                        case 6:
                            if (d.c == Array) {
                                var f;
                                g = a[E.parseInt(b)]
                            } else g = L.field(a, b);
                            break;
                        default:
                            g = L.field(a, b)
                    }
                    d = z.typeof(g);
                    switch (d._hx_index) {
                        case 4:
                            d = g;
                            var k = 0;
                            for (f = L.fields(d); k < f.length;) {
                                var q = f[k];
                                ++k;
                                var l = this.internalize(d, q, c);
                                l == $k.undefined ? L.deleteField(d, q) : d[q] = l
                            }
                            break;
                        case 6:
                            if (d.c == Array)
                                for (f = g, d = 0, k = f.length; d < k;) q = d++, l = this.internalize(f, null == q ? "null" : "" + q, c), f[q] = l == $k.undefined ? null : l
                    }
                    return c(b, g, a)
                },
                lexNumber: function (a, b, c) {
                    a = this.pos + a;
                    for (var d; ;) switch (d =
                        this.source.charCodeAt(this.pos), b) {
                        case 0:
                            this.pos++;
                            switch (d) {
                                case 46:
                                    b = 4;
                                    continue;
                                case 48:
                                    b = 1;
                                    continue;
                                case 49:
                                case 50:
                                case 51:
                                case 52:
                                case 53:
                                case 54:
                                case 55:
                                case 56:
                                case 57:
                                    b = 2;
                                    continue;
                                case 73:
                                    if (110 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(110);
                                    if (102 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(102);
                                    if (105 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(105);
                                    if (110 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(110);
                                    if (105 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(105);
                                    if (116 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(116);
                                    if (121 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(121);
                                    return new Wb(8, Infinity * c);
                                case 78:
                                    if (97 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(97);
                                    if (78 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(78);
                                    return new Wb(7, NaN)
                            }
                            throw this.invalidChar(d);
                        case 1:
                            switch (d) {
                                case 46:
                                    this.pos++;
                                    b = 3;
                                    continue;
                                case 69:
                                case 101:
                                    this.pos++;
                                    b = 6;
                                    continue;
                                case 88:
                                case 120:
                                    this.pos++;
                                    b = 9;
                                    continue
                            }
                            return new Wb(5,
                                0 * c);
                        case 2:
                            if (d == d) switch (d) {
                                case 46:
                                    this.pos++;
                                    b = 3;
                                    continue;
                                case 48:
                                case 49:
                                case 50:
                                case 51:
                                case 52:
                                case 53:
                                case 54:
                                case 55:
                                case 56:
                                case 57:
                                    this.pos++;
                                    continue;
                                case 69:
                                case 101:
                                    this.pos++;
                                    b = 6;
                                    continue
                            }
                            b = E.parseInt(M.substr(this.source, a, this.pos - a));
                            return new Wb(5, c * (4294967295 < b ? b : b & -1));
                        case 3:
                            switch (d) {
                                case 48:
                                case 49:
                                case 50:
                                case 51:
                                case 52:
                                case 53:
                                case 54:
                                case 55:
                                case 56:
                                case 57:
                                    this.pos++;
                                    b = 5;
                                    continue;
                                case 69:
                                case 101:
                                    this.pos++;
                                    b = 6;
                                    continue
                            }
                            return new Wb(5, c * parseFloat(M.substr(this.source,
                                a, this.pos - a)));
                        case 4:
                            switch (d) {
                                case 48:
                                case 49:
                                case 50:
                                case 51:
                                case 52:
                                case 53:
                                case 54:
                                case 55:
                                case 56:
                                case 57:
                                    this.pos++;
                                    b = 5;
                                    continue
                            }
                            throw this.invalidChar(d);
                        case 5:
                            switch (d) {
                                case 48:
                                case 49:
                                case 50:
                                case 51:
                                case 52:
                                case 53:
                                case 54:
                                case 55:
                                case 56:
                                case 57:
                                    this.pos++;
                                    continue;
                                case 69:
                                case 101:
                                    this.pos++;
                                    b = 6;
                                    continue
                            }
                            return new Wb(5, c * parseFloat(M.substr(this.source, a, this.pos - a)));
                        case 6:
                            switch (d) {
                                case 43:
                                case 45:
                                    this.pos++;
                                    b = 7;
                                    continue;
                                case 48:
                                case 49:
                                case 50:
                                case 51:
                                case 52:
                                case 53:
                                case 54:
                                case 55:
                                case 56:
                                case 57:
                                    this.pos++;
                                    b = 8;
                                    continue
                            }
                            throw this.invalidChar(d);
                        case 7:
                            switch (d) {
                                case 48:
                                case 49:
                                case 50:
                                case 51:
                                case 52:
                                case 53:
                                case 54:
                                case 55:
                                case 56:
                                case 57:
                                    this.pos++;
                                    b = 8;
                                    continue
                            }
                            throw this.invalidChar(d);
                        case 8:
                            if (48 <= d && 57 >= d) {
                                this.pos++;
                                continue
                            }
                            return new Wb(5, c * parseFloat(M.substr(this.source, a, this.pos - a)));
                        case 9:
                        case 10:
                            if (48 <= d && 57 >= d || 97 <= d && 102 >= d || 65 <= d && 70 >= d) this.pos++, b = 10;
                            else return b = E.parseInt(M.substr(this.source, a, this.pos - a)), new Wb(5, c * (4294967295 < b ? b : b & -1))
                    }
                },
                lexString: function (a, b) {
                    for (var c =
                        null, d = !0, g; ;) {
                        g = this.source.charCodeAt(this.pos);
                        switch (g) {
                            case 10:
                            case 13:
                                throw this.pos++, this.invalidChar(g);
                            case 34:
                                this.pos++;
                                if (b) {
                                    if (d) return new Wb(6, M.substr(this.source, a, this.pos - a - 1));
                                    c.b += M.substr(this.source, a, this.pos - a - 1);
                                    return new Wb(6, c.b)
                                }
                                continue;
                            case 39:
                                this.pos++;
                                if (!b) {
                                    if (d) return new Wb(6, M.substr(this.source, a, this.pos - a - 1));
                                    c.b += M.substr(this.source, a, this.pos - a - 1);
                                    return new Wb(6, c.b)
                                }
                                continue;
                            case 92:
                                this.pos++;
                                d && (c = new mh, d = !1);
                                c.b += M.substr(this.source, a, this.pos -
                                    a - 1);
                                a = this.source.charCodeAt(this.pos++);
                                switch (a) {
                                    case 13:
                                        10 == this.source.charCodeAt(this.pos) && this.pos++;
                                        a = "";
                                        break;
                                    case 48:
                                        a = this.source.charCodeAt(this.pos);
                                        if (48 <= a && 57 >= a) throw this.invalidChar(this.source.charCodeAt(this.pos++));
                                        a = "\x00";
                                        break;
                                    case 49:
                                    case 50:
                                    case 51:
                                    case 52:
                                    case 53:
                                    case 54:
                                    case 55:
                                    case 56:
                                    case 57:
                                        throw this.invalidChar(a);
                                    case 98:
                                        a = "\b";
                                        break;
                                    case 102:
                                        a = "\f";
                                        break;
                                    case 110:
                                        a = "\n";
                                        break;
                                    case 114:
                                        a = "\r";
                                        break;
                                    case 116:
                                        a = "\t";
                                        break;
                                    case 117:
                                        a = this.unicodeEscape();
                                        a = String.fromCodePoint(a);
                                        break;
                                    case 118:
                                        a = "\x0B";
                                        break;
                                    case 120:
                                        a = this.pos;
                                        g = this.source.charCodeAt(this.pos++);
                                        if (!(48 <= g && 57 >= g || 97 <= g && 102 >= g || 65 <= g && 70 >= g)) throw this.invalidChar(g);
                                        g = this.source.charCodeAt(this.pos++);
                                        if (!(48 <= g && 57 >= g || 97 <= g && 102 >= g || 65 <= g && 70 >= g)) throw this.invalidChar(g);
                                        a = E.parseInt("0x" + M.substr(this.source, a, 2));
                                        a = String.fromCodePoint(a);
                                        break;
                                    case 10:
                                    case 8232:
                                    case 8233:
                                        a = "";
                                        break;
                                    default:
                                        if (a != a) throw this.invalidChar(a);
                                        a = String.fromCodePoint(a)
                                }
                                c.b += a;
                                a = this.pos;
                                continue;
                            case 8232:
                            case 8233:
                                this.separatorChar(g)
                        }
                        if (g !=
                            g) throw this.pos++, this.invalidChar(g);
                        this.pos++
                    }
                },
                lexIdentifier: function (a, b) {
                    for (var c = null, d = !0, g; ;) switch (g = this.source.charCodeAt(this.pos), b) {
                        case 0:
                            this.pos++;
                            if (117 != g) throw this.invalidChar(g);
                            d && (c = new mh, d = !1);
                            c.b += M.substr(this.source, a, this.pos - a - 1);
                            a = this.unicodeEscape();
                            switch (a) {
                                case 36:
                                case 95:
                                    break;
                                default:
                                    if (!lf.isIdContinueChar(a)) throw c = this.getPosition(this.pos), c.column -= 5, this.syntaxError("JSON5: invalid identifier character at " + c.line + ":" + c.column, c);
                            }
                            a = String.fromCodePoint(a);
                            c.b += a;
                            a = this.pos;
                            b = 1;
                            break;
                        case 1:
                            switch (g) {
                                case 92:
                                    this.pos++;
                                    b = 2;
                                    continue;
                                case 36:
                                case 95:
                                case 8204:
                                case 8205:
                                    this.pos++;
                                    continue
                            }
                            if (lf.isIdContinueChar(g)) {
                                this.pos++;
                                continue
                            }
                            if (d) return new Wb(9, M.substr(this.source, a, this.pos - a));
                            c.b += M.substr(this.source, a, this.pos - a);
                            return new Wb(9, c.b);
                        case 2:
                            this.pos++;
                            if (117 != g) throw this.invalidChar(g);
                            d && (c = new mh, d = !1);
                            c.b += M.substr(this.source, a, this.pos - a - 1 - 1);
                            a = this.unicodeEscape();
                            switch (a) {
                                case 36:
                                case 95:
                                case 8204:
                                case 8205:
                                    break;
                                default:
                                    if (!lf.isIdContinueChar(a)) throw c =
                                        this.getPosition(this.pos), c.column -= 5, this.syntaxError("JSON5: invalid identifier character at " + c.line + ":" + c.column, c);
                            }
                            a = String.fromCodePoint(a);
                            c.b += a;
                            a = this.pos;
                            b = 1
                    }
                },
                callLexState: function () {
                    for (var a = 0, b; ;) switch (b = this.source.charCodeAt(this.pos), a) {
                        case 0:
                            switch (b) {
                                case 47:
                                    this.pos++;
                                    a = 1;
                                    continue;
                                case 9:
                                case 10:
                                case 11:
                                case 12:
                                case 13:
                                case 32:
                                case 160:
                                case 8232:
                                case 8233:
                                case 65279:
                                    this.pos++;
                                    continue;
                                default:
                                    if (b != b) return this.pos++, new Wb(10, 0)
                            }
                            if (lf.isSpaceSeparator(b)) {
                                this.pos++;
                                continue
                            }
                            switch (this.parseState) {
                                case 0:
                                    a =
                                        6;
                                    break;
                                case 1:
                                    a = 7;
                                    break;
                                case 2:
                                    a = 8;
                                    break;
                                case 3:
                                    a = 9;
                                    break;
                                case 4:
                                    a = 10;
                                    break;
                                case 5:
                                    a = 11;
                                    break;
                                case 6:
                                    a = 12;
                                    break;
                                default:
                                    a = 13
                            }
                            continue;
                        case 1:
                            this.pos++;
                            switch (b) {
                                case 42:
                                    a = 2;
                                    continue;
                                case 47:
                                    a = 4;
                                    continue
                            }
                            throw this.invalidChar(b);
                        case 2:
                            this.pos++;
                            if (42 == b) {
                                a = 3;
                                continue
                            }
                            if (b != b) throw this.invalidChar(b);
                            continue;
                        case 3:
                            this.pos++;
                            switch (b) {
                                case 42:
                                    continue;
                                case 47:
                                    a = 0;
                                    continue
                            }
                            if (b != b) throw this.invalidChar(b);
                            a = 2;
                            continue;
                        case 4:
                            this.pos++;
                            switch (b) {
                                case 10:
                                case 13:
                                case 8232:
                                case 8233:
                                    a = 0;
                                    continue
                            }
                            if (b !=
                                b) return new Wb(10, 0);
                            continue;
                        case 5:
                            this.pos++;
                            switch (b) {
                                case 34:
                                    return this.lexString(this.pos, !0);
                                case 39:
                                    return this.lexString(this.pos, !1);
                                case 43:
                                    return this.lexNumber(0, 0, 1);
                                case 45:
                                    return this.lexNumber(0, 0, -1);
                                case 46:
                                    return this.lexNumber(-1, 4, 1);
                                case 48:
                                    return this.lexNumber(-1, 1, 1);
                                case 49:
                                case 50:
                                case 51:
                                case 52:
                                case 53:
                                case 54:
                                case 55:
                                case 56:
                                case 57:
                                    return this.lexNumber(-1, 2, 1);
                                case 73:
                                    if (110 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(110);
                                    if (102 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(102);
                                    if (105 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(105);
                                    if (110 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(110);
                                    if (105 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(105);
                                    if (116 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(116);
                                    if (121 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(121);
                                    return new Wb(8, Infinity);
                                case 78:
                                    if (97 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(97);
                                    if (78 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(78);
                                    return new Wb(7, NaN);
                                case 91:
                                    return new Wb(1, b);
                                case 102:
                                    if (97 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(97);
                                    if (108 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(108);
                                    if (115 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(115);
                                    if (101 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(101);
                                    return new Wb(4, !1);
                                case 110:
                                    if (117 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(117);
                                    if (108 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(108);
                                    if (108 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(108);
                                    return new Wb(3, null);
                                case 116:
                                    if (114 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(114);
                                    if (117 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(117);
                                    if (101 != this.source.charCodeAt(this.pos++)) throw this.invalidChar(101);
                                    return new Wb(4, !0);
                                case 123:
                                    return new Wb(0, b)
                            }
                            throw this.invalidChar(b);
                        case 6:
                            switch (b) {
                                case 91:
                                    return this.pos++, new Wb(1, b);
                                case 123:
                                    return this.pos++, new Wb(0, b)
                            }
                            a = 5;
                            continue;
                        case 7:
                            this.pos++;
                            switch (b) {
                                case 34:
                                    return this.lexString(this.pos, !0);
                                case 39:
                                    return this.lexString(this.pos, !1);
                                case 92:
                                    return this.lexIdentifier(this.pos, 0);
                                case 125:
                                    return new Wb(2, b)
                            }
                            if (lf.isIdStartChar(b)) return this.lexIdentifier(this.pos - 1, 1);
                            throw this.invalidChar(b);
                        case 8:
                            this.pos++;
                            if (58 == b) return new Wb(2, b);
                            throw this.invalidChar(b);
                        case 9:
                            a = 5;
                            continue;
                        case 10:
                            if (93 == b) return this.pos++, new Wb(2, b);
                            a = 5;
                            continue;
                        case 11:
                            this.pos++;
                            switch (b) {
                                case 44:
                                case 125:
                                    return new Wb(2, b)
                            }
                            throw this.invalidChar(b);
                        case 12:
                            switch (b) {
                                case 44:
                                case 93:
                                    return this.pos++, new Wb(2, b)
                            }
                            this.pos++;
                            throw this.invalidChar(b);
                        case 13:
                            throw this.pos++, this.invalidChar(b);
                    }
                },
                unicodeEscape: function () {
                    for (var a = 4, b = this.pos, c; 0 < a--;) {
                        var d = c = this.source.charCodeAt(this.pos++);
                        if (!(48 <= d && 57 >= d || 97 <= d && 102 >= d || 65 <= d && 70 >= d)) throw this.invalidChar(c);
                    }
                    return E.parseInt("0x" + M.substr(this.source, b, 4))
                },
                push: function () {
                    switch (this.token.type) {
                        case 0:
                            var a = {};
                            break;
                        case 1:
                            a = [];
                            break;
                        case 4:
                        case 5:
                        case 6:
                        case 7:
                        case 8:
                            a = this.token.value;
                            break;
                        default:
                            a = null
                    }
                    if (this.rootIsNull) this.root = a, this.rootIsNull = null == a;
                    else {
                        var b = this.stack[this.stack.length - 1],
                            c = z.typeof(b);
                        switch (c._hx_index) {
                            case 4:
                                b[this.key] = a;
                                break;
                            case 6:
                                c.c == Array && b.push(a)
                        }
                    }
                    c = z.typeof(a);
                    switch (c._hx_index) {
                        case 4:
                            b = 1;
                            break;
                        case 6:
                            b = c.c == Array ? 2 : 0;
                            break;
                        default:
                            b = 0
                    }
                    if (null != a && 0 != b) this.stack.push(a), this.parseState = 2 == b ? 4 : 1;
                    else switch (c = z.typeof(this.stack[this.stack.length - 1]), c._hx_index) {
                        case 0:
                            this.parseState = 7;
                            break;
                        case 4:
                            this.parseState = 5;
                            break;
                        case 6:
                            c.c ==
                            Array && (this.parseState = 6)
                    }
                },
                pop: function () {
                    this.stack.pop();
                    var a = z.typeof(this.stack[this.stack.length - 1]);
                    switch (a._hx_index) {
                        case 0:
                            this.parseState = 7;
                            break;
                        case 4:
                            this.parseState = 5;
                            break;
                        case 6:
                            a.c == Array && (this.parseState = 6)
                    }
                },
                getPosition: function (a) {
                    a >= this.sourceLength && (a = this.sourceLength);
                    for (var b = 1, c = 0, d = 0; d < a;) {
                        var g = d++;
                        10 == this.source.charCodeAt(g) ? (++b, c = 0) : ++c
                    }
                    return new al(b, c)
                },
                invalidChar: function (a) {
                    var b = this.getPosition(this.pos);
                    return a != a ? this.syntaxError("JSON5: invalid end of input at " +
                        b.line + ":" + b.column, b) : this.syntaxError("JSON5: invalid character '" + Jf.formatChar(a) + "' at " + b.line + ":" + b.column, b)
                },
                separatorChar: function (a) {
                    console.warn("[JSON5] hxjson5_Parser.formatChar(c) in strings is not valid ECMAScript; consider escaping")
                },
                syntaxError: function (a, b) {
                    return new cj(a, b.line, b.column)
                },
                __class__: Jf
            };
            var cj = function (a, b, c) {
                aa.call(this, a);
                this.lineNumber = b;
                this.columnNumber = c;
                this.__skipStack++
            };
            h["hxjson5.SyntaxError"] = cj;
            cj.__name__ = "hxjson5.SyntaxError";
            cj.__super__ = aa;
            cj.prototype = w(aa.prototype, {
                __class__: cj
            });
            var lf = function () {
            };
            h["hxjson5.Util"] = lf;
            lf.__name__ = "hxjson5.Util";
            lf.isSpaceSeparator = function (a) {
                return 5760 == a || 8192 <= a && 8202 >= a || 8239 == a || 8287 == a || 12288 == a ? !0 : !1
            };
            lf.isIdStartChar = function (a) {
                return 97 <= a && 122 >= a || 65 <= a && 90 >= a || 95 == a || 36 == a || 170 == a || 181 == a || 186 == a || 192 <= a && 214 >= a || 216 <= a && 246 >= a || 248 <= a && 255 >= a ? !0 : !1
            };
            lf.isIdContinueChar = function (a) {
                return 97 <= a && 122 >= a || 65 <= a && 90 >= a || 48 <= a && 57 >= a || 95 == a || 36 == a || 8204 == a || 8205 == a || 170 == a || 181 == a || 186 ==
                a || 192 <= a && 214 >= a || 216 <= a && 246 >= a || 248 <= a && 255 >= a ? !0 : !1
            };
            var mh = function () {
                this.b = ""
            };
            h["hxjson5.utils.FastStringBuf"] = mh;
            mh.__name__ = "hxjson5.utils.FastStringBuf";
            mh.prototype = {
                __class__: mh
            };
            var Ua = function () {
            };
            h["js.Boot"] = Ua;
            Ua.__name__ = "js.Boot";
            Ua.getClass = function (a) {
                if (null == a) return null;
                if (a instanceof Array) return Array;
                var b = a.__class__;
                if (null != b) return b;
                a = Ua.__nativeClassName(a);
                return null != a ? Ua.__resolveNativeClass(a) : null
            };
            Ua.__string_rec = function (a, b) {
                if (null == a) return "null";
                if (5 <=
                    b.length) return "<...>";
                var c = typeof a;
                "function" == c && (a.__name__ || a.__ename__) && (c = "object");
                switch (c) {
                    case "function":
                        return "<function>";
                    case "object":
                        if (a.__enum__) {
                            var d = N[a.__enum__].__constructs__[a._hx_index];
                            c = d._hx_name;
                            if (d.__params__) {
                                b += "\t";
                                var g = [],
                                    f = 0;
                                for (d = d.__params__; f < d.length;) {
                                    var k = d[f];
                                    f += 1;
                                    g.push(Ua.__string_rec(a[k], b))
                                }
                                return c + "(" + g.join(",") + ")"
                            }
                            return c
                        }
                        if (a instanceof Array) {
                            c = "[";
                            b += "\t";
                            g = 0;
                            for (f = a.length; g < f;) d = g++, c += (0 < d ? "," : "") + Ua.__string_rec(a[d], b);
                            return c + "]"
                        }
                        try {
                            g =
                                a.toString
                        } catch (q) {
                            return Ha.lastError = q, "???"
                        }
                        if (null != g && g != Object.toString && "function" == typeof g && (c = a.toString(), "[object Object]" != c)) return c;
                        c = "{\n";
                        b += "\t";
                        g = null != a.hasOwnProperty;
                        f = null;
                        for (f in a) g && !a.hasOwnProperty(f) || "prototype" == f || "__class__" == f || "__super__" == f || "__interfaces__" == f || "__properties__" == f || (2 != c.length && (c += ", \n"), c += b + f + " : " + Ua.__string_rec(a[f], b));
                        b = b.substring(1);
                        return c + ("\n" + b + "}");
                    case "string":
                        return a;
                    default:
                        return String(a)
                }
            };
            Ua.__interfLoop = function (a,
                                        b) {
                if (null == a) return !1;
                if (a == b) return !0;
                var c = a.__interfaces__;
                if (null != c)
                    for (var d = 0, g = c.length; d < g;) {
                        var f = d++;
                        f = c[f];
                        if (f == b || Ua.__interfLoop(f, b)) return !0
                    }
                return Ua.__interfLoop(a.__super__, b)
            };
            Ua.__instanceof = function (a, b) {
                if (null == b) return !1;
                switch (b) {
                    case Array:
                        return a instanceof Array;
                    case zm:
                        return "boolean" == typeof a;
                    case Am:
                        return null != a;
                    case Bm:
                        return "number" == typeof a;
                    case om:
                        return "number" == typeof a ? (a | 0) === a : !1;
                    case String:
                        return "string" == typeof a;
                    default:
                        if (null != a)
                            if ("function" ==
                                typeof b) {
                                if (Ua.__downcastCheck(a, b)) return !0
                            } else {
                                if ("object" == typeof b && Ua.__isNativeObj(b) && a instanceof b) return !0
                            }
                        else return !1;
                        return b == qm && null != a.__name__ || b == rm && null != a.__ename__ ? !0 : null != a.__enum__ ? N[a.__enum__] == b : !1
                }
            };
            Ua.__downcastCheck = function (a, b) {
                return a instanceof b ? !0 : b.__isInterface__ ? Ua.__interfLoop(Ua.getClass(a), b) : !1
            };
            Ua.__cast = function (a, b) {
                if (null == a || Ua.__instanceof(a, b)) return a;
                throw aa.thrown("Cannot cast " + E.string(a) + " to " + E.string(b));
            };
            Ua.__toStr = null;
            Ua.__nativeClassName =
                function (a) {
                    a = Ua.__toStr.call(a).slice(8, -1);
                    return "Object" == a || "Function" == a || "Math" == a || "JSON" == a ? null : a
                };
            Ua.__isNativeObj = function (a) {
                return null != Ua.__nativeClassName(a)
            };
            Ua.__resolveNativeClass = function (a) {
                return B[a]
            };
            var mf = function () {
            };
            h["js.Browser"] = mf;
            mf.__name__ = "js.Browser";
            mf.__properties__ = {
                get_supported: "get_supported"
            };
            mf.get_supported = function () {
                return "undefined" != typeof window && "undefined" != typeof window.location ? "string" == typeof window.location.protocol : !1
            };
            mf.getLocalStorage =
                function () {
                    try {
                        var a = window.localStorage;
                        a.getItem("");
                        if (0 == a.length) {
                            var b = "_hx_" + Math.random();
                            a.setItem(b, b);
                            a.removeItem(b)
                        }
                        return a
                    } catch (c) {
                        return Ha.lastError = c, null
                    }
                };
            var Xl = function () {
            };
            h["js.html._CanvasElement.CanvasUtil"] = Xl;
            Xl.__name__ = "js.html._CanvasElement.CanvasUtil";
            Xl.getContextWebGL = OpenflShared.getContextWebGL;
            var sk = function () {
                this.connected = !0;
                this.buttons = [];
                this.axes = []
            };
            h["lime._internal.backend.html5.GameDeviceData"] =
                sk;
            sk.__name__ = "lime._internal.backend.html5.GameDeviceData";
            sk.prototype = {
                __class__: sk
            };
            var cl = function (a) {
                this.parent = a;
                this.id = -1;
                this.gain = 1;
                this.position = new bl
            };
            h["lime._internal.backend.html5.HTML5AudioSource"] = cl;
            cl.__name__ = "lime._internal.backend.html5.HTML5AudioSource";
            cl.prototype = {
                dispose: function () {
                },
                init: function () {
                    this.parent.buffer.get_src().pannerAttr({
                        coneInnerAngle: 360,
                        coneOuterAngle: 360,
                        coneOuterGain: 0,
                        distanceModel: "inverse",
                        maxDistance: 1E4,
                        refDistance: 1,
                        rolloffFactor: 1,
                        panningModel: "equalpower"
                    })
                },
                play: function () {
                    if (!this.playing && null != this.parent.buffer && null != this.parent.buffer.__srcHowl) {
                        this.playing = !0;
                        var a = this.getCurrentTime();
                        this.completed = !1;
                        var b = this.parent.buffer.__srcHowl._volume;
                        this.parent.buffer.__srcHowl._volume = this.parent.get_gain();
                        this.id = this.parent.buffer.__srcHowl.play();
                        this.parent.buffer.__srcHowl._volume = b;
                        this.setPosition(this.parent.get_position());
                        this.parent.buffer.__srcHowl.on("end", m(this, this.howl_onEnd), this.id);
                        this.setCurrentTime(a)
                    }
                },
                stop: function () {
                    this.playing = !1;
                    null != this.parent.buffer && null != this.parent.buffer.__srcHowl && (this.parent.buffer.__srcHowl.stop(this.id), this.parent.buffer.__srcHowl.off("end", m(this, this.howl_onEnd), this.id))
                },
                howl_onEnd: function () {
                    this.playing = !1;
                    0 < this.loops ? (this.loops--, this.stop(), this.play()) : (null != this.parent.buffer && null != this.parent.buffer.__srcHowl && (this.parent.buffer.__srcHowl.stop(this.id), this.parent.buffer.__srcHowl.off("end", m(this, this.howl_onEnd), this.id)), this.completed = !0, this.parent.onComplete.dispatch())
                },
                getCurrentTime: function () {
                    if (-1 == this.id) return 0;
                    if (this.completed) return this.getLength();
                    if (null != this.parent.buffer && null != this.parent.buffer.__srcHowl) {
                        var a = (1E3 * this.parent.buffer.__srcHowl.seek(this.id) | 0) - this.parent.offset;
                        return 0 > a ? 0 : a
                    }
                    return 0
                },
                setCurrentTime: function (a) {
                    if (null != this.parent.buffer && null != this.parent.buffer.__srcHowl) {
                        var b = (a + this.parent.offset) / 1E3;
                        0 > b && (b = 0);
                        this.parent.buffer.__srcHowl.seek(b, this.id)
                    }
                    return a
                },
                getGain: function () {
                    return this.gain
                },
                setGain: function (a) {
                    null !=
                    this.parent.buffer && null != this.parent.buffer.__srcHowl && -1 != this.id && this.parent.buffer.__srcHowl.volume(a, this.id);
                    return this.gain = a
                },
                getLength: function () {
                    return 0 != this.length ? this.length : null != this.parent.buffer && null != this.parent.buffer.__srcHowl ? 1E3 * this.parent.buffer.__srcHowl.duration() | 0 : 0
                },
                setLength: function (a) {
                    return this.length = a
                },
                setLoops: function (a) {
                    return this.loops = a
                },
                getPosition: function () {
                    return this.position
                },
                setPosition: function (a) {
                    this.position.x = a.x;
                    this.position.y = a.y;
                    this.position.z =
                        a.z;
                    this.position.w = a.w;
                    null != this.parent.buffer && null != this.parent.buffer.__srcHowl && null != this.parent.buffer.__srcHowl.pos && this.parent.buffer.__srcHowl.pos(this.position.x, this.position.y, this.position.z, this.id);
                    return this.position
                },
                __class__: cl
            };
            var Ca = function () {
                this.validStatus0 = (new Ya("Tizen", "gi")).match(window.navigator.userAgent)
            };
            h["lime._internal.backend.html5.HTML5HTTPRequest"] = Ca;
            Ca.__name__ = "lime._internal.backend.html5.HTML5HTTPRequest";
            Ca.originElement = null;
            Ca.originHostname = null;
            Ca.originPort = null;
            Ca.originProtocol = null;
            Ca.supportsImageProgress = null;
            Ca.loadImage = function (a) {
                var b = new Fd;
                Ca.activeRequests < Ca.requestLimit ? (Ca.activeRequests++, Ca.__loadImage(a, b, 0)) : Ca.requestQueue.add({
                    instance: null,
                    uri: a,
                    promise: b,
                    type: "IMAGE",
                    options: 0
                });
                return b.future
            };
            Ca.loadImageFromBytes = function (a, b) {
                var c = URL.createObjectURL(new Blob([a.b.bufferValue], {
                    type: b
                }));
                return null != c ? (a = new Fd, Ca.activeRequests < Ca.requestLimit ? (Ca.activeRequests++, Ca.__loadImage(c, a, 1)) : Ca.requestQueue.add({
                    instance: null,
                    uri: c,
                    promise: a,
                    type: "IMAGE",
                    options: 1
                }), a.future) : Ca.loadImage("data:" + b + ";base64," + De.encode(a))
            };
            Ca.processQueue = function () {
                if (Ca.activeRequests < Ca.requestLimit && 0 < Ca.requestQueue.length) {
                    Ca.activeRequests++;
                    var a = Ca.requestQueue.pop();
                    switch (a.type) {
                        case "BINARY":
                            a.instance.__loadData(a.uri, a.promise);
                            break;
                        case "IMAGE":
                            Ca.__loadImage(a.uri, a.promise, a.options);
                            break;
                        case "TEXT":
                            a.instance.__loadText(a.uri, a.promise);
                            break;
                        default:
                            Ca.activeRequests--
                    }
                }
            };
            Ca.__fixHostname = function (a) {
                return null ==
                a ? "" : a
            };
            Ca.__fixPort = function (a, b) {
                if (null == a || "" == a) switch (b) {
                    case "ftp:":
                        return "21";
                    case "gopher:":
                        return "70";
                    case "http:":
                        return "80";
                    case "https:":
                        return "443";
                    case "ws:":
                        return "80";
                    case "wss:":
                        return "443";
                    default:
                        return ""
                }
                return a
            };
            Ca.__fixProtocol = function (a) {
                return null == a || "" == a ? "http:" : a
            };
            Ca.__isInMemoryURI = function (a) {
                return T.startsWith(a, "data:") ? !0 : T.startsWith(a, "blob:")
            };
            Ca.__isSameOrigin = function (a) {
                if (null == a || "" == a || Ca.__isInMemoryURI(a)) return !0;
                null == Ca.originElement && (Ca.originElement =
                    window.document.createElement("a"), Ca.originHostname = Ca.__fixHostname(B.location.hostname), Ca.originProtocol = Ca.__fixProtocol(B.location.protocol), Ca.originPort = Ca.__fixPort(B.location.port, Ca.originProtocol));
                var b = Ca.originElement;
                b.href = a;
                "" == b.hostname && (b.href = b.href);
                var c = Ca.__fixHostname(b.hostname);
                a = Ca.__fixProtocol(b.protocol);
                b = Ca.__fixPort(b.port, a);
                c = "" == c || c == Ca.originHostname;
                b = "" == b || b == Ca.originPort;
                return "file:" != a && c ? b : !1
            };
            Ca.__loadImage = function (a, b, c) {
                var d = new window.Image;
                Ca.__isSameOrigin(a) || (d.crossOrigin = "Anonymous");
                null == Ca.supportsImageProgress && (Ca.supportsImageProgress = "onprogress" in d);
                if (Ca.supportsImageProgress || Ca.__isInMemoryURI(a)) d.addEventListener("load", function (f) {
                    Ca.__revokeBlobURI(a, c);
                    f = new Se(null, d.width, d.height);
                    f.__srcImage = d;
                    Ca.activeRequests--;
                    Ca.processQueue();
                    b.complete(new cc(f))
                }, !1), d.addEventListener("progress", function (a) {
                    b.progress(a.loaded, a.total)
                }, !1), d.addEventListener("error", function (d) {
                    Ca.__revokeBlobURI(a, c);
                    Ca.activeRequests--;
                    Ca.processQueue();
                    b.error(new Bg(d.detail, null))
                }, !1), d.src = a;
                else {
                    var g = new XMLHttpRequest;
                    g.onload = function (a) {
                        Ca.activeRequests--;
                        Ca.processQueue();
                        (new cc).__fromBytes(Db.ofData(g.response), function (a) {
                            b.complete(a)
                        })
                    };
                    g.onerror = function (a) {
                        b.error(new Bg(a.message, null))
                    };
                    g.onprogress = function (a) {
                        a.lengthComputable && b.progress(a.loaded, a.total)
                    };
                    g.open("GET", a, !0);
                    g.responseType = "arraybuffer";
                    g.overrideMimeType("text/plain; charset=x-user-defined");
                    g.send(null)
                }
            };
            Ca.__revokeBlobURI = function (a,
                                           b) {
                0 != (b & 1) && URL.revokeObjectURL(a)
            };
            Ca.prototype = {
                init: function (a) {
                    this.parent = a
                },
                load: function (a, b, c) {
                    this.request = new XMLHttpRequest;
                    "POST" == this.parent.method ? null != this.request.upload && this.request.upload.addEventListener("progress", b, !1) : this.request.addEventListener("progress", b, !1);
                    this.request.onreadystatechange = c;
                    b = "";
                    if (null == this.parent.data) {
                        c = Object.keys(this.parent.formData.h);
                        for (var d = c.length, g = 0; g < d;) {
                            var f = c[g++];
                            0 < b.length && (b += "&");
                            var k = this.parent.formData.h[f];
                            if (-1 < f.indexOf("[]") &&
                                k instanceof Array) {
                                var q = [];
                                for (k = G(k); k.hasNext();) {
                                    var l = k.next();
                                    q.push(encodeURIComponent(l))
                                }
                                q = q.join("&amp;" + f + "=");
                                b += encodeURIComponent(f) + "=" + q
                            } else q = encodeURIComponent(f) + "=", f = E.string(k), b += q + encodeURIComponent(f)
                        }
                        "GET" == this.parent.method && "" != b && (a = -1 < a.indexOf("?") ? a + ("&" + b) : a + ("?" + b), b = "")
                    }
                    this.request.open(E.string(this.parent.method), a, !0);
                    0 < this.parent.timeout && (this.request.timeout = this.parent.timeout);
                    this.binary && (this.request.responseType = "arraybuffer");
                    a = null;
                    q = 0;
                    for (c = this.parent.headers; q <
                    c.length;) d = c[q], ++q, "Content-Type" == d.name ? a = d.value : this.request.setRequestHeader(d.name, d.value);
                    null != this.parent.contentType && (a = this.parent.contentType);
                    null == a && (null != this.parent.data ? a = "application/octet-stream" : "" != b && (a = "application/x-www-form-urlencoded"));
                    null != a && this.request.setRequestHeader("Content-Type", a);
                    this.parent.withCredentials && (this.request.withCredentials = !0);
                    null != this.parent.data ? this.request.send(this.parent.data.b.bufferValue) : this.request.send(b)
                },
                loadData: function (a) {
                    var b =
                        new Fd;
                    Ca.activeRequests < Ca.requestLimit ? (Ca.activeRequests++, this.__loadData(a, b)) : Ca.requestQueue.add({
                        instance: this,
                        uri: a,
                        promise: b,
                        type: "BINARY",
                        options: 0
                    });
                    return b.future
                },
                loadText: function (a) {
                    var b = new Fd;
                    Ca.activeRequests < Ca.requestLimit ? (Ca.activeRequests++, this.__loadText(a, b)) : Ca.requestQueue.add({
                        instance: this,
                        uri: a,
                        promise: b,
                        type: "TEXT",
                        options: 0
                    });
                    return b.future
                },
                processResponse: function () {
                    if (this.parent.enableResponseHeaders) {
                        this.parent.responseHeaders = [];
                        for (var a, b, c = 0, d = this.request.getAllResponseHeaders().split("\n"); c <
                        d.length;) b = d[c], ++c, a = T.trim(M.substr(b, 0, b.indexOf(":"))), b = T.trim(M.substr(b, b.indexOf(":") + 1, null)), "" != a && this.parent.responseHeaders.push(new dj(a, b))
                    }
                    this.parent.responseStatus = this.request.status
                },
                __loadData: function (a, b) {
                    var c = this;
                    this.binary = !0;
                    this.load(a, function (a) {
                        b.progress(a.loaded, a.total)
                    }, function (a) {
                        4 == c.request.readyState && (a = null, "" == c.request.responseType ? null != c.request.responseText && (a = Db.ofString(c.request.responseText)) : null != c.request.response && (a = Db.ofData(c.request.response)),
                            null != c.request.status && (200 <= c.request.status && 400 > c.request.status || c.validStatus0 && 0 == c.request.status) ? (c.processResponse(), b.complete(a)) : (c.processResponse(), b.error(new Bg(c.request.status, a))), c.request = null, Ca.activeRequests--, Ca.processQueue())
                    })
                },
                __loadText: function (a, b) {
                    var c = this;
                    this.binary = !1;
                    this.load(a, function (a) {
                        b.progress(a.loaded, a.total)
                    }, function (a) {
                        4 == c.request.readyState && (null != c.request.status && (200 <= c.request.status && 400 > c.request.status || c.validStatus0 && 0 == c.request.status) ?
                            (c.processResponse(), b.complete(c.request.responseText)) : (c.processResponse(), b.error(new Bg(c.request.status, c.request.responseText))), c.request = null, Ca.activeRequests--, Ca.processQueue())
                    })
                },
                __class__: Ca
            };
            var dl = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Dynamic_Void"] = dl;
            dl.__name__ = "lime.app._Event_Dynamic_Void";
            dl.prototype = {
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b,
                        1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);) ;
                },
                __class__: dl
            };
            var pm = {
                    disablePreserveClasses: function (a) {
                        null != a && a instanceof Object && 1 != L.field(a, "__skipPrototype__") && !(null != a.byteLength && null != a.byteOffset && null != a.buffer && a.buffer instanceof ArrayBuffer) && (a.__skipPrototype__ = !0)
                    },
                    restoreClasses: function (a, b) {
                        null == b && (b = 2147483647 *
                            Math.random() | 0, L.field(a, "__restoreFlag__") == b && ++b);
                        if (null != a && a instanceof Object && 1 != L.field(a, "__skipPrototype__") && !(null != a.byteLength && null != a.byteOffset && null != a.buffer && a.buffer instanceof ArrayBuffer) && L.field(a, "__restoreFlag__") != b) {
                            try {
                                a.__restoreFlag__ = b
                            } catch (g) {
                                Ha.lastError = g;
                                return
                            }
                            if (null != L.field(a, "__prototype__")) try {
                                Object.setPrototypeOf(a, h[L.field(a, "__prototype__")].prototype)
                            } catch (g) {
                                Ha.lastError = g
                            }
                            var c = 0;
                            for (a = Object.values(a); c < a.length;) {
                                var d = a[c];
                                ++c;
                                pm.restoreClasses(d,
                                    b)
                            }
                        }
                    }
                },
                Cm = {
                    toFunction: function (a) {
                        if (null != a.func) return a.func;
                        if (null != a.classPath && null != a.functionName) return a.func = h[a.classPath][a.functionName], a.func;
                        if (null != a.sourceCode) return a.func = (new Function("return " + a.sourceCode))(), a.func;
                        throw aa.thrown("Object is not a valid WorkFunction: " + E.string(a));
                    }
                },
                Cd = function (a, b) {
                    this.__href = a;
                    null != b && (this.__worker = b, this.__worker.onmessage = m(this, this.dispatchMessage), this.onMessage = new dl);
                    pm.disablePreserveClasses(this)
                };
            h["lime._internal.backend.html5.HTML5Thread"] =
                Cd;
            Cd.__name__ = "lime._internal.backend.html5.HTML5Thread";
            Cd.prototype = {
                dispatchMessage: function (a) {
                    a = a.data;
                    pm.restoreClasses(a);
                    null != this.onMessage && this.onMessage.dispatch(a);
                    Cd.__resolveMethods.isEmpty() ? Cd.__messages.add(a) : Cd.__resolveMethods.pop()(a)
                },
                destroy: function () {
                    if (null != this.__worker) this.__worker.terminate();
                    else if (Cd.__isWorker) try {
                        B.close()
                    } catch (a) {
                        Ha.lastError = a
                    }
                },
                __class__: Cd
            };
            var La = function (a) {
                this.__stopMousePropagation = this.imeCompositionActive = !1;
                this.unusedTouchesPool =
                    new jb;
                this.scale = 1;
                this.currentTouches = new Ec;
                this.parent = a;
                this.cursor = xb.DEFAULT;
                this.cacheMouseY = this.cacheMouseX = 0;
                var b = a.__attributes;
                Object.prototype.hasOwnProperty.call(b, "context") || (b.context = {});
                this.renderType = b.context.type;
                Object.prototype.hasOwnProperty.call(b, "element") && (a.element = b.element);
                var c = a.element;
                Object.prototype.hasOwnProperty.call(b, "allowHighDPI") && b.allowHighDPI && "dom" != this.renderType && (this.scale = window.devicePixelRatio);
                a.__scale = this.scale;
                this.setWidth = Object.prototype.hasOwnProperty.call(b,
                    "width") ? b.width : 0;
                this.setHeight = Object.prototype.hasOwnProperty.call(b, "height") ? b.height : 0;
                a.__width = this.setWidth;
                a.__height = this.setHeight;
                a.id = La.windowID++;
                c instanceof HTMLCanvasElement ? this.canvas = c : "dom" == this.renderType ? this.div = window.document.createElement("div") : this.canvas = window.document.createElement("canvas");
                if (null != this.canvas) {
                    var d = this.canvas.style;
                    d.setProperty("-webkit-transform", "translateZ(0)", null);
                    d.setProperty("transform", "translateZ(0)", null)
                } else null != this.div && (d =
                    this.div.style, d.setProperty("-webkit-transform", "translate3D(0,0,0)", null), d.setProperty("transform", "translate3D(0,0,0)", null), d.position = "relative", d.overflow = "hidden", d.setProperty("-webkit-user-select", "none", null), d.setProperty("-moz-user-select", "none", null), d.setProperty("-ms-user-select", "none", null), d.setProperty("-o-user-select", "none", null));
                0 == a.__width && 0 == a.__height && (null != c ? (a.__width = c.clientWidth, a.__height = c.clientHeight) : (a.__width = window.innerWidth, a.__height = window.innerHeight),
                    this.cacheElementWidth = a.__width, this.cacheElementHeight = a.__height, this.resizeElement = !0);
                null != this.canvas ? (this.canvas.width = Math.round(a.__width * this.scale), this.canvas.height = Math.round(a.__height * this.scale), this.canvas.style.width = a.__width + "px", this.canvas.style.height = a.__height + "px") : (this.div.style.width = a.__width + "px", this.div.style.height = a.__height + "px");
                if (Object.prototype.hasOwnProperty.call(b, "resizable") && b.resizable || !Object.prototype.hasOwnProperty.call(b, "width") && 0 == this.setWidth &&
                    0 == this.setHeight) a.__resizable = !0;
                this.updateSize();
                if (null != c) {
                    null != this.canvas ? c != this.canvas && c.appendChild(this.canvas) : c.appendChild(this.div);
                    b = "mousedown mouseenter mouseleave mousemove mouseup wheel".split(" ");
                    for (d = 0; d < b.length;) {
                        var g = b[d];
                        ++d;
                        c.addEventListener(g, m(this, this.handleMouseEvent), !0)
                    }
                    c.addEventListener("contextmenu", m(this, this.handleContextMenuEvent), !0);
                    c.addEventListener("dragstart", m(this, this.handleDragEvent), !0);
                    c.addEventListener("dragover", m(this, this.handleDragEvent),
                        !0);
                    c.addEventListener("drop", m(this, this.handleDragEvent), !0);
                    c.addEventListener("touchstart", m(this, this.handleTouchEvent), !0);
                    c.addEventListener("touchmove", m(this, this.handleTouchEvent), !0);
                    c.addEventListener("touchend", m(this, this.handleTouchEvent), !0);
                    c.addEventListener("touchcancel", m(this, this.handleTouchEvent), !0);
                    c.addEventListener("gamepadconnected", m(this, this.handleGamepadEvent), !0);
                    c.addEventListener("gamepaddisconnected", m(this, this.handleGamepadEvent), !0)
                }
                this.createContext();
                "webgl" ==
                a.context.type && (this.canvas.addEventListener("webglcontextlost", m(this, this.handleContextEvent), !1), this.canvas.addEventListener("webglcontextrestored", m(this, this.handleContextEvent), !1))
            };
            h["lime._internal.backend.html5.HTML5Window"] = La;
            La.__name__ = "lime._internal.backend.html5.HTML5Window";
            La.textArea = null;
            La.textInput = null;
            La.prototype = {
                close: function () {
                    var a = this.parent.element;
                    if (null != a) {
                        null != this.canvas ? (a != this.canvas && a.removeChild(this.canvas), this.canvas = null) : null != this.div && (a.removeChild(this.div),
                            this.div = null);
                        for (var b = "mousedown mouseenter mouseleave mousemove mouseup wheel".split(" "), c = 0; c < b.length;) {
                            var d = b[c];
                            ++c;
                            a.removeEventListener(d, m(this, this.handleMouseEvent), !0)
                        }
                        a.removeEventListener("contextmenu", m(this, this.handleContextMenuEvent), !0);
                        a.removeEventListener("dragstart", m(this, this.handleDragEvent), !0);
                        a.removeEventListener("dragover", m(this, this.handleDragEvent), !0);
                        a.removeEventListener("drop", m(this, this.handleDragEvent), !0);
                        a.removeEventListener("touchstart", m(this, this.handleTouchEvent),
                            !0);
                        a.removeEventListener("touchmove", m(this, this.handleTouchEvent), !0);
                        a.removeEventListener("touchend", m(this, this.handleTouchEvent), !0);
                        a.removeEventListener("touchcancel", m(this, this.handleTouchEvent), !0);
                        a.removeEventListener("gamepadconnected", m(this, this.handleGamepadEvent), !0);
                        a.removeEventListener("gamepaddisconnected", m(this, this.handleGamepadEvent), !0)
                    }
                    this.parent.application.__removeWindow(this.parent)
                },
                createContext: function () {
                    var a = new el,
                        b = this.parent.__attributes.context;
                    a.window =
                        this.parent;
                    a.attributes = b;
                    if (null != this.div) a.dom = this.div, a.type = "dom", a.version = "";
                    else if (null != this.canvas) {
                        var c = null,
                            d = "canvas" == this.renderType,
                            g = "opengl" == this.renderType || "opengles" == this.renderType || "webgl" == this.renderType,
                            f = !Object.prototype.hasOwnProperty.call(b, "version") || "1" != b.version,
                            k = !1;
                        if (g || !d && (!Object.prototype.hasOwnProperty.call(b, "hardware") || b.hardware)) {
                            d = Object.prototype.hasOwnProperty.call(b, "background") && null == b.background;
                            g = Object.prototype.hasOwnProperty.call(b,
                                "colorDepth") ? b.colorDepth : 16;
                            var q = Object.prototype.hasOwnProperty.call(b, "antialiasing") && 0 < b.antialiasing,
                                l = Object.prototype.hasOwnProperty.call(b, "depth") ? b.depth : !0,
                                h = Object.prototype.hasOwnProperty.call(b, "stencil") && b.stencil;
                            b = Object.prototype.hasOwnProperty.call(b, "preserveDrawingBuffer") && b.preserveDrawingBuffer;
                            b = {
                                alpha: d || 16 < g,
                                antialias: q,
                                depth: l,
                                premultipliedAlpha: !0,
                                stencil: h,
                                preserveDrawingBuffer: b,
                                failIfMajorPerformanceCaveat: !1
                            };
                            d = ["webgl", "experimental-webgl"];
                            f && d.unshift("webgl2");
                            for (f = 0; f < d.length && (g = d[f], ++f, c = this.canvas.getContext(g, b), null != c && "webgl2" == g && (k = !0), null == c);) ;
                        }
                        null == c ? (a.canvas2D = this.canvas.getContext("2d"), a.type = "canvas", a.version = "") : (a.webgl = Tc.fromWebGL2RenderContext(c), k && (a.webgl2 = c), null == ce.context && (ce.context = c, ce.type = "webgl", ce.version = k ? 2 : 1), a.type = "webgl", a.version = k ? "2" : "1")
                    }
                    this.parent.context = a
                },
                focusTextInput: function () {
                    var a = this;
                    this.__focusPending || (this.__focusPending = !0, Qf.delay(function () {
                        a.__focusPending = !1;
                        a.textInputEnabled &&
                        La.textInput.focus()
                    }, 20))
                },
                getDisplay: function () {
                    return yc.getDisplay(0)
                },
                getFrameRate: function () {
                    return null == this.parent.application ? 0 : 0 > this.parent.application.__backend.framePeriod ? 60 : 1E3 == this.parent.application.__backend.framePeriod ? 0 : 1E3 / this.parent.application.__backend.framePeriod
                },
                handleContextEvent: function (a) {
                    switch (a.type) {
                        case "webglcontextlost":
                            a.cancelable && a.preventDefault();
                            this.parent.context = null;
                            this.parent.onRenderContextLost.dispatch();
                            break;
                        case "webglcontextrestored":
                            this.createContext(),
                                this.parent.onRenderContextRestored.dispatch(this.parent.context)
                    }
                },
                handleContextMenuEvent: function (a) {
                    (this.parent.onMouseUp.canceled || this.parent.onMouseDown.canceled) && a.cancelable && a.preventDefault()
                },
                handleCutOrCopyEvent: function (a) {
                    var b = kc.get_text();
                    null == b && (b = "");
                    a.clipboardData.setData("text/plain", b);
                    a.cancelable && a.preventDefault()
                },
                handleDragEvent: function (a) {
                    switch (a.type) {
                        case "dragover":
                            return a.preventDefault(), !1;
                        case "dragstart":
                            if ("img" == Ua.__cast(a.target, HTMLElement).nodeName.toLowerCase() &&
                                a.cancelable) return a.preventDefault(), !1;
                            break;
                        case "drop":
                            if (null != a.dataTransfer && 0 < a.dataTransfer.files.length) return this.parent.onDropFile.dispatch(a.dataTransfer.files), a.preventDefault(), !1
                    }
                    return !0
                },
                handleFocusEvent: function (a) {
                    this.textInputEnabled && (null == a.relatedTarget || this.isDescendent(a.relatedTarget)) && this.focusTextInput()
                },
                handleFullscreenEvent: function (a) {
                    if (null != (document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement)) this.isFullscreen = !0, this.parent.__fullscreen = !0, this.requestedFullscreen && (this.requestedFullscreen = !1, this.parent.onFullscreen.dispatch());
                    else {
                        this.isFullscreen = !1;
                        this.parent.__fullscreen = !1;
                        this.parent.onRestore.dispatch();
                        a = ["fullscreenchange", "mozfullscreenchange", "webkitfullscreenchange", "MSFullscreenChange"];
                        for (var b = ["fullscreenerror", "mozfullscreenerror", "webkitfullscreenerror", "MSFullscreenError"], c = 0, d = a.length; c < d;) {
                            var g = c++;
                            window.document.removeEventListener(a[g], m(this, this.handleFullscreenEvent),
                                !1);
                            window.document.removeEventListener(b[g], m(this, this.handleFullscreenEvent), !1)
                        }
                    }
                },
                handleGamepadEvent: function (a) {
                    switch (a.type) {
                        case "gamepadconnected":
                            uc.__connect(a.gamepad.index);
                            "standard" == a.gamepad.mapping && xc.__connect(a.gamepad.index);
                            break;
                        case "gamepaddisconnected":
                            uc.__disconnect(a.gamepad.index), xc.__disconnect(a.gamepad.index)
                    }
                },
                handleInputEvent: function (a) {
                    this.imeCompositionActive || La.textInput.value == La.dummyCharacter || (a = T.replace(La.textInput.value, La.dummyCharacter, ""), 0 < a.length &&
                    this.parent.onTextInput.dispatch(a), La.textInput.value = La.dummyCharacter)
                },
                handleMouseEvent: function (a) {
                    if ("wheel" != a.type) {
                        if (null != this.parent.element)
                            if (null != this.canvas) {
                                var b = this.canvas.getBoundingClientRect();
                                var c = this.parent.__width / b.width * (a.clientX - b.left);
                                b = this.parent.__height / b.height * (a.clientY - b.top)
                            } else null != this.div ? (b = this.div.getBoundingClientRect(), c = a.clientX - b.left, b = a.clientY - b.top) : (b = this.parent.element.getBoundingClientRect(), c = this.parent.__width / b.width * (a.clientX -
                                b.left), b = this.parent.__height / b.height * (a.clientY - b.top));
                        else c = a.clientX, b = a.clientY;
                        switch (a.type) {
                            case "mousedown":
                                a.currentTarget == this.parent.element && (window.addEventListener("mouseup", m(this, this.handleMouseEvent)), window.addEventListener("mousemove", m(this, this.handleMouseEvent)));
                                this.__stopMousePropagation = !1;
                                this.parent.clickCount = a.detail;
                                this.parent.onMouseDown.dispatch(c, b, a.button);
                                this.parent.clickCount = 0;
                                this.parent.onMouseDown.canceled && a.cancelable && a.preventDefault();
                                break;
                            case "mouseenter":
                                a.target ==
                                this.parent.element && (this.parent.onEnter.dispatch(), this.parent.onEnter.canceled && a.cancelable && a.preventDefault());
                                break;
                            case "mouseleave":
                                a.target == this.parent.element && (this.parent.onLeave.dispatch(), this.parent.onLeave.canceled && a.cancelable && a.preventDefault());
                                break;
                            case "mousemove":
                                if (this.__stopMousePropagation && a.currentTarget != this.parent.element) {
                                    this.__stopMousePropagation = !1;
                                    return
                                }
                                this.__stopMousePropagation = a.currentTarget == this.parent.element;
                                if (c != this.cacheMouseX || b != this.cacheMouseY) this.parent.onMouseMove.dispatch(c,
                                    b), this.parent.onMouseMoveRelative.dispatch(c - this.cacheMouseX, b - this.cacheMouseY), (this.parent.onMouseMove.canceled || this.parent.onMouseMoveRelative.canceled) && a.cancelable && a.preventDefault();
                                break;
                            case "mouseup":
                                if (this.__stopMousePropagation && a.currentTarget != this.parent.element) {
                                    this.__stopMousePropagation = !1;
                                    return
                                }
                                window.removeEventListener("mouseup", m(this, this.handleMouseEvent));
                                window.removeEventListener("mousemove", m(this, this.handleMouseEvent));
                                this.__stopMousePropagation = a.currentTarget ==
                                    this.parent.element;
                                this.parent.clickCount = a.detail;
                                this.parent.onMouseUp.dispatch(c, b, a.button);
                                this.parent.clickCount = 0;
                                this.parent.onMouseUp.canceled && a.cancelable && a.preventDefault()
                        }
                        this.cacheMouseX = c;
                        this.cacheMouseY = b
                    } else {
                        switch (a.deltaMode) {
                            case 0:
                                c = nf.PIXELS;
                                break;
                            case 1:
                                c = nf.LINES;
                                break;
                            case 2:
                                c = nf.PAGES;
                                break;
                            default:
                                c = nf.UNKNOWN
                        }
                        this.parent.onMouseWheel.dispatch(a.deltaX, -a.deltaY, c);
                        this.parent.onMouseWheel.canceled && a.cancelable && a.preventDefault()
                    }
                },
                handlePasteEvent: function (a) {
                    if (-1 <
                        a.clipboardData.types.indexOf("text/plain")) {
                        var b = a.clipboardData.getData("text/plain");
                        kc.set_text(b);
                        this.textInputEnabled && this.parent.onTextInput.dispatch(b);
                        a.cancelable && a.preventDefault()
                    }
                },
                handleResizeEvent: function (a) {
                    this.primaryTouch = null;
                    this.updateSize()
                },
                handleTouchEvent: function (a) {
                    a.cancelable && a.preventDefault();
                    var b = null;
                    null != this.parent.element && (b = null != this.canvas ? this.canvas.getBoundingClientRect() : null != this.div ? this.div.getBoundingClientRect() : this.parent.element.getBoundingClientRect());
                    var c = this.setWidth,
                        d = this.setHeight;
                    if (0 == c || 0 == d) null != b ? (c = b.width, d = b.height) : d = c = 1;
                    for (var g, f, k, q, l, h = 0, n = a.changedTouches; h < n.length;) {
                        var r = n[h];
                        ++h;
                        null != b ? (f = c / b.width * (r.clientX - b.left), k = d / b.height * (r.clientY - b.top)) : (f = r.clientX, k = r.clientY);
                        if ("touchstart" == a.type) g = this.unusedTouchesPool.pop(), null == g ? g = new Hb(f / c, k / d, r.identifier, 0, 0, r.force, this.parent.id) : (g.x = f / c, g.y = k / d, g.id = r.identifier, g.dx = 0, g.dy = 0, g.pressure = r.force, g.device = this.parent.id), this.currentTouches.h[r.identifier] =
                            g, Hb.onStart.dispatch(g), null == this.primaryTouch && (this.primaryTouch = g), g == this.primaryTouch && this.parent.onMouseDown.dispatch(f, k, 0);
                        else if (g = this.currentTouches.h[r.identifier], null != g) switch (q = g.x, l = g.y, g.x = f / c, g.y = k / d, g.dx = g.x - q, g.dy = g.y - l, g.pressure = r.force, a.type) {
                            case "touchcancel":
                                Hb.onCancel.dispatch(g);
                                this.currentTouches.remove(r.identifier);
                                this.unusedTouchesPool.add(g);
                                g == this.primaryTouch && (this.primaryTouch = null);
                                break;
                            case "touchend":
                                Hb.onEnd.dispatch(g);
                                this.currentTouches.remove(r.identifier);
                                this.unusedTouchesPool.add(g);
                                g == this.primaryTouch && (this.parent.onMouseUp.dispatch(f, k, 0), this.primaryTouch = null);
                                break;
                            case "touchmove":
                                Hb.onMove.dispatch(g), g == this.primaryTouch && this.parent.onMouseMove.dispatch(f, k)
                        }
                    }
                },
                isDescendent: function (a) {
                    if (a == this.parent.element) return !0;
                    for (; null != a;) {
                        if (a.parentNode == this.parent.element) return !0;
                        a = a.parentNode
                    }
                    return !1
                },
                setClipboard: function (a) {
                    null == La.textArea && (La.textArea = window.document.createElement("textarea"), La.textArea.style.height = "0px", La.textArea.style.left =
                        "-100px", La.textArea.style.opacity = "0", La.textArea.style.position = "fixed", La.textArea.style.top = "-100px", La.textArea.style.width = "0px", window.document.body.appendChild(La.textArea));
                    La.textArea.value = a;
                    La.textArea.focus();
                    La.textArea.select();
                    window.document.queryCommandEnabled("copy") && window.document.execCommand("copy");
                    this.textInputEnabled && this.focusTextInput()
                },
                setCursor: function (a) {
                    if (this.cursor != a) {
                        if (null == a) this.parent.element.style.cursor = "none";
                        else {
                            switch (a._hx_index) {
                                case 0:
                                    var b = "default";
                                    break;
                                case 1:
                                    b = "crosshair";
                                    break;
                                case 3:
                                    b = "move";
                                    break;
                                case 4:
                                    b = "pointer";
                                    break;
                                case 5:
                                    b = "nesw-resize";
                                    break;
                                case 6:
                                    b = "ns-resize";
                                    break;
                                case 7:
                                    b = "nwse-resize";
                                    break;
                                case 8:
                                    b = "ew-resize";
                                    break;
                                case 9:
                                    b = "text";
                                    break;
                                case 10:
                                    b = "wait";
                                    break;
                                case 11:
                                    b = "wait";
                                    break;
                                default:
                                    b = "auto"
                            }
                            this.parent.element.style.cursor = b
                        }
                        this.cursor = a
                    }
                    return this.cursor
                },
                setFullscreen: function (a) {
                    a ? this.requestedFullscreen || this.isFullscreen || (this.requestedFullscreen = !0, (H = this.parent.element, m(H, H.requestFullscreen)) ? (document.addEventListener("fullscreenchange",
                        m(this, this.handleFullscreenEvent), !1), document.addEventListener("fullscreenerror", m(this, this.handleFullscreenEvent), !1), this.parent.element.requestFullscreen()) : this.parent.element.mozRequestFullScreen ? (document.addEventListener("mozfullscreenchange", m(this, this.handleFullscreenEvent), !1), document.addEventListener("mozfullscreenerror", m(this, this.handleFullscreenEvent), !1), this.parent.element.mozRequestFullScreen()) : this.parent.element.webkitRequestFullscreen ? (document.addEventListener("webkitfullscreenchange",
                        m(this, this.handleFullscreenEvent), !1), document.addEventListener("webkitfullscreenerror", m(this, this.handleFullscreenEvent), !1), this.parent.element.webkitRequestFullscreen()) : this.parent.element.msRequestFullscreen && (document.addEventListener("MSFullscreenChange", m(this, this.handleFullscreenEvent), !1), document.addEventListener("MSFullscreenError", m(this, this.handleFullscreenEvent), !1), this.parent.element.msRequestFullscreen())) : this.isFullscreen && (this.requestedFullscreen = !1, document.exitFullscreen ?
                        document.exitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitExitFullscreen ? document.webkitExitFullscreen() : document.msExitFullscreen && document.msExitFullscreen());
                    return a
                },
                setTextInputEnabled: function (a) {
                    if (a) {
                        if (null == La.textInput) {
                            La.textInput = window.document.createElement("input");
                            var b = 0 <= B.navigator.userAgent.indexOf("Android") ? "password" : "text";
                            La.textInput.type = b;
                            La.textInput.style.position = "absolute";
                            La.textInput.style.opacity = "0";
                            La.textInput.style.color =
                                "transparent";
                            La.textInput.value = La.dummyCharacter;
                            La.textInput.autocapitalize = "off";
                            La.textInput.autocorrect = "off";
                            La.textInput.autocomplete = "off";
                            La.textInput.style.left = "0px";
                            La.textInput.style.top = "50%";
                            (new Ya("(iPad|iPhone|iPod).*OS 8_", "gi")).match(window.navigator.userAgent) ? (La.textInput.style.fontSize = "0px", La.textInput.style.width = "0px", La.textInput.style.height = "0px") : (La.textInput.style.width = "1px", La.textInput.style.height = "1px");
                            La.textInput.style.pointerEvents = "none";
                            La.textInput.style.zIndex =
                                "-10000000"
                        }
                        null == La.textInput.parentNode && this.parent.element.appendChild(La.textInput);
                        this.textInputEnabled || (La.textInput.addEventListener("input", m(this, this.handleInputEvent), !0), La.textInput.addEventListener("blur", m(this, this.handleFocusEvent), !0), La.textInput.addEventListener("cut", m(this, this.handleCutOrCopyEvent), !0), La.textInput.addEventListener("copy", m(this, this.handleCutOrCopyEvent), !0), La.textInput.addEventListener("paste", m(this, this.handlePasteEvent), !0), La.textInput.addEventListener("compositionstart",
                            m(this, this.handleCompositionstartEvent), !0), La.textInput.addEventListener("compositionend", m(this, this.handleCompositionendEvent), !0));
                        La.textInput.focus();
                        La.textInput.select()
                    } else null != La.textInput && (La.textInput.blur(), La.textInput.removeEventListener("input", m(this, this.handleInputEvent), !0), La.textInput.removeEventListener("blur", m(this, this.handleFocusEvent), !0), La.textInput.removeEventListener("cut", m(this, this.handleCutOrCopyEvent), !0), La.textInput.removeEventListener("copy", m(this, this.handleCutOrCopyEvent),
                        !0), La.textInput.removeEventListener("paste", m(this, this.handlePasteEvent), !0), La.textInput.removeEventListener("compositionstart", m(this, this.handleCompositionstartEvent), !0), La.textInput.removeEventListener("compositionend", m(this, this.handleCompositionendEvent), !0));
                    return this.textInputEnabled = a
                },
                setTextInputRect: function (a) {
                    return this.textInputRect = a
                },
                handleCompositionstartEvent: function (a) {
                    this.imeCompositionActive = !0
                },
                handleCompositionendEvent: function (a) {
                    this.imeCompositionActive = !1;
                    this.handleInputEvent(a)
                },
                updateSize: function () {
                    if (this.parent.__resizable) {
                        if (null != this.parent.element) {
                            var a = this.parent.element.clientWidth;
                            var b = this.parent.element.clientHeight
                        } else a = window.innerWidth, b = window.innerHeight;
                        if (a != this.cacheElementWidth || b != this.cacheElementHeight) {
                            this.cacheElementWidth = a;
                            this.cacheElementHeight = b;
                            var c = this.resizeElement || 0 == this.setWidth && 0 == this.setHeight;
                            if (null != this.parent.element && (null == this.div || null != this.div && c))
                                if (c) {
                                    if (this.parent.__width != a || this.parent.__height != b) this.parent.__width =
                                        a | 0, this.parent.__height = b | 0, null != this.canvas ? this.parent.element != this.canvas && (this.canvas.width = Math.round(a * this.scale), this.canvas.height = Math.round(b * this.scale), this.canvas.style.width = a + "px", this.canvas.style.height = b + "px") : (this.div.style.width = a + "px", this.div.style.height = b + "px"), this.parent.onResize.dispatch(a | 0, b | 0)
                                } else {
                                    c = 0 != this.setWidth ? a / this.setWidth : 1;
                                    var d = 0 != this.setHeight ? b / this.setHeight : 1,
                                        g = a,
                                        f = b,
                                        k = 0,
                                        q = 0;
                                    c < d ? (f = Math.floor(this.setHeight * c), q = Math.floor((b - f) / 2)) : (g = Math.floor(this.setWidth *
                                        d), k = Math.floor((a - g) / 2));
                                    null != this.canvas ? this.parent.element != this.canvas && (this.canvas.style.width = g + "px", this.canvas.style.height = f + "px", this.canvas.style.marginLeft = k + "px", this.canvas.style.marginTop = q + "px") : (this.div.style.width = g + "px", this.div.style.height = f + "px", this.div.style.marginLeft = k + "px", this.div.style.marginTop = q + "px")
                                }
                        }
                    }
                },
                __class__: La
            };
            var Yl = function () {
            };
            h["lime._internal.format.BMP"] = Yl;
            Yl.__name__ = "lime._internal.format.BMP";
            Yl.encode = function (a, b) {
                if (a.get_premultiplied() || 0 !=
                    a.get_format()) a = a.clone(), a.set_premultiplied(!1), a.set_format(0);
                null == b && (b = Sf.RGB);
                var c = 14,
                    d = 40,
                    g = a.width * a.height * 4;
                if (null != b) switch (b._hx_index) {
                    case 0:
                        g = (3 * a.width + 3 * a.width % 4) * a.height;
                        break;
                    case 1:
                        d = 108;
                        break;
                    case 2:
                        c = 0, g += a.width * a.height
                }
                var f = new Db(new ArrayBuffer(c + d + g)),
                    k = 0;
                0 < c && (f.b[k++] = 66, f.b[k++] = 77, f.setInt32(k, f.length), k += 4, f.setUInt16(k, 0), k += 2, f.setUInt16(k, 0), k += 2, f.setInt32(k, c + d), k += 4);
                f.setInt32(k, d);
                k += 4;
                f.setInt32(k, a.width);
                k += 4;
                f.setInt32(k, b == Sf.ICO ? 2 * a.height : a.height);
                k += 4;
                f.setUInt16(k, 1);
                k += 2;
                f.setUInt16(k, b == Sf.RGB ? 24 : 32);
                k += 2;
                f.setInt32(k, b == Sf.BITFIELD ? 3 : 0);
                k += 4;
                f.setInt32(k, g);
                k += 4;
                f.setInt32(k, 11824);
                k += 4;
                f.setInt32(k, 11824);
                k += 4;
                f.setInt32(k, 0);
                k += 4;
                f.setInt32(k, 0);
                k += 4;
                if (b == Sf.BITFIELD)
                    for (f.setInt32(k, 16711680), k += 4, f.setInt32(k, 65280), k += 4, f.setInt32(k, 255), k += 4, f.setInt32(k, -16777216), k += 4, f.b[k++] = 32, f.b[k++] = 110, f.b[k++] = 105, f.b[k++] = 87, c = 0; 48 > c;) c++, f.b[k++] = 0;
                d = a.getPixels(new vd(0, 0, a.width, a.height), 1);
                if (null != b) switch (b._hx_index) {
                    case 0:
                        c =
                            0;
                        for (b = a.height; c < b;) {
                            var q = c++;
                            q = 4 * (a.height - 1 - q) * a.width;
                            for (var l = 0, h = a.width; l < h;) {
                                l++;
                                q++;
                                var n = d.b[q++];
                                var r = d.b[q++];
                                var t = d.b[q++];
                                f.b[k++] = t;
                                f.b[k++] = r;
                                f.b[k++] = n
                            }
                            g = 0;
                            for (var p = 3 * a.width % 4; g < p;) g++, f.b[k++] = 0
                        }
                        break;
                    case 1:
                        c = 0;
                        for (b = a.height; c < b;)
                            for (q = c++, q = 4 * (a.height - 1 - q) * a.width, l = 0, h = a.width; l < h;) {
                                l++;
                                var y = d.b[q++];
                                n = d.b[q++];
                                r = d.b[q++];
                                t = d.b[q++];
                                f.b[k++] = t;
                                f.b[k++] = r;
                                f.b[k++] = n;
                                f.b[k++] = y
                            }
                        break;
                    case 2:
                        g = new Db(new ArrayBuffer(a.width * a.height));
                        c = p = 0;
                        for (b = a.height; c < b;)
                            for (q = c++,
                                     q = 4 * (a.height - 1 - q) * a.width, l = 0, h = a.width; l < h;) l++, y = d.b[q++], n = d.b[q++], r = d.b[q++], t = d.b[q++], f.b[k++] = t, f.b[k++] = r, f.b[k++] = n, f.b[k++] = y, g.b[p++] = 0;
                        f.blit(k, g, 0, a.width * a.height)
                }
                return f
            };
            var Sf = N["lime._internal.format.BMPType"] = {
                __ename__: "lime._internal.format.BMPType",
                __constructs__: null,
                RGB: {
                    _hx_name: "RGB",
                    _hx_index: 0,
                    __enum__: "lime._internal.format.BMPType",
                    toString: u
                },
                BITFIELD: {
                    _hx_name: "BITFIELD",
                    _hx_index: 1,
                    __enum__: "lime._internal.format.BMPType",
                    toString: u
                },
                ICO: {
                    _hx_name: "ICO",
                    _hx_index: 2,
                    __enum__: "lime._internal.format.BMPType",
                    toString: u
                }
            };
            Sf.__constructs__ = [Sf.RGB, Sf.BITFIELD, Sf.ICO];
            var De = function () {
            };
            h["lime._internal.format.Base64"] = De;
            De.__name__ = "lime._internal.format.Base64";
            De.encode = function (a) {
                var b = [],
                    c = De.DICTIONARY,
                    d = De.EXTENDED_DICTIONARY,
                    g = a.length,
                    f = Math.floor(g / 3),
                    k = 2 * f;
                b.length = 2 * Math.ceil(g / 3);
                for (var q = 0, l = 0, h; l < k;) h = a.b[q] << 16 | a.b[q + 1] << 8 | a.b[q + 2], b[l] = d[h >> 12 & 4095], b[l + 1] = d[h & 4095], q += 3, l += 2;
                switch (g - 3 * f) {
                    case 1:
                        h = a.b[q] << 16;
                        b[l] = d[h >> 12 & 4095];
                        b[l + 1] = "==";
                        break;
                    case 2:
                        h = a.b[q] << 16 | a.b[q + 1] << 8, b[l] = d[h >> 12 & 4095], b[l + 1] = c[h >> 6 & 63] + "="
                }
                return b.join("")
            };
            var Zl = function () {
            };
            h["lime._internal.format.Deflate"] = Zl;
            Zl.__name__ = "lime._internal.format.Deflate";
            Zl.decompress = function (a) {
                a = pako.inflateRaw(a.b.bufferValue);
                return Db.ofData(a)
            };
            var $l = function () {
            };
            h["lime._internal.format.GZip"] = $l;
            $l.__name__ = "lime._internal.format.GZip";
            $l.decompress = function (a) {
                a = pako.ungzip(a.b.bufferValue);
                return Db.ofData(a)
            };
            var am = function () {
            };
            h["lime._internal.format.JPEG"] =
                am;
            am.__name__ = "lime._internal.format.JPEG";
            am.encode = function (a, b) {
                if (a.get_premultiplied() || 0 != a.get_format()) a = a.clone(), a.set_premultiplied(!1), a.set_format(0);
                Aa.convertToCanvas(a, !1);
                if (null != a.buffer.__srcCanvas) {
                    a = a.buffer.__srcCanvas.toDataURL("image/jpeg", b / 100);
                    a = window.atob(a.split(";base64,")[1]);
                    b = new Db(new ArrayBuffer(a.length));
                    for (var c = 0, d = a.length; c < d;) {
                        var g = c++;
                        b.b[g] = M.cca(a, g)
                    }
                    return b
                }
                return null
            };
            var bm = function () {
            };
            h["lime._internal.format.LZMA"] = bm;
            bm.__name__ = "lime._internal.format.LZMA";
            bm.decompress = function (a) {
                var b = LZMA.decompress;
                a = a.b.bufferValue;
                a = null != a ? new Uint8Array(a, 0) : null;
                b = b(a);
                return "string" == typeof b ? Db.ofString(b) : Db.ofData(b)
            };
            var fl = function () {
            };
            h["lime._internal.format.PNG"] = fl;
            fl.__name__ = "lime._internal.format.PNG";
            fl.encode = function (a) {
                if (a.get_premultiplied() || 0 != a.get_format()) a = a.clone(), a.set_premultiplied(!1), a.set_format(0);
                Aa.convertToCanvas(a, !1);
                if (null != a.buffer.__srcCanvas) {
                    a = a.buffer.__srcCanvas.toDataURL("image/png");
                    a = window.atob(a.split(";base64,")[1]);
                    for (var b = new Db(new ArrayBuffer(a.length)), c = 0, d = a.length; c < d;) {
                        var g = c++;
                        b.b[g] = M.cca(a, g)
                    }
                    return b
                }
                return null
            };
            var cm = function () {
            };
            h["lime._internal.format.Zlib"] = cm;
            cm.__name__ = "lime._internal.format.Zlib";
            cm.decompress = function (a) {
                a = pako.inflate(a.b.bufferValue);
                return Db.ofData(a)
            };
            var Aa = function () {
            };
            h["lime._internal.graphics.ImageCanvasUtil"] = Aa;
            Aa.__name__ = "lime._internal.graphics.ImageCanvasUtil";
            Aa.colorTransform = function (a, b, c) {
                Aa.convertToData(a);
                Xb.colorTransform(a, b, c)
            };
            Aa.convertToCanvas =
                function (a, b) {
                    null == b && (b = !1);
                    var c = a.buffer;
                    null != c.__srcImage ? (null == c.__srcCanvas && (Aa.createCanvas(a, c.__srcImage.width, c.__srcImage.height), c.__srcContext.drawImage(c.__srcImage, 0, 0)), c.__srcImage = null) : null == c.__srcCanvas && null != c.data ? (a.set_transparent(!0), Aa.createCanvas(a, c.width, c.height), Aa.createImageData(a), c.__srcContext.putImageData(c.__srcImageData, 0, 0)) : a.type == ed.DATA && null != c.__srcImageData && a.dirty && (c.__srcContext.putImageData(c.__srcImageData, 0, 0), a.dirty = !1);
                    b ? (c.data = null,
                        c.__srcImageData = null) : null == c.data && null != c.__srcImageData && (c.data = c.__srcImageData.data);
                    a.type = ed.CANVAS
                };
            Aa.convertToData = function (a, b) {
                null == b && (b = !1);
                var c = a.buffer;
                null != c.__srcImage && Aa.convertToCanvas(a);
                if (null != c.__srcCanvas && null == c.data) Aa.createImageData(a), a.type == ed.CANVAS && (a.dirty = !1);
                else if (a.type == ed.CANVAS && null != c.__srcCanvas && a.dirty) {
                    if (null == c.__srcImageData) Aa.createImageData(a);
                    else {
                        c.__srcImageData = c.__srcContext.getImageData(0, 0, c.width, c.height);
                        var d = c.__srcImageData.data.buffer;
                        d = null != d ? new Uint8Array(d) : null;
                        c.data = d
                    }
                    a.dirty = !1
                }
                b && (a.buffer.__srcCanvas = null, a.buffer.__srcContext = null);
                a.type = ed.DATA
            };
            Aa.copyChannel = function (a, b, c, d, g, f) {
                Aa.convertToData(b);
                Aa.convertToData(a);
                Xb.copyChannel(a, b, c, d, g, f)
            };
            Aa.copyPixels = function (a, b, c, d, g, f, k) {
                null == k && (k = !1);
                null == d || d.x >= a.width || d.y >= a.height || null == c || 1 > c.width || 1 > c.height || (null != g && g.get_transparent() && (null == f && (f = new lg), b = b.clone(), b.copyChannel(g, new vd(c.x + f.x, c.y + f.y, c.width, c.height), new lg(c.x, c.y), Cg.ALPHA,
                    Cg.ALPHA)), Aa.convertToCanvas(a, !0), k || a.get_transparent() && b.get_transparent() && a.buffer.__srcContext.clearRect(d.x + a.offsetX, d.y + a.offsetY, c.width + a.offsetX, c.height + a.offsetY), Aa.convertToCanvas(b), null != b.buffer.get_src() && (a.buffer.__srcContext.globalCompositeOperation = "source-over", a.buffer.__srcContext.drawImage(b.buffer.get_src(), c.x + b.offsetX | 0, c.y + b.offsetY | 0, c.width | 0, c.height | 0, d.x + a.offsetX | 0, d.y + a.offsetY | 0, c.width | 0, c.height | 0)), a.dirty = !0, a.version++)
            };
            Aa.createCanvas = function (a, b,
                                        c) {
                var d = a.buffer;
                null == d.__srcCanvas && (d.__srcCanvas = window.document.createElement("canvas"), d.__srcCanvas.width = b, d.__srcCanvas.height = c, a.get_transparent() || d.__srcCanvas.setAttribute("moz-opaque", "true"), d.__srcContext = d.__srcCanvas.getContext("2d", {
                    alpha: a.get_transparent()
                }))
            };
            Aa.createImageData = OpenflShared.createImageData;
            Aa.fillRect = function (a, b, c, d) {
                Aa.convertToCanvas(a);
                if (1 == d) {
                    d = c >> 16 & 255;
                    var g = c >> 8 & 255;
                    var f = c & 255;
                    c = a.get_transparent() ? c >> 24 & 255 : 255
                } else d = c >> 24 & 255, g = c >> 16 & 255, f = c >> 8 & 255, c = a.get_transparent() ? c & 255 : 255;
                0 == b.x && 0 == b.y && b.width == a.width && b.height == a.height && a.get_transparent() && 0 == c ? a.buffer.__srcCanvas.width = a.buffer.width : (255 > c && a.buffer.__srcContext.clearRect(b.x + a.offsetX, b.y + a.offsetY, b.width + a.offsetX, b.height +
                    a.offsetY), 0 < c && (a.buffer.__srcContext.fillStyle = "rgba(" + d + ", " + g + ", " + f + ", " + c / 255 + ")", a.buffer.__srcContext.fillRect(b.x + a.offsetX, b.y + a.offsetY, b.width + a.offsetX, b.height + a.offsetY)), a.dirty = !0, a.version++)
            };
            Aa.getPixel = function (a, b, c, d) {
                Aa.convertToData(a);
                return Xb.getPixel(a, b, c, d)
            };
            Aa.getPixels = function (a, b, c) {
                Aa.convertToData(a);
                return Xb.getPixels(a, b, c)
            };
            Aa.setPixel = function (a, b, c, d, g) {
                Aa.convertToData(a);
                Xb.setPixel(a, b, c, d, g)
            };
            Aa.sync = function (a, b) {
                null != a && (a.type != ed.CANVAS || null == a.buffer.__srcCanvas &&
                null == a.buffer.data ? a.type == ed.DATA && Aa.convertToData(a, b) : Aa.convertToCanvas(a, b))
            };
            var Xb = function () {
            };
            h["lime._internal.graphics.ImageDataUtil"] = Xb;
            Xb.__name__ = "lime._internal.graphics.ImageDataUtil";
            Xb.colorTransform = function (a, b, c) {
                var d = a.buffer.data;
                if (null != d) {
                    var g = a.buffer.format,
                        f = a.buffer.premultiplied;
                    b = new Ee(a, b);
                    var k = Wc.getAlphaTable(c),
                        q = Wc.getRedTable(c),
                        l = Wc.getGreenTable(c);
                    c = Wc.getBlueTable(c);
                    for (var h, n, r = 0, t = 0, p = b.height; t < p;) {
                        h = t++;
                        h = b.byteOffset + b.stride * h;
                        for (var y = 0, u =
                            b.width; y < u;) {
                            n = y++;
                            n = h + 4 * n;
                            var x = g,
                                z = f;
                            null == z && (z = !1);
                            null == x && (x = 0);
                            switch (x) {
                                case 0:
                                    r = (d[n] & 255) << 24 | (d[n + 1] & 255) << 16 | (d[n + 2] & 255) << 8 | d[n + 3] & 255;
                                    break;
                                case 1:
                                    r = (d[n + 1] & 255) << 24 | (d[n + 2] & 255) << 16 | (d[n + 3] & 255) << 8 | d[n] & 255;
                                    break;
                                case 2:
                                    r = (d[n + 2] & 255) << 24 | (d[n + 1] & 255) << 16 | (d[n] & 255) << 8 | d[n + 3] & 255
                            }
                            z && 0 != (r & 255) && 255 != (r & 255) && (P.unmult = 255 / (r & 255), r = (P.__clamp[Math.round((r >>> 24 & 255) * P.unmult)] & 255) << 24 | (P.__clamp[Math.round((r >>> 16 & 255) * P.unmult)] & 255) << 16 | (P.__clamp[Math.round((r >>> 8 & 255) * P.unmult)] &
                                255) << 8 | r & 255);
                            r = (q[r >>> 24 & 255] & 255) << 24 | (l[r >>> 16 & 255] & 255) << 16 | (c[r >>> 8 & 255] & 255) << 8 | k[r & 255] & 255;
                            x = g;
                            z = f;
                            null == z && (z = !1);
                            null == x && (x = 0);
                            z && (0 == (r & 255) ? 0 != r && (r = 0) : 255 != (r & 255) && (P.a16 = P.__alpha16[r & 255], r = ((r >>> 24 & 255) * P.a16 >> 16 & 255) << 24 | ((r >>> 16 & 255) * P.a16 >> 16 & 255) << 16 | ((r >>> 8 & 255) * P.a16 >> 16 & 255) << 8 | r & 255));
                            switch (x) {
                                case 0:
                                    d[n] = r >>> 24 & 255;
                                    d[n + 1] = r >>> 16 & 255;
                                    d[n + 2] = r >>> 8 & 255;
                                    d[n + 3] = r & 255;
                                    break;
                                case 1:
                                    d[n] = r & 255;
                                    d[n + 1] = r >>> 24 & 255;
                                    d[n + 2] = r >>> 16 & 255;
                                    d[n + 3] = r >>> 8 & 255;
                                    break;
                                case 2:
                                    d[n] = r >>> 8 & 255, d[n +
                                    1] = r >>> 16 & 255, d[n + 2] = r >>> 24 & 255, d[n + 3] = r & 255
                            }
                        }
                    }
                    a.dirty = !0;
                    a.version++
                }
            };
            Xb.copyChannel = function (a, b, c, d, g, f) {
                switch (f._hx_index) {
                    case 0:
                        var k = 0;
                        break;
                    case 1:
                        k = 1;
                        break;
                    case 2:
                        k = 2;
                        break;
                    case 3:
                        k = 3
                }
                switch (g._hx_index) {
                    case 0:
                        var q = 0;
                        break;
                    case 1:
                        q = 1;
                        break;
                    case 2:
                        q = 2;
                        break;
                    case 3:
                        q = 3
                }
                g = b.buffer.data;
                f = a.buffer.data;
                if (null != g && null != f) {
                    c = new Ee(b, c);
                    d = new Ee(a, new vd(d.x, d.y, c.width, c.height));
                    var l = b.buffer.format,
                        h = a.buffer.format;
                    b = b.buffer.premultiplied;
                    for (var n = a.buffer.premultiplied, r, t, p = 0, y =
                        0, u = 0, x = 0, z = d.height; x < z;) {
                        t = x++;
                        r = c.byteOffset + c.stride * t;
                        t = d.byteOffset + d.stride * t;
                        for (var A = 0, m = d.width; A < m;) {
                            A++;
                            var Q = l,
                                O = b;
                            null == O && (O = !1);
                            null == Q && (Q = 0);
                            switch (Q) {
                                case 0:
                                    p = (g[r] & 255) << 24 | (g[r + 1] & 255) << 16 | (g[r + 2] & 255) << 8 | g[r + 3] & 255;
                                    break;
                                case 1:
                                    p = (g[r + 1] & 255) << 24 | (g[r + 2] & 255) << 16 | (g[r + 3] & 255) << 8 | g[r] & 255;
                                    break;
                                case 2:
                                    p = (g[r + 2] & 255) << 24 | (g[r + 1] & 255) << 16 | (g[r] & 255) << 8 | g[r + 3] & 255
                            }
                            O && 0 != (p & 255) && 255 != (p & 255) && (P.unmult = 255 / (p & 255), p = (P.__clamp[Math.round((p >>> 24 & 255) * P.unmult)] & 255) << 24 | (P.__clamp[Math.round((p >>>
                                16 & 255) * P.unmult)] & 255) << 16 | (P.__clamp[Math.round((p >>> 8 & 255) * P.unmult)] & 255) << 8 | p & 255);
                            Q = h;
                            O = n;
                            null == O && (O = !1);
                            null == Q && (Q = 0);
                            switch (Q) {
                                case 0:
                                    y = (f[t] & 255) << 24 | (f[t + 1] & 255) << 16 | (f[t + 2] & 255) << 8 | f[t + 3] & 255;
                                    break;
                                case 1:
                                    y = (f[t + 1] & 255) << 24 | (f[t + 2] & 255) << 16 | (f[t + 3] & 255) << 8 | f[t] & 255;
                                    break;
                                case 2:
                                    y = (f[t + 2] & 255) << 24 | (f[t + 1] & 255) << 16 | (f[t] & 255) << 8 | f[t + 3] & 255
                            }
                            O && 0 != (y & 255) && 255 != (y & 255) && (P.unmult = 255 / (y & 255), y = (P.__clamp[Math.round((y >>> 24 & 255) * P.unmult)] & 255) << 24 | (P.__clamp[Math.round((y >>> 16 & 255) * P.unmult)] &
                                255) << 16 | (P.__clamp[Math.round((y >>> 8 & 255) * P.unmult)] & 255) << 8 | y & 255);
                            switch (q) {
                                case 0:
                                    u = p >>> 24 & 255;
                                    break;
                                case 1:
                                    u = p >>> 16 & 255;
                                    break;
                                case 2:
                                    u = p >>> 8 & 255;
                                    break;
                                case 3:
                                    u = p & 255
                            }
                            switch (k) {
                                case 0:
                                    y = (u & 255) << 24 | (y >>> 16 & 255) << 16 | (y >>> 8 & 255) << 8 | y & 255;
                                    break;
                                case 1:
                                    y = (y >>> 24 & 255) << 24 | (u & 255) << 16 | (y >>> 8 & 255) << 8 | y & 255;
                                    break;
                                case 2:
                                    y = (y >>> 24 & 255) << 24 | (y >>> 16 & 255) << 16 | (u & 255) << 8 | y & 255;
                                    break;
                                case 3:
                                    y = (y >>> 24 & 255) << 24 | (y >>> 16 & 255) << 16 | (y >>> 8 & 255) << 8 | u & 255
                            }
                            Q = h;
                            O = n;
                            null == O && (O = !1);
                            null == Q && (Q = 0);
                            O && (0 == (y & 255) ? 0 != y &&
                                (y = 0) : 255 != (y & 255) && (P.a16 = P.__alpha16[y & 255], y = ((y >>> 24 & 255) * P.a16 >> 16 & 255) << 24 | ((y >>> 16 & 255) * P.a16 >> 16 & 255) << 16 | ((y >>> 8 & 255) * P.a16 >> 16 & 255) << 8 | y & 255));
                            switch (Q) {
                                case 0:
                                    f[t] = y >>> 24 & 255;
                                    f[t + 1] = y >>> 16 & 255;
                                    f[t + 2] = y >>> 8 & 255;
                                    f[t + 3] = y & 255;
                                    break;
                                case 1:
                                    f[t] = y & 255;
                                    f[t + 1] = y >>> 24 & 255;
                                    f[t + 2] = y >>> 16 & 255;
                                    f[t + 3] = y >>> 8 & 255;
                                    break;
                                case 2:
                                    f[t] = y >>> 8 & 255, f[t + 1] = y >>> 16 & 255, f[t + 2] = y >>> 24 & 255, f[t + 3] = y & 255
                            }
                            r += 4;
                            t += 4
                        }
                    }
                    a.dirty = !0;
                    a.version++
                }
            };
            Xb.copyPixels = function (a, b, c, d, g, f, k) {
                null == k && (k = !1);
                if (a.width == b.width && a.height ==
                    b.height && c.width == b.width && c.height == b.height && 0 == c.x && 0 == c.y && 0 == d.x && 0 == d.y && null == g && null == f && 0 == k && a.get_format() == b.get_format()) a.buffer.data.set(b.buffer.data);
                else {
                    var q = b.buffer.data,
                        l = a.buffer.data;
                    if (null == q || null == l) return;
                    c = new Ee(b, c);
                    var h = new vd(d.x, d.y, c.width, c.height);
                    h = new Ee(a, h);
                    var n = b.buffer.format,
                        r = a.buffer.format,
                        t = 0,
                        p = 0,
                        y = b.buffer.premultiplied,
                        u = a.buffer.premultiplied,
                        x = b.buffer.bitsPerPixel / 8 | 0,
                        z = a.buffer.bitsPerPixel / 8 | 0,
                        A = null != g && g.get_transparent(),
                        m = k || A && !a.get_transparent() ||
                            !k && !a.get_transparent() && b.get_transparent();
                    if (A)
                        if (z = g.buffer.data, b = g.buffer.format, k = 0, g = new Ee(g, new vd(c.x + (null == f ? 0 : f.x), c.y + (null == f ? 0 : f.y), c.width, c.height)), h.clip(d.x | 0, d.y | 0, g.width, g.height), m)
                            for (m = 0, x = h.height; m < x;)
                                for (A = m++, d = c.byteOffset + c.stride * A, f = h.byteOffset + h.stride * A, A = g.byteOffset + g.stride * A, N = 0, F = h.width; N < F;) {
                                    N++;
                                    var Q = n;
                                    var O = y;
                                    null == O && (O = !1);
                                    null == Q && (Q = 0);
                                    switch (Q) {
                                        case 0:
                                            t = (q[d] & 255) << 24 | (q[d + 1] & 255) << 16 | (q[d + 2] & 255) << 8 | q[d + 3] & 255;
                                            break;
                                        case 1:
                                            t = (q[d + 1] & 255) << 24 |
                                                (q[d + 2] & 255) << 16 | (q[d + 3] & 255) << 8 | q[d] & 255;
                                            break;
                                        case 2:
                                            t = (q[d + 2] & 255) << 24 | (q[d + 1] & 255) << 16 | (q[d] & 255) << 8 | q[d + 3] & 255
                                    }
                                    O && 0 != (t & 255) && 255 != (t & 255) && (P.unmult = 255 / (t & 255), t = (P.__clamp[Math.round((t >>> 24 & 255) * P.unmult)] & 255) << 24 | (P.__clamp[Math.round((t >>> 16 & 255) * P.unmult)] & 255) << 16 | (P.__clamp[Math.round((t >>> 8 & 255) * P.unmult)] & 255) << 8 | t & 255);
                                    Q = r;
                                    O = u;
                                    null == O && (O = !1);
                                    null == Q && (Q = 0);
                                    switch (Q) {
                                        case 0:
                                            p = (l[f] & 255) << 24 | (l[f + 1] & 255) << 16 | (l[f + 2] & 255) << 8 | l[f + 3] & 255;
                                            break;
                                        case 1:
                                            p = (l[f + 1] & 255) << 24 | (l[f + 2] & 255) <<
                                                16 | (l[f + 3] & 255) << 8 | l[f] & 255;
                                            break;
                                        case 2:
                                            p = (l[f + 2] & 255) << 24 | (l[f + 1] & 255) << 16 | (l[f] & 255) << 8 | l[f + 3] & 255
                                    }
                                    O && 0 != (p & 255) && 255 != (p & 255) && (P.unmult = 255 / (p & 255), p = (P.__clamp[Math.round((p >>> 24 & 255) * P.unmult)] & 255) << 24 | (P.__clamp[Math.round((p >>> 16 & 255) * P.unmult)] & 255) << 16 | (P.__clamp[Math.round((p >>> 8 & 255) * P.unmult)] & 255) << 8 | p & 255);
                                    Q = b;
                                    O = !1;
                                    null == O && (O = !1);
                                    null == Q && (Q = 0);
                                    switch (Q) {
                                        case 0:
                                            k = (z[A] & 255) << 24 | (z[A + 1] & 255) << 16 | (z[A + 2] & 255) << 8 | z[A + 3] & 255;
                                            break;
                                        case 1:
                                            k = (z[A + 1] & 255) << 24 | (z[A + 2] & 255) << 16 | (z[A + 3] & 255) <<
                                                8 | z[A] & 255;
                                            break;
                                        case 2:
                                            k = (z[A + 2] & 255) << 24 | (z[A + 1] & 255) << 16 | (z[A] & 255) << 8 | z[A + 3] & 255
                                    }
                                    O && 0 != (k & 255) && 255 != (k & 255) && (P.unmult = 255 / (k & 255), k = (P.__clamp[Math.round((k >>> 24 & 255) * P.unmult)] & 255) << 24 | (P.__clamp[Math.round((k >>> 16 & 255) * P.unmult)] & 255) << 16 | (P.__clamp[Math.round((k >>> 8 & 255) * P.unmult)] & 255) << 8 | k & 255);
                                    O = (k & 255) / 255 * ((t & 255) / 255);
                                    if (0 < O) {
                                        var v = (p & 255) / 255;
                                        var w = 1 - O;
                                        Q = O + v * w;
                                        D = P.__clamp[Math.round(((t >>> 24 & 255) * O + (p >>> 24 & 255) * v * w) / Q)];
                                        p = (D & 255) << 24 | (p >>> 16 & 255) << 16 | (p >>> 8 & 255) << 8 | p & 255;
                                        D = P.__clamp[Math.round(((t >>>
                                            16 & 255) * O + (p >>> 16 & 255) * v * w) / Q)];
                                        p = (p >>> 24 & 255) << 24 | (D & 255) << 16 | (p >>> 8 & 255) << 8 | p & 255;
                                        O = P.__clamp[Math.round(((t >>> 8 & 255) * O + (p >>> 8 & 255) * v * w) / Q)];
                                        p = (p >>> 24 & 255) << 24 | (p >>> 16 & 255) << 16 | (O & 255) << 8 | p & 255;
                                        Q = P.__clamp[Math.round(255 * Q)];
                                        p = (p >>> 24 & 255) << 24 | (p >>> 16 & 255) << 16 | (p >>> 8 & 255) << 8 | Q & 255;
                                        Q = r;
                                        O = u;
                                        null == O && (O = !1);
                                        null == Q && (Q = 0);
                                        O && (0 == (p & 255) ? 0 != p && (p = 0) : 255 != (p & 255) && (P.a16 = P.__alpha16[p & 255], p = ((p >>> 24 & 255) * P.a16 >> 16 & 255) << 24 | ((p >>> 16 & 255) * P.a16 >> 16 & 255) << 16 | ((p >>> 8 & 255) * P.a16 >> 16 & 255) << 8 | p & 255));
                                        switch (Q) {
                                            case 0:
                                                l[f] =
                                                    p >>> 24 & 255;
                                                l[f + 1] = p >>> 16 & 255;
                                                l[f + 2] = p >>> 8 & 255;
                                                l[f + 3] = p & 255;
                                                break;
                                            case 1:
                                                l[f] = p & 255;
                                                l[f + 1] = p >>> 24 & 255;
                                                l[f + 2] = p >>> 16 & 255;
                                                l[f + 3] = p >>> 8 & 255;
                                                break;
                                            case 2:
                                                l[f] = p >>> 8 & 255, l[f + 1] = p >>> 16 & 255, l[f + 2] = p >>> 24 & 255, l[f + 3] = p & 255
                                        }
                                    }
                                    d += 4;
                                    f += 4;
                                    A += 4
                                } else
                            for (m = 0, x = h.height; m < x;)
                                for (A = m++, d = c.byteOffset + c.stride * A, f = h.byteOffset + h.stride * A, A = g.byteOffset + g.stride * A, N = 0, F = h.width; N < F;) {
                                    N++;
                                    Q = n;
                                    O = y;
                                    null == O && (O = !1);
                                    null == Q && (Q = 0);
                                    switch (Q) {
                                        case 0:
                                            t = (q[d] & 255) << 24 | (q[d + 1] & 255) << 16 | (q[d + 2] & 255) << 8 | q[d + 3] & 255;
                                            break;
                                        case 1:
                                            t =
                                                (q[d + 1] & 255) << 24 | (q[d + 2] & 255) << 16 | (q[d + 3] & 255) << 8 | q[d] & 255;
                                            break;
                                        case 2:
                                            t = (q[d + 2] & 255) << 24 | (q[d + 1] & 255) << 16 | (q[d] & 255) << 8 | q[d + 3] & 255
                                    }
                                    O && 0 != (t & 255) && 255 != (t & 255) && (P.unmult = 255 / (t & 255), t = (P.__clamp[Math.round((t >>> 24 & 255) * P.unmult)] & 255) << 24 | (P.__clamp[Math.round((t >>> 16 & 255) * P.unmult)] & 255) << 16 | (P.__clamp[Math.round((t >>> 8 & 255) * P.unmult)] & 255) << 8 | t & 255);
                                    Q = b;
                                    O = !1;
                                    null == O && (O = !1);
                                    null == Q && (Q = 0);
                                    switch (Q) {
                                        case 0:
                                            k = (z[A] & 255) << 24 | (z[A + 1] & 255) << 16 | (z[A + 2] & 255) << 8 | z[A + 3] & 255;
                                            break;
                                        case 1:
                                            k = (z[A + 1] & 255) <<
                                                24 | (z[A + 2] & 255) << 16 | (z[A + 3] & 255) << 8 | z[A] & 255;
                                            break;
                                        case 2:
                                            k = (z[A + 2] & 255) << 24 | (z[A + 1] & 255) << 16 | (z[A] & 255) << 8 | z[A + 3] & 255
                                    }
                                    O && 0 != (k & 255) && 255 != (k & 255) && (P.unmult = 255 / (k & 255), k = (P.__clamp[Math.round((k >>> 24 & 255) * P.unmult)] & 255) << 24 | (P.__clamp[Math.round((k >>> 16 & 255) * P.unmult)] & 255) << 16 | (P.__clamp[Math.round((k >>> 8 & 255) * P.unmult)] & 255) << 8 | k & 255);
                                    D = Math.round((k & 255) / 255 * (t & 255));
                                    t = (t >>> 24 & 255) << 24 | (t >>> 16 & 255) << 16 | (t >>> 8 & 255) << 8 | D & 255;
                                    Q = r;
                                    O = u;
                                    null == O && (O = !1);
                                    null == Q && (Q = 0);
                                    O && (0 == (t & 255) ? 0 != t && (t = 0) : 255 !=
                                        (t & 255) && (P.a16 = P.__alpha16[t & 255], t = ((t >>> 24 & 255) * P.a16 >> 16 & 255) << 24 | ((t >>> 16 & 255) * P.a16 >> 16 & 255) << 16 | ((t >>> 8 & 255) * P.a16 >> 16 & 255) << 8 | t & 255));
                                    switch (Q) {
                                        case 0:
                                            l[f] = t >>> 24 & 255;
                                            l[f + 1] = t >>> 16 & 255;
                                            l[f + 2] = t >>> 8 & 255;
                                            l[f + 3] = t & 255;
                                            break;
                                        case 1:
                                            l[f] = t & 255;
                                            l[f + 1] = t >>> 24 & 255;
                                            l[f + 2] = t >>> 16 & 255;
                                            l[f + 3] = t >>> 8 & 255;
                                            break;
                                        case 2:
                                            l[f] = t >>> 8 & 255, l[f + 1] = t >>> 16 & 255, l[f + 2] = t >>> 24 & 255, l[f + 3] = t & 255
                                    }
                                    d += 4;
                                    f += 4;
                                    A += 4
                                } else if (m)
                        for (m = 0, x = h.height; m < x;) {
                            A = m++;
                            d = c.byteOffset + c.stride * A;
                            f = h.byteOffset + h.stride * A;
                            for (var N = 0, F = h.width; N <
                            F;) {
                                N++;
                                Q = n;
                                O = y;
                                null == O && (O = !1);
                                null == Q && (Q = 0);
                                switch (Q) {
                                    case 0:
                                        t = (q[d] & 255) << 24 | (q[d + 1] & 255) << 16 | (q[d + 2] & 255) << 8 | q[d + 3] & 255;
                                        break;
                                    case 1:
                                        t = (q[d + 1] & 255) << 24 | (q[d + 2] & 255) << 16 | (q[d + 3] & 255) << 8 | q[d] & 255;
                                        break;
                                    case 2:
                                        t = (q[d + 2] & 255) << 24 | (q[d + 1] & 255) << 16 | (q[d] & 255) << 8 | q[d + 3] & 255
                                }
                                O && 0 != (t & 255) && 255 != (t & 255) && (P.unmult = 255 / (t & 255), t = (P.__clamp[Math.round((t >>> 24 & 255) * P.unmult)] & 255) << 24 | (P.__clamp[Math.round((t >>> 16 & 255) * P.unmult)] & 255) << 16 | (P.__clamp[Math.round((t >>> 8 & 255) * P.unmult)] & 255) << 8 | t & 255);
                                Q = r;
                                O =
                                    u;
                                null == O && (O = !1);
                                null == Q && (Q = 0);
                                switch (Q) {
                                    case 0:
                                        p = (l[f] & 255) << 24 | (l[f + 1] & 255) << 16 | (l[f + 2] & 255) << 8 | l[f + 3] & 255;
                                        break;
                                    case 1:
                                        p = (l[f + 1] & 255) << 24 | (l[f + 2] & 255) << 16 | (l[f + 3] & 255) << 8 | l[f] & 255;
                                        break;
                                    case 2:
                                        p = (l[f + 2] & 255) << 24 | (l[f + 1] & 255) << 16 | (l[f] & 255) << 8 | l[f + 3] & 255
                                }
                                O && 0 != (p & 255) && 255 != (p & 255) && (P.unmult = 255 / (p & 255), p = (P.__clamp[Math.round((p >>> 24 & 255) * P.unmult)] & 255) << 24 | (P.__clamp[Math.round((p >>> 16 & 255) * P.unmult)] & 255) << 16 | (P.__clamp[Math.round((p >>> 8 & 255) * P.unmult)] & 255) << 8 | p & 255);
                                O = (t & 255) / 255;
                                v = (p &
                                    255) / 255;
                                w = 1 - O;
                                Q = O + v * w;
                                if (0 == Q) p = 0;
                                else {
                                    var D = P.__clamp[Math.round(((t >>> 24 & 255) * O + (p >>> 24 & 255) * v * w) / Q)];
                                    p = (D & 255) << 24 | (p >>> 16 & 255) << 16 | (p >>> 8 & 255) << 8 | p & 255;
                                    D = P.__clamp[Math.round(((t >>> 16 & 255) * O + (p >>> 16 & 255) * v * w) / Q)];
                                    p = (p >>> 24 & 255) << 24 | (D & 255) << 16 | (p >>> 8 & 255) << 8 | p & 255;
                                    O = P.__clamp[Math.round(((t >>> 8 & 255) * O + (p >>> 8 & 255) * v * w) / Q)];
                                    p = (p >>> 24 & 255) << 24 | (p >>> 16 & 255) << 16 | (O & 255) << 8 | p & 255;
                                    Q = P.__clamp[Math.round(255 * Q)];
                                    p = (p >>> 24 & 255) << 24 | (p >>> 16 & 255) << 16 | (p >>> 8 & 255) << 8 | Q & 255
                                }
                                Q = r;
                                O = u;
                                null == O && (O = !1);
                                null == Q &&
                                (Q = 0);
                                O && (0 == (p & 255) ? 0 != p && (p = 0) : 255 != (p & 255) && (P.a16 = P.__alpha16[p & 255], p = ((p >>> 24 & 255) * P.a16 >> 16 & 255) << 24 | ((p >>> 16 & 255) * P.a16 >> 16 & 255) << 16 | ((p >>> 8 & 255) * P.a16 >> 16 & 255) << 8 | p & 255));
                                switch (Q) {
                                    case 0:
                                        l[f] = p >>> 24 & 255;
                                        l[f + 1] = p >>> 16 & 255;
                                        l[f + 2] = p >>> 8 & 255;
                                        l[f + 3] = p & 255;
                                        break;
                                    case 1:
                                        l[f] = p & 255;
                                        l[f + 1] = p >>> 24 & 255;
                                        l[f + 2] = p >>> 16 & 255;
                                        l[f + 3] = p >>> 8 & 255;
                                        break;
                                    case 2:
                                        l[f] = p >>> 8 & 255, l[f + 1] = p >>> 16 & 255, l[f + 2] = p >>> 24 & 255, l[f + 3] = p & 255
                                }
                                d += 4;
                                f += 4
                            }
                        } else if (n == r && y == u && x == z)
                        for (m = 0, x = h.height; m < x;) A = m++, d = c.byteOffset + c.stride *
                            A, f = h.byteOffset + h.stride * A, l.set(q.subarray(d, d + h.width * z), f);
                    else
                        for (m = 0, x = h.height; m < x;)
                            for (A = m++, d = c.byteOffset + c.stride * A, f = h.byteOffset + h.stride * A, N = 0, F = h.width; N < F;) {
                                N++;
                                Q = n;
                                O = y;
                                null == O && (O = !1);
                                null == Q && (Q = 0);
                                switch (Q) {
                                    case 0:
                                        t = (q[d] & 255) << 24 | (q[d + 1] & 255) << 16 | (q[d + 2] & 255) << 8 | q[d + 3] & 255;
                                        break;
                                    case 1:
                                        t = (q[d + 1] & 255) << 24 | (q[d + 2] & 255) << 16 | (q[d + 3] & 255) << 8 | q[d] & 255;
                                        break;
                                    case 2:
                                        t = (q[d + 2] & 255) << 24 | (q[d + 1] & 255) << 16 | (q[d] & 255) << 8 | q[d + 3] & 255
                                }
                                O && 0 != (t & 255) && 255 != (t & 255) && (P.unmult = 255 / (t & 255), t = (P.__clamp[Math.round((t >>>
                                    24 & 255) * P.unmult)] & 255) << 24 | (P.__clamp[Math.round((t >>> 16 & 255) * P.unmult)] & 255) << 16 | (P.__clamp[Math.round((t >>> 8 & 255) * P.unmult)] & 255) << 8 | t & 255);
                                Q = r;
                                O = u;
                                null == O && (O = !1);
                                null == Q && (Q = 0);
                                O && (0 == (t & 255) ? 0 != t && (t = 0) : 255 != (t & 255) && (P.a16 = P.__alpha16[t & 255], t = ((t >>> 24 & 255) * P.a16 >> 16 & 255) << 24 | ((t >>> 16 & 255) * P.a16 >> 16 & 255) << 16 | ((t >>> 8 & 255) * P.a16 >> 16 & 255) << 8 | t & 255));
                                switch (Q) {
                                    case 0:
                                        l[f] = t >>> 24 & 255;
                                        l[f + 1] = t >>> 16 & 255;
                                        l[f + 2] = t >>> 8 & 255;
                                        l[f + 3] = t & 255;
                                        break;
                                    case 1:
                                        l[f] = t & 255;
                                        l[f + 1] = t >>> 24 & 255;
                                        l[f + 2] = t >>> 16 & 255;
                                        l[f +
                                        3] = t >>> 8 & 255;
                                        break;
                                    case 2:
                                        l[f] = t >>> 8 & 255, l[f + 1] = t >>> 16 & 255, l[f + 2] = t >>> 24 & 255, l[f + 3] = t & 255
                                }
                                d += 4;
                                f += 4
                            }
                }
                a.dirty = !0;
                a.version++
            };
            Xb.fillRect = function (a, b, c, d) {
                switch (d) {
                    case 1:
                        c = (c >>> 16 & 255) << 24 | (c >>> 8 & 255) << 16 | (c & 255) << 8 | c >>> 24 & 255;
                        break;
                    case 2:
                        c = (c >>> 8 & 255) << 24 | (c >>> 16 & 255) << 16 | (c >>> 24 & 255) << 8 | c & 255
                }
                a.get_transparent() || (c = (c >>> 24 & 255) << 24 | (c >>> 16 & 255) << 16 | (c >>> 8 & 255) << 8 | 255);
                var g = a.buffer.data;
                if (null != g) {
                    d = a.buffer.format;
                    var f = a.buffer.premultiplied;
                    f && (0 == (c & 255) ? 0 != c && (c = 0) : 255 != (c & 255) && (P.a16 =
                        P.__alpha16[c & 255], c = ((c >>> 24 & 255) * P.a16 >> 16 & 255) << 24 | ((c >>> 16 & 255) * P.a16 >> 16 & 255) << 16 | ((c >>> 8 & 255) * P.a16 >> 16 & 255) << 8 | c & 255));
                    b = new Ee(a, b);
                    for (var k, q = 0, l = b.height; q < l;) {
                        f = q++;
                        k = b.byteOffset + b.stride * f;
                        for (var h = 0, n = b.width; h < n;) {
                            f = h++;
                            var r = k + 4 * f,
                                t = d;
                            f = !1;
                            null == f && (f = !1);
                            null == t && (t = 0);
                            f && (0 == (c & 255) ? 0 != c && (c = 0) : 255 != (c & 255) && (P.a16 = P.__alpha16[c & 255], c = ((c >>> 24 & 255) * P.a16 >> 16 & 255) << 24 | ((c >>> 16 & 255) * P.a16 >> 16 & 255) << 16 | ((c >>> 8 & 255) * P.a16 >> 16 & 255) << 8 | c & 255));
                            switch (t) {
                                case 0:
                                    g[r] = c >>> 24 & 255;
                                    g[r + 1] =
                                        c >>> 16 & 255;
                                    g[r + 2] = c >>> 8 & 255;
                                    g[r + 3] = c & 255;
                                    break;
                                case 1:
                                    g[r] = c & 255;
                                    g[r + 1] = c >>> 24 & 255;
                                    g[r + 2] = c >>> 16 & 255;
                                    g[r + 3] = c >>> 8 & 255;
                                    break;
                                case 2:
                                    g[r] = c >>> 8 & 255, g[r + 1] = c >>> 16 & 255, g[r + 2] = c >>> 24 & 255, g[r + 3] = c & 255
                            }
                        }
                    }
                    a.dirty = !0;
                    a.version++
                }
            };
            Xb.gaussianBlur = function (a, b, c, d, g, f, k, q, l) {
                null == k && (k = 1);
                null == f && (f = 4);
                null == g && (g = 4);
                (q = a.get_premultiplied()) && a.set_premultiplied(!1);
                Dd.blur(a, b, c, d, g, f, k);
                a.dirty = !0;
                a.version++;
                q && a.set_premultiplied(!0);
                return a
            };
            Xb.getPixel = function (a, b, c, d) {
                var g = 0,
                    f = a.buffer.data;
                b =
                    4 * (c + a.offsetY) * a.buffer.width + 4 * (b + a.offsetX);
                c = a.buffer.format;
                a = a.buffer.premultiplied;
                null == a && (a = !1);
                null == c && (c = 0);
                switch (c) {
                    case 0:
                        g = (f[b] & 255) << 24 | (f[b + 1] & 255) << 16 | (f[b + 2] & 255) << 8 | f[b + 3] & 255;
                        break;
                    case 1:
                        g = (f[b + 1] & 255) << 24 | (f[b + 2] & 255) << 16 | (f[b + 3] & 255) << 8 | f[b] & 255;
                        break;
                    case 2:
                        g = (f[b + 2] & 255) << 24 | (f[b + 1] & 255) << 16 | (f[b] & 255) << 8 | f[b + 3] & 255
                }
                a && 0 != (g & 255) && 255 != (g & 255) && (P.unmult = 255 / (g & 255), g = (P.__clamp[Math.round((g >>> 24 & 255) * P.unmult)] & 255) << 24 | (P.__clamp[Math.round((g >>> 16 & 255) * P.unmult)] &
                    255) << 16 | (P.__clamp[Math.round((g >>> 8 & 255) * P.unmult)] & 255) << 8 | g & 255);
                g = (g >>> 24 & 255) << 24 | (g >>> 16 & 255) << 16 | (g >>> 8 & 255) << 8 | 0;
                switch (d) {
                    case 1:
                        return (g & 255) << 24 | (g >>> 24 & 255) << 16 | (g >>> 16 & 255) << 8 | g >>> 8 & 255;
                    case 2:
                        return (g >>> 8 & 255) << 24 | (g >>> 16 & 255) << 16 | (g >>> 24 & 255) << 8 | g & 255;
                    default:
                        return g
                }
            };
            Xb.getPixels = function (a, b, c) {
                if (null == a.buffer.data) return null;
                var d = new Db(new ArrayBuffer(4 * (b.width * b.height | 0))),
                    g = a.buffer.data,
                    f = a.buffer.format,
                    k = a.buffer.premultiplied;
                a = new Ee(a, b);
                for (var q, l, h = b = l = 0, n = a.height; h <
                n;) {
                    q = h++;
                    q = a.byteOffset + a.stride * q;
                    for (var r = 0, t = a.width; r < t;) {
                        r++;
                        var p = f,
                            y = k;
                        null == y && (y = !1);
                        null == p && (p = 0);
                        switch (p) {
                            case 0:
                                l = (g[q] & 255) << 24 | (g[q + 1] & 255) << 16 | (g[q + 2] & 255) << 8 | g[q + 3] & 255;
                                break;
                            case 1:
                                l = (g[q + 1] & 255) << 24 | (g[q + 2] & 255) << 16 | (g[q + 3] & 255) << 8 | g[q] & 255;
                                break;
                            case 2:
                                l = (g[q + 2] & 255) << 24 | (g[q + 1] & 255) << 16 | (g[q] & 255) << 8 | g[q + 3] & 255
                        }
                        y && 0 != (l & 255) && 255 != (l & 255) && (P.unmult = 255 / (l & 255), l = (P.__clamp[Math.round((l >>> 24 & 255) * P.unmult)] & 255) << 24 | (P.__clamp[Math.round((l >>> 16 & 255) * P.unmult)] & 255) << 16 | (P.__clamp[Math.round((l >>>
                            8 & 255) * P.unmult)] & 255) << 8 | l & 255);
                        switch (c) {
                            case 1:
                                l = (l & 255) << 24 | (l >>> 24 & 255) << 16 | (l >>> 16 & 255) << 8 | l >>> 8 & 255;
                                break;
                            case 2:
                                l = (l >>> 8 & 255) << 24 | (l >>> 16 & 255) << 16 | (l >>> 24 & 255) << 8 | l & 255
                        }
                        d.b[b++] = l >>> 24 & 255;
                        d.b[b++] = l >>> 16 & 255;
                        d.b[b++] = l >>> 8 & 255;
                        d.b[b++] = l & 255;
                        q += 4
                    }
                }
                return d
            };
            Xb.multiplyAlpha = function (a) {
                var b = a.buffer.data;
                if (null != b && a.buffer.transparent) {
                    for (var c = a.buffer.format, d = 0, g = 0, f = b.length / 4 | 0; g < f;) {
                        var k = g++,
                            q = 4 * k,
                            l = c,
                            h = !1;
                        null == h && (h = !1);
                        null == l && (l = 0);
                        switch (l) {
                            case 0:
                                d = (b[q] & 255) << 24 | (b[q + 1] &
                                    255) << 16 | (b[q + 2] & 255) << 8 | b[q + 3] & 255;
                                break;
                            case 1:
                                d = (b[q + 1] & 255) << 24 | (b[q + 2] & 255) << 16 | (b[q + 3] & 255) << 8 | b[q] & 255;
                                break;
                            case 2:
                                d = (b[q + 2] & 255) << 24 | (b[q + 1] & 255) << 16 | (b[q] & 255) << 8 | b[q + 3] & 255
                        }
                        h && 0 != (d & 255) && 255 != (d & 255) && (P.unmult = 255 / (d & 255), d = (P.__clamp[Math.round((d >>> 24 & 255) * P.unmult)] & 255) << 24 | (P.__clamp[Math.round((d >>> 16 & 255) * P.unmult)] & 255) << 16 | (P.__clamp[Math.round((d >>> 8 & 255) * P.unmult)] & 255) << 8 | d & 255);
                        k *= 4;
                        q = c;
                        l = !0;
                        null == l && (l = !1);
                        null == q && (q = 0);
                        l && (0 == (d & 255) ? 0 != d && (d = 0) : 255 != (d & 255) && (P.a16 = P.__alpha16[d &
                        255], d = ((d >>> 24 & 255) * P.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * P.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * P.a16 >> 16 & 255) << 8 | d & 255));
                        switch (q) {
                            case 0:
                                b[k] = d >>> 24 & 255;
                                b[k + 1] = d >>> 16 & 255;
                                b[k + 2] = d >>> 8 & 255;
                                b[k + 3] = d & 255;
                                break;
                            case 1:
                                b[k] = d & 255;
                                b[k + 1] = d >>> 24 & 255;
                                b[k + 2] = d >>> 16 & 255;
                                b[k + 3] = d >>> 8 & 255;
                                break;
                            case 2:
                                b[k] = d >>> 8 & 255, b[k + 1] = d >>> 16 & 255, b[k + 2] = d >>> 24 & 255, b[k + 3] = d & 255
                        }
                    }
                    a.buffer.premultiplied = !0;
                    a.dirty = !0;
                    a.version++
                }
            };
            Xb.setFormat = function (a, b) {
                var c = a.buffer.data;
                if (null != c) {
                    var d = c.length / 4 | 0;
                    switch (a.get_format()) {
                        case 0:
                            var g =
                                0;
                            var f = 1;
                            var k = 2;
                            var q = 3;
                            break;
                        case 1:
                            g = 1;
                            f = 2;
                            k = 3;
                            q = 0;
                            break;
                        case 2:
                            g = 2, f = 1, k = 0, q = 3
                    }
                    switch (b) {
                        case 0:
                            var l = 0;
                            var h = 1;
                            var n = 2;
                            var r = 3;
                            break;
                        case 1:
                            l = 1;
                            h = 2;
                            n = 3;
                            r = 0;
                            break;
                        case 2:
                            l = 2, h = 1, n = 0, r = 3
                    }
                    for (var t = 0; t < d;) {
                        var p = 4 * t++;
                        var y = c[p + g];
                        var u = c[p + f];
                        var x = c[p + k];
                        var z = c[p + q];
                        c[p + l] = y;
                        c[p + h] = u;
                        c[p + n] = x;
                        c[p + r] = z
                    }
                    a.buffer.format = b;
                    a.dirty = !0;
                    a.version++
                }
            };
            Xb.setPixel = function (a, b, c, d, g) {
                switch (g) {
                    case 1:
                        d = (d >>> 16 & 255) << 24 | (d >>> 8 & 255) << 16 | (d & 255) << 8 | d >>> 24 & 255;
                        break;
                    case 2:
                        d = (d >>> 8 & 255) << 24 | (d >>> 16 & 255) <<
                            16 | (d >>> 24 & 255) << 8 | d & 255
                }
                var f = 0,
                    k = a.buffer.data,
                    q = 4 * (c + a.offsetY) * a.buffer.width + 4 * (b + a.offsetX);
                g = a.buffer.format;
                var l = a.buffer.premultiplied;
                null == l && (l = !1);
                null == g && (g = 0);
                switch (g) {
                    case 0:
                        f = (k[q] & 255) << 24 | (k[q + 1] & 255) << 16 | (k[q + 2] & 255) << 8 | k[q + 3] & 255;
                        break;
                    case 1:
                        f = (k[q + 1] & 255) << 24 | (k[q + 2] & 255) << 16 | (k[q + 3] & 255) << 8 | k[q] & 255;
                        break;
                    case 2:
                        f = (k[q + 2] & 255) << 24 | (k[q + 1] & 255) << 16 | (k[q] & 255) << 8 | k[q + 3] & 255
                }
                l && 0 != (f & 255) && 255 != (f & 255) && (P.unmult = 255 / (f & 255), f = (P.__clamp[Math.round((f >>> 24 & 255) * P.unmult)] &
                    255) << 24 | (P.__clamp[Math.round((f >>> 16 & 255) * P.unmult)] & 255) << 16 | (P.__clamp[Math.round((f >>> 8 & 255) * P.unmult)] & 255) << 8 | f & 255);
                d = (d >>> 24 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 8 & 255) << 8 | f & 255;
                k = a.buffer.data;
                q = 4 * (c + a.offsetY) * a.buffer.width + 4 * (b + a.offsetX);
                g = a.buffer.format;
                l = a.buffer.premultiplied;
                null == l && (l = !1);
                null == g && (g = 0);
                l && (0 == (d & 255) ? 0 != d && (d = 0) : 255 != (d & 255) && (P.a16 = P.__alpha16[d & 255], d = ((d >>> 24 & 255) * P.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * P.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * P.a16 >> 16 & 255) << 8 | d & 255));
                switch (g) {
                    case 0:
                        k[q] =
                            d >>> 24 & 255;
                        k[q + 1] = d >>> 16 & 255;
                        k[q + 2] = d >>> 8 & 255;
                        k[q + 3] = d & 255;
                        break;
                    case 1:
                        k[q] = d & 255;
                        k[q + 1] = d >>> 24 & 255;
                        k[q + 2] = d >>> 16 & 255;
                        k[q + 3] = d >>> 8 & 255;
                        break;
                    case 2:
                        k[q] = d >>> 8 & 255, k[q + 1] = d >>> 16 & 255, k[q + 2] = d >>> 24 & 255, k[q + 3] = d & 255
                }
                a.dirty = !0;
                a.version++
            };
            Xb.unmultiplyAlpha = function (a) {
                var b = a.buffer.data;
                if (null != b) {
                    for (var c = a.buffer.format, d = 0, g = 0, f = b.length / 4 | 0; g < f;) {
                        var k = g++,
                            q = 4 * k,
                            l = c,
                            h = !0;
                        null == h && (h = !1);
                        null == l && (l = 0);
                        switch (l) {
                            case 0:
                                d = (b[q] & 255) << 24 | (b[q + 1] & 255) << 16 | (b[q + 2] & 255) << 8 | b[q + 3] & 255;
                                break;
                            case 1:
                                d =
                                    (b[q + 1] & 255) << 24 | (b[q + 2] & 255) << 16 | (b[q + 3] & 255) << 8 | b[q] & 255;
                                break;
                            case 2:
                                d = (b[q + 2] & 255) << 24 | (b[q + 1] & 255) << 16 | (b[q] & 255) << 8 | b[q + 3] & 255
                        }
                        h && 0 != (d & 255) && 255 != (d & 255) && (P.unmult = 255 / (d & 255), d = (P.__clamp[Math.round((d >>> 24 & 255) * P.unmult)] & 255) << 24 | (P.__clamp[Math.round((d >>> 16 & 255) * P.unmult)] & 255) << 16 | (P.__clamp[Math.round((d >>> 8 & 255) * P.unmult)] & 255) << 8 | d & 255);
                        k *= 4;
                        q = c;
                        l = !1;
                        null == l && (l = !1);
                        null == q && (q = 0);
                        l && (0 == (d & 255) ? 0 != d && (d = 0) : 255 != (d & 255) && (P.a16 = P.__alpha16[d & 255], d = ((d >>> 24 & 255) * P.a16 >> 16 & 255) << 24 |
                            ((d >>> 16 & 255) * P.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * P.a16 >> 16 & 255) << 8 | d & 255));
                        switch (q) {
                            case 0:
                                b[k] = d >>> 24 & 255;
                                b[k + 1] = d >>> 16 & 255;
                                b[k + 2] = d >>> 8 & 255;
                                b[k + 3] = d & 255;
                                break;
                            case 1:
                                b[k] = d & 255;
                                b[k + 1] = d >>> 24 & 255;
                                b[k + 2] = d >>> 16 & 255;
                                b[k + 3] = d >>> 8 & 255;
                                break;
                            case 2:
                                b[k] = d >>> 8 & 255, b[k + 1] = d >>> 16 & 255, b[k + 2] = d >>> 24 & 255, b[k + 3] = d & 255
                        }
                    }
                    a.buffer.premultiplied = !1;
                    a.dirty = !0;
                    a.version++
                }
            };
            var Ee = function (a, b) {
                this.image = a;
                null == b ? this.rect = a.get_rect() : (0 > b.x && (b.x = 0), 0 > b.y && (b.y = 0), b.x + b.width > a.width && (b.width = a.width - b.x), b.y +
                b.height > a.height && (b.height = a.height - b.y), 0 > b.width && (b.width = 0), 0 > b.height && (b.height = 0), this.rect = b);
                this.stride = a.buffer.get_stride();
                this.__update()
            };
            h["lime._internal.graphics._ImageDataUtil.ImageDataView"] = Ee;
            Ee.__name__ = "lime._internal.graphics._ImageDataUtil.ImageDataView";
            Ee.prototype = {
                clip: function (a, b, c, d) {
                    null == this.tempRect && (this.tempRect = new vd);
                    this.tempRect.setTo(a, b, c, d);
                    this.rect.intersection(this.tempRect, this.rect);
                    this.__update()
                },
                __update: function () {
                    this.x = Math.ceil(this.rect.x);
                    this.y = Math.ceil(this.rect.y);
                    this.width = Math.floor(this.rect.width);
                    this.height = Math.floor(this.rect.height);
                    this.byteOffset = this.stride * (this.y + this.image.offsetY) + 4 * (this.x + this.image.offsetX)
                },
                __class__: Ee
            };
            var Dd = function () {
            };
            h["lime._internal.graphics.StackBlur"] = Dd;
            Dd.__name__ = "lime._internal.graphics.StackBlur";
            Dd.blur = function (a, b, c, d, g, f, k) {
                a.copyPixels(b, c, d);
                Dd.__stackBlurCanvasRGBA(a, c.width | 0, c.height | 0, g, f, k)
            };
            Dd.__stackBlurCanvasRGBA = function (a, b, c, d, g, f) {
                d = Math.round(d) >> 1;
                g = Math.round(g) >>
                    1;
                if (null != Dd.MUL_TABLE && (d >= Dd.MUL_TABLE.length && (d = Dd.MUL_TABLE.length - 1), g >= Dd.MUL_TABLE.length && (g = Dd.MUL_TABLE.length - 1), !(0 > d || 0 > g))) {
                    1 > f && (f = 1);
                    3 < f && (f = 3);
                    a = a.get_data();
                    var k, q = d + d + 1;
                    var l = g + g + 1;
                    var h = b - 1,
                        n = c - 1,
                        r = d + 1,
                        t = g + 1,
                        p = new Dg,
                        y = p;
                    var u = 1;
                    for (var x = q; u < x;) u++, y = y.n = new Dg;
                    y.n = p;
                    var z = q = new Dg;
                    u = 1;
                    for (x = l; u < x;) u++, z = z.n = new Dg;
                    z.n = q;
                    for (var A = Dd.MUL_TABLE[d], m = Dd.SHG_TABLE[d], Q = Dd.MUL_TABLE[g], O = Dd.SHG_TABLE[g]; 0 < f;) {
                        --f;
                        var v = k = 0;
                        var w = A,
                            N = m;
                        var F = c;
                        do {
                            var D = a[k];
                            l = r * D;
                            var H = a[k + 1];
                            var ta =
                                r * H;
                            var I = a[k + 2];
                            var J = r * I;
                            u = a[k + 3];
                            var E = r * u;
                            y = p;
                            z = r;
                            do y.r = D, y.g = H, y.b = I, y.a = u, y = y.n; while (-1 < --z);
                            u = 1;
                            for (x = r; u < x;) z = u++, z = k + ((h < z ? h : z) << 2), l += y.r = a[z], ta += y.g = a[z + 1], J += y.b = a[z + 2], E += y.a = a[z + 3], y = y.n;
                            x = p;
                            y = 0;
                            for (u = b; y < u;) z = y++, a[k++] = l * w >>> N, a[k++] = ta * w >>> N, a[k++] = J * w >>> N, a[k++] = E * w >>> N, z = z + d + 1, z = v + (z < h ? z : h) << 2, l -= x.r - (x.r = a[z]), ta -= x.g - (x.g = a[z + 1]), J -= x.b - (x.b = a[z + 2]), E -= x.a - (x.a = a[z + 3]), x = x.n;
                            v += b
                        } while (0 < --F);
                        w = Q;
                        N = O;
                        F = 0;
                        for (v = b; F < v;) {
                            y = F++;
                            k = y << 2;
                            D = a[k];
                            l = t * D;
                            H = a[k + 1];
                            ta = t * H;
                            I = a[k + 2];
                            J = t *
                                I;
                            u = a[k + 3];
                            E = t * u;
                            z = q;
                            k = 0;
                            for (x = t; k < x;) k++, z.r = D, z.g = H, z.b = I, z.a = u, z = z.n;
                            u = b;
                            x = 1;
                            for (D = g + 1; x < D;) H = x++, k = u + y << 2, l += z.r = a[k], ta += z.g = a[k + 1], J += z.b = a[k + 2], E += z.a = a[k + 3], z = z.n, H < n && (u += b);
                            k = y;
                            x = q;
                            if (0 < f)
                                for (D = 0, H = c; D < H;) I = D++, z = k << 2, u = E * w >>> N, a[z + 3] = u, 0 < u ? (a[z] = l * w >>> N, a[z + 1] = ta * w >>> N, a[z + 2] = J * w >>> N) : a[z] = a[z + 1] = a[z + 2] = 0, z = I + t, z = y + (z < n ? z : n) * b << 2, l -= x.r - (x.r = a[z]), ta -= x.g - (x.g = a[z + 1]), J -= x.b - (x.b = a[z + 2]), E -= x.a - (x.a = a[z + 3]), x = x.n, k += b;
                            else
                                for (var R = 0, jc = c; R < jc;) {
                                    var rc = R++;
                                    z = k << 2;
                                    u = E * w >>> N;
                                    a[z + 3] = u;
                                    0 <
                                    u ? (u = 255 / u, D = (l * w >>> N) * u | 0, H = (ta * w >>> N) * u | 0, I = (J * w >>> N) * u | 0, a[z] = 255 < D ? 255 : D, a[z + 1] = 255 < H ? 255 : H, a[z + 2] = 255 < I ? 255 : I) : a[z] = a[z + 1] = a[z + 2] = 0;
                                    z = rc + t;
                                    z = y + (z < n ? z : n) * b << 2;
                                    l -= x.r - (x.r = a[z]);
                                    ta -= x.g - (x.g = a[z + 1]);
                                    J -= x.b - (x.b = a[z + 2]);
                                    E -= x.a - (x.a = a[z + 3]);
                                    x = x.n;
                                    k += b
                                }
                        }
                    }
                }
            };
            var Dg = function () {
                this.a = this.b = this.g = this.r = 0;
                this.n = null
            };
            h["lime._internal.graphics.BlurStack"] = Dg;
            Dg.__name__ = "lime._internal.graphics.BlurStack";
            Dg.prototype = {
                __class__: Dg
            };
            var Fc = function (a, b) {
                if (null != a) try {
                    this.value = a(), this.isComplete = !0
                } catch (c) {
                    Ha.lastError = c, this.error = aa.caught(c).unwrap(), this.isError = !0
                }
            };
            h["lime.app.Future"] = Fc;
            Fc.__name__ = "lime.app.Future";
            Fc.withValue = function (a) {
                var b = new Fc;
                b.isComplete = !0;
                b.value = a;
                return b
            };
            Fc.prototype = {
                onComplete: function (a) {
                    null != a && (this.isComplete ? a(this.value) : this.isError || (null == this.__completeListeners && (this.__completeListeners = []), this.__completeListeners.push(a)));
                    return this
                },
                onError: function (a) {
                    null != a && (this.isError ? a(this.error) : this.isComplete || (null == this.__errorListeners &&
                    (this.__errorListeners = []), this.__errorListeners.push(a)));
                    return this
                },
                onProgress: function (a) {
                    null != a && (null == this.__progressListeners && (this.__progressListeners = []), this.__progressListeners.push(a));
                    return this
                },
                then: function (a) {
                    if (this.isComplete) return a(this.value);
                    if (this.isError) {
                        var b = new Fc;
                        b.isError = !0;
                        b.error = this.error;
                        return b
                    }
                    var c = new Fd;
                    this.onError(m(c, c.error));
                    this.onProgress(m(c, c.progress));
                    this.onComplete(function (b) {
                        b = a(b);
                        b.onError(m(c, c.error));
                        b.onComplete(m(c, c.complete))
                    });
                    return c.future
                },
                __class__: Fc
            };
            var Fd = function () {
                this.future = new Fc
            };
            h["lime.app.Promise"] = Fd;
            Fd.__name__ = "lime.app.Promise";
            Fd.prototype = {
                complete: function (a) {
                    if (!this.future.isError && (this.future.isComplete = !0, this.future.value = a, null != this.future.__completeListeners)) {
                        for (var b = 0, c = this.future.__completeListeners; b < c.length;) {
                            var d = c[b];
                            ++b;
                            d(a)
                        }
                        this.future.__completeListeners = null
                    }
                    return this
                },
                completeWith: function (a) {
                    a.onComplete(m(this, this.complete));
                    a.onError(m(this, this.error));
                    a.onProgress(m(this,
                        this.progress));
                    return this
                },
                error: function (a) {
                    if (!this.future.isComplete && (this.future.isError = !0, this.future.error = a, null != this.future.__errorListeners)) {
                        for (var b = 0, c = this.future.__errorListeners; b < c.length;) {
                            var d = c[b];
                            ++b;
                            d(a)
                        }
                        this.future.__errorListeners = null
                    }
                    return this
                },
                progress: function (a, b) {
                    if (!this.future.isError && !this.future.isComplete && null != this.future.__progressListeners)
                        for (var c = 0, d = this.future.__progressListeners; c < d.length;) {
                            var g = d[c];
                            ++c;
                            g(a, b)
                        }
                    return this
                },
                __class__: Fd
            };
            var gl =
                function () {
                    this.canceled = !1;
                    this.__listeners = [];
                    this.__priorities = [];
                    this.__repeat = []
                };
            h["lime.app._Event_Float_Float_Float_Void"] = gl;
            gl.__name__ = "lime.app._Event_Float_Float_Float_Void";
            gl.prototype = {
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a, b, c) {
                    this.canceled = !1;
                    for (var d = this.__listeners, g = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), g[f] ? ++f : this.remove(d[f]),
                        !this.canceled);) ;
                },
                __class__: gl
            };
            var hl = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Float_Float_Int_Void"] = hl;
            hl.__name__ = "lime.app._Event_Float_Float_Int_Void";
            hl.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function () {
                    this.canceled = !0
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a, b, c) {
                    this.canceled = !1;
                    for (var d = this.__listeners, g = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), g[f] ? ++f : this.remove(d[f]), !this.canceled);) ;
                },
                __class__: hl
            };
            var nh = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Float_Float_Void"] = nh;
            nh.__name__ = "lime.app._Event_Float_Float_Void";
            nh.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b,
                        1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a, b) {
                    this.canceled = !1;
                    for (var c = this.__listeners, d = this.__repeat, g = 0; g < c.length && (c[g](a, b), d[g] ? ++g : this.remove(c[g]), !this.canceled);) ;
                },
                __class__: nh
            };
            var il = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Float_Float_lime_ui_MouseButton_Void"] = il;
            il.__name__ = "lime.app._Event_Float_Float_lime_ui_MouseButton_Void";
            il.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function () {
                    this.canceled = !0
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a,
                                    b, c) {
                    this.canceled = !1;
                    for (var d = this.__listeners, g = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), g[f] ? ++f : this.remove(d[f]), !this.canceled);) ;
                },
                __class__: il
            };
            var jl = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void"] = jl;
            jl.__name__ = "lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void";
            jl.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function () {
                    this.canceled = !0
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a, b, c) {
                    this.canceled = !1;
                    for (var d = this.__listeners, g = this.__repeat, f = 0; f <
                    d.length && (d[f](a, b, c), g[f] ? ++f : this.remove(d[f]), !this.canceled);) ;
                },
                __class__: jl
            };
            var kl = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Int_Float_Void"] = kl;
            kl.__name__ = "lime.app._Event_Int_Float_Void";
            kl.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a, b) {
                    this.canceled = !1;
                    for (var c = this.__listeners, d = this.__repeat, g = 0; g < c.length && (c[g](a, b), d[g] ? ++g : this.remove(c[g]), !this.canceled);) ;
                },
                __class__: kl
            };
            var ej = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Int_Int_Void"] = ej;
            ej.__name__ = "lime.app._Event_Int_Int_Void";
            ej.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] ==
                    a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a, b) {
                    this.canceled = !1;
                    for (var c = this.__listeners, d = this.__repeat, g = 0; g < c.length && (c[g](a, b), d[g] ? ++g : this.remove(c[g]), !this.canceled);) ;
                },
                __class__: ej
            };
            var wf = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Int_Void"] = wf;
            wf.__name__ = "lime.app._Event_Int_Void";
            wf.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d =
                        0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat,
                             d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);) ;
                },
                __class__: wf
            };
            var tk = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Int_lime_system_Orientation_Void"] = tk;
            tk.__name__ = "lime.app._Event_Int_lime_system_Orientation_Void";
            tk.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f,
                                0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                __class__: tk
            };
            var ll = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Int_lime_ui_JoystickHatPosition_Void"] = ll;
            ll.__name__ = "lime.app._Event_Int_lime_ui_JoystickHatPosition_Void";
            ll.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                __class__: ll
            };
            var ml = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_String_Int_Int_Void"] = ml;
            ml.__name__ = "lime.app._Event_String_Int_Int_Void";
            ml.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                __class__: ml
            };
            var fj = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_String_Void"] = fj;
            fj.__name__ = "lime.app._Event_String_Void";
            fj.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function () {
                    this.canceled = !0
                },
                has: function (a) {
                    for (var b = 0, c = this.__listeners; b < c.length;) {
                        var d = c[b];
                        ++b;
                        if (d == a) return !0
                    }
                    return !1
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <=
                    --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);) ;
                },
                __class__: fj
            };
            var Nc = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Void_Void"] = Nc;
            Nc.__name__ = "lime.app._Event_Void_Void";
            Nc.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function () {
                    this.canceled = !1;
                    for (var a = this.__listeners,
                             b = this.__repeat, c = 0; c < a.length && (a[c](), b[c] ? ++c : this.remove(a[c]), !this.canceled);) ;
                },
                __class__: Nc
            };
            var gj = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_lime_graphics_RenderContext_Void"] = gj;
            gj.__name__ = "lime.app._Event_lime_graphics_RenderContext_Void";
            gj.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f,
                                0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function () {
                    this.canceled = !0
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);) ;
                },
                __class__: gj
            };
            var nl = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_lime_ui_GamepadAxis_Float_Void"] = nl;
            nl.__name__ = "lime.app._Event_lime_ui_GamepadAxis_Float_Void";
            nl.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b =
                        this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a, b) {
                    this.canceled = !1;
                    for (var c = this.__listeners, d = this.__repeat, g = 0; g < c.length && (c[g](a, b), d[g] ? ++g : this.remove(c[g]), !this.canceled);) ;
                },
                __class__: nl
            };
            var hj = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_lime_ui_GamepadButton_Void"] = hj;
            hj.__name__ = "lime.app._Event_lime_ui_GamepadButton_Void";
            hj.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);) ;
                },
                __class__: hj
            };
            var ol = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_lime_ui_Gamepad_Void"] = ol;
            ol.__name__ = "lime.app._Event_lime_ui_Gamepad_Void";
            ol.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f,
                                0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);) ;
                },
                __class__: ol
            };
            var pl = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_lime_ui_Joystick_Void"] = pl;
            pl.__name__ = "lime.app._Event_lime_ui_Joystick_Void";
            pl.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <=
                    --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);) ;
                },
                __class__: pl
            };
            var ij = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"] = ij;
            ij.__name__ = "lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void";
            ij.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function () {
                    this.canceled = !0
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function (a, b) {
                    this.canceled = !1;
                    for (var c = this.__listeners, d = this.__repeat, g = 0; g < c.length && (c[g](a, b), d[g] ? ++g : this.remove(c[g]), !this.canceled);) ;
                },
                __class__: ij
            };
            var Eg = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_lime_ui_Touch_Void"] = Eg;
            Eg.__name__ = "lime.app._Event_lime_ui_Touch_Void";
            Eg.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f =
                            d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]),
                        !this.canceled);) ;
                },
                __class__: Eg
            };
            var uk = function () {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_lime_ui_Window_Void"] = uk;
            uk.__name__ = "lime.app._Event_lime_ui_Window_Void";
            uk.prototype = {
                add: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, g = this.__priorities.length; d < g;) {
                        var f = d++;
                        if (c > this.__priorities[f]) {
                            this.__listeners.splice(f, 0, a);
                            this.__priorities.splice(f, 0, c);
                            this.__repeat.splice(f, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function (a) {
                    for (var b = this.__listeners.length; 0 <= --b;) this.__listeners[b] == a && (this.__listeners.splice(b, 1), this.__priorities.splice(b, 1), this.__repeat.splice(b, 1))
                },
                dispatch: function (a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);) ;
                },
                __class__: uk
            };
            var cc = function (a, b, c, d, g, f, k) {
                null == g && (g = -1);
                null == d && (d = -1);
                null == c && (c = 0);
                null == b && (b = 0);
                this.offsetX = b;
                this.offsetY = c;
                this.width = d;
                this.height =
                    g;
                this.version = 0;
                null == k && (k = ed.CANVAS, null != Cd.__current.__worker || Cd.__isWorker) && (k = ed.DATA);
                this.type = k;
                if (null == a) {
                    if (0 < d && 0 < g) switch (this.type._hx_index) {
                        case 0:
                            this.buffer = new Se(null, d, g);
                            Aa.createCanvas(this, d, g);
                            null != f && 0 != f && this.fillRect(new vd(0, 0, d, g), f);
                            break;
                        case 1:
                            a = d * g * 4, a = null != a ? new Uint8Array(a) : null, this.buffer = new Se(a, d, g), null != f && 0 != f && this.fillRect(new vd(0, 0, d, g), f)
                    }
                } else this.__fromImageBuffer(a)
            };
            h["lime.graphics.Image"] = cc;
            cc.__name__ = "lime.graphics.Image";
            cc.fromCanvas =
                function (a) {
                    if (null == a) return null;
                    var b = new Se(null, a.width, a.height);
                    b.set_src(a);
                    a = new cc(b);
                    a.type = ed.CANVAS;
                    return a
                };
            cc.fromFile = function (a) {
                if (null == a) return null;
                var b = new cc;
                return b.__fromFile(a) ? b : null
            };
            cc.loadFromBytes = function (a) {
                if (null == a) return Fc.withValue(null);
                if (cc.__isPNG(a)) var b = "image/png";
                else if (cc.__isJPG(a)) b = "image/jpeg";
                else if (cc.__isGIF(a)) b = "image/gif";
                else if (cc.__isWebP(a)) b = "image/webp";
                else return Fc.withValue(null);
                return Ca.loadImageFromBytes(a, b)
            };
            cc.loadFromFile =
                function (a) {
                    return null == a ? Fc.withValue(null) : Ca.loadImage(a)
                };
            cc.__isGIF = function (a) {
                if (null == a || 6 > a.length) return !1;
                a = a.getString(0, 6);
                return "GIF87a" != a ? "GIF89a" == a : !0
            };
            cc.__isJPG = function (a) {
                return null == a || 4 > a.length ? !1 : 255 == a.b[0] && 216 == a.b[1] && 255 == a.b[a.length - 2] ? 217 == a.b[a.length - 1] : !1
            };
            cc.__isPNG = function (a) {
                return null == a || 8 > a.length ? !1 : 137 == a.b[0] && 80 == a.b[1] && 78 == a.b[2] && 71 == a.b[3] && 13 == a.b[4] && 10 == a.b[5] && 26 == a.b[6] ? 10 == a.b[7] : !1
            };
            cc.__isWebP = function (a) {
                return null == a || 16 > a.length ? !1 :
                    "RIFF" == a.getString(0, 4) ? "WEBP" == a.getString(8, 4) : !1
            };
            cc.prototype = {
                clone: function () {
                    if (null != this.buffer) {
                        this.type == ed.CANVAS ? Aa.convertToCanvas(this) : Aa.convertToData(this);
                        var a = new cc(this.buffer.clone(), this.offsetX, this.offsetY, this.width, this.height, null, this.type);
                        a.version = this.version;
                        return a
                    }
                    return new cc(null, this.offsetX, this.offsetY, this.width, this.height, null, this.type)
                },
                colorTransform: function (a, b) {
                    a = this.__clipRect(a);
                    if (null != this.buffer && null != a) switch (this.type._hx_index) {
                        case 0:
                            Aa.colorTransform(this,
                                a, b);
                            break;
                        case 1:
                            Aa.convertToData(this);
                            Xb.colorTransform(this, a, b);
                            break;
                        case 2:
                            a.offset(this.offsetX, this.offsetY), this.buffer.__srcBitmapData.colorTransform(a.__toFlashRectangle(), Wc.__toFlashColorTransform(b))
                    }
                },
                copyChannel: function (a, b, c, d, g) {
                    b = this.__clipRect(b);
                    if (null != this.buffer && null != b && !(g == Cg.ALPHA && !this.get_transparent() || 0 >= b.width || 0 >= b.height)) switch (b.x + b.width > a.width && (b.width = a.width - b.x), b.y + b.height > a.height && (b.height = a.height - b.y), this.type._hx_index) {
                        case 0:
                            Aa.copyChannel(this,
                                a, b, c, d, g);
                            break;
                        case 1:
                            Aa.convertToData(this);
                            Aa.convertToData(a);
                            Xb.copyChannel(this, a, b, c, d, g);
                            break;
                        case 2:
                            switch (d._hx_index) {
                                case 0:
                                    var f = 1;
                                    break;
                                case 1:
                                    f = 2;
                                    break;
                                case 2:
                                    f = 4;
                                    break;
                                case 3:
                                    f = 8
                            }
                            switch (g._hx_index) {
                                case 0:
                                    var k = 1;
                                    break;
                                case 1:
                                    k = 2;
                                    break;
                                case 2:
                                    k = 4;
                                    break;
                                case 3:
                                    k = 8
                            }
                            b.offset(a.offsetX, a.offsetY);
                            c.offset(this.offsetX, this.offsetY);
                            this.buffer.__srcBitmapData.copyChannel(a.buffer.get_src(), b.__toFlashRectangle(), c.__toFlashPoint(), f, k)
                    }
                },
                copyPixels: function (a, b, c, d, g, f) {
                    null == f && (f = !1);
                    if (null != this.buffer && null != a && !(0 >= b.width || 0 >= b.height || 0 >= this.width || 0 >= this.height)) switch (b.x + b.width > a.width && (b.width = a.width - b.x), b.y + b.height > a.height && (b.height = a.height - b.y), 0 > b.x && (b.width += b.x, b.x = 0), 0 > b.y && (b.height += b.y, b.y = 0), c.x + b.width > this.width && (b.width = this.width - c.x), c.y + b.height > this.height && (b.height = this.height - c.y), 0 > c.x && (b.width += c.x, b.x -= c.x, c.x = 0), 0 > c.y && (b.height += c.y, b.y -= c.y, c.y = 0), a == this && c.x < b.get_right() && c.y < b.get_bottom() && (a = this.clone()), d == a && (null ==
                        g || 0 == g.x && 0 == g.y) && (g = d = null), this.type._hx_index) {
                        case 0:
                            null != d ? (Aa.convertToData(this), Aa.convertToData(a), null != d && Aa.convertToData(d), Xb.copyPixels(this, a, b, c, d, g, f)) : (Aa.convertToCanvas(this), Aa.convertToCanvas(a), Aa.copyPixels(this, a, b, c, d, g, f));
                            break;
                        case 1:
                            Aa.convertToData(this);
                            Aa.convertToData(a);
                            null != d && Aa.convertToData(d);
                            Xb.copyPixels(this, a, b, c, d, g, f);
                            break;
                        case 2:
                            b.offset(a.offsetX, a.offsetY), c.offset(this.offsetX, this.offsetY), null != d && null != g && g.offset(d.offsetX, d.offsetY), this.buffer.__srcBitmapData.copyPixels(a.buffer.__srcBitmapData,
                                b.__toFlashRectangle(), c.__toFlashPoint(), null != d ? d.buffer.get_src() : null, null != g ? g.__toFlashPoint() : null, f)
                    }
                },
                encode: function (a, b) {
                    null == b && (b = 90);
                    if (null == a) return fl.encode(this);
                    switch (a._hx_index) {
                        case 0:
                            return Yl.encode(this);
                        case 1:
                            return am.encode(this, b);
                        case 2:
                            return fl.encode(this)
                    }
                },
                fillRect: function (a, b, c) {
                    a = this.__clipRect(a);
                    if (null != this.buffer && null != a) switch (this.type._hx_index) {
                        case 0:
                            Aa.fillRect(this, a, b, c);
                            break;
                        case 1:
                            Aa.convertToData(this);
                            if (0 == this.buffer.data.length) break;
                            Xb.fillRect(this, a, b, c);
                            break;
                        case 2:
                            a.offset(this.offsetX, this.offsetY);
                            if (null == c) b = (b & 255) << 24 | (b >>> 24 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 8 & 255;
                            else switch (c) {
                                case 1:
                                    break;
                                case 2:
                                    b = (b & 255) << 24 | (b >>> 8 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 24 & 255;
                                    break;
                                default:
                                    b = (b & 255) << 24 | (b >>> 24 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 8 & 255
                            }
                            this.buffer.__srcBitmapData.fillRect(a.__toFlashRectangle(), b)
                    }
                },
                getPixel: function (a, b, c) {
                    if (null == this.buffer || 0 > a || 0 > b || a >= this.width || b >= this.height) return 0;
                    switch (this.type._hx_index) {
                        case 0:
                            return Aa.getPixel(this,
                                a, b, c);
                        case 1:
                            return Aa.convertToData(this), Xb.getPixel(this, a, b, c);
                        case 2:
                            a = this.buffer.__srcBitmapData.getPixel(a + this.offsetX, b + this.offsetY);
                            if (null == c) return (a >>> 16 & 255) << 24 | (a >>> 8 & 255) << 16 | (a & 255) << 8 | a >>> 24 & 255;
                            switch (c) {
                                case 1:
                                    return a;
                                case 2:
                                    return (a & 255) << 24 | (a >>> 8 & 255) << 16 | (a >>> 16 & 255) << 8 | a >>> 24 & 255;
                                default:
                                    return (a >>> 16 & 255) << 24 | (a >>> 8 & 255) << 16 | (a & 255) << 8 | a >>> 24 & 255
                            }
                        default:
                            return 0
                    }
                },
                getPixels: function (a, b) {
                    if (null == this.buffer) return null;
                    switch (this.type._hx_index) {
                        case 0:
                            return Aa.getPixels(this,
                                a, b);
                        case 1:
                            return Aa.convertToData(this), Xb.getPixels(this, a, b);
                        case 2:
                            return null;
                        default:
                            return null
                    }
                },
                setPixel: function (a, b, c, d) {
                    if (!(null == this.buffer || 0 > a || 0 > b || a >= this.width || b >= this.height)) switch (this.type._hx_index) {
                        case 0:
                            Aa.setPixel(this, a, b, c, d);
                            break;
                        case 1:
                            Aa.convertToData(this);
                            Xb.setPixel(this, a, b, c, d);
                            break;
                        case 2:
                            if (null == d) c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255;
                            else switch (d) {
                                case 1:
                                    break;
                                case 2:
                                    c = (c & 255) << 24 | (c >>> 8 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 24 & 255;
                                    break;
                                default:
                                    c =
                                        (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255
                            }
                            this.buffer.__srcBitmapData.setPixel(a + this.offsetX, b + this.offsetX, c)
                    }
                },
                __clipRect: function (a) {
                    return null == a || 0 > a.x && (a.width -= -a.x, a.x = 0, 0 >= a.x + a.width) || 0 > a.y && (a.height -= -a.y, a.y = 0, 0 >= a.y + a.height) || a.x + a.width >= this.width && (a.width -= a.x + a.width - this.width, 0 >= a.width) || a.y + a.height >= this.height && (a.height -= a.y + a.height - this.height, 0 >= a.height) ? null : a
                },
                __fromBase64: function (a, b, c) {
                    var d = this,
                        g = new window.Image;
                    g.addEventListener("load", function (a) {
                        d.buffer =
                            new Se(null, g.width, g.height);
                        d.buffer.__srcImage = g;
                        d.offsetX = 0;
                        d.offsetY = 0;
                        d.width = d.buffer.width;
                        d.height = d.buffer.height;
                        null != c && c(d)
                    }, !1);
                    g.src = "data:" + b + ";base64," + a
                },
                __fromBytes: function (a, b) {
                    if (cc.__isPNG(a)) var c = "image/png";
                    else if (cc.__isJPG(a)) c = "image/jpeg";
                    else if (cc.__isGIF(a)) c = "image/gif";
                    else return !1;
                    this.__fromBase64(De.encode(a), c, b);
                    return !0
                },
                __fromFile: function (a, b, c) {
                    var d = this,
                        g = new window.Image;
                    Ca.__isSameOrigin(a) || (g.crossOrigin = "Anonymous");
                    g.onload = function (a) {
                        d.buffer =
                            new Se(null, g.width, g.height);
                        d.buffer.__srcImage = g;
                        d.width = g.width;
                        d.height = g.height;
                        null != b && b(d)
                    };
                    g.onerror = function (a) {
                        null != c && c()
                    };
                    g.src = a;
                    return !0
                },
                __fromImageBuffer: function (a) {
                    this.buffer = a;
                    null != a && (-1 == this.width && (this.width = a.width), -1 == this.height && (this.height = a.height))
                },
                get_data: function () {
                    null == this.buffer.data && 0 < this.buffer.width && 0 < this.buffer.height && Aa.convertToData(this);
                    return this.buffer.data
                },
                get_format: function () {
                    return this.buffer.format
                },
                set_format: function (a) {
                    this.buffer.format !=
                    a && 1 == this.type._hx_index && Xb.setFormat(this, a);
                    return this.buffer.format = a
                },
                get_premultiplied: function () {
                    return this.buffer.premultiplied
                },
                set_premultiplied: function (a) {
                    if (a && !this.buffer.premultiplied) switch (this.type._hx_index) {
                        case 0:
                        case 1:
                            Aa.convertToData(this), Xb.multiplyAlpha(this)
                    } else !a && this.buffer.premultiplied && 1 == this.type._hx_index && (Aa.convertToData(this), Xb.unmultiplyAlpha(this));
                    return a
                },
                get_rect: function () {
                    return new vd(0, 0, this.width, this.height)
                },
                get_src: function () {
                    null != this.buffer.__srcCanvas ||
                    null == this.buffer.data && this.type != ed.DATA || Aa.convertToCanvas(this);
                    return this.buffer.get_src()
                },
                get_transparent: function () {
                    return null == this.buffer ? !1 : this.buffer.transparent
                },
                set_transparent: function (a) {
                    return null == this.buffer ? !1 : this.buffer.transparent = a
                },
                __class__: cc,
                __properties__: {
                    set_transparent: "set_transparent",
                    get_transparent: "get_transparent",
                    get_src: "get_src",
                    get_rect: "get_rect",
                    set_premultiplied: "set_premultiplied",
                    get_premultiplied: "get_premultiplied",
                    set_format: "set_format",
                    get_format: "get_format",
                    get_data: "get_data"
                }
            };
            var Se = function (a, b, c, d, g) {
                null == d && (d = 32);
                null == c && (c = 0);
                null == b && (b = 0);
                this.data = a;
                this.width = b;
                this.height = c;
                this.bitsPerPixel = d;
                this.format = null == g ? 0 : g;
                this.premultiplied = !1;
                this.transparent = !0
            };
            h["lime.graphics.ImageBuffer"] = Se;
            Se.__name__ = "lime.graphics.ImageBuffer";
            Se.prototype = {
                clone: function () {
                    var a = new Se(this.data, this.width, this.height, this.bitsPerPixel);
                    if (null != this.data) {
                        var b = this.data.byteLength,
                            c = null,
                            d = null,
                            g = null,
                            f = null,
                            k = null;
                        b = null != b ? new Uint8Array(b) :
                            null != c ? new Uint8Array(c) : null != d ? new Uint8Array(d.__array) : null != g ? new Uint8Array(g) : null != f ? null == k ? new Uint8Array(f, 0) : new Uint8Array(f, 0, k) : null;
                        a.data = b;
                        d = c = b = null;
                        g = this.data;
                        k = f = null;
                        b = null != b ? new Uint8Array(b) : null != c ? new Uint8Array(c) : null != d ? new Uint8Array(d.__array) : null != g ? new Uint8Array(g) : null != f ? null == k ? new Uint8Array(f, 0) : new Uint8Array(f, 0, k) : null;
                        a.data.set(b)
                    } else null != this.__srcImageData ? (a.__srcCanvas = window.document.createElement("canvas"), a.__srcContext = a.__srcCanvas.getContext("2d"),
                        a.__srcCanvas.width = this.__srcImageData.width, a.__srcCanvas.height = this.__srcImageData.height, a.__srcImageData = a.__srcContext.createImageData(this.__srcImageData.width, this.__srcImageData.height), b = new Uint8ClampedArray(this.__srcImageData.data), a.__srcImageData.data.set(b)) : null != this.__srcCanvas ? (a.__srcCanvas = window.document.createElement("canvas"), a.__srcContext = a.__srcCanvas.getContext("2d"), a.__srcCanvas.width = this.__srcCanvas.width, a.__srcCanvas.height = this.__srcCanvas.height, a.__srcContext.drawImage(this.__srcCanvas,
                        0, 0)) : a.__srcImage = this.__srcImage;
                    a.bitsPerPixel = this.bitsPerPixel;
                    a.format = this.format;
                    a.premultiplied = this.premultiplied;
                    a.transparent = this.transparent;
                    return a
                },
                get_src: function () {
                    return null != this.__srcImage ? this.__srcImage : this.__srcCanvas
                },
                set_src: function (a) {
                    a instanceof Image ? this.__srcImage = a : a instanceof HTMLCanvasElement && (this.__srcCanvas = a, this.__srcContext = this.__srcCanvas.getContext("2d"));
                    return a
                },
                get_stride: function () {
                    return this.width * (this.bitsPerPixel / 8 | 0)
                },
                __class__: Se,
                __properties__: {
                    get_stride: "get_stride",
                    set_src: "set_src",
                    get_src: "get_src"
                }
            };
            var Cg = N["lime.graphics.ImageChannel"] = {
                __ename__: "lime.graphics.ImageChannel",
                __constructs__: null,
                RED: {
                    _hx_name: "RED",
                    _hx_index: 0,
                    __enum__: "lime.graphics.ImageChannel",
                    toString: u
                },
                GREEN: {
                    _hx_name: "GREEN",
                    _hx_index: 1,
                    __enum__: "lime.graphics.ImageChannel",
                    toString: u
                },
                BLUE: {
                    _hx_name: "BLUE",
                    _hx_index: 2,
                    __enum__: "lime.graphics.ImageChannel",
                    toString: u
                },
                ALPHA: {
                    _hx_name: "ALPHA",
                    _hx_index: 3,
                    __enum__: "lime.graphics.ImageChannel",
                    toString: u
                }
            };
            Cg.__constructs__ = [Cg.RED,
                Cg.GREEN, Cg.BLUE, Cg.ALPHA
            ];
            var jj = N["lime.graphics.ImageFileFormat"] = {
                __ename__: "lime.graphics.ImageFileFormat",
                __constructs__: null,
                BMP: {
                    _hx_name: "BMP",
                    _hx_index: 0,
                    __enum__: "lime.graphics.ImageFileFormat",
                    toString: u
                },
                JPEG: {
                    _hx_name: "JPEG",
                    _hx_index: 1,
                    __enum__: "lime.graphics.ImageFileFormat",
                    toString: u
                },
                PNG: {
                    _hx_name: "PNG",
                    _hx_index: 2,
                    __enum__: "lime.graphics.ImageFileFormat",
                    toString: u
                }
            };
            jj.__constructs__ = [jj.BMP, jj.JPEG, jj.PNG];
            var ed = N["lime.graphics.ImageType"] = {
                __ename__: "lime.graphics.ImageType",
                __constructs__: null,
                CANVAS: {
                    _hx_name: "CANVAS",
                    _hx_index: 0,
                    __enum__: "lime.graphics.ImageType",
                    toString: u
                },
                DATA: {
                    _hx_name: "DATA",
                    _hx_index: 1,
                    __enum__: "lime.graphics.ImageType",
                    toString: u
                },
                FLASH: {
                    _hx_name: "FLASH",
                    _hx_index: 2,
                    __enum__: "lime.graphics.ImageType",
                    toString: u
                },
                CUSTOM: {
                    _hx_name: "CUSTOM",
                    _hx_index: 3,
                    __enum__: "lime.graphics.ImageType",
                    toString: u
                }
            };
            ed.__constructs__ = [ed.CANVAS, ed.DATA, ed.FLASH, ed.CUSTOM];
            var el = function () {
            };
            h["lime.graphics.RenderContext"] = el;
            el.__name__ = "lime.graphics.RenderContext";
            el.prototype = {
                __class__: el
            };
            var Dm = {
                    uniform2fv: function (a, b, c, d, g) {
                        null != d ? a.uniform2fv(b, c, d, g) : a.uniform2fv(b, c)
                    }
                },
                Tc = {
                    bufferData: function (a, b, c, d) {
                        a.bufferData(b, c, d)
                    },
                    texImage2D: function (a, b, c, d, g, f, k, q, l, h) {
                        null != q ? a.texImage2D(b, c, d, g, f, k, q, l, h) : a.texImage2D(b, c, d, g, f, k)
                    },
                    uniformMatrix2fv: function (a, b, c, d) {
                        a.uniformMatrix2fv(b, c, d)
                    },
                    uniformMatrix3fv: function (a, b, c, d) {
                        a.uniformMatrix3fv(b, c, d)
                    },
                    uniformMatrix4fv: function (a, b, c, d) {
                        a.uniformMatrix4fv(b, c, d)
                    },
                    fromWebGL2RenderContext: function (a) {
                        return a
                    }
                },
                dm = function (a) {
                };
            h["lime.graphics.cairo.Cairo"] = dm;
            dm.__name__ = "lime.graphics.cairo.Cairo";
            dm.prototype = {
                clip: function () {
                },
                identityMatrix: function () {
                },
                newPath: function () {
                },
                paint: function () {
                },
                rectangle: function (a, b, c, d) {
                },
                restore: function () {
                },
                save: function () {
                },
                setOperator: function (a) {
                    return a
                },
                setSourceRGB: function (a, b, c) {
                },
                set_matrix: function (a) {
                    return a
                },
                __class__: dm,
                __properties__: {
                    set_matrix: "set_matrix"
                }
            };
            var Em = {
                    flush: function (a) {
                    }
                },
                ce = function () {
                };
            h["lime.graphics.opengl.GL"] = ce;
            ce.__name__ =
                "lime.graphics.opengl.GL";
            ce.context = null;
            ce.type = null;
            ce.version = null;
            var em = function () {
                this.STACK_UNDERFLOW = 1284;
                this.STACK_OVERFLOW = 1283;
                this.CONTEXT_FLAG_DEBUG_BIT = 2;
                this.DEBUG_OUTPUT = 37600;
                this.DEBUG_SEVERITY_LOW = 37192;
                this.DEBUG_SEVERITY_MEDIUM = 37191;
                this.DEBUG_SEVERITY_HIGH = 37190;
                this.DEBUG_LOGGED_MESSAGES = 37189;
                this.MAX_DEBUG_LOGGED_MESSAGES = 37188;
                this.MAX_DEBUG_MESSAGE_LENGTH = 37187;
                this.MAX_LABEL_LENGTH = 33512;
                this.SAMPLER = 33510;
                this.QUERY = 33507;
                this.PROGRAM = 33506;
                this.SHADER = 33505;
                this.BUFFER =
                    33504;
                this.DEBUG_GROUP_STACK_DEPTH = 33389;
                this.MAX_DEBUG_GROUP_STACK_DEPTH = 33388;
                this.DEBUG_SEVERITY_NOTIFICATION = 33387;
                this.DEBUG_TYPE_POP_GROUP = 33386;
                this.DEBUG_TYPE_PUSH_GROUP = 33385;
                this.DEBUG_TYPE_MARKER = 33384;
                this.DEBUG_TYPE_OTHER = 33361;
                this.DEBUG_TYPE_PERFORMANCE = 33360;
                this.DEBUG_TYPE_PORTABILITY = 33359;
                this.DEBUG_TYPE_UNDEFINED_BEHAVIOR = 33358;
                this.DEBUG_TYPE_DEPRECATED_BEHAVIOR = 33357;
                this.DEBUG_TYPE_ERROR = 33356;
                this.DEBUG_SOURCE_OTHER = 33355;
                this.DEBUG_SOURCE_APPLICATION = 33354;
                this.DEBUG_SOURCE_THIRD_PARTY =
                    33353;
                this.DEBUG_SOURCE_SHADER_COMPILER = 33352;
                this.DEBUG_SOURCE_WINDOW_SYSTEM = 33351;
                this.DEBUG_SOURCE_API = 33350;
                this.DEBUG_CALLBACK_USER_PARAM = 33349;
                this.DEBUG_CALLBACK_FUNCTION = 33348;
                this.DEBUG_NEXT_LOGGED_MESSAGE_LENGTH = 33347;
                this.DEBUG_OUTPUT_SYNCHRONOUS = 33346
            };
            h["lime.graphics.opengl.ext.KHR_debug"] = em;
            em.__name__ = "lime.graphics.opengl.ext.KHR_debug";
            em.prototype = {
                __class__: em
            };
            var Wc = {
                    __alphaTable: null,
                    __blueTable: null,
                    __greenTable: null,
                    __redTable: null,
                    getAlphaTable: function (a) {
                        null == Wc.__alphaTable &&
                        (Wc.__alphaTable = new Uint8Array(256));
                        Wc.__alphaTable[0] = 0;
                        for (var b = 1; 256 > b;) {
                            var c = b++;
                            var d = Math.floor(c * a[18] + 255 * a[19]);
                            255 < d && (d = 255);
                            0 > d && (d = 0);
                            Wc.__alphaTable[c] = d
                        }
                        return Wc.__alphaTable
                    },
                    getBlueTable: function (a) {
                        null == Wc.__blueTable && (Wc.__blueTable = new Uint8Array(256));
                        for (var b, c = 0; 256 > c;) {
                            var d = c++;
                            b = Math.floor(d * a[12] + 255 * a[14]);
                            255 < b && (b = 255);
                            0 > b && (b = 0);
                            Wc.__blueTable[d] = b
                        }
                        return Wc.__blueTable
                    },
                    getGreenTable: function (a) {
                        null == Wc.__greenTable && (Wc.__greenTable = new Uint8Array(256));
                        for (var b,
                                 c = 0; 256 > c;) {
                            var d = c++;
                            b = Math.floor(d * a[6] + 255 * a[9]);
                            255 < b && (b = 255);
                            0 > b && (b = 0);
                            Wc.__greenTable[d] = b
                        }
                        return Wc.__greenTable
                    },
                    getRedTable: function (a) {
                        null == Wc.__redTable && (Wc.__redTable = new Uint8Array(256));
                        for (var b, c = 0; 256 > c;) {
                            var d = c++;
                            b = Math.floor(d * a[0] + 255 * a[4]);
                            255 < b && (b = 255);
                            0 > b && (b = 0);
                            Wc.__redTable[d] = b
                        }
                        return Wc.__redTable
                    },
                    __toFlashColorTransform: function (a) {
                        return null
                    }
                },
                nb = {
                    _new: function (a) {
                        if (null == a || 16 != a.length) a = nb.__identity, a = null != a ? new Float32Array(a) : null;
                        return a
                    },
                    append: function (a,
                                      b) {
                        var c = a[0],
                            d = a[4],
                            g = a[8],
                            f = a[12],
                            k = a[1],
                            q = a[5],
                            l = a[9],
                            h = a[13],
                            n = a[2],
                            r = a[6],
                            t = a[10],
                            p = a[14],
                            y = a[3],
                            u = a[7],
                            z = a[11],
                            x = a[15],
                            A = nb.get(b, 0),
                            m = nb.get(b, 4),
                            Q = nb.get(b, 8),
                            O = nb.get(b, 12),
                            v = nb.get(b, 1),
                            w = nb.get(b, 5),
                            N = nb.get(b, 9),
                            F = nb.get(b, 13),
                            D = nb.get(b, 2),
                            H = nb.get(b, 6),
                            ta = nb.get(b, 10),
                            I = nb.get(b, 14),
                            J = nb.get(b, 3),
                            E = nb.get(b, 7),
                            R = nb.get(b, 11);
                        b = nb.get(b, 15);
                        a[0] = c * A + k * m + n * Q + y * O;
                        a[1] = c * v + k * w + n * N + y * F;
                        a[2] = c * D + k * H + n * ta + y * I;
                        a[3] = c * J + k * E + n * R + y * b;
                        a[4] = d * A + q * m + r * Q + u * O;
                        a[5] = d * v + q * w + r * N + u * F;
                        a[6] = d * D + q * H + r * ta +
                            u * I;
                        a[7] = d * J + q * E + r * R + u * b;
                        a[8] = g * A + l * m + t * Q + z * O;
                        a[9] = g * v + l * w + t * N + z * F;
                        a[10] = g * D + l * H + t * ta + z * I;
                        a[11] = g * J + l * E + t * R + z * b;
                        a[12] = f * A + h * m + p * Q + x * O;
                        a[13] = f * v + h * w + p * N + x * F;
                        a[14] = f * D + h * H + p * ta + x * I;
                        a[15] = f * J + h * E + p * R + x * b
                    },
                    createOrtho: function (a, b, c, d, g, f, k) {
                        var q = 1 / (c - b),
                            l = 1 / (g - d),
                            h = 1 / (k - f);
                        a[0] = 2 * q;
                        a[1] = 0;
                        a[2] = 0;
                        a[3] = 0;
                        a[4] = 0;
                        a[5] = 2 * l;
                        a[6] = 0;
                        a[7] = 0;
                        a[8] = 0;
                        a[9] = 0;
                        a[10] = -2 * h;
                        a[11] = 0;
                        a[12] = -(b + c) * q;
                        a[13] = -(d + g) * l;
                        a[14] = -(f + k) * h;
                        a[15] = 1
                    },
                    identity: function (a) {
                        a[0] = 1;
                        a[1] = 0;
                        a[2] = 0;
                        a[3] = 0;
                        a[4] = 0;
                        a[5] = 1;
                        a[6] = 0;
                        a[7] = 0;
                        a[8] =
                            0;
                        a[9] = 0;
                        a[10] = 1;
                        a[11] = 0;
                        a[12] = 0;
                        a[13] = 0;
                        a[14] = 0;
                        a[15] = 1
                    },
                    get: function (a, b) {
                        return a[b]
                    },
                    set: function (a, b, c) {
                        return a[b] = c
                    }
                },
                P = {
                    __alpha16: null,
                    __clamp: null,
                    a16: null,
                    unmult: null
                },
                vd = function (a, b, c, d) {
                    null == d && (d = 0);
                    null == c && (c = 0);
                    null == b && (b = 0);
                    null == a && (a = 0);
                    this.x = a;
                    this.y = b;
                    this.width = c;
                    this.height = d
                };
            h["lime.math.Rectangle"] = vd;
            vd.__name__ = "lime.math.Rectangle";
            vd.prototype = {
                intersection: function (a, b) {
                    null == b && (b = new vd);
                    var c = this.x < a.x ? a.x : this.x,
                        d = this.get_right() > a.get_right() ? a.get_right() :
                            this.get_right();
                    if (d <= c) return b.setEmpty(), b;
                    var g = this.y < a.y ? a.y : this.y;
                    a = this.get_bottom() > a.get_bottom() ? a.get_bottom() : this.get_bottom();
                    if (a <= g) return b.setEmpty(), b;
                    b.x = c;
                    b.y = g;
                    b.width = d - c;
                    b.height = a - g;
                    return b
                },
                offset: function (a, b) {
                    this.x += a;
                    this.y += b
                },
                setEmpty: function () {
                    this.x = this.y = this.width = this.height = 0
                },
                setTo: function (a, b, c, d) {
                    this.x = a;
                    this.y = b;
                    this.width = c;
                    this.height = d
                },
                __toFlashRectangle: function () {
                    return null
                },
                get_bottom: function () {
                    return this.y + this.height
                },
                get_right: function () {
                    return this.x +
                        this.width
                },
                __class__: vd,
                __properties__: {
                    get_right: "get_right",
                    get_bottom: "get_bottom"
                }
            };
            var lg = function (a, b) {
                null == b && (b = 0);
                null == a && (a = 0);
                this.x = a;
                this.y = b
            };
            h["lime.math.Vector2"] = lg;
            lg.__name__ = "lime.math.Vector2";
            lg.prototype = {
                offset: function (a, b) {
                    this.x += a;
                    this.y += b
                },
                __toFlashPoint: function () {
                    return null
                },
                __class__: lg
            };
            var bl = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 0);
                this.w = d;
                this.x = a;
                this.y = b;
                this.z = c
            };
            h["lime.math.Vector4"] = bl;
            bl.__name__ = "lime.math.Vector4";
            bl.prototype = {
                __class__: bl
            };
            var Oc = function () {
            };
            h["lime.media.AudioBuffer"] = Oc;
            Oc.__name__ = "lime.media.AudioBuffer";
            Oc.fromBytes = function (a) {
                if (null == a) return null;
                var b = new Oc;
                b.set_src(new Howl({
                    src: ["data:" + Oc.__getCodec(a) + ";base64," + De.encode(a)],
                    html5: !0,
                    preload: !1
                }));
                return b
            };
            Oc.fromFile = function (a) {
                if (null == a) return null;
                var b = new Oc;
                b.__srcHowl = new Howl({
                    src: [a],
                    preload: !1
                });
                return b
            };
            Oc.fromFiles = function (a) {
                var b = new Oc;
                b.__srcHowl = new Howl({
                    src: a,
                    preload: !1
                });
                return b
            };
            Oc.loadFromFile =
                function (a) {
                    var b = new Fd,
                        c = Oc.fromFile(a);
                    null != c ? null != c && (c.__srcHowl.on("load", function () {
                        b.complete(c)
                    }), c.__srcHowl.on("loaderror", function (a, c) {
                        b.error(c)
                    }), c.__srcHowl.load()) : b.error(null);
                    return b.future
                };
            Oc.loadFromFiles = function (a) {
                var b = new Fd,
                    c = Oc.fromFiles(a);
                null != c ? (c.__srcHowl.on("load", function () {
                    b.complete(c)
                }), c.__srcHowl.on("loaderror", function () {
                    b.error(null)
                }), c.__srcHowl.load()) : b.error(null);
                return b.future
            };
            Oc.__getCodec = function (a) {
                switch (a.getString(0, 4)) {
                    case "OggS":
                        return "audio/ogg";
                    case "RIFF":
                        if ("WAVE" == a.getString(8, 4)) return "audio/wav";
                        var b = a.b[1],
                            c = a.b[2];
                        switch (a.b[0]) {
                            case 73:
                                if (68 == b && 51 == c) return "audio/mp3";
                                break;
                            case 255:
                                switch (b) {
                                    case 243:
                                    case 250:
                                    case 251:
                                        return "audio/mp3"
                                }
                        }
                        break;
                    case "fLaC":
                        return "audio/flac";
                    default:
                        switch (b = a.b[1], c = a.b[2], a.b[0]) {
                            case 73:
                                if (68 == b && 51 == c) return "audio/mp3";
                                break;
                            case 255:
                                switch (b) {
                                    case 243:
                                    case 250:
                                    case 251:
                                        return "audio/mp3"
                                }
                        }
                }
                Wa.error("Unsupported sound format", {
                    className: "lime.media.AudioBuffer",
                    methodName: "__getCodec"
                });
                return null
            };
            Oc.prototype = {
                get_src: function () {
                    return this.__srcHowl
                },
                set_src: function (a) {
                    return this.__srcHowl = a
                },
                __class__: Oc,
                __properties__: {
                    set_src: "set_src",
                    get_src: "get_src"
                }
            };
            var rl = function (a) {
                if ("custom" != a) {
                    if (null == a || "web" == a) try {
                        window.AudioContext = window.AudioContext || window.webkitAudioContext, this.web = new window.AudioContext, this.type = "web"
                    } catch (b) {
                        Ha.lastError = b
                    }
                    null == this.web && "web" != a && (this.html5 = new ql, this.type = "html5")
                } else this.type = "custom"
            };
            h["lime.media.AudioContext"] =
                rl;
            rl.__name__ = "lime.media.AudioContext";
            rl.prototype = {
                __class__: rl
            };
            var ve = function () {
            };
            h["lime.media.AudioManager"] = ve;
            ve.__name__ = "lime.media.AudioManager";
            ve.context = null;
            ve.init = function (a) {
                if (null == ve.context) {
                    if (null == a && (ve.context = new rl, a = ve.context, "openal" == a.type)) {
                        var b = a.openal,
                            c = b.openDevice();
                        null != c && (c = b.createContext(c), b.makeContextCurrent(c), b.processContext(c))
                    }
                    ve.context = a
                }
            };
            var fm = function (a, b, c, d) {
                null == d && (d = 0);
                null == b && (b = 0);
                this.onComplete = new Nc;
                this.buffer = a;
                this.offset =
                    b;
                this.__backend = new cl(this);
                null != c && 0 != c && this.set_length(c);
                this.set_loops(d);
                null != a && this.init()
            };
            h["lime.media.AudioSource"] = fm;
            fm.__name__ = "lime.media.AudioSource";
            fm.prototype = {
                dispose: function () {
                    this.__backend.dispose()
                },
                init: function () {
                    this.__backend.init()
                },
                play: function () {
                    this.__backend.play()
                },
                stop: function () {
                    this.__backend.stop()
                },
                get_currentTime: function () {
                    return this.__backend.getCurrentTime()
                },
                set_currentTime: function (a) {
                    return this.__backend.setCurrentTime(a)
                },
                get_gain: function () {
                    return this.__backend.getGain()
                },
                set_gain: function (a) {
                    return this.__backend.setGain(a)
                },
                set_length: function (a) {
                    return this.__backend.setLength(a)
                },
                set_loops: function (a) {
                    return this.__backend.setLoops(a)
                },
                get_position: function () {
                    return this.__backend.getPosition()
                },
                set_position: function (a) {
                    return this.__backend.setPosition(a)
                },
                __class__: fm,
                __properties__: {
                    set_loops: "set_loops",
                    set_length: "set_length",
                    set_position: "set_position",
                    get_position: "get_position",
                    set_gain: "set_gain",
                    get_gain: "get_gain",
                    set_currentTime: "set_currentTime",
                    get_currentTime: "get_currentTime"
                }
            };
            var ql = function () {
            };
            h["lime.media.HTML5AudioContext"] = ql;
            ql.__name__ = "lime.media.HTML5AudioContext";
            ql.prototype = {
                __class__: ql
            };
            var gm = function () {
            };
            h["lime.media.OpenALAudioContext"] = gm;
            gm.__name__ = "lime.media.OpenALAudioContext";
            gm.prototype = {
                createContext: function (a, b) {
                    return of.createContext(a, b)
                },
                makeContextCurrent: function (a) {
                    return of.makeContextCurrent(a)
                },
                openDevice: function (a) {
                    return of.openDevice(a)
                },
                processContext: function (a) {
                    of.processContext(a)
                },
                __class__: gm
            };
            var of = function () {
            };
            h["lime.media.openal.ALC"] =
                of;
            of.__name__ = "lime.media.openal.ALC";
            of.createContext = function (a, b) {
                return null
            };
            of.makeContextCurrent = function (a) {
                return !1
            };
            of.openDevice = function (a) {
                return null
            };
            of.processContext = function (a) {
            };
            var kj = function () {
            };
            h["lime.net._IHTTPRequest"] = kj;
            kj.__name__ = "lime.net._IHTTPRequest";
            kj.__isInterface__ = !0;
            kj.prototype = {
                __class__: kj
            };
            var pe = function (a) {
                this.uri = a;
                this.contentType = "application/x-www-form-urlencoded";
                this.followRedirects = !0;
                this.enableResponseHeaders = !1;
                this.formData = new ab;
                this.headers = [];
                this.method = "GET";
                this.timeout = 3E4;
                this.withCredentials = !1;
                this.manageCookies = !0;
                this.__backend = new Ca;
                this.__backend.init(this)
            };
            h["lime.net._HTTPRequest.AbstractHTTPRequest"] = pe;
            pe.__name__ = "lime.net._HTTPRequest.AbstractHTTPRequest";
            pe.__interfaces__ = [kj];
            pe.prototype = {
                __class__: pe
            };
            var pf = function (a) {
                pe.call(this, a)
            };
            h["lime.net._HTTPRequest_Bytes"] = pf;
            pf.__name__ = "lime.net._HTTPRequest_Bytes";
            pf.__super__ = pe;
            pf.prototype = w(pe.prototype, {
                fromBytes: function (a) {
                    return a
                },
                load: function (a) {
                    var b =
                        this;
                    null != a && (this.uri = a);
                    var c = new Fd;
                    a = this.__backend.loadData(this.uri);
                    a.onProgress(m(c, c.progress));
                    a.onError(function (a) {
                        b.responseData = a.responseData;
                        c.error(a.error)
                    });
                    a.onComplete(function (a) {
                        b.responseData = b.fromBytes(a);
                        c.complete(b.responseData)
                    });
                    return c.future
                },
                __class__: pf
            });
            var Fg = function (a) {
                pe.call(this, a)
            };
            h["lime.net._HTTPRequest_String"] = Fg;
            Fg.__name__ = "lime.net._HTTPRequest_String";
            Fg.__super__ = pe;
            Fg.prototype = w(pe.prototype, {
                load: function (a) {
                    var b = this;
                    null != a && (this.uri =
                        a);
                    var c = new Fd;
                    a = this.__backend.loadText(this.uri);
                    a.onProgress(m(c, c.progress));
                    a.onError(function (a) {
                        b.responseData = a.responseData;
                        c.error(a.error)
                    });
                    a.onComplete(function (a) {
                        b.responseData = a;
                        c.complete(b.responseData)
                    });
                    return c.future
                },
                __class__: Fg
            });
            var Bg = function (a, b) {
                this.error = a;
                this.responseData = b
            };
            h["lime.net._HTTPRequestErrorResponse"] = Bg;
            Bg.__name__ = "lime.net._HTTPRequestErrorResponse";
            Bg.prototype = {
                __class__: Bg
            };
            var dj = function (a, b) {
                null == b && (b = "");
                this.name = a;
                this.value = b
            };
            h["lime.net.HTTPRequestHeader"] =
                dj;
            dj.__name__ = "lime.net.HTTPRequestHeader";
            dj.prototype = {
                __class__: dj
            };
            var lj = function (a) {
                pe.call(this, a)
            };
            h["lime.net._HTTPRequest_lime_utils_Bytes"] = lj;
            lj.__name__ = "lime.net._HTTPRequest_lime_utils_Bytes";
            lj.__super__ = pf;
            lj.prototype = w(pf.prototype, {
                fromBytes: function (a) {
                    return Tf.fromBytes(a)
                },
                __class__: lj
            });
            var mj = function (a) {
                pe.call(this, a)
            };
            h["lime.net._HTTPRequest_openfl_utils_ByteArray"] = mj;
            mj.__name__ = "lime.net._HTTPRequest_openfl_utils_ByteArray";
            mj.__super__ = pf;
            mj.prototype = w(pf.prototype, {
                fromBytes: function (a) {
                    return Pd.fromBytes(a)
                },
                __class__: mj
            });
            var kc = function () {
            };
            h["lime.system.Clipboard"] = kc;
            kc.__name__ = "lime.system.Clipboard";
            kc.__properties__ = {
                set_text: "set_text",
                get_text: "get_text"
            };
            kc._text = null;
            kc.__update = function () {
                var a = kc._text;
                kc._text = a;
                kc.__updated = !0;
                kc._text != a && kc.onUpdate.dispatch()
            };
            kc.get_text = function () {
                kc.__update();
                return kc._text
            };
            kc.set_text = function (a) {
                var b = kc._text;
                kc._text = a;
                var c = C.current.__window;
                null != c && c.__backend.setClipboard(a);
                kc._text != b &&
                kc.onUpdate.dispatch();
                return a
            };
            var sl = function () {
            };
            h["lime.system.Display"] = sl;
            sl.__name__ = "lime.system.Display";
            sl.prototype = {
                __class__: sl
            };
            var tl = function (a, b, c, d) {
                this.width = a;
                this.height = b;
                this.refreshRate = c;
                this.pixelFormat = d
            };
            h["lime.system.DisplayMode"] = tl;
            tl.__name__ = "lime.system.DisplayMode";
            tl.prototype = {
                __class__: tl
            };
            var nj = N["lime.system.Endian"] = {
                __ename__: "lime.system.Endian",
                __constructs__: null,
                LITTLE_ENDIAN: {
                    _hx_name: "LITTLE_ENDIAN",
                    _hx_index: 0,
                    __enum__: "lime.system.Endian",
                    toString: u
                },
                BIG_ENDIAN: {
                    _hx_name: "BIG_ENDIAN",
                    _hx_index: 1,
                    __enum__: "lime.system.Endian",
                    toString: u
                }
            };
            nj.__constructs__ = [nj.LITTLE_ENDIAN, nj.BIG_ENDIAN];
            var Ie = function (a, b) {
                this.onUpdate = new gl;
                this.type = a;
                this.id = b
            };
            h["lime.system.Sensor"] = Ie;
            Ie.__name__ = "lime.system.Sensor";
            Ie.registerSensor = function (a, b) {
                a = new Ie(a, b);
                Ie.sensors.push(a);
                return Ie.sensorByID.h[b] = a
            };
            Ie.prototype = {
                __class__: Ie
            };
            var nm = N["lime.system.SensorType"] = {
                __ename__: "lime.system.SensorType",
                __constructs__: null,
                ACCELEROMETER: {
                    _hx_name: "ACCELEROMETER",
                    _hx_index: 0,
                    __enum__: "lime.system.SensorType",
                    toString: u
                }
            };
            nm.__constructs__ = [nm.ACCELEROMETER];
            var yc = function () {
            };
            h["lime.system.System"] = yc;
            yc.__name__ = "lime.system.System";
            yc.__properties__ = {
                get_endianness: "get_endianness"
            };
            yc.__applicationEntryPoint = null;
            yc.__endianness = null;
            yc.embed = v.lime.embed = function (a, b, c, d, g) {
                if (null != yc.__applicationEntryPoint && Object.prototype.hasOwnProperty.call(yc.__applicationEntryPoint.h, a)) {
                    var f = "string" == typeof b ? window.document.getElementById(b) : null == b ? window.document.createElement("div") :
                        b;
                    null == f ? window.console.log("[lime.embed] ERROR: Cannot find target element: " + E.string(b)) : (null == c && (c = 0), null == d && (d = 0), null == g && (g = {}), Object.prototype.hasOwnProperty.call(g, "background") && "string" == typeof g.background && (b = T.replace(E.string(g.background), "#", ""), -1 < b.indexOf("0x") ? g.background = E.parseInt(b) : g.background = E.parseInt("0x" + b)), g.element = f, g.width = c, g.height = d, yc.__applicationEntryPoint.h[a](g))
                }
            };
            yc.exit = function (a) {
                var b = C.current;
                if (null != b && (b.onExit.dispatch(a), b.onExit.canceled)) return;
                null != b && null != b.__window && b.__window.close()
            };
            yc.getDisplay = function (a) {
                if (0 == a) {
                    a = new sl;
                    a.id = 0;
                    a.name = "Generic Display";
                    a.dpi = 96 * window.devicePixelRatio;
                    a.currentMode = new tl(window.screen.width, window.screen.height, 60, 1);
                    if (null != window.screen.orientation) switch (window.screen.orientation.type) {
                        case "landscape-primary":
                            a.orientation = 1;
                            break;
                        case "landscape-secondary":
                            a.orientation = 2;
                            break;
                        case "portrait-primary":
                            a.orientation = 3;
                            break;
                        case "portrait-secondary":
                            a.orientation = 4;
                            break;
                        default:
                            a.orientation =
                                0
                    } else a.orientation = 0;
                    a.supportedModes = [a.currentMode];
                    a.bounds = new vd(0, 0, a.currentMode.width, a.currentMode.height);
                    a.safeArea = new vd(0, 0, a.currentMode.width, a.currentMode.height);
                    return a
                }
                return null
            };
            yc.getTimer = function () {
                return window.performance.now() | 0
            };
            yc.openURL = function (a, b) {
                null == b && (b = "_blank");
                null != a && window.open(a, b)
            };
            yc.__registerEntryPoint = function (a, b) {
                null == yc.__applicationEntryPoint && (yc.__applicationEntryPoint = new ab);
                yc.__applicationEntryPoint.h[a] = b
            };
            yc.get_endianness = function () {
                if (null ==
                    yc.__endianness) {
                    var a = new ArrayBuffer(2),
                        b = null,
                        c = null,
                        d = null,
                        g = null,
                        f = null,
                        k = b = null != b ? new Uint8Array(b) : null != c ? new Uint8Array(c) : null != d ? new Uint8Array(d.__array) : null != g ? new Uint8Array(g) : null != a ? null == f ? new Uint8Array(a, 0) : new Uint8Array(a, 0, f) : null;
                    f = g = d = c = b = null;
                    b = null != b ? new Uint16Array(b) : null != c ? new Uint16Array(c) : null != d ? new Uint16Array(d.__array) : null != g ? new Uint16Array(g) : null != a ? null == f ? new Uint16Array(a, 0) : new Uint16Array(a, 0, f) : null;
                    k[0] = 170;
                    k[1] = 187;
                    yc.__endianness = 43707 == b[0] ? nj.BIG_ENDIAN :
                        nj.LITTLE_ENDIAN
                }
                return yc.__endianness
            };
            var xc = function (a) {
                this.onDisconnect = new Nc;
                this.onButtonUp = new hj;
                this.onButtonDown = new hj;
                this.onAxisMove = new nl;
                this.id = a;
                this.connected = !0;
                this.__jsGamepad = uc.__getDeviceData()[this.id]
            };
            h["lime.ui.Gamepad"] = xc;
            xc.__name__ = "lime.ui.Gamepad";
            xc.__connect = function (a) {
                if (!xc.devices.h.hasOwnProperty(a)) {
                    var b = new xc(a);
                    xc.devices.h[a] = b;
                    xc.onConnect.dispatch(b)
                }
            };
            xc.__disconnect = function (a) {
                var b = xc.devices.h[a];
                null != b && (b.connected = !1);
                xc.devices.remove(a);
                null != b && b.onDisconnect.dispatch()
            };
            xc.prototype = {
                __class__: xc
            };
            var uc = function (a) {
                this.onHatMove = new ll;
                this.onDisconnect = new Nc;
                this.onButtonUp = new wf;
                this.onButtonDown = new wf;
                this.onAxisMove = new kl;
                this.id = a;
                this.connected = !0
            };
            h["lime.ui.Joystick"] = uc;
            uc.__name__ = "lime.ui.Joystick";
            uc.__connect = function (a) {
                if (!uc.devices.h.hasOwnProperty(a)) {
                    var b = new uc(a);
                    uc.devices.h[a] = b;
                    uc.onConnect.dispatch(b)
                }
            };
            uc.__disconnect = function (a) {
                var b = uc.devices.h[a];
                null != b && (b.connected = !1);
                uc.devices.remove(a);
                null != b && b.onDisconnect.dispatch()
            };
            uc.__getDeviceData = function () {
                var a = null;
                try {
                    a = navigator.getGamepads ? navigator.getGamepads() : navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : null
                } catch (b) {
                    Ha.lastError = b
                }
                return a
            };
            uc.prototype = {
                __class__: uc
            };
            var gb = {
                    __properties__: {
                        get_shiftKey: "get_shiftKey",
                        get_metaKey: "get_metaKey",
                        get_ctrlKey: "get_ctrlKey",
                        get_capsLock: "get_capsLock",
                        get_altKey: "get_altKey"
                    },
                    get_altKey: function (a) {
                        return 0 >= (a & 256) ? 0 < (a & 512) : !0
                    },
                    get_capsLock: function (a) {
                        return 0 >=
                        (a & 8192) ? 0 < (a & 8192) : !0
                    },
                    get_ctrlKey: function (a) {
                        return 0 >= (a & 64) ? 0 < (a & 128) : !0
                    },
                    get_metaKey: function (a) {
                        return 0 >= (a & 1024) ? 0 < (a & 2048) : !0
                    },
                    get_shiftKey: function (a) {
                        return 0 >= (a & 1) ? 0 < (a & 2) : !0
                    }
                },
                xb = N["lime.ui.MouseCursor"] = {
                    __ename__: "lime.ui.MouseCursor",
                    __constructs__: null,
                    ARROW: {
                        _hx_name: "ARROW",
                        _hx_index: 0,
                        __enum__: "lime.ui.MouseCursor",
                        toString: u
                    },
                    CROSSHAIR: {
                        _hx_name: "CROSSHAIR",
                        _hx_index: 1,
                        __enum__: "lime.ui.MouseCursor",
                        toString: u
                    },
                    DEFAULT: {
                        _hx_name: "DEFAULT",
                        _hx_index: 2,
                        __enum__: "lime.ui.MouseCursor",
                        toString: u
                    },
                    MOVE: {
                        _hx_name: "MOVE",
                        _hx_index: 3,
                        __enum__: "lime.ui.MouseCursor",
                        toString: u
                    },
                    POINTER: {
                        _hx_name: "POINTER",
                        _hx_index: 4,
                        __enum__: "lime.ui.MouseCursor",
                        toString: u
                    },
                    RESIZE_NESW: {
                        _hx_name: "RESIZE_NESW",
                        _hx_index: 5,
                        __enum__: "lime.ui.MouseCursor",
                        toString: u
                    },
                    RESIZE_NS: {
                        _hx_name: "RESIZE_NS",
                        _hx_index: 6,
                        __enum__: "lime.ui.MouseCursor",
                        toString: u
                    },
                    RESIZE_NWSE: {
                        _hx_name: "RESIZE_NWSE",
                        _hx_index: 7,
                        __enum__: "lime.ui.MouseCursor",
                        toString: u
                    },
                    RESIZE_WE: {
                        _hx_name: "RESIZE_WE",
                        _hx_index: 8,
                        __enum__: "lime.ui.MouseCursor",
                        toString: u
                    },
                    TEXT: {
                        _hx_name: "TEXT",
                        _hx_index: 9,
                        __enum__: "lime.ui.MouseCursor",
                        toString: u
                    },
                    WAIT: {
                        _hx_name: "WAIT",
                        _hx_index: 10,
                        __enum__: "lime.ui.MouseCursor",
                        toString: u
                    },
                    WAIT_ARROW: {
                        _hx_name: "WAIT_ARROW",
                        _hx_index: 11,
                        __enum__: "lime.ui.MouseCursor",
                        toString: u
                    },
                    CUSTOM: {
                        _hx_name: "CUSTOM",
                        _hx_index: 12,
                        __enum__: "lime.ui.MouseCursor",
                        toString: u
                    }
                };
            xb.__constructs__ = [xb.ARROW, xb.CROSSHAIR, xb.DEFAULT, xb.MOVE, xb.POINTER, xb.RESIZE_NESW, xb.RESIZE_NS, xb.RESIZE_NWSE, xb.RESIZE_WE, xb.TEXT, xb.WAIT, xb.WAIT_ARROW, xb.CUSTOM];
            var nf = N["lime.ui.MouseWheelMode"] = {
                __ename__: "lime.ui.MouseWheelMode",
                __constructs__: null,
                PIXELS: {
                    _hx_name: "PIXELS",
                    _hx_index: 0,
                    __enum__: "lime.ui.MouseWheelMode",
                    toString: u
                },
                LINES: {
                    _hx_name: "LINES",
                    _hx_index: 1,
                    __enum__: "lime.ui.MouseWheelMode",
                    toString: u
                },
                PAGES: {
                    _hx_name: "PAGES",
                    _hx_index: 2,
                    __enum__: "lime.ui.MouseWheelMode",
                    toString: u
                },
                UNKNOWN: {
                    _hx_name: "UNKNOWN",
                    _hx_index: 3,
                    __enum__: "lime.ui.MouseWheelMode",
                    toString: u
                }
            };
            nf.__constructs__ = [nf.PIXELS, nf.LINES, nf.PAGES, nf.UNKNOWN];
            var Hb = function (a,
                               b, c, d, g, f, k) {
                this.x = a;
                this.y = b;
                this.id = c;
                this.dx = d;
                this.dy = g;
                this.pressure = f;
                this.device = k
            };
            h["lime.ui.Touch"] = Hb;
            Hb.__name__ = "lime.ui.Touch";
            Hb.prototype = {
                __class__: Hb
            };
            var Gg = function (a, b) {
                this.clickCount = 0;
                this.onTextInput = new fj;
                this.onTextEdit = new ml;
                this.onRestore = new Nc;
                this.onResize = new ej;
                this.onRenderContextRestored = new gj;
                this.onRenderContextLost = new Nc;
                this.onRender = new gj;
                this.onMove = new nh;
                this.onMouseWheel = new jl;
                this.onMouseUp = new hl;
                this.onMouseMoveRelative = new nh;
                this.onMouseMove =
                    new nh;
                this.onMouseDown = new il;
                this.onMinimize = new Nc;
                this.onLeave = new Nc;
                this.onKeyUp = new ij;
                this.onKeyDown = new ij;
                this.onFullscreen = new Nc;
                this.onFocusOut = new Nc;
                this.onFocusIn = new Nc;
                this.onExpose = new Nc;
                this.onEnter = new Nc;
                this.onDropFile = new fj;
                this.onDeactivate = new Nc;
                this.onClose = new Nc;
                this.onActivate = new Nc;
                this.application = a;
                this.__attributes = null != b ? b : {};
                Object.prototype.hasOwnProperty.call(this.__attributes, "parameters") && (this.parameters = this.__attributes.parameters);
                this.__height = this.__width =
                    0;
                this.__fullscreen = !1;
                this.__scale = 1;
                this.__y = this.__x = 0;
                this.__title = Object.prototype.hasOwnProperty.call(this.__attributes, "title") ? this.__attributes.title : "";
                this.__hidden = !1;
                this.__borderless = Object.prototype.hasOwnProperty.call(this.__attributes, "borderless") && this.__attributes.borderless;
                this.__resizable = Object.prototype.hasOwnProperty.call(this.__attributes, "resizable") && this.__attributes.resizable;
                this.__maximized = Object.prototype.hasOwnProperty.call(this.__attributes, "maximized") && this.__attributes.maximized;
                this.__minimized = Object.prototype.hasOwnProperty.call(this.__attributes, "minimized") && this.__attributes.minimized;
                this.id = -1;
                this.__backend = new La(this)
            };
            h["lime.ui.Window"] = Gg;
            Gg.__name__ = "lime.ui.Window";
            Gg.prototype = {
                close: function () {
                    this.__backend.close()
                },
                set_cursor: function (a) {
                    return this.__backend.setCursor(a)
                },
                get_display: function () {
                    return this.__backend.getDisplay()
                },
                set_fullscreen: function (a) {
                    return this.__fullscreen = this.__backend.setFullscreen(a)
                },
                setTextInputRect: function (a) {
                    return this.__backend.setTextInputRect(a)
                },
                __class__: Gg,
                __properties__: {
                    set_fullscreen: "set_fullscreen",
                    set_cursor: "set_cursor",
                    get_display: "get_display"
                }
            };
            var qe = function () {
                this.data = new ab;
                this.paths = []
            };
            h["lime.utils.AssetBundle"] = qe;
            qe.__name__ = "lime.utils.AssetBundle";
            qe.fromBytes = function (a) {
                a = new bj(a);
                return qe.__extractBundle(a)
            };
            qe.loadFromBytes = function (a) {
                return Fc.withValue(qe.fromBytes(a))
            };
            qe.loadFromFile = function (a) {
                return Tf.loadFromFile(a).then(qe.loadFromBytes)
            };
            qe.__extractBundle = function (a) {
                var b = kh.readZip(a);
                a = new qe;
                for (b = b.h; null != b;) {
                    var c = b.item;
                    b = b.next;
                    if (c.compressed) {
                        var d = a.data,
                            g = c.fileName,
                            f = Tf.decompress(c.data, oj.DEFLATE);
                        d.h[g] = f
                    } else a.data.h[c.fileName] = c.data;
                    a.paths.push(c.fileName)
                }
                return a
            };
            qe.prototype = {
                __class__: qe
            };
            var ul = function () {
                this.enabled = !0;
                this.audio = new ab;
                this.font = new ab;
                this.image = new ab;
                this.version = 511751
            };
            h["lime.utils.AssetCache"] = ul;
            ul.__name__ = "lime.utils.AssetCache";
            ul.prototype = {
                exists: function (a, b) {
                    return ("IMAGE" == b || null == b) && Object.prototype.hasOwnProperty.call(this.image.h,
                        a) || ("FONT" == b || null == b) && Object.prototype.hasOwnProperty.call(this.font.h, a) || ("SOUND" == b || "MUSIC" == b || null == b) && Object.prototype.hasOwnProperty.call(this.audio.h, a) ? !0 : !1
                },
                set: function (a, b, c) {
                    switch (b) {
                        case "FONT":
                            this.font.h[a] = c;
                            break;
                        case "IMAGE":
                            if (!(c instanceof cc)) throw aa.thrown("Cannot cache non-Image asset: " + E.string(c) + " as Image");
                            this.image.h[a] = c;
                            break;
                        case "MUSIC":
                        case "SOUND":
                            if (!(c instanceof Oc)) throw aa.thrown("Cannot cache non-AudioBuffer asset: " + E.string(c) + " as AudioBuffer");
                            this.audio.h[a] = c;
                            break;
                        default:
                            throw aa.thrown(b + " assets are not cachable");
                    }
                },
                clear: function (a) {
                    if (null == a) this.audio = new ab, this.font = new ab, this.image = new ab;
                    else {
                        var b = this.audio.h;
                        b = Object.keys(b);
                        for (var c = b.length, d = 0; d < c;) {
                            var g = b[d++];
                            if (T.startsWith(g, a)) {
                                var f = this.audio;
                                Object.prototype.hasOwnProperty.call(f.h, g) && delete f.h[g]
                            }
                        }
                        b = this.font.h;
                        b = Object.keys(b);
                        c = b.length;
                        for (d = 0; d < c;) g = b[d++], T.startsWith(g, a) && (f = this.font, Object.prototype.hasOwnProperty.call(f.h, g) && delete f.h[g]);
                        b = this.image.h;
                        b = Object.keys(b);
                        c = b.length;
                        for (d = 0; d < c;) g = b[d++], T.startsWith(g, a) && (f = this.image, Object.prototype.hasOwnProperty.call(f.h, g) && delete f.h[g])
                    }
                },
                __class__: ul
            };
            var Nb = function () {
                this.types = new ab;
                this.sizes = new ab;
                this.preload = new ab;
                this.paths = new ab;
                this.pathGroups = new ab;
                this.classTypes = new ab;
                this.cachedText = new ab;
                this.cachedImages = new ab;
                this.cachedFonts = new ab;
                this.cachedBytes = new ab;
                this.cachedAudioBuffers = new ab;
                this.onChange = new Nc;
                this.bytesTotal = this.bytesLoaded = 0
            };
            h["lime.utils.AssetLibrary"] =
                Nb;
            Nb.__name__ = "lime.utils.AssetLibrary";
            Nb.fromBundle = function (a) {
                if (Object.prototype.hasOwnProperty.call(a.data.h, "library.json")) {
                    var b = Ad.fromBytes(a.data.h["library.json"]);
                    if (null != b) {
                        if (null == b.libraryType) var c = new Nb;
                        else if (c = h[b.libraryType], null != c) c = z.createInstance(c, b.libraryArgs);
                        else return Wa.warn("Could not find library type: " + b.libraryType, {

                                className: "lime.utils.AssetLibrary",
                                methodName: "fromBundle"
                            }), null;
                        c.__fromBundle(a,
                            b);
                        return c
                    }
                } else return c = new Nb, c.__fromBundle(a), c;
                return null
            };
            Nb.fromManifest = function (a) {
                if (null == a) return null;
                if (null == a.libraryType) var b = new Nb;
                else if (b = h[a.libraryType], null != b) b = z.createInstance(b, a.libraryArgs);
                else return Wa.warn("Could not find library type: " + a.libraryType, {

                        className: "lime.utils.AssetLibrary",
                        methodName: "fromManifest"
                    }), null;
                b.__fromManifest(a);
                return b
            };
            Nb.prototype = {
                exists: function (a, b) {
                    b = null != b ? Ua.__cast(b,
                        String) : null;
                    a = this.types.h[a];
                    return null == a || a != b && ("SOUND" != b && "MUSIC" != b || "MUSIC" != a && "SOUND" != a) && "BINARY" != b && null != b && ("BINARY" != a || "TEXT" != b) ? !1 : !0
                },
                getAsset: function (a, b) {
                    switch (b) {
                        case "BINARY":
                            return this.getBytes(a);
                        case "FONT":
                            return this.getFont(a);
                        case "IMAGE":
                            return this.getImage(a);
                        case "MUSIC":
                        case "SOUND":
                            return this.getAudioBuffer(a);
                        case "TEMPLATE":
                            throw aa.thrown("Not sure how to get template: " + a);
                        case "TEXT":
                            return this.getText(a);
                        default:
                            throw aa.thrown("Unknown asset type: " +
                                b);
                    }
                },
                getAudioBuffer: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a) ? this.cachedAudioBuffers.h[a] : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? Oc.fromBytes(Ua.__cast(z.createInstance(this.classTypes.h[a], []), Db)) : Oc.fromFile(this.getPath(a))
                },
                getBytes: function (a) {
                    if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a)) return this.cachedBytes.h[a];
                    if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a)) {
                        var b = Tf.ofString(this.cachedText.h[a]);
                        return this.cachedBytes.h[a] = b
                    }
                    return Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? Ua.__cast(z.createInstance(this.classTypes.h[a], []), Db) : Tf.fromFile(this.getPath(a))
                },
                getFont: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a) ? this.cachedFonts.h[a] : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? Ua.__cast(z.createInstance(this.classTypes.h[a], []), pb) : pb.fromFile(this.getPath(a))
                },
                getImage: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedImages.h,
                        a) ? this.cachedImages.h[a] : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? Ua.__cast(z.createInstance(this.classTypes.h[a], []), cc) : cc.fromFile(this.getPath(a))
                },
                getPath: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.paths.h, a) ? this.paths.h[a] : Object.prototype.hasOwnProperty.call(this.pathGroups.h, a) ? this.pathGroups.h[a][0] : null
                },
                getText: function (a) {
                    if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a)) return this.cachedText.h[a];
                    a = this.getBytes(a);
                    return null == a ? null :
                        a.getString(0, a.length)
                },
                isLocal: function (a, b) {
                    if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) return !0;
                    b = Ua.__cast(b, String);
                    if (null == b) return Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) || Object.prototype.hasOwnProperty.call(this.cachedText.h, a) || Object.prototype.hasOwnProperty.call(this.cachedImages.h, a) || Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a) ? !0 : Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a);
                    switch (b) {
                        case "FONT":
                            return Object.prototype.hasOwnProperty.call(this.cachedFonts.h,
                                a);
                        case "IMAGE":
                            return Object.prototype.hasOwnProperty.call(this.cachedImages.h, a);
                        case "MUSIC":
                        case "SOUND":
                            return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a);
                        default:
                            return Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) ? !0 : Object.prototype.hasOwnProperty.call(this.cachedText.h, a)
                    }
                },
                load: function () {
                    if (this.loaded) return Fc.withValue(this);
                    if (null == this.promise) {
                        this.promise = new Fd;
                        this.bytesLoadedCache = new ab;
                        this.assetsLoaded = 0;
                        this.assetsTotal = 1;
                        for (var a = Object.keys(this.preload.h),
                                 b = a.length, c = 0; c < b;) {
                            var d = a[c++];
                            if (this.preload.h[d]) {
                                Wa.verbose("Preloading asset: " + d + " [" + this.types.h[d] + "]", {

                                    className: "lime.utils.AssetLibrary",
                                    methodName: "load"
                                });
                                var g = this.types.h[d];
                                if (null != g) switch (g) {
                                    case "BINARY":
                                        this.assetsTotal++;
                                        g = this.loadBytes(d);
                                        g.onProgress(function (a, b) {
                                            return function (c, d) {
                                                b[0].load_onProgress(a[0], c, d)
                                            }
                                        }([d], [this]));
                                        g.onError(function (a, b) {
                                            return function (c) {
                                                b[0].load_onError(a[0], c)
                                            }
                                        }([d], [this]));
                                        g.onComplete(function (a,
                                                               b) {
                                            return function (c) {
                                                b[0].loadBytes_onComplete(a[0], c)
                                            }
                                        }([d], [this]));
                                        break;
                                    case "FONT":
                                        this.assetsTotal++;
                                        g = this.loadFont(d);
                                        g.onProgress(function (a, b) {
                                            return function (c, d) {
                                                b[0].load_onProgress(a[0], c, d)
                                            }
                                        }([d], [this]));
                                        g.onError(function (a, b) {
                                            return function (c) {
                                                b[0].load_onError(a[0], c)
                                            }
                                        }([d], [this]));
                                        g.onComplete(function (a, b) {
                                            return function (c) {
                                                b[0].loadFont_onComplete(a[0], c)
                                            }
                                        }([d], [this]));
                                        break;
                                    case "IMAGE":
                                        this.assetsTotal++;
                                        g = this.loadImage(d);
                                        g.onProgress(function (a, b) {
                                            return function (c,
                                                             d) {
                                                b[0].load_onProgress(a[0], c, d)
                                            }
                                        }([d], [this]));
                                        g.onError(function (a, b) {
                                            return function (c) {
                                                b[0].load_onError(a[0], c)
                                            }
                                        }([d], [this]));
                                        g.onComplete(function (a, b) {
                                            return function (c) {
                                                b[0].loadImage_onComplete(a[0], c)
                                            }
                                        }([d], [this]));
                                        break;
                                    case "MUSIC":
                                    case "SOUND":
                                        this.assetsTotal++;
                                        g = this.loadAudioBuffer(d);
                                        g.onProgress(function (a, b) {
                                            return function (c, d) {
                                                b[0].load_onProgress(a[0], c, d)
                                            }
                                        }([d], [this]));
                                        g.onError(function (a, b) {
                                            return function (c) {
                                                b[0].loadAudioBuffer_onError(a[0], c)
                                            }
                                        }([d], [this]));
                                        g.onComplete(function (a,
                                                               b) {
                                            return function (c) {
                                                b[0].loadAudioBuffer_onComplete(a[0], c)
                                            }
                                        }([d], [this]));
                                        break;
                                    case "TEXT":
                                        this.assetsTotal++, g = this.loadText(d), g.onProgress(function (a, b) {
                                            return function (c, d) {
                                                b[0].load_onProgress(a[0], c, d)
                                            }
                                        }([d], [this])), g.onError(function (a, b) {
                                            return function (c) {
                                                b[0].load_onError(a[0], c)
                                            }
                                        }([d], [this])), g.onComplete(function (a, b) {
                                            return function (c) {
                                                b[0].loadText_onComplete(a[0], c)
                                            }
                                        }([d], [this]))
                                }
                            }
                        }
                        this.__assetLoaded(null)
                    }
                    return this.promise.future
                },
                loadAudioBuffer: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h,
                        a) ? Fc.withValue(this.cachedAudioBuffers.h[a]) : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? Fc.withValue(Oc.fromBytes(Ua.__cast(z.createInstance(this.classTypes.h[a], []), Db))) : Object.prototype.hasOwnProperty.call(this.pathGroups.h, a) ? Oc.loadFromFiles(this.pathGroups.h[a]) : Oc.loadFromFile(this.paths.h[a])
                },
                loadBytes: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) ? Fc.withValue(this.cachedBytes.h[a]) : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ?
                        Fc.withValue(z.createInstance(this.classTypes.h[a], [])) : Tf.loadFromFile(this.getPath(a))
                },
                loadFont: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a) ? Fc.withValue(this.cachedFonts.h[a]) : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? (a = z.createInstance(this.classTypes.h[a], []), a.__loadFromName(a.name)) : pb.loadFromName(this.getPath(a))
                },
                loadImage: function (a) {
                    var b = this;
                    return Object.prototype.hasOwnProperty.call(this.cachedImages.h, a) ? Fc.withValue(this.cachedImages.h[a]) :
                        Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? Fc.withValue(z.createInstance(this.classTypes.h[a], [])) : Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) ? cc.loadFromBytes(this.cachedBytes.h[a]).then(function (c) {
                            var d = b.cachedBytes;
                            Object.prototype.hasOwnProperty.call(d.h, a) && delete d.h[a];
                            b.cachedImages.h[a] = c;
                            return Fc.withValue(c)
                        }) : cc.loadFromFile(this.getPath(a))
                },
                loadText: function (a) {
                    if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a)) return Fc.withValue(this.cachedText.h[a]);
                    if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) || Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
                        var b = this.getBytes(a);
                        if (null == b) return Fc.withValue(null);
                        b = b.getString(0, b.length);
                        this.cachedText.h[a] = b;
                        return Fc.withValue(b)
                    }
                    return (new Fg).load(this.getPath(a))
                },
                unload: function () {
                    this.cachedBytes.h = Object.create(null);
                    this.cachedFonts.h = Object.create(null);
                    this.cachedImages.h = Object.create(null);
                    this.cachedAudioBuffers.h = Object.create(null);
                    this.cachedText.h = Object.create(null)
                },
                __assetLoaded: function (a) {
                    this.assetsLoaded++;
                    null != a && Wa.verbose("Loaded asset: " + a + " [" + this.types.h[a] + "] (" + (this.assetsLoaded - 1) + "/" + (this.assetsTotal - 1) + ")", {

                        className: "lime.utils.AssetLibrary",
                        methodName: "__assetLoaded"
                    });
                    if (null != a) {
                        var b = Object.prototype.hasOwnProperty.call(this.sizes.h, a) ? this.sizes.h[a] : 0;
                        if (Object.prototype.hasOwnProperty.call(this.bytesLoadedCache.h, a)) {
                            var c = this.bytesLoadedCache.h[a];
                            c < b && (this.bytesLoaded += b - c)
                        } else this.bytesLoaded +=
                            b;
                        this.bytesLoadedCache.h[a] = b
                    }
                    this.assetsLoaded < this.assetsTotal ? this.promise.progress(this.bytesLoaded, this.bytesTotal) : (this.loaded = !0, this.promise.progress(this.bytesTotal, this.bytesTotal), this.promise.complete(this))
                },
                __cacheBreak: function (a) {
                    return Pa.__cacheBreak(a)
                },
                __fromBundle: function (a, b) {
                    if (null != b) {
                        var c = 0;
                        for (b = b.assets; c < b.length;) {
                            var d = b[c];
                            ++c;
                            var g = Object.prototype.hasOwnProperty.call(d, "id") ? d.id : d.path;
                            var f = a.data.h[d.path];
                            if (Object.prototype.hasOwnProperty.call(d, "type")) {
                                var k =
                                    d.type;
                                "TEXT" == k ? this.cachedText.h[g] = null != f ? E.string(f) : null : this.cachedBytes.h[g] = f;
                                this.types.h[g] = d.type
                            } else this.cachedBytes.h[g] = f, this.types.h[g] = "BINARY"
                        }
                    } else
                        for (c = 0, b = a.paths; c < b.length;) g = b[c], ++c, this.cachedBytes.h[g] = a.data.h[g], this.types.h[g] = "BINARY"
                },
                __fromManifest: function (a) {
                    var b = 2 <= a.version,
                        c = a.rootPath;
                    null == c && (c = "");
                    "" != c && (c += "/");
                    for (var d = 0, g = a.assets; d < g.length;) {
                        var f = g[d];
                        ++d;
                        var k = b && Object.prototype.hasOwnProperty.call(f, "size") ? f.size : 100;
                        var q = Object.prototype.hasOwnProperty.call(f,
                            "id") ? f.id : f.path;
                        if (Object.prototype.hasOwnProperty.call(f, "path")) {
                            var l = this.paths;
                            var n = this.__cacheBreak(this.__resolvePath(c + E.string(L.field(f, "path"))));
                            l.h[q] = n
                        }
                        if (Object.prototype.hasOwnProperty.call(f, "pathGroup")) {
                            l = L.field(f, "pathGroup");
                            n = 0;
                            for (var r = l.length; n < r;) {
                                var t = n++;
                                l[t] = this.__cacheBreak(this.__resolvePath(c + l[t]))
                            }
                            this.pathGroups.h[q] = l
                        }
                        this.sizes.h[q] = k;
                        this.types.h[q] = f.type;
                        Object.prototype.hasOwnProperty.call(f, "preload") && (this.preload.h[q] = L.field(f, "preload"));
                        Object.prototype.hasOwnProperty.call(f,
                            "className") && (k = L.field(f, "className"), k = h[k], this.classTypes.h[q] = k)
                    }
                    d = this.bytesTotal = 0;
                    for (g = a.assets; d < g.length;) f = g[d], ++d, q = Object.prototype.hasOwnProperty.call(f, "id") ? f.id : f.path, Object.prototype.hasOwnProperty.call(this.preload.h, q) && this.preload.h[q] && Object.prototype.hasOwnProperty.call(this.sizes.h, q) && (this.bytesTotal += this.sizes.h[q])
                },
                __resolvePath: function (a) {
                    a = T.replace(a, "\\", "/");
                    var b = a.indexOf(":");
                    T.startsWith(a, "http") && 0 < b ? (b += 3, a = M.substr(a, 0, b) + T.replace(M.substr(a, b, null),
                        "//", "/")) : a = T.replace(a, "//", "/");
                    if (-1 < a.indexOf("./")) {
                        a = a.split("/");
                        b = [];
                        for (var c = 0, d = a.length; c < d;) {
                            var g = c++;
                            ".." == a[g] ? 0 == g || ".." == b[g - 1] ? b.push("..") : b.pop() : "." == a[g] ? 0 == g && b.push(".") : b.push(a[g])
                        }
                        a = b.join("/")
                    }
                    return a
                },
                loadAudioBuffer_onComplete: function (a, b) {
                    this.cachedAudioBuffers.h[a] = b;
                    if (Object.prototype.hasOwnProperty.call(this.pathGroups.h, a))
                        for (var c = this.pathGroups.h[a], d = Object.keys(this.pathGroups.h), g = d.length, f = 0; f < g;) {
                            var k = d[f++];
                            if (k != a)
                                for (var q = 0; q < c.length;) {
                                    var l =
                                        c[q];
                                    ++q;
                                    if (-1 < this.pathGroups.h[k].indexOf(l)) {
                                        this.cachedAudioBuffers.h[k] = b;
                                        break
                                    }
                                }
                        }
                    this.__assetLoaded(a)
                },
                loadAudioBuffer_onError: function (a, b) {
                    null != b && "" != b ? Wa.warn('Could not load "' + a + '": ' + E.string(b), {

                        className: "lime.utils.AssetLibrary",
                        methodName: "loadAudioBuffer_onError"
                    }) : Wa.warn('Could not load "' + a + '"', {

                        className: "lime.utils.AssetLibrary",
                        methodName: "loadAudioBuffer_onError"
                    });
                    this.loadAudioBuffer_onComplete(a, new Oc)
                },
                loadBytes_onComplete: function (a, b) {
                    this.cachedBytes.h[a] = b;
                    this.__assetLoaded(a)
                },
                loadFont_onComplete: function (a, b) {
                    this.cachedFonts.h[a] = b;
                    this.__assetLoaded(a)
                },
                loadImage_onComplete: function (a, b) {
                    this.cachedImages.h[a] = b;
                    this.__assetLoaded(a)
                },
                loadText_onComplete: function (a, b) {
                    this.cachedText.h[a] = b;
                    this.__assetLoaded(a)
                },
                load_onError: function (a, b) {
                    null != b && "" != b ? this.promise.error('Error loading asset "' + a + '": ' + E.string(b)) : this.promise.error('Error loading asset "' +
                        a + '"')
                },
                load_onProgress: function (a, b, c) {
                    if (0 < b) {
                        var d = this.sizes.h[a];
                        0 < c ? (b /= c, 1 < b && (b = 1), b = Math.floor(b * d)) : b > d && (b = d);
                        Object.prototype.hasOwnProperty.call(this.bytesLoadedCache.h, a) ? (d = this.bytesLoadedCache.h[a], b != d && (this.bytesLoaded += b - d)) : this.bytesLoaded += b;
                        this.bytesLoadedCache.h[a] = b;
                        this.promise.progress(this.bytesLoaded, this.bytesTotal)
                    }
                },
                __class__: Nb
            };
            var Ad = function () {
                this.assets = [];
                this.libraryArgs = [];
                this.version = 2
            };
            h["lime.utils.AssetManifest"] = Ad;
            Ad.__name__ = "lime.utils.AssetManifest";
            Ad.fromBytes = function (a, b) {
                return null != a ? Ad.parse(a.getString(0, a.length), b) : null
            };
            Ad.loadFromFile = function (a, b) {
                a = Ad.__resolvePath(a);
                b = Ad.__resolveRootPath(b, a);
                return null == a ? null : Tf.loadFromFile(a).then(function (a) {
                    return Fc.withValue(Ad.fromBytes(a, b))
                })
            };
            Ad.parse = function (a, b) {
                if (null == a || "" == a) return null;
                a = JSON.parse(a);
                var c = new Ad;
                Object.prototype.hasOwnProperty.call(a, "name") && (c.name = a.name);
                Object.prototype.hasOwnProperty.call(a, "libraryType") && (c.libraryType = a.libraryType);
                Object.prototype.hasOwnProperty.call(a,
                    "libraryArgs") && (c.libraryArgs = a.libraryArgs);
                if (Object.prototype.hasOwnProperty.call(a, "assets")) {
                    var d = a.assets;
                    Object.prototype.hasOwnProperty.call(a, "version") && 2 >= a.version ? c.assets = pd.run(d) : c.assets = d
                }
                Object.prototype.hasOwnProperty.call(a, "rootPath") && (c.rootPath = a.rootPath);
                null != b && "" != b && (c.rootPath = null == c.rootPath || "" == c.rootPath ? b : b + "/" + c.rootPath);
                return c
            };
            Ad.__resolvePath = function (a) {
                if (null == a) return null;
                var b = a.indexOf("?");
                var c = -1 < b ? M.substr(a, 0, b) : a;
                for (c = T.replace(c, "\\", "/"); T.endsWith(c,
                    "/");) c = M.substr(c, 0, c.length - 1);
                return T.endsWith(c, ".bundle") ? -1 < b ? c + "/library.json" + M.substr(a, b, null) : c + "/library.json" : a
            };
            Ad.__resolveRootPath = function (a, b) {
                if (null != a) return a;
                a = b.indexOf("?");
                a = -1 < a ? M.substr(b, 0, a) : b;
                for (a = T.replace(a, "\\", "/"); T.endsWith(a, "/");) {
                    if ("/" == a) return a;
                    a = M.substr(a, 0, a.length - 1)
                }
                return T.endsWith(a, ".bundle") ? a : Rd.directory(a)
            };
            Ad.prototype = {
                __class__: Ad
            };
            var Pa = function () {
            };
            h["lime.utils.Assets"] = Pa;
            Pa.__name__ = "lime.utils.Assets";
            Pa.exists = function (a, b) {
                null ==
                b && (b = "BINARY");
                var c = a.indexOf(":"),
                    d = a.substring(0, c);
                a = a.substring(c + 1);
                d = Pa.getLibrary(d);
                return null != d ? d.exists(a, b) : !1
            };
            Pa.getAsset = function (a, b, c) {
                if (c && Pa.cache.enabled) switch (b) {
                    case "FONT":
                        var d = Pa.cache.font.h[a];
                        if (null != d) return d;
                        break;
                    case "IMAGE":
                        d = Pa.cache.image.h[a];
                        if (Pa.isValidImage(d)) return d;
                        break;
                    case "MUSIC":
                    case "SOUND":
                        d = Pa.cache.audio.h[a];
                        if (Pa.isValidAudio(d)) return d;
                        break;
                    case "TEMPLATE":
                        throw aa.thrown("Not sure how to get template: " + a);
                    case "BINARY":
                    case "TEXT":
                        c = !1;
                        break;
                    default:
                        return null
                }
                var g = a.indexOf(":");
                d = a.substring(0, g);
                g = a.substring(g + 1);
                var f = Pa.getLibrary(d);
                if (null != f)
                    if (f.exists(g, b)) {
                        if (f.isLocal(g, b)) return d = f.getAsset(g, b), c && Pa.cache.enabled && Pa.cache.set(a, b, d), d;
                        Wa.error(b + ' asset "' + a + '" exists, but only asynchronously', {

                            className: "lime.utils.Assets",
                            methodName: "getAsset"
                        })
                    } else Wa.error("There is no " + b + ' asset with an ID of "' + a + '"', {
                        className: "lime.utils.Assets",
                        methodName: "getAsset"
                    });
                else Wa.error(Pa.__libraryNotFound(d), {

                    className: "lime.utils.Assets",
                    methodName: "getAsset"
                });
                return null
            };
            Pa.getBytes = function (a) {
                return Pa.getAsset(a, "BINARY", !1)
            };
            Pa.getFont = function (a, b) {
                null == b && (b = !0);
                return Pa.getAsset(a, "FONT", b)
            };
            Pa.getLibrary = function (a) {
                if (null == a || "" == a) a = "default";
                return Pa.libraries.h[a]
            };
            Pa.getText = function (a) {
                return Pa.getAsset(a, "TEXT", !1)
            };
            Pa.isLocal = function (a, b, c) {
                null == c && (c = !0);
                if (c && Pa.cache.enabled &&
                    Pa.cache.exists(a, b)) return !0;
                var d = a.indexOf(":");
                c = a.substring(0, d);
                a = a.substring(d + 1);
                c = Pa.getLibrary(c);
                return null != c ? c.isLocal(a, b) : !1
            };
            Pa.isValidAudio = function (a) {
                return null != a
            };
            Pa.isValidImage = function (a) {
                return null != a ? null != a.buffer : !1
            };
            Pa.loadLibrary = function (a) {
                var b = new Fd,
                    c = Pa.getLibrary(a);
                if (null != c) return c.load();
                c = a;
                var d = null;
                if (Object.prototype.hasOwnProperty.call(Pa.bundlePaths.h, a)) qe.loadFromFile(Pa.bundlePaths.h[a]).onComplete(function (c) {
                    null == c ? b.error('Cannot load bundle for library "' +
                        a + '"') : (c = Nb.fromBundle(c), null == c ? b.error('Cannot open library "' + a + '"') : (Pa.libraries.h[a] = c, c.onChange.add((H = Pa.onChange, m(H, H.dispatch))), b.completeWith(c.load())))
                }).onError(function (c) {
                    b.error('There is no asset library with an ID of "' + a + '"')
                });
                else Object.prototype.hasOwnProperty.call(Pa.libraryPaths.h, a) ? (c = Pa.libraryPaths.h[a], d = Rd.directory(c)) : (T.endsWith(c, ".bundle") ? (d = c, c += "/library.json") : d = Rd.directory(c), c = Pa.__cacheBreak(c)), Ad.loadFromFile(c, d).onComplete(function (c) {
                    null == c ?
                        b.error('Cannot parse asset manifest for library "' + a + '"') : (c = Nb.fromManifest(c), null == c ? b.error('Cannot open library "' + a + '"') : (Pa.libraries.h[a] = c, c.onChange.add((H = Pa.onChange, m(H, H.dispatch))), b.completeWith(c.load())))
                }).onError(function (c) {
                    b.error('There is no asset library with an ID of "' + a + '"')
                });
                return b.future
            };
            Pa.registerLibrary = function (a, b) {
                if (null == a || "" == a) a = "default";
                if (Object.prototype.hasOwnProperty.call(Pa.libraries.h, a)) {
                    if (Pa.libraries.h[a] == b) return;
                    Pa.unloadLibrary(a)
                }
                null !=
                b && b.onChange.add(Pa.library_onChange);
                Pa.libraries.h[a] = b
            };
            Pa.unloadLibrary = function (a) {
                Pa.removeLibrary(a, !0)
            };
            Pa.removeLibrary = function (a, b) {
                null == b && (b = !0);
                if (null == a || "" == a) a = "default";
                var c = Pa.libraries.h[a];
                null != c && (Pa.cache.clear(a + ":"), c.onChange.remove(Pa.library_onChange), b && c.unload());
                b = Pa.libraries;
                Object.prototype.hasOwnProperty.call(b.h, a) && delete b.h[a]
            };
            Pa.__cacheBreak = function (a) {
                0 < Pa.cache.version && (a = -1 < a.indexOf("?") ? a + ("&" + Pa.cache.version) : a + ("?" + Pa.cache.version));
                return a
            };
            Pa.__libraryNotFound = function (a) {
                if (null == a || "" == a) a = "default";
                return null == C.current || null == C.current.__preloader || C.current.__preloader.complete ? 'There is no asset library named "' + a + '"' : 'There is no asset library named "' + a + '", or it is not yet preloaded'
            };
            Pa.library_onChange = function () {
                Pa.cache.clear();
                Pa.onChange.dispatch()
            };
            var vl = function (a, b) {
                this.bytes = a;
                this.offset = b
            };
            h["lime.utils.BytePointerData"] = vl;
            vl.__name__ = "lime.utils.BytePointerData";
            vl.prototype = {
                __class__: vl
            };
            var Tf = {
                    _new: function (a,
                                    b) {
                        return new Db(b)
                    },
                    decompress: function (a, b) {
                        switch (b._hx_index) {
                            case 0:
                                return Zl.decompress(a);
                            case 1:
                                return $l.decompress(a);
                            case 2:
                                return bm.decompress(a);
                            case 3:
                                return cm.decompress(a)
                        }
                    },
                    fromBytes: function (a) {
                        return null == a ? null : Tf._new(a.length, a.b.bufferValue)
                    },
                    fromFile: function (a) {
                        return null
                    },
                    loadFromFile: function (a) {
                        return (new lj).load(a)
                    },
                    ofString: function (a) {
                        a = Db.ofString(a);
                        return Tf._new(a.length, a.b.bufferValue)
                    }
                },
                oj = N["lime.utils.CompressionAlgorithm"] = {
                    __ename__: "lime.utils.CompressionAlgorithm",
                    __constructs__: null,
                    DEFLATE: {
                        _hx_name: "DEFLATE",
                        _hx_index: 0,
                        __enum__: "lime.utils.CompressionAlgorithm",
                        toString: u
                    },
                    GZIP: {
                        _hx_name: "GZIP",
                        _hx_index: 1,
                        __enum__: "lime.utils.CompressionAlgorithm",
                        toString: u
                    },
                    LZMA: {
                        _hx_name: "LZMA",
                        _hx_index: 2,
                        __enum__: "lime.utils.CompressionAlgorithm",
                        toString: u
                    },
                    ZLIB: {
                        _hx_name: "ZLIB",
                        _hx_index: 3,
                        __enum__: "lime.utils.CompressionAlgorithm",
                        toString: u
                    }
                };
            oj.__constructs__ = [oj.DEFLATE, oj.GZIP, oj.LZMA, oj.ZLIB];
            var oh = {
                    toArrayBufferView: function (a) {
                        return a
                    }
                },
                Wa = function () {
                };
            h["lime.utils.Log"] = Wa;
            Wa.__name__ = "lime.utils.Log";
            Wa.level = null;
            Wa.debug = function (a, b) {
                4 <= Wa.level && console.debug("[" + b.className + "] " + E.string(a))
            };
            Wa.error = function (a, b) {
                if (1 <= Wa.level) {
                    a = "[" + b.className + "] ERROR: " + E.string(a);
                    if (Wa.throwErrors) throw aa.thrown(a);
                    console.error(a)
                }
            };
            Wa.info = function (a, b) {
                3 <= Wa.level && console.info("[" + b.className + "] " + E.string(a))
            };
            Wa.verbose = function (a, b) {
                5 <= Wa.level && (a = "[" + b.className + "] " + E.string(a), console.log(a))
            };
            Wa.warn = function (a, b) {
                2 <= Wa.level && console.warn("[" +
                    b.className + "] WARNING: " + E.string(a))
            };
            var vk = function () {
                this.bytesTotalCache = new ab;
                this.bytesLoadedCache2 = new ab;
                this.bytesLoadedCache = new Ba;
                this.onProgress = new ej;
                this.onComplete = new Nc;
                this.bytesTotal = this.bytesLoaded = 0;
                this.libraries = [];
                this.libraryNames = [];
                this.onProgress.add(m(this, this.update))
            };
            h["lime.utils.Preloader"] = vk;
            vk.__name__ = "lime.utils.Preloader";
            vk.prototype = {
                addLibrary: function (a) {
                    this.libraries.push(a)
                },
                addLibraryName: function (a) {
                    -1 == this.libraryNames.indexOf(a) && this.libraryNames.push(a)
                },
                load: function () {
                    for (var a = this, b = 0, c = this.libraries; b < c.length;) {
                        var d = c[b];
                        ++b;
                        this.bytesTotal += d.bytesTotal
                    }
                    this.loadedLibraries = -1;
                    this.preloadStarted = !1;
                    b = 0;
                    for (c = this.libraries; b < c.length;) d = [c[b]], ++b, Wa.verbose("Preloading asset library", {

                        className: "lime.utils.Preloader",
                        methodName: "load"
                    }), d[0].load().onProgress(function (b) {
                        return function (c, d) {
                            a.bytesLoaded = null == a.bytesLoadedCache.h.__keys__[b[0].__id__] ? a.bytesLoaded + c : a.bytesLoaded + (c -
                                a.bytesLoadedCache.h[b[0].__id__]);
                            a.bytesLoadedCache.set(b[0], c);
                            a.simulateProgress || a.onProgress.dispatch(a.bytesLoaded, a.bytesTotal)
                        }
                    }(d)).onComplete(function (b) {
                        return function (c) {
                            a.bytesLoaded = null == a.bytesLoadedCache.h.__keys__[b[0].__id__] ? a.bytesLoaded + b[0].bytesTotal : a.bytesLoaded + ((b[0].bytesTotal | 0) - a.bytesLoadedCache.h[b[0].__id__]);
                            a.loadedAssetLibrary()
                        }
                    }(d)).onError(function () {
                        return function (a) {
                            Wa.error(a, {
                                className: "lime.utils.Preloader",
                                methodName: "load"
                            })
                        }
                    }());
                    b = 0;
                    for (c = this.libraryNames; b < c.length;) ++b, this.bytesTotal += 200;
                    this.loadedLibraries++;
                    this.preloadStarted = !0;
                    this.updateProgress()
                },
                loadedAssetLibrary: function (a) {
                    this.loadedLibraries++;
                    var b = this.loadedLibraries;
                    this.preloadStarted || ++b;
                    var c = this.libraries.length + this.libraryNames.length;
                    null != a ? Wa.verbose("Loaded asset library: " + a + " [" + b + "/" + c + "]", {

                        className: "lime.utils.Preloader",
                        methodName: "loadedAssetLibrary"
                    }) : Wa.verbose("Loaded asset library [" +
                        b + "/" + c + "]", {

                        className: "lime.utils.Preloader",
                        methodName: "loadedAssetLibrary"
                    });
                    this.updateProgress()
                },
                start: function () {
                    this.complete || this.simulateProgress || !this.preloadComplete || (this.complete = !0, this.onComplete.dispatch())
                },
                update: function (a, b) {
                },
                updateProgress: function () {
                    var a = this;
                    this.simulateProgress || this.onProgress.dispatch(this.bytesLoaded, this.bytesTotal);
                    if (this.loadedLibraries == this.libraries.length && !this.initLibraryNames) {
                        this.initLibraryNames = !0;
                        for (var b = 0, c = this.libraryNames; b < c.length;) {
                            var d = [c[b]];
                            ++b;
                            Wa.verbose("Preloading asset library: " + d[0], {

                                className: "lime.utils.Preloader",
                                methodName: "updateProgress"
                            });
                            Pa.loadLibrary(d[0]).onProgress(function (b) {
                                return function (c, d) {
                                    0 < d && (Object.prototype.hasOwnProperty.call(a.bytesTotalCache.h, b[0]) || (a.bytesTotalCache.h[b[0]] = d, a.bytesTotal += d - 200), c > d && (c = d), Object.prototype.hasOwnProperty.call(a.bytesLoadedCache2.h, b[0]) ? a.bytesLoaded += c -
                                        a.bytesLoadedCache2.h[b[0]] : a.bytesLoaded += c, a.bytesLoadedCache2.h[b[0]] = c, a.simulateProgress || a.onProgress.dispatch(a.bytesLoaded, a.bytesTotal))
                                }
                            }(d)).onComplete(function (b) {
                                return function (c) {
                                    c = 200;
                                    Object.prototype.hasOwnProperty.call(a.bytesTotalCache.h, b[0]) && (c = a.bytesTotalCache.h[b[0]]);
                                    Object.prototype.hasOwnProperty.call(a.bytesLoadedCache2.h, b[0]) ? a.bytesLoaded += c - a.bytesLoadedCache2.h[b[0]] : a.bytesLoaded += c;
                                    a.loadedAssetLibrary(b[0])
                                }
                            }(d)).onError(function () {
                                return function (a) {
                                    Wa.error(a, {

                                        className: "lime.utils.Preloader",
                                        methodName: "updateProgress"
                                    })
                                }
                            }())
                        }
                    }
                    this.simulateProgress || this.loadedLibraries != this.libraries.length + this.libraryNames.length || (this.preloadComplete || (this.preloadComplete = !0, Wa.verbose("Preload complete", {

                        className: "lime.utils.Preloader",
                        methodName: "updateProgress"
                    })), this.start())
                },
                __class__: vk
            };
            var Yd = function () {
                le.call(this)
            };
            h["msignal.Signal0"] = Yd;
            Yd.__name__ =
                "msignal.Signal0";
            Yd.__super__ = le;
            Yd.prototype = w(le.prototype, {
                dispatch: function () {
                    for (var a = this.slots; a.nonEmpty;) a.head.execute(), a = a.tail
                },
                createSlot: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    return new pj(this, a, b, c)
                },
                __class__: Yd
            });
            var hg = function (a, b) {
                le.call(this, [a, b])
            };
            h["msignal.Signal2"] = hg;
            hg.__name__ = "msignal.Signal2";
            hg.__super__ = le;
            hg.prototype = w(le.prototype, {
                dispatch: function (a, b) {
                    for (var c = this.slots; c.nonEmpty;) c.head.execute(a, b), c = c.tail
                },
                createSlot: function (a, b, c) {
                    null ==
                    c && (c = 0);
                    null == b && (b = !1);
                    return new qj(this, a, b, c)
                },
                __class__: hg
            });
            var re = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = !1);
                this.signal = a;
                this.set_listener(b);
                this.once = c;
                this.priority = d;
                this.enabled = !0
            };
            h["msignal.Slot"] = re;
            re.__name__ = "msignal.Slot";
            re.prototype = {
                remove: function () {
                    this.signal.remove(this.listener)
                },
                set_listener: function (a) {
                    return this.listener = a
                },
                __class__: re,
                __properties__: {
                    set_listener: "set_listener"
                }
            };
            var pj = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = !1);
                re.call(this, a, b, c,
                    d)
            };
            h["msignal.Slot0"] = pj;
            pj.__name__ = "msignal.Slot0";
            pj.__super__ = re;
            pj.prototype = w(re.prototype, {
                execute: function () {
                    this.enabled && (this.once && this.remove(), this.listener())
                },
                __class__: pj
            });
            var Ui = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = !1);
                re.call(this, a, b, c, d)
            };
            h["msignal.Slot1"] = Ui;
            Ui.__name__ = "msignal.Slot1";
            Ui.__super__ = re;
            Ui.prototype = w(re.prototype, {
                execute: function (a) {
                    this.enabled && (this.once && this.remove(), null != this.param && (a = this.param), this.listener(a))
                },
                __class__: Ui
            });
            var qj = function (a,
                               b, c, d) {
                null == d && (d = 0);
                null == c && (c = !1);
                re.call(this, a, b, c, d)
            };
            h["msignal.Slot2"] = qj;
            qj.__name__ = "msignal.Slot2";
            qj.__super__ = re;
            qj.prototype = w(re.prototype, {
                execute: function (a, b) {
                    this.enabled && (this.once && this.remove(), null != this.param1 && (a = this.param1), null != this.param2 && (b = this.param2), this.listener(a, b))
                },
                __class__: qj
            });
            var db = function () {
            };
            h["openfl.Lib"] = db;
            db.__name__ = "openfl.Lib";
            db.__properties__ = {
                get_current: "get_current"
            };
            db.getTimer = function () {
                return yc.getTimer()
            };
            db.getURL = function (a, b) {
                db.navigateToURL(a,
                    b)
            };
            db.navigateToURL = function (a, b) {
                null == b && (b = "_blank");
                var c = a.url;
                if (z.typeof(a.data) == cb.TObject) {
                    for (var d = "", g = L.fields(a.data), f = 0; f < g.length;) {
                        var k = g[f];
                        ++f;
                        0 < d.length && (d += "&");
                        var q = encodeURIComponent(k) + "=";
                        k = E.string(L.field(a.data, k));
                        d += q + encodeURIComponent(k)
                    }
                    c = -1 < c.indexOf("?") ? c + ("&" + d) : c + ("?" + d)
                }
                yc.openURL(c, b)
            };
            db.setTimeout = function (a, b, c) {
                var d = ++db.__lastTimerID,
                    g = db.__timers;
                b = Qf.delay(function () {
                    db.__timers.remove(d);
                    if (null != db.get_current() && null != db.get_current().stage &&
                        db.get_current().stage.__uncaughtErrorEvents.__enabled) try {
                        a.apply(a, null == c ? [] : c)
                    } catch (k) {
                        Ha.lastError = k;
                        var b = aa.caught(k).unwrap();
                        db.get_current().stage.__handleError(b)
                    } else a.apply(a, null == c ? [] : c)
                }, b);
                g.h[d] = b;
                return d
            };
            db.get_current = function () {
                null == vc.current && (vc.current = new xf);
                return vc.current
            };
            var Te = function () {
            };
            h["openfl._Vector.IVector"] = Te;
            Te.__name__ = "openfl._Vector.IVector";
            Te.__isInterface__ = !0;
            Te.prototype = {
                __class__: Te,
                __properties__: {
                    get_length: "get_length"
                }
            };
            var rj = function (a,
                               b, c) {
                null == b && (b = !1);
                null == a && (a = 0);
                null == c && (c = []);
                this.__array = c;
                0 < a && this.set_length(a);
                this.fixed = b
            };
            h["openfl._Vector.BoolVector"] = rj;
            rj.__name__ = "openfl._Vector.BoolVector";
            rj.__interfaces__ = [Te];
            rj.prototype = {
                toJSON: function () {
                    return this.__array
                },
                get_length: function () {
                    return this.__array.length
                },
                set_length: function (a) {
                    if (!this.fixed) {
                        var b = this.__array.length;
                        0 > a && (a = 0);
                        if (a > b)
                            for (; b < a;) {
                                var c = b++;
                                this.__array[c] = !1
                            } else
                            for (; this.__array.length > a;) this.__array.pop()
                    }
                    return this.__array.length
                },
                __class__: rj,
                __properties__: {
                    set_length: "set_length",
                    get_length: "get_length"
                }
            };
            var Je = function (a, b, c, d) {
                null == d && (d = !1);
                null == b && (b = !1);
                null == a && (a = 0);
                if (d) {
                    if (this.__array = [], null != c) {
                        d = 0;
                        for (var g = c.length; d < g;) {
                            var f = d++;
                            this.__array[f] = c[f]
                        }
                    }
                } else null == c && (c = []), this.__array = c;
                0 < a && this.set_length(a);
                this.fixed = b
            };
            h["openfl._Vector.FloatVector"] = Je;
            Je.__name__ = "openfl._Vector.FloatVector";
            Je.__interfaces__ = [Te];
            Je.prototype = {
                concat: function (a) {
                    return null == a ? new Je(0, !1, this.__array.slice()) :
                        0 < a.__array.length ? new Je(0, !1, this.__array.concat(a.__array)) : new Je(0, !1, this.__array.slice())
                },
                copy: function () {
                    return new Je(0, this.fixed, this.__array.slice())
                },
                get: function (a) {
                    return this.__array[a]
                },
                push: function (a) {
                    return this.fixed ? this.__array.length : this.__array.push(a)
                },
                set: function (a, b) {
                    return !this.fixed || a < this.__array.length ? this.__array[a] = b : b
                },
                toJSON: function () {
                    return this.__array
                },
                get_length: function () {
                    return this.__array.length
                },
                set_length: function (a) {
                    if (a != this.__array.length && !this.fixed) {
                        var b =
                            this.__array.length;
                        0 > a && (a = 0);
                        if (a > b)
                            for (; b < a;) {
                                var c = b++;
                                this.__array[c] = 0
                            } else
                            for (; this.__array.length > a;) this.__array.pop()
                    }
                    return this.__array.length
                },
                __class__: Je,
                __properties__: {
                    set_length: "set_length",
                    get_length: "get_length"
                }
            };
            var sj = function (a, b, c) {
                null == b && (b = !1);
                null == a && (a = 0);
                null == c && (c = []);
                this.__array = c;
                0 < a && this.set_length(a);
                this.fixed = b
            };
            h["openfl._Vector.FunctionVector"] = sj;
            sj.__name__ = "openfl._Vector.FunctionVector";
            sj.__interfaces__ = [Te];
            sj.prototype = {
                toJSON: function () {
                    return this.__array
                },
                get_length: function () {
                    return this.__array.length
                },
                set_length: function (a) {
                    if (!this.fixed) {
                        var b = this.__array.length;
                        0 > a && (a = 0);
                        if (a > b)
                            for (; b < a;) {
                                var c = b++;
                                this.__array[c] = null
                            } else
                            for (; this.__array.length > a;) this.__array.pop()
                    }
                    return this.__array.length
                },
                __class__: sj,
                __properties__: {
                    set_length: "set_length",
                    get_length: "get_length"
                }
            };
            var Xg = function (a, b, c) {
                null == b && (b = !1);
                null == a && (a = 0);
                null == c && (c = []);
                this.__array = c;
                0 < a && this.set_length(a);
                this.fixed = b
            };
            h["openfl._Vector.IntVector"] = Xg;
            Xg.__name__ =
                "openfl._Vector.IntVector";
            Xg.__interfaces__ = [Te];
            Xg.prototype = {
                get: function (a) {
                    return this.__array[a]
                },
                iterator: function () {
                    return new vf(this.__array)
                },
                push: function (a) {
                    return this.fixed ? this.__array.length : this.__array.push(a)
                },
                set: function (a, b) {
                    return !this.fixed || a < this.__array.length ? this.__array[a] = b : b
                },
                toJSON: function () {
                    return this.__array
                },
                get_length: function () {
                    return this.__array.length
                },
                set_length: function (a) {
                    if (!this.fixed) {
                        var b = this.__array.length;
                        0 > a && (a = 0);
                        if (a > b)
                            for (; b < a;) {
                                var c = b++;
                                this.__array[c] = 0
                            } else
                            for (; this.__array.length > a;) this.__array.pop()
                    }
                    return this.__array.length
                },
                __class__: Xg,
                __properties__: {
                    set_length: "set_length",
                    get_length: "get_length"
                }
            };
            var gg = function (a, b, c, d) {
                null == d && (d = !1);
                null == b && (b = !1);
                null == a && (a = 0);
                if (d) {
                    if (this.__array = [], null != c) {
                        d = 0;
                        for (var g = c.length; d < g;) {
                            var f = d++;
                            this.__array[f] = c[f]
                        }
                    }
                } else null == c && (c = []), this.__array = c;
                0 < a && this.set_length(a);
                this.fixed = b
            };
            h["openfl._Vector.ObjectVector"] = gg;
            gg.__name__ = "openfl._Vector.ObjectVector";
            gg.__interfaces__ = [Te];
            gg.prototype = {
                get: function (a) {
                    return this.__array[a]
                },
                indexOf: function (a, b) {
                    null == b && (b = 0);
                    for (var c = this.__array.length; b < c;) {
                        var d = b++;
                        if (this.__array[d] == a) return d
                    }
                    return -1
                },
                insertAt: function (a, b) {
                    (!this.fixed || a < this.__array.length) && this.__array.splice(a, 0, b)
                },
                iterator: function () {
                    return new vf(this.__array)
                },
                push: function (a) {
                    return this.fixed ? this.__array.length : this.__array.push(a)
                },
                removeAt: function (a) {
                    return !this.fixed || a < this.__array.length ? this.__array.splice(a, 1)[0] : null
                },
                set: function (a,
                               b) {
                    return !this.fixed || a < this.__array.length ? this.__array[a] = b : b
                },
                splice: function (a, b) {
                    return new gg(0, !1, this.__array.splice(a, b))
                },
                toJSON: function () {
                    return this.__array
                },
                unshift: function (a) {
                    this.fixed || this.__array.unshift(a)
                },
                get_length: function () {
                    return this.__array.length
                },
                set_length: function (a) {
                    if (!this.fixed) {
                        var b = this.__array.length;
                        0 > a && (a = 0);
                        if (a > b)
                            for (; b < a;) b++, this.__array.push(null);
                        else
                            for (; this.__array.length > a;) this.__array.pop()
                    }
                    return this.__array.length
                },
                __class__: gg,
                __properties__: {
                    set_length: "set_length",
                    get_length: "get_length"
                }
            };
            var ie = function () {
            };
            h["openfl.desktop.Clipboard"] = ie;
            ie.__name__ = "openfl.desktop.Clipboard";
            ie.__properties__ = {
                get_generalClipboard: "get_generalClipboard"
            };
            ie.__generalClipboard = null;
            ie.get_generalClipboard = function () {
                null == ie.__generalClipboard && (ie.__generalClipboard = new ie, ie.__generalClipboard.__systemClipboard = !0);
                return ie.__generalClipboard
            };
            ie.prototype = {
                setData: function (a, b, c) {
                    if (this.__systemClipboard) switch (a) {
                        case 0:
                        case 1:
                        case 2:
                            return a = b, kc.set_text(null ==
                            a ? null : E.string(a)), !0;
                        default:
                            return !1
                    }
                    switch (a) {
                        case 0:
                            return a = b, this.__htmlText = null == a ? null : E.string(a), !0;
                        case 1:
                            return a = b, this.__richText = null == a ? null : E.string(a), !0;
                        case 2:
                            return a = b, this.__text = null == a ? null : E.string(a), !0;
                        default:
                            return !1
                    }
                },
                __class__: ie
            };
            var Ug = function () {
                C.call(this);
                null == vc.application && (vc.application = this);
                null == vc.current && (vc.current = new xf);
                vc.current.__loaderInfo = se.create(null);
                vc.current.__loaderInfo.content = vc.current
            };
            h["openfl.display.Application"] = Ug;
            Ug.__name__ =
                "openfl.display.Application";
            Ug.__super__ = C;
            Ug.prototype = w(C.prototype, {
                createWindow: function (a) {
                    var b = new ph(this, a);
                    -
                        1 == vc.current.__loaderInfo.width && (vc.current.__loaderInfo.width = b.__width, vc.current.__loaderInfo.height = b.__height);
                    this.__windows.push(b);
                    this.__windowByID.h[b.id] = b;
                    var c = this;
                    b.onClose.add(function () {
                        c.__onWindowClose(b)
                    }, !1, -1E4);
                    null == this.__window && (this.__window = b, b.onActivate.add(m(this, this.onWindowActivate)), b.onRenderContextLost.add(m(this, this.onRenderContextLost)),
                        b.onRenderContextRestored.add(m(this, this.onRenderContextRestored)), b.onDeactivate.add(m(this, this.onWindowDeactivate)), b.onDropFile.add(m(this, this.onWindowDropFile)), b.onEnter.add(m(this, this.onWindowEnter)), b.onExpose.add(m(this, this.onWindowExpose)), b.onFocusIn.add(m(this, this.onWindowFocusIn)), b.onFocusOut.add(m(this, this.onWindowFocusOut)), b.onFullscreen.add(m(this, this.onWindowFullscreen)), b.onKeyDown.add(m(this, this.onKeyDown)), b.onKeyUp.add(m(this, this.onKeyUp)), b.onLeave.add(m(this, this.onWindowLeave)),
                        b.onMinimize.add(m(this, this.onWindowMinimize)), b.onMouseDown.add(m(this, this.onMouseDown)), b.onMouseMove.add(m(this, this.onMouseMove)), b.onMouseMoveRelative.add(m(this, this.onMouseMoveRelative)), b.onMouseUp.add(m(this, this.onMouseUp)), b.onMouseWheel.add(m(this, this.onMouseWheel)), b.onMove.add(m(this, this.onWindowMove)), b.onRender.add(m(this, this.render)), b.onResize.add(m(this, this.onWindowResize)), b.onRestore.add(m(this, this.onWindowRestore)), b.onTextEdit.add(m(this, this.onTextEdit)), b.onTextInput.add(m(this,
                        this.onTextInput)), this.onWindowCreate());
                    this.onCreateWindow.dispatch(b);
                    return b
                },
                exec: function () {
                    return C.prototype.exec.call(this)
                },
                __checkForAllWindowsClosed: function () {
                    0 < this.__windows.length || C.prototype.__checkForAllWindowsClosed.call(this)
                },
                __onModuleExit: function (a) {
                    this.onExit.canceled || (vc.application == this && (vc.application = null), C.prototype.__onModuleExit.call(this, a))
                },
                __class__: Ug
            });
            var Yg = function (a, b, c) {
                null == c && (c = !1);
                ea.call(this);
                this.__drawableType = 2;
                this.__bitmapData = a;
                this.pixelSnapping =
                    b;
                this.smoothing = c;
                null == b && (this.pixelSnapping = 1)
            };
            h["openfl.display.Bitmap"] = Yg;
            Yg.__name__ = "openfl.display.Bitmap";
            Yg.__super__ = ea;
            Yg.prototype = w(ea.prototype, {
                __enterFrame: function (a) {
                    null == this.__bitmapData || null == this.__bitmapData.image || this.__bitmapData.image.version == this.__imageVersion || this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty())
                },
                __getBounds: function (a, b) {
                    var c = sa.__pool.get();
                    null != this.__bitmapData ? c.setTo(0, 0, this.__bitmapData.width, this.__bitmapData.height) :
                        c.setTo(0, 0, 0, 0);
                    c.__transform(c, b);
                    a.__expand(c.x, c.y, c.width, c.height);
                    sa.__pool.release(c)
                },
                __hitTest: function (a, b, c, d, g, f) {
                    if (!f.get_visible() || this.__isMask || null == this.__bitmapData || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b)) return !1;
                    this.__getRenderTransform();
                    var k = this.__renderTransform,
                        q = k.a * k.d - k.b * k.c;
                    c = 0 == q ? -k.tx : 1 / q * (k.c * (k.ty - b) + k.d * (a - k.tx));
                    k = this.__renderTransform;
                    q = k.a * k.d - k.b * k.c;
                    a = 0 == q ? -k.ty : 1 / q * (k.a * (b - k.ty) + k.b * (k.tx - a));
                    if (0 < c && 0 < a && c <= this.__bitmapData.width &&
                        a <= this.__bitmapData.height) {
                        if (null != this.__scrollRect && !this.__scrollRect.contains(c, a)) return !1;
                        null == d || g || d.push(f);
                        return !0
                    }
                    return !1
                },
                __hitTestMask: function (a, b) {
                    if (null == this.__bitmapData) return !1;
                    this.__getRenderTransform();
                    var c = this.__renderTransform,
                        d = c.a * c.d - c.b * c.c,
                        g = 0 == d ? -c.tx : 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx));
                    c = this.__renderTransform;
                    d = c.a * c.d - c.b * c.c;
                    a = 0 == d ? -c.ty : 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a));
                    return 0 < g && 0 < a && g <= this.__bitmapData.width && a <= this.__bitmapData.height ? !0 : !1
                },
                get_bitmapData: function () {
                    return this.__bitmapData
                },
                set_height: function (a) {
                    null != this.__bitmapData ? this.set_scaleY(a / this.__bitmapData.height) : this.set_scaleY(0);
                    return a
                },
                set_width: function (a) {
                    null != this.__bitmapData ? this.set_scaleX(a / this.__bitmapData.width) : this.set_scaleX(0);
                    return a
                },
                __class__: Yg,
                __properties__: w(ea.prototype.__properties__, {
                    get_bitmapData: "get_bitmapData"
                })
            });
            var sa = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 0);
                this.x = a;
                this.y = b;
                this.width = c;
                this.height = d
            };
            h["openfl.geom.Rectangle"] = sa;
            sa.__name__ =
                "openfl.geom.Rectangle";
            sa.__limeRectangle = null;
            sa.prototype = {
                clone: function () {
                    return new sa(this.x, this.y, this.width, this.height)
                },
                contains: function (a, b) {
                    return a >= this.x && b >= this.y && a < this.get_right() ? b < this.get_bottom() : !1
                },
                containsPoint: function (a) {
                    return this.contains(a.x, a.y)
                },
                copyFrom: function (a) {
                    this.x = a.x;
                    this.y = a.y;
                    this.width = a.width;
                    this.height = a.height
                },
                equals: function (a) {
                    return a == this ? !0 : null != a && this.x == a.x && this.y == a.y && this.width == a.width ? this.height == a.height : !1
                },
                inflate: function (a,
                                   b) {
                    this.x -= a;
                    this.width += 2 * a;
                    this.y -= b;
                    this.height += 2 * b
                },
                offset: function (a, b) {
                    this.x += a;
                    this.y += b
                },
                setTo: function (a, b, c, d) {
                    this.x = a;
                    this.y = b;
                    this.width = c;
                    this.height = d
                },
                union: function (a) {
                    if (0 == this.width || 0 == this.height) return a.clone();
                    if (0 == a.width || 0 == a.height) return this.clone();
                    var b = this.x > a.x ? a.x : this.x,
                        c = this.get_right() < a.get_right() ? a.get_right() : this.get_right(),
                        d = this.y > a.y ? a.y : this.y;
                    a = this.get_bottom() < a.get_bottom() ? a.get_bottom() : this.get_bottom();
                    return new sa(b, d, c - b, a - d)
                },
                __contract: function (a,
                                      b, c, d) {
                    if (0 != this.width || 0 != this.height) {
                        var g = 0,
                            f = 0,
                            k = 0,
                            q = 0;
                        this.x < a && (g = a - this.x);
                        this.y < b && (f = b - this.y);
                        this.get_right() > a + c && (k = a + c - this.get_right());
                        this.get_bottom() > b + d && (q = b + d - this.get_bottom());
                        this.x += g;
                        this.y += f;
                        this.width += k - g;
                        this.height += q - f
                    }
                },
                __expand: function (a, b, c, d) {
                    if (0 == this.width && 0 == this.height) this.x = a, this.y = b, this.width = c, this.height = d;
                    else {
                        var g = this.get_right(),
                            f = this.get_bottom();
                        this.x > a && (this.x = a, this.width = g - a);
                        this.y > b && (this.y = b, this.height = f - b);
                        g < a + c && (this.width =
                            a + c - this.x);
                        f < b + d && (this.height = b + d - this.y)
                    }
                },
                __toLimeRectangle: function () {
                    null == sa.__limeRectangle && (sa.__limeRectangle = new vd);
                    sa.__limeRectangle.setTo(this.x, this.y, this.width, this.height);
                    return sa.__limeRectangle
                },
                __transform: function (a, b) {
                    var c = b.a * this.x + b.c * this.y,
                        d = c,
                        g = b.b * this.x + b.d * this.y,
                        f = g,
                        k = b.a * (this.x + this.width) + b.c * this.y,
                        q = b.b * (this.x + this.width) + b.d * this.y;
                    k < c && (c = k);
                    q < g && (g = q);
                    k > d && (d = k);
                    q > f && (f = q);
                    k = b.a * (this.x + this.width) + b.c * (this.y + this.height);
                    q = b.b * (this.x + this.width) + b.d *
                        (this.y + this.height);
                    k < c && (c = k);
                    q < g && (g = q);
                    k > d && (d = k);
                    q > f && (f = q);
                    k = b.a * this.x + b.c * (this.y + this.height);
                    q = b.b * this.x + b.d * (this.y + this.height);
                    k < c && (c = k);
                    q < g && (g = q);
                    k > d && (d = k);
                    q > f && (f = q);
                    a.setTo(c + b.tx, g + b.ty, d - c, f - g)
                },
                get_bottom: function () {
                    return this.y + this.height
                },
                get_left: function () {
                    return this.x
                },
                get_right: function () {
                    return this.x + this.width
                },
                get_top: function () {
                    return this.y
                },
                get_topLeft: function () {
                    return new F(this.x, this.y)
                },
                __class__: sa,
                __properties__: {
                    get_topLeft: "get_topLeft",
                    get_top: "get_top",
                    get_right: "get_right",
                    get_left: "get_left",
                    get_bottom: "get_bottom"
                }
            };
            var Ob = function (a, b, c, d) {
                null == d && (d = -1);
                null == c && (c = !0);
                this.__drawableType = 0;
                this.transparent = c;
                null == a && (a = 0);
                null == b && (b = 0);
                0 > a && (a = 0);
                0 > b && (b = 0);
                this.width = a;
                this.height = b;
                this.rect = new sa(0, 0, a, b);
                this.__textureWidth = a;
                this.__textureHeight = b;
                0 < a && 0 < b && (c ? 0 == (d & -16777216) && (d = 0) : d = -16777216 | d & 16777215, this.image = new cc(null, 0, 0, a, b, d << 8 | d >>> 24 & 255), this.image.set_transparent(c), this.readable = this.__isValid = !0);
                this.__renderTransform =
                    new va;
                this.__worldAlpha = 1;
                this.__worldTransform = new va;
                this.__worldColorTransform = new Lb;
                this.__renderable = !0;
                this.__asset = !1
            };
            h["openfl.display.BitmapData"] = Ob;
            Ob.__name__ = "openfl.display.BitmapData";
            Ob.__interfaces__ = [Fb];
            Ob.fromCanvas = function (a, b) {
                null == b && (b = !0);
                if (null == a) return null;
                var c = new Ob(0, 0, b, 0);
                c.__fromImage(cc.fromCanvas(a));
                c.image.set_transparent(b);
                return c
            };
            Ob.prototype = {
                colorTransform: function (a, b) {
                    this.readable && this.image.colorTransform(a.__toLimeRectangle(), b.__toLimeColorMatrix())
                },
                copyPixels: function (a, b, c, d, g, f) {
                    null == f && (f = !1);
                    this.readable && null != a && (null != g && (Ob.__tempVector.x = g.x, Ob.__tempVector.y = g.y), this.image.copyPixels(a.image, b.__toLimeRectangle(), c.__toLimeVector2(), null != d ? d.image : null, null != g ? Ob.__tempVector : null, f))
                },
                dispose: function () {
                    if (null != this.image && this.image.type == ed.CANVAS && !this.__asset) {
                        var a = this.image.buffer.__srcCanvas,
                            b = this.image.buffer.__srcContext;
                        null != a && (a.width = 0, a.height = 0);
                        null != b && b.clearRect(0, 0, 0, 0)
                    }
                    this.image = null;
                    this.height = this.width =
                        0;
                    this.rect = null;
                    this.readable = this.__isValid = !1;
                    this.__textureContext = this.__texture = this.__framebufferContext = this.__framebuffer = this.__vertexBuffer = this.__surface = null
                },
                draw: function (a, b, c, d, g, f) {
                    null == f && (f = !1);
                    if (null != a) {
                        var k = !0,
                            q = null;
                        a instanceof ea && (q = Ua.__cast(a, ea), q.get_visible() || (k = !1, q.set_visible(!0)));
                        a.__update(!1, !0);
                        var l = va.__pool.get();
                        l.copyFrom(a.__renderTransform);
                        l.invert();
                        null != b && l.concat(b);
                        b = null;
                        null != g && (b = va.__pool.get(), b.copyFrom(l), b.invert());
                        var h = new Lb;
                        h.__copyFrom(a.__worldColorTransform);
                        h.__invert();
                        if (this.readable || null == db.get_current().stage.context3D) {
                            if (null != c) {
                                var n = sa.__pool.get(),
                                    r = va.__pool.get();
                                a.__getBounds(n, r);
                                var t = Math.ceil(n.width),
                                    p = Math.ceil(n.height);
                                r.tx = -n.x;
                                r.ty = -n.y;
                                t = new Ob(t, p, !0, 0);
                                t.draw(a, r);
                                t.colorTransform(t.rect, c);
                                t.__renderTransform.identity();
                                t.__renderTransform.tx = n.x;
                                t.__renderTransform.ty = n.y;
                                t.__renderTransform.concat(a.__renderTransform);
                                t.__worldAlpha = a.__worldAlpha;
                                t.__worldColorTransform.__copyFrom(a.__worldColorTransform);
                                a = t;
                                sa.__pool.release(n);
                                va.__pool.release(r)
                            }
                            Aa.convertToCanvas(this.image);
                            c = new Ue(this.image.buffer.__srcContext);
                            c.__allowSmoothing = f;
                            c.__overrideBlendMode = d;
                            c.__worldTransform = l;
                            c.__worldAlpha = 1 / a.__worldAlpha;
                            c.__worldColorTransform = h;
                            null != g && c.__pushMaskRect(g, b);
                            this.__drawCanvas(a, c)
                        } else null == this.__textureContext && (this.__textureContext = C.current.__window.context), null != c && h.__combine(c), c = new Ma(db.get_current().stage.context3D, this), c.__allowSmoothing = f, c.__pixelRatio = db.get_current().stage.window.__scale,
                            c.__overrideBlendMode = d, c.__worldTransform = l, c.__worldAlpha = 1 / a.__worldAlpha, c.__worldColorTransform = h, c.__resize(this.width, this.height), null != g && c.__pushMaskRect(g, b), this.__drawGL(a, c);
                        null != g && (c.__popMaskRect(), va.__pool.release(b));
                        va.__pool.release(l);
                        null == q || k || q.set_visible(!1)
                    }
                },
                encode: function (a, b, c) {
                    if (!this.readable || null == a) return null;
                    null == c && (c = new Xc(0));
                    var d = this.image;
                    if (!a.equals(this.rect)) {
                        var g = va.__pool.get();
                        g.tx = Math.round(-a.x);
                        g.ty = Math.round(-a.y);
                        a = new Ob(Math.ceil(a.width),
                            Math.ceil(a.height), !0, 0);
                        a.draw(this, g);
                        d = a.image;
                        va.__pool.release(g)
                    }
                    return b instanceof Ki ? (c.writeBytes(Pd.fromBytes(d.encode(jj.PNG)), 0, 0), c) : b instanceof tj ? (c.writeBytes(Pd.fromBytes(d.encode(jj.JPEG, Ua.__cast(b, tj).quality)), 0, 0), c) : null
                },
                fillRect: function (a, b) {
                    this.__fillRect(a, b, !0)
                },
                getIndexBuffer: function (a, b) {
                    if (null == this.__indexBuffer || this.__indexBufferContext != a.__context || null != b && null == this.__indexBufferGrid || null != this.__indexBufferGrid && !this.__indexBufferGrid.equals(b)) {
                        this.__indexBufferContext =
                            a.__context;
                        this.__indexBuffer = null;
                        if (null != b) {
                            null == this.__indexBufferGrid && (this.__indexBufferGrid = new sa);
                            this.__indexBufferGrid.copyFrom(b);
                            var c = b.width;
                            b = b.height;
                            0 != c && 0 != b ? (this.__indexBufferData = new Uint16Array(54), this.__indexBufferData[0] = 0, this.__indexBufferData[1] = 1, this.__indexBufferData[2] = 2, this.__indexBufferData[3] = 2, this.__indexBufferData[4] = 1, this.__indexBufferData[5] = 3, this.__indexBufferData[6] = 4, this.__indexBufferData[7] = 0, this.__indexBufferData[8] = 5, this.__indexBufferData[9] =
                                5, this.__indexBufferData[10] = 0, this.__indexBufferData[11] = 2, this.__indexBufferData[12] = 6, this.__indexBufferData[13] = 4, this.__indexBufferData[14] = 7, this.__indexBufferData[15] = 7, this.__indexBufferData[16] = 4, this.__indexBufferData[17] = 5, this.__indexBufferData[18] = 8, this.__indexBufferData[19] = 9, this.__indexBufferData[20] = 0, this.__indexBufferData[21] = 0, this.__indexBufferData[22] = 9, this.__indexBufferData[23] = 1, this.__indexBufferData[24] = 10, this.__indexBufferData[25] = 8, this.__indexBufferData[26] = 4, this.__indexBufferData[27] =
                                4, this.__indexBufferData[28] = 8, this.__indexBufferData[29] = 0, this.__indexBufferData[30] = 11, this.__indexBufferData[31] = 10, this.__indexBufferData[32] = 6, this.__indexBufferData[33] = 6, this.__indexBufferData[34] = 10, this.__indexBufferData[35] = 4, this.__indexBufferData[36] = 12, this.__indexBufferData[37] = 13, this.__indexBufferData[38] = 8, this.__indexBufferData[39] = 8, this.__indexBufferData[40] = 13, this.__indexBufferData[41] = 9, this.__indexBufferData[42] = 14, this.__indexBufferData[43] = 12, this.__indexBufferData[44] =
                                10, this.__indexBufferData[45] = 10, this.__indexBufferData[46] = 12, this.__indexBufferData[47] = 8, this.__indexBufferData[48] = 15, this.__indexBufferData[49] = 14, this.__indexBufferData[50] = 11, this.__indexBufferData[51] = 11, this.__indexBufferData[52] = 14, this.__indexBufferData[53] = 10, this.__indexBuffer = a.createIndexBuffer(54)) : 0 == c && 0 != b ? (this.__indexBufferData = new Uint16Array(18), this.__indexBufferData[0] = 0, this.__indexBufferData[1] = 1, this.__indexBufferData[2] = 2, this.__indexBufferData[3] = 2, this.__indexBufferData[4] =
                                1, this.__indexBufferData[5] = 3, this.__indexBufferData[6] = 4, this.__indexBufferData[7] = 5, this.__indexBufferData[8] = 0, this.__indexBufferData[9] = 0, this.__indexBufferData[10] = 5, this.__indexBufferData[11] = 1, this.__indexBufferData[12] = 6, this.__indexBufferData[13] = 7, this.__indexBufferData[14] = 4, this.__indexBufferData[15] = 4, this.__indexBufferData[16] = 7, this.__indexBufferData[17] = 5, this.__indexBuffer = a.createIndexBuffer(18)) : 0 != c && 0 == b && (this.__indexBufferData = new Uint16Array(18), this.__indexBufferData[0] = 0,
                                this.__indexBufferData[1] = 1, this.__indexBufferData[2] = 2, this.__indexBufferData[3] = 2, this.__indexBufferData[4] = 1, this.__indexBufferData[5] = 3, this.__indexBufferData[6] = 4, this.__indexBufferData[7] = 0, this.__indexBufferData[8] = 5, this.__indexBufferData[9] = 5, this.__indexBufferData[10] = 0, this.__indexBufferData[11] = 2, this.__indexBufferData[12] = 6, this.__indexBufferData[13] = 4, this.__indexBufferData[14] = 7, this.__indexBufferData[15] = 7, this.__indexBufferData[16] = 4, this.__indexBufferData[17] = 5, this.__indexBuffer =
                                a.createIndexBuffer(18))
                        } else this.__indexBufferGrid = null;
                        null == this.__indexBuffer && (this.__indexBufferData = new Uint16Array(6), this.__indexBufferData[0] = 0, this.__indexBufferData[1] = 1, this.__indexBufferData[2] = 2, this.__indexBufferData[3] = 2, this.__indexBufferData[4] = 1, this.__indexBufferData[5] = 3, this.__indexBuffer = a.createIndexBuffer(6));
                        this.__indexBuffer.uploadFromTypedArray(this.__indexBufferData)
                    }
                    return this.__indexBuffer
                },
                getVertexBuffer: function (a, b, c) {
                    if (null == this.__vertexBuffer || this.__vertexBufferContext !=
                        a.__context || null != b && null == this.__vertexBufferGrid || null != this.__vertexBufferGrid && !this.__vertexBufferGrid.equals(b) || null != c && (this.__vertexBufferWidth != c.get_width() || this.__vertexBufferHeight != c.get_height() || this.__vertexBufferScaleX != c.get_scaleX() || this.__vertexBufferScaleY != c.get_scaleY())) {
                        this.__uvRect = new sa(0, 0, this.width, this.height);
                        this.__vertexBufferContext = a.__context;
                        this.__vertexBuffer = null;
                        null != c && (this.__vertexBufferWidth = c.get_width(), this.__vertexBufferHeight = c.get_height(),
                            this.__vertexBufferScaleX = c.get_scaleX(), this.__vertexBufferScaleY = c.get_scaleY());
                        if (null != b && null != c) {
                            null == this.__vertexBufferGrid && (this.__vertexBufferGrid = new sa);
                            this.__vertexBufferGrid.copyFrom(b);
                            this.__vertexBufferWidth = c.get_width();
                            this.__vertexBufferHeight = c.get_height();
                            this.__vertexBufferScaleX = c.get_scaleX();
                            this.__vertexBufferScaleY = c.get_scaleY();
                            var d = b.width,
                                g = b.height;
                            if (0 != d && 0 != g) {
                                this.__vertexBufferData = new Float32Array(224);
                                var f = b.x,
                                    k = b.y,
                                    q = this.width - d - f,
                                    l = this.height - g -
                                        k;
                                b = f / this.width;
                                var h = k / this.height;
                                d /= this.width;
                                g /= this.height;
                                f /= c.get_scaleX();
                                k /= c.get_scaleY();
                                q /= c.get_scaleX();
                                var n = l / c.get_scaleY();
                                l = c.get_width() / c.get_scaleX() - f - q;
                                q = c.get_height() / c.get_scaleY() - k - n;
                                this.__vertexBufferData[0] = f;
                                this.__vertexBufferData[1] = k;
                                this.__vertexBufferData[3] = 1 * b;
                                this.__vertexBufferData[4] = 1 * h;
                                this.__vertexBufferData[15] = k;
                                this.__vertexBufferData[18] = 1 * h;
                                this.__vertexBufferData[28] = f;
                                this.__vertexBufferData[31] = 1 * b;
                                this.__vertexBufferData[56] = f + l;
                                this.__vertexBufferData[57] =
                                    k;
                                this.__vertexBufferData[59] = 1 * (b + d);
                                this.__vertexBufferData[60] = 1 * h;
                                this.__vertexBufferData[70] = f + l;
                                this.__vertexBufferData[73] = 1 * (b + d);
                                this.__vertexBufferData[84] = this.width;
                                this.__vertexBufferData[85] = k;
                                this.__vertexBufferData[87] = 1;
                                this.__vertexBufferData[88] = 1 * h;
                                this.__vertexBufferData[98] = this.width;
                                this.__vertexBufferData[101] = 1;
                                this.__vertexBufferData[112] = f;
                                this.__vertexBufferData[113] = k + q;
                                this.__vertexBufferData[115] = 1 * b;
                                this.__vertexBufferData[116] = 1 * (h + g);
                                this.__vertexBufferData[127] =
                                    k + q;
                                this.__vertexBufferData[130] = 1 * (h + g);
                                this.__vertexBufferData[140] = f + l;
                                this.__vertexBufferData[141] = k + q;
                                this.__vertexBufferData[143] = 1 * (b + d);
                                this.__vertexBufferData[144] = 1 * (h + g);
                                this.__vertexBufferData[154] = this.width;
                                this.__vertexBufferData[155] = k + q;
                                this.__vertexBufferData[157] = 1;
                                this.__vertexBufferData[158] = 1 * (h + g);
                                this.__vertexBufferData[168] = f;
                                this.__vertexBufferData[169] = this.height;
                                this.__vertexBufferData[171] = 1 * b;
                                this.__vertexBufferData[172] = 1;
                                this.__vertexBufferData[183] = this.height;
                                this.__vertexBufferData[186] =
                                    1;
                                this.__vertexBufferData[196] = f + l;
                                this.__vertexBufferData[197] = this.height;
                                this.__vertexBufferData[199] = 1 * (b + d);
                                this.__vertexBufferData[200] = 1;
                                this.__vertexBufferData[210] = this.width;
                                this.__vertexBufferData[211] = this.height;
                                this.__vertexBufferData[213] = 1;
                                this.__vertexBufferData[214] = 1;
                                this.__vertexBuffer = a.createVertexBuffer(16, 14)
                            } else 0 == d && 0 != g ? (this.__vertexBufferData = new Float32Array(112), k = b.y, l = this.height - g - k, h = k / this.height, g /= this.height, k /= c.get_scaleY(), n = l / c.get_scaleY(), q = c.get_height() /
                                c.get_scaleY() - k - n, c = c.get_width() / c.get_scaleX(), this.__vertexBufferData[0] = c, this.__vertexBufferData[1] = k, this.__vertexBufferData[3] = 1, this.__vertexBufferData[4] = 1 * h, this.__vertexBufferData[15] = k, this.__vertexBufferData[18] = 1 * h, this.__vertexBufferData[28] = c, this.__vertexBufferData[31] = 1, this.__vertexBufferData[56] = c, this.__vertexBufferData[57] = k + q, this.__vertexBufferData[59] = 1, this.__vertexBufferData[60] = 1 * (h + g), this.__vertexBufferData[71] = k + q, this.__vertexBufferData[74] = 1 * (h + g), this.__vertexBufferData[84] =
                                c, this.__vertexBufferData[85] = this.height, this.__vertexBufferData[87] = 1, this.__vertexBufferData[88] = 1, this.__vertexBufferData[99] = this.height, this.__vertexBufferData[102] = 1, this.__vertexBuffer = a.createVertexBuffer(8, 14)) : 0 == g && 0 != d && (this.__vertexBufferData = new Float32Array(112), f = b.x, q = this.width - d - f, b = f / this.width, d /= this.width, f /= c.get_scaleX(), q /= c.get_scaleX(), l = c.get_width() / c.get_scaleX() - f - q, c = c.get_height() / c.get_scaleY(), this.__vertexBufferData[0] = f, this.__vertexBufferData[1] = c, this.__vertexBufferData[3] =
                                1 * b, this.__vertexBufferData[4] = 1, this.__vertexBufferData[15] = c, this.__vertexBufferData[18] = 1, this.__vertexBufferData[28] = f, this.__vertexBufferData[31] = 1 * b, this.__vertexBufferData[56] = f + l, this.__vertexBufferData[57] = c, this.__vertexBufferData[59] = 1 * (b + d), this.__vertexBufferData[60] = 1, this.__vertexBufferData[70] = f + l, this.__vertexBufferData[73] = 1 * (b + d), this.__vertexBufferData[84] = this.width, this.__vertexBufferData[85] = c, this.__vertexBufferData[87] = 1, this.__vertexBufferData[88] = 1, this.__vertexBufferData[98] =
                                this.width, this.__vertexBufferData[101] = 1, this.__vertexBuffer = a.createVertexBuffer(8, 14))
                        } else this.__vertexBufferGrid = null;
                        null == this.__vertexBuffer && (this.__vertexBufferData = new Float32Array(56), this.__vertexBufferData[0] = this.width, this.__vertexBufferData[1] = this.height, this.__vertexBufferData[3] = 1, this.__vertexBufferData[4] = 1, this.__vertexBufferData[15] = this.height, this.__vertexBufferData[18] = 1, this.__vertexBufferData[28] = this.width, this.__vertexBufferData[31] = 1, this.__vertexBuffer = a.createVertexBuffer(3,
                            14));
                        this.__vertexBuffer.uploadFromTypedArray(oh.toArrayBufferView(this.__vertexBufferData))
                    }
                    return this.__vertexBuffer
                },
                getPixel: function (a, b) {
                    return this.readable ? this.image.getPixel(a, b, 1) : 0
                },
                getTexture: function (a) {
                    if (!this.__isValid) return null;
                    if (null == this.__texture || this.__textureContext != a.__context) this.__textureContext = a.__context, this.__texture = a.createRectangleTexture(this.width, this.height, 1, !1), this.__textureVersion = -1;
                    Aa.sync(this.image, !1);
                    null != this.image && this.image.version > this.__textureVersion &&
                    (null != this.__surface && Em.flush(this.__surface), a = this.image, Eb.__supportsBGRA || 0 == a.get_format() || (a = a.clone(), a.set_format(0)), this.__texture.__uploadFromImage(a), this.__textureVersion = this.image.version, this.__textureWidth = a.buffer.width, this.__textureHeight = a.buffer.height);
                    this.readable || null == this.image || (this.image = this.__surface = null);
                    return this.__texture
                },
                setPixel: function (a, b, c) {
                    this.readable && this.image.setPixel(a, b, c, 1)
                },
                __drawCanvas: function (a, b) {
                    var c = this.image.buffer;
                    b.__allowSmoothing ||
                    b.applySmoothing(c.__srcContext, !1);
                    b.__render(a);
                    b.__allowSmoothing || b.applySmoothing(c.__srcContext, !0);
                    c.__srcContext.setTransform(1, 0, 0, 1, 0, 0);
                    c.__srcImageData = null;
                    c.data = null;
                    this.image.dirty = !0;
                    this.image.version++
                },
                __drawGL: function (a, b) {
                    var c = b.__context3D,
                        d = c.__state.renderToTexture,
                        g = c.__state.renderToTextureDepthStencil,
                        f = c.__state.renderToTextureAntiAlias,
                        k = c.__state.renderToTextureSurfaceSelector;
                    c.setRenderToTexture(this.getTexture(c), !0);
                    b.__render(a);
                    null != d ? c.setRenderToTexture(d,
                        g, f, k) : c.setRenderToBackBuffer()
                },
                __fillRect: function (a, b, c) {
                    if (null != a)
                        if (this.transparent && 0 == (b & -16777216) && (b = 0), c && null != this.__texture && null != this.__texture.__glFramebuffer && "opengl" == db.get_current().stage.__renderer.__type) {
                            c = db.get_current().stage.__renderer.__context3D;
                            var d = !this.rect.equals(a),
                                g = c.__state.renderToTexture,
                                f = c.__state.renderToTextureDepthStencil,
                                k = c.__state.renderToTextureAntiAlias,
                                q = c.__state.renderToTextureSurfaceSelector;
                            c.setRenderToTexture(this.__texture);
                            if (d) {
                                var l =
                                        Math.floor(a.x),
                                    h = Math.floor(a.y),
                                    n = 0 < a.width ? Math.ceil(a.get_right()) - l : 0,
                                    r = 0 < a.height ? Math.ceil(a.get_bottom()) - h : 0;
                                c.__backBufferWantsBestResolution && (l = Math.floor(a.x / c.__stage.window.__scale), h = Math.floor(a.y / c.__stage.window.__scale), n = 0 < a.width ? Math.ceil(a.get_right() / c.__stage.window.__scale) - l : 0, r = 0 < a.height ? Math.ceil(a.get_bottom() / c.__stage.window.__scale) - h : 0);
                                Ob.__fillRectRectangle.setTo(l, h, n, r);
                                c.setScissorRectangle(Ob.__fillRectRectangle)
                            }
                            c.__clear(d, (b >>> 16 & 255) / 255, (b >>> 8 & 255) / 255,
                                (b & 255) / 255, this.transparent ? (b >>> 24 & 255) / 255 : 1, 0, 0, 1);
                            d && c.setScissorRectangle(null);
                            null != g ? c.setRenderToTexture(g, f, k, q) : c.setRenderToBackBuffer()
                        } else this.readable && this.image.fillRect(a.__toLimeRectangle(), b, 1)
                },
                __fromImage: function (a) {
                    null != a && null != a.buffer && (this.image = a, this.width = a.width, this.height = a.height, this.rect = new sa(0, 0, a.width, a.height), this.__textureWidth = this.width, this.__textureHeight = this.height, this.__isValid = this.readable = !0)
                },
                __getBounds: function (a, b) {
                    var c = sa.__pool.get();
                    this.rect.__transform(c, b);
                    a.__expand(c.x, c.y, c.width, c.height);
                    sa.__pool.release(c)
                },
                __setUVRect: function (a, b, c, d, g) {
                    if (null != this.getVertexBuffer(a) && (d != this.__uvRect.width || g != this.__uvRect.height || b != this.__uvRect.x || c != this.__uvRect.y)) {
                        null == this.__uvRect && (this.__uvRect = new sa);
                        this.__uvRect.setTo(b, c, d, g);
                        a = 0 < this.__textureWidth ? b / this.__textureWidth : 0;
                        c = 0 < this.__textureHeight ? c / this.__textureHeight : 0;
                        b = 0 < this.__textureWidth ? d / this.__textureWidth : 0;
                        var f = 0 < this.__textureHeight ? g / this.__textureHeight :
                            0;
                        this.__vertexBufferData[0] = d;
                        this.__vertexBufferData[1] = g;
                        this.__vertexBufferData[3] = a + b;
                        this.__vertexBufferData[4] = c + f;
                        this.__vertexBufferData[15] = g;
                        this.__vertexBufferData[17] = a;
                        this.__vertexBufferData[18] = c + f;
                        this.__vertexBufferData[28] = d;
                        this.__vertexBufferData[31] = a + b;
                        this.__vertexBufferData[32] = c;
                        this.__vertexBufferData[45] = a;
                        this.__vertexBufferData[46] = c;
                        this.__vertexBuffer.uploadFromTypedArray(oh.toArrayBufferView(this.__vertexBufferData))
                    }
                },
                __update: function (a, b) {
                    this.__updateTransforms()
                },
                __updateTransforms: function (a) {
                    null == a ? this.__worldTransform.identity() : this.__worldTransform.copyFrom(a);
                    this.__renderTransform.copyFrom(this.__worldTransform)
                },
                __class__: Ob
            };
            var wd = function () {
                oa.call(this);
                this.__allowSmoothing = !0;
                this.__pixelRatio = 1;
                this.__tempColorTransform = new Lb;
                this.__worldAlpha = 1;
                this.__blendMode = 10
            };
            h["openfl.display.DisplayObjectRenderer"] = wd;
            wd.__name__ = "openfl.display.DisplayObjectRenderer";
            wd.__super__ = oa;
            wd.prototype = w(oa.prototype, {
                __clear: function () {
                },
                __getAlpha: function (a) {
                    return a *
                        this.__worldAlpha
                },
                __popMaskObject: function (a, b) {
                },
                __pushMaskObject: function (a, b) {
                },
                __render: function (a) {
                },
                __renderEvent: function (a) {
                    if (null != a.__customRenderEvent && a.__renderable) {
                        a.__customRenderEvent.allowSmoothing = this.__allowSmoothing;
                        a.__customRenderEvent.objectMatrix.copyFrom(a.__renderTransform);
                        a.__customRenderEvent.objectColorTransform.__copyFrom(a.__worldColorTransform);
                        a.__customRenderEvent.renderer = this;
                        switch (this.__type) {
                            case "cairo":
                                a.__customRenderEvent.type = "renderCairo";
                                break;
                            case "canvas":
                                a.__customRenderEvent.type =
                                    "renderCanvas";
                                break;
                            case "dom":
                                a.__customRenderEvent.type = null != a.stage && a.__worldVisible ? "renderDOM" : "clearDOM";
                                break;
                            case "opengl":
                                this.__cleared || this.__clear();
                                this.setShader(a.__worldShader);
                                this.__context3D.__flushGL();
                                a.__customRenderEvent.type = "renderOpenGL";
                                break;
                            default:
                                return
                        }
                        this.__setBlendMode(a.__worldBlendMode);
                        this.__pushMaskObject(a);
                        a.dispatchEvent(a.__customRenderEvent);
                        this.__popMaskObject(a);
                        "opengl" == this.__type && this.setViewport()
                    }
                },
                __resize: function (a, b) {
                },
                __setBlendMode: function (a) {
                },
                __shouldCacheHardware: function (a, b) {
                    if (null == a) return null;
                    switch (a.__drawableType) {
                        case 4:
                        case 5:
                            if (1 == b) return !0;
                            b = this.__shouldCacheHardware_DisplayObject(a, b);
                            if (1 == b) return !0;
                            if (null != a.__children) {
                                var c = 0;
                                for (a = a.__children; c < a.length;) {
                                    var d = a[c];
                                    ++c;
                                    b = this.__shouldCacheHardware_DisplayObject(d, b);
                                    if (1 == b) return !0
                                }
                            }
                            return b;
                        case 7:
                            return 1 == b ? !0 : !1;
                        case 9:
                            return !0;
                        default:
                            return this.__shouldCacheHardware_DisplayObject(a, b)
                    }
                },
                __shouldCacheHardware_DisplayObject: function (a, b) {
                    return 1 == b || null !=
                    a.__filters ? !0 : 0 == b || null != a.__graphics && !Y.isCompatible(a.__graphics) ? !1 : null
                },
                __updateCacheBitmap: function (a, b) {
                    if (null == a) return !1;
                    switch (a.__drawableType) {
                        case 2:
                            var c = a;
                            if (null == c.__bitmapData || null == c.__filters && "opengl" == this.__type && null == c.__cacheBitmap) return !1;
                            b = null != c.__bitmapData.image && c.__bitmapData.image.version != c.__imageVersion;
                            break;
                        case 7:
                            var d = a;
                            if (null == d.__filters && "opengl" == this.__type && null == d.__cacheBitmap && !d.__domRender) return !1;
                            b && (d.__renderDirty = !0);
                            b = b || d.__dirty;
                            break;
                        case 9:
                            if (null == a.__filters && "opengl" == this.__type && null == a.__cacheBitmap) return !1
                    }
                    if (a.__isCacheBitmapRender) return !1;
                    d = Lb.__pool.get();
                    d.__copyFrom(a.__worldColorTransform);
                    null != this.__worldColorTransform && d.__combine(this.__worldColorTransform);
                    var g = !1;
                    if (a.get_cacheAsBitmap() || "opengl" != this.__type && !d.__isDefault(!0)) {
                        g = null;
                        var f = (b = null == a.__cacheBitmap || a.__renderDirty && (b || null != a.__children && 0 < a.__children.length) || a.opaqueBackground != a.__cacheBitmapBackground) || null != a.__graphics &&
                                a.__graphics.__softwareDirty || !a.__cacheBitmapColorTransform.__equals(d, !0),
                            k = b || null != a.__graphics && a.__graphics.__hardwareDirty,
                            q = this.__type;
                        if (f || k) "opengl" == q && 0 == this.__shouldCacheHardware(a, null) && (q = "canvas"), !f || "canvas" != q && "cairo" != q || (b = !0), k && "opengl" == q && (b = !0);
                        f = b || !a.__cacheBitmap.__worldTransform.equals(a.__worldTransform);
                        c = null != a.__filters;
                        if ("dom" == this.__type && !c) return !1;
                        if (c && !b) {
                            if (f) {
                                k = a.__cacheBitmap.__worldTransform;
                                var l = a.__worldTransform;
                                var h = 1E-4 < Math.abs(k.a - l.a) ||
                                    1E-4 < Math.abs(k.b - l.b) || 1E-4 < Math.abs(k.c - l.c) || 1E-4 < Math.abs(k.d - l.d)
                            } else h = !1;
                            k = 0;
                            for (l = a.__filters; k < l.length;) {
                                var n = l[k];
                                ++k;
                                if (n.__renderDirty) {
                                    b = !0;
                                    break
                                }
                                if (h && n instanceof Hg) {
                                    a.__cacheBitmapData = null;
                                    b = !0;
                                    break
                                }
                            }
                        }
                        null == a.__cacheBitmapMatrix && (a.__cacheBitmapMatrix = new va);
                        k = null != a.__cacheAsBitmapMatrix ? a.__cacheAsBitmapMatrix : a.__renderTransform;
                        b || k.a == a.__cacheBitmapMatrix.a && k.b == a.__cacheBitmapMatrix.b && k.c == a.__cacheBitmapMatrix.c && k.d == a.__cacheBitmapMatrix.d || (b = !0);
                        !b && "opengl" !=
                        this.__type && null != a.__cacheBitmapData && null != a.__cacheBitmapData.image && a.__cacheBitmapData.image.version < a.__cacheBitmapData.__textureVersion && (b = !0);
                        if (!b)
                            for (l = a; null != l;) {
                                if (null != l.get_scrollRect()) {
                                    f = !0;
                                    break
                                }
                                l = l.parent
                            }
                        a.__cacheBitmapMatrix.copyFrom(k);
                        a.__cacheBitmapMatrix.tx = 0;
                        var r = h = a.__cacheBitmapMatrix.ty = 0,
                            t = 0,
                            p = 0,
                            y = n = 0;
                        l = this.__pixelRatio;
                        if (f || b) g = sa.__pool.get(), a.__getFilterBounds(g, a.__cacheBitmapMatrix), t = 0 < g.width ? Math.ceil((g.width + 1) * l) : 0, p = 0 < g.height ? Math.ceil((g.height + 1) *
                            l) : 0, n = 0 < g.x ? Math.ceil(g.x) : Math.floor(g.x), y = 0 < g.y ? Math.ceil(g.y) : Math.floor(g.y), null != a.__cacheBitmapData ? t > a.__cacheBitmapData.width || p > a.__cacheBitmapData.height ? (h = Math.ceil(Math.max(1.25 * t, a.__cacheBitmapData.width)), r = Math.ceil(Math.max(1.25 * p, a.__cacheBitmapData.height)), b = !0) : (h = a.__cacheBitmapData.width, r = a.__cacheBitmapData.height) : (h = t, r = p);
                        if (b)
                            if (f = !0, a.__cacheBitmapBackground = a.opaqueBackground, .5 <= t && .5 <= p) {
                                var u = null != a.opaqueBackground && (h != t || r != p),
                                    z = null != a.opaqueBackground ? -16777216 |
                                        a.opaqueBackground : 0,
                                    x = u ? 0 : z,
                                    A = "opengl" == this.__type;
                                null == a.__cacheBitmapData || h > a.__cacheBitmapData.width || r > a.__cacheBitmapData.height ? (a.__cacheBitmapData = new Ob(h, r, !0, x), null == a.__cacheBitmap && (a.__cacheBitmap = new Yg), a.__cacheBitmap.__bitmapData = a.__cacheBitmapData, a.__cacheBitmapRenderer = null) : a.__cacheBitmapData.__fillRect(a.__cacheBitmapData.rect, x, A);
                                u && (g.setTo(0, 0, t, p), a.__cacheBitmapData.__fillRect(g, z, A))
                            } else return Lb.__pool.release(d), a.__cacheBitmap = null, a.__cacheBitmapData = null,
                                a.__cacheBitmapData2 = null, a.__cacheBitmapData3 = null, a.__cacheBitmapRenderer = null, 7 == a.__drawableType && (d = a, null != d.__cacheBitmap && (d.__cacheBitmap.__renderTransform.tx -= d.__offsetX * l, d.__cacheBitmap.__renderTransform.ty -= d.__offsetY * l)), !0;
                        else a.__cacheBitmapData = a.__cacheBitmap.get_bitmapData(), a.__cacheBitmapData2 = null, a.__cacheBitmapData3 = null;
                        if (f || b) a.__cacheBitmap.__worldTransform.copyFrom(a.__worldTransform), k == a.__renderTransform ? (a.__cacheBitmap.__renderTransform.identity(), a.__cacheBitmap.__renderTransform.scale(1 /
                            l, 1 / l), a.__cacheBitmap.__renderTransform.tx = a.__renderTransform.tx + n, a.__cacheBitmap.__renderTransform.ty = a.__renderTransform.ty + y) : (a.__cacheBitmap.__renderTransform.copyFrom(a.__cacheBitmapMatrix), a.__cacheBitmap.__renderTransform.invert(), a.__cacheBitmap.__renderTransform.concat(a.__renderTransform), a.__cacheBitmap.__renderTransform.a *= 1 / l, a.__cacheBitmap.__renderTransform.d *= 1 / l, a.__cacheBitmap.__renderTransform.tx += n, a.__cacheBitmap.__renderTransform.ty += y);
                        a.__cacheBitmap.smoothing = this.__allowSmoothing;
                        a.__cacheBitmap.__renderable = a.__renderable;
                        a.__cacheBitmap.__worldAlpha = a.__worldAlpha;
                        a.__cacheBitmap.__worldBlendMode = a.__worldBlendMode;
                        a.__cacheBitmap.__worldShader = a.__worldShader;
                        a.__cacheBitmap.set_clippingLayer(a.__mask);
                        if (b) {
                            if (null == a.__cacheBitmapRenderer || q != a.__cacheBitmapRenderer.__type) "opengl" == q ? a.__cacheBitmapRenderer = new Ma(Ua.__cast(this, Ma).__context3D, a.__cacheBitmapData) : (null == a.__cacheBitmapData.image && (a.__cacheBitmapData = new Ob(h, r, !0, null != a.opaqueBackground ? -16777216 |
                                a.opaqueBackground : 0), a.__cacheBitmap.__bitmapData = a.__cacheBitmapData), Aa.convertToCanvas(a.__cacheBitmapData.image), a.__cacheBitmapRenderer = new Ue(a.__cacheBitmapData.image.buffer.__srcContext)), a.__cacheBitmapRenderer.__worldTransform = new va, a.__cacheBitmapRenderer.__worldColorTransform = new Lb;
                            null == a.__cacheBitmapColorTransform && (a.__cacheBitmapColorTransform = new Lb);
                            a.__cacheBitmapRenderer.__stage = a.stage;
                            a.__cacheBitmapRenderer.__allowSmoothing = this.__allowSmoothing;
                            a.__cacheBitmapRenderer.__setBlendMode(10);
                            a.__cacheBitmapRenderer.__worldAlpha = 1 / a.__worldAlpha;
                            a.__cacheBitmapRenderer.__worldTransform.copyFrom(a.__renderTransform);
                            a.__cacheBitmapRenderer.__worldTransform.invert();
                            a.__cacheBitmapRenderer.__worldTransform.concat(a.__cacheBitmapMatrix);
                            a.__cacheBitmapRenderer.__worldTransform.tx -= n;
                            a.__cacheBitmapRenderer.__worldTransform.ty -= y;
                            a.__cacheBitmapRenderer.__worldTransform.scale(l, l);
                            a.__cacheBitmapRenderer.__pixelRatio = l;
                            a.__cacheBitmapRenderer.__worldColorTransform.__copyFrom(d);
                            a.__cacheBitmapRenderer.__worldColorTransform.__invert();
                            a.__isCacheBitmapRender = !0;
                            if ("opengl" == a.__cacheBitmapRenderer.__type) {
                                u = a.__cacheBitmapRenderer;
                                z = u.__context3D;
                                x = z.__state.renderToTexture;
                                A = z.__state.renderToTextureDepthStencil;
                                var m = z.__state.renderToTextureAntiAlias,
                                    Q = z.__state.renderToTextureSurfaceSelector,
                                    O = this.__blendMode;
                                this.__suspendClipAndMask();
                                u.__copyShader(this);
                                a.__cacheBitmapData.__setUVRect(z, 0, 0, t, p);
                                u.__setRenderTarget(a.__cacheBitmapData);
                                null != a.__cacheBitmapData.image && (a.__cacheBitmapData.__textureVersion = a.__cacheBitmapData.image.version +
                                    1);
                                a.__cacheBitmapData.__drawGL(a, u);
                                if (c) {
                                    var v = !1;
                                    k = 0;
                                    for (l = a.__filters; k < l.length;) n = l[k], ++k, n.__preserveObject && (v = !0);
                                    c = a.__cacheBitmapData;
                                    y = null;
                                    null == a.__cacheBitmapData2 || h > a.__cacheBitmapData2.width || r > a.__cacheBitmapData2.height ? a.__cacheBitmapData2 = new Ob(h, r, !0, 0) : (a.__cacheBitmapData2.fillRect(a.__cacheBitmapData2.rect, 0), null != a.__cacheBitmapData2.image && (a.__cacheBitmapData2.__textureVersion = a.__cacheBitmapData2.image.version + 1));
                                    a.__cacheBitmapData2.__setUVRect(z, 0, 0, t, p);
                                    q = a.__cacheBitmapData2;
                                    v && (null == a.__cacheBitmapData3 || h > a.__cacheBitmapData3.width || r > a.__cacheBitmapData3.height ? a.__cacheBitmapData3 = new Ob(h, r, !0, 0) : (a.__cacheBitmapData3.fillRect(a.__cacheBitmapData3.rect, 0), null != a.__cacheBitmapData3.image && (a.__cacheBitmapData3.__textureVersion = a.__cacheBitmapData3.image.version + 1)), a.__cacheBitmapData3.__setUVRect(z, 0, 0, t, p), y = a.__cacheBitmapData3);
                                    u.__setBlendMode(10);
                                    u.__worldAlpha = 1;
                                    u.__worldTransform.identity();
                                    u.__worldColorTransform.__identity();
                                    k = 0;
                                    for (l = a.__filters; k < l.length;) {
                                        n =
                                            l[k];
                                        ++k;
                                        n.__preserveObject && (u.__setRenderTarget(y), u.__renderFilterPass(c, u.__defaultDisplayShader, n.__smooth));
                                        r = 0;
                                        for (t = n.__numShaderPasses; r < t;) h = r++, h = n.__initShader(u, h, n.__preserveObject ? y : null), u.__setBlendMode(n.__shaderBlendMode), u.__setRenderTarget(q), u.__renderFilterPass(c, h, n.__smooth), h = c, c = q, q = h;
                                        n.__renderDirty = !1
                                    }
                                    a.__cacheBitmap.__bitmapData = c
                                }
                                this.__blendMode = 10;
                                this.__setBlendMode(O);
                                this.__copyShader(u);
                                null != x ? z.setRenderToTexture(x, A, m, Q) : z.setRenderToBackBuffer();
                                this.__resumeClipAndMask(u);
                                this.setViewport();
                                a.__cacheBitmapColorTransform.__copyFrom(d)
                            } else {
                                a.__cacheBitmapData.__drawCanvas(a, a.__cacheBitmapRenderer);
                                if (c) {
                                    v = t = !1;
                                    k = 0;
                                    for (l = a.__filters; k < l.length;) n = l[k], ++k, n.__needSecondBitmapData && (t = !0), n.__preserveObject && (v = !0);
                                    c = a.__cacheBitmapData;
                                    y = null;
                                    t ? (null == a.__cacheBitmapData2 || null == a.__cacheBitmapData2.image || h > a.__cacheBitmapData2.width || r > a.__cacheBitmapData2.height ? a.__cacheBitmapData2 = new Ob(h, r, !0, 0) : a.__cacheBitmapData2.fillRect(a.__cacheBitmapData2.rect, 0), q = a.__cacheBitmapData2) :
                                        q = c;
                                    v && (null == a.__cacheBitmapData3 || null == a.__cacheBitmapData3.image || h > a.__cacheBitmapData3.width || r > a.__cacheBitmapData3.height ? a.__cacheBitmapData3 = new Ob(h, r, !0, 0) : a.__cacheBitmapData3.fillRect(a.__cacheBitmapData3.rect, 0), y = a.__cacheBitmapData3);
                                    null == a.__tempPoint && (a.__tempPoint = new F);
                                    r = a.__tempPoint;
                                    k = 0;
                                    for (l = a.__filters; k < l.length;) n = l[k], ++k, n.__preserveObject && y.copyPixels(c, c.rect, r), h = n.__applyFilter(q, c, c.rect, r), n.__preserveObject && h.draw(y, null, null != a.__objectTransform ? a.__objectTransform.__colorTransform :
                                        null), n.__renderDirty = !1, t && h == q && (h = c, c = q, q = h);
                                    a.__cacheBitmapData != c && (h = a.__cacheBitmapData, a.__cacheBitmapData = c, a.__cacheBitmapData2 = h, a.__cacheBitmap.__bitmapData = a.__cacheBitmapData, a.__cacheBitmapRenderer = null);
                                    a.__cacheBitmap.__imageVersion = a.__cacheBitmapData.__textureVersion
                                }
                                a.__cacheBitmapColorTransform.__copyFrom(d);
                                a.__cacheBitmapColorTransform.__isDefault(!0) || (a.__cacheBitmapColorTransform.alphaMultiplier = 1, a.__cacheBitmapData.colorTransform(a.__cacheBitmapData.rect, a.__cacheBitmapColorTransform))
                            }
                            a.__isCacheBitmapRender = !1
                        }
                        (f || b) && sa.__pool.release(g);
                        g = f
                    } else null != a.__cacheBitmap && ("dom" == this.__type && this.__renderDrawableClear(a.__cacheBitmap), a.__cacheBitmap = null, a.__cacheBitmapData = null, a.__cacheBitmapData2 = null, a.__cacheBitmapData3 = null, a.__cacheBitmapColorTransform = null, a.__cacheBitmapRenderer = null, g = !0);
                    Lb.__pool.release(d);
                    g && 7 == a.__drawableType && (d = a, null != d.__cacheBitmap && (d.__cacheBitmap.__renderTransform.tx -= d.__offsetX, d.__cacheBitmap.__renderTransform.ty -= d.__offsetY));
                    return g
                },
                __class__: wd
            });
            var uj =
                function (a) {
                    wd.call(this)
                };
            h["openfl.display.CairoRenderer"] = uj;
            uj.__name__ = "openfl.display.CairoRenderer";
            uj.__super__ = wd;
            uj.prototype = w(wd.prototype, {
                applyMatrix: function (a, b) {
                    null == b && (b = this.cairo);
                    this.__matrix.copyFrom(a);
                    this.cairo == b && null != this.__worldTransform && this.__matrix.concat(this.__worldTransform);
                    this.__matrix3[0] = this.__matrix.a;
                    this.__matrix3[1] = this.__matrix.b;
                    this.__matrix3[3] = this.__matrix.c;
                    this.__matrix3[4] = this.__matrix.d;
                    this.__roundPixels ? (this.__matrix3[6] = Math.round(this.__matrix.tx),
                        this.__matrix3[7] = Math.round(this.__matrix.ty)) : (this.__matrix3[6] = this.__matrix.tx, this.__matrix3[7] = this.__matrix.ty);
                    b.set_matrix(this.__matrix3)
                },
                __clear: function () {
                    if (null != this.cairo && (this.cairo.identityMatrix(), null != this.__stage && this.__stage.__clearBeforeRender)) {
                        var a = this.__blendMode;
                        this.__setBlendMode(10);
                        this.cairo.setSourceRGB(this.__stage.__colorSplit[0], this.__stage.__colorSplit[1], this.__stage.__colorSplit[2]);
                        this.cairo.paint();
                        this.__setBlendMode(a)
                    }
                },
                __popMask: function () {
                    this.cairo.restore()
                },
                __popMaskObject: function (a, b) {
                    null == b && (b = !0);
                    a.__isCacheBitmapRender || null == a.__mask || this.__popMask();
                    b && null != a.__scrollRect && this.__popMaskRect()
                },
                __popMaskRect: function () {
                    this.cairo.restore()
                },
                __pushMask: function (a) {
                    this.cairo.save();
                    this.applyMatrix(a.__renderTransform, this.cairo);
                    this.cairo.newPath();
                    this.__renderDrawableMask(a);
                    this.cairo.clip()
                },
                __pushMaskObject: function (a, b) {
                    null == b && (b = !0);
                    b && null != a.__scrollRect && this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
                    a.__isCacheBitmapRender ||
                    null == a.__mask || this.__pushMask(a.__mask)
                },
                __pushMaskRect: function (a, b) {
                    this.cairo.save();
                    this.applyMatrix(b, this.cairo);
                    this.cairo.newPath();
                    this.cairo.rectangle(a.x, a.y, a.width, a.height);
                    this.cairo.clip()
                },
                __render: function (a) {
                    null != this.cairo && this.__renderDrawable(a)
                },
                __renderDrawable: function (a) {
                    if (null != a) switch (a.__drawableType) {
                        case 6:
                            !a.__renderable || 0 >= a.__worldAlpha || null == a.__currentState || (this.__pushMaskObject(a), this.__renderDrawable(a.__currentState), this.__popMaskObject(a), this.__renderEvent(a))
                    }
                },
                __renderDrawableMask: function (a) {
                    if (null != a) switch (a.__drawableType) {
                        case 2:
                            this.cairo.rectangle(0, 0, a.get_width(), a.get_height());
                            break;
                        case 6:
                            this.__renderDrawableMask(a.__currentState)
                    }
                },
                __setBlendMode: function (a) {
                    null != this.__overrideBlendMode && (a = this.__overrideBlendMode);
                    this.__blendMode != a && (this.__blendMode = a, this.__setBlendModeCairo(this.cairo, a))
                },
                __setBlendModeCairo: function (a, b) {
                    switch (b) {
                        case 0:
                            a.setOperator(12);
                            break;
                        case 2:
                            a.setOperator(17);
                            break;
                        case 3:
                            a.setOperator(23);
                            break;
                        case 5:
                            a.setOperator(21);
                            break;
                        case 7:
                            a.setOperator(2);
                            break;
                        case 8:
                            a.setOperator(18);
                            break;
                        case 9:
                            a.setOperator(14);
                            break;
                        case 11:
                            a.setOperator(16);
                            break;
                        case 12:
                            a.setOperator(15);
                            break;
                        default:
                            a.setOperator(2)
                    }
                },
                __class__: uj
            });
            var Ue = function (a) {
                wd.call(this);
                this.context = a;
                this.__tempMatrix = new va;
                this.__type = "canvas"
            };
            h["openfl.display.CanvasRenderer"] = Ue;
            Ue.__name__ = "openfl.display.CanvasRenderer";
            Ue.__super__ = wd;
            Ue.prototype = w(wd.prototype, {
                applySmoothing: function (a, b) {
                    a.imageSmoothingEnabled = b
                },
                setTransform: function (a,
                                        b) {
                    null == b ? b = this.context : this.context == b && null != this.__worldTransform && (this.__tempMatrix.copyFrom(a), this.__tempMatrix.concat(this.__worldTransform), a = this.__tempMatrix);
                    this.__roundPixels ? b.setTransform(a.a, a.b, a.c, a.d, a.tx | 0, a.ty | 0) : b.setTransform(a.a, a.b, a.c, a.d, a.tx, a.ty)
                },
                __clear: function () {
                    if (null != this.__stage) {
                        var a = this.__blendMode;
                        this.__blendMode = null;
                        this.__setBlendMode(10);
                        this.context.setTransform(1, 0, 0, 1, 0, 0);
                        this.context.globalAlpha = 1;
                        !this.__stage.__transparent && this.__stage.__clearBeforeRender ?
                            (this.context.fillStyle = this.__stage.__colorString, this.context.fillRect(0, 0, this.__stage.stageWidth * this.__stage.window.__scale, this.__stage.stageHeight * this.__stage.window.__scale)) : this.__stage.__transparent && this.__stage.__clearBeforeRender && this.context.clearRect(0, 0, this.__stage.stageWidth * this.__stage.window.__scale, this.__stage.stageHeight * this.__stage.window.__scale);
                        this.__setBlendMode(a)
                    }
                },
                __popMask: function () {
                    this.context.restore()
                },
                __popMaskObject: function (a, b) {
                    null == b && (b = !0);
                    a.__isCacheBitmapRender ||
                    null == a.__mask || this.__popMask();
                    b && null != a.__scrollRect && this.__popMaskRect()
                },
                __popMaskRect: function () {
                    this.context.restore()
                },
                __pushMask: function (a) {
                    this.context.save();
                    this.setTransform(a.__renderTransform, this.context);
                    this.context.beginPath();
                    this.__renderDrawableMask(a);
                    this.context.closePath();
                    this.context.clip()
                },
                __pushMaskObject: function (a, b) {
                    null == b && (b = !0);
                    b && null != a.__scrollRect && this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
                    a.__isCacheBitmapRender || null == a.__mask || this.__pushMask(a.__mask)
                },
                __pushMaskRect: function (a, b) {
                    this.context.save();
                    this.setTransform(b, this.context);
                    this.context.beginPath();
                    this.context.rect(a.x, a.y, a.width, a.height);
                    this.context.clip()
                },
                __render: function (a) {
                    this.__renderDrawable(a)
                },
                __renderDrawable: function (a) {
                    if (null != a) switch (a.__drawableType) {
                        case 0:
                            vj.renderDrawable(a, this);
                            break;
                        case 2:
                            qh.renderDrawable(a, this);
                            break;
                        case 3:
                            Uf.renderDrawable(a, this);
                            break;
                        case 4:
                        case 5:
                            wj.renderDrawable(a, this);
                            break;
                        case 6:
                            xj.renderDrawable(a, this);
                            break;
                        case 7:
                            W.renderDrawable(a,
                                this);
                            break;
                        case 8:
                            Vf.renderDrawable(a, this);
                            break;
                        case 9:
                            Ve.renderDrawable(a, this)
                    }
                },
                __renderDrawableMask: function (a) {
                    if (null != a) switch (a.__drawableType) {
                        case 0:
                            vj.renderDrawableMask(a, this);
                            break;
                        case 2:
                            qh.renderDrawableMask(a, this);
                            break;
                        case 3:
                            Uf.renderDrawableMask(a, this);
                            break;
                        case 4:
                        case 5:
                            wj.renderDrawableMask(a, this);
                            break;
                        case 6:
                            xj.renderDrawableMask(a, this);
                            break;
                        case 7:
                            W.renderDrawableMask(a, this);
                            break;
                        case 8:
                            Vf.renderDrawableMask(a, this);
                            break;
                        case 9:
                            Ve.renderDrawableMask(a, this)
                    }
                },
                __setBlendMode: function (a) {
                    null != this.__overrideBlendMode && (a = this.__overrideBlendMode);
                    this.__blendMode != a && (this.__blendMode = a, this.__setBlendModeContext(this.context, a))
                },
                __setBlendModeContext: function (a, b) {
                    switch (b) {
                        case 0:
                            a.globalCompositeOperation = "lighter";
                            break;
                        case 2:
                            a.globalCompositeOperation = "darken";
                            break;
                        case 3:
                            a.globalCompositeOperation = "difference";
                            break;
                        case 5:
                            a.globalCompositeOperation = "hard-light";
                            break;
                        case 8:
                            a.globalCompositeOperation = "lighten";
                            break;
                        case 9:
                            a.globalCompositeOperation =
                                "multiply";
                            break;
                        case 11:
                            a.globalCompositeOperation = "overlay";
                            break;
                        case 12:
                            a.globalCompositeOperation = "screen";
                            break;
                        default:
                            a.globalCompositeOperation = "source-over"
                    }
                },
                __class__: Ue
            });
            var Fm = {
                    toString: function (a) {
                        switch (a) {
                            case 0:
                                return "none";
                            case 1:
                                return "round";
                            case 2:
                                return "square";
                            default:
                                return null
                        }
                    }
                },
                yj = function (a) {
                    ea.call(this);
                    this.__drawableType = 10;
                    this.__element = a
                };
            h["openfl.display.DOMElement"] = yj;
            yj.__name__ = "openfl.display.DOMElement";
            yj.__super__ = ea;
            yj.prototype = w(ea.prototype, {
                __class__: yj
            });
            var rh = function (a) {
                wd.call(this);
                this.element = a;
                ea.__supportDOM = !0;
                a = window.getComputedStyle(document.documentElement, "");
                a = (Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/) || "" === a.OLink && ["", "o"])[1];
                "WebKit|Moz|MS|O".match(new RegExp("(" + a + ")", "i"));
                a[0].toUpperCase();
                a.substr(1);
                this.__vendorPrefix = a;
                this.__transformProperty = "webkit" == a ? "-webkit-transform" : "transform";
                this.__transformOriginProperty = "webkit" == a ? "-webkit-transform-origin" : "transform-origin";
                this.__clipRects = [];
                this.__z = this.__numClipRects = 0;
                this.__type = "dom";
                this.__canvasRenderer = new Ue(null);
                this.__canvasRenderer.__isDOM = !0
            };
            h["openfl.display.DOMRenderer"] = rh;
            rh.__name__ = "openfl.display.DOMRenderer";
            rh.__super__ = wd;
            rh.prototype = w(wd.prototype, {
                __applyStyle: function (a, b, c, d) {
                    var g = a.__style;
                    if (b && a.__renderTransformChanged) {
                        b = a.__renderTransform;
                        var f = this.__roundPixels;
                        null == f && (f = !1);
                        g.setProperty(this.__transformProperty, f ? "matrix3d(" + b.a + ", " + b.b + ", 0, 0, " + b.c + ", " + b.d + ", 0, 0, 0, 0, 1, 0, " + (b.tx |
                            0) + ", " + (b.ty | 0) + ", 0, 1)" : "matrix3d(" + b.a + ", " + b.b + ", 0, 0, " + b.c + ", " + b.d + ", 0, 0, 0, 0, 1, 0, " + b.tx + ", " + b.ty + ", 0, 1)", null)
                    }
                    a.__worldZ != ++this.__z && (a.__worldZ = this.__z, g.setProperty("z-index", null == a.__worldZ ? "null" : "" + a.__worldZ, null));
                    c && a.__worldAlphaChanged && (1 > a.__worldAlpha ? g.setProperty("opacity", null == a.__worldAlpha ? "null" : "" + a.__worldAlpha, null) : g.removeProperty("opacity"));
                    d && a.__worldClipChanged && (null == a.__worldClip ? g.removeProperty("clip") : (a = a.__worldClip, g.setProperty("clip",
                        "rect(" + a.y + "px, " + a.get_right() + "px, " + a.get_bottom() + "px, " + a.x + "px)", null)))
                },
                __initializeElement: function (a, b) {
                    var c = a.__style = b.style;
                    c.setProperty("position", "absolute", null);
                    c.setProperty("top", "0", null);
                    c.setProperty("left", "0", null);
                    c.setProperty(this.__transformOriginProperty, "0 0 0", null);
                    this.element.appendChild(b);
                    a.__worldAlphaChanged = !0;
                    a.__renderTransformChanged = !0;
                    a.__worldVisibleChanged = !0;
                    a.__worldClipChanged = !0;
                    a.__worldClip = null;
                    a.__worldZ = -1
                },
                __popMask: function () {
                    this.__popMaskRect()
                },
                __popMaskObject: function (a, b) {
                    null == b && (b = !0);
                    null != a.__mask && this.__popMask();
                    b && null != a.__scrollRect && this.__popMaskRect()
                },
                __popMaskRect: function () {
                    0 < this.__numClipRects && (this.__numClipRects--, this.__currentClipRect = 0 < this.__numClipRects ? this.__clipRects[this.__numClipRects - 1] : null)
                },
                __pushMask: function (a) {
                    this.__pushMaskRect(a.getBounds(a), a.__renderTransform)
                },
                __pushMaskObject: function (a, b) {
                    null == b && (b = !0);
                    b && null != a.__scrollRect && this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
                    null !=
                    a.__mask && this.__pushMask(a.__mask)
                },
                __pushMaskRect: function (a, b) {
                    this.__numClipRects == this.__clipRects.length && (this.__clipRects[this.__numClipRects] = new sa);
                    var c = this.__clipRects[this.__numClipRects];
                    a.__transform(c, b);
                    0 < this.__numClipRects && (a = this.__clipRects[this.__numClipRects - 1], c.__contract(a.x, a.y, a.width, a.height));
                    0 > c.height && (c.height = 0);
                    0 > c.width && (c.width = 0);
                    this.__currentClipRect = c;
                    this.__numClipRects++
                },
                __render: function (a) {
                    this.element.style.background = this.__stage.__transparent ?
                        "none" : this.__stage.__colorString;
                    this.__z = 1;
                    this.__renderDrawable(a)
                },
                __renderDrawable: function (a) {
                    if (null != a) switch (a.__drawableType) {
                        case 2:
                            Qa.renderDrawable(a, this);
                            break;
                        case 3:
                            xd.renderDrawable(a, this);
                            break;
                        case 4:
                        case 5:
                            zj.renderDrawable(a, this);
                            break;
                        case 6:
                            Aj.renderDrawable(a, this);
                            break;
                        case 7:
                            qf.renderDrawable(a, this);
                            break;
                        case 8:
                            We.renderDrawable(a, this);
                            break;
                        case 9:
                            rf.renderDrawable(a, this);
                            break;
                        case 10:
                            null != a.stage && a.__worldVisible && a.__renderable ? (a.__active || (this.__initializeElement(a,
                                a.__element), a.__active = !0), this.__updateClip(a), this.__applyStyle(a, !0, !0, !0)) : a.__active && (this.element.removeChild(a.__element), a.__active = !1), xd.renderDrawable(a, this)
                    }
                },
                __renderDrawableClear: function (a) {
                    if (null != a) switch (a.__drawableType) {
                        case 2:
                            Qa.renderDrawableClear(a, this);
                            break;
                        case 3:
                            xd.renderDrawableClear(a, this);
                            break;
                        case 4:
                        case 5:
                            zj.renderDrawableClear(a, this);
                            break;
                        case 6:
                            Aj.renderDrawableClear(a, this);
                            break;
                        case 7:
                            qf.renderDrawableClear(a, this);
                            break;
                        case 8:
                            We.renderDrawableClear(a,
                                this);
                            break;
                        case 9:
                            rf.renderDrawableClear(a, this)
                    }
                },
                __setBlendMode: function (a) {
                    null != this.__overrideBlendMode && (a = this.__overrideBlendMode);
                    this.__blendMode != a && (this.__blendMode = a)
                },
                __updateClip: function (a) {
                    if (null == this.__currentClipRect) a.__worldClipChanged = null != a.__worldClip, a.__worldClip = null;
                    else {
                        null == a.__worldClip && (a.__worldClip = new sa);
                        var b = sa.__pool.get(),
                            c = va.__pool.get();
                        c.copyFrom(a.__renderTransform);
                        c.invert();
                        this.__currentClipRect.__transform(b, c);
                        b.equals(a.__worldClip) ? a.__worldClipChanged = !1 : (a.__worldClip.copyFrom(b), a.__worldClipChanged = !0);
                        sa.__pool.release(b);
                        va.__pool.release(c)
                    }
                },
                __class__: rh
            });
            var Ed = function (a) {
                this.byteCode = a;
                this.precisionHint = 1;
                this.__glSourceDirty = !0;
                this.__numPasses = 1;
                this.__data = sm._new(a)
            };
            h["openfl.display.Shader"] = Ed;
            Ed.__name__ = "openfl.display.Shader";
            Ed.prototype = {
                __clearUseArray: function () {
                    for (var a = 0, b = this.__paramBool; a < b.length;) {
                        var c = b[a];
                        ++a;
                        c.__useArray = !1
                    }
                    a = 0;
                    for (b = this.__paramFloat; a < b.length;) c = b[a], ++a, c.__useArray = !1;
                    a = 0;
                    for (b = this.__paramInt; a <
                    b.length;) c = b[a], ++a, c.__useArray = !1
                },
                __createGLShader: function (a, b) {
                    var c = this.__context.gl,
                        d = c.createShader(b);
                    c.shaderSource(d, a);
                    c.compileShader(d);
                    var g = c.getShaderInfoLog(d),
                        f = null != g && "" != T.trim(g),
                        k = c.getShaderParameter(d, c.COMPILE_STATUS);
                    if (f || 0 == k) b = (0 == k ? "Error" : "Info") + (b == c.VERTEX_SHADER ? " compiling vertex shader" : " compiling fragment shader"), b = b + ("\n" + g) + ("\n" + a), 0 == k ? Wa.error(b, {

                            className: "openfl.display.Shader",
                            methodName: "__createGLShader"
                        }) :
                        f && Wa.debug(b, {

                            className: "openfl.display.Shader",
                            methodName: "__createGLShader"
                        });
                    return d
                },
                __createGLProgram: function (a, b) {
                    var c = this.__context.gl;
                    a = this.__createGLShader(a, c.VERTEX_SHADER);
                    var d = this.__createGLShader(b, c.FRAGMENT_SHADER);
                    b = c.createProgram();
                    for (var g = 0, f = this.__paramFloat; g < f.length;) {
                        var k = f[g];
                        ++g;
                        if (-1 < k.name.indexOf("Position") && T.startsWith(k.name, "openfl_")) {
                            c.bindAttribLocation(b, 0, k.name);
                            break
                        }
                    }
                    c.attachShader(b, a);
                    c.attachShader(b,
                        d);
                    c.linkProgram(b);
                    0 == c.getProgramParameter(b, c.LINK_STATUS) && (c = "Unable to initialize the shader program\n" + c.getProgramInfoLog(b), Wa.error(c, {

                        className: "openfl.display.Shader",
                        methodName: "__createGLProgram"
                    }));
                    return b
                },
                __disable: function () {
                    null != this.program && this.__disableGL()
                },
                __disableGL: function () {
                    for (var a = this.__context.gl, b = 0, c = 0, d = this.__inputBitmapData; c < d.length;) {
                        var g = d[c];
                        ++c;
                        g.__disableGL(this.__context, b);
                        ++b;
                        if (b == a.MAX_TEXTURE_IMAGE_UNITS) break
                    }
                    c =
                        0;
                    for (d = this.__paramBool; c < d.length;) b = d[c], ++c, b.__disableGL(this.__context);
                    c = 0;
                    for (d = this.__paramFloat; c < d.length;) b = d[c], ++c, b.__disableGL(this.__context);
                    c = 0;
                    for (d = this.__paramInt; c < d.length;) b = d[c], ++c, b.__disableGL(this.__context);
                    this.__context.__bindGLArrayBuffer(null);
                    "opengl" == this.__context.__context.type && a.disable(a.TEXTURE_2D)
                },
                __enable: function () {
                    this.__init();
                    null != this.program && this.__enableGL()
                },
                __enableGL: function () {
                    for (var a = 0, b = this.__context.gl, c = 0, d = this.__inputBitmapData; c <
                    d.length;) {
                        var g = d[c];
                        ++c;
                        b.uniform1i(g.index, a);
                        ++a
                    }
                    "opengl" == this.__context.__context.type && 0 < a && b.enable(b.TEXTURE_2D)
                },
                __init: function () {
                    null == this.__data && (this.__data = sm._new(null));
                    null == this.__glFragmentSource || null == this.__glVertexSource || null != this.program && !this.__glSourceDirty || this.__initGL()
                },
                __initGL: function () {
                    if (this.__glSourceDirty || null == this.__paramBool) this.__glSourceDirty = !1, this.program = null, this.__inputBitmapData = [], this.__paramBool = [], this.__paramFloat = [], this.__paramInt = [], this.__processGLData(this.get_glVertexSource(), "attribute"), this.__processGLData(this.get_glVertexSource(), "uniform"), this.__processGLData(this.get_glFragmentSource(), "uniform");
                    if (null != this.__context && null == this.program) {
                        var a = this.__context.gl,
                            b = 1 == this.precisionHint ? "precision mediump float;\n" : "precision lowp float;\n",
                            c = b + this.get_glVertexSource();
                        b += this.get_glFragmentSource();
                        var d = c + b;
                        Object.prototype.hasOwnProperty.call(this.__context.__programs.h, d) ? this.program = this.__context.__programs.h[d] :
                            (this.program = this.__context.createProgram(1), this.program.__glProgram = this.__createGLProgram(c, b), this.__context.__programs.h[d] = this.program);
                        if (null != this.program) {
                            this.glProgram = this.program.__glProgram;
                            c = 0;
                            for (b = this.__inputBitmapData; c < b.length;) d = b[c], ++c, d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
                            c = 0;
                            for (b = this.__paramBool; c < b.length;) d = b[c], ++c, d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram,
                                d.name);
                            c = 0;
                            for (b = this.__paramFloat; c < b.length;) d = b[c], ++c, d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
                            c = 0;
                            for (b = this.__paramInt; c < b.length;) d = b[c], ++c, d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name)
                        }
                    }
                },
                __processGLData: function (a, b) {
                    var c = 0,
                        d;
                    for (d = "uniform" == b ? new Ya("uniform ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", "") : new Ya("attribute ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", ""); d.matchSub(a,
                        c);) {
                        var g = d.matched(1);
                        var f = d.matched(2);
                        if (!T.startsWith(f, "gl_")) {
                            c = "uniform" == b;
                            if (T.startsWith(g, "sampler")) {
                                g = new Bj;
                                g.name = f;
                                g.__isUniform = c;
                                this.__inputBitmapData.push(g);
                                switch (f) {
                                    case "bitmap":
                                        this.__bitmap = g;
                                        break;
                                    case "openfl_Texture":
                                        this.__texture = g
                                }
                                this.__data[f] = g;
                                this.__isGenerated && (this[f] = g)
                            } else if (!Object.prototype.hasOwnProperty.call(this.__data, f) || null == L.field(this.__data, f)) {
                                switch (g) {
                                    case "bool":
                                        var k = 0;
                                        break;
                                    case "bvec2":
                                        k = 1;
                                        break;
                                    case "bvec3":
                                        k = 2;
                                        break;
                                    case "bvec4":
                                        k =
                                            3;
                                        break;
                                    case "dvec2":
                                    case "vec2":
                                        k = 5;
                                        break;
                                    case "dvec3":
                                    case "vec3":
                                        k = 6;
                                        break;
                                    case "dvec4":
                                    case "vec4":
                                        k = 7;
                                        break;
                                    case "double":
                                    case "float":
                                        k = 4;
                                        break;
                                    case "mat2":
                                    case "mat2x2":
                                        k = 12;
                                        break;
                                    case "mat2x3":
                                        k = 13;
                                        break;
                                    case "mat2x4":
                                        k = 14;
                                        break;
                                    case "mat3x2":
                                        k = 15;
                                        break;
                                    case "mat3":
                                    case "mat3x3":
                                        k = 16;
                                        break;
                                    case "mat3x4":
                                        k = 17;
                                        break;
                                    case "mat4x2":
                                        k = 18;
                                        break;
                                    case "mat4x3":
                                        k = 19;
                                        break;
                                    case "mat4":
                                    case "mat4x4":
                                        k = 20;
                                        break;
                                    case "int":
                                    case "uint":
                                        k = 8;
                                        break;
                                    case "ivec2":
                                    case "uvec2":
                                        k = 9;
                                        break;
                                    case "ivec3":
                                    case "uvec3":
                                        k =
                                            10;
                                        break;
                                    case "ivec4":
                                    case "uvec4":
                                        k = 11;
                                        break;
                                    default:
                                        k = null
                                }
                                switch (k) {
                                    case 1:
                                    case 5:
                                    case 9:
                                        g = 2;
                                        break;
                                    case 2:
                                    case 6:
                                    case 10:
                                        g = 3;
                                        break;
                                    case 3:
                                    case 7:
                                    case 11:
                                    case 12:
                                        g = 4;
                                        break;
                                    case 16:
                                        g = 9;
                                        break;
                                    case 20:
                                        g = 16;
                                        break;
                                    default:
                                        g = 1
                                }
                                switch (k) {
                                    case 12:
                                        var q = 2;
                                        break;
                                    case 16:
                                        q = 3;
                                        break;
                                    case 20:
                                        q = 4;
                                        break;
                                    default:
                                        q = 1
                                }
                                switch (k) {
                                    case 0:
                                    case 1:
                                    case 2:
                                    case 3:
                                        var l = new Ig;
                                        l.set_name(f);
                                        l.type = k;
                                        l.__arrayLength = q;
                                        l.__isBool = !0;
                                        l.__isUniform = c;
                                        l.__length = g;
                                        this.__paramBool.push(l);
                                        "openfl_HasColorTransform" == f && (this.__hasColorTransform =
                                            l);
                                        this.__data[f] = l;
                                        this.__isGenerated && (this[f] = l);
                                        break;
                                    case 8:
                                    case 9:
                                    case 10:
                                    case 11:
                                        l = new Ig;
                                        l.set_name(f);
                                        l.type = k;
                                        l.__arrayLength = q;
                                        l.__isInt = !0;
                                        l.__isUniform = c;
                                        l.__length = g;
                                        this.__paramInt.push(l);
                                        this.__data[f] = l;
                                        this.__isGenerated && (this[f] = l);
                                        break;
                                    default:
                                        l = new Ig;
                                        l.set_name(f);
                                        l.type = k;
                                        l.__arrayLength = q;
                                        0 < q && (k = q * q, k = null != k ? new Float32Array(k) : null, l.__uniformMatrix = k);
                                        l.__isFloat = !0;
                                        l.__isUniform = c;
                                        l.__length = g;
                                        this.__paramFloat.push(l);
                                        if (T.startsWith(f, "openfl_")) switch (f) {
                                            case "openfl_Alpha":
                                                this.__alpha =
                                                    l;
                                                break;
                                            case "openfl_ColorMultiplier":
                                                this.__colorMultiplier = l;
                                                break;
                                            case "openfl_ColorOffset":
                                                this.__colorOffset = l;
                                                break;
                                            case "openfl_Matrix":
                                                this.__matrix = l;
                                                break;
                                            case "openfl_Position":
                                                this.__position = l;
                                                break;
                                            case "openfl_TextureCoord":
                                                this.__textureCoord = l;
                                                break;
                                            case "openfl_TextureSize":
                                                this.__textureSize = l
                                        }
                                        this.__data[f] = l;
                                        this.__isGenerated && (this[f] = l)
                                }
                            }
                            f = d.matchedPos();
                            c = f.pos + f.len
                        }
                    }
                },
                __update: function () {
                    null != this.program && this.__updateGL()
                },
                __updateFromBuffer: function (a, b) {
                    null != this.program &&
                    this.__updateGLFromBuffer(a, b)
                },
                __updateGL: function () {
                    for (var a = 0, b = 0, c = this.__inputBitmapData; b < c.length;) {
                        var d = c[b];
                        ++b;
                        d.__updateGL(this.__context, a);
                        ++a
                    }
                    b = 0;
                    for (c = this.__paramBool; b < c.length;) a = c[b], ++b, a.__updateGL(this.__context);
                    b = 0;
                    for (c = this.__paramFloat; b < c.length;) a = c[b], ++b, a.__updateGL(this.__context);
                    b = 0;
                    for (c = this.__paramInt; b < c.length;) a = c[b], ++b, a.__updateGL(this.__context)
                },
                __updateGLFromBuffer: function (a, b) {
                    for (var c = 0, d, g, f, k, q, l = 0, h = a.inputCount; l < h;) q = l++, d = a.inputRefs[q], g =
                        a.inputs[q], f = a.inputFilter[q], k = a.inputMipFilter[q], q = a.inputWrap[q], null != g && (d.__updateGL(this.__context, c, g, f, k, q), ++c);
                    l = this.__context.gl;
                    0 < a.paramDataLength ? (null == a.paramDataBuffer && (a.paramDataBuffer = l.createBuffer()), this.__context.__bindGLArrayBuffer(a.paramDataBuffer), Tc.bufferData(l, l.ARRAY_BUFFER, a.paramData, l.DYNAMIC_DRAW)) : this.__context.__bindGLArrayBuffer(null);
                    g = d = c = 0;
                    f = a.paramBoolCount;
                    k = a.paramFloatCount;
                    var n = a.paramData,
                        r = null,
                        t = null,
                        p = null;
                    l = 0;
                    for (h = a.paramCount; l < h;) {
                        q = l++;
                        var y = !1;
                        if (q < f) {
                            var u = a.paramRefs_Bool[c];
                            for (var z = 0, x = a.overrideBoolCount; z < x;) {
                                var A = z++;
                                if (u.name == a.overrideBoolNames[A]) {
                                    r = a.overrideBoolValues[A];
                                    y = !0;
                                    break
                                }
                            }
                            y ? u.__updateGL(this.__context, r) : u.__updateGLFromBuffer(this.__context, n, a.paramPositions[q], a.paramLengths[q], b);
                            ++c
                        } else if (q < f + k) {
                            u = a.paramRefs_Float[d];
                            z = 0;
                            for (x = a.overrideFloatCount; z < x;)
                                if (A = z++, u.name == a.overrideFloatNames[A]) {
                                    t = a.overrideFloatValues[A];
                                    y = !0;
                                    break
                                }
                            y ? u.__updateGL(this.__context, t) : u.__updateGLFromBuffer(this.__context,
                                n, a.paramPositions[q], a.paramLengths[q], b);
                            ++d
                        } else {
                            u = a.paramRefs_Int[g];
                            z = 0;
                            for (x = a.overrideIntCount; z < x;)
                                if (A = z++, u.name == a.overrideIntNames[A]) {
                                    p = a.overrideIntValues[A];
                                    y = !0;
                                    break
                                }
                            y ? u.__updateGL(this.__context, p) : u.__updateGLFromBuffer(this.__context, n, a.paramPositions[q], a.paramLengths[q], b);
                            ++g
                        }
                    }
                },
                get_glFragmentSource: function () {
                    return this.__glFragmentSource
                },
                get_glVertexSource: function () {
                    return this.__glVertexSource
                },
                __class__: Ed,
                __properties__: {
                    get_glVertexSource: "get_glVertexSource",
                    get_glFragmentSource: "get_glFragmentSource"
                }
            };
            var Cj = function (a) {
                null == this.__glFragmentSource && (this.__glFragmentSource = "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0) {\n\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t} else if (openfl_HasColorTransform) {\n\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\n\t\t}\n\n\t\t}");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}");
                Ed.call(this, a);
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.display.DisplayObjectShader"] = Cj;
            Cj.__name__ = "openfl.display.DisplayObjectShader";
            Cj.__super__ = Ed;
            Cj.prototype = w(Ed.prototype, {
                __class__: Cj
            });
            var wl = function (a, b) {
                oa.call(this);
                this.name = a;
                this.frame = b
            };
            h["openfl.display.FrameLabel"] = wl;
            wl.__name__ = "openfl.display.FrameLabel";
            wl.__super__ = oa;
            wl.prototype = w(oa.prototype, {
                __class__: wl
            });
            var qd = function (a) {
                this.__dirty = !0;
                this.__owner = a;
                this.__commands = new yd;
                this.__positionY = this.__positionX =
                    this.__strokePadding = 0;
                this.__renderTransform = new va;
                this.__usedShaderBuffers = new jb;
                this.__worldTransform = new va;
                this.__height = this.__width = 0;
                this.__bitmapScaleY = this.__bitmapScaleX = 1;
                this.__shaderBufferPool = new ob(function () {
                    return new Dj
                });
                this.moveTo(0, 0)
            };
            h["openfl.display.Graphics"] = qd;
            qd.__name__ = "openfl.display.Graphics";
            qd.prototype = {
                beginBitmapFill: function (a, b, c, d) {
                    null == d && (d = !1);
                    null == c && (c = !0);
                    this.__commands.beginBitmapFill(a, null != b ? b.clone() : null, c, d);
                    this.__visible = !0
                },
                beginFill: function (a,
                                     b) {
                    null == b && (b = 1);
                    null == a && (a = 0);
                    this.__commands.beginFill(a & 16777215, b);
                    0 < b && (this.__visible = !0)
                },
                beginGradientFill: function (a, b, c, d, g, f, k, h) {
                    null == h && (h = 0);
                    null == k && (k = 1);
                    null == f && (f = 0);
                    if (null != b && 0 != b.length) {
                        if (null == c) {
                            c = [];
                            for (var l = 0, q = b.length; l < q;) l++, c.push(1)
                        }
                        if (null == d)
                            for (d = [], l = 0, q = b.length; l < q;) {
                                var n = l++;
                                d.push(Math.ceil(n / (b.length - 1) * 255))
                            }
                        if (!(c.length < b.length || d.length < b.length))
                            for (this.__commands.beginGradientFill(a, b, c, d, g, f, k, h), l = 0; l < c.length;)
                                if (a = c[l], ++l, 0 < a) {
                                    this.__visible = !0;
                                    break
                                }
                    }
                },
                beginShaderFill: function (a, b) {
                    null != a && (b = this.__shaderBufferPool.get(), this.__usedShaderBuffers.add(b), b.update(a), this.__commands.beginShaderFill(b))
                },
                clear: function () {
                    for (var a = this.__usedShaderBuffers.h; null != a;) {
                        var b = a.item;
                        a = a.next;
                        this.__shaderBufferPool.release(b)
                    }
                    this.__usedShaderBuffers.clear();
                    this.__commands.clear();
                    this.__strokePadding = 0;
                    null != this.__bounds && (this.set___dirty(!0), this.__transformDirty = !0, this.__bounds = null);
                    this.__visible = !1;
                    this.__positionY = this.__positionX =
                        0;
                    this.moveTo(0, 0)
                },
                cubicCurveTo: function (a, b, c, d, g, f) {
                    var k = this.__findExtrema(this.__positionX, a, c, g),
                        h = this.__findExtrema(this.__positionY, b, d, f);
                    this.__inflateBounds(k.min - this.__strokePadding, h.min - this.__strokePadding);
                    this.__inflateBounds(k.max + this.__strokePadding, h.max + this.__strokePadding);
                    this.__positionX = g;
                    this.__positionY = f;
                    this.__commands.cubicCurveTo(a, b, c, d, g, f);
                    this.set___dirty(!0)
                },
                curveTo: function (a, b, c, d) {
                    this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY -
                        this.__strokePadding);
                    this.__inflateBounds(this.__positionX + this.__strokePadding, this.__positionY + this.__strokePadding);
                    var g = a < c && a > this.__positionX || a > c && a < this.__positionX ? c : this.__calculateBezierQuadPoint((this.__positionX - a) / (this.__positionX - 2 * a + c), this.__positionX, a, c);
                    var f = b < d && b > this.__positionY || b > d && b < this.__positionY ? d : this.__calculateBezierQuadPoint((this.__positionY - b) / (this.__positionY - 2 * b + d), this.__positionY, b, d);
                    this.__inflateBounds(g - this.__strokePadding, f - this.__strokePadding);
                    this.__inflateBounds(g + this.__strokePadding, f + this.__strokePadding);
                    this.__positionX = c;
                    this.__positionY = d;
                    this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
                    this.__inflateBounds(this.__positionX + this.__strokePadding, this.__positionY + this.__strokePadding);
                    this.__commands.curveTo(a, b, c, d);
                    this.set___dirty(!0)
                },
                drawCircle: function (a, b, c) {
                    0 >= c || (this.__inflateBounds(a - c - this.__strokePadding, b - c - this.__strokePadding), this.__inflateBounds(a + c + this.__strokePadding,
                        b + c + this.__strokePadding), this.__commands.drawCircle(a, b, c), this.set___dirty(!0))
                },
                drawGraphicsData: function (a) {
                    for (a = a.iterator(); a.hasNext();) {
                        var b = a.next();
                        switch (b.__graphicsDataType) {
                            case 0:
                                if (null != b.fill) {
                                    var c = b.thickness;
                                    isNaN(c) && (c = null);
                                    switch (b.fill.__graphicsFillType) {
                                        case 0:
                                            var d = b.fill;
                                            this.lineStyle(c, d.color, d.alpha, b.pixelHinting, b.scaleMode, b.caps, b.joints, b.miterLimit);
                                            break;
                                        case 1:
                                            d = b.fill;
                                            this.lineStyle(c, 0, 1, b.pixelHinting, b.scaleMode, b.caps, b.joints, b.miterLimit);
                                            this.lineGradientStyle(d.type,
                                                d.colors, d.alphas, d.ratios, d.matrix, d.spreadMethod, d.interpolationMethod, d.focalPointRatio);
                                            break;
                                        case 2:
                                            d = b.fill, this.lineStyle(c, 0, 1, b.pixelHinting, b.scaleMode, b.caps, b.joints, b.miterLimit), this.lineBitmapStyle(d.bitmapData, d.matrix, d.repeat, d.smooth)
                                    }
                                } else this.lineStyle();
                                break;
                            case 1:
                                d = b;
                                this.beginFill(d.color, d.alpha);
                                break;
                            case 2:
                                d = b;
                                this.beginGradientFill(d.type, d.colors, d.alphas, d.ratios, d.matrix, d.spreadMethod, d.interpolationMethod, d.focalPointRatio);
                                break;
                            case 3:
                                this.drawPath(b.commands,
                                    b.data, b.winding);
                                break;
                            case 4:
                                d = b;
                                this.beginBitmapFill(d.bitmapData, d.matrix, d.repeat, d.smooth);
                                break;
                            case 5:
                                this.endFill();
                                break;
                            case 6:
                                this.drawQuads(b.rects, b.indices, b.transforms);
                                break;
                            case 7:
                                this.drawTriangles(b.vertices, b.indices, b.uvtData, b.culling);
                                break;
                            case 8:
                                this.beginShaderFill(b.shader, b.matrix)
                        }
                    }
                },
                drawPath: function (a, b, c) {
                    null == c && (c = 0);
                    var d = 0;
                    1 == c && this.__commands.windingNonZero();
                    a = a.iterator();
                    a: for (; a.hasNext();) switch (a.next()) {
                        case 1:
                            this.moveTo(b.get(d), b.get(d + 1));
                            d += 2;
                            break;
                        case 2:
                            this.lineTo(b.get(d), b.get(d + 1));
                            d += 2;
                            break;
                        case 3:
                            this.curveTo(b.get(d), b.get(d + 1), b.get(d + 2), b.get(d + 3));
                            d += 4;
                            break;
                        case 4:
                            this.moveTo(b.get(d + 2), b.get(d + 3));
                            break a;
                        case 5:
                            this.lineTo(b.get(d + 2), b.get(d + 3));
                            break a;
                        case 6:
                            this.cubicCurveTo(b.get(d), b.get(d + 1), b.get(d + 2), b.get(d + 3), b.get(d + 4), b.get(d + 5)), d += 6
                    }
                },
                drawQuads: function (a, b, c) {
                    if (null != a) {
                        var d = null != b,
                            g = !1,
                            f = !1,
                            k = d ? b.get_length() : Math.floor(a.get_length() / 4);
                        if (0 != k) {
                            null != c && (c.get_length() >= 6 * k ? f = g = !0 : c.get_length() >= 4 * k ? g = !0 :
                                c.get_length() >= 2 * k && (f = !0));
                            for (var h = sa.__pool.get(), l = va.__pool.get(), n = Infinity, r = Infinity, t = -Infinity, y = -Infinity, p, u = 0; u < k;) {
                                var z = u++;
                                p = d ? 4 * b.get(z) : 4 * z;
                                0 > p || (h.setTo(0, 0, a.get(p + 2), a.get(p + 3)), 0 >= h.width || 0 >= h.height || (g && f ? (p = 6 * z, l.setTo(c.get(p), c.get(p + 1), c.get(p + 2), c.get(p + 3), c.get(p + 4), c.get(p + 5))) : g ? (p = 4 * z, l.setTo(c.get(p), c.get(p + 1), c.get(p + 2), c.get(p + 3), h.x, h.y)) : f ? (p = 2 * z, l.tx = c.get(p), l.ty = c.get(p + 1)) : (l.tx = h.x, l.ty = h.y), h.__transform(h, l), n > h.x && (n = h.x), r > h.y && (r = h.y), t < h.get_right() &&
                                (t = h.get_right()), y < h.get_bottom() && (y = h.get_bottom())))
                            }
                            this.__inflateBounds(n, r);
                            this.__inflateBounds(t, y);
                            this.__commands.drawQuads(a, b, c);
                            this.set___dirty(!0);
                            this.__visible = !0;
                            sa.__pool.release(h);
                            va.__pool.release(l)
                        }
                    }
                },
                drawRect: function (a, b, c, d) {
                    if (0 != c || 0 != d) {
                        var g = 0 > c ? -1 : 1,
                            f = 0 > d ? -1 : 1;
                        this.__inflateBounds(a - this.__strokePadding * g, b - this.__strokePadding * f);
                        this.__inflateBounds(a + c + this.__strokePadding * g, b + d + this.__strokePadding * f);
                        this.__commands.drawRect(a, b, c, d);
                        this.set___dirty(!0)
                    }
                },
                drawRoundRect: function (a,
                                         b, c, d, g, f) {
                    if (0 != c || 0 != d) {
                        var k = 0 > c ? -1 : 1,
                            h = 0 > d ? -1 : 1;
                        this.__inflateBounds(a - this.__strokePadding * k, b - this.__strokePadding * h);
                        this.__inflateBounds(a + c + this.__strokePadding * k, b + d + this.__strokePadding * h);
                        this.__commands.drawRoundRect(a, b, c, d, g, f);
                        this.set___dirty(!0)
                    }
                },
                drawRoundRectComplex: function (a, b, c, d, g, f, k, h) {
                    if (!(0 >= c || 0 >= d)) {
                        this.__inflateBounds(a - this.__strokePadding, b - this.__strokePadding);
                        this.__inflateBounds(a + c + this.__strokePadding, b + d + this.__strokePadding);
                        var l = a + c,
                            q = b + d;
                        c = c < d ? 2 * c : 2 * d;
                        g < c || (g = c);
                        f < c || (f = c);
                        k < c || (k = c);
                        h < c || (h = c);
                        c = 1 - Math.sin(Math.PI / 180 * 45);
                        d = 1 - Math.tan(Math.PI / 180 * 22.5);
                        var n = h * c,
                            r = h * d;
                        this.moveTo(l, q - h);
                        this.curveTo(l, q - r, l - n, q - n);
                        this.curveTo(l - r, q, l - h, q);
                        n = k * c;
                        r = k * d;
                        this.lineTo(a + k, q);
                        this.curveTo(a + r, q, a + n, q - n);
                        this.curveTo(a, q - r, a, q - k);
                        n = g * c;
                        r = g * d;
                        this.lineTo(a, b + g);
                        this.curveTo(a, b + r, a + n, b + n);
                        this.curveTo(a + r, b, a + g, b);
                        n = f * c;
                        r = f * d;
                        this.lineTo(l - f, b);
                        this.curveTo(l - r, b, l - n, b + n);
                        this.curveTo(l, b + r, l, b + f);
                        this.lineTo(l, q - h);
                        this.set___dirty(!0)
                    }
                },
                drawTriangles: function (a,
                                         b, c, d) {
                    null == d && (d = 1);
                    if (null != a && 0 != a.get_length()) {
                        var g = a.get_length() / 2 | 0;
                        if (null == b) {
                            if (0 != g % 3) throw new Af("Not enough vertices to close a triangle.");
                            b = pa.toIntVector(null);
                            for (var f = 0, k = g; f < k;) {
                                var h = f++;
                                b.push(h)
                            }
                        }
                        null == d && (d = 1);
                        var l = Infinity,
                            n = Infinity,
                            r = -Infinity,
                            t = -Infinity;
                        f = 0;
                        for (k = g; f < k;) h = f++, g = a.get(2 * h), h = a.get(2 * h + 1), l > g && (l = g), n > h && (n = h), r < g && (r = g), t < h && (t = h);
                        this.__inflateBounds(l, n);
                        this.__inflateBounds(r, t);
                        this.__commands.drawTriangles(a, b, c, d);
                        this.set___dirty(!0);
                        this.__visible = !0
                    }
                },
                endFill: function () {
                    this.__commands.endFill()
                },
                lineBitmapStyle: function (a, b, c, d) {
                    null == d && (d = !1);
                    null == c && (c = !0);
                    this.__commands.lineBitmapStyle(a, null != b ? b.clone() : null, c, d)
                },
                lineGradientStyle: function (a, b, c, d, g, f, k, h) {
                    null == h && (h = 0);
                    null == k && (k = 1);
                    null == f && (f = 0);
                    if (null == c) {
                        c = [];
                        for (var l = 0, q = b.length; l < q;) l++, c.push(1)
                    }
                    if (null == d)
                        for (d = [], l = 0, q = b.length; l < q;) {
                            var n = l++;
                            d.push(Math.ceil(n / (b.length - 1) * 255))
                        }
                    this.__commands.lineGradientStyle(a, b, c, d, g, f, k, h)
                },
                lineStyle: function (a, b, c, d, g, f, k,
                                     h) {
                    null == h && (h = 3);
                    null == g && (g = 2);
                    null == d && (d = !1);
                    null == c && (c = 1);
                    null == b && (b = 0);
                    null == f && (f = 1);
                    null == k && (k = 2);
                    null != a && (1 == k ? a > this.__strokePadding && (this.__strokePadding = Math.ceil(a)) : a / 2 > this.__strokePadding && (this.__strokePadding = Math.ceil(a / 2)));
                    this.__commands.lineStyle(a, b, c, d, g, f, k, h);
                    null != a && (this.__visible = !0)
                },
                lineTo: function (a, b) {
                    isFinite(a) && isFinite(b) && (this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding), this.__inflateBounds(this.__positionX +
                        this.__strokePadding, this.__positionY + this.__strokePadding), this.__positionX = a, this.__positionY = b, this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding), this.__inflateBounds(this.__positionX + 2 * this.__strokePadding, this.__positionY + this.__strokePadding), this.__commands.lineTo(a, b), this.set___dirty(!0))
                },
                moveTo: function (a, b) {
                    this.__positionX = a;
                    this.__positionY = b;
                    this.__commands.moveTo(a, b)
                },
                readGraphicsData: function (a) {
                    null == a && (a = !0);
                    var b = pa.toObjectVector(null);
                    this.__owner.__readGraphicsData(b, a);
                    return b
                },
                __calculateBezierCubicPoint: function (a, b, c, d, g) {
                    var f = 1 - a;
                    return b * f * f * f + 3 * c * a * f * f + 3 * d * f * a * a + g * a * a * a
                },
                __calculateBezierQuadPoint: function (a, b, c, d) {
                    var g = 1 - a;
                    return g * g * b + 2 * g * a * c + a * a * d
                },
                __cleanup: function () {
                    null != this.__bounds && null != this.__canvas && (this.set___dirty(!0), this.__transformDirty = !0);
                    this.__bitmap = null;
                    null != this.__canvas && (this.__canvas.width = 0, this.__canvas.height = 0, this.__canvas = null);
                    null != this.__context && (this.__context.clearRect(0, 0,
                        0, 0), this.__context = null)
                },
                __getBounds: function (a, b) {
                    if (null != this.__bounds) {
                        var c = sa.__pool.get();
                        this.__bounds.__transform(c, b);
                        a.__expand(c.x, c.y, c.width, c.height);
                        sa.__pool.release(c)
                    }
                },
                __hitTest: function (a, b, c, d) {
                    if (null == this.__bounds) return !1;
                    var g = d.a * d.d - d.b * d.c,
                        f = 0 == g ? -d.tx : 1 / g * (d.c * (d.ty - b) + d.d * (a - d.tx));
                    g = d.a * d.d - d.b * d.c;
                    a = 0 == g ? -d.ty : 1 / g * (d.a * (b - d.ty) + d.b * (d.tx - a));
                    return f > this.__bounds.x && a > this.__bounds.y && this.__bounds.contains(f, a) ? c ? n.hitTest(this, f, a) : !0 : !1
                },
                __findExtrema: function (a,
                                         b, c, d) {
                    var g = [];
                    if (!(b < d && b > a || b > d && b < a) || !(c < d && c > a || c > d && c < a)) {
                        var f = -a + 3 * b + d - 3 * c,
                            k = 2 * a - 4 * b + 2 * c,
                            h = b - a,
                            l = k * k - 4 * f * h;
                        0 == f ? (f = -h / k, 0 < f && 1 > f && g.push(this.__calculateBezierCubicPoint(f, a, b, c, d))) : 0 <= l && (h = (-k + Math.sqrt(l)) / (2 * f), f = (-k - Math.sqrt(l)) / (2 * f), 0 < h && 1 > h && g.push(this.__calculateBezierCubicPoint(h, a, b, c, d)), 0 < f && 1 > f && g.push(this.__calculateBezierCubicPoint(f, a, b, c, d)))
                    }
                    b = a;
                    g.push(d);
                    for (d = 0; d < g.length;) c = g[d], ++d, c < b && (b = c), c > a && (a = c);
                    return {
                        min: b,
                        max: a
                    }
                },
                __inflateBounds: function (a, b) {
                    null == this.__bounds ?
                        (this.__bounds = new sa(a, b, 0, 0), this.__transformDirty = !0) : (a < this.__bounds.x && (this.__bounds.width += this.__bounds.x - a, this.__bounds.x = a, this.__transformDirty = !0), b < this.__bounds.y && (this.__bounds.height += this.__bounds.y - b, this.__bounds.y = b, this.__transformDirty = !0), a > this.__bounds.x + this.__bounds.width && (this.__bounds.width = a - this.__bounds.x), b > this.__bounds.y + this.__bounds.height && (this.__bounds.height = b - this.__bounds.y))
                },
                __readGraphicsData: function (a) {
                    for (var b = new te(this.__commands), c = null, d,
                             g = 0, f = this.__commands.types; g < f.length;) {
                        d = f[g];
                        ++g;
                        switch (d._hx_index) {
                            case 4:
                            case 5:
                            case 6:
                            case 7:
                            case 9:
                            case 10:
                            case 17:
                            case 18:
                                null == c && (c = new Ej);
                                break;
                            default:
                                null != c && (a.push(c), c = null)
                        }
                        switch (d._hx_index) {
                            case 0:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.BEGIN_BITMAP_FILL;
                                d = b;
                                a.push(new Fj(d.buffer.o[d.oPos], d.buffer.o[d.oPos + 1], d.buffer.b[d.bPos], d.buffer.b[d.bPos + 1]));
                                break;
                            case 1:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos +=
                                            2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.BEGIN_FILL;
                                d = b;
                                a.push(new sh(d.buffer.i[d.iPos], d.buffer.f[d.fPos]));
                                break;
                            case 2:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.BEGIN_GRADIENT_FILL;
                                d = b;
                                a.push(new Gj(d.buffer.o[d.oPos], d.buffer.ii[d.iiPos], d.buffer.ff[d.ffPos], d.buffer.ii[d.iiPos + 1], d.buffer.o[d.oPos + 1], d.buffer.o[d.oPos + 2], d.buffer.o[d.oPos + 3], d.buffer.f[d.fPos]));
                                break;
                            case 3:
                                break;
                            case 4:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos +=
                                            2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos +=
                                            2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.CUBIC_CURVE_TO;
                                d = b;
                                c.cubicCurveTo(d.buffer.f[d.fPos], d.buffer.f[d.fPos + 1], d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3], d.buffer.f[d.fPos + 4], d.buffer.f[d.fPos + 5]);
                                break;
                            case 5:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos +=
                                            3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.CURVE_TO;
                                d = b;
                                c.curveTo(d.buffer.f[d.fPos], d.buffer.f[d.fPos + 1], d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3]);
                                break;
                            case 6:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos +=
                                            2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.DRAW_CIRCLE;
                                d = b;
                                c.__drawCircle(d.buffer.f[d.fPos], d.buffer.f[d.fPos + 1], d.buffer.f[d.fPos + 2]);
                                break;
                            case 7:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.DRAW_ELLIPSE;
                                d = b;
                                c.__drawEllipse(d.buffer.f[d.fPos], d.buffer.f[d.fPos + 1], d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3]);
                                break;
                            case 9:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos +=
                                            4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.DRAW_RECT;
                                d = b;
                                c.__drawRect(d.buffer.f[d.fPos], d.buffer.f[d.fPos + 1], d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3]);
                                break;
                            case 10:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos +=
                                            2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.DRAW_ROUND_RECT;
                                d = b;
                                c.__drawRoundRect(d.buffer.f[d.fPos], d.buffer.f[d.fPos + 1], d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3], d.buffer.f[d.fPos + 4], null != d.buffer.o[d.oPos] ? d.buffer.o[d.oPos] : d.buffer.f[d.fPos + 4]);
                                break;
                            case 13:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos +=
                                            1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.END_FILL;
                                a.push(new Hj);
                                break;
                            case 14:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos +=
                                            1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.LINE_BITMAP_STYLE;
                                c = null;
                                break;
                            case 15:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos +=
                                            4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.LINE_GRADIENT_STYLE;
                                break;
                            case 16:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos +=
                                            1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.LINE_STYLE;
                                var k = b;
                                d = new Ij(k.buffer.o[k.oPos], k.buffer.b[k.bPos],
                                    k.buffer.o[k.oPos + 1], k.buffer.o[k.oPos + 2], k.buffer.o[k.oPos + 3], k.buffer.f[k.fPos + 1]);
                                d.fill = new sh(k.buffer.i[k.iPos], k.buffer.f[k.fPos]);
                                a.push(d);
                                break;
                            case 17:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.LINE_TO;
                                d = b;
                                c.lineTo(d.buffer.f[d.fPos], d.buffer.f[d.fPos + 1]);
                                break;
                            case 18:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos +=
                                            1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.MOVE_TO;
                                d = b;
                                c.moveTo(d.buffer.f[d.fPos], d.buffer.f[d.fPos +
                                1]);
                                break;
                            default:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = d
                        }
                    }
                    null != c && a.push(c)
                },
                __update: function (a, b) {
                    if (null == this.__bounds || 0 >= this.__bounds.width || 0 >= this.__bounds.height) (1 <= this.__width || 1 <= this.__height) && this.set___dirty(!0), this.__height = this.__width = 0;
                    else {
                        var c = this.__owner.__renderTransform;
                        if (null != c) {
                            var d = 0 == c.b ? Math.abs(c.a) : Math.sqrt(c.a * c.a + c.b * c.b);
                            var g = 0 == c.c ? Math.abs(c.d) : Math.sqrt(c.c * c.c + c.d * c.d);
                            null != a && (d =
                                0 == a.b ? d * a.a : d * Math.sqrt(a.a * a.a + a.b * a.b), g = 0 == a.c ? g * a.d : g * Math.sqrt(a.c * a.c + a.d * a.d));
                            a = this.__bounds.width * d;
                            g *= this.__bounds.height;
                            if (1 > a || 1 > g) (1 <= this.__width || 1 <= this.__height) && this.set___dirty(!0), this.__height = this.__width = 0;
                            else {
                                null != qd.maxTextureWidth && a > qd.maxTextureWidth && (a = qd.maxTextureWidth);
                                null != qd.maxTextureWidth && g > qd.maxTextureHeight && (g = qd.maxTextureHeight);
                                if (null != this.__owner.__worldScale9Grid) {
                                    this.__renderTransform.a = b;
                                    this.__renderTransform.d = b;
                                    d = 1 / b;
                                    var f = 1 / b
                                } else this.__renderTransform.a =
                                    a / this.__bounds.width, this.__renderTransform.d = g / this.__bounds.height, d = 1 / this.__renderTransform.a, f = 1 / this.__renderTransform.d;
                                this.__worldTransform.a = d * c.a;
                                this.__worldTransform.b = d * c.b;
                                this.__worldTransform.c = f * c.c;
                                this.__worldTransform.d = f * c.d;
                                f = this.__bounds.x;
                                var k = this.__bounds.y;
                                d = f * c.a + k * c.c + c.tx;
                                c = f * c.b + k * c.d + c.ty;
                                1 < b ? (b = 1 / b, this.__worldTransform.tx = Math.round(d / b) * b, this.__worldTransform.ty = Math.round(c / b) * b) : (this.__worldTransform.tx = Math.round(d), this.__worldTransform.ty = Math.round(c));
                                b = this.__worldTransform;
                                f = b.a * b.d - b.b * b.c;
                                this.__renderTransform.tx = 0 == f ? -b.tx : 1 / f * (b.c * (b.ty - c) + b.d * (d - b.tx));
                                b = this.__worldTransform;
                                f = b.a * b.d - b.b * b.c;
                                this.__renderTransform.ty = 0 == f ? -b.ty : 1 / f * (b.a * (c - b.ty) + b.b * (b.tx - d));
                                a = Math.ceil(a + 1);
                                g = Math.ceil(g + 1);
                                a == this.__width && g == this.__height || this.set___dirty(!0);
                                this.__width = a;
                                this.__height = g
                            }
                        }
                    }
                },
                set___dirty: function (a) {
                    if (a && null != this.__owner) {
                        var b = this.__owner;
                        b.__renderDirty || (b.__renderDirty = !0, b.__setParentRenderDirty())
                    }
                    a && (this.__hardwareDirty =
                        this.__softwareDirty = !0);
                    return this.__dirty = a
                },
                __class__: qd,
                __properties__: {
                    set___dirty: "set___dirty"
                }
            };
            var sf = function () {
            };
            h["openfl.display.IGraphicsFill"] = sf;
            sf.__name__ = "openfl.display.IGraphicsFill";
            sf.__isInterface__ = !0;
            sf.prototype = {
                __class__: sf
            };
            var de = function () {
            };
            h["openfl.display.IGraphicsData"] = de;
            de.__name__ = "openfl.display.IGraphicsData";
            de.__isInterface__ = !0;
            de.prototype = {
                __class__: de
            };
            var Fj = function (a, b, c, d) {
                null == d && (d = !1);
                null == c && (c = !0);
                this.bitmapData = a;
                this.matrix = b;
                this.repeat =
                    c;
                this.smooth = d;
                this.__graphicsDataType = 4;
                this.__graphicsFillType = 2
            };
            h["openfl.display.GraphicsBitmapFill"] = Fj;
            Fj.__name__ = "openfl.display.GraphicsBitmapFill";
            Fj.__interfaces__ = [sf, de];
            Fj.prototype = {
                __class__: Fj
            };
            var Hj = function () {
                this.__graphicsDataType = 5;
                this.__graphicsFillType = 3
            };
            h["openfl.display.GraphicsEndFill"] = Hj;
            Hj.__name__ = "openfl.display.GraphicsEndFill";
            Hj.__interfaces__ = [sf, de];
            Hj.prototype = {
                __class__: Hj
            };
            var Gj = function (a, b, c, d, g, f, k, h) {
                null == h && (h = 0);
                null == a && (a = 0);
                null == f && (f = 0);
                null ==
                k && (k = 1);
                this.type = a;
                this.colors = b;
                this.alphas = c;
                this.ratios = d;
                this.matrix = g;
                this.spreadMethod = f;
                this.interpolationMethod = k;
                this.focalPointRatio = h;
                this.__graphicsDataType = 2;
                this.__graphicsFillType = 1
            };
            h["openfl.display.GraphicsGradientFill"] = Gj;
            Gj.__name__ = "openfl.display.GraphicsGradientFill";
            Gj.__interfaces__ = [sf, de];
            Gj.prototype = {
                __class__: Gj
            };
            var Jj = function () {
            };
            h["openfl.display.IGraphicsPath"] = Jj;
            Jj.__name__ = "openfl.display.IGraphicsPath";
            Jj.__isInterface__ = !0;
            var Ej = function (a, b, c) {
                null == c &&
                (c = 0);
                this.commands = a;
                this.data = b;
                this.winding = c;
                this.__graphicsDataType = 3
            };
            h["openfl.display.GraphicsPath"] = Ej;
            Ej.__name__ = "openfl.display.GraphicsPath";
            Ej.__interfaces__ = [Jj, de];
            Ej.prototype = {
                cubicCurveTo: function (a, b, c, d, g, f) {
                    null == this.commands && (this.commands = pa.toIntVector(null));
                    null == this.data && (this.data = pa.toFloatVector(null));
                    this.commands.push(6);
                    this.data.push(a);
                    this.data.push(b);
                    this.data.push(c);
                    this.data.push(d);
                    this.data.push(g);
                    this.data.push(f)
                },
                curveTo: function (a, b, c, d) {
                    null ==
                    this.commands && (this.commands = pa.toIntVector(null));
                    null == this.data && (this.data = pa.toFloatVector(null));
                    this.commands.push(3);
                    this.data.push(a);
                    this.data.push(b);
                    this.data.push(c);
                    this.data.push(d)
                },
                lineTo: function (a, b) {
                    null == this.commands && (this.commands = pa.toIntVector(null));
                    null == this.data && (this.data = pa.toFloatVector(null));
                    this.commands.push(2);
                    this.data.push(a);
                    this.data.push(b)
                },
                moveTo: function (a, b) {
                    null == this.commands && (this.commands = pa.toIntVector(null));
                    null == this.data && (this.data = pa.toFloatVector(null));
                    this.commands.push(1);
                    this.data.push(a);
                    this.data.push(b)
                },
                __drawCircle: function (a, b, c) {
                    this.__drawRoundRect(a - c, b - c, 2 * c, 2 * c, 2 * c, 2 * c)
                },
                __drawEllipse: function (a, b, c, d) {
                    this.__drawRoundRect(a, b, c, d, c, d)
                },
                __drawRect: function (a, b, c, d) {
                    this.moveTo(a, b);
                    this.lineTo(a + c, b);
                    this.lineTo(a + c, b + d);
                    this.lineTo(a, b + d);
                    this.lineTo(a, b)
                },
                __drawRoundRect: function (a, b, c, d, g, f) {
                    g *= .5;
                    f *= .5;
                    g > c / 2 && (g = c / 2);
                    f > d / 2 && (f = d / 2);
                    c = a + c;
                    d = b + d;
                    var k = -g + .7071067811865476 * g,
                        h = -g + .41421356237309503 * g,
                        l = -f + .7071067811865476 * f,
                        n = -f +
                            .41421356237309503 * f;
                    this.moveTo(c, d - f);
                    this.curveTo(c, d + n, c + k, d + l);
                    this.curveTo(c + h, d, c - g, d);
                    this.lineTo(a + g, d);
                    this.curveTo(a - h, d, a - k, d + l);
                    this.curveTo(a, d + n, a, d - f);
                    this.lineTo(a, b + f);
                    this.curveTo(a, b - n, a - k, b - l);
                    this.curveTo(a - h, b, a + g, b);
                    this.lineTo(c - g, b);
                    this.curveTo(c + h, b, c + k, b - l);
                    this.curveTo(c, b - n, c, b + f);
                    this.lineTo(c, d - f)
                },
                __class__: Ej
            };
            var xl = function (a, b, c) {
                this.rects = a;
                this.indices = b;
                this.transforms = c;
                this.__graphicsDataType = 6
            };
            h["openfl.display.GraphicsQuadPath"] = xl;
            xl.__name__ = "openfl.display.GraphicsQuadPath";
            xl.__interfaces__ = [Jj, de];
            xl.prototype = {
                __class__: xl
            };
            var Kj = function (a) {
                null == this.__glFragmentSource && (this.__glFragmentSource = "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (bitmap, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0) {\n\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t} else if (openfl_HasColorTransform) {\n\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\n\t\t}\n\n\t\t}");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}");
                Ed.call(this, a);
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.display.GraphicsShader"] = Kj;
            Kj.__name__ = "openfl.display.GraphicsShader";
            Kj.__super__ = Ed;
            Kj.prototype = w(Ed.prototype, {
                __class__: Kj
            });
            var yl = function (a, b) {
                this.shader = a;
                this.matrix = b;
                this.__graphicsDataType = 8;
                this.__graphicsFillType = 4
            };
            h["openfl.display.GraphicsShaderFill"] = yl;
            yl.__name__ = "openfl.display.GraphicsShaderFill";
            yl.__interfaces__ = [sf, de];
            yl.prototype = {
                __class__: yl
            };
            var sh = function (a, b) {
                null == b && (b = 1);
                null == a && (a = 0);
                this.alpha =
                    b;
                this.color = a;
                this.__graphicsDataType = 1;
                this.__graphicsFillType = 0
            };
            h["openfl.display.GraphicsSolidFill"] = sh;
            sh.__name__ = "openfl.display.GraphicsSolidFill";
            sh.__interfaces__ = [sf, de];
            sh.prototype = {
                __class__: sh
            };
            var hm = function () {
            };
            h["openfl.display.IGraphicsStroke"] = hm;
            hm.__name__ = "openfl.display.IGraphicsStroke";
            hm.__isInterface__ = !0;
            var Ij = function (a, b, c, d, g, f, k) {
                null == f && (f = 3);
                null == g && (g = 2);
                null == d && (d = 0);
                null == c && (c = 2);
                null == b && (b = !1);
                null == a && (a = NaN);
                this.caps = d;
                this.fill = k;
                this.joints = g;
                this.miterLimit =
                    f;
                this.pixelHinting = b;
                this.scaleMode = c;
                this.thickness = a;
                this.__graphicsDataType = 0
            };
            h["openfl.display.GraphicsStroke"] = Ij;
            Ij.__name__ = "openfl.display.GraphicsStroke";
            Ij.__interfaces__ = [hm, de];
            Ij.prototype = {
                __class__: Ij
            };
            var zl = function (a, b, c, d) {
                null == d && (d = 1);
                this.vertices = a;
                this.indices = b;
                this.uvtData = c;
                this.culling = d;
                this.__graphicsDataType = 7
            };
            h["openfl.display.GraphicsTrianglePath"] = zl;
            zl.__name__ = "openfl.display.GraphicsTrianglePath";
            zl.__interfaces__ = [Jj, de];
            zl.prototype = {
                __class__: zl
            };
            var Lj =
                function () {
                };
            h["openfl.display.IDisplayObjectLoader"] = Lj;
            Lj.__name__ = "openfl.display.IDisplayObjectLoader";
            Lj.__isInterface__ = !0;
            var Al = function () {
            };
            h["openfl.display.ITileContainer"] = Al;
            Al.__name__ = "openfl.display.ITileContainer";
            Al.__isInterface__ = !0;
            var tj = function (a) {
                null == a && (a = 80);
                this.quality = a
            };
            h["openfl.display.JPEGEncoderOptions"] = tj;
            tj.__name__ = "openfl.display.JPEGEncoderOptions";
            tj.prototype = {
                __class__: tj
            };
            var Gm = {
                    toString: function (a) {
                        switch (a) {
                            case 0:
                                return "bevel";
                            case 1:
                                return "miter";
                            case 2:
                                return "round";
                            default:
                                return null
                        }
                    }
                },
                Mj = function () {
                };
            h["openfl.display._internal.BitmapDataLoader"] = Mj;
            Mj.__name__ = "openfl.display._internal.BitmapDataLoader";
            Mj.__interfaces__ = [Lj];
            Mj.prototype = {
                __class__: Mj
            };
            var Nj = function () {
            };
            h["openfl.display._internal.ScriptLoader"] = Nj;
            Nj.__name__ = "openfl.display._internal.ScriptLoader";
            Nj.__interfaces__ = [Lj];
            Nj.prototype = {
                __class__: Nj
            };
            var Oj = function () {
            };
            h["openfl.display._internal.AssetManifestLoader"] = Oj;
            Oj.__name__ = "openfl.display._internal.AssetManifestLoader";
            Oj.__interfaces__ = [Lj];
            Oj.prototype = {
                __class__: Oj
            };
            var Wf = function () {
                rb.call(this);
                this.__drawableType = 4;
                this.contentLoaderInfo = se.create(this);
                this.uncaughtErrorEvents = this.contentLoaderInfo.uncaughtErrorEvents;
                this.__unloaded = !0
            };
            h["openfl.display.Loader"] = Wf;
            Wf.__name__ = "openfl.display.Loader";
            Wf.__registeredLoaders = null;
            Wf.__super__ = rb;
            Wf.prototype = w(rb.prototype, {
                addChild: function (a) {
                    throw new $b("Error #2069: The Loader class does not implement this method.", 2069);
                },
                addChildAt: function (a, b) {
                    throw new $b("Error #2069: The Loader class does not implement this method.",
                        2069);
                },
                removeChild: function (a) {
                    if (a == this.content) return rb.prototype.removeChild.call(this, this.content);
                    throw new $b("Error #2069: The Loader class does not implement this method.", 2069);
                },
                removeChildAt: function (a) {
                    throw new $b("Error #2069: The Loader class does not implement this method.", 2069);
                },
                __class__: Wf
            });
            var se = function () {
                this.height = this.width = -1;
                oa.call(this);
                this.applicationDomain = Jg.currentDomain;
                this.bytesTotal = this.bytesLoaded = 0;
                this.childAllowsParent = !0;
                this.parameters = {}
            };
            h["openfl.display.LoaderInfo"] =
                se;
            se.__name__ = "openfl.display.LoaderInfo";
            se.create = function (a) {
                var b = new se;
                b.uncaughtErrorEvents = new Pj;
                null != a ? b.loader = a : b.url = se.__rootURL;
                return b
            };
            se.__super__ = oa;
            se.prototype = w(oa.prototype, {
                __complete: function () {
                    this.__completed || (this.bytesLoaded < this.bytesTotal && (this.bytesLoaded = this.bytesTotal), this.__update(this.bytesLoaded, this.bytesTotal), this.__completed = !0, this.dispatchEvent(new ua("complete")))
                },
                __update: function (a, b) {
                    this.bytesLoaded = a;
                    this.bytesTotal = b;
                    this.dispatchEvent(new tf("progress",
                        !1, !1, a, b))
                },
                __class__: se
            });
            var xf = function () {
                X.call(this);
                this.__enabled = !0
            };
            h["openfl.display.MovieClip"] = xf;
            xf.__name__ = "openfl.display.MovieClip";
            xf.__super__ = X;
            xf.prototype = w(X.prototype, {
                gotoAndStop: function (a, b) {
                    null != this.__timeline && this.__timeline.__gotoAndStop(a, b)
                },
                __enterFrame: function (a) {
                    null != this.__timeline && this.__timeline.__enterFrame(a);
                    for (var b = 0, c = this.__children; b < c.length;) {
                        var d = c[b];
                        ++b;
                        d.__enterFrame(a)
                    }
                },
                __tabTest: function (a) {
                    this.__enabled && X.prototype.__tabTest.call(this,
                        a)
                },
                __onMouseDown: function (a) {
                    this.__enabled && this.__hasDown && this.gotoAndStop("_down");
                    this.__mouseIsDown = !0;
                    null != this.stage && this.stage.addEventListener("mouseUp", m(this, this.__onMouseUp), !0)
                },
                __onMouseUp: function (a) {
                    this.__mouseIsDown = !1;
                    null != this.stage && this.stage.removeEventListener("mouseUp", m(this, this.__onMouseUp));
                    this.__buttonMode && (Nd.__eq(a.target, this) && this.__enabled && this.__hasOver ? this.gotoAndStop("_over") : this.__enabled && this.__hasUp && this.gotoAndStop("_up"))
                },
                __onRollOut: function (a) {
                    this.__enabled &&
                    (this.__mouseIsDown && this.__hasOver ? this.gotoAndStop("_over") : this.__hasUp && this.gotoAndStop("_up"))
                },
                __onRollOver: function (a) {
                    this.__enabled && this.__hasOver && this.gotoAndStop("_over")
                },
                set_buttonMode: function (a) {
                    if (this.__buttonMode != a) {
                        if (a) {
                            this.__hasUp = this.__hasOver = this.__hasDown = !1;
                            for (var b = 0, c = this.get_currentLabels(); b < c.length;) {
                                var d = c[b];
                                ++b;
                                switch (d.name) {
                                    case "_down":
                                        this.__hasDown = !0;
                                        break;
                                    case "_over":
                                        this.__hasOver = !0;
                                        break;
                                    case "_up":
                                        this.__hasUp = !0
                                }
                            }
                            if (this.__hasDown || this.__hasOver ||
                                this.__hasUp) this.addEventListener("rollOver", m(this, this.__onRollOver)), this.addEventListener("rollOut", m(this, this.__onRollOut)), this.addEventListener("mouseDown", m(this, this.__onMouseDown))
                        } else this.removeEventListener("rollOver", m(this, this.__onRollOver)), this.removeEventListener("rollOut", m(this, this.__onRollOut)), this.removeEventListener("mouseDown", m(this, this.__onMouseDown));
                        this.__buttonMode = a
                    }
                    return a
                },
                get_currentLabels: function () {
                    return null != this.__timeline ? this.__timeline.__currentLabels.slice() : []
                },
                __class__: xf,
                __properties__: w(X.prototype.__properties__, {
                    get_currentLabels: "get_currentLabels"
                })
            });
            var Ma = function (a, b) {
                wd.call(this);
                this.__context3D = a;
                this.__context = a.__context;
                this.__gl = this.gl = a.__context.webgl;
                this.__defaultRenderTarget = b;
                this.__flipped = null == this.__defaultRenderTarget;
                null == qd.maxTextureWidth && (qd.maxTextureWidth = qd.maxTextureHeight = this.__gl.getParameter(this.__gl.MAX_TEXTURE_SIZE));
                this.__matrix = nb._new();
                this.__values = [];
                this.__softwareRenderer = new Ue(null);
                this.__type =
                    "opengl";
                this.__setBlendMode(10);
                this.__context3D.__setGLBlend(!0);
                this.__clipRects = [];
                this.__maskObjects = [];
                this.__numClipRects = 0;
                this.__projection = nb._new();
                this.__projectionFlipped = nb._new();
                this.__stencilReference = 0;
                this.__tempRect = new sa;
                null == Ma.__staticDefaultDisplayShader && (Ma.__staticDefaultDisplayShader = new Cj);
                null == Ma.__staticDefaultGraphicsShader && (Ma.__staticDefaultGraphicsShader = new Kj);
                null == Ma.__staticMaskShader && (Ma.__staticMaskShader = new Xf);
                this.__defaultDisplayShader = Ma.__staticDefaultDisplayShader;
                this.__defaultGraphicsShader = Ma.__staticDefaultGraphicsShader;
                this.__defaultShader = this.__defaultDisplayShader;
                this.__initShader(this.__defaultShader);
                this.__scrollRectMasks = new ob(function () {
                    return new xe
                });
                this.__maskShader = Ma.__staticMaskShader
            };
            h["openfl.display.OpenGLRenderer"] = Ma;
            Ma.__name__ = "openfl.display.OpenGLRenderer";
            Ma.__staticDefaultDisplayShader = null;
            Ma.__staticDefaultGraphicsShader = null;
            Ma.__staticMaskShader = null;
            Ma.__super__ = wd;
            Ma.prototype = w(wd.prototype, {
                applyAlpha: function (a) {
                    Ma.__alphaValue[0] =
                        a * this.__worldAlpha;
                    null != this.__currentShaderBuffer ? this.__currentShaderBuffer.addFloatOverride("openfl_Alpha", Ma.__alphaValue) : null != this.__currentShader && null != this.__currentShader.__alpha && (this.__currentShader.__alpha.value = Ma.__alphaValue)
                },
                applyBitmapData: function (a, b, c) {
                    null == c && (c = !1);
                    null != this.__currentShaderBuffer ? null != a && (Ma.__textureSizeValue[0] = a.__textureWidth, Ma.__textureSizeValue[1] = a.__textureHeight, this.__currentShaderBuffer.addFloatOverride("openfl_TextureSize", Ma.__textureSizeValue)) :
                        null != this.__currentShader && (null != this.__currentShader.__bitmap && (this.__currentShader.__bitmap.input = a, this.__currentShader.__bitmap.filter = b && this.__allowSmoothing ? 4 : 5, this.__currentShader.__bitmap.mipFilter = 2, this.__currentShader.__bitmap.wrap = c ? 2 : 0), null != this.__currentShader.__texture && (this.__currentShader.__texture.input = a, this.__currentShader.__texture.filter = b && this.__allowSmoothing ? 4 : 5, this.__currentShader.__texture.mipFilter = 2, this.__currentShader.__texture.wrap = c ? 2 : 0), null != this.__currentShader.__textureSize &&
                        (null != a ? (Ma.__textureSizeValue[0] = a.__textureWidth, Ma.__textureSizeValue[1] = a.__textureHeight, this.__currentShader.__textureSize.value = Ma.__textureSizeValue) : this.__currentShader.__textureSize.value = null))
                },
                applyColorTransform: function (a) {
                    var b = null != a && !a.__isDefault(!0);
                    this.applyHasColorTransform(b);
                    b ? (a.__setArrays(Ma.__colorMultipliersValue, Ma.__colorOffsetsValue), null != this.__currentShaderBuffer ? (this.__currentShaderBuffer.addFloatOverride("openfl_ColorMultiplier", Ma.__colorMultipliersValue),
                        this.__currentShaderBuffer.addFloatOverride("openfl_ColorOffset", Ma.__colorOffsetsValue)) : null != this.__currentShader && (null != this.__currentShader.__colorMultiplier && (this.__currentShader.__colorMultiplier.value = Ma.__colorMultipliersValue), null != this.__currentShader.__colorOffset && (this.__currentShader.__colorOffset.value = Ma.__colorOffsetsValue))) : null != this.__currentShaderBuffer ? (this.__currentShaderBuffer.addFloatOverride("openfl_ColorMultiplier", Ma.__emptyColorValue), this.__currentShaderBuffer.addFloatOverride("openfl_ColorOffset",
                        Ma.__emptyColorValue)) : null != this.__currentShader && (null != this.__currentShader.__colorMultiplier && (this.__currentShader.__colorMultiplier.value = Ma.__emptyColorValue), null != this.__currentShader.__colorOffset && (this.__currentShader.__colorOffset.value = Ma.__emptyColorValue))
                },
                applyHasColorTransform: function (a) {
                    Ma.__hasColorTransformValue[0] = a;
                    null != this.__currentShaderBuffer ? this.__currentShaderBuffer.addBoolOverride("openfl_HasColorTransform", Ma.__hasColorTransformValue) : null != this.__currentShader &&
                        null != this.__currentShader.__hasColorTransform && (this.__currentShader.__hasColorTransform.value = Ma.__hasColorTransformValue)
                },
                applyMatrix: function (a) {
                    null != this.__currentShaderBuffer ? this.__currentShaderBuffer.addFloatOverride("openfl_Matrix", a) : null != this.__currentShader && null != this.__currentShader.__matrix && (this.__currentShader.__matrix.value = a)
                },
                setShader: function (a) {
                    this.__currentShaderBuffer = null;
                    this.__currentShader != a && (null == a ? (this.__currentShader = null, this.__context3D.setProgram(null)) :
                        (this.__currentShader = a, this.__initShader(a), this.__context3D.setProgram(a.program), this.__context3D.__flushGLProgram(), this.__currentShader.__enable(), this.__context3D.__state.shader = a))
                },
                setViewport: function () {
                    this.__gl.viewport(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight)
                },
                updateShader: function () {
                    null != this.__currentShader && (null != this.__currentShader.__position && (this.__currentShader.__position.__useArray = !0), null != this.__currentShader.__textureCoord && (this.__currentShader.__textureCoord.__useArray = !0), this.__context3D.setProgram(this.__currentShader.program), this.__context3D.__flushGLProgram(), this.__context3D.__flushGLTextures(), this.__currentShader.__update())
                },
                useAlphaArray: function () {
                    null != this.__currentShader && null != this.__currentShader.__alpha && (this.__currentShader.__alpha.__useArray = !0)
                },
                useColorTransformArray: function () {
                    null != this.__currentShader && (null != this.__currentShader.__colorMultiplier && (this.__currentShader.__colorMultiplier.__useArray = !0), null != this.__currentShader.__colorOffset &&
                    (this.__currentShader.__colorOffset.__useArray = !0))
                },
                __clear: function () {
                    null == this.__stage || this.__stage.__transparent ? this.__context3D.clear(0, 0, 0, 0, 0, 0, 1) : this.__context3D.clear(this.__stage.__colorSplit[0], this.__stage.__colorSplit[1], this.__stage.__colorSplit[2], 1, 0, 0, 1);
                    this.__cleared = !0
                },
                __clearShader: function () {
                    null != this.__currentShader && (null == this.__currentShaderBuffer ? null != this.__currentShader.__bitmap && (this.__currentShader.__bitmap.input = null) : this.__currentShaderBuffer.clearOverride(),
                    null != this.__currentShader.__texture && (this.__currentShader.__texture.input = null), null != this.__currentShader.__textureSize && (this.__currentShader.__textureSize.value = null), null != this.__currentShader.__hasColorTransform && (this.__currentShader.__hasColorTransform.value = null), null != this.__currentShader.__position && (this.__currentShader.__position.value = null), null != this.__currentShader.__matrix && (this.__currentShader.__matrix.value = null), this.__currentShader.__clearUseArray())
                },
                __copyShader: function (a) {
                    this.__currentShader =
                        a.__currentShader;
                    this.__currentShaderBuffer = a.__currentShaderBuffer;
                    this.__currentDisplayShader = a.__currentDisplayShader;
                    this.__currentGraphicsShader = a.__currentGraphicsShader
                },
                __getMatrix: function (a, b) {
                    var c = va.__pool.get();
                    c.copyFrom(a);
                    c.concat(this.__worldTransform);
                    if (0 == b || 1 == b && 0 == c.b && 0 == c.c && 1.001 > c.a && .999 < c.a && 1.001 > c.d && .999 < c.d) c.tx = Math.round(c.tx), c.ty = Math.round(c.ty);
                    nb.identity(this.__matrix);
                    nb.set(this.__matrix, 0, c.a);
                    nb.set(this.__matrix, 1, c.b);
                    nb.set(this.__matrix, 4, c.c);
                    nb.set(this.__matrix,
                        5, c.d);
                    nb.set(this.__matrix, 12, c.tx);
                    nb.set(this.__matrix, 13, c.ty);
                    nb.append(this.__matrix, this.__flipped ? this.__projectionFlipped : this.__projection);
                    this.__values[0] = nb.get(this.__matrix, 0);
                    this.__values[1] = nb.get(this.__matrix, 1);
                    this.__values[2] = nb.get(this.__matrix, 2);
                    this.__values[3] = nb.get(this.__matrix, 3);
                    this.__values[4] = nb.get(this.__matrix, 4);
                    this.__values[5] = nb.get(this.__matrix, 5);
                    this.__values[6] = nb.get(this.__matrix, 6);
                    this.__values[7] = nb.get(this.__matrix, 7);
                    this.__values[8] = nb.get(this.__matrix,
                        8);
                    this.__values[9] = nb.get(this.__matrix, 9);
                    this.__values[10] = nb.get(this.__matrix, 10);
                    this.__values[11] = nb.get(this.__matrix, 11);
                    this.__values[12] = nb.get(this.__matrix, 12);
                    this.__values[13] = nb.get(this.__matrix, 13);
                    this.__values[14] = nb.get(this.__matrix, 14);
                    this.__values[15] = nb.get(this.__matrix, 15);
                    va.__pool.release(c);
                    return this.__values
                },
                __initShader: function (a) {
                    return null != a ? (null == a.__context && (a.__context = this.__context3D, a.__init()), a) : this.__defaultShader
                },
                __initDisplayShader: function (a) {
                    return null !=
                    a ? (null == a.__context && (a.__context = this.__context3D, a.__init()), a) : this.__defaultDisplayShader
                },
                __initGraphicsShader: function (a) {
                    return null != a ? (null == a.__context && (a.__context = this.__context3D, a.__init()), a) : this.__defaultGraphicsShader
                },
                __initShaderBuffer: function (a) {
                    return null != a ? this.__initGraphicsShader(a.shader) : this.__defaultGraphicsShader
                },
                __popMask: function () {
                    if (0 != this.__stencilReference) {
                        var a = this.__maskObjects.pop();
                        1 < this.__stencilReference ? (this.__context3D.setStencilActions(2, 1, 0,
                            0, 5), this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 255), this.__context3D.setColorMask(!1, !1, !1, !1), this.__renderDrawableMask(a), this.__stencilReference--, this.__context3D.setStencilActions(2, 1, 5, 5, 5), this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0), this.__context3D.setColorMask(!0, !0, !0, !0)) : (this.__stencilReference = 0, this.__context3D.setStencilActions(), this.__context3D.setStencilReferenceValue(0, 0, 0))
                    }
                },
                __popMaskObject: function (a, b) {
                    null == b && (b = !0);
                    null != a.__mask && this.__popMask();
                    b && null != a.__scrollRect && (0 != a.__renderTransform.b || 0 != a.__renderTransform.c ? (this.__scrollRectMasks.release(this.__maskObjects[this.__maskObjects.length - 1]), this.__popMask()) : this.__popMaskRect())
                },
                __popMaskRect: function () {
                    0 < this.__numClipRects && (this.__numClipRects--, 0 < this.__numClipRects ? this.__scissorRect(this.__clipRects[this.__numClipRects - 1]) : this.__scissorRect())
                },
                __pushMask: function (a) {
                    0 == this.__stencilReference && (this.__context3D.clear(0, 0, 0, 0, 0, 0, 4), this.__updatedStencil = !0);
                    this.__context3D.setStencilActions(2, 1, 2, 5, 5);
                    this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 255);
                    this.__context3D.setColorMask(!1, !1, !1, !1);
                    this.__renderDrawableMask(a);
                    this.__maskObjects.push(a);
                    this.__stencilReference++;
                    this.__context3D.setStencilActions(2, 1, 5, 5, 5);
                    this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0);
                    this.__context3D.setColorMask(!0, !0, !0, !0)
                },
                __pushMaskObject: function (a, b) {
                    null == b && (b = !0);
                    b && null != a.__scrollRect && (0 != a.__renderTransform.b ||
                    0 != a.__renderTransform.c ? (b = this.__scrollRectMasks.get(), b.get_graphics().clear(), b.get_graphics().beginFill(65280), b.get_graphics().drawRect(a.__scrollRect.x, a.__scrollRect.y, a.__scrollRect.width, a.__scrollRect.height), b.__renderTransform.copyFrom(a.__renderTransform), this.__pushMask(b)) : this.__pushMaskRect(a.__scrollRect, a.__renderTransform));
                    null != a.__mask && this.__pushMask(a.__mask)
                },
                __pushMaskRect: function (a, b) {
                    this.__numClipRects == this.__clipRects.length && (this.__clipRects[this.__numClipRects] =
                        new sa);
                    var c = va.__pool.get();
                    c.copyFrom(b);
                    c.concat(this.__worldTransform);
                    b = this.__clipRects[this.__numClipRects];
                    a.__transform(b, c);
                    0 < this.__numClipRects && (a = this.__clipRects[this.__numClipRects - 1], b.__contract(a.x, a.y, a.width, a.height));
                    0 > b.height && (b.height = 0);
                    0 > b.width && (b.width = 0);
                    va.__pool.release(c);
                    this.__scissorRect(b);
                    this.__numClipRects++
                },
                __render: function (a) {
                    this.__context3D.setColorMask(!0, !0, !0, !0);
                    this.__context3D.setCulling(3);
                    this.__context3D.setDepthTest(!1, 0);
                    this.__context3D.setStencilActions();
                    this.__context3D.setStencilReferenceValue(0, 0, 0);
                    this.__context3D.setScissorRectangle(null);
                    this.__blendMode = null;
                    this.__setBlendMode(10);
                    if (null == this.__defaultRenderTarget) {
                        if (this.__context3D.__backBufferWantsBestResolution ? Ma.__scissorRectangle.setTo(this.__offsetX / this.__pixelRatio, this.__offsetY / this.__pixelRatio, this.__displayWidth / this.__pixelRatio, this.__displayHeight / this.__pixelRatio) : Ma.__scissorRectangle.setTo(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight), this.__context3D.setScissorRectangle(Ma.__scissorRectangle),
                            this.__upscaled = 1 != this.__worldTransform.a || 1 != this.__worldTransform.d, this.__renderDrawable(a), 0 < this.__offsetX || 0 < this.__offsetY) 0 < this.__offsetX && (Ma.__scissorRectangle.setTo(0, 0, this.__offsetX, this.__height), this.__context3D.setScissorRectangle(Ma.__scissorRectangle), this.__context3D.__flushGL(), this.__gl.clearColor(0, 0, 0, 1), this.__gl.clear(this.__gl.COLOR_BUFFER_BIT), Ma.__scissorRectangle.setTo(this.__offsetX + this.__displayWidth, 0, this.__width, this.__height), this.__context3D.setScissorRectangle(Ma.__scissorRectangle),
                            this.__context3D.__flushGL(), this.__gl.clearColor(0, 0, 0, 1), this.__gl.clear(this.__gl.COLOR_BUFFER_BIT)), 0 < this.__offsetY && (Ma.__scissorRectangle.setTo(0, 0, this.__width, this.__offsetY), this.__context3D.setScissorRectangle(Ma.__scissorRectangle), this.__context3D.__flushGL(), this.__gl.clearColor(0, 0, 0, 1), this.__gl.clear(this.__gl.COLOR_BUFFER_BIT), Ma.__scissorRectangle.setTo(0, this.__offsetY + this.__displayHeight, this.__width, this.__height), this.__context3D.setScissorRectangle(Ma.__scissorRectangle),
                            this.__context3D.__flushGL(), this.__gl.clearColor(0, 0, 0, 1), this.__gl.clear(this.__gl.COLOR_BUFFER_BIT)), this.__context3D.setScissorRectangle(null)
                    } else {
                        this.__context3D.__backBufferWantsBestResolution ? Ma.__scissorRectangle.setTo(this.__offsetX / this.__pixelRatio, this.__offsetY / this.__pixelRatio, this.__displayWidth / this.__pixelRatio, this.__displayHeight / this.__pixelRatio) : Ma.__scissorRectangle.setTo(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight);
                        this.__context3D.setScissorRectangle(Ma.__scissorRectangle);
                        var b = a.__mask,
                            c = a.__scrollRect;
                        a.__mask = null;
                        a.__scrollRect = null;
                        this.__renderDrawable(a);
                        a.__mask = b;
                        a.__scrollRect = c
                    }
                    this.__context3D.present()
                },
                __renderDrawable: function (a) {
                    if (null != a) switch (a.__drawableType) {
                        case 0:
                            Qj.renderDrawable(a, this);
                            break;
                        case 2:
                            Sd.renderDrawable(a, this);
                            break;
                        case 3:
                            Yf.renderDrawable(a, this);
                            break;
                        case 4:
                        case 5:
                            Rj.renderDrawable(a, this);
                            break;
                        case 6:
                            Sj.renderDrawable(a, this);
                            break;
                        case 7:
                            Xe.renderDrawable(a, this);
                            break;
                        case 8:
                            Td.renderDrawable(a, this);
                            break;
                        case 9:
                            S.renderDrawable(a,
                                this)
                    }
                },
                __renderDrawableMask: function (a) {
                    if (null != a) switch (a.__drawableType) {
                        case 0:
                            Qj.renderDrawableMask(a, this);
                            break;
                        case 2:
                            Sd.renderDrawableMask(a, this);
                            break;
                        case 3:
                            Yf.renderDrawableMask(a, this);
                            break;
                        case 4:
                        case 5:
                            Rj.renderDrawableMask(a, this);
                            break;
                        case 6:
                            Sj.renderDrawableMask(a, this);
                            break;
                        case 7:
                            Xe.renderDrawableMask(a, this);
                            break;
                        case 8:
                            Td.renderDrawableMask(a, this);
                            break;
                        case 9:
                            S.renderDrawableMask(a, this)
                    }
                },
                __renderFilterPass: function (a, b, c, d) {
                    null == d && (d = !0);
                    if (null != a && null != b && null !=
                        this.__defaultRenderTarget) {
                        var g = this.__context3D.__state.renderToTexture,
                            f = this.__context3D.__state.renderToTextureDepthStencil,
                            k = this.__context3D.__state.renderToTextureAntiAlias,
                            h = this.__context3D.__state.renderToTextureSurfaceSelector;
                        this.__context3D.setRenderToTexture(this.__defaultRenderTarget.getTexture(this.__context3D), !1);
                        d && this.__context3D.clear(0, 0, 0, 0, 0, 0, 1);
                        b = this.__initShader(b);
                        this.setShader(b);
                        this.applyAlpha(1);
                        this.applyBitmapData(a, c);
                        this.applyColorTransform(null);
                        this.applyMatrix(this.__getMatrix(a.__renderTransform,
                            1));
                        this.updateShader();
                        c = a.getVertexBuffer(this.__context3D);
                        null != b.__position && this.__context3D.setVertexBufferAt(b.__position.index, c, 0, 3);
                        null != b.__textureCoord && this.__context3D.setVertexBufferAt(b.__textureCoord.index, c, 3, 2);
                        a = a.getIndexBuffer(this.__context3D);
                        this.__context3D.drawTriangles(a);
                        null != g ? this.__context3D.setRenderToTexture(g, f, k, h) : this.__context3D.setRenderToBackBuffer();
                        this.__clearShader()
                    }
                },
                __resize: function (a, b) {
                    this.__width = a;
                    this.__height = b;
                    a = null == this.__defaultRenderTarget ?
                        this.__stage.stageWidth : this.__defaultRenderTarget.width;
                    b = null == this.__defaultRenderTarget ? this.__stage.stageHeight : this.__defaultRenderTarget.height;
                    if (null == this.__defaultRenderTarget) {
                        var c = this.__worldTransform;
                        c = Math.round(0 * c.a + 0 * c.c + c.tx)
                    } else c = 0;
                    this.__offsetX = c;
                    null == this.__defaultRenderTarget ? (c = this.__worldTransform, c = Math.round(0 * c.b + 0 * c.d + c.ty)) : c = 0;
                    this.__offsetY = c;
                    null == this.__defaultRenderTarget ? (c = this.__worldTransform, c = Math.round(a * c.a + 0 * c.c + c.tx - this.__offsetX)) : c = a;
                    this.__displayWidth =
                        c;
                    null == this.__defaultRenderTarget ? (c = this.__worldTransform, c = Math.round(0 * c.b + b * c.d + c.ty - this.__offsetY)) : c = b;
                    this.__displayHeight = c;
                    nb.createOrtho(this.__projection, 0, this.__displayWidth + 2 * this.__offsetX, 0, this.__displayHeight + 2 * this.__offsetY, -1E3, 1E3);
                    nb.createOrtho(this.__projectionFlipped, 0, this.__displayWidth + 2 * this.__offsetX, this.__displayHeight + 2 * this.__offsetY, 0, -1E3, 1E3)
                },
                __resumeClipAndMask: function (a) {
                    0 < this.__stencilReference ? (this.__context3D.setStencilActions(2, 1, 5, 5, 5), this.__context3D.setStencilReferenceValue(this.__stencilReference,
                        255, 0)) : (this.__context3D.setStencilActions(), this.__context3D.setStencilReferenceValue(0, 0, 0));
                    0 < this.__numClipRects ? this.__scissorRect(this.__clipRects[this.__numClipRects - 1]) : this.__scissorRect()
                },
                __scissorRect: function (a) {
                    if (null != a) {
                        var b = Math.floor(a.x),
                            c = Math.floor(a.y),
                            d = 0 < a.width ? Math.ceil(a.get_right()) - b : 0,
                            g = 0 < a.height ? Math.ceil(a.get_bottom()) - c : 0;
                        this.__context3D.__backBufferWantsBestResolution && (g = 1.5 / this.__pixelRatio, b = a.x / this.__pixelRatio, c = a.y / this.__pixelRatio, d = 0 < a.width ? a.get_right() /
                            this.__pixelRatio - b + g : 0, g = 0 < a.height ? a.get_bottom() / this.__pixelRatio - c + g : 0);
                        0 > d && (d = 0);
                        0 > g && (g = 0);
                        Ma.__scissorRectangle.setTo(b, c, d, g);
                        this.__context3D.setScissorRectangle(Ma.__scissorRectangle)
                    } else this.__context3D.setScissorRectangle(null)
                },
                __setBlendMode: function (a) {
                    null != this.__overrideBlendMode && (a = this.__overrideBlendMode);
                    if (this.__blendMode != a) switch (this.__blendMode = a, a) {
                        case 0:
                            this.__context3D.setBlendFactors(2, 2);
                            break;
                        case 9:
                            this.__context3D.setBlendFactors(1, 5);
                            break;
                        case 12:
                            this.__context3D.setBlendFactors(2,
                                6);
                            break;
                        case 14:
                            this.__context3D.setBlendFactors(2, 2);
                            this.__context3D.__setGLBlendEquation(this.__gl.FUNC_REVERSE_SUBTRACT);
                            break;
                        default:
                            this.__context3D.setBlendFactors(2, 5)
                    }
                },
                __setRenderTarget: function (a) {
                    this.__defaultRenderTarget = a;
                    this.__flipped = null == a;
                    null != a && this.__resize(a.width, a.height)
                },
                __setShaderBuffer: function (a) {
                    this.setShader(a.shader);
                    this.__currentShaderBuffer = a
                },
                __suspendClipAndMask: function () {
                    0 < this.__stencilReference && (this.__context3D.setStencilActions(), this.__context3D.setStencilReferenceValue(0,
                        0, 0));
                    0 < this.__numClipRects && this.__scissorRect()
                },
                __updateShaderBuffer: function (a) {
                    null != this.__currentShader && null != this.__currentShaderBuffer && this.__currentShader.__updateFromBuffer(this.__currentShaderBuffer, a)
                },
                __class__: Ma
            });
            var Ki = function (a) {
                null == a && (a = !1);
                this.fastCompression = a
            };
            h["openfl.display.PNGEncoderOptions"] = Ki;
            Ki.__name__ = "openfl.display.PNGEncoderOptions";
            Ki.prototype = {
                __class__: Ki
            };
            var Fh = function (a) {
                this.onComplete = new Nc;
                this.display = a;
                null != a && (a.addEventListener("unload",
                    m(this, this.display_onUnload)), db.get_current().addChild(a))
            };
            h["openfl.display.Preloader"] = Fh;
            Fh.__name__ = "openfl.display.Preloader";
            Fh.prototype = {
                start: function () {
                    this.ready = !0;
                    db.get_current().get_loaderInfo().__complete();
                    if (null != this.display) {
                        var a = new ua("complete", !0, !0);
                        this.display.dispatchEvent(a);
                        a.isDefaultPrevented() || this.display.dispatchEvent(new ua("unload"))
                    } else this.complete || (this.complete = !0, this.onComplete.dispatch())
                },
                update: function (a, b) {
                    db.get_current().get_loaderInfo().__update(a,
                        b);
                    null != this.display && this.display.dispatchEvent(new tf("progress", !0, !0, a, b))
                },
                display_onUnload: function (a) {
                    null != this.display && (this.display.removeEventListener("unload", m(this, this.display_onUnload)), this.display.parent == db.get_current() && db.get_current().removeChild(this.display), db.get_current().stage.set_focus(null), this.display = null);
                    this.ready && !this.complete && (this.complete = !0, this.onComplete.dispatch())
                },
                __class__: Fh
            };
            var Vg = function () {
                X.call(this);
                var a = this.getBackgroundColor(),
                    b = 0;
                70 >
                .299 * (a >> 16 & 255) + .587 * (a >> 8 & 255) + .114 * (a & 255) && (b = 16777215);
                a = this.getHeight() / 2 - 3.5;
                var c = this.getWidth() - 60;
                this.outline = new xe;
                this.outline.get_graphics().beginFill(b, .07);
                this.outline.get_graphics().drawRect(0, 0, c, 7);
                this.outline.set_x(30);
                this.outline.set_y(a);
                this.outline.set_alpha(0);
                this.addChild(this.outline);
                this.progress = new xe;
                this.progress.get_graphics().beginFill(b, .35);
                this.progress.get_graphics().drawRect(0, 0, c - 4, 3);
                this.progress.set_x(32);
                this.progress.set_y(a + 2);
                this.progress.set_scaleX(0);
                this.progress.set_alpha(0);
                this.addChild(this.progress);
                this.startAnimation = db.getTimer() + 100;
                this.endAnimation = this.startAnimation + 1E3;
                this.addEventListener("addedToStage", m(this, this.this_onAddedToStage))
            };
            h["openfl.display.DefaultPreloader"] = Vg;
            Vg.__name__ = "openfl.display.DefaultPreloader";
            Vg.__super__ = X;
            Vg.prototype = w(X.prototype, {
                getBackgroundColor: function () {
                    var a = db.get_current().stage.window.context.attributes;
                    return Object.prototype.hasOwnProperty.call(a, "background") && null != a.background ?
                        a.background : 0
                },
                getHeight: function () {
                    var a = db.get_current().stage.window.__height;
                    return 0 < a ? a : db.get_current().stage.stageHeight
                },
                getWidth: function () {
                    var a = db.get_current().stage.window.__width;
                    return 0 < a ? a : db.get_current().stage.stageWidth
                },
                onInit: function () {
                    this.addEventListener("enterFrame", m(this, this.this_onEnterFrame))
                },
                onLoaded: function () {
                    this.removeEventListener("enterFrame", m(this, this.this_onEnterFrame));
                    this.dispatchEvent(new ua("unload"))
                },
                onUpdate: function (a, b) {
                    var c = 0;
                    0 < b && (c = a / b, 1 <
                    c && (c = 1));
                    this.progress.set_scaleX(c)
                },
                this_onAddedToStage: function (a) {
                    this.removeEventListener("addedToStage", m(this, this.this_onAddedToStage));
                    this.onInit();
                    this.onUpdate(this.get_loaderInfo().bytesLoaded, this.get_loaderInfo().bytesTotal);
                    this.addEventListener("progress", m(this, this.this_onProgress));
                    this.addEventListener("complete", m(this, this.this_onComplete))
                },
                this_onComplete: function (a) {
                    a.preventDefault();
                    this.removeEventListener("progress", m(this, this.this_onProgress));
                    this.removeEventListener("complete",
                        m(this, this.this_onComplete));
                    this.onLoaded()
                },
                this_onEnterFrame: function (a) {
                    a = (db.getTimer() - this.startAnimation) / (this.endAnimation - this.startAnimation);
                    0 > a && (a = 0);
                    1 < a && (a = 1);
                    this.outline.set_alpha(this.progress.set_alpha(a))
                },
                this_onProgress: function (a) {
                    this.onUpdate(a.bytesLoaded | 0, a.bytesTotal | 0)
                },
                __class__: Vg
            });
            var sm = {
                    _new: function (a) {
                        return {}
                    }
                },
                Bj = function () {
                    this.channels = 0;
                    this.filter = 5;
                    this.index = this.height = 0;
                    this.mipFilter = 2;
                    this.wrap = this.width = 0
                };
            h["openfl.display.ShaderInput"] = Bj;
            Bj.__name__ =
                "openfl.display.ShaderInput";
            Bj.prototype = {
                __disableGL: function (a, b) {
                    0 > b || a.setTextureAt(b, null)
                },
                __updateGL: function (a, b, c, d, g, f) {
                    c = null != c ? c : this.input;
                    d = null != d ? d : this.filter;
                    g = null != g ? g : this.mipFilter;
                    f = null != f ? f : this.wrap;
                    null != c ? (a.setTextureAt(b, c.getTexture(a)), a.setSamplerStateAt(b, f, d, g)) : a.setTextureAt(b, null)
                },
                __class__: Bj
            };
            var Ig = function () {
                this.index = 0
            };
            h["openfl.display.ShaderParameter"] = Ig;
            Ig.__name__ = "openfl.display.ShaderParameter";
            Ig.prototype = {
                __disableGL: function (a) {
                    if (!(0 > this.index ||
                        (a = a.gl, this.__isUniform)))
                        for (var b = 0, c = this.__arrayLength; b < c;) {
                            var d = b++;
                            a.disableVertexAttribArray(this.index + d)
                        }
                },
                __updateGL: function (a, b) {
                    if (!(0 > this.index)) {
                        a = a.gl;
                        b = null != b ? b : this.value;
                        var c = this.__isBool ? b : null,
                            d = this.__isFloat ? b : null,
                            g = this.__isInt ? b : null;
                        if (this.__isUniform)
                            if (null != b && b.length >= this.__length) switch (this.type) {
                                case 0:
                                    a.uniform1i(this.index, c[0] ? 1 : 0);
                                    break;
                                case 1:
                                    a.uniform2i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0);
                                    break;
                                case 2:
                                    a.uniform3i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0);
                                    break;
                                case 3:
                                    a.uniform4i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0, c[3] ? 1 : 0);
                                    break;
                                case 4:
                                    a.uniform1f(this.index, d[0]);
                                    break;
                                case 5:
                                    a.uniform2f(this.index, d[0], d[1]);
                                    break;
                                case 6:
                                    a.uniform3f(this.index, d[0], d[1], d[2]);
                                    break;
                                case 7:
                                    a.uniform4f(this.index, d[0], d[1], d[2], d[3]);
                                    break;
                                case 8:
                                    a.uniform1i(this.index, g[0]);
                                    break;
                                case 9:
                                    a.uniform2i(this.index, g[0], g[1]);
                                    break;
                                case 10:
                                    a.uniform3i(this.index, g[0], g[1], g[2]);
                                    break;
                                case 11:
                                    a.uniform4i(this.index, g[0], g[1], g[2], g[3]);
                                    break;
                                case 12:
                                    this.__uniformMatrix[0] =
                                        d[0];
                                    this.__uniformMatrix[1] = d[1];
                                    this.__uniformMatrix[2] = d[2];
                                    this.__uniformMatrix[3] = d[3];
                                    Tc.uniformMatrix2fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 16:
                                    this.__uniformMatrix[0] = d[0];
                                    this.__uniformMatrix[1] = d[1];
                                    this.__uniformMatrix[2] = d[2];
                                    this.__uniformMatrix[3] = d[3];
                                    this.__uniformMatrix[4] = d[4];
                                    this.__uniformMatrix[5] = d[5];
                                    this.__uniformMatrix[6] = d[6];
                                    this.__uniformMatrix[7] = d[7];
                                    this.__uniformMatrix[8] = d[8];
                                    Tc.uniformMatrix3fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 20:
                                    this.__uniformMatrix[0] =
                                        d[0], this.__uniformMatrix[1] = d[1], this.__uniformMatrix[2] = d[2], this.__uniformMatrix[3] = d[3], this.__uniformMatrix[4] = d[4], this.__uniformMatrix[5] = d[5], this.__uniformMatrix[6] = d[6], this.__uniformMatrix[7] = d[7], this.__uniformMatrix[8] = d[8], this.__uniformMatrix[9] = d[9], this.__uniformMatrix[10] = d[10], this.__uniformMatrix[11] = d[11], this.__uniformMatrix[12] = d[12], this.__uniformMatrix[13] = d[13], this.__uniformMatrix[14] = d[14], this.__uniformMatrix[15] = d[15], Tc.uniformMatrix4fv(a, this.index, !1, this.__uniformMatrix)
                            } else switch (this.type) {
                                case 4:
                                    a.uniform1f(this.index,
                                        0);
                                    break;
                                case 5:
                                    a.uniform2f(this.index, 0, 0);
                                    break;
                                case 6:
                                    a.uniform3f(this.index, 0, 0, 0);
                                    break;
                                case 7:
                                    a.uniform4f(this.index, 0, 0, 0, 0);
                                    break;
                                case 0:
                                case 8:
                                    a.uniform1i(this.index, 0);
                                    break;
                                case 1:
                                case 9:
                                    a.uniform2i(this.index, 0, 0);
                                    break;
                                case 2:
                                case 10:
                                    a.uniform3i(this.index, 0, 0, 0);
                                    break;
                                case 3:
                                case 11:
                                    a.uniform4i(this.index, 0, 0, 0, 0);
                                    break;
                                case 12:
                                    this.__uniformMatrix[0] = 0;
                                    this.__uniformMatrix[1] = 0;
                                    this.__uniformMatrix[2] = 0;
                                    this.__uniformMatrix[3] = 0;
                                    Tc.uniformMatrix2fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 16:
                                    this.__uniformMatrix[0] = 0;
                                    this.__uniformMatrix[1] = 0;
                                    this.__uniformMatrix[2] = 0;
                                    this.__uniformMatrix[3] = 0;
                                    this.__uniformMatrix[4] = 0;
                                    this.__uniformMatrix[5] = 0;
                                    this.__uniformMatrix[6] = 0;
                                    this.__uniformMatrix[7] = 0;
                                    this.__uniformMatrix[8] = 0;
                                    Tc.uniformMatrix3fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 20:
                                    this.__uniformMatrix[0] = 0, this.__uniformMatrix[1] = 0, this.__uniformMatrix[2] = 0, this.__uniformMatrix[3] = 0, this.__uniformMatrix[4] = 0, this.__uniformMatrix[5] = 0, this.__uniformMatrix[6] = 0,
                                        this.__uniformMatrix[7] = 0, this.__uniformMatrix[8] = 0, this.__uniformMatrix[9] = 0, this.__uniformMatrix[10] = 0, this.__uniformMatrix[11] = 0, this.__uniformMatrix[12] = 0, this.__uniformMatrix[13] = 0, this.__uniformMatrix[14] = 0, this.__uniformMatrix[15] = 0, Tc.uniformMatrix4fv(a, this.index, !1, this.__uniformMatrix)
                            } else if (this.__useArray || null != b && b.length != this.__length)
                            for (f = 0, k = this.__arrayLength; f < k;) h = f++, a.enableVertexAttribArray(this.index + h);
                        else {
                            for (var f = 0, k = this.__arrayLength; f < k;) {
                                var h = f++;
                                a.disableVertexAttribArray(this.index +
                                    h)
                            }
                            if (null != b) switch (this.type) {
                                case 0:
                                    a.vertexAttrib1f(this.index, c[0] ? 1 : 0);
                                    break;
                                case 1:
                                    a.vertexAttrib2f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0);
                                    break;
                                case 2:
                                    a.vertexAttrib3f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0);
                                    break;
                                case 3:
                                    a.vertexAttrib4f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0, c[3] ? 1 : 0);
                                    break;
                                case 4:
                                    a.vertexAttrib1f(this.index, d[0]);
                                    break;
                                case 5:
                                    a.vertexAttrib2f(this.index, d[0], d[1]);
                                    break;
                                case 6:
                                    a.vertexAttrib3f(this.index, d[0], d[1], d[2]);
                                    break;
                                case 7:
                                    a.vertexAttrib4f(this.index, d[0], d[1], d[2], d[3]);
                                    break;
                                case 8:
                                    a.vertexAttrib1f(this.index, g[0]);
                                    break;
                                case 9:
                                    a.vertexAttrib2f(this.index, g[0], g[1]);
                                    break;
                                case 10:
                                    a.vertexAttrib3f(this.index, g[0], g[1], g[2]);
                                    break;
                                case 11:
                                    a.vertexAttrib4f(this.index, g[0], g[1], g[2], g[3]);
                                    break;
                                case 12:
                                    a.vertexAttrib2f(this.index + 0, d[0], d[1]);
                                    a.vertexAttrib2f(this.index + 1, d[2], d[3]);
                                    break;
                                case 16:
                                    a.vertexAttrib3f(this.index + 0, d[0], d[1], d[2]);
                                    a.vertexAttrib3f(this.index + 1, d[3], d[4], d[5]);
                                    a.vertexAttrib3f(this.index + 2, d[6], d[7], d[8]);
                                    break;
                                case 20:
                                    a.vertexAttrib4f(this.index +
                                        0, d[0], d[1], d[2], d[3]), a.vertexAttrib4f(this.index + 1, d[4], d[5], d[6], d[7]), a.vertexAttrib4f(this.index + 2, d[8], d[9], d[10], d[11]), a.vertexAttrib4f(this.index + 3, d[12], d[13], d[14], d[15])
                            } else switch (this.type) {
                                case 0:
                                case 4:
                                case 8:
                                    a.vertexAttrib1f(this.index, 0);
                                    break;
                                case 1:
                                case 5:
                                case 9:
                                    a.vertexAttrib2f(this.index, 0, 0);
                                    break;
                                case 2:
                                case 6:
                                case 10:
                                    a.vertexAttrib3f(this.index, 0, 0, 0);
                                    break;
                                case 3:
                                case 7:
                                case 11:
                                    a.vertexAttrib4f(this.index, 0, 0, 0, 0);
                                    break;
                                case 12:
                                    a.vertexAttrib2f(this.index + 0, 0, 0);
                                    a.vertexAttrib2f(this.index +
                                        1, 0, 0);
                                    break;
                                case 16:
                                    a.vertexAttrib3f(this.index + 0, 0, 0, 0);
                                    a.vertexAttrib3f(this.index + 1, 0, 0, 0);
                                    a.vertexAttrib3f(this.index + 2, 0, 0, 0);
                                    break;
                                case 20:
                                    a.vertexAttrib4f(this.index + 0, 0, 0, 0, 0), a.vertexAttrib4f(this.index + 1, 0, 0, 0, 0), a.vertexAttrib4f(this.index + 2, 0, 0, 0, 0), a.vertexAttrib4f(this.index + 3, 0, 0, 0, 0)
                            }
                        }
                    }
                },
                __updateGLFromBuffer: function (a, b, c, d, g) {
                    if (!(0 > this.index))
                        if (a = a.gl, this.__isUniform) {
                            if (d >= this.__length) switch (this.type) {
                                case 4:
                                    a.uniform1f(this.index, b[c]);
                                    break;
                                case 5:
                                    a.uniform2f(this.index,
                                        b[c], b[c + 1]);
                                    break;
                                case 6:
                                    a.uniform3f(this.index, b[c], b[c + 1], b[c + 2]);
                                    break;
                                case 7:
                                    a.uniform4f(this.index, b[c], b[c + 1], b[c + 2], b[c + 3]);
                                    break;
                                case 0:
                                case 8:
                                    a.uniform1i(this.index, b[c] | 0);
                                    break;
                                case 1:
                                case 9:
                                    a.uniform2i(this.index, b[c] | 0, b[c + 1] | 0);
                                    break;
                                case 2:
                                case 10:
                                    a.uniform3i(this.index, b[c] | 0, b[c + 1] | 0, b[c + 2] | 0);
                                    break;
                                case 3:
                                case 11:
                                    a.uniform4i(this.index, b[c] | 0, b[c + 1] | 0, b[c + 2] | 0, b[c + 3] | 0);
                                    break;
                                case 12:
                                    this.__uniformMatrix[0] = b[c];
                                    this.__uniformMatrix[1] = b[c + 1];
                                    this.__uniformMatrix[2] = b[c + 2];
                                    this.__uniformMatrix[3] =
                                        b[c + 3];
                                    Tc.uniformMatrix2fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 16:
                                    this.__uniformMatrix[0] = b[c];
                                    this.__uniformMatrix[1] = b[c + 1];
                                    this.__uniformMatrix[2] = b[c + 2];
                                    this.__uniformMatrix[3] = b[c + 3];
                                    this.__uniformMatrix[4] = b[c + 4];
                                    this.__uniformMatrix[5] = b[c + 5];
                                    this.__uniformMatrix[6] = b[c + 6];
                                    this.__uniformMatrix[7] = b[c + 7];
                                    this.__uniformMatrix[8] = b[c + 8];
                                    Tc.uniformMatrix3fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 20:
                                    this.__uniformMatrix[0] = b[c], this.__uniformMatrix[1] = b[c + 1], this.__uniformMatrix[2] =
                                        b[c + 2], this.__uniformMatrix[3] = b[c + 3], this.__uniformMatrix[4] = b[c + 4], this.__uniformMatrix[5] = b[c + 5], this.__uniformMatrix[6] = b[c + 6], this.__uniformMatrix[7] = b[c + 7], this.__uniformMatrix[8] = b[c + 8], this.__uniformMatrix[9] = b[c + 9], this.__uniformMatrix[10] = b[c + 10], this.__uniformMatrix[11] = b[c + 11], this.__uniformMatrix[12] = b[c + 12], this.__uniformMatrix[13] = b[c + 13], this.__uniformMatrix[14] = b[c + 14], this.__uniformMatrix[15] = b[c + 15], Tc.uniformMatrix4fv(a, this.index, !1, this.__uniformMatrix)
                            }
                        } else if (this.__internal ||
                            0 != d && d != this.__length) {
                            b = a.FLOAT;
                            this.__isBool ? b = a.INT : this.__isInt && (b = a.INT);
                            f = 0;
                            for (k = this.__arrayLength; f < k;) h = f++, a.enableVertexAttribArray(this.index + h);
                            if (0 < d)
                                for (f = 0, k = this.__arrayLength; f < k;) h = f++, a.vertexAttribPointer(this.index + h, this.__length, b, !1, 4 * this.__length, 4 * (c + g * this.__length + h * this.__arrayLength))
                        } else {
                            for (var f = 0, k = this.__arrayLength; f < k;) {
                                var h = f++;
                                a.disableVertexAttribArray(this.index + h)
                            }
                            if (0 < d) switch (this.type) {
                                case 0:
                                case 4:
                                case 8:
                                    a.vertexAttrib1f(this.index, b[c]);
                                    break;
                                case 1:
                                case 5:
                                case 9:
                                    a.vertexAttrib2f(this.index, b[c], b[c + 1]);
                                    break;
                                case 2:
                                case 6:
                                case 10:
                                    a.vertexAttrib3f(this.index, b[c], b[c + 1], b[c + 2]);
                                    break;
                                case 3:
                                case 7:
                                case 11:
                                    a.vertexAttrib4f(this.index, b[c], b[c + 1], b[c + 2], b[c + 3]);
                                    break;
                                case 12:
                                    a.vertexAttrib2f(this.index + 0, b[c], b[c + 1]);
                                    a.vertexAttrib2f(this.index + 1, b[c + 2], b[c + 2 + 1]);
                                    break;
                                case 16:
                                    a.vertexAttrib3f(this.index + 0, b[c], b[c + 1], b[c + 2]);
                                    a.vertexAttrib3f(this.index + 1, b[c + 3], b[c + 3 + 1], b[c + 3 + 2]);
                                    a.vertexAttrib3f(this.index + 2, b[c + 6], b[c + 6 + 1], b[c + 6 + 2]);
                                    break;
                                case 20:
                                    a.vertexAttrib4f(this.index + 0, b[c], b[c + 1], b[c + 2], b[c + 3]), a.vertexAttrib4f(this.index + 1, b[c + 4], b[c + 4 + 1], b[c + 4 + 2], b[c + 4 + 3]), a.vertexAttrib4f(this.index + 2, b[c + 8], b[c + 8 + 1], b[c + 8 + 2], b[c + 8 + 3]), a.vertexAttrib4f(this.index + 3, b[c + 12], b[c + 12 + 1], b[c + 12 + 2], b[c + 12 + 3])
                            } else switch (this.type) {
                                case 0:
                                case 4:
                                case 8:
                                    a.vertexAttrib1f(this.index, 0);
                                    break;
                                case 1:
                                case 5:
                                case 9:
                                    a.vertexAttrib2f(this.index, 0, 0);
                                    break;
                                case 2:
                                case 6:
                                case 10:
                                    a.vertexAttrib3f(this.index, 0, 0, 0);
                                    break;
                                case 3:
                                case 7:
                                case 11:
                                    a.vertexAttrib4f(this.index,
                                        0, 0, 0, 0);
                                    break;
                                case 12:
                                    a.vertexAttrib2f(this.index + 0, 0, 0);
                                    a.vertexAttrib2f(this.index + 1, 0, 0);
                                    break;
                                case 16:
                                    a.vertexAttrib3f(this.index + 0, 0, 0, 0);
                                    a.vertexAttrib3f(this.index + 1, 0, 0, 0);
                                    a.vertexAttrib3f(this.index + 2, 0, 0, 0);
                                    break;
                                case 20:
                                    a.vertexAttrib4f(this.index + 0, 0, 0, 0, 0), a.vertexAttrib4f(this.index + 1, 0, 0, 0, 0), a.vertexAttrib4f(this.index + 2, 0, 0, 0, 0), a.vertexAttrib4f(this.index + 3, 0, 0, 0, 0)
                            }
                        }
                },
                set_name: function (a) {
                    this.__internal = T.startsWith(a, "openfl_");
                    return this.name = a
                },
                __class__: Ig,
                __properties__: {
                    set_name: "set_name"
                }
            };
            var xe = function () {
                ea.call(this);
                this.__drawableType = 3
            };
            h["openfl.display.Shape"] = xe;
            xe.__name__ = "openfl.display.Shape";
            xe.__super__ = ea;
            xe.prototype = w(ea.prototype, {
                get_graphics: function () {
                    null == this.__graphics && (this.__graphics = new qd(this));
                    return this.__graphics
                },
                __class__: xe,
                __properties__: w(ea.prototype.__properties__, {
                    get_graphics: "get_graphics"
                })
            });
            var Zf = function (a, b, c, d) {
                xa.call(this);
                this.__drawableType = 6;
                this.enabled = !0;
                this.trackAsMenu = !1;
                this.useHandCursor = !0;
                this.__upState = null != a ? a :
                    new ea;
                this.__overState = b;
                this.__downState = c;
                this.set_hitTestState(null != d ? d : new ea);
                this.addEventListener("mouseDown", m(this, this.__this_onMouseDown));
                this.addEventListener("mouseOut", m(this, this.__this_onMouseOut));
                this.addEventListener("mouseOver", m(this, this.__this_onMouseOver));
                this.addEventListener("mouseUp", m(this, this.__this_onMouseUp));
                this.__tabEnabled = !0;
                this.set___currentState(this.__upState);
                null != Zf.__constructor && (a = Zf.__constructor, Zf.__constructor = null, a(this))
            };
            h["openfl.display.SimpleButton"] =
                Zf;
            Zf.__name__ = "openfl.display.SimpleButton";
            Zf.__constructor = null;
            Zf.__super__ = xa;
            Zf.prototype = w(xa.prototype, {
                __getBounds: function (a, b) {
                    xa.prototype.__getBounds.call(this, a, b);
                    var c = va.__pool.get(),
                        d = this.__currentState.__transform;
                    c.a = d.a * b.a + d.b * b.c;
                    c.b = d.a * b.b + d.b * b.d;
                    c.c = d.c * b.a + d.d * b.c;
                    c.d = d.c * b.b + d.d * b.d;
                    c.tx = d.tx * b.a + d.ty * b.c + b.tx;
                    c.ty = d.tx * b.b + d.ty * b.d + b.ty;
                    this.__currentState.__getBounds(a, c);
                    va.__pool.release(c)
                },
                __getRenderBounds: function (a, b) {
                    if (null != this.__scrollRect) xa.prototype.__getRenderBounds.call(this,
                        a, b);
                    else if (xa.prototype.__getBounds.call(this, a, b), null != this.__currentState) {
                        var c = va.__pool.get(),
                            d = this.__currentState.__transform;
                        c.a = d.a * b.a + d.b * b.c;
                        c.b = d.a * b.b + d.b * b.d;
                        c.c = d.c * b.a + d.d * b.c;
                        c.d = d.c * b.b + d.d * b.d;
                        c.tx = d.tx * b.a + d.ty * b.c + b.tx;
                        c.ty = d.tx * b.b + d.ty * b.d + b.ty;
                        this.__currentState.__getRenderBounds(a, c);
                        va.__pool.release(c)
                    }
                },
                __getCursor: function () {
                    return this.useHandCursor && !this.__ignoreEvent && this.enabled ? "button" : null
                },
                __hitTest: function (a, b, c, d, g, f) {
                    var k = !1;
                    null != this.get_hitTestState() ?
                        this.get_hitTestState().__hitTest(a, b, c, d, g, f) && (null != d && (0 == d.length ? d[0] = f : d[d.length - 1] = f), k = !g || this.mouseEnabled) : null != this.__currentState && (!f.get_visible() || this.__isMask || g && !this.mouseEnabled || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b) ? k = !1 : this.__currentState.__hitTest(a, b, c, d, g, f) && (k = g));
                    if (null != d)
                        for (; 1 < d.length && d[d.length - 1] == d[d.length - 2];) d.pop();
                    return k
                },
                __hitTestMask: function (a, b) {
                    var c = !1;
                    this.__currentState.__hitTestMask(a, b) && (c = !0);
                    return c
                },
                __setStageReference: function (a) {
                    xa.prototype.__setStageReference.call(this,
                        a);
                    null != this.__currentState && this.__currentState.__setStageReference(a);
                    null != this.get_hitTestState() && this.get_hitTestState() != this.__currentState && this.get_hitTestState().__setStageReference(a)
                },
                __setTransformDirty: function () {
                    xa.prototype.__setTransformDirty.call(this);
                    null != this.__currentState && this.__currentState.__setTransformDirty();
                    null != this.get_hitTestState() && this.get_hitTestState() != this.__currentState && this.get_hitTestState().__setTransformDirty()
                },
                __update: function (a, b) {
                    xa.prototype.__update.call(this,
                        a, b);
                    b && (null != this.__currentState && this.__currentState.__update(a, !0), null != this.get_hitTestState() && this.get_hitTestState() != this.__currentState && this.get_hitTestState().__update(a, !0))
                },
                __updateTransforms: function (a) {
                    xa.prototype.__updateTransforms.call(this, a);
                    null != this.__currentState && this.__currentState.__updateTransforms();
                    null != this.get_hitTestState() && this.get_hitTestState() != this.__currentState && this.get_hitTestState().__updateTransforms()
                },
                get_downState: function () {
                    return this.__downState
                },
                get_hitTestState: function () {
                    return this.__hitTestState
                },
                set_hitTestState: function (a) {
                    null != this.__hitTestState && this.__hitTestState != a && this.__hitTestState != this.get_downState() && this.__hitTestState != this.get_upState() && this.__hitTestState != this.get_overState() && (this.__hitTestState.__renderParent = null);
                    null != a && (a.__renderParent = this, a.__renderDirty || (a.__renderDirty = !0, a.__setParentRenderDirty()));
                    return this.__hitTestState = a
                },
                get_overState: function () {
                    return this.__overState
                },
                get_upState: function () {
                    return this.__upState
                },
                set___currentState: function (a) {
                    null != this.__currentState && this.__currentState != this.get_hitTestState() && (this.__currentState.__renderParent = null);
                    null != a && null != a.parent && a.parent.removeChild(a);
                    ea.__supportDOM && null == this.__previousStates && (this.__previousStates = pa.toObjectVector(null));
                    if (a != this.__currentState) {
                        if (ea.__supportDOM) {
                            null != this.__currentState && (this.__currentState.__setStageReference(null), this.__previousStates.push(this.__currentState));
                            var b = this.__previousStates.indexOf(a, 0);
                            if (-1 <
                                b) {
                                var c = this.__previousStates;
                                c.__tempIndex = b;
                                b = 0;
                                for (var d = []; b < d.length;) {
                                    var g = d[b++];
                                    c.insertAt(c.__tempIndex, g);
                                    c.__tempIndex++
                                }
                                c.splice(c.__tempIndex, 1)
                            }
                        }
                        null != a && (a.__renderParent = this, a.__renderDirty || (a.__renderDirty = !0, a.__setParentRenderDirty()));
                        this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty())
                    }
                    return this.__currentState = a
                },
                __this_onMouseDown: function (a) {
                    this.enabled && this.set___currentState(this.get_downState())
                },
                __this_onMouseOut: function (a) {
                    this.__ignoreEvent = !1;
                    this.get_upState() != this.__currentState && this.set___currentState(this.get_upState())
                },
                __this_onMouseOver: function (a) {
                    a.buttonDown && (this.__ignoreEvent = !0);
                    this.get_overState() != this.__currentState && null != this.get_overState() && !this.__ignoreEvent && this.enabled && this.set___currentState(this.get_overState())
                },
                __this_onMouseUp: function (a) {
                    this.__ignoreEvent = !1;
                    this.enabled && null != this.get_overState() ? this.set___currentState(this.get_overState()) : this.set___currentState(this.get_upState())
                },
                __class__: Zf,
                __properties__: w(xa.prototype.__properties__, {
                    set___currentState: "set___currentState",
                    get_upState: "get_upState",
                    get_overState: "get_overState",
                    set_hitTestState: "set_hitTestState",
                    get_hitTestState: "get_hitTestState",
                    get_downState: "get_downState"
                })
            });
            var Kg = function (a, b) {
                this.__oldStageOrientation = 3;
                rb.call(this);
                this.__drawableType = 5;
                this.set_name(null);
                this.__color = -1;
                this.__colorSplit = [255, 255, 255];
                this.__colorString = "#FFFFFF";
                this.__contentsScaleFactor = 1;
                this.__deltaTime = this.__currentTabOrderIndex =
                    0;
                this.__displayState = 2;
                this.__logicalHeight = this.__logicalWidth = this.__lastClickTime = this.__untransformedMouseY = this.__untransformedMouseX = this.__mouseY = this.__mouseX = 0;
                this.__displayMatrix = new va;
                this.__displayRect = new sa;
                this.__renderDirty = !0;
                this.stage3Ds = pa.toObjectVector(null);
                this.stage3Ds.push(new $f(this));
                this.stage3Ds.push(new $f(this));
                this.stage3Ds.push(new $f(this));
                this.stage3Ds.push(new $f(this));
                this.stage = this;
                this.align = 6;
                this.allowsFullScreenInteractive = this.allowsFullScreen = !0;
                this.__quality = 1;
                this.__scaleMode = 2;
                this.showDefaultContextMenu = !0;
                this.softKeyboardRect = new sa;
                this.stageFocusRect = !0;
                this.__macKeyboard = /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent) || /Mac/.test(navigator.platform);
                this.__clearBeforeRender = !0;
                this.__forceRender = !1;
                this.__stack = [];
                this.__rollOutStack = [];
                this.__mouseOutStack = [];
                this.__touchData = new Ec;
                null == db.get_current().__loaderInfo && (db.get_current().__loaderInfo = se.create(null), db.get_current().__loaderInfo.content =
                    db.get_current());
                this.__uncaughtErrorEvents = db.get_current().__loaderInfo.uncaughtErrorEvents;
                this.application = a.application;
                this.window = a;
                this.set_color(b);
                this.__contentsScaleFactor = a.__scale;
                this.__wasFullscreen = a.__fullscreen;
                this.__resize();
                null == db.get_current().stage && this.stage.addChild(db.get_current())
            };
            h["openfl.display.Stage"] = Kg;
            Kg.__name__ = "openfl.display.Stage";
            Kg.__interfaces__ = [kb];
            Kg.__super__ = rb;
            Kg.prototype = w(rb.prototype, {
                localToGlobal: function (a) {
                    return a.clone()
                },
                __broadcastEvent: function (a) {
                    if (Object.prototype.hasOwnProperty.call(ea.__broadcastEvents.h,
                        a.type))
                        for (var b = ea.__broadcastEvents.h[a.type], c = 0; c < b.length;) {
                            var d = b[c];
                            ++c;
                            if (d.stage == this || null == d.stage)
                                if (this.__uncaughtErrorEvents.__enabled) try {
                                    d.__dispatch(a)
                                } catch (g) {
                                    Ha.lastError = g, d = aa.caught(g).unwrap(), this.__handleError(d)
                                } else d.__dispatch(a)
                        }
                },
                __createRenderer: function () {
                    var a = this.window.__width * this.window.__scale | 0,
                        b = this.window.__height * this.window.__scale | 0;
                    switch (this.window.context.type) {
                        case "canvas":
                            this.__renderer = new Ue(this.window.context.canvas2D);
                            break;
                        case "dom":
                            this.__renderer =
                                new rh(this.window.context.dom);
                            break;
                        case "opengl":
                        case "opengles":
                        case "webgl":
                            this.context3D = new Ab(this), this.context3D.configureBackBuffer(this.stageWidth, this.stageHeight, 0, !0, !0, !0), this.context3D.present(), this.__renderer = new Ma(this.context3D)
                    }
                    if (null != this.__renderer) {
                        var c = this.get_quality();
                        this.__renderer.__allowSmoothing = 2 != c;
                        this.__renderer.__pixelRatio = this.window.__scale;
                        this.__renderer.__worldTransform = this.__displayMatrix;
                        this.__renderer.__stage = this;
                        this.__renderer.__resize(a,
                            b)
                    }
                },
                __dispatchEvent: function (a) {
                    if (this.__uncaughtErrorEvents.__enabled) try {
                        var b = rb.prototype.__dispatchEvent.call(this, a)
                    } catch (c) {
                        Ha.lastError = c, a = aa.caught(c).unwrap(), this.__handleError(a), b = !1
                    } else b = rb.prototype.__dispatchEvent.call(this, a);
                    return b
                },
                __dispatchPendingMouseEvent: function () {
                    if (this.__pendingMouseEvent) this.__onMouse("mouseMove", this.__pendingMouseX, this.__pendingMouseY, 0), this.__pendingMouseEvent = !1;
                    else if (null != this.__mouseOverTarget)
                        if (!this.__mouseOverTarget.__transformDirty &&
                            null != this.__mouseOverTarget.stage && this.__mouseOverTarget.get_visible() && this.__mouseOverTarget.mouseEnabled)
                            for (var a = this.__mouseOverTarget.parent; null != a;) {
                                if (a.__transformDirty || null == a.stage || !a.get_visible() || !a.mouseChildren) {
                                    this.__onMouse(null, this.__untransformedMouseX, this.__untransformedMouseY, 0);
                                    break
                                }
                                a = a.parent
                            } else this.__onMouse(null, this.__untransformedMouseX, this.__untransformedMouseY, 0)
                },
                __dispatchStack: function (a, b) {
                    if (this.__uncaughtErrorEvents.__enabled) try {
                        var c = b.length;
                        if (0 ==
                            c) {
                            a.eventPhase = 2;
                            var d = a.target;
                            d.__dispatch(a)
                        } else {
                            a.eventPhase = 1;
                            a.target = b[b.length - 1];
                            for (var g = 0, f = c - 1; g < f;) {
                                var k = g++;
                                b[k].__dispatch(a);
                                if (a.__isCanceled) return
                            }
                            a.eventPhase = 2;
                            d = a.target;
                            d.__dispatch(a);
                            if (!a.__isCanceled && a.bubbles)
                                for (a.eventPhase = 3, k = c - 2; 0 <= k;) {
                                    b[k].__dispatch(a);
                                    if (a.__isCanceled) break;
                                    --k
                                }
                        }
                    } catch (q) {
                        Ha.lastError = q, a = aa.caught(q).unwrap(), this.__handleError(a)
                    } else if (c = b.length, 0 == c) a.eventPhase = 2, d = a.target, d.__dispatch(a);
                    else {
                        a.eventPhase = 1;
                        a.target = b[b.length - 1];
                        g = 0;
                        for (f = c - 1; g < f;)
                            if (k = g++, b[k].__dispatch(a), a.__isCanceled) return;
                        a.eventPhase = 2;
                        d = a.target;
                        d.__dispatch(a);
                        if (!a.__isCanceled && a.bubbles)
                            for (a.eventPhase = 3, k = c - 2; 0 <= k;) {
                                b[k].__dispatch(a);
                                if (a.__isCanceled) break;
                                --k
                            }
                    }
                },
                __dispatchTarget: function (a, b) {
                    if (this.__uncaughtErrorEvents.__enabled) try {
                        return a.__dispatchEvent(b)
                    } catch (c) {
                        return Ha.lastError = c, a = aa.caught(c).unwrap(), this.__handleError(a), !1
                    } else return a.__dispatchEvent(b)
                },
                __drag: function (a) {
                    var b = this.__dragObject.parent;
                    if (null != b) {
                        b =
                            b.__getWorldTransform();
                        var c = b.a * b.d - b.b * b.c;
                        if (0 == c) a.x = -b.tx, a.y = -b.ty;
                        else {
                            var d = 1 / c * (b.c * (b.ty - a.y) + b.d * (a.x - b.tx));
                            a.y = 1 / c * (b.a * (a.y - b.ty) + b.b * (b.tx - a.x));
                            a.x = d
                        }
                    }
                    b = a.x + this.__dragOffsetX;
                    a = a.y + this.__dragOffsetY;
                    null != this.__dragBounds && (b < this.__dragBounds.x ? b = this.__dragBounds.x : b > this.__dragBounds.get_right() && (b = this.__dragBounds.get_right()), a < this.__dragBounds.y ? a = this.__dragBounds.y : a > this.__dragBounds.get_bottom() && (a = this.__dragBounds.get_bottom()));
                    this.__dragObject.set_x(b);
                    this.__dragObject.set_y(a)
                },
                __getInteractive: function (a) {
                    null != a && a.push(this);
                    return !0
                },
                __globalToLocal: function (a, b) {
                    a != b && b.copyFrom(a);
                    return b
                },
                __handleError: function (a) {
                    var b = new fg("uncaughtError", !0, !0, a);
                    db.get_current().__loaderInfo.uncaughtErrorEvents.dispatchEvent(b);
                    if (!b.__preventDefault) {
                        b = kf.toString(kf.exceptionStack());
                        console.log(b);
                        b = E.string(a);
                        console.log(b);
                        try {
                            if (null != a && Object.prototype.hasOwnProperty.call(a, "stack") && null != a.stack && "" != a.stack) console.log(a.stack), a.stack = a.stack;
                            else {
                                var c = kf.toString(kf.callStack());
                                console.log(c)
                            }
                        } catch (d) {
                            Ha.lastError = d
                        }
                        throw a;
                    }
                },
                __onKey: function (a, b, c) {
                    this.__dispatchPendingMouseEvent();
                    Ib.__altKey = gb.get_altKey(c);
                    Ib.__commandKey = gb.get_metaKey(c);
                    Ib.__controlKey = gb.get_ctrlKey(c);
                    Ib.__ctrlKey = this.__macKeyboard ? gb.get_ctrlKey(c) || gb.get_metaKey(c) : gb.get_ctrlKey(c);
                    Ib.__shiftKey = gb.get_shiftKey(c);
                    var d = [];
                    null == this.__focus ? this.__getInteractive(d) : this.__focus.__getInteractive(d);
                    if (0 < d.length) {
                        switch (b) {
                            case 1073741908:
                            case 1073741909:
                            case 1073741910:
                            case 1073741911:
                            case 1073741912:
                            case 1073741913:
                            case 1073741914:
                            case 1073741915:
                            case 1073741916:
                            case 1073741917:
                            case 1073741918:
                            case 1073741919:
                            case 1073741920:
                            case 1073741921:
                            case 1073741922:
                            case 1073741923:
                            case 1073742044:
                                var g =
                                    3;
                                break;
                            case 1073742048:
                            case 1073742049:
                            case 1073742050:
                            case 1073742051:
                                g = 1;
                                break;
                            case 1073742052:
                            case 1073742053:
                            case 1073742054:
                            case 1073742055:
                                g = 2;
                                break;
                            default:
                                g = 0
                        }
                        switch (b) {
                            case 8:
                                b = 8;
                                break;
                            case 9:
                                b = 9;
                                break;
                            case 13:
                                b = 13;
                                break;
                            case 27:
                                b = 27;
                                break;
                            case 32:
                                b = 32;
                                break;
                            case 33:
                                b = 49;
                                break;
                            case 34:
                                b = 222;
                                break;
                            case 35:
                                b = 51;
                                break;
                            case 36:
                                b = 52;
                                break;
                            case 37:
                                b = 53;
                                break;
                            case 38:
                                b = 55;
                                break;
                            case 39:
                                b = 222;
                                break;
                            case 40:
                                b = 57;
                                break;
                            case 41:
                                b = 48;
                                break;
                            case 42:
                                b = 56;
                                break;
                            case 44:
                                b = 188;
                                break;
                            case 45:
                                b = 189;
                                break;
                            case 46:
                                b = 190;
                                break;
                            case 47:
                                b = 191;
                                break;
                            case 48:
                                b = 48;
                                break;
                            case 49:
                                b = 49;
                                break;
                            case 50:
                                b = 50;
                                break;
                            case 51:
                                b = 51;
                                break;
                            case 52:
                                b = 52;
                                break;
                            case 53:
                                b = 53;
                                break;
                            case 54:
                                b = 54;
                                break;
                            case 55:
                                b = 55;
                                break;
                            case 56:
                                b = 56;
                                break;
                            case 57:
                                b = 57;
                                break;
                            case 58:
                                b = 186;
                                break;
                            case 59:
                                b = 186;
                                break;
                            case 60:
                                b = 60;
                                break;
                            case 61:
                                b = 187;
                                break;
                            case 62:
                                b = 190;
                                break;
                            case 63:
                                b = 191;
                                break;
                            case 64:
                                b = 50;
                                break;
                            case 91:
                                b = 219;
                                break;
                            case 92:
                                b = 220;
                                break;
                            case 93:
                                b = 221;
                                break;
                            case 94:
                                b = 54;
                                break;
                            case 95:
                                b = 189;
                                break;
                            case 96:
                                b = 192;
                                break;
                            case 97:
                                b = 65;
                                break;
                            case 98:
                                b = 66;
                                break;
                            case 99:
                                b = 67;
                                break;
                            case 100:
                                b = 68;
                                break;
                            case 101:
                                b = 69;
                                break;
                            case 102:
                                b = 70;
                                break;
                            case 103:
                                b = 71;
                                break;
                            case 104:
                                b = 72;
                                break;
                            case 105:
                                b = 73;
                                break;
                            case 106:
                                b = 74;
                                break;
                            case 107:
                                b = 75;
                                break;
                            case 108:
                                b = 76;
                                break;
                            case 109:
                                b = 77;
                                break;
                            case 110:
                                b = 78;
                                break;
                            case 111:
                                b = 79;
                                break;
                            case 112:
                                b = 80;
                                break;
                            case 113:
                                b = 81;
                                break;
                            case 114:
                                b = 82;
                                break;
                            case 115:
                                b = 83;
                                break;
                            case 116:
                                b = 84;
                                break;
                            case 117:
                                b = 85;
                                break;
                            case 118:
                                b = 86;
                                break;
                            case 119:
                                b = 87;
                                break;
                            case 120:
                                b = 88;
                                break;
                            case 121:
                                b = 89;
                                break;
                            case 122:
                                b = 90;
                                break;
                            case 127:
                                b =
                                    46;
                                break;
                            case 1073741881:
                                b = 20;
                                break;
                            case 1073741882:
                                b = 112;
                                break;
                            case 1073741883:
                                b = 113;
                                break;
                            case 1073741884:
                                b = 114;
                                break;
                            case 1073741885:
                                b = 115;
                                break;
                            case 1073741886:
                                b = 116;
                                break;
                            case 1073741887:
                                b = 117;
                                break;
                            case 1073741888:
                                b = 118;
                                break;
                            case 1073741889:
                                b = 119;
                                break;
                            case 1073741890:
                                b = 120;
                                break;
                            case 1073741891:
                                b = 121;
                                break;
                            case 1073741892:
                                b = 122;
                                break;
                            case 1073741893:
                                b = 123;
                                break;
                            case 1073741894:
                                b = 301;
                                break;
                            case 1073741895:
                                b = 145;
                                break;
                            case 1073741896:
                                b = 19;
                                break;
                            case 1073741897:
                                b = 45;
                                break;
                            case 1073741898:
                                b = 36;
                                break;
                            case 1073741899:
                                b = 33;
                                break;
                            case 1073741901:
                                b = 35;
                                break;
                            case 1073741902:
                                b = 34;
                                break;
                            case 1073741903:
                                b = 39;
                                break;
                            case 1073741904:
                                b = 37;
                                break;
                            case 1073741905:
                                b = 40;
                                break;
                            case 1073741906:
                                b = 38;
                                break;
                            case 1073741907:
                                b = 144;
                                break;
                            case 1073741908:
                                b = 111;
                                break;
                            case 1073741909:
                                b = 106;
                                break;
                            case 1073741910:
                                b = 109;
                                break;
                            case 1073741911:
                                b = 107;
                                break;
                            case 1073741912:
                                b = 13;
                                break;
                            case 1073741913:
                                b = 97;
                                break;
                            case 1073741914:
                                b = 98;
                                break;
                            case 1073741915:
                                b = 99;
                                break;
                            case 1073741916:
                                b = 100;
                                break;
                            case 1073741917:
                                b = 101;
                                break;
                            case 1073741918:
                                b =
                                    102;
                                break;
                            case 1073741919:
                                b = 103;
                                break;
                            case 1073741920:
                                b = 104;
                                break;
                            case 1073741921:
                                b = 105;
                                break;
                            case 1073741922:
                                b = 96;
                                break;
                            case 1073741923:
                                b = 110;
                                break;
                            case 1073741925:
                                b = 302;
                                break;
                            case 1073741928:
                                b = 124;
                                break;
                            case 1073741929:
                                b = 125;
                                break;
                            case 1073741930:
                                b = 126;
                                break;
                            case 1073741982:
                                b = 13;
                                break;
                            case 1073742044:
                                b = 110;
                                break;
                            case 1073742048:
                                b = 17;
                                break;
                            case 1073742049:
                                b = 16;
                                break;
                            case 1073742050:
                                b = 18;
                                break;
                            case 1073742051:
                                b = 15;
                                break;
                            case 1073742052:
                                b = 17;
                                break;
                            case 1073742053:
                                b = 16;
                                break;
                            case 1073742054:
                                b = 18;
                                break;
                            case 1073742055:
                                b = 15
                        }
                        var f = im.__getCharCode(b, gb.get_shiftKey(c), gb.get_capsLock(c));
                        if ("keyUp" == a && (32 == b || 13 == b) && this.__focus instanceof X) {
                            var k = Ua.__cast(this.__focus, X);
                            if (k.get_buttonMode() && 1 == k.focusRect) {
                                var h = F.__pool.get(),
                                    l = F.__pool.get();
                                l.x = this.__mouseX;
                                l.y = this.__mouseY;
                                k = Ib.__create("click", 0, 0, this.__mouseX, this.__mouseY, k.__globalToLocal(l, h), k);
                                this.__dispatchStack(k, d);
                                k.__updateAfterEventFlag && this.__renderAfterEvent();
                                F.__pool.release(l);
                                F.__pool.release(h)
                            }
                        }
                        g = new Tj(a, !0,
                            !0, f, b, g, this.__macKeyboard ? gb.get_ctrlKey(c) || gb.get_metaKey(c) : gb.get_ctrlKey(c), gb.get_altKey(c), gb.get_shiftKey(c), gb.get_ctrlKey(c), gb.get_metaKey(c));
                        d.reverse();
                        this.__dispatchStack(g, d);
                        if (g.__preventDefault) "keyDown" == a ? this.window.onKeyDown.cancel() : this.window.onKeyUp.cancel();
                        else if ("keyDown" == a && 9 == b) {
                            d = [];
                            this.__tabTest(d);
                            f = -1;
                            a = null;
                            b = gb.get_shiftKey(c) ? -1 : 1;
                            if (1 < d.length) {
                                Rc.sort(d, function (a, b) {
                                    return a.get_tabIndex() - b.get_tabIndex()
                                });
                                if (-1 != d[d.length - 1].get_tabIndex())
                                    for (l =
                                             0; l < d.length;) {
                                        if (-1 < d[l].get_tabIndex()) {
                                            0 < l && d.splice(0, l);
                                            break
                                        }
                                        ++l
                                    }
                                if (null != this.get_focus()) {
                                    l = this.get_focus();
                                    for (h = d.indexOf(l); -1 == h && null != l;) {
                                        f = l.parent;
                                        if (null != f && f.get_tabChildren()) {
                                            l = f.getChildIndex(l);
                                            if (-1 == l) {
                                                l = f;
                                                continue
                                            }
                                            for (l += b; gb.get_shiftKey(c) ? 0 <= l : l < f.get_numChildren();) {
                                                k = f.getChildAt(l);
                                                if (k instanceof xa && (h = Ua.__cast(k, xa), h = d.indexOf(h), -1 != h)) {
                                                    b = 0;
                                                    break
                                                }
                                                l += b
                                            }
                                        } else gb.get_shiftKey(c) && (h = d.indexOf(f), -1 != h && (b = 0));
                                        l = f
                                    }
                                    f = 0 > h ? 0 : h + b
                                } else f = this.__currentTabOrderIndex
                            } else 1 ==
                            d.length && (a = d[0], this.get_focus() == a && (a = null));
                            h = 0 <= f && f < d.length;
                            1 == d.length || 0 == d.length && null != this.get_focus() ? f = 0 : 1 < d.length && (0 > f && (f += d.length), f %= d.length, a = d[f], a == this.get_focus() && (f += b, 0 > f && (f += d.length), f %= d.length, a = d[f]));
                            b = null;
                            null != this.get_focus() && (b = new ag("keyFocusChange", !0, !0, a, gb.get_shiftKey(c), 0), d = [], this.get_focus().__getInteractive(d), d.reverse(), this.__dispatchStack(b, d), b.isDefaultPrevented() && this.window.onKeyDown.cancel());
                            null != b && b.isDefaultPrevented() || (this.__currentTabOrderIndex =
                                f, null != a && this.set_focus(a), h && this.window.onKeyDown.cancel())
                        } else if ("keyDown" == a && null != this.get_focus() && !(this.get_focus() instanceof Yc) && (this.__macKeyboard ? gb.get_ctrlKey(c) || gb.get_metaKey(c) : gb.get_ctrlKey(c)) && !gb.get_altKey(c) && !gb.get_shiftKey(c)) switch (b) {
                            case 65:
                                c = new ua("selectAll", !0, !0);
                                this.get_focus().dispatchEvent(c);
                                break;
                            case 67:
                                c = new ua("copy", !0, !0);
                                this.get_focus().dispatchEvent(c);
                                break;
                            case 86:
                                c = new ua("paste", !0, !0);
                                this.get_focus().dispatchEvent(c);
                                break;
                            case 88:
                                c = new ua("cut",
                                    !0, !0), this.get_focus().dispatchEvent(c)
                        }
                        g.__updateAfterEventFlag && this.__renderAfterEvent()
                    }
                },
                __onLimeCreateWindow: function (a) {
                    if (this.window == a) {
                        var b = this;
                        a.onActivate.add(function () {
                            b.__onLimeWindowActivate(a)
                        });
                        var c = this;
                        a.onClose.add(function () {
                            c.__onLimeWindowClose(a)
                        }, !1, -9E3);
                        var d = this;
                        a.onDeactivate.add(function () {
                            d.__onLimeWindowDeactivate(a)
                        });
                        var g = this;
                        var f = function (b) {
                            g.__onLimeWindowDropFile(a, b)
                        };
                        a.onDropFile.add(f);
                        var k = this;
                        a.onEnter.add(function () {
                            k.__onLimeWindowEnter(a)
                        });
                        var h = this;
                        a.onExpose.add(function () {
                            h.__onLimeWindowExpose(a)
                        });
                        var l = this;
                        a.onFocusIn.add(function () {
                            l.__onLimeWindowFocusIn(a)
                        });
                        var n = this;
                        a.onFocusOut.add(function () {
                            n.__onLimeWindowFocusOut(a)
                        });
                        var r = this;
                        a.onFullscreen.add(function () {
                            r.__onLimeWindowFullscreen(a)
                        });
                        var t = this;
                        f = function (b, c) {
                            t.__onLimeKeyDown(a, b, c)
                        };
                        a.onKeyDown.add(f);
                        var y = this;
                        f = function (b, c) {
                            y.__onLimeKeyUp(a, b, c)
                        };
                        a.onKeyUp.add(f);
                        var p = this;
                        a.onLeave.add(function () {
                            p.__onLimeWindowLeave(a)
                        });
                        var u = this;
                        a.onMinimize.add(function () {
                            u.__onLimeWindowMinimize(a)
                        });
                        var z = this;
                        f = function (b, c, d) {
                            z.__onLimeMouseDown(a, b, c, d)
                        };
                        a.onMouseDown.add(f);
                        var x = this;
                        f = function (b, c) {
                            x.__onLimeMouseMove(a, b, c)
                        };
                        a.onMouseMove.add(f);
                        var A = this;
                        f = function (b, c) {
                            A.__onLimeMouseMoveRelative(a, b, c)
                        };
                        a.onMouseMoveRelative.add(f);
                        var Q = this;
                        f = function (b, c, d) {
                            Q.__onLimeMouseUp(a, b, c, d)
                        };
                        a.onMouseUp.add(f);
                        var O = this;
                        f = function (b, c, d) {
                            O.__onLimeMouseWheel(a, b, c, d)
                        };
                        a.onMouseWheel.add(f);
                        var v = this;
                        f = function (b, c) {
                            v.__onLimeWindowMove(a, b, c)
                        };
                        a.onMove.add(f);
                        a.onRender.add(m(this, this.__onLimeRender));
                        a.onRenderContextLost.add(m(this, this.__onLimeRenderContextLost));
                        a.onRenderContextRestored.add(m(this, this.__onLimeRenderContextRestored));
                        var w = this;
                        f = function (b, c) {
                            w.__onLimeWindowResize(a, b, c)
                        };
                        a.onResize.add(f);
                        var N = this;
                        a.onRestore.add(function () {
                            N.__onLimeWindowRestore(a)
                        });
                        var F = this;
                        f = function (b, c, d) {
                            F.__onLimeTextEdit(a, b, c, d)
                        };
                        a.onTextEdit.add(f);
                        var D = this;
                        f = function (b) {
                            D.__onLimeTextInput(a, b)
                        };
                        a.onTextInput.add(f);
                        this.__onLimeWindowCreate(a)
                    }
                },
                __onLimeGamepadAxisMove: function (a, b,
                                                   c) {
                    if (this.__uncaughtErrorEvents.__enabled) try {
                        eb.__onGamepadAxisMove(a, b, c)
                    } catch (d) {
                        Ha.lastError = d, a = aa.caught(d).unwrap(), this.__handleError(a)
                    } else eb.__onGamepadAxisMove(a, b, c)
                },
                __onLimeGamepadButtonDown: function (a, b) {
                    if (this.__uncaughtErrorEvents.__enabled) try {
                        eb.__onGamepadButtonDown(a, b)
                    } catch (c) {
                        Ha.lastError = c, a = aa.caught(c).unwrap(), this.__handleError(a)
                    } else eb.__onGamepadButtonDown(a, b)
                },
                __onLimeGamepadButtonUp: function (a, b) {
                    if (this.__uncaughtErrorEvents.__enabled) try {
                        eb.__onGamepadButtonUp(a,
                            b)
                    } catch (c) {
                        Ha.lastError = c, a = aa.caught(c).unwrap(), this.__handleError(a)
                    } else eb.__onGamepadButtonUp(a, b)
                },
                __onLimeGamepadConnect: function (a) {
                    if (this.__uncaughtErrorEvents.__enabled) try {
                        eb.__onGamepadConnect(a)
                    } catch (k) {
                        Ha.lastError = k;
                        var b = aa.caught(k).unwrap();
                        this.__handleError(b)
                    } else eb.__onGamepadConnect(a);
                    var c = this;
                    b = function (b, d) {
                        c.__onLimeGamepadAxisMove(a, b, d)
                    };
                    a.onAxisMove.add(b);
                    var d = this;
                    b = function (b) {
                        d.__onLimeGamepadButtonDown(a, b)
                    };
                    a.onButtonDown.add(b);
                    var g = this;
                    b = function (b) {
                        g.__onLimeGamepadButtonUp(a,
                            b)
                    };
                    a.onButtonUp.add(b);
                    var f = this;
                    a.onDisconnect.add(function () {
                        f.__onLimeGamepadDisconnect(a)
                    })
                },
                __onLimeGamepadDisconnect: function (a) {
                    if (this.__uncaughtErrorEvents.__enabled) try {
                        eb.__onGamepadDisconnect(a)
                    } catch (b) {
                        Ha.lastError = b, a = aa.caught(b).unwrap(), this.__handleError(a)
                    } else eb.__onGamepadDisconnect(a)
                },
                __onLimeKeyDown: function (a, b, c) {
                    null != this.window && this.window == a && this.__onKey("keyDown", b, c)
                },
                __onLimeKeyUp: function (a, b, c) {
                    null != this.window && this.window == a && this.__onKey("keyUp", b, c)
                },
                __onLimeModuleExit: function (a) {
                    null != this.window && (a = new ua("deactivate"), this.__broadcastEvent(a))
                },
                __onLimeMouseDown: function (a, b, c, d) {
                    if (null != this.window && this.window == a) {
                        this.__dispatchPendingMouseEvent();
                        switch (d) {
                            case 1:
                                var g = "middleMouseDown";
                                break;
                            case 2:
                                g = "rightMouseDown";
                                break;
                            default:
                                g = "mouseDown"
                        }
                        this.__onMouse(g, b * a.__scale | 0, c * a.__scale | 0, d);
                        this.showDefaultContextMenu || 2 != d || a.onMouseDown.cancel()
                    }
                },
                __onLimeMouseMove: function (a, b, c) {
                    null != this.window && this.window == a && (this.__pendingMouseEvent = !0, this.__pendingMouseX = b * a.__scale | 0, this.__pendingMouseY = c * a.__scale | 0)
                },
                __onLimeMouseMoveRelative: function (a, b, c) {
                },
                __onLimeMouseUp: function (a, b, c, d) {
                    if (null != this.window && this.window == a) {
                        this.__dispatchPendingMouseEvent();
                        switch (d) {
                            case 1:
                                var g = "middleMouseUp";
                                break;
                            case 2:
                                g = "rightMouseUp";
                                break;
                            default:
                                g = "mouseUp"
                        }
                        this.__onMouse(g, b * a.__scale | 0, c * a.__scale | 0, d);
                        this.showDefaultContextMenu || 2 != d || a.onMouseUp.cancel()
                    }
                },
                __onLimeMouseWheel: function (a, b, c, d) {
                    null != this.window && this.window == a && (this.__dispatchPendingMouseEvent(),
                        d == nf.PIXELS ? this.__onMouseWheel(b * a.__scale | 0, c * a.__scale | 0, d) : this.__onMouseWheel(b | 0, c | 0, d))
                },
                __onLimeDisplayOrientationChange: function (a, b) {
                    switch (b) {
                        case 1:
                            a = 1;
                            break;
                        case 2:
                            a = 2;
                            break;
                        case 3:
                            a = 0;
                            break;
                        case 4:
                            a = 4;
                            break;
                        default:
                            a = 3
                    }
                    b = this.__oldStageOrientation;
                    this.__oldStageOrientation = a;
                    this.dispatchEvent(new Uj("orientationChange", !0, !1, b, a))
                },
                __renderAfterEvent: function () {
                    this.__render(this.window.context)
                },
                __render: function (a) {
                    a = !1;
                    var b = null != this.__renderer && (this.__renderDirty || this.__forceRender);
                    if (this.__invalidated && b) {
                        this.__invalidated = !1;
                        var c = new ua("render");
                        this.__broadcastEvent(c)
                    }
                    this.__update(!1, !0);
                    if (null != this.__renderer) {
                        if (null != this.context3D) {
                            for (c = this.stage3Ds.iterator(); c.hasNext();) {
                                var d = c.next();
                                this.context3D.__renderStage3D(d)
                            }
                            this.context3D.__present && (b = !0)
                        }
                        b ? (null == this.context3D && this.__renderer.__clear(), this.__renderer.__render(this)) : null == this.context3D && (a = !0);
                        null != this.context3D && (this.context3D.__present ? (this.__renderer.__cleared || this.__renderer.__clear(),
                            this.context3D.__present = !1, this.context3D.__cleared = !1) : a = !0);
                        this.__renderer.__cleared = !1
                    }
                    return a
                },
                __onLimeRender: function (a) {
                    this.__rendering || (this.__rendering = !0, this.__broadcastEvent(new ua("enterFrame")), this.__broadcastEvent(new ua("frameConstructed")), this.__broadcastEvent(new ua("exitFrame")), this.__renderable = !0, this.__enterFrame(this.__deltaTime), this.__deltaTime = 0, this.__render(a) && this.window.onRender.cancel(), this.__rendering = !1)
                },
                __onLimeRenderContextLost: function () {
                    this.context3D =
                        this.__renderer = null;
                    for (var a = this.stage3Ds.iterator(); a.hasNext();) a.next().__lostContext()
                },
                __onLimeRenderContextRestored: function (a) {
                    this.__createRenderer();
                    for (a = this.stage3Ds.iterator(); a.hasNext();) a.next().__restoreContext()
                },
                __onLimeTextEdit: function (a, b, c, d) {
                },
                __onLimeTextInput: function (a, b) {
                    if (null != this.window && this.window == a) {
                        var c = [];
                        null == this.__focus ? this.__getInteractive(c) : this.__focus.__getInteractive(c);
                        b = new Fe("textInput", !0, !0, b);
                        0 < c.length ? (c.reverse(), this.__dispatchStack(b,
                            c)) : this.__dispatchEvent(b);
                        b.isDefaultPrevented() && a.onTextInput.cancel()
                    }
                },
                __onLimeTouchCancel: function (a) {
                    var b = this.__primaryTouch == a;
                    b && (this.__primaryTouch = null);
                    this.__onTouch("touchEnd", a, b)
                },
                __onLimeTouchMove: function (a) {
                    this.__onTouch("touchMove", a, this.__primaryTouch == a)
                },
                __onLimeTouchEnd: function (a) {
                    var b = this.__primaryTouch == a;
                    b && (this.__primaryTouch = null);
                    this.__onTouch("touchEnd", a, b)
                },
                __onLimeTouchStart: function (a) {
                    null == this.__primaryTouch && (this.__primaryTouch = a);
                    this.__onTouch("touchBegin",
                        a, this.__primaryTouch == a)
                },
                __onLimeUpdate: function (a) {
                    this.__deltaTime = a;
                    this.__dispatchPendingMouseEvent()
                },
                __onLimeWindowActivate: function (a) {
                },
                __onLimeWindowClose: function (a) {
                    this.window == a && (this.window = null);
                    this.__primaryTouch = null;
                    a = new ua("deactivate");
                    this.__broadcastEvent(a)
                },
                __onLimeWindowCreate: function (a) {
                    if (null != this.window && this.window == a && (null != a.context && this.__createRenderer(), null != a.get_display())) switch (a.get_display().orientation) {
                        case 1:
                            this.__oldStageOrientation = 1;
                            break;
                        case 2:
                            this.__oldStageOrientation = 2;
                            break;
                        case 3:
                            this.__oldStageOrientation = 0;
                            break;
                        case 4:
                            this.__oldStageOrientation = 4;
                            break;
                        default:
                            this.__oldStageOrientation = 3
                    }
                },
                __onLimeWindowDeactivate: function (a) {
                },
                __onLimeWindowDropFile: function (a, b) {
                },
                __onLimeWindowEnter: function (a) {
                },
                __onLimeWindowExpose: function (a) {
                    null != this.window && this.window == a && (this.__renderDirty = !0)
                },
                __onLimeWindowFocusIn: function (a) {
                    null != this.window && this.window == a && (this.__renderDirty = !0, a = new ua("activate"), this.__broadcastEvent(a),
                        this.set_focus(this.__cacheFocus))
                },
                __onLimeWindowFocusOut: function (a) {
                    null != this.window && this.window == a && (this.__primaryTouch = null, a = new ua("deactivate"), this.__broadcastEvent(a), a = this.get_focus(), this.set_focus(null), this.__cacheFocus = a, Ib.__altKey = !1, Ib.__commandKey = !1, Ib.__ctrlKey = !1, Ib.__shiftKey = !1)
                },
                __onLimeWindowFullscreen: function (a) {
                    null != this.window && this.window == a && (this.__resize(), this.__wasFullscreen || (this.__wasFullscreen = !0, 2 == this.__displayState && (this.__displayState = 1), this.__dispatchEvent(new af("fullScreen",
                        !1, !1, !0, !0))))
                },
                __onLimeWindowLeave: function (a) {
                    null == this.window || this.window != a || Ib.__buttonDown || (this.__dispatchPendingMouseEvent(), a = new ua("mouseLeave"), this.__dispatchEvent(a))
                },
                __onLimeWindowMinimize: function (a) {
                },
                __onLimeWindowMove: function (a, b, c) {
                },
                __onLimeWindowResize: function (a, b, c) {
                    null != this.window && this.window == a && (this.__resize(), this.__wasFullscreen && !a.__fullscreen && (this.__wasFullscreen = !1, this.__displayState = 2, this.__dispatchEvent(new af("fullScreen", !1, !1, !1, !0))))
                },
                __onLimeWindowRestore: function (a) {
                    null !=
                    this.window && this.window == a && this.__wasFullscreen && !a.__fullscreen && (this.__wasFullscreen = !1, this.__displayState = 2, this.__dispatchEvent(new af("fullScreen", !1, !1, !1, !0)))
                },
                __onMouse: function (a, b, c, d) {
                    if (!(2 < d)) {
                        this.__untransformedMouseX = b;
                        this.__untransformedMouseY = c;
                        var g = F.__pool.get();
                        g.setTo(b, c);
                        b = this.__displayMatrix;
                        c = b.a * b.d - b.b * b.c;
                        if (0 == c) g.x = -b.tx, g.y = -b.ty;
                        else {
                            var f = 1 / c * (b.c * (b.ty - g.y) + b.d * (g.x - b.tx));
                            g.y = 1 / c * (b.a * (g.y - b.ty) + b.b * (b.tx - g.x));
                            g.x = f
                        }
                        this.__mouseX = g.x;
                        this.__mouseY = g.y;
                        b = [];
                        this.__hitTest(this.__mouseX, this.__mouseY, !0, b, !0, this) ? f = b[b.length - 1] : (f = this, b = [this]);
                        null == f && (f = this);
                        var k = null,
                            h = !1;
                        if (null != a) switch (a) {
                            case "middleMouseDown":
                                this.__mouseDownMiddle = f;
                                h = !0;
                                break;
                            case "middleMouseUp":
                                this.__mouseDownMiddle == f && (k = "middleClick");
                                this.__mouseDownMiddle = null;
                                h = !0;
                                break;
                            case "mouseDown":
                                null != this.get_focus() ? this.get_focus() != f && (c = new ag("mouseFocusChange", !0, !0, f, !1, 0), this.get_focus().dispatchEvent(c), c.isDefaultPrevented() || (f.__allowMouseFocus() ? this.set_focus(f) :
                                    this.set_focus(null))) : f.__allowMouseFocus() ? this.set_focus(f) : this.set_focus(null);
                                this.__mouseDownLeft = f;
                                this.__lastClickTarget != f && (this.__lastClickTarget = null, this.__lastClickTime = 0);
                                h = Ib.__buttonDown = !0;
                                break;
                            case "mouseUp":
                                null != this.__mouseDownLeft && (Ib.__buttonDown = !1, this.__mouseDownLeft == f ? k = "click" : (h = Ib.__create("releaseOutside", 1, 0, this.__mouseX, this.__mouseY, new F(this.__mouseX, this.__mouseY), this), this.__mouseDownLeft.dispatchEvent(h)), this.__mouseDownLeft = null);
                                h = !0;
                                break;
                            case "rightMouseDown":
                                this.__mouseDownRight =
                                    f;
                                h = !0;
                                break;
                            case "rightMouseUp":
                                this.__mouseDownRight == f && (k = "rightClick"), this.__mouseDownRight = null, h = !0
                        }
                        c = F.__pool.get();
                        null != a && (h = Ib.__create(a, d, h ? this.window.clickCount : 0, this.__mouseX, this.__mouseY, f.__globalToLocal(g, c), f), this.__dispatchStack(h, b), h.__updateAfterEventFlag && this.__renderAfterEvent());
                        null != k && (h = Ib.__create(k, d, 0, this.__mouseX, this.__mouseY, f.__globalToLocal(g, c), f), this.__dispatchStack(h, b), h.__updateAfterEventFlag && this.__renderAfterEvent(), "mouseUp" == a && (f.doubleClickEnabled ?
                            (a = db.getTimer(), 500 > a - this.__lastClickTime && f == this.__lastClickTarget ? (h = Ib.__create("doubleClick", d, 0, this.__mouseX, this.__mouseY, f.__globalToLocal(g, c), f), this.__dispatchStack(h, b), h.__updateAfterEventFlag && this.__renderAfterEvent(), this.__lastClickTime = 0, this.__lastClickTarget = null) : (this.__lastClickTarget = f, this.__lastClickTime = a)) : (this.__lastClickTarget = null, this.__lastClickTime = 0)));
                        if ("auto" == Vj.__cursor && !Vj.__hidden) {
                            h = null;
                            if (null != this.__mouseDownLeft) h = this.__mouseDownLeft.__getCursor();
                            else
                                for (a = 0; a < b.length;)
                                    if (h = b[a], ++a, h = h.__getCursor(), null != h && null != this.window) {
                                        this.window.set_cursor(Hm.toLimeCursor(h));
                                        break
                                    }
                            null == h && null != this.window && this.window.set_cursor(xb.ARROW)
                        }
                        f != this.__mouseOverTarget && null != this.__mouseOverTarget && (h = Ib.__create("mouseOut", d, 0, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(g, c), this.__mouseOverTarget), this.__dispatchStack(h, this.__mouseOutStack), h.__updateAfterEventFlag && this.__renderAfterEvent());
                        for (a = 0; a < this.__rollOutStack.length;) k =
                            this.__rollOutStack[a], -1 == b.indexOf(k) ? (M.remove(this.__rollOutStack, k), k.hasEventListener("rollOut") && (h = Ib.__create("rollOut", d, 0, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(g, c), k), h.bubbles = !1, this.__dispatchTarget(k, h), h.__updateAfterEventFlag && this.__renderAfterEvent())) : ++a;
                        f != this.__mouseOverTarget && (null != f && (h = Ib.__create("mouseOver", d, 0, this.__mouseX, this.__mouseY, f.__globalToLocal(g, c), f), this.__dispatchStack(h, b), h.__updateAfterEventFlag && this.__renderAfterEvent()),
                            this.__mouseOverTarget = f, this.__mouseOutStack = b);
                        for (a = 0; a < b.length;) k = b[a], ++a, -1 == this.__rollOutStack.indexOf(k) && null != this.__mouseOverTarget && (k.hasEventListener("rollOver") && (h = Ib.__create("rollOver", d, 0, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(g, c), k), h.bubbles = !1, this.__dispatchTarget(k, h), h.__updateAfterEventFlag && this.__renderAfterEvent()), this.__rollOutStack.push(k));
                        null != this.__dragObject && (this.__drag(g), d = null, this.__mouseOverTarget == this.__dragObject ? (f = this.__dragObject.mouseEnabled,
                            a = this.__dragObject.mouseChildren, this.__dragObject.mouseEnabled = !1, this.__dragObject.mouseChildren = !1, b = [], this.__hitTest(this.__mouseX, this.__mouseY, !0, b, !0, this) && (d = b[b.length - 1]), this.__dragObject.mouseEnabled = f, this.__dragObject.mouseChildren = a) : this.__mouseOverTarget != this && (d = this.__mouseOverTarget), this.__dragObject.dropTarget = d);
                        F.__pool.release(g);
                        F.__pool.release(c)
                    }
                },
                __onMouseWheel: function (a, b, c) {
                    var d = this.__mouseX,
                        g = this.__mouseY;
                    a = [];
                    if (this.__hitTest(this.__mouseX, this.__mouseY,
                        !0, a, !0, this)) var f = a[a.length - 1];
                    else f = this, a = [this];
                    null == f && (f = this);
                    c = F.__pool.get();
                    c.setTo(d, g);
                    d = this.__displayMatrix;
                    g = d.a * d.d - d.b * d.c;
                    if (0 == g) c.x = -d.tx, c.y = -d.ty;
                    else {
                        var k = 1 / g * (d.c * (d.ty - c.y) + d.d * (c.x - d.tx));
                        c.y = 1 / g * (d.a * (c.y - d.ty) + d.b * (d.tx - c.x));
                        c.x = k
                    }
                    b |= 0;
                    b = Ib.__create("mouseWheel", 0, 0, this.__mouseX, this.__mouseY, f.__globalToLocal(c, c), f, b);
                    b.cancelable = !0;
                    this.__dispatchStack(b, a);
                    b.isDefaultPrevented() && this.window.onMouseWheel.cancel();
                    b.__updateAfterEventFlag && this.__renderAfterEvent();
                    F.__pool.release(c)
                },
                __onTouch: function (a, b, c) {
                    var d = F.__pool.get();
                    d.setTo(Math.round(b.x * this.window.__width * this.window.__scale), Math.round(b.y * this.window.__height * this.window.__scale));
                    var g = this.__displayMatrix,
                        f = g.a * g.d - g.b * g.c;
                    if (0 == f) d.x = -g.tx, d.y = -g.ty;
                    else {
                        var k = 1 / f * (g.c * (g.ty - d.y) + g.d * (d.x - g.tx));
                        d.y = 1 / f * (g.a * (d.y - g.ty) + g.b * (g.tx - d.x));
                        d.x = k
                    }
                    g = d.x;
                    f = d.y;
                    k = [];
                    if (this.__hitTest(g, f, !1, k, !0, this)) var h = k[k.length - 1];
                    else h = this, k = [this];
                    null == h && (h = this);
                    var l = b.id;
                    if (this.__touchData.h.hasOwnProperty(l)) var n =
                        this.__touchData.h[l];
                    else n = bg.__pool.get(), n.reset(), n.touch = b, this.__touchData.h[l] = n;
                    var r = null,
                        t = !1;
                    switch (a) {
                        case "touchBegin":
                            n.touchDownTarget = h;
                            break;
                        case "touchEnd":
                            n.touchDownTarget == h && (r = "touchTap"), n.touchDownTarget = null, t = !0
                    }
                    var y = F.__pool.get();
                    a = Wd.__create(a, null, g, f, h.__globalToLocal(d, y), h);
                    a.touchPointID = l;
                    a.isPrimaryTouchPoint = c;
                    a.pressure = b.pressure;
                    this.__dispatchStack(a, k);
                    a.__updateAfterEventFlag && this.__renderAfterEvent();
                    null != r && (a = Wd.__create(r, null, g, f, h.__globalToLocal(d,
                        y), h), a.touchPointID = l, a.isPrimaryTouchPoint = c, a.pressure = b.pressure, this.__dispatchStack(a, k), a.__updateAfterEventFlag && this.__renderAfterEvent());
                    r = n.touchOverTarget;
                    h != r && null != r && (a = Wd.__create("touchOut", null, g, f, r.__globalToLocal(d, y), r), a.touchPointID = l, a.isPrimaryTouchPoint = c, a.pressure = b.pressure, this.__dispatchTarget(r, a), a.__updateAfterEventFlag && this.__renderAfterEvent());
                    for (var p = n.rollOutStack, u, z = 0; z < p.length;) u = p[z], -1 == k.indexOf(u) ? (M.remove(p, u), a = Wd.__create("touchRollOut", null,
                        g, f, r.__globalToLocal(d, y), r), a.touchPointID = l, a.isPrimaryTouchPoint = c, a.bubbles = !1, a.pressure = b.pressure, this.__dispatchTarget(u, a), a.__updateAfterEventFlag && this.__renderAfterEvent()) : ++z;
                    for (z = 0; z < k.length;) u = k[z], ++z, -1 == p.indexOf(u) && (u.hasEventListener("touchRollOver") && (a = Wd.__create("touchRollOver", null, g, f, r.__globalToLocal(d, y), u), a.touchPointID = l, a.isPrimaryTouchPoint = c, a.bubbles = !1, a.pressure = b.pressure, this.__dispatchTarget(u, a), a.__updateAfterEventFlag && this.__renderAfterEvent()), u.hasEventListener("touchRollOut") &&
                    p.push(u));
                    h != r && (null != h && (a = Wd.__create("touchOver", null, g, f, h.__globalToLocal(d, y), h), a.touchPointID = l, a.isPrimaryTouchPoint = c, a.bubbles = !0, a.pressure = b.pressure, this.__dispatchTarget(h, a), a.__updateAfterEventFlag && this.__renderAfterEvent()), n.touchOverTarget = h);
                    F.__pool.release(d);
                    F.__pool.release(y);
                    t && (this.__touchData.remove(l), n.reset(), bg.__pool.release(n))
                },
                __registerLimeModule: function (a) {
                    a.onCreateWindow.add(m(this, this.__onLimeCreateWindow));
                    a.onUpdate.add(m(this, this.__onLimeUpdate));
                    a.onExit.add(m(this, this.__onLimeModuleExit), !1, 0);
                    a.onDisplayOrientationChange.add(m(this, this.__onLimeDisplayOrientationChange));
                    for (a = xc.devices.iterator(); a.hasNext();) {
                        var b = a.next();
                        this.__onLimeGamepadConnect(b)
                    }
                    xc.onConnect.add(m(this, this.__onLimeGamepadConnect));
                    Hb.onStart.add(m(this, this.__onLimeTouchStart));
                    Hb.onMove.add(m(this, this.__onLimeTouchMove));
                    Hb.onEnd.add(m(this, this.__onLimeTouchEnd));
                    Hb.onCancel.add(m(this, this.__onLimeTouchCancel))
                },
                __applyScaleAndAlign: function (a, b, c, d) {
                    a =
                        this.__logicalWidth - Math.round((this.__logicalWidth * c - a) / c);
                    b = this.__logicalHeight - Math.round((this.__logicalHeight * d - b) / d);
                    var g = 0,
                        f = 0;
                    switch (this.align) {
                        case 0:
                            g = Math.round((this.__logicalWidth - a) / 2);
                            f = Math.round(this.__logicalHeight - b);
                            break;
                        case 1:
                            f = Math.round(this.__logicalHeight - b);
                            break;
                        case 2:
                            g = Math.round(this.__logicalWidth - a);
                            f = Math.round(this.__logicalHeight - b);
                            break;
                        case 3:
                            f = Math.round((this.__logicalHeight - b) / 2);
                            break;
                        case 4:
                            g = Math.round(this.__logicalWidth - a);
                            f = Math.round((this.__logicalHeight -
                                b) / 2);
                            break;
                        case 5:
                            g = Math.round((this.__logicalWidth - a) / 2);
                            break;
                        case 7:
                            g = Math.round(this.__logicalWidth - a)
                    }
                    this.__displayMatrix.translate(-g, -f);
                    this.__displayMatrix.scale(c, d);
                    this.__displayRect.setTo(g, f, a, b)
                },
                __resize: function () {
                    var a = this.stageWidth,
                        b = this.stageHeight,
                        c = this.window.__width * this.window.__scale | 0,
                        d = this.window.__height * this.window.__scale | 0;
                    this.__displayMatrix.identity();
                    if (null != this.get_fullScreenSourceRect() && this.window.__fullscreen) {
                        this.stageWidth = this.get_fullScreenSourceRect().width |
                            0;
                        this.stageHeight = this.get_fullScreenSourceRect().height | 0;
                        var g = c / this.stageWidth,
                            f = d / this.stageHeight;
                        this.__displayMatrix.translate(-this.get_fullScreenSourceRect().x, -this.get_fullScreenSourceRect().y);
                        this.__displayMatrix.scale(g, f);
                        this.__displayRect.setTo(this.get_fullScreenSourceRect().get_left(), this.get_fullScreenSourceRect().get_right(), this.get_fullScreenSourceRect().get_top(), this.get_fullScreenSourceRect().get_bottom())
                    } else if (0 == this.__logicalWidth || 0 == this.__logicalHeight || 2 == this.get_scaleMode() ||
                        0 == c || 0 == d) this.stageWidth = Math.round(c / this.window.__scale), this.stageHeight = Math.round(d / this.window.__scale), this.__displayMatrix.scale(this.window.__scale, this.window.__scale), this.__displayRect.setTo(0, 0, this.stageWidth, this.stageHeight);
                    else switch (this.stageWidth = this.__logicalWidth, this.stageHeight = this.__logicalHeight, this.get_scaleMode()) {
                            case 0:
                                g = c / this.__logicalWidth;
                                f = d / this.__logicalHeight;
                                this.__displayMatrix.scale(g, f);
                                this.__displayRect.setTo(0, 0, this.__logicalWidth, this.__logicalHeight);
                                break;
                            case 1:
                                g = c / this.__logicalWidth;
                                f = d / this.__logicalHeight;
                                g = Math.max(g, f);
                                this.__applyScaleAndAlign(c, d, g, g);
                                break;
                            default:
                                g = c / this.__logicalWidth, f = d / this.__logicalHeight, g = Math.min(g, f), this.__applyScaleAndAlign(c, d, g, g)
                        }
                    null != this.context3D && this.context3D.configureBackBuffer(this.stageWidth, this.stageHeight, 0, !0, !0, !0);
                    for (g = this.stage3Ds.iterator(); g.hasNext();) g.next().__resize(c, d);
                    null != this.__renderer && this.__renderer.__resize(c, d);
                    this.__renderDirty = !0;
                    if (this.stageWidth != a || this.stageHeight !=
                        b) this.__setTransformDirty(), a = new ua("resize"), this.__dispatchEvent(a)
                },
                __setLogicalSize: function (a, b) {
                    this.__logicalWidth = a;
                    this.__logicalHeight = b;
                    this.__resize()
                },
                __stopDrag: function (a) {
                    this.__dragObject = this.__dragBounds = null
                },
                __unregisterLimeModule: function (a) {
                    a.onCreateWindow.remove(m(this, this.__onLimeCreateWindow));
                    a.onUpdate.remove(m(this, this.__onLimeUpdate));
                    a.onExit.remove(m(this, this.__onLimeModuleExit));
                    a.onDisplayOrientationChange.remove(m(this, this.__onLimeDisplayOrientationChange));
                    xc.onConnect.remove(m(this, this.__onLimeGamepadConnect));
                    Hb.onStart.remove(m(this, this.__onLimeTouchStart));
                    Hb.onMove.remove(m(this, this.__onLimeTouchMove));
                    Hb.onEnd.remove(m(this, this.__onLimeTouchEnd));
                    Hb.onCancel.remove(m(this, this.__onLimeTouchCancel))
                },
                __update: function (a, b) {
                    a ? this.__transformDirty && (rb.prototype.__update.call(this, !0, b), b && (this.__transformDirty = !1)) : this.__transformDirty || this.__renderDirty ? (rb.prototype.__update.call(this, !1, b), b && ea.__supportDOM && (this.__wasDirty = !0)) : !this.__renderDirty &&
                        this.__wasDirty && (rb.prototype.__update.call(this, !1, b), b && (this.__wasDirty = !1))
                },
                set_color: function (a) {
                    null == a ? (this.__transparent = !0, a = 0) : this.__transparent = !1;
                    this.__color != a && (this.__colorSplit[0] = ((a & 16711680) >>> 16) / 255, this.__colorSplit[1] = ((a & 65280) >>> 8) / 255, this.__colorSplit[2] = (a & 255) / 255, this.__colorString = "#" + T.hex(a & 16777215, 6), this.__renderDirty = !0, this.__color = -16777216 | a & 16777215);
                    return a
                },
                get_displayState: function () {
                    return this.__displayState
                },
                set_displayState: function (a) {
                    null != this.window &&
                    (2 == a ? this.window.__fullscreen && this.window.set_fullscreen(!1) : this.window.__fullscreen || this.window.set_fullscreen(!0));
                    return this.__displayState = a
                },
                get_focus: function () {
                    return this.__focus
                },
                set_focus: function (a) {
                    if (a != this.__focus || null == a && null != this.__cacheFocus) {
                        var b = this.__focus;
                        this.__cacheFocus = this.__focus = a;
                        if (null != b) {
                            var c = new ag("focusOut", !0, !1, a, !1, 0),
                                d = [];
                            b.__getInteractive(d);
                            d.reverse();
                            this.__dispatchStack(c, d)
                        }
                        null != a && (c = new ag("focusIn", !0, !1, b, !1, 0), d = [], a.__getInteractive(d),
                            d.reverse(), this.__dispatchStack(c, d))
                    }
                    return a
                },
                get_frameRate: function () {
                    return null != this.window ? this.window.__backend.getFrameRate() : 0
                },
                get_fullScreenSourceRect: function () {
                    return null == this.__fullScreenSourceRect ? null : this.__fullScreenSourceRect.clone()
                },
                set_height: function (a) {
                    return this.get_height()
                },
                get_mouseX: function () {
                    return this.__mouseX
                },
                get_mouseY: function () {
                    return this.__mouseY
                },
                get_quality: function () {
                    return this.__quality
                },
                set_rotation: function (a) {
                    return 0
                },
                get_scaleMode: function () {
                    return this.__scaleMode
                },
                set_scaleMode: function (a) {
                    a != this.__scaleMode && (this.__scaleMode = a, this.__resize());
                    return a
                },
                set_scaleX: function (a) {
                    return 0
                },
                set_scaleY: function (a) {
                    return 0
                },
                get_tabEnabled: function () {
                    return !1
                },
                get_tabIndex: function () {
                    return -1
                },
                set_transform: function (a) {
                    return this.get_transform()
                },
                set_width: function (a) {
                    return this.get_width()
                },
                set_x: function (a) {
                    return 0
                },
                set_y: function (a) {
                    return 0
                },
                __class__: Kg,
                __properties__: w(rb.prototype.__properties__, {
                    set_color: "set_color",
                    set_scaleMode: "set_scaleMode",
                    get_scaleMode: "get_scaleMode",
                    get_quality: "get_quality",
                    get_fullScreenSourceRect: "get_fullScreenSourceRect",
                    get_frameRate: "get_frameRate",
                    set_focus: "set_focus",
                    get_focus: "get_focus",
                    set_displayState: "set_displayState",
                    get_displayState: "get_displayState"
                })
            });
            var $f = function (a) {
                oa.call(this);
                this.__stage = a;
                this.__height = 0;
                this.__projectionTransform = new Wj;
                this.__renderTransform = new Wj;
                this.__y = this.__x = this.__width = 0;
                this.visible = !0;
                0 < a.stageWidth && 0 < a.stageHeight && this.__resize(a.stageWidth, a.stageHeight)
            };
            h["openfl.display.Stage3D"] =
                $f;
            $f.__name__ = "openfl.display.Stage3D";
            $f.__super__ = oa;
            $f.prototype = w(oa.prototype, {
                __createContext: function () {
                    var a = this.__stage,
                        b = a.__renderer;
                    if ("cairo" == b.__type || "canvas" == b.__type) this.__dispatchError();
                    else if ("opengl" == b.__type) this.context3D = new Ab(a, a.context3D.__contextState, this), this.__dispatchCreate();
                    else if ("dom" == b.__type)
                        if (null == a.context3D) {
                            this.__canvas = window.document.createElement("canvas");
                            this.__canvas.width = a.stageWidth;
                            this.__canvas.height = a.stageHeight;
                            var c = a.window.context.attributes,
                                d = Object.prototype.hasOwnProperty.call(c, "background") && null == c.background,
                                g = Object.prototype.hasOwnProperty.call(c, "colorDepth") ? c.colorDepth : 32;
                            c = Object.prototype.hasOwnProperty.call(c, "antialiasing") && 0 < c.antialiasing;
                            this.__webgl = Xl.getContextWebGL(this.__canvas, {
                                alpha: d || 16 < g,
                                antialias: c,
                                depth: !0,
                                premultipliedAlpha: !0,
                                stencil: !0,
                                preserveDrawingBuffer: !1
                            });
                            null != this.__webgl && (null == ce.context && (ce.context = this.__webgl, ce.type = "webgl", ce.version = 1), a.context3D = new Ab(a), a.context3D.configureBackBuffer(a.window.__width,
                                a.window.__height, 0, !0, !0, !0), a.context3D.present(), b.element.appendChild(this.__canvas), this.__style = this.__canvas.style, this.__style.setProperty("position", "absolute", null), this.__style.setProperty("top", "0", null), this.__style.setProperty("left", "0", null), this.__style.setProperty(b.__transformOriginProperty, "0 0 0", null), this.__style.setProperty("z-index", "-1", null));
                            null != a.context3D && (this.context3D = new Ab(a, a.context3D.__contextState, this));
                            this.__dispatchCreate()
                        } else this.__dispatchError()
                },
                __dispatchError: function () {
                    this.__contextRequested = !1;
                    this.dispatchEvent(new Ud("error", !1, !1, "Context3D not available"))
                },
                __dispatchCreate: function () {
                    this.__contextRequested && (this.__contextRequested = !1, this.dispatchEvent(new ua("context3DCreate")))
                },
                __lostContext: function () {
                    this.__contextLost = !0;
                    null != this.context3D && (this.context3D.__dispose(), this.__contextRequested = !0)
                },
                __resize: function (a, b) {
                    if (a != this.__width || b != this.__height) {
                        null != this.__canvas && (this.__canvas.width = a, this.__canvas.height =
                            b);
                        this.__projectionTransform.copyRawDataFrom(pa.toFloatVector(null, null, null, [2 / (0 < a ? a : 1), 0, 0, 0, 0, -2 / (0 < b ? b : 1), 0, 0, 0, 0, -.001, 0, -1, 1, 0, 1]));
                        var c = this.__stage.window.__scale;
                        this.__renderTransform.identity();
                        this.__renderTransform.appendTranslation(this.__x * c, this.__y * c, 0);
                        this.__renderTransform.append(this.__projectionTransform);
                        this.__width = a;
                        this.__height = b
                    }
                },
                __restoreContext: function () {
                    this.__contextLost = !1;
                    this.__createContext()
                },
                get_x: function () {
                    return this.__x
                },
                get_y: function () {
                    return this.__y
                },
                __class__: $f,
                __properties__: {
                    get_y: "get_y",
                    get_x: "get_x"
                }
            });
            var th = function (a, b, c, d, g, f, k, h) {
                null == h && (h = 0);
                null == k && (k = 0);
                null == f && (f = 0);
                null == g && (g = 1);
                null == d && (d = 1);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 0);
                this.__id = a;
                this.__matrix = new va;
                0 != b && this.set_x(b);
                0 != c && this.set_y(c);
                1 != d && this.set_scaleX(d);
                1 != g && this.set_scaleY(g);
                0 != f && this.set_rotation(f);
                this.__dirty = !0;
                this.__length = 0;
                this.__originX = k;
                this.__originY = h;
                this.__alpha = 1;
                this.__blendMode = null;
                this.__visible = !0
            };
            h["openfl.display.Tile"] =
                th;
            th.__name__ = "openfl.display.Tile";
            th.prototype = {
                getBounds: function (a) {
                    var b = new sa;
                    this.__findTileRect(b);
                    var c = va.__pool.get();
                    if (null != a && a != this) {
                        c.copyFrom(this.__getWorldTransform());
                        var d = va.__pool.get();
                        d.copyFrom(a.__getWorldTransform());
                        d.invert();
                        c.concat(d);
                        va.__pool.release(d)
                    } else c.identity();
                    this.__getBounds(b, c);
                    va.__pool.release(c);
                    return b
                },
                __getBounds: function (a, b) {
                    a.__transform(a, b)
                },
                __findTileRect: function (a) {
                    if (null == this.get_tileset())
                        if (null != this.parent) {
                            var b = this.parent.__findTileset();
                            null == b ? a.setTo(0, 0, 0, 0) : (b = b.getRect(this.get_id()), null == b ? a.setTo(0, 0, 0, 0) : a.copyFrom(b))
                        } else a.setTo(0, 0, 0, 0);
                    else a.copyFrom(this.get_tileset().getRect(this.get_id()));
                    a.x = 0;
                    a.y = 0
                },
                __findTileset: function () {
                    return null != this.get_tileset() ? this.get_tileset() : this.parent instanceof uh ? this.parent.get_tileset() : null == this.parent ? null : this.parent.__findTileset()
                },
                __getWorldTransform: function () {
                    var a = this.get_matrix().clone();
                    null != this.parent && a.concat(this.parent.__getWorldTransform());
                    return a
                },
                __setRenderDirty: function () {
                    this.__dirty || (this.__dirty = !0, null != this.parent && this.parent.__setRenderDirty())
                },
                get_alpha: function () {
                    return this.__alpha
                },
                set_alpha: function (a) {
                    a != this.__alpha && (this.__alpha = a, this.__setRenderDirty());
                    return a
                },
                get_colorTransform: function () {
                    return this.__colorTransform
                },
                get_height: function () {
                    var a = sa.__pool.get();
                    this.__findTileRect(a);
                    this.__getBounds(a, this.get_matrix());
                    var b = a.height;
                    sa.__pool.release(a);
                    return b
                },
                set_height: function (a) {
                    var b = sa.__pool.get();
                    this.__findTileRect(b);
                    0 != b.height && this.set_scaleY(a / b.height);
                    sa.__pool.release(b);
                    return a
                },
                get_id: function () {
                    return this.__id
                },
                get_matrix: function () {
                    return this.__matrix
                },
                get_originX: function () {
                    return this.__originX
                },
                set_originX: function (a) {
                    a != this.__originX && (this.__originX = a, this.__setRenderDirty());
                    return a
                },
                get_originY: function () {
                    return this.__originY
                },
                set_originY: function (a) {
                    a != this.__originY && (this.__originY = a, this.__setRenderDirty());
                    return a
                },
                get_rotation: function () {
                    if (null == this.__rotation)
                        if (0 == this.__matrix.b &&
                            0 == this.__matrix.c) this.__rotationSine = this.__rotation = 0, this.__rotationCosine = 1;
                        else {
                            var a = Math.atan2(this.__matrix.d, this.__matrix.c) - Math.PI / 2;
                            this.__rotation = 180 / Math.PI * a;
                            this.__rotationSine = Math.sin(a);
                            this.__rotationCosine = Math.cos(a)
                        }
                    return this.__rotation
                },
                set_rotation: function (a) {
                    if (a != this.__rotation) {
                        this.__rotation = a;
                        var b = Math.PI / 180 * a;
                        this.__rotationSine = Math.sin(b);
                        this.__rotationCosine = Math.cos(b);
                        b = this.get_scaleX();
                        var c = this.get_scaleY();
                        this.__matrix.a = this.__rotationCosine * b;
                        this.__matrix.b = this.__rotationSine * b;
                        this.__matrix.c = -this.__rotationSine * c;
                        this.__matrix.d = this.__rotationCosine * c;
                        this.__setRenderDirty()
                    }
                    return a
                },
                get_scaleX: function () {
                    null == this.__scaleX && (0 == this.get_matrix().b ? this.__scaleX = this.__matrix.a : this.__scaleX = Math.sqrt(this.__matrix.a * this.__matrix.a + this.__matrix.b * this.__matrix.b));
                    return this.__scaleX
                },
                set_scaleX: function (a) {
                    if (a != this.__scaleX) {
                        this.__scaleX = a;
                        if (0 == this.__matrix.b) this.__matrix.a = a;
                        else {
                            this.get_rotation();
                            var b = this.__rotationSine *
                                a;
                            this.__matrix.a = this.__rotationCosine * a;
                            this.__matrix.b = b
                        }
                        this.__setRenderDirty()
                    }
                    return a
                },
                get_scaleY: function () {
                    null == this.__scaleY && (this.__scaleY = 0 == this.__matrix.c ? this.get_matrix().d : Math.sqrt(this.__matrix.c * this.__matrix.c + this.__matrix.d * this.__matrix.d));
                    return this.__scaleY
                },
                set_scaleY: function (a) {
                    if (a != this.__scaleY) {
                        this.__scaleY = a;
                        if (0 == this.__matrix.c) this.__matrix.d = a;
                        else {
                            this.get_rotation();
                            var b = this.__rotationCosine * a;
                            this.__matrix.c = -this.__rotationSine * a;
                            this.__matrix.d = b
                        }
                        this.__setRenderDirty()
                    }
                    return a
                },
                get_shader: function () {
                    return this.__shader
                },
                get_tileset: function () {
                    return this.__tileset
                },
                set_tileset: function (a) {
                    a != this.__tileset && (this.__tileset = a, this.__setRenderDirty());
                    return a
                },
                get_visible: function () {
                    return this.__visible
                },
                get_width: function () {
                    var a = sa.__pool.get();
                    this.__findTileRect(a);
                    this.__getBounds(a, this.get_matrix());
                    var b = a.width;
                    sa.__pool.release(a);
                    return b
                },
                set_width: function (a) {
                    var b = sa.__pool.get();
                    this.__findTileRect(b);
                    0 != b.width && this.set_scaleX(a / b.width);
                    sa.__pool.release(b);
                    return a
                },
                get_x: function () {
                    return this.__matrix.tx
                },
                set_x: function (a) {
                    a != this.__matrix.tx && (this.__matrix.tx = a, this.__setRenderDirty());
                    return a
                },
                get_y: function () {
                    return this.__matrix.ty
                },
                set_y: function (a) {
                    a != this.__matrix.ty && (this.__matrix.ty = a, this.__setRenderDirty());
                    return a
                },
                __class__: th,
                __properties__: {
                    set_y: "set_y",
                    get_y: "get_y",
                    set_x: "set_x",
                    get_x: "get_x",
                    set_width: "set_width",
                    get_width: "get_width",
                    get_visible: "get_visible",
                    set_tileset: "set_tileset",
                    get_tileset: "get_tileset",
                    get_shader: "get_shader",
                    set_scaleY: "set_scaleY",
                    get_scaleY: "get_scaleY",
                    set_scaleX: "set_scaleX",
                    get_scaleX: "get_scaleX",
                    set_rotation: "set_rotation",
                    get_rotation: "get_rotation",
                    set_originY: "set_originY",
                    get_originY: "get_originY",
                    set_originX: "set_originX",
                    get_originX: "get_originX",
                    get_matrix: "get_matrix",
                    get_id: "get_id",
                    set_height: "set_height",
                    get_height: "get_height",
                    get_colorTransform: "get_colorTransform",
                    set_alpha: "set_alpha",
                    get_alpha: "get_alpha"
                }
            };
            var vh = function (a, b, c, d, g, f, k) {
                null == k && (k = 0);
                null == f && (f = 0);
                null == g && (g =
                    0);
                null == d && (d = 1);
                null == c && (c = 1);
                null == b && (b = 0);
                null == a && (a = 0);
                th.call(this, -1, a, b, c, d, g, f, k);
                this.__tiles = [];
                this.__length = 0
            };
            h["openfl.display.TileContainer"] = vh;
            vh.__name__ = "openfl.display.TileContainer";
            vh.__interfaces__ = [Al];
            vh.__super__ = th;
            vh.prototype = w(th.prototype, {
                getBounds: function (a) {
                    for (var b = new sa, c, d = 0, g = this.__tiles; d < g.length;) c = g[d], ++d, c = c.getBounds(a), b.__expand(c.x, c.y, c.width, c.height);
                    return b
                },
                get_height: function () {
                    for (var a = sa.__pool.get(), b, c = 0, d = this.__tiles; c < d.length;) b =
                        d[c], ++c, b = b.getBounds(this), a.__expand(b.x, b.y, b.width, b.height);
                    this.__getBounds(a, this.get_matrix());
                    c = a.height;
                    sa.__pool.release(a);
                    return c
                },
                set_height: function (a) {
                    for (var b = sa.__pool.get(), c, d = 0, g = this.__tiles; d < g.length;) c = g[d], ++d, c = c.getBounds(this), b.__expand(c.x, c.y, c.width, c.height);
                    0 != b.height && this.set_scaleY(a / b.height);
                    sa.__pool.release(b);
                    return a
                },
                get_width: function () {
                    for (var a = sa.__pool.get(), b, c = 0, d = this.__tiles; c < d.length;) b = d[c], ++c, b = b.getBounds(this), a.__expand(b.x, b.y, b.width,
                        b.height);
                    this.__getBounds(a, this.get_matrix());
                    c = a.width;
                    sa.__pool.release(a);
                    return c
                },
                set_width: function (a) {
                    for (var b = sa.__pool.get(), c, d = 0, g = this.__tiles; d < g.length;) c = g[d], ++d, c = c.getBounds(this), b.__expand(c.x, c.y, c.width, c.height);
                    0 != b.width && this.set_scaleX(a / b.width);
                    sa.__pool.release(b);
                    return a
                },
                __class__: vh
            });
            var uh = function (a, b, c, d) {
                null == d && (d = !0);
                ea.call(this);
                this.__drawableType = 9;
                this.__tileset = c;
                this.smoothing = d;
                this.tileColorTransformEnabled = this.tileBlendModeEnabled = this.tileAlphaEnabled = !0;
                this.__group = new vh;
                this.__group.set_tileset(c);
                this.__width = a;
                this.__height = b
            };
            h["openfl.display.Tilemap"] = uh;
            uh.__name__ = "openfl.display.Tilemap";
            uh.__interfaces__ = [Al];
            uh.__super__ = ea;
            uh.prototype = w(ea.prototype, {
                __enterFrame: function (a) {
                    this.__group.__dirty && !this.__renderDirty && (this.__renderDirty = !0, this.__setParentRenderDirty())
                },
                __getBounds: function (a, b) {
                    var c = sa.__pool.get();
                    c.setTo(0, 0, this.__width, this.__height);
                    c.__transform(c, b);
                    a.__expand(c.x, c.y, c.width, c.height);
                    sa.__pool.release(c)
                },
                __hitTest: function (a, b, c, d, g, f) {
                    if (!f.get_visible() || this.__isMask || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b)) return !1;
                    this.__getRenderTransform();
                    var k = this.__renderTransform,
                        h = k.a * k.d - k.b * k.c;
                    c = 0 == h ? -k.tx : 1 / h * (k.c * (k.ty - b) + k.d * (a - k.tx));
                    k = this.__renderTransform;
                    h = k.a * k.d - k.b * k.c;
                    a = 0 == h ? -k.ty : 1 / h * (k.a * (b - k.ty) + k.b * (k.tx - a));
                    return 0 < c && 0 < a && c <= this.__width && a <= this.__height ? (null == d || g || d.push(f), !0) : !1
                },
                get_height: function () {
                    return this.__height * Math.abs(this.get_scaleY())
                },
                set_height: function (a) {
                    this.__height =
                        a | 0;
                    return this.__height * Math.abs(this.get_scaleY())
                },
                get_width: function () {
                    return this.__width * Math.abs(this.__scaleX)
                },
                set_width: function (a) {
                    this.__width = a | 0;
                    return this.__width * Math.abs(this.__scaleX)
                },
                __class__: uh
            });
            var jm = function (a, b) {
                this.__bitmapData = a;
                this.rectData = pa.toFloatVector(null);
                this.__data = [];
                if (null != b)
                    for (a = 0; a < b.length;) {
                        var c = b[a];
                        ++a;
                        this.addRect(c)
                    }
            };
            h["openfl.display.Tileset"] = jm;
            jm.__name__ = "openfl.display.Tileset";
            jm.prototype = {
                addRect: function (a) {
                    if (null == a) return -1;
                    this.rectData.push(a.x);
                    this.rectData.push(a.y);
                    this.rectData.push(a.width);
                    this.rectData.push(a.height);
                    a = new Xj(a);
                    a.__update(this.__bitmapData);
                    this.__data.push(a);
                    return this.__data.length - 1
                },
                getRect: function (a) {
                    return a < this.__data.length && 0 <= a ? new sa(this.__data[a].x, this.__data[a].y, this.__data[a].width, this.__data[a].height) : null
                },
                __class__: jm
            };
            var Xj = function (a) {
                null != a && (this.x = a.x | 0, this.y = a.y | 0, this.width = a.width | 0, this.height = a.height | 0)
            };
            h["openfl.display.TileData"] = Xj;
            Xj.__name__ = "openfl.display.TileData";
            Xj.prototype = {
                __update: function (a) {
                    if (null != a) {
                        var b = a.width;
                        a = a.height;
                        this.__uvX = this.x / b;
                        this.__uvY = this.y / a;
                        this.__uvWidth = (this.x + this.width) / b;
                        this.__uvHeight = (this.y + this.height) / a
                    }
                },
                __class__: Xj
            };
            var km = function () {
                this.__totalFrames = this.__framesLoaded = 1;
                this.__currentLabels = [];
                this.__currentFrame = 1;
                this.__lastFrameUpdate = this.__lastFrameScriptEval = -1
            };
            h["openfl.display.Timeline"] = km;
            km.__name__ = "openfl.display.Timeline";
            km.prototype = {
                enterFrame: function (a) {
                },
                __enterFrame: function (a) {
                    if (this.__isPlaying) {
                        a =
                            this.__getNextFrame(a);
                        if (this.__lastFrameScriptEval == a) return;
                        if (null != this.__frameScripts) {
                            if (a < this.__currentFrame) {
                                if (!this.__evaluateFrameScripts(this.__totalFrames)) return;
                                this.__currentFrame = 1
                            }
                            if (!this.__evaluateFrameScripts(a)) return
                        } else this.__currentFrame = a
                    }
                    this.__updateSymbol(this.__currentFrame)
                },
                __evaluateFrameScripts: function (a) {
                    if (null == this.__frameScripts) return !0;
                    var b = this.__currentFrame;
                    for (a += 1; b < a;) {
                        var c = b++;
                        if (c != this.__lastFrameScriptEval && (this.__currentFrame = this.__lastFrameScriptEval =
                            c, this.__frameScripts.h.hasOwnProperty(c) && (this.__updateSymbol(c), (0, this.__frameScripts.h[c])(this.__scope), this.__currentFrame != c) || !this.__isPlaying)) return !1
                    }
                    return !0
                },
                __getNextFrame: function (a) {
                    null != this.frameRate ? (this.__timeElapsed += a, a = this.__currentFrame + Math.floor(this.__timeElapsed / this.__frameTime), 1 > a && (a = 1), a > this.__totalFrames && (a = Math.floor((a - 1) % this.__totalFrames) + 1), this.__timeElapsed %= this.__frameTime) : (a = this.__currentFrame + 1, a > this.__totalFrames && (a = 1));
                    return a
                },
                __goto: function (a) {
                    1 >
                    a ? a = 1 : a > this.__totalFrames && (a = this.__totalFrames);
                    this.__lastFrameScriptEval = -1;
                    this.__currentFrame = a;
                    this.__updateSymbol(this.__currentFrame);
                    this.__evaluateFrameScripts(this.__currentFrame)
                },
                __gotoAndStop: function (a, b) {
                    this.__stop();
                    this.__goto(this.__resolveFrameReference(a))
                },
                __stop: function () {
                    this.__isPlaying = !1
                },
                __resolveFrameReference: function (a) {
                    if ("number" == typeof a && (a | 0) === a) return a;
                    if ("string" == typeof a) {
                        for (var b = 0, c = this.__currentLabels; b < c.length;) {
                            var d = c[b];
                            ++b;
                            if (d.name == a) return d.frame
                        }
                        throw new Af("Error #2109: Frame label " +
                            a + " not found in scene.");
                    }
                    throw aa.thrown("Invalid type for frame " + a.__name__);
                },
                __updateFrameLabel: function () {
                    this.__currentFrameLabel = this.__currentLabel = null;
                    for (var a = 0, b = this.__currentLabels; a < b.length;) {
                        var c = b[a];
                        ++a;
                        if (c.frame < this.__currentFrame) this.__currentLabel = c.name;
                        else if (c.frame == this.__currentFrame) this.__currentFrameLabel = this.__currentLabel = c.name;
                        else break
                    }
                },
                __updateSymbol: function (a) {
                    this.__currentFrame != this.__lastFrameUpdate && (this.__updateFrameLabel(), this.enterFrame(a),
                        this.__lastFrameUpdate = this.__currentFrame)
                },
                __class__: km
            };
            var ph = function (a, b) {
                Gg.call(this, a, b);
                this.stage = new Kg(this, Object.prototype.hasOwnProperty.call(b.context, "background") ? b.context.background : 16777215);
                if (Object.prototype.hasOwnProperty.call(b, "parameters")) try {
                    this.stage.get_loaderInfo().parameters = b.parameters
                } catch (c) {
                    Ha.lastError = c
                }
                this.stage.__setLogicalSize(b.width, b.height);
                Object.prototype.hasOwnProperty.call(b, "resizable") && !b.resizable && this.stage.set_scaleMode(3);
                a.addModule(this.stage)
            };
            h["openfl.display.Window"] = ph;
            ph.__name__ = "openfl.display.Window";
            ph.__super__ = Gg;
            ph.prototype = w(Gg.prototype, {
                close: function () {
                    Gg.prototype.close.call(this);
                    this.onClose.canceled || null == this.stage || (this.application.removeModule(this.stage), this.stage = null)
                },
                __class__: ph
            });
            var qh = function () {
            };
            h["openfl.display._internal.CanvasBitmap"] = qh;
            qh.__name__ = "openfl.display._internal.CanvasBitmap";
            qh.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a, !1);
                null != a.__bitmapData && null != a.__bitmapData.image &&
                (a.__imageVersion = a.__bitmapData.image.version);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    if (!(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || (h = b.__getAlpha(a.__worldAlpha), 0 >= h))) {
                        if (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            l = b.context;
                            b.setTransform(a.__renderTransform, l);
                            var c = a.opaqueBackground;
                            l.fillStyle = "rgb(" + (c >>> 16 & 255) + "," + (c >>> 8 & 255) + "," + (c & 255) + ")";
                            l.fillRect(0,
                                0, a.get_width(), a.get_height());
                            b.__popMaskObject(a)
                        }
                        if (null != a.__graphics && a.__renderable && (h = b.__getAlpha(a.__worldAlpha), !(0 >= h) && (c = a.__graphics, null != c))) {
                            n.render(c, b);
                            var d = c.__width,
                                g = c.__height,
                                f = c.__canvas;
                            if (null != f && c.__visible && 1 <= d && 1 <= g) {
                                var k = c.__worldTransform;
                                l = b.context;
                                r = a.__scrollRect;
                                if (null == r || 0 < r.width && 0 < r.height) b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a), l.globalAlpha = h, h = va.__pool.get(), h.scale(1 / c.__bitmapScaleX, 1 / c.__bitmapScaleY), h.concat(k), b.setTransform(h,
                                    l), l.drawImage(f, 0, 0, d, g), va.__pool.release(h), b.__popMaskObject(a)
                            }
                        }
                    }
                    a.__renderable && (h = b.__getAlpha(a.__worldAlpha), 0 < h && null != a.__bitmapData && a.__bitmapData.__isValid && a.__bitmapData.readable && (l = b.context, b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a, !1), Aa.convertToCanvas(a.__bitmapData.image), l.globalAlpha = h, r = a.__scrollRect, b.setTransform(a.__renderTransform, l), b.__allowSmoothing && a.smoothing || (l.imageSmoothingEnabled = !1), null == r ? l.drawImage(a.__bitmapData.image.get_src(), 0, 0, a.__bitmapData.image.width,
                        a.__bitmapData.image.height) : l.drawImage(a.__bitmapData.image.get_src(), r.x, r.y, r.width, r.height, r.x, r.y, r.width, r.height), b.__allowSmoothing && a.smoothing || (l.imageSmoothingEnabled = !0), b.__popMaskObject(a, !1)))
                } else if (c = a.__cacheBitmap, c.__renderable) {
                    var h = b.__getAlpha(c.__worldAlpha);
                    if (0 < h && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable) {
                        var l = b.context;
                        b.__setBlendMode(c.__worldBlendMode);
                        b.__pushMaskObject(c, !1);
                        Aa.convertToCanvas(c.__bitmapData.image);
                        l.globalAlpha =
                            h;
                        var r = c.__scrollRect;
                        b.setTransform(c.__renderTransform, l);
                        b.__allowSmoothing && c.smoothing || (l.imageSmoothingEnabled = !1);
                        null == r ? l.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height) : l.drawImage(c.__bitmapData.image.get_src(), r.x, r.y, r.width, r.height, r.x, r.y, r.width, r.height);
                        b.__allowSmoothing && c.smoothing || (l.imageSmoothingEnabled = !0);
                        b.__popMaskObject(c, !1)
                    }
                }
                b.__renderEvent(a)
            };
            qh.renderDrawableMask = function (a, b) {
                b.context.rect(0, 0, a.get_width(),
                    a.get_height())
            };
            var vj = function () {
            };
            h["openfl.display._internal.CanvasBitmapData"] = vj;
            vj.__name__ = "openfl.display._internal.CanvasBitmapData";
            vj.renderDrawable = function (a, b) {
                if (a.readable) {
                    var c = a.image;
                    c.type == ed.DATA && Aa.convertToCanvas(c);
                    var d = b.context;
                    d.globalAlpha = 1;
                    b.setTransform(a.__renderTransform, d);
                    d.drawImage(c.get_src(), 0, 0, c.width, c.height)
                }
            };
            vj.renderDrawableMask = function (a, b) {
            };
            var Uf = function () {
            };
            h["openfl.display._internal.CanvasDisplayObject"] = Uf;
            Uf.__name__ = "openfl.display._internal.CanvasDisplayObject";
            Uf.renderDrawable = function (a, b) {
                if (null == a.get_mask() || 0 < a.get_mask().get_width() && 0 < a.get_mask().get_height())
                    if (b.__updateCacheBitmap(a, !1), null != a.__cacheBitmap && !a.__isCacheBitmapRender) {
                        var c = a.__cacheBitmap;
                        if (c.__renderable) {
                            var d = b.__getAlpha(c.__worldAlpha);
                            if (0 < d && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable) {
                                var g = b.context;
                                b.__setBlendMode(c.__worldBlendMode);
                                b.__pushMaskObject(c, !1);
                                Aa.convertToCanvas(c.__bitmapData.image);
                                g.globalAlpha = d;
                                var f = c.__scrollRect;
                                b.setTransform(c.__renderTransform, g);
                                b.__allowSmoothing && c.smoothing || (g.imageSmoothingEnabled = !1);
                                null == f ? g.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height) : g.drawImage(c.__bitmapData.image.get_src(), f.x, f.y, f.width, f.height, f.x, f.y, f.width, f.height);
                                b.__allowSmoothing && c.smoothing || (g.imageSmoothingEnabled = !0);
                                b.__popMaskObject(c, !1)
                            }
                        }
                    } else if (!(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || (d = b.__getAlpha(a.__worldAlpha), 0 >=
                    d || (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height() && (b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a), g = b.context, b.setTransform(a.__renderTransform, g), d = a.opaqueBackground, g.fillStyle = "rgb(" + (d >>> 16 & 255) + "," + (d >>> 8 & 255) + "," + (d & 255) + ")", g.fillRect(0, 0, a.get_width(), a.get_height()), b.__popMaskObject(a)), null == a.__graphics || !a.__renderable || (d = b.__getAlpha(a.__worldAlpha), 0 >= d || (c = a.__graphics, null == c)))))) {
                        n.render(c, b);
                        var k = c.__width,
                            h = c.__height,
                            l = c.__canvas;
                        if (null != l && c.__visible && 1 <= k && 1 <= h) {
                            var r = c.__worldTransform;
                            g = b.context;
                            f = a.__scrollRect;
                            if (null == f || 0 < f.width && 0 < f.height) b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a), g.globalAlpha = d, d = va.__pool.get(), d.scale(1 / c.__bitmapScaleX, 1 / c.__bitmapScaleY), d.concat(r), b.setTransform(d, g), g.drawImage(l, 0, 0, k, h), va.__pool.release(d), b.__popMaskObject(a)
                        }
                    }
                b.__renderEvent(a)
            };
            Uf.renderDrawableMask = function (a, b) {
                null != a.__graphics && n.renderMask(a.__graphics, b)
            };
            var wj = function () {
            };
            h["openfl.display._internal.CanvasDisplayObjectContainer"] = wj;
            wj.__name__ = "openfl.display._internal.CanvasDisplayObjectContainer";
            wj.renderDrawable = function (a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext();) {
                    var d = c.next();
                    null == d.stage && d.__cleanup()
                }
                a.__removedChildren.set_length(0);
                if (!(!a.__renderable || 0 >= a.__worldAlpha || null != a.get_mask() && (0 >= a.get_mask().get_width() || 0 >= a.get_mask().get_height())) && (Uf.renderDrawable(a, b), null == a.__cacheBitmap || a.__isCacheBitmapRender)) {
                    b.__pushMaskObject(a);
                    if (null != b.__stage) {
                        c = 0;
                        for (d = a.__children; c < d.length;) {
                            var g = d[c];
                            ++c;
                            b.__renderDrawable(g);
                            g.__renderDirty = !1
                        }
                        a.__renderDirty = !1
                    } else
                        for (c = 0, d = a.__children; c < d.length;) g = d[c], ++c, b.__renderDrawable(g);
                    b.__popMaskObject(a)
                }
            };
            wj.renderDrawableMask = function (a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext();) {
                    var d = c.next();
                    null == d.stage && d.__cleanup()
                }
                a.__removedChildren.set_length(0);
                null != a.__graphics && n.renderMask(a.__graphics, b);
                c = 0;
                for (a = a.__children; c < a.length;) d = a[c], ++c, b.__renderDrawableMask(d)
            };
            var yd = function () {
                null == yd.empty ? (this.types = [], this.b = [], this.i = [], this.f = [], this.o = [], this.ff = [], this.ii = [], this.copyOnWrite = !0) : this.clear()
            };
            h["openfl.display._internal.DrawCommandBuffer"] = yd;
            yd.__name__ = "openfl.display._internal.DrawCommandBuffer";
            yd.prototype = {
                beginBitmapFill: function (a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(ja.BEGIN_BITMAP_FILL);
                    this.o.push(a);
                    this.o.push(b);
                    this.b.push(c);
                    this.b.push(d)
                },
                beginFill: function (a, b) {
                    this.prepareWrite();
                    this.types.push(ja.BEGIN_FILL);
                    this.i.push(a);
                    this.f.push(b)
                },
                beginGradientFill: function (a, b, c, d, g, f, k, h) {
                    this.prepareWrite();
                    this.types.push(ja.BEGIN_GRADIENT_FILL);
                    this.o.push(a);
                    this.ii.push(b);
                    this.ff.push(c);
                    this.ii.push(d);
                    this.o.push(g);
                    this.o.push(f);
                    this.o.push(k);
                    this.f.push(h)
                },
                beginShaderFill: function (a) {
                    this.prepareWrite();
                    this.types.push(ja.BEGIN_SHADER_FILL);
                    this.o.push(a)
                },
                clear: function () {
                    this.types = yd.empty.types;
                    this.b = yd.empty.b;
                    this.i = yd.empty.i;
                    this.f = yd.empty.f;
                    this.o = yd.empty.o;
                    this.ff = yd.empty.ff;
                    this.ii = yd.empty.ii;
                    this.copyOnWrite = !0
                },
                cubicCurveTo: function (a, b, c, d, g, f) {
                    this.prepareWrite();
                    this.types.push(ja.CUBIC_CURVE_TO);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c);
                    this.f.push(d);
                    this.f.push(g);
                    this.f.push(f)
                },
                curveTo: function (a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(ja.CURVE_TO);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c);
                    this.f.push(d)
                },
                drawCircle: function (a, b, c) {
                    this.prepareWrite();
                    this.types.push(ja.DRAW_CIRCLE);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c)
                },
                drawEllipse: function (a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(ja.DRAW_ELLIPSE);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c);
                    this.f.push(d)
                },
                drawQuads: function (a, b, c) {
                    this.prepareWrite();
                    this.types.push(ja.DRAW_QUADS);
                    this.o.push(a);
                    this.o.push(b);
                    this.o.push(c)
                },
                drawRect: function (a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(ja.DRAW_RECT);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c);
                    this.f.push(d)
                },
                drawRoundRect: function (a, b, c, d, g, f) {
                    this.prepareWrite();
                    this.types.push(ja.DRAW_ROUND_RECT);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c);
                    this.f.push(d);
                    this.f.push(g);
                    this.o.push(f)
                },
                drawTriangles: function (a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(ja.DRAW_TRIANGLES);
                    this.o.push(a);
                    this.o.push(b);
                    this.o.push(c);
                    this.o.push(d)
                },
                endFill: function () {
                    this.prepareWrite();
                    this.types.push(ja.END_FILL)
                },
                lineBitmapStyle: function (a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(ja.LINE_BITMAP_STYLE);
                    this.o.push(a);
                    this.o.push(b);
                    this.b.push(c);
                    this.b.push(d)
                },
                lineGradientStyle: function (a, b, c, d, g, f, k, h) {
                    this.prepareWrite();
                    this.types.push(ja.LINE_GRADIENT_STYLE);
                    this.o.push(a);
                    this.ii.push(b);
                    this.ff.push(c);
                    this.ii.push(d);
                    this.o.push(g);
                    this.o.push(f);
                    this.o.push(k);
                    this.f.push(h)
                },
                lineStyle: function (a, b, c, d, g, f, k, h) {
                    this.prepareWrite();
                    this.types.push(ja.LINE_STYLE);
                    this.o.push(a);
                    this.i.push(b);
                    this.f.push(c);
                    this.b.push(d);
                    this.o.push(g);
                    this.o.push(f);
                    this.o.push(k);
                    this.f.push(h)
                },
                lineTo: function (a, b) {
                    this.prepareWrite();
                    this.types.push(ja.LINE_TO);
                    this.f.push(a);
                    this.f.push(b)
                },
                moveTo: function (a, b) {
                    this.prepareWrite();
                    this.types.push(ja.MOVE_TO);
                    this.f.push(a);
                    this.f.push(b)
                },
                prepareWrite: function () {
                    this.copyOnWrite && (this.types = this.types.slice(), this.b = this.b.slice(), this.i = this.i.slice(), this.f = this.f.slice(), this.o = this.o.slice(), this.ff = this.ff.slice(), this.ii = this.ii.slice(), this.copyOnWrite = !1)
                },
                windingEvenOdd: function () {
                    this.prepareWrite();
                    this.types.push(ja.WINDING_EVEN_ODD)
                },
                windingNonZero: function () {
                    this.prepareWrite();
                    this.types.push(ja.WINDING_NON_ZERO)
                },
                get_length: function () {
                    return this.types.length
                },
                __class__: yd,
                __properties__: {
                    get_length: "get_length"
                }
            };
            var n = function () {
            };
            h["openfl.display._internal.CanvasGraphics"] = n;
            n.__name__ = "openfl.display._internal.CanvasGraphics";
            n.allowSmoothing = null;
            n.bitmapRepeat = null;
            n.bounds = null;
            n.bitmapFill = null;
            n.fillScale9Bounds = null;
            n.graphics = null;
            n.hasFill = null;
            n.hasStroke = null;
            n.hitTesting = null;
            n.inversePendingMatrix = null;
            n.pendingMatrix = null;
            n.strokePattern = null;
            n.bitmapStroke = null;
            n.bitmapStrokeMatrix = null;
            n.strokeScale9Bounds = null;
            n.windingRule = null;
            n.worldAlpha = null;
            n.context = null;
            n.hitTestCanvas = null;
            n.hitTestContext =
                null;
            n.closePath = function (a) {
                null == a && (a = !1);
                if (null != n.context.strokeStyle) {
                    a || n.context.closePath();
                    if (!n.hitTesting && null != n.strokePattern) {
                        var b = null != n.graphics.__owner.__scale9Grid && !n.graphics.__owner.__isMask && 0 == n.graphics.__worldTransform.b && 0 == n.graphics.__worldTransform.c;
                        if (null != n.bitmapStrokeMatrix || b && null != n.strokeScale9Bounds && null != n.bitmapStroke) {
                            var c = va.__pool.get();
                            null != n.bitmapStrokeMatrix ? c.copyFrom(n.bitmapStrokeMatrix) : c.identity();
                            if (b && null != n.strokeScale9Bounds && null !=
                                n.bitmapStroke) {
                                b = n.strokeScale9Bounds.getScaleX();
                                var d = n.strokeScale9Bounds.getScaleY();
                                0 < b && 0 < d && c.scale(b, d)
                            }
                            b = new DOMMatrix([c.a, c.b, c.c, c.d, c.tx, c.ty]);
                            n.strokePattern.setTransform(b);
                            va.__pool.release(c)
                        }
                    }
                    n.context.stroke();
                    a && n.context.closePath();
                    n.context.beginPath()
                }
            };
            n.createBitmapFill = function (a, b, c) {
                Aa.convertToCanvas(a.image);
                n.setSmoothing(c);
                return n.context.createPattern(a.image.get_src(), b ? "repeat" : "no-repeat")
            };
            n.createGradientPattern = function (a, b, c, d, g, f, k, h) {
                k = !1;
                null == g && (g =
                    va.__pool.get(), g.identity(), k = !0);
                switch (a) {
                    case 0:
                        if (0 == f) {
                            a = F.__pool.get();
                            a.setTo(-819.2, 0);
                            h = a.x;
                            var l = a.y;
                            a.x = h * g.a + l * g.c + g.tx;
                            a.y = h * g.b + l * g.d + g.ty;
                            var q = F.__pool.get();
                            q.setTo(819.2, 0);
                            h = q.x;
                            l = q.y;
                            q.x = h * g.a + l * g.c + g.tx;
                            q.y = h * g.b + l * g.d + g.ty;
                            h = n.graphics.__owner.__scale9Grid;
                            if (l = null != h && !n.graphics.__owner.__isMask && 0 == n.graphics.__worldTransform.b && 0 == n.graphics.__worldTransform.c) a.x = n.toScale9Position(a.x, h.x, h.width, n.bounds.width, n.graphics.__owner.get_scaleX()), a.y = n.toScale9Position(a.y,
                                h.y, h.height, n.bounds.height, n.graphics.__owner.get_scaleY()), q.x = n.toScale9Position(q.x, h.x, h.width, n.bounds.width, n.graphics.__owner.get_scaleX()), q.y = n.toScale9Position(q.y, h.y, h.height, n.bounds.height, n.graphics.__owner.get_scaleY());
                            h = n.context.createLinearGradient(a.x, a.y, q.x, q.y);
                            n.pendingMatrix = null;
                            n.inversePendingMatrix = null;
                            l = 0;
                            for (var r = b.length; l < r;) {
                                var t = l++;
                                f = d[t] / 255;
                                0 > f ? f = 0 : 1 < f && (f = 1);
                                h.addColorStop(f, n.getRGBA(b[t], c[t]))
                            }
                            null != a && F.__pool.release(a);
                            null != q && F.__pool.release(q);
                            k && va.__pool.release(g);
                            return h
                        }
                        h = 819.2 * ((0 == f ? 1 : 25) - 1);
                        k = window.document.createElement("canvas");
                        a = k.getContext("2d");
                        q = n.getDimensions(g);
                        k.width = n.context.canvas.width;
                        k.height = n.context.canvas.height;
                        h = n.context.createLinearGradient(-819.2 - h, 0, 819.2 + h, 0);
                        if (1 == f)
                            for (var y = 0, p = .04; 1 > y;) {
                                l = 0;
                                for (r = b.length; l < r;) t = l++, f = d[t] / 255, f = y + f * p, 0 > f ? f = 0 : 1 < f && (f = 1), h.addColorStop(f, n.getRGBA(b[t], c[t]));
                                y += p;
                                for (l = b.length - 1; 0 <= l;) f = d[l] / 255, f = y + (1 - f) * p, 0 > f ? f = 0 : 1 < f && (f = 1), h.addColorStop(f, n.getRGBA(b[l],
                                    c[l])), --l;
                                y += p
                            } else if (2 == f)
                            for (y = 0, p = .04; 1 > y;) {
                                l = 0;
                                for (r = b.length; l < r;) t = l++, f = d[t] / 255, f = y + f * p, 0 > f ? f = 0 : 1 < f && (f = .999), h.addColorStop(f, n.getRGBA(b[t], c[t]));
                                f = y + .001;
                                0 > f ? f = 0 : 1 < f && (f = 1);
                                h.addColorStop(f - .001, n.getRGBA(b[b.length - 1], c[c.length - 1]));
                                h.addColorStop(f, n.getRGBA(b[0], c[0]));
                                y += p
                            }
                        n.pendingMatrix = new va;
                        n.pendingMatrix.tx = g.tx - q.width / 2;
                        n.pendingMatrix.ty = g.ty - q.height / 2;
                        n.inversePendingMatrix = n.pendingMatrix.clone();
                        n.inversePendingMatrix.invert();
                        b = new Path2D;
                        b.rect(0, 0, k.width, k.height);
                        b.closePath();
                        g = new DOMMatrix([g.a, g.b, g.c, g.d, g.tx, g.ty]);
                        c = g.inverse();
                        d = new Path2D;
                        d.addPath(b, c);
                        a.fillStyle = h;
                        a.setTransform(g.a, g.b, g.c, g.d, g.e, g.f);
                        a.fill(d);
                        return n.context.createPattern(k, "no-repeat");
                    case 1:
                        1 < h ? h = 1 : -1 > h && (h = -1);
                        a = F.__pool.get();
                        a.x = 819.2 * h;
                        a.y = 0;
                        h = a.x;
                        l = a.y;
                        a.x = h * g.a + l * g.c + g.tx;
                        a.y = h * g.b + l * g.d + g.ty;
                        q = F.__pool.get();
                        q.setTo(0, 0);
                        h = q.x;
                        l = q.y;
                        q.x = h * g.a + l * g.c + g.tx;
                        q.y = h * g.b + l * g.d + g.ty;
                        f = F.__pool.get();
                        f.x = 819.2;
                        f.y = 0;
                        h = f.x;
                        l = f.y;
                        f.x = h * g.a + l * g.c + g.tx;
                        f.y = h * g.b + l * g.d + g.ty;
                        h =
                            n.graphics.__owner.__scale9Grid;
                        if (l = null != h && !n.graphics.__owner.__isMask && 0 == n.graphics.__worldTransform.b && 0 == n.graphics.__worldTransform.c) a.x = n.toScale9Position(a.x, h.x, h.width, n.bounds.width, n.graphics.__owner.get_scaleX()), a.y = n.toScale9Position(a.y, h.y, h.height, n.bounds.height, n.graphics.__owner.get_scaleY()), q.x = n.toScale9Position(q.x, h.x, h.width, n.bounds.width, n.graphics.__owner.get_scaleX()), q.y = n.toScale9Position(q.y, h.y, h.height, n.bounds.height, n.graphics.__owner.get_scaleY()), f.x = n.toScale9Position(f.x,
                            h.x, h.width, n.bounds.width, n.graphics.__owner.get_scaleX()), f.y = n.toScale9Position(f.y, h.y, h.height, n.bounds.height, n.graphics.__owner.get_scaleY());
                        h = f.x - q.x;
                        l = f.y - q.y;
                        F.__pool.release(f);
                        h = n.context.createRadialGradient(a.x, a.y, 0, q.x, q.y, Math.sqrt(h * h + l * l));
                        n.pendingMatrix = null;
                        n.inversePendingMatrix = null;
                        l = 0;
                        for (r = b.length; l < r;) t = l++, f = d[t] / 255, 0 > f ? f = 0 : 1 < f && (f = 1), h.addColorStop(f, n.getRGBA(b[t], c[t]));
                        null != a && F.__pool.release(a);
                        null != q && F.__pool.release(q);
                        k && va.__pool.release(g);
                        return h
                }
            };
            n.getRGBA = function (a, b) {
                var c = (a & 16711680) >>> 16,
                    d = (a & 65280) >>> 8;
                a &= 255;
                return "rgba(" + (null == c ? "null" : E.string(Ja.toFloat(c))) + ", " + (null == d ? "null" : E.string(Ja.toFloat(d))) + ", " + (null == a ? "null" : E.string(Ja.toFloat(a))) + ", " + b + ")"
            };
            n.getDimensions = function (a) {
                var b = Math.cos(Math.atan2(a.c, a.a)),
                    c = a.a / b * 1638.4;
                a = a.d / b * 1638.4;
                0 == c && 0 == a && (c = a = 819.2);
                return {
                    width: c,
                    height: a
                }
            };
            n.createTempPatternCanvas = function (a, b, c, d) {
                var g = window.document.createElement("canvas"),
                    f = g.getContext("2d");
                g.width = c;
                g.height =
                    d;
                a = a.image.get_src();
                f.fillStyle = f.createPattern(a, b ? "repeat" : "no-repeat");
                f.beginPath();
                f.moveTo(0, 0);
                f.lineTo(0, d);
                f.lineTo(c, d);
                f.lineTo(c, 0);
                f.lineTo(0, 0);
                f.closePath();
                n.hitTesting || f.fill(n.windingRule);
                return g
            };
            n.drawRoundRect = function (a, b, c, d, g, f, k, h, l, r, t) {
                null == f && (f = g);
                g *= .5;
                f *= .5;
                g > c / 2 && (g = c / 2);
                f > d / 2 && (f = d / 2);
                if (null != k) {
                    var q = n.toScale9Position(a, k.x, k.width, h, r),
                        y = n.toScale9Position(b, k.y, k.height, l, t),
                        p = n.toScale9Position(a + c, k.x, k.width, h, r),
                        u = n.toScale9Position(b + d, k.y, k.height,
                            l, t);
                    if (null != n.fillScale9Bounds && null != n.bitmapFill || null != n.strokeScale9Bounds && null != n.bitmapStroke) n.applyScale9GridUnscaledX(a), n.applyScale9GridUnscaledY(b), n.applyScale9GridUnscaledX(a + c), n.applyScale9GridUnscaledY(b + d), n.applyScale9GridScaledX(q), n.applyScale9GridScaledY(y), n.applyScale9GridScaledX(p), n.applyScale9GridScaledY(u);
                    var z = n.toScale9Position(a + g, k.x, k.width, h, r),
                        x = n.toScale9Position(b + f, k.y, k.height, l, t);
                    a = n.toScale9Position(a + c - g, k.x, k.width, h, r);
                    b = n.toScale9Position(b + d - f, k.y,
                        k.height, l, t);
                    n.context.moveTo(z, y);
                    n.context.lineTo(a, y);
                    n.context.quadraticCurveTo(p, y, p, x);
                    n.context.lineTo(p, b);
                    n.context.quadraticCurveTo(p, u, a, u);
                    n.context.lineTo(z, u);
                    n.context.quadraticCurveTo(q, u, q, b);
                    n.context.lineTo(q, x);
                    n.context.quadraticCurveTo(q, y, z, y)
                } else q = a + c, d = b + d, y = -g + .7071067811865476 * g, p = -g + .41421356237309503 * g, u = -f + .7071067811865476 * f, z = -f + .41421356237309503 * f, n.context.moveTo(q, d - f), n.context.quadraticCurveTo(q, d + z, q + y, d + u), n.context.quadraticCurveTo(q + p, d, q - g, d), n.context.lineTo(a +
                    g, d), n.context.quadraticCurveTo(a - p, d, a - y, d + u), n.context.quadraticCurveTo(a, d + z, a, d - f), n.context.lineTo(a, b + f), n.context.quadraticCurveTo(a, b - z, a - y, b - u), n.context.quadraticCurveTo(a - p, b, a + g, b), n.context.lineTo(q - g, b), n.context.quadraticCurveTo(q + p, b, q + y, b - u), n.context.quadraticCurveTo(q, b - z, q, b + f), n.context.lineTo(q, d - f)
            };
            n.endFill = function () {
                n.context.beginPath();
                n.playCommands(n.fillCommands, !1);
                n.fillCommands.clear()
            };
            n.endStroke = function () {
                n.context.beginPath();
                n.playCommands(n.strokeCommands,
                    !0);
                n.context.closePath();
                n.strokeCommands.clear()
            };
            n.toScale9Position = function (a, b, c, d, g) {
                if (0 >= g) return 0;
                var f = d - c - b;
                d = d * g - b - f;
                return a <= b ? 0 > d ? a * (b + f + d) / (b + f) : a : a >= b + c ? 0 > d ? (b + (a - b - c)) * (b + f + d) / (b + f) : b + d + (a - b - c) : 0 > d ? b * (b + f + d) / (b + f) : b + d * (a - b) / c
            };
            n.applyScale9GridUnscaledX = function (a) {
                null != n.fillScale9Bounds && null != n.bitmapFill && n.fillScale9Bounds.applyUnscaledX(a);
                null != n.strokeScale9Bounds && null != n.bitmapStroke && n.strokeScale9Bounds.applyUnscaledX(a)
            };
            n.applyScale9GridUnscaledY = function (a) {
                null !=
                n.fillScale9Bounds && null != n.bitmapFill && n.fillScale9Bounds.applyUnscaledY(a);
                null != n.strokeScale9Bounds && null != n.bitmapStroke && n.strokeScale9Bounds.applyUnscaledY(a)
            };
            n.applyScale9GridScaledX = function (a) {
                null != n.fillScale9Bounds && null != n.bitmapFill && n.fillScale9Bounds.applyScaledX(a);
                null != n.strokeScale9Bounds && null != n.bitmapStroke && n.strokeScale9Bounds.applyScaledX(a)
            };
            n.applyScale9GridScaledY = function (a) {
                null != n.fillScale9Bounds && null != n.bitmapFill && n.fillScale9Bounds.applyScaledY(a);
                null != n.strokeScale9Bounds &&
                null != n.bitmapStroke && n.strokeScale9Bounds.applyScaledY(a)
            };
            n.hitTest = function (a, b, c) {
                n.bounds = a.__bounds;
                n.graphics = a;
                if (0 == a.__commands.get_length() || null == n.bounds || 0 >= n.bounds.width || 0 >= n.bounds.height) return n.graphics = null, !1;
                n.hitTesting = !0;
                var d = a.__renderTransform,
                    g = b * d.b + c * d.d + d.ty;
                b = b * d.a + c * d.c + d.tx - (n.bounds.x * d.a + n.bounds.y * d.c + d.tx);
                c = g - (n.bounds.x * d.b + n.bounds.y * d.d + d.ty);
                g = a.__canvas;
                var f = a.__context;
                a.__canvas = n.hitTestCanvas;
                a.__context = n.hitTestContext;
                n.context = a.__context;
                n.context.setTransform(d.a,
                    d.b, d.c, d.d, d.tx, d.ty);
                n.fillCommands.clear();
                n.strokeCommands.clear();
                n.hasFill = !1;
                n.hasStroke = !1;
                n.bitmapFill = null;
                n.bitmapRepeat = !1;
                n.windingRule = "evenodd";
                d = new te(a.__commands);
                for (var k = 0, h = a.__commands.types; k < h.length;) {
                    var l = h[k];
                    ++k;
                    switch (l._hx_index) {
                        case 0:
                        case 1:
                        case 2:
                        case 3:
                            n.endFill();
                            if (n.hasFill && n.context.isPointInPath(b, c, n.windingRule)) return d.destroy(), a.__canvas = g, a.__context = f, n.graphics = null, !0;
                            n.endStroke();
                            if (n.hasStroke && n.context.isPointInStroke(b, c)) return d.destroy(),
                                a.__canvas = g, a.__context = f, n.graphics = null, !0;
                            if (l == ja.BEGIN_BITMAP_FILL) {
                                switch (d.prev._hx_index) {
                                    case 0:
                                        d.oPos += 2;
                                        d.bPos += 2;
                                        break;
                                    case 1:
                                        d.iPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 2:
                                        d.oPos += 4;
                                        d.iiPos += 2;
                                        d.ffPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 3:
                                        d.oPos += 1;
                                        break;
                                    case 4:
                                        d.fPos += 6;
                                        break;
                                    case 5:
                                        d.fPos += 4;
                                        break;
                                    case 6:
                                        d.fPos += 3;
                                        break;
                                    case 7:
                                        d.fPos += 4;
                                        break;
                                    case 8:
                                        d.oPos += 3;
                                        break;
                                    case 9:
                                        d.fPos += 4;
                                        break;
                                    case 10:
                                        d.fPos += 5;
                                        d.oPos += 1;
                                        break;
                                    case 12:
                                        d.oPos += 4;
                                        break;
                                    case 14:
                                        d.oPos += 2;
                                        d.bPos += 2;
                                        break;
                                    case 15:
                                        d.oPos += 4;
                                        d.iiPos += 2;
                                        d.ffPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 16:
                                        d.oPos += 4;
                                        d.iPos += 1;
                                        d.fPos += 2;
                                        d.bPos += 1;
                                        break;
                                    case 17:
                                        d.fPos += 2;
                                        break;
                                    case 18:
                                        d.fPos += 2;
                                        break;
                                    case 19:
                                        d.oPos += 1;
                                        break;
                                    case 20:
                                        d.oPos += 1
                                }
                                d.prev = ja.BEGIN_BITMAP_FILL;
                                l = d;
                                n.fillCommands.beginBitmapFill(l.buffer.o[l.oPos], l.buffer.o[l.oPos + 1], l.buffer.b[l.bPos], l.buffer.b[l.bPos + 1]);
                                n.strokeCommands.beginBitmapFill(l.buffer.o[l.oPos], l.buffer.o[l.oPos + 1], l.buffer.b[l.bPos], l.buffer.b[l.bPos + 1])
                            } else if (l == ja.BEGIN_GRADIENT_FILL) {
                                switch (d.prev._hx_index) {
                                    case 0:
                                        d.oPos +=
                                            2;
                                        d.bPos += 2;
                                        break;
                                    case 1:
                                        d.iPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 2:
                                        d.oPos += 4;
                                        d.iiPos += 2;
                                        d.ffPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 3:
                                        d.oPos += 1;
                                        break;
                                    case 4:
                                        d.fPos += 6;
                                        break;
                                    case 5:
                                        d.fPos += 4;
                                        break;
                                    case 6:
                                        d.fPos += 3;
                                        break;
                                    case 7:
                                        d.fPos += 4;
                                        break;
                                    case 8:
                                        d.oPos += 3;
                                        break;
                                    case 9:
                                        d.fPos += 4;
                                        break;
                                    case 10:
                                        d.fPos += 5;
                                        d.oPos += 1;
                                        break;
                                    case 12:
                                        d.oPos += 4;
                                        break;
                                    case 14:
                                        d.oPos += 2;
                                        d.bPos += 2;
                                        break;
                                    case 15:
                                        d.oPos += 4;
                                        d.iiPos += 2;
                                        d.ffPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 16:
                                        d.oPos += 4;
                                        d.iPos += 1;
                                        d.fPos += 2;
                                        d.bPos += 1;
                                        break;
                                    case 17:
                                        d.fPos += 2;
                                        break;
                                    case 18:
                                        d.fPos +=
                                            2;
                                        break;
                                    case 19:
                                        d.oPos += 1;
                                        break;
                                    case 20:
                                        d.oPos += 1
                                }
                                d.prev = ja.BEGIN_GRADIENT_FILL;
                                l = d;
                                n.fillCommands.beginGradientFill(l.buffer.o[l.oPos], l.buffer.ii[l.iiPos], l.buffer.ff[l.ffPos], l.buffer.ii[l.iiPos + 1], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3], l.buffer.f[l.fPos]);
                                n.strokeCommands.beginGradientFill(l.buffer.o[l.oPos], l.buffer.ii[l.iiPos], l.buffer.ff[l.ffPos], l.buffer.ii[l.iiPos + 1], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3], l.buffer.f[l.fPos])
                            } else if (l == ja.BEGIN_SHADER_FILL) {
                                switch (d.prev._hx_index) {
                                    case 0:
                                        d.oPos +=
                                            2;
                                        d.bPos += 2;
                                        break;
                                    case 1:
                                        d.iPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 2:
                                        d.oPos += 4;
                                        d.iiPos += 2;
                                        d.ffPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 3:
                                        d.oPos += 1;
                                        break;
                                    case 4:
                                        d.fPos += 6;
                                        break;
                                    case 5:
                                        d.fPos += 4;
                                        break;
                                    case 6:
                                        d.fPos += 3;
                                        break;
                                    case 7:
                                        d.fPos += 4;
                                        break;
                                    case 8:
                                        d.oPos += 3;
                                        break;
                                    case 9:
                                        d.fPos += 4;
                                        break;
                                    case 10:
                                        d.fPos += 5;
                                        d.oPos += 1;
                                        break;
                                    case 12:
                                        d.oPos += 4;
                                        break;
                                    case 14:
                                        d.oPos += 2;
                                        d.bPos += 2;
                                        break;
                                    case 15:
                                        d.oPos += 4;
                                        d.iiPos += 2;
                                        d.ffPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 16:
                                        d.oPos += 4;
                                        d.iPos += 1;
                                        d.fPos += 2;
                                        d.bPos += 1;
                                        break;
                                    case 17:
                                        d.fPos += 2;
                                        break;
                                    case 18:
                                        d.fPos +=
                                            2;
                                        break;
                                    case 19:
                                        d.oPos += 1;
                                        break;
                                    case 20:
                                        d.oPos += 1
                                }
                                d.prev = ja.BEGIN_SHADER_FILL;
                                l = d;
                                n.fillCommands.beginShaderFill(l.buffer.o[l.oPos]);
                                n.strokeCommands.beginShaderFill(l.buffer.o[l.oPos])
                            } else {
                                switch (d.prev._hx_index) {
                                    case 0:
                                        d.oPos += 2;
                                        d.bPos += 2;
                                        break;
                                    case 1:
                                        d.iPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 2:
                                        d.oPos += 4;
                                        d.iiPos += 2;
                                        d.ffPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 3:
                                        d.oPos += 1;
                                        break;
                                    case 4:
                                        d.fPos += 6;
                                        break;
                                    case 5:
                                        d.fPos += 4;
                                        break;
                                    case 6:
                                        d.fPos += 3;
                                        break;
                                    case 7:
                                        d.fPos += 4;
                                        break;
                                    case 8:
                                        d.oPos += 3;
                                        break;
                                    case 9:
                                        d.fPos += 4;
                                        break;
                                    case 10:
                                        d.fPos +=
                                            5;
                                        d.oPos += 1;
                                        break;
                                    case 12:
                                        d.oPos += 4;
                                        break;
                                    case 14:
                                        d.oPos += 2;
                                        d.bPos += 2;
                                        break;
                                    case 15:
                                        d.oPos += 4;
                                        d.iiPos += 2;
                                        d.ffPos += 1;
                                        d.fPos += 1;
                                        break;
                                    case 16:
                                        d.oPos += 4;
                                        d.iPos += 1;
                                        d.fPos += 2;
                                        d.bPos += 1;
                                        break;
                                    case 17:
                                        d.fPos += 2;
                                        break;
                                    case 18:
                                        d.fPos += 2;
                                        break;
                                    case 19:
                                        d.oPos += 1;
                                        break;
                                    case 20:
                                        d.oPos += 1
                                }
                                d.prev = ja.BEGIN_FILL;
                                l = d;
                                n.fillCommands.beginFill(l.buffer.i[l.iPos], 1);
                                n.strokeCommands.beginFill(l.buffer.i[l.iPos], 1)
                            }
                            break;
                        case 4:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos +=
                                        1
                            }
                            d.prev = ja.CUBIC_CURVE_TO;
                            l = d;
                            n.fillCommands.cubicCurveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3], l.buffer.f[l.fPos + 4], l.buffer.f[l.fPos + 5]);
                            n.strokeCommands.cubicCurveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3], l.buffer.f[l.fPos + 4], l.buffer.f[l.fPos + 5]);
                            break;
                        case 5:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos +=
                                        1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = ja.CURVE_TO;
                            l = d;
                            n.fillCommands.curveTo(l.buffer.f[l.fPos],
                                l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
                            n.strokeCommands.curveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
                            break;
                        case 6:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos +=
                                        5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = ja.DRAW_CIRCLE;
                            l = d;
                            n.fillCommands.drawCircle(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2]);
                            n.strokeCommands.drawCircle(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2]);
                            break;
                        case 7:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos +=
                                        2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos +=
                                        2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = ja.DRAW_ELLIPSE;
                            l = d;
                            n.fillCommands.drawEllipse(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
                            n.strokeCommands.drawEllipse(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
                            break;
                        case 9:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = ja.DRAW_RECT;
                            l = d;
                            n.fillCommands.drawRect(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos +
                            2], l.buffer.f[l.fPos + 3]);
                            n.strokeCommands.drawRect(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
                            break;
                        case 10:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos +=
                                        4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = ja.DRAW_ROUND_RECT;
                            l = d;
                            n.fillCommands.drawRoundRect(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3], l.buffer.f[l.fPos + 4], l.buffer.o[l.oPos]);
                            n.strokeCommands.drawRoundRect(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos +
                            2], l.buffer.f[l.fPos + 3], l.buffer.f[l.fPos + 4], l.buffer.o[l.oPos]);
                            break;
                        case 13:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos +=
                                        2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = ja.END_FILL;
                            n.endFill();
                            if (n.hasFill && n.context.isPointInPath(b, c, n.windingRule)) return d.destroy(), a.__canvas = g, a.__context = f, n.graphics = null, !0;
                            n.endStroke();
                            if (n.hasStroke && n.context.isPointInStroke(b, c)) return d.destroy(), a.__canvas = g, a.__context = f, n.graphics = null, !0;
                            n.hasFill = !1;
                            n.bitmapFill = null;
                            break;
                        case 14:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos +=
                                        2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos +=
                                        2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = ja.LINE_BITMAP_STYLE;
                            l = d;
                            n.strokeCommands.lineBitmapStyle(l.buffer.o[l.oPos], l.buffer.o[l.oPos + 1], l.buffer.b[l.bPos], l.buffer.b[l.bPos + 1]);
                            break;
                        case 15:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos +=
                                        4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = ja.LINE_GRADIENT_STYLE;
                            l = d;
                            n.strokeCommands.lineGradientStyle(l.buffer.o[l.oPos], l.buffer.ii[l.iiPos], l.buffer.ff[l.ffPos], l.buffer.ii[l.iiPos + 1], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos +
                            3], l.buffer.f[l.fPos]);
                            break;
                        case 16:
                            n.endStroke();
                            if (n.hasStroke && n.context.isPointInStroke(b, c)) return d.destroy(), a.__canvas = g, a.__context = f, n.graphics = null, !0;
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = ja.LINE_STYLE;
                            l = d;
                            n.strokeCommands.lineStyle(l.buffer.o[l.oPos], l.buffer.i[l.iPos], 1, l.buffer.b[l.bPos], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3], l.buffer.f[l.fPos + 1]);
                            break;
                        case 17:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos +=
                                        2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos +=
                                        2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = ja.LINE_TO;
                            l = d;
                            n.fillCommands.lineTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1]);
                            n.strokeCommands.lineTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1]);
                            break;
                        case 18:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos +=
                                        4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos += 1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = ja.MOVE_TO;
                            l = d;
                            n.fillCommands.moveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1]);
                            n.strokeCommands.moveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1]);
                            break;
                        case 21:
                            n.windingRule = "evenodd";
                            break;
                        case 22:
                            n.windingRule =
                                "nonzero";
                            break;
                        default:
                            switch (d.prev._hx_index) {
                                case 0:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 1:
                                    d.iPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 2:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 3:
                                    d.oPos += 1;
                                    break;
                                case 4:
                                    d.fPos += 6;
                                    break;
                                case 5:
                                    d.fPos += 4;
                                    break;
                                case 6:
                                    d.fPos += 3;
                                    break;
                                case 7:
                                    d.fPos += 4;
                                    break;
                                case 8:
                                    d.oPos += 3;
                                    break;
                                case 9:
                                    d.fPos += 4;
                                    break;
                                case 10:
                                    d.fPos += 5;
                                    d.oPos += 1;
                                    break;
                                case 12:
                                    d.oPos += 4;
                                    break;
                                case 14:
                                    d.oPos += 2;
                                    d.bPos += 2;
                                    break;
                                case 15:
                                    d.oPos += 4;
                                    d.iiPos += 2;
                                    d.ffPos += 1;
                                    d.fPos += 1;
                                    break;
                                case 16:
                                    d.oPos += 4;
                                    d.iPos +=
                                        1;
                                    d.fPos += 2;
                                    d.bPos += 1;
                                    break;
                                case 17:
                                    d.fPos += 2;
                                    break;
                                case 18:
                                    d.fPos += 2;
                                    break;
                                case 19:
                                    d.oPos += 1;
                                    break;
                                case 20:
                                    d.oPos += 1
                            }
                            d.prev = l
                    }
                }
                k = !1;
                0 < n.fillCommands.get_length() && n.endFill();
                n.hasFill && n.context.isPointInPath(b, c, n.windingRule) && (k = !0);
                0 < n.strokeCommands.get_length() && n.endStroke();
                n.hasStroke && n.context.isPointInStroke(b, c) && (k = !0);
                d.destroy();
                a.__canvas = g;
                a.__context = f;
                n.graphics = null;
                return k
            };
            n.normalizeUVT = function (a, b) {
                null == b && (b = !1);
                for (var c = -Infinity, d, g = a.get_length(), f = 1, k = g + 1; f < k;) d =
                    f++, b && 0 == d % 3 || (d = a.get(d - 1), c < d && (c = d));
                if (!b) return {
                    max: c,
                    uvt: a
                };
                var h = pa.toFloatVector(null);
                f = 1;
                for (k = g + 1; f < k;) d = f++, b && 0 == d % 3 || h.push(a.get(d - 1));
                return {
                    max: c,
                    uvt: h
                }
            };
            n.playCommands = function (a, b) {
                null == b && (b = !1);
                n.bounds = n.graphics.__bounds;
                var c = n.bounds.x,
                    d = n.bounds.y,
                    g = 0,
                    f = 0,
                    k = !1,
                    h = 0,
                    l = 0,
                    r = !1;
                n.windingRule = "evenodd";
                n.setSmoothing(!0);
                var t = !1,
                    y = n.graphics.__owner.__scale9Grid,
                    u = null != y && !n.graphics.__owner.__isMask && 0 == n.graphics.__worldTransform.b && 0 == n.graphics.__worldTransform.c;
                u || (y =
                    null, null != n.fillScale9Bounds && n.fillScale9Bounds.clear(), null != n.strokeScale9Bounds && n.strokeScale9Bounds.clear());
                var p = new te(a),
                    z, x, A, m = null,
                    Q = null,
                    O = 0,
                    v = a.types;
                a: for (; O < v.length;) {
                    var w = v[O];
                    ++O;
                    switch (w._hx_index) {
                        case 0:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos +=
                                        3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos += 2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.BEGIN_BITMAP_FILL;
                            var N = p;
                            if (N.buffer.o[N.oPos].readable) n.context.fillStyle = n.createBitmapFill(N.buffer.o[N.oPos], N.buffer.b[N.bPos], N.buffer.b[N.bPos + 1]), n.bitmapFill =
                                N.buffer.o[N.oPos];
                            else {
                                var D = T.hex(0, 6);
                                n.context.fillStyle = "#" + D;
                                n.bitmapFill = null
                            }
                            n.bitmapRepeat = N.buffer.b[N.bPos];
                            n.hasFill = !0;
                            null != n.fillScale9Bounds ? n.fillScale9Bounds.clear() : u && null != n.bitmapFill && (n.fillScale9Bounds = new Yj);
                            null != N.buffer.o[N.oPos + 1] ? (n.pendingMatrix = N.buffer.o[N.oPos + 1], n.inversePendingMatrix = N.buffer.o[N.oPos + 1].clone(), n.inversePendingMatrix.invert()) : (n.pendingMatrix = null, n.inversePendingMatrix = null);
                            break;
                        case 1:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos += 2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.BEGIN_FILL;
                            var H = p;
                            if (.005 > H.buffer.f[H.fPos]) n.hasFill = !1;
                            else {
                                if (1 == H.buffer.f[H.fPos]) {
                                    var ta = T.hex(H.buffer.i[H.iPos] & 16777215, 6);
                                    n.context.fillStyle = "#" + ta
                                } else {
                                    var I = (H.buffer.i[H.iPos] & 16711680) >>> 16;
                                    var J = (H.buffer.i[H.iPos] & 65280) >>> 8;
                                    var E = H.buffer.i[H.iPos] & 255;
                                    n.context.fillStyle = "rgba(" + I + ", " + J + ", " + E + ", " + H.buffer.f[H.fPos] + ")"
                                }
                                n.hasFill = !0;
                                n.setSmoothing(!0)
                            }
                            n.bitmapFill = null;
                            null != n.fillScale9Bounds && n.fillScale9Bounds.clear();
                            break;
                        case 2:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos +=
                                        1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos += 2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.BEGIN_GRADIENT_FILL;
                            var R = p;
                            n.context.fillStyle = n.createGradientPattern(R.buffer.o[R.oPos], R.buffer.ii[R.iiPos], R.buffer.ff[R.ffPos], R.buffer.ii[R.iiPos + 1], R.buffer.o[R.oPos + 1], R.buffer.o[R.oPos + 2], R.buffer.o[R.oPos + 3], R.buffer.f[R.fPos]);
                            n.hasFill = !0;
                            n.bitmapFill = null;
                            n.setSmoothing(!0);
                            null != n.fillScale9Bounds && n.fillScale9Bounds.clear();
                            break;
                        case 3:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos +=
                                        2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos +=
                                        2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.BEGIN_SHADER_FILL;
                            var jc = p,
                                rc = jc.buffer.o[jc.oPos];
                            if (0 < rc.inputCount) {
                                n.bitmapFill = rc.inputs[0];
                                if (n.bitmapFill.readable) n.context.fillStyle = n.createBitmapFill(n.bitmapFill, 0 != rc.inputWrap[0], 5 != rc.inputFilter[0]);
                                else {
                                    var B = T.hex(0, 6);
                                    n.context.fillStyle = "#" + B
                                }
                                n.hasFill = !0;
                                n.pendingMatrix = null;
                                n.inversePendingMatrix = null
                            }
                            null != n.fillScale9Bounds && n.fillScale9Bounds.clear();
                            break;
                        case 4:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos += 2;
                                    p.bPos +=
                                        2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos += 2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.CUBIC_CURVE_TO;
                            var ha = p;
                            t = !0;
                            if (u) {
                                var na = n.toScale9Position(ha.buffer.f[ha.fPos], y.x, y.width, n.bounds.width, n.graphics.__owner.get_scaleX()),
                                    C = n.toScale9Position(ha.buffer.f[ha.fPos + 1], y.y, y.height, n.bounds.height, n.graphics.__owner.get_scaleY()),
                                    kb = n.toScale9Position(ha.buffer.f[ha.fPos + 2], y.x, y.width, n.bounds.width, n.graphics.__owner.get_scaleX()),
                                    M = n.toScale9Position(ha.buffer.f[ha.fPos + 3], y.y, y.height, n.bounds.height, n.graphics.__owner.get_scaleY()),
                                    K = n.toScale9Position(ha.buffer.f[ha.fPos + 4], y.x, y.width, n.bounds.width, n.graphics.__owner.get_scaleX()),
                                    G = n.toScale9Position(ha.buffer.f[ha.fPos + 5], y.y, y.height, n.bounds.height, n.graphics.__owner.get_scaleY());
                                if (null != n.fillScale9Bounds && null != n.bitmapFill || null != n.strokeScale9Bounds && null != n.bitmapStroke) n.applyScale9GridUnscaledX(ha.buffer.f[ha.fPos + 4]), n.applyScale9GridUnscaledY(ha.buffer.f[ha.fPos + 5]), n.applyScale9GridScaledX(K), n.applyScale9GridScaledY(G);
                                n.context.bezierCurveTo(na - c, C - d, kb -
                                    c, M - d, K - c, G - d);
                                g = K;
                                f = G
                            } else n.context.bezierCurveTo(ha.buffer.f[ha.fPos] - c, ha.buffer.f[ha.fPos + 1] - d, ha.buffer.f[ha.fPos + 2] - c, ha.buffer.f[ha.fPos + 3] - d, ha.buffer.f[ha.fPos + 4] - c, ha.buffer.f[ha.fPos + 5] - d), g = ha.buffer.f[ha.fPos + 4], f = ha.buffer.f[ha.fPos + 5];
                            break;
                        case 5:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos += 2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.CURVE_TO;
                            var L = p;
                            t = !0;
                            if (u) {
                                var la = n.toScale9Position(L.buffer.f[L.fPos], y.x, y.width, n.bounds.width, n.graphics.__owner.get_scaleX()),
                                    lc = n.toScale9Position(L.buffer.f[L.fPos + 1], y.y, y.height, n.bounds.height, n.graphics.__owner.get_scaleY()),
                                    S = n.toScale9Position(L.buffer.f[L.fPos + 2], y.x, y.width, n.bounds.width, n.graphics.__owner.get_scaleX()),
                                    Jb = n.toScale9Position(L.buffer.f[L.fPos + 3], y.y, y.height, n.bounds.height, n.graphics.__owner.get_scaleY());
                                if (null != n.fillScale9Bounds && null != n.bitmapFill || null != n.strokeScale9Bounds && null != n.bitmapStroke) n.applyScale9GridUnscaledX(L.buffer.f[L.fPos + 2]), n.applyScale9GridUnscaledY(L.buffer.f[L.fPos +
                                3]), n.applyScale9GridScaledX(S), n.applyScale9GridScaledY(Jb);
                                n.context.quadraticCurveTo(la - c, lc - d, S - c, Jb - d);
                                g = S;
                                f = Jb
                            } else n.context.quadraticCurveTo(L.buffer.f[L.fPos] - c, L.buffer.f[L.fPos + 1] - d, L.buffer.f[L.fPos + 2] - c, L.buffer.f[L.fPos + 3] - d), g = L.buffer.f[L.fPos + 2], f = L.buffer.f[L.fPos + 3];
                            break;
                        case 6:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos +=
                                        4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos += 2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.DRAW_CIRCLE;
                            var P = p;
                            t = !0;
                            if (u) {
                                var W = n.toScale9Position(P.buffer.f[P.fPos] - P.buffer.f[P.fPos + 2], y.x,
                                        y.width, n.bounds.width, n.graphics.__owner.get_scaleX()),
                                    Ja = n.toScale9Position(P.buffer.f[P.fPos + 1] - P.buffer.f[P.fPos + 2], y.y, y.height, n.bounds.height, n.graphics.__owner.get_scaleY()),
                                    Y = n.toScale9Position(P.buffer.f[P.fPos] + P.buffer.f[P.fPos + 2], y.x, y.width, n.bounds.width, n.graphics.__owner.get_scaleX()),
                                    ea = n.toScale9Position(P.buffer.f[P.fPos + 1] + P.buffer.f[P.fPos + 2], y.y, y.height, n.bounds.height, n.graphics.__owner.get_scaleY());
                                if (null != n.fillScale9Bounds && null != n.bitmapFill || null != n.strokeScale9Bounds &&
                                    null != n.bitmapStroke) n.applyScale9GridUnscaledX(P.buffer.f[P.fPos] - P.buffer.f[P.fPos + 2]), n.applyScale9GridUnscaledY(P.buffer.f[P.fPos + 1] - P.buffer.f[P.fPos + 2]), n.applyScale9GridUnscaledX(P.buffer.f[P.fPos] + P.buffer.f[P.fPos + 2]), n.applyScale9GridUnscaledY(P.buffer.f[P.fPos + 1] + P.buffer.f[P.fPos + 2]), n.applyScale9GridScaledX(W), n.applyScale9GridScaledY(Ja), n.applyScale9GridScaledX(Y), n.applyScale9GridScaledY(ea);
                                var V = W - c;
                                var Z = Ja - d;
                                var aa = Y - W;
                                var X = ea - Ja;
                                if (0 != aa || 0 != X) {
                                    var Hc = aa / 2 * .5522848;
                                    var U = X / 2 *
                                        .5522848;
                                    var xa = V + aa;
                                    var hc = Z + X;
                                    var Zb = V + aa / 2;
                                    var ca = Z + X / 2;
                                    n.context.moveTo(V, ca);
                                    n.context.bezierCurveTo(V, ca - U, Zb - Hc, Z, Zb, Z);
                                    n.context.bezierCurveTo(Zb + Hc, Z, xa, ca - U, xa, ca);
                                    n.context.bezierCurveTo(xa, ca + U, Zb + Hc, hc, Zb, hc);
                                    n.context.bezierCurveTo(Zb - Hc, hc, V, ca + U, V, ca)
                                }
                            } else 0 != P.buffer.f[P.fPos + 2] && (n.context.moveTo(P.buffer.f[P.fPos] - c + P.buffer.f[P.fPos + 2], P.buffer.f[P.fPos + 1] - d), n.context.arc(P.buffer.f[P.fPos] - c, P.buffer.f[P.fPos + 1] - d, P.buffer.f[P.fPos + 2], 0, 2 * Math.PI, !0));
                            break;
                        case 7:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos +=
                                        2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos +=
                                        2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.DRAW_ELLIPSE;
                            var wb = p;
                            t = !0;
                            if (u) {
                                var da = n.toScale9Position(wb.buffer.f[wb.fPos], y.x, y.width, n.bounds.width, n.graphics.__owner.get_scaleX()),
                                    jb = n.toScale9Position(wb.buffer.f[wb.fPos + 1], y.y, y.height, n.bounds.height, n.graphics.__owner.get_scaleY()),
                                    ka = n.toScale9Position(wb.buffer.f[wb.fPos] + wb.buffer.f[wb.fPos + 2], y.x, y.width, n.bounds.width, n.graphics.__owner.get_scaleX()),
                                    Gb = n.toScale9Position(wb.buffer.f[wb.fPos + 1] + wb.buffer.f[wb.fPos + 3],
                                        y.y, y.height, n.bounds.height, n.graphics.__owner.get_scaleY());
                                if (null != n.fillScale9Bounds && null != n.bitmapFill || null != n.strokeScale9Bounds && null != n.bitmapStroke) n.applyScale9GridUnscaledX(wb.buffer.f[wb.fPos]), n.applyScale9GridUnscaledY(wb.buffer.f[wb.fPos + 1]), n.applyScale9GridUnscaledX(wb.buffer.f[wb.fPos] + wb.buffer.f[wb.fPos + 2]), n.applyScale9GridUnscaledY(wb.buffer.f[wb.fPos + 1] + wb.buffer.f[wb.fPos + 3]), n.applyScale9GridScaledX(da), n.applyScale9GridScaledY(jb), n.applyScale9GridScaledX(ka), n.applyScale9GridScaledY(Gb);
                                V = da;
                                Z = jb;
                                aa = ka - da;
                                X = Gb - jb
                            } else V = wb.buffer.f[wb.fPos], Z = wb.buffer.f[wb.fPos + 1], aa = wb.buffer.f[wb.fPos + 2], X = wb.buffer.f[wb.fPos + 3];
                            if (0 != aa || 0 != X) V -= c, Z -= d, Hc = aa / 2 * .5522848, U = X / 2 * .5522848, xa = V + aa, hc = Z + X, Zb = V + aa / 2, ca = Z + X / 2, n.context.moveTo(V, ca), n.context.bezierCurveTo(V, ca - U, Zb - Hc, Z, Zb, Z), n.context.bezierCurveTo(Zb + Hc, Z, xa, ca - U, xa, ca), n.context.bezierCurveTo(xa, ca + U, Zb + Hc, hc, Zb, hc), n.context.bezierCurveTo(Zb - Hc, hc, V, ca + U, V, ca);
                            break;
                        case 8:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos += 2;
                                    break;
                                case 19:
                                    p.oPos +=
                                        1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.DRAW_QUADS;
                            var ia = p,
                                mc = ia.buffer.o[ia.oPos],
                                Ba = ia.buffer.o[ia.oPos + 1],
                                oa = ia.buffer.o[ia.oPos + 2],
                                qa = null != Ba,
                                ma = !1,
                                qc = !1,
                                ra = qa ? Ba.get_length() : Math.floor(mc.get_length() / 4);
                            if (0 == ra) return;
                            null != oa && (oa.get_length() >= 6 * ra ? qc = ma = !0 : oa.get_length() >= 4 * ra ? ma = !0 : oa.get_length() >= 2 * ra && (qc = !0));
                            var fa = sa.__pool.get(),
                                fc = va.__pool.get(),
                                $d = n.graphics.__renderTransform;
                            n.context.save();
                            for (var Tb = 0, pa = ra; Tb < pa;) {
                                var ua = Tb++;
                                var ya = qa ? 4 * Ba.get(ua) : 4 * ua;
                                if (!(0 > ya || (fa.setTo(mc.get(ya),
                                    mc.get(ya + 1), mc.get(ya + 2), mc.get(ya + 3)), 0 >= fa.width || 0 >= fa.height))) {
                                    if (ma && qc) {
                                        var Xa = 6 * ua;
                                        fc.setTo(oa.get(Xa), oa.get(Xa + 1), oa.get(Xa + 2), oa.get(Xa + 3), oa.get(Xa + 4), oa.get(Xa + 5))
                                    } else ma ? (Xa = 4 * ua, fc.setTo(oa.get(Xa), oa.get(Xa + 1), oa.get(Xa + 2), oa.get(Xa + 3), fa.x, fa.y)) : qc ? (Xa = 2 * ua, fc.tx = oa.get(Xa), fc.ty = oa.get(Xa + 1)) : (fc.tx = fa.x, fc.ty = fa.y);
                                    fc.tx += g - c;
                                    fc.ty += f - d;
                                    fc.concat($d);
                                    n.context.setTransform(fc.a, fc.b, fc.c, fc.d, fc.tx, fc.ty);
                                    null != n.bitmapFill && n.bitmapFill.readable ? n.context.drawImage(n.bitmapFill.image.get_src(),
                                        fa.x, fa.y, fa.width, fa.height, 0, 0, fa.width, fa.height) : n.context.fillRect(0, 0, fa.width, fa.height)
                                }
                            }
                            sa.__pool.release(fa);
                            va.__pool.release(fc);
                            n.context.restore();
                            break;
                        case 9:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos +=
                                        1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos += 2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.DRAW_RECT;
                            var ba = p;
                            var Ga = !1;
                            if (null != n.bitmapFill && n.bitmapFill.readable && !n.hitTesting && !u) {
                                var Ca = A = x = z = 0;
                                var Ya = !0;
                                if (null != n.pendingMatrix)
                                    if (0 != n.pendingMatrix.b || 0 != n.pendingMatrix.c) Ya = !1;
                                    else {
                                        null == m && (m = F.__pool.get());
                                        null == Q && (Q = F.__pool.get());
                                        m.setTo(ba.buffer.f[ba.fPos], ba.buffer.f[ba.fPos + 1]);
                                        var Ea = n.inversePendingMatrix,
                                            Ka = m.x,
                                            rb = m.y;
                                        m.x = Ka * Ea.a + rb * Ea.c + Ea.tx;
                                        m.y = Ka * Ea.b + rb * Ea.d + Ea.ty;
                                        Q.setTo(ba.buffer.f[ba.fPos] + ba.buffer.f[ba.fPos + 2], ba.buffer.f[ba.fPos + 1] + ba.buffer.f[ba.fPos + 3]);
                                        var Oa = n.inversePendingMatrix,
                                            Pa = Q.x,
                                            Fb = Q.y;
                                        Q.x = Pa * Oa.a + Fb * Oa.c + Oa.tx;
                                        Q.y = Pa * Oa.b + Fb * Oa.d + Oa.ty;
                                        z = m.y;
                                        Ca = m.x;
                                        A = Q.y;
                                        x = Q.x
                                    }
                                else z = ba.buffer.f[ba.fPos + 1], Ca = ba.buffer.f[ba.fPos], A = ba.buffer.f[ba.fPos + 1] + ba.buffer.f[ba.fPos + 3], x =
                                    ba.buffer.f[ba.fPos] + ba.buffer.f[ba.fPos + 2];
                                Ya && 0 <= z && 0 <= Ca && x <= n.bitmapFill.width && A <= n.bitmapFill.height && (Ga = !0, n.hitTesting || n.context.drawImage(n.bitmapFill.image.get_src(), Ca, z, x - Ca, A - z, ba.buffer.f[ba.fPos] - c, ba.buffer.f[ba.fPos + 1] - d, ba.buffer.f[ba.fPos + 2], ba.buffer.f[ba.fPos + 3]))
                            }
                            if (!Ga)
                                if (t = !0, u) {
                                    var Aa = n.toScale9Position(ba.buffer.f[ba.fPos], y.x, y.width, n.bounds.width, n.graphics.__owner.get_scaleX()),
                                        Na = n.toScale9Position(ba.buffer.f[ba.fPos + 1], y.y, y.height, n.bounds.height, n.graphics.__owner.get_scaleY()),
                                        Da = n.toScale9Position(ba.buffer.f[ba.fPos] + ba.buffer.f[ba.fPos + 2], y.x, y.width, n.bounds.width, n.graphics.__owner.get_scaleX()),
                                        Ta = n.toScale9Position(ba.buffer.f[ba.fPos + 1] + ba.buffer.f[ba.fPos + 3], y.y, y.height, n.bounds.height, n.graphics.__owner.get_scaleY());
                                    if (null != n.fillScale9Bounds && null != n.bitmapFill || null != n.strokeScale9Bounds && null != n.bitmapStroke) n.applyScale9GridUnscaledX(ba.buffer.f[ba.fPos]), n.applyScale9GridUnscaledY(ba.buffer.f[ba.fPos + 1]), n.applyScale9GridUnscaledX(ba.buffer.f[ba.fPos] +
                                        ba.buffer.f[ba.fPos + 2]), n.applyScale9GridUnscaledY(ba.buffer.f[ba.fPos + 1] + ba.buffer.f[ba.fPos + 3]), n.applyScale9GridScaledX(Aa), n.applyScale9GridScaledY(Na), n.applyScale9GridScaledX(Da), n.applyScale9GridScaledY(Ta);
                                    var Ua = Da - Aa,
                                        Wa = Ta - Na;
                                    0 == Ua && 0 == Wa || n.context.rect(Aa - c, Na - d, Ua, Wa)
                                } else 0 == ba.buffer.f[ba.fPos + 2] && 0 == ba.buffer.f[ba.fPos + 3] || n.context.rect(ba.buffer.f[ba.fPos] - c, ba.buffer.f[ba.fPos + 1] - d, ba.buffer.f[ba.fPos + 2], ba.buffer.f[ba.fPos + 3]);
                            break;
                        case 10:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos +=
                                        2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos +=
                                        2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.DRAW_ROUND_RECT;
                            var tb = p;
                            t = !0;
                            n.drawRoundRect(tb.buffer.f[tb.fPos] - c, tb.buffer.f[tb.fPos + 1] - d, tb.buffer.f[tb.fPos + 2], tb.buffer.f[tb.fPos + 3], tb.buffer.f[tb.fPos + 4], tb.buffer.o[tb.oPos], y, n.bounds.width, n.bounds.height, n.graphics.__owner.get_scaleX(), n.graphics.__owner.get_scaleY());
                            break;
                        case 12:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos += 2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.DRAW_TRIANGLES;
                            var La = p,
                                wa = La.buffer.o[La.oPos],
                                ec = La.buffer.o[La.oPos + 1],
                                Ia = La.buffer.o[La.oPos + 2],
                                Ma = null,
                                Za = null == n.bitmapFill;
                            if (Za && null != Ia) break a;
                            if (!Za && null != Ia) {
                                var db = Ia.get_length() != wa.get_length(),
                                    bb = n.normalizeUVT(Ia, db),
                                    cb = bb.max;
                                Ia = bb.uvt;
                                Ma = 1 < cb ? n.createTempPatternCanvas(n.bitmapFill, n.bitmapRepeat, n.bounds.width | 0, n.bounds.height | 0) : n.createTempPatternCanvas(n.bitmapFill, n.bitmapRepeat, n.bitmapFill.width, n.bitmapFill.height)
                            }
                            for (var yb = 0, Ha = ec.get_length(), ab, za, gd, Sa, Va, Bc, $a, qb, zb, fb, Ra, ib, Sb, gb, ob, pb, Cc, mb, lb, nb, eb, hb, ub,
                                     Ab, Cb, zc, Eb, ae; yb < Ha;) {
                                ab = yb;
                                za = yb + 1;
                                gd = yb + 2;
                                Sa = 2 * ec.get(ab);
                                Va = 2 * ec.get(ab) + 1;
                                Bc = 2 * ec.get(za);
                                $a = 2 * ec.get(za) + 1;
                                qb = 2 * ec.get(gd);
                                zb = 2 * ec.get(gd) + 1;
                                if (u) {
                                    var Db = n.toScale9Position(wa.get(Sa), y.x, y.width, n.bounds.width, n.graphics.__owner.get_scaleX()),
                                        Ib = n.toScale9Position(wa.get(Va), y.y, y.height, n.bounds.height, n.graphics.__owner.get_scaleY()),
                                        Bd = n.toScale9Position(wa.get(Bc), y.x, y.width, n.bounds.width, n.graphics.__owner.get_scaleX()),
                                        Gd = n.toScale9Position(wa.get($a), y.y, y.height, n.bounds.height, n.graphics.__owner.get_scaleY()),
                                        Pb = n.toScale9Position(wa.get(qb), y.x, y.width, n.bounds.width, n.graphics.__owner.get_scaleX()),
                                        Mb = n.toScale9Position(wa.get(zb), y.y, y.height, n.bounds.height, n.graphics.__owner.get_scaleY());
                                    if (null != n.fillScale9Bounds && null != n.bitmapFill || null != n.strokeScale9Bounds && null != n.bitmapStroke) n.applyScale9GridUnscaledX(wa.get(Sa)), n.applyScale9GridUnscaledY(wa.get(Va)), n.applyScale9GridUnscaledX(wa.get(Bc)), n.applyScale9GridUnscaledY(wa.get($a)), n.applyScale9GridUnscaledX(wa.get(qb)), n.applyScale9GridUnscaledY(wa.get(zb)),
                                        n.applyScale9GridScaledX(Db), n.applyScale9GridScaledY(Ib), n.applyScale9GridScaledX(Bd), n.applyScale9GridScaledY(Gd), n.applyScale9GridScaledX(Pb), n.applyScale9GridScaledY(Mb);
                                    fb = Db - c;
                                    Ra = Ib - d;
                                    ib = Bd - c;
                                    Sb = Gd - d;
                                    gb = Pb - c;
                                    ob = Mb - d
                                } else fb = wa.get(Sa) - c, Ra = wa.get(Va) - d, ib = wa.get(Bc) - c, Sb = wa.get($a) - d, gb = wa.get(qb) - c, ob = wa.get(zb) - d;
                                switch (La.buffer.o[La.oPos + 3]) {
                                    case 0:
                                        if (0 > (ib - fb) * (ob - Ra) - (Sb - Ra) * (gb - fb)) {
                                            yb += 3;
                                            continue
                                        }
                                        break;
                                    case 2:
                                        if (!(0 > (ib - fb) * (ob - Ra) - (Sb - Ra) * (gb - fb))) {
                                            yb += 3;
                                            continue
                                        }
                                }
                                if (Za || null == Ia) {
                                    n.context.beginPath();
                                    n.context.moveTo(fb, Ra);
                                    n.context.lineTo(ib, Sb);
                                    n.context.lineTo(gb, ob);
                                    n.context.closePath();
                                    var ac = 0,
                                        Bb = 0,
                                        Ob = 1,
                                        Kb = 1;
                                    if (!n.hitTesting && u && null != n.fillScale9Bounds && null != n.bitmapFill) {
                                        var Mc = n.fillScale9Bounds.getScaleX(),
                                            vb = n.fillScale9Bounds.getScaleY();
                                        if (0 < Mc && 0 < vb) {
                                            n.context.scale(Mc, vb);
                                            Ob = 1 / Mc;
                                            Kb = 1 / vb;
                                            var Lb = n.fillScale9Bounds.unscaledMinX % n.bitmapFill.width,
                                                Wb = n.fillScale9Bounds.unscaledMinY % n.bitmapFill.height,
                                                Nb = n.fillScale9Bounds.scale9MinX % (n.bitmapFill.width * Mc) / Mc,
                                                Vb = n.fillScale9Bounds.scale9MinY %
                                                    (n.bitmapFill.height * vb) / vb,
                                                Ub = Nb - Lb,
                                                jd = Vb - Wb;
                                            n.context.translate(Ub, jd);
                                            ac = -Ub;
                                            Bb = -jd
                                        }
                                    }
                                    n.hitTesting || n.context.fill(n.windingRule);
                                    !n.hitTesting && u && null != n.fillScale9Bounds && null != n.bitmapFill && (n.context.translate(ac, Bb), n.context.scale(Ob, Kb));
                                    yb += 3
                                } else pb = Ia.get(Sa) * Ma.width, mb = Ia.get(Bc) * Ma.width, nb = Ia.get(qb) * Ma.width, Cc = Ia.get(Va) * Ma.height, lb = Ia.get($a) * Ma.height, eb = Ia.get(zb) * Ma.height, hb = pb * (eb - lb) - mb * eb + nb * lb + (mb - nb) * Cc, 0 == hb ? (yb += 3, n.context.restore()) : (n.context.save(), n.context.beginPath(),
                                    n.context.moveTo(fb, Ra), n.context.lineTo(ib, Sb), n.context.lineTo(gb, ob), n.context.closePath(), n.context.clip(), ub = -(Cc * (gb - ib) - lb * gb + eb * ib + (lb - eb) * fb) / hb, Ab = (lb * ob + Cc * (Sb - ob) - eb * Sb + (eb - lb) * Ra) / hb, Cb = (pb * (gb - ib) - mb * gb + nb * ib + (mb - nb) * fb) / hb, zc = -(mb * ob + pb * (Sb - ob) - nb * Sb + (nb - mb) * Ra) / hb, Eb = (pb * (eb * ib - lb * gb) + Cc * (mb * gb - nb * ib) + (nb * lb - mb * eb) * fb) / hb, ae = (pb * (eb * Sb - lb * ob) + Cc * (mb * ob - nb * Sb) + (nb * lb - mb * eb) * Ra) / hb, n.context.transform(ub, Ab, Cb, zc, Eb, ae), n.context.drawImage(Ma, 0, 0, Ma.width, Ma.height), n.context.restore(),
                                    yb += 3)
                            }
                            break;
                        case 14:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos +=
                                        1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos += 2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.LINE_BITMAP_STYLE;
                            var sb = p;
                            b && n.hasStroke && n.closePath(!0);
                            n.context.moveTo(g - c, f - d);
                            if (sb.buffer.o[sb.oPos].readable) n.strokePattern = n.createBitmapFill(sb.buffer.o[sb.oPos], sb.buffer.b[sb.bPos], sb.buffer.b[sb.bPos + 1]), n.context.strokeStyle = n.strokePattern, n.bitmapStroke = sb.buffer.o[sb.oPos], n.bitmapStrokeMatrix = sb.buffer.o[sb.oPos + 1];
                            else {
                                var cc = T.hex(0, 6);
                                n.context.strokeStyle =
                                    "#" + cc;
                                n.strokePattern = null;
                                n.bitmapStroke = null;
                                n.bitmapStrokeMatrix = null
                            }
                            null != n.strokeScale9Bounds ? n.strokeScale9Bounds.clear() : u && null != n.bitmapStroke && (n.strokeScale9Bounds = new Yj);
                            n.hasStroke = !0;
                            break;
                        case 15:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos +=
                                        4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos += 2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.LINE_GRADIENT_STYLE;
                            var Qa = p;
                            b && n.hasStroke && n.closePath(!0);
                            n.context.moveTo(g - c, f - d);
                            n.strokePattern = n.createGradientPattern(Qa.buffer.o[Qa.oPos], Qa.buffer.ii[Qa.iiPos], Qa.buffer.ff[Qa.ffPos],
                                Qa.buffer.ii[Qa.iiPos + 1], Qa.buffer.o[Qa.oPos + 1], Qa.buffer.o[Qa.oPos + 2], Qa.buffer.o[Qa.oPos + 3], Qa.buffer.f[Qa.fPos]);
                            n.context.strokeStyle = n.strokePattern;
                            n.setSmoothing(!0);
                            n.hasStroke = !0;
                            n.bitmapStroke = null;
                            n.bitmapStrokeMatrix = null;
                            break;
                        case 16:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos +=
                                        4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos += 2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.LINE_STYLE;
                            var dc = p;
                            b && n.hasStroke && n.closePath(!0);
                            n.context.moveTo(g - c, f - d);
                            if (null == dc.buffer.o[dc.oPos]) n.hasStroke = !1;
                            else {
                                n.hasStroke = !0;
                                n.context.lineWidth =
                                    0 < dc.buffer.o[dc.oPos] ? dc.buffer.o[dc.oPos] : 1;
                                var ic = null == dc.buffer.o[dc.oPos + 3] ? "round" : (null == dc.buffer.o[dc.oPos + 3] ? "null" : Gm.toString(dc.buffer.o[dc.oPos + 3])).toLowerCase();
                                n.context.lineJoin = ic;
                                var Ac = null == dc.buffer.o[dc.oPos + 2] ? "round" : 0 == dc.buffer.o[dc.oPos + 2] ? "butt" : (null == dc.buffer.o[dc.oPos + 2] ? "null" : Fm.toString(dc.buffer.o[dc.oPos + 2])).toLowerCase();
                                n.context.lineCap = Ac;
                                n.context.miterLimit = dc.buffer.f[dc.fPos + 1];
                                if (1 == dc.buffer.f[dc.fPos]) {
                                    var ye = T.hex(dc.buffer.i[dc.iPos] & 16777215,
                                        6);
                                    n.context.strokeStyle = "#" + ye
                                } else I = (dc.buffer.i[dc.iPos] & 16711680) >>> 16, J = (dc.buffer.i[dc.iPos] & 65280) >>> 8, E = dc.buffer.i[dc.iPos] & 255, n.context.strokeStyle = "rgba(" + I + ", " + J + ", " + E + ", " + dc.buffer.f[dc.fPos] + ")";
                                n.setSmoothing(!0)
                            }
                            n.strokePattern = null;
                            n.bitmapStroke = null;
                            n.bitmapStrokeMatrix = null;
                            break;
                        case 17:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos += 2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.LINE_TO;
                            var xb = p;
                            t = !0;
                            if (u) {
                                var Xb = n.toScale9Position(xb.buffer.f[xb.fPos], y.x, y.width,
                                        n.bounds.width, n.graphics.__owner.get_scaleX()),
                                    $b = n.toScale9Position(xb.buffer.f[xb.fPos + 1], y.y, y.height, n.bounds.height, n.graphics.__owner.get_scaleY());
                                if (null != n.fillScale9Bounds && null != n.bitmapFill || null != n.strokeScale9Bounds && null != n.bitmapStroke) n.applyScale9GridUnscaledX(xb.buffer.f[xb.fPos]), n.applyScale9GridUnscaledY(xb.buffer.f[xb.fPos + 1]), n.applyScale9GridScaledX(Xb), n.applyScale9GridScaledY($b);
                                g == Xb && f == $b || n.context.lineTo(Xb - c, $b - d);
                                g = Xb;
                                f = $b
                            } else g == xb.buffer.f[xb.fPos] && f == xb.buffer.f[xb.fPos +
                            1] || n.context.lineTo(xb.buffer.f[xb.fPos] - c, xb.buffer.f[xb.fPos + 1] - d), g = xb.buffer.f[xb.fPos], f = xb.buffer.f[xb.fPos + 1];
                            g == h && f == l && (k = !0);
                            break;
                        case 18:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos +=
                                        4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos += 2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = ja.MOVE_TO;
                            var Hb = p;
                            if (u) {
                                var bc = n.toScale9Position(Hb.buffer.f[Hb.fPos], y.x, y.width, n.bounds.width, n.graphics.__owner.get_scaleX()),
                                    Yb = n.toScale9Position(Hb.buffer.f[Hb.fPos + 1], y.y, y.height, n.bounds.height, n.graphics.__owner.get_scaleY());
                                if (null != n.fillScale9Bounds &&
                                    null != n.bitmapFill || null != n.strokeScale9Bounds && null != n.bitmapStroke) n.applyScale9GridUnscaledX(Hb.buffer.f[Hb.fPos]), n.applyScale9GridUnscaledY(Hb.buffer.f[Hb.fPos + 1]), n.applyScale9GridScaledX(bc), n.applyScale9GridScaledY(Yb);
                                n.context.moveTo(bc - c, Yb - d);
                                g = bc;
                                f = Yb
                            } else n.context.moveTo(Hb.buffer.f[Hb.fPos] - c, Hb.buffer.f[Hb.fPos + 1] - d), g = Hb.buffer.f[Hb.fPos], f = Hb.buffer.f[Hb.fPos + 1];
                            r && g != h && f != l && (k = !0);
                            h = g;
                            l = f;
                            r = !0;
                            break;
                        case 21:
                            n.windingRule = "evenodd";
                            break;
                        case 22:
                            n.windingRule = "nonzero";
                            break;
                        default:
                            switch (p.prev._hx_index) {
                                case 0:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 1:
                                    p.iPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 2:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 3:
                                    p.oPos += 1;
                                    break;
                                case 4:
                                    p.fPos += 6;
                                    break;
                                case 5:
                                    p.fPos += 4;
                                    break;
                                case 6:
                                    p.fPos += 3;
                                    break;
                                case 7:
                                    p.fPos += 4;
                                    break;
                                case 8:
                                    p.oPos += 3;
                                    break;
                                case 9:
                                    p.fPos += 4;
                                    break;
                                case 10:
                                    p.fPos += 5;
                                    p.oPos += 1;
                                    break;
                                case 12:
                                    p.oPos += 4;
                                    break;
                                case 14:
                                    p.oPos += 2;
                                    p.bPos += 2;
                                    break;
                                case 15:
                                    p.oPos += 4;
                                    p.iiPos += 2;
                                    p.ffPos += 1;
                                    p.fPos += 1;
                                    break;
                                case 16:
                                    p.oPos += 4;
                                    p.iPos += 1;
                                    p.fPos += 2;
                                    p.bPos += 1;
                                    break;
                                case 17:
                                    p.fPos += 2;
                                    break;
                                case 18:
                                    p.fPos += 2;
                                    break;
                                case 19:
                                    p.oPos += 1;
                                    break;
                                case 20:
                                    p.oPos += 1
                            }
                            p.prev = w
                    }
                }
                null != m && F.__pool.release(m);
                null != Q && F.__pool.release(Q);
                p.destroy();
                if (t) {
                    if (b && n.hasStroke) {
                        if (n.hasFill) {
                            if (g != h || f != l) n.context.lineTo(h - c, l - d), k = !0;
                            k && n.closePath(!0)
                        } else k && g == h && f == l && n.closePath(!0);
                        if (!n.hitTesting && null != n.strokePattern && (null != n.bitmapStrokeMatrix || u && null != n.strokeScale9Bounds && null != n.bitmapStroke)) {
                            var Qb = va.__pool.get();
                            null != n.bitmapStrokeMatrix ? Qb.copyFrom(n.bitmapStrokeMatrix) :
                                Qb.identity();
                            u && null != n.strokeScale9Bounds && null != n.bitmapStroke && (Mc = n.strokeScale9Bounds.getScaleX(), vb = n.strokeScale9Bounds.getScaleY(), 0 < Mc && 0 < vb && Qb.scale(Mc, vb));
                            var Rb = new DOMMatrix([Qb.a, Qb.b, Qb.c, Qb.d, Qb.tx, Qb.ty]);
                            n.strokePattern.setTransform(Rb);
                            va.__pool.release(Qb)
                        }
                        n.hitTesting || n.context.stroke()
                    }
                    b || !n.hasFill && null == n.bitmapFill || (n.context.translate(-n.bounds.x, -n.bounds.y), Bb = ac = 0, Kb = Ob = 1, !n.hitTesting && u && null != n.fillScale9Bounds && null != n.bitmapFill && (Mc = n.fillScale9Bounds.getScaleX(),
                        vb = n.fillScale9Bounds.getScaleY(), 0 < Mc && 0 < vb && (n.context.scale(Mc, vb), Ob = 1 / Mc, Kb = 1 / vb, Lb = n.fillScale9Bounds.unscaledMinX % n.bitmapFill.width, Wb = n.fillScale9Bounds.unscaledMinY % n.bitmapFill.height, Nb = n.fillScale9Bounds.scale9MinX % (n.bitmapFill.width * Mc) / Mc, Vb = n.fillScale9Bounds.scale9MinY % (n.bitmapFill.height * vb) / vb, Ub = Nb - Lb, jd = Vb - Wb, n.context.translate(Ub, jd), ac = -Ub, Bb = -jd)), null != n.pendingMatrix ? (n.context.transform(n.pendingMatrix.a, n.pendingMatrix.b, n.pendingMatrix.c, n.pendingMatrix.d, n.pendingMatrix.tx,
                        n.pendingMatrix.ty), n.hitTesting || n.context.fill(n.windingRule), n.context.transform(n.inversePendingMatrix.a, n.inversePendingMatrix.b, n.inversePendingMatrix.c, n.inversePendingMatrix.d, n.inversePendingMatrix.tx, n.inversePendingMatrix.ty)) : n.hitTesting || n.context.fill(n.windingRule), !n.hitTesting && u && null != n.fillScale9Bounds && null != n.bitmapFill && (n.context.translate(ac, Bb), n.context.scale(Ob, Kb)), n.context.translate(n.bounds.x, n.bounds.y), n.context.closePath())
                }
            };
            n.render = function (a, b) {
                var c = b.__pixelRatio;
                null == a.__owner.__scale9Grid || a.__owner.__isMask || 0 != a.__worldTransform.b || 0 != a.__worldTransform.c ? (a.__bitmapScaleX = 1, a.__bitmapScaleY = 1) : (a.__bitmapScaleX = a.__owner.get_scaleX(), a.__bitmapScaleY = a.__owner.get_scaleY());
                a.__update(b.__worldTransform, c);
                if (a.__softwareDirty) {
                    n.hitTesting = !1;
                    n.graphics = a;
                    n.allowSmoothing = b.__allowSmoothing;
                    n.worldAlpha = b.__getAlpha(a.__owner.__worldAlpha);
                    n.bounds = a.__bounds;
                    var d = a.__width,
                        g = a.__height;
                    if (!a.__visible || 0 == a.__commands.get_length() || null == n.bounds ||
                        1 > d || 1 > g) a.__canvas = null, a.__context = null, a.__bitmap = null;
                    else {
                        null == a.__canvas && (a.__canvas = window.document.createElement("canvas"), a.__context = a.__canvas.getContext("2d"));
                        n.context = a.__context;
                        var f = a.__renderTransform,
                            k = a.__canvas;
                        c = b.__pixelRatio;
                        var h = d * c | 0,
                            l = g * c | 0;
                        b.__setBlendModeContext(n.context, 10);
                        b.__isDOM ? (k.width == h && k.height == l ? n.context.clearRect(0, 0, h, l) : (k.width = h, k.height = l, k.style.width = d + "px", k.style.height = g + "px"), d = a.__renderTransform, n.context.setTransform(d.a * c, d.b * c, d.c *
                            c, d.d * c, d.tx * c, d.ty * c)) : (k.width == h && k.height == l ? (n.context.closePath(), n.context.setTransform(1, 0, 0, 1, 0, 0), n.context.clearRect(0, 0, h, l)) : (k.width = d, k.height = g), n.context.setTransform(f.a, f.b, f.c, f.d, f.tx, f.ty));
                        n.fillCommands.clear();
                        n.strokeCommands.clear();
                        n.hasFill = !1;
                        n.hasStroke = !1;
                        n.bitmapFill = null;
                        c = n.bitmapRepeat = !1;
                        g = d = 0;
                        n.windingRule = "evenodd";
                        f = new te(a.__commands);
                        k = 0;
                        for (h = a.__commands.types; k < h.length;) switch (l = h[k], ++k, l._hx_index) {
                            case 0:
                            case 1:
                            case 2:
                            case 3:
                                n.endFill();
                                n.endStroke();
                                if (l == ja.BEGIN_BITMAP_FILL) {
                                    switch (f.prev._hx_index) {
                                        case 0:
                                            f.oPos += 2;
                                            f.bPos += 2;
                                            break;
                                        case 1:
                                            f.iPos += 1;
                                            f.fPos += 1;
                                            break;
                                        case 2:
                                            f.oPos += 4;
                                            f.iiPos += 2;
                                            f.ffPos += 1;
                                            f.fPos += 1;
                                            break;
                                        case 3:
                                            f.oPos += 1;
                                            break;
                                        case 4:
                                            f.fPos += 6;
                                            break;
                                        case 5:
                                            f.fPos += 4;
                                            break;
                                        case 6:
                                            f.fPos += 3;
                                            break;
                                        case 7:
                                            f.fPos += 4;
                                            break;
                                        case 8:
                                            f.oPos += 3;
                                            break;
                                        case 9:
                                            f.fPos += 4;
                                            break;
                                        case 10:
                                            f.fPos += 5;
                                            f.oPos += 1;
                                            break;
                                        case 12:
                                            f.oPos += 4;
                                            break;
                                        case 14:
                                            f.oPos += 2;
                                            f.bPos += 2;
                                            break;
                                        case 15:
                                            f.oPos += 4;
                                            f.iiPos += 2;
                                            f.ffPos += 1;
                                            f.fPos += 1;
                                            break;
                                        case 16:
                                            f.oPos += 4;
                                            f.iPos += 1;
                                            f.fPos += 2;
                                            f.bPos += 1;
                                            break;
                                        case 17:
                                            f.fPos += 2;
                                            break;
                                        case 18:
                                            f.fPos += 2;
                                            break;
                                        case 19:
                                            f.oPos += 1;
                                            break;
                                        case 20:
                                            f.oPos += 1
                                    }
                                    f.prev = ja.BEGIN_BITMAP_FILL;
                                    l = f;
                                    n.fillCommands.beginBitmapFill(l.buffer.o[l.oPos], l.buffer.o[l.oPos + 1], l.buffer.b[l.bPos], l.buffer.b[l.bPos + 1]);
                                    n.strokeCommands.beginBitmapFill(l.buffer.o[l.oPos], l.buffer.o[l.oPos + 1], l.buffer.b[l.bPos], l.buffer.b[l.bPos + 1])
                                } else if (l == ja.BEGIN_GRADIENT_FILL) {
                                    switch (f.prev._hx_index) {
                                        case 0:
                                            f.oPos += 2;
                                            f.bPos += 2;
                                            break;
                                        case 1:
                                            f.iPos += 1;
                                            f.fPos +=
                                                1;
                                            break;
                                        case 2:
                                            f.oPos += 4;
                                            f.iiPos += 2;
                                            f.ffPos += 1;
                                            f.fPos += 1;
                                            break;
                                        case 3:
                                            f.oPos += 1;
                                            break;
                                        case 4:
                                            f.fPos += 6;
                                            break;
                                        case 5:
                                            f.fPos += 4;
                                            break;
                                        case 6:
                                            f.fPos += 3;
                                            break;
                                        case 7:
                                            f.fPos += 4;
                                            break;
                                        case 8:
                                            f.oPos += 3;
                                            break;
                                        case 9:
                                            f.fPos += 4;
                                            break;
                                        case 10:
                                            f.fPos += 5;
                                            f.oPos += 1;
                                            break;
                                        case 12:
                                            f.oPos += 4;
                                            break;
                                        case 14:
                                            f.oPos += 2;
                                            f.bPos += 2;
                                            break;
                                        case 15:
                                            f.oPos += 4;
                                            f.iiPos += 2;
                                            f.ffPos += 1;
                                            f.fPos += 1;
                                            break;
                                        case 16:
                                            f.oPos += 4;
                                            f.iPos += 1;
                                            f.fPos += 2;
                                            f.bPos += 1;
                                            break;
                                        case 17:
                                            f.fPos += 2;
                                            break;
                                        case 18:
                                            f.fPos += 2;
                                            break;
                                        case 19:
                                            f.oPos += 1;
                                            break;
                                        case 20:
                                            f.oPos +=
                                                1
                                    }
                                    f.prev = ja.BEGIN_GRADIENT_FILL;
                                    l = f;
                                    n.fillCommands.beginGradientFill(l.buffer.o[l.oPos], l.buffer.ii[l.iiPos], l.buffer.ff[l.ffPos], l.buffer.ii[l.iiPos + 1], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3], l.buffer.f[l.fPos]);
                                    n.strokeCommands.beginGradientFill(l.buffer.o[l.oPos], l.buffer.ii[l.iiPos], l.buffer.ff[l.ffPos], l.buffer.ii[l.iiPos + 1], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3], l.buffer.f[l.fPos])
                                } else if (l == ja.BEGIN_SHADER_FILL) {
                                    switch (f.prev._hx_index) {
                                        case 0:
                                            f.oPos +=
                                                2;
                                            f.bPos += 2;
                                            break;
                                        case 1:
                                            f.iPos += 1;
                                            f.fPos += 1;
                                            break;
                                        case 2:
                                            f.oPos += 4;
                                            f.iiPos += 2;
                                            f.ffPos += 1;
                                            f.fPos += 1;
                                            break;
                                        case 3:
                                            f.oPos += 1;
                                            break;
                                        case 4:
                                            f.fPos += 6;
                                            break;
                                        case 5:
                                            f.fPos += 4;
                                            break;
                                        case 6:
                                            f.fPos += 3;
                                            break;
                                        case 7:
                                            f.fPos += 4;
                                            break;
                                        case 8:
                                            f.oPos += 3;
                                            break;
                                        case 9:
                                            f.fPos += 4;
                                            break;
                                        case 10:
                                            f.fPos += 5;
                                            f.oPos += 1;
                                            break;
                                        case 12:
                                            f.oPos += 4;
                                            break;
                                        case 14:
                                            f.oPos += 2;
                                            f.bPos += 2;
                                            break;
                                        case 15:
                                            f.oPos += 4;
                                            f.iiPos += 2;
                                            f.ffPos += 1;
                                            f.fPos += 1;
                                            break;
                                        case 16:
                                            f.oPos += 4;
                                            f.iPos += 1;
                                            f.fPos += 2;
                                            f.bPos += 1;
                                            break;
                                        case 17:
                                            f.fPos += 2;
                                            break;
                                        case 18:
                                            f.fPos +=
                                                2;
                                            break;
                                        case 19:
                                            f.oPos += 1;
                                            break;
                                        case 20:
                                            f.oPos += 1
                                    }
                                    f.prev = ja.BEGIN_SHADER_FILL;
                                    l = f;
                                    n.fillCommands.beginShaderFill(l.buffer.o[l.oPos]);
                                    n.strokeCommands.beginShaderFill(l.buffer.o[l.oPos])
                                } else {
                                    switch (f.prev._hx_index) {
                                        case 0:
                                            f.oPos += 2;
                                            f.bPos += 2;
                                            break;
                                        case 1:
                                            f.iPos += 1;
                                            f.fPos += 1;
                                            break;
                                        case 2:
                                            f.oPos += 4;
                                            f.iiPos += 2;
                                            f.ffPos += 1;
                                            f.fPos += 1;
                                            break;
                                        case 3:
                                            f.oPos += 1;
                                            break;
                                        case 4:
                                            f.fPos += 6;
                                            break;
                                        case 5:
                                            f.fPos += 4;
                                            break;
                                        case 6:
                                            f.fPos += 3;
                                            break;
                                        case 7:
                                            f.fPos += 4;
                                            break;
                                        case 8:
                                            f.oPos += 3;
                                            break;
                                        case 9:
                                            f.fPos += 4;
                                            break;
                                        case 10:
                                            f.fPos +=
                                                5;
                                            f.oPos += 1;
                                            break;
                                        case 12:
                                            f.oPos += 4;
                                            break;
                                        case 14:
                                            f.oPos += 2;
                                            f.bPos += 2;
                                            break;
                                        case 15:
                                            f.oPos += 4;
                                            f.iiPos += 2;
                                            f.ffPos += 1;
                                            f.fPos += 1;
                                            break;
                                        case 16:
                                            f.oPos += 4;
                                            f.iPos += 1;
                                            f.fPos += 2;
                                            f.bPos += 1;
                                            break;
                                        case 17:
                                            f.fPos += 2;
                                            break;
                                        case 18:
                                            f.fPos += 2;
                                            break;
                                        case 19:
                                            f.oPos += 1;
                                            break;
                                        case 20:
                                            f.oPos += 1
                                    }
                                    f.prev = ja.BEGIN_FILL;
                                    l = f;
                                    n.fillCommands.beginFill(l.buffer.i[l.iPos], l.buffer.f[l.fPos]);
                                    n.strokeCommands.beginFill(l.buffer.i[l.iPos], l.buffer.f[l.fPos])
                                }
                                break;
                            case 4:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos +=
                                            1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.CUBIC_CURVE_TO;
                                l = f;
                                n.fillCommands.cubicCurveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3], l.buffer.f[l.fPos + 4], l.buffer.f[l.fPos + 5]);
                                c ? n.strokeCommands.cubicCurveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3], l.buffer.f[l.fPos + 4], l.buffer.f[l.fPos + 5]) : (d = l.buffer.f[l.fPos + 4], g = l.buffer.f[l.fPos + 5]);
                                break;
                            case 5:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.CURVE_TO;
                                l = f;
                                n.fillCommands.curveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
                                c ? n.strokeCommands.curveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]) : (d = l.buffer.f[l.fPos + 2], g = l.buffer.f[l.fPos + 3]);
                                break;
                            case 6:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos +=
                                            6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.DRAW_CIRCLE;
                                l = f;
                                n.fillCommands.drawCircle(l.buffer.f[l.fPos], l.buffer.f[l.fPos +
                                1], l.buffer.f[l.fPos + 2]);
                                c && n.strokeCommands.drawCircle(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2]);
                                break;
                            case 7:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos +=
                                            2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.DRAW_ELLIPSE;
                                l = f;
                                n.fillCommands.drawEllipse(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
                                c && n.strokeCommands.drawEllipse(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
                                break;
                            case 8:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos +=
                                            2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos +=
                                            2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.DRAW_QUADS;
                                l = f;
                                n.fillCommands.drawQuads(l.buffer.o[l.oPos], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2]);
                                break;
                            case 9:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos +=
                                            1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.DRAW_RECT;
                                l = f;
                                n.fillCommands.drawRect(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
                                c && n.strokeCommands.drawRect(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos +
                                3]);
                                break;
                            case 10:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.DRAW_ROUND_RECT;
                                l = f;
                                n.fillCommands.drawRoundRect(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3], l.buffer.f[l.fPos + 4], l.buffer.o[l.oPos]);
                                c && n.strokeCommands.drawRoundRect(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3], l.buffer.f[l.fPos + 4], l.buffer.o[l.oPos]);
                                break;
                            case 12:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos +=
                                            2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos +=
                                            2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.DRAW_TRIANGLES;
                                l = f;
                                n.fillCommands.drawTriangles(l.buffer.o[l.oPos], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3]);
                                break;
                            case 13:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos +=
                                            4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.END_FILL;
                                n.endFill();
                                n.endStroke();
                                n.hasFill = !1;
                                n.bitmapFill = null;
                                g = d = 0;
                                break;
                            case 14:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos +=
                                            4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.LINE_BITMAP_STYLE;
                                l = f;
                                c || 0 == d && 0 == g || (n.strokeCommands.moveTo(d, g), g = d = 0);
                                c = !0;
                                n.strokeCommands.lineBitmapStyle(l.buffer.o[l.oPos], l.buffer.o[l.oPos + 1], l.buffer.b[l.bPos], l.buffer.b[l.bPos + 1]);
                                break;
                            case 15:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos +=
                                            5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.LINE_GRADIENT_STYLE;
                                l = f;
                                c || 0 == d && 0 == g || (n.strokeCommands.moveTo(d, g), g = d = 0);
                                c = !0;
                                n.strokeCommands.lineGradientStyle(l.buffer.o[l.oPos], l.buffer.ii[l.iiPos], l.buffer.ff[l.ffPos], l.buffer.ii[l.iiPos + 1], l.buffer.o[l.oPos +
                                1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3], l.buffer.f[l.fPos]);
                                break;
                            case 16:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos +=
                                            2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.LINE_STYLE;
                                l = f;
                                c || null == l.buffer.o[l.oPos] || 0 == d && 0 == g || (n.strokeCommands.moveTo(d, g), g = d = 0);
                                c = null != l.buffer.o[l.oPos];
                                n.strokeCommands.lineStyle(l.buffer.o[l.oPos], l.buffer.i[l.iPos], l.buffer.f[l.fPos], l.buffer.b[l.bPos], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3], l.buffer.f[l.fPos + 1]);
                                break;
                            case 17:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos +=
                                            2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos +=
                                            2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.LINE_TO;
                                l = f;
                                n.fillCommands.lineTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1]);
                                c ? n.strokeCommands.lineTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1]) : (d = l.buffer.f[l.fPos], g = l.buffer.f[l.fPos + 1]);
                                break;
                            case 18:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos +=
                                            4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.MOVE_TO;
                                l = f;
                                n.fillCommands.moveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1]);
                                c ? n.strokeCommands.moveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1]) : (d =
                                    l.buffer.f[l.fPos], g = l.buffer.f[l.fPos + 1]);
                                break;
                            case 19:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos +=
                                            1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.OVERRIDE_BLEND_MODE;
                                l = f;
                                b.__setBlendModeContext(n.context, l.buffer.o[l.oPos]);
                                break;
                            case 21:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos +=
                                            4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.WINDING_EVEN_ODD;
                                n.fillCommands.windingEvenOdd();
                                n.windingRule = "evenodd";
                                break;
                            case 22:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos +=
                                            1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = ja.WINDING_NON_ZERO;
                                n.fillCommands.windingNonZero();
                                n.windingRule = "nonzero";
                                break;
                            default:
                                switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos +=
                                            2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                }
                                f.prev = l
                        }
                        0 < n.fillCommands.get_length() && n.endFill();
                        0 < n.strokeCommands.get_length() && n.endStroke();
                        f.destroy();
                        null == a.__bitmap ? a.__bitmap = Ob.fromCanvas(a.__canvas) : a.__bitmap.width != a.__canvas.width || a.__bitmap.height != a.__canvas.height ? (b = a.__bitmap.__texture, null != b && b.dispose(),
                            a.__bitmap = Ob.fromCanvas(a.__canvas)) : a.__bitmap.image.version++
                    }
                    a.__softwareDirty = !1;
                    a.set___dirty(!1);
                    n.graphics = null
                }
            };
            n.renderMask = function (a, b) {
                if (0 != a.__commands.get_length()) {
                    n.context = b.context;
                    b = new te(a.__commands);
                    var c = 0;
                    for (a = a.__commands.types; c < a.length;) {
                        var d = a[c];
                        ++c;
                        switch (d._hx_index) {
                            case 4:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.CUBIC_CURVE_TO;
                                d = b;
                                n.context.bezierCurveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] -
                                    0, d.buffer.f[d.fPos + 2] - 0, d.buffer.f[d.fPos + 3] - 0, d.buffer.f[d.fPos + 4] - 0, d.buffer.f[d.fPos + 5] - 0);
                                break;
                            case 5:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.CURVE_TO;
                                d = b;
                                n.context.quadraticCurveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2] - 0, d.buffer.f[d.fPos + 3] - 0);
                                break;
                            case 6:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.DRAW_CIRCLE;
                                d = b;
                                n.context.arc(d.buffer.f[d.fPos] -
                                    0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], 0, 2 * Math.PI, !0);
                                break;
                            case 7:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos +=
                                            2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.DRAW_ELLIPSE;
                                var g = b;
                                d = g.buffer.f[g.fPos];
                                var f = g.buffer.f[g.fPos + 1];
                                var k = g.buffer.f[g.fPos + 2];
                                var h = g.buffer.f[g.fPos + 3];
                                d -= 0;
                                f -= 0;
                                g = k / 2 * .5522848;
                                var l = h / 2 * .5522848;
                                var r = d + k;
                                var t = f + h;
                                k = d + k / 2;
                                h = f + h / 2;
                                n.context.moveTo(d, h);
                                n.context.bezierCurveTo(d, h - l, k - g, f, k, f);
                                n.context.bezierCurveTo(k + g, f, r, h - l, r, h);
                                n.context.bezierCurveTo(r,
                                    h + l, k + g, t, k, t);
                                n.context.bezierCurveTo(k - g, t, d, h + l, d, h);
                                break;
                            case 9:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos +=
                                            1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.DRAW_RECT;
                                d = b;
                                n.context.beginPath();
                                n.context.rect(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3]);
                                n.context.closePath();
                                break;
                            case 10:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos +=
                                            1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.DRAW_ROUND_RECT;
                                d = b;
                                n.drawRoundRect(d.buffer.f[d.fPos] -
                                    0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3], d.buffer.f[d.fPos + 4], d.buffer.o[d.oPos]);
                                break;
                            case 17:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos +=
                                            2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.LINE_TO;
                                d = b;
                                n.context.lineTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0);
                                break;
                            case 18:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = ja.MOVE_TO;
                                d = b;
                                n.context.moveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0);
                                break;
                            default:
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = d
                        }
                    }
                    b.destroy()
                }
            };
            n.setSmoothing = function (a) {
                n.allowSmoothing || (a = !1);
                n.context.imageSmoothingEnabled != a && (n.context.imageSmoothingEnabled = a)
            };
            var Yj = function () {
                this.scale9MinX = this.scale9MinY = this.scale9MaxX = this.scale9MaxY = this.unscaledMinX = this.unscaledMinY = this.unscaledMaxX = this.unscaledMaxY = null
            };
            h["openfl.display._internal._CanvasGraphics.Scale9GridBounds"] = Yj;
            Yj.__name__ = "openfl.display._internal._CanvasGraphics.Scale9GridBounds";
            Yj.prototype = {
                getScaleX: function () {
                    if (null == this.scale9MaxX || null == this.unscaledMaxX) return 1;
                    var a = this.unscaledMaxX - this.unscaledMinX;
                    return 0 == a ? 1 : (this.scale9MaxX - this.scale9MinX) / a
                },
                getScaleY: function () {
                    if (null == this.scale9MaxY || null == this.unscaledMaxY) return 1;
                    var a = this.unscaledMaxY - this.unscaledMinY;
                    return 0 == a ? 1 : (this.scale9MaxY - this.scale9MinY) / a
                },
                clear: function () {
                    this.scale9MaxY = this.scale9MinY = this.scale9MaxX = this.scale9MinX = this.unscaledMaxY = this.unscaledMinY = this.unscaledMaxX = this.unscaledMinX =
                        null
                },
                applyUnscaledX: function (a) {
                    if (null == this.unscaledMinX || this.unscaledMinX > a) this.unscaledMinX = a;
                    if (null == this.unscaledMaxX || this.unscaledMaxX < a) this.unscaledMaxX = a
                },
                applyUnscaledY: function (a) {
                    if (null == this.unscaledMinY || this.unscaledMinY > a) this.unscaledMinY = a;
                    if (null == this.unscaledMaxY || this.unscaledMaxY < a) this.unscaledMaxY = a
                },
                applyScaledX: function (a) {
                    if (null == this.scale9MinX || this.scale9MinX > a) this.scale9MinX = a;
                    if (null == this.scale9MaxX || this.scale9MaxX < a) this.scale9MaxX = a
                },
                applyScaledY: function (a) {
                    if (null ==
                        this.scale9MinY || this.scale9MinY > a) this.scale9MinY = a;
                    if (null == this.scale9MaxY || this.scale9MaxY < a) this.scale9MaxY = a
                },
                __class__: Yj
            };
            var xj = function () {
            };
            h["openfl.display._internal.CanvasSimpleButton"] = xj;
            xj.__name__ = "openfl.display._internal.CanvasSimpleButton";
            xj.renderDrawable = OpenflShared.renderDrawableSimple;
            xj.renderDrawableMask = function (a, b) {
                b.__renderDrawableMask(a.__currentState)
            };
            var W = function () {
            };
            h["openfl.display._internal.CanvasTextField"] = W;
            W.__name__ = "openfl.display._internal.CanvasTextField";
            W.context = null;
            W.clearRect = null;
            W.renderDrawable = function (a, b) {
                b.__isDOM && !a.__renderedOnCanvasWhileOnDOM && (a.__renderedOnCanvasWhileOnDOM = !0, 1 == a.get_type() && a.replaceText(0, a.__text.length, a.__text), a.__isHTML && a.__updateText(Na.parse(a.__text, a.get_multiline(), a.__styleSheet, a.__textFormat, a.__textEngine.textFormatRanges)), a.__dirty = !0, a.__layoutDirty = !0, a.__renderDirty || (a.__renderDirty = !0, a.__setParentRenderDirty()));
                if (null == a.get_mask() || 0 < a.get_mask().get_width() && 0 < a.get_mask().get_height())
                    if (b.__updateCacheBitmap(a, a.__dirty), null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                        var c = a.__textEngine,
                            d = !(c.background || c.border),
                            g = d ? c.textBounds : c.bounds,
                            f = a.__graphics,
                            k = 0;
                        if (a.__dirty) {
                            a.__updateLayout();
                            null == f.__bounds && (f.__bounds = new sa);
                            if (0 == a.get_text().length) {
                                var h = c.bounds.width - 4;
                                var l = a.get_defaultTextFormat().align;
                                k = 3 == l ? 0 : 4 == l ? h : h / 2;
                                switch (l) {
                                    case 0:
                                        k += a.get_defaultTextFormat().leftMargin /
                                            2;
                                        k -= a.get_defaultTextFormat().rightMargin / 2;
                                        k += a.get_defaultTextFormat().indent / 2;
                                        k += a.get_defaultTextFormat().blockIndent / 2;
                                        break;
                                    case 2:
                                        k += a.get_defaultTextFormat().leftMargin;
                                        k += a.get_defaultTextFormat().indent;
                                        k += a.get_defaultTextFormat().blockIndent;
                                        break;
                                    case 3:
                                        k += a.get_defaultTextFormat().leftMargin;
                                        k += a.get_defaultTextFormat().indent;
                                        k += a.get_defaultTextFormat().blockIndent;
                                        break;
                                    case 4:
                                        k -= a.get_defaultTextFormat().rightMargin
                                }
                                d && (g.y = c.bounds.y, g.x = k)
                            }
                            f.__bounds.copyFrom(g)
                        }
                        l = b.__pixelRatio;
                        f.__update(b.__worldTransform, l);
                        if (a.__dirty || f.__softwareDirty) {
                            h = Math.round(f.__width * l);
                            var r = Math.round(f.__height * l);
                            if (!(null != c.text && "" != c.text || c.background || c.border || c.__hasFocus || 1 == c.type && c.selectable) || (0 >= c.width || 0 >= c.height) && 2 != c.autoSize) a.__graphics.__canvas = null, a.__graphics.__context = null, a.__graphics.__bitmap = null, a.__graphics.__softwareDirty = !1, a.__graphics.set___dirty(!1), a.__dirty = !1;
                            else {
                                null == a.__graphics.__canvas && (a.__graphics.__canvas = window.document.createElement("canvas"),
                                    a.__graphics.__context = a.__graphics.__canvas.getContext("2d"));
                                W.context = f.__context;
                                f.__canvas.width = h;
                                f.__canvas.height = r;
                                b.__isDOM && (f.__canvas.style.width = Math.round(h / l) + "px", f.__canvas.style.height = Math.round(r / l) + "px");
                                h = va.__pool.get();
                                h.scale(l, l);
                                h.concat(f.__renderTransform);
                                W.context.setTransform(h.a, h.b, h.c, h.d, h.tx, h.ty);
                                va.__pool.release(h);
                                null == W.clearRect && (W.clearRect = "undefined" !== typeof navigator && "undefined" !== typeof navigator.isCocoonJS);
                                W.clearRect && W.context.clearRect(0, 0,
                                    f.__canvas.width, f.__canvas.height);
                                if (null != c.text && "" != c.text || c.__hasFocus) {
                                    h = c.text;
                                    f.__context.imageSmoothingEnabled = !b.__allowSmoothing || 0 == c.antiAliasType && 400 == c.sharpness ? !1 : !0;
                                    if (c.border || c.background) {
                                        W.context.rect(.5, .5, g.width - 1, g.height - 1);
                                        if (c.background) {
                                            var t = T.hex(c.backgroundColor & 16777215, 6);
                                            W.context.fillStyle = "#" + t;
                                            W.context.fill()
                                        }
                                        c.border && (W.context.lineWidth = 1, t = T.hex(c.borderColor & 16777215, 6), W.context.strokeStyle = "#" + t, W.context.stroke())
                                    }
                                    W.context.textBaseline = "alphabetic";
                                    W.context.textAlign = "start";
                                    r = -a.get_scrollH();
                                    var y = d = 0;
                                    for (t = a.get_scrollV() - 1; y < t;) {
                                        var u = y++;
                                        d -= c.lineHeights.get(u)
                                    }
                                    var p;
                                    for (k = c.layoutGroups.iterator(); k.hasNext();) {
                                        var z = k.next();
                                        if (!(z.lineIndex < a.get_scrollV() - 1)) {
                                            if (z.lineIndex > c.get_bottomScrollV() - 1) break;
                                            var x = "#" + T.hex(z.format.color & 16777215, 6);
                                            W.context.font = Bb.getFont(z.format);
                                            W.context.fillStyle = x;
                                            W.context.fillText(h.substring(z.startIndex, z.endIndex), z.offsetX + r - g.x, z.offsetY + z.ascent + d - g.y);
                                            if (-1 < a.__caretIndex && c.selectable)
                                                if (a.__selectionIndex ==
                                                    a.__caretIndex) {
                                                    if (a.__showCursor && z.startIndex <= a.__caretIndex && z.endIndex >= a.__caretIndex) {
                                                        y = p = 0;
                                                        for (t = a.__caretIndex - z.startIndex; y < t;) {
                                                            u = y++;
                                                            if (z.positions.length <= u) break;
                                                            p += z.positions[u]
                                                        }
                                                        y = 0;
                                                        t = a.get_scrollV();
                                                        for (u = z.lineIndex + 1; t < u;) {
                                                            var A = t++;
                                                            y += c.lineHeights.get(A - 1)
                                                        }
                                                        W.context.beginPath();
                                                        t = T.hex(z.format.color & 16777215, 6);
                                                        W.context.strokeStyle = "#" + t;
                                                        W.context.moveTo(z.offsetX + p - a.get_scrollH() - g.x, y + 2 - g.y);
                                                        W.context.lineWidth = 1;
                                                        W.context.lineTo(z.offsetX + p - a.get_scrollH() - g.x, y + Bb.getFormatHeight(a.get_defaultTextFormat()) -
                                                            1 - g.y);
                                                        W.context.stroke();
                                                        W.context.closePath()
                                                    }
                                                } else if (z.startIndex <= a.__caretIndex && z.endIndex >= a.__caretIndex || z.startIndex <= a.__selectionIndex && z.endIndex >= a.__selectionIndex || z.startIndex > a.__caretIndex && z.endIndex < a.__selectionIndex || z.startIndex > a.__selectionIndex && z.endIndex < a.__caretIndex) p = Math.min(a.__selectionIndex, a.__caretIndex) | 0, y = Math.max(a.__selectionIndex, a.__caretIndex) | 0, z.startIndex > p && (p = z.startIndex), z.endIndex < y && (y = z.endIndex), u = a.getCharBoundaries(p), y >= z.endIndex ? (t = a.getCharBoundaries(z.endIndex -
                                                    1), null != t && (t.x += t.width + 2)) : t = a.getCharBoundaries(y), null != u && null != t && (W.context.fillStyle = "#000000", W.context.fillRect(u.x + r - g.x, u.y + d, t.x - u.x, z.height), W.context.fillStyle = "#FFFFFF", W.context.fillText(h.substring(p, y), r + u.x - g.x, z.offsetY + z.ascent + d));
                                            z.format.underline && (W.context.beginPath(), W.context.strokeStyle = x, W.context.lineWidth = 1, p = z.offsetX + r - g.x, y = Math.ceil(z.offsetY + d + z.ascent - g.y) + Math.floor(.185 * z.ascent) + .5, W.context.moveTo(p, y), W.context.lineTo(p + z.width, y), W.context.stroke(),
                                                W.context.closePath());
                                            z.format.strikethrough && (W.context.beginPath(), W.context.strokeStyle = x, W.context.lineWidth = 1, x = z.offsetX + r - g.x, p = Math.ceil(z.offsetY + d + 2 * z.ascent / 3 - g.y), W.context.moveTo(x, p), W.context.lineTo(x + z.width, p), W.context.stroke(), W.context.closePath())
                                        }
                                    }
                                } else {
                                    if (c.border || c.background) c.border ? W.context.rect(.5, .5, g.width - 1, g.height - 1) : W.context.rect(0, 0, g.width, g.height), c.background && (t = T.hex(c.backgroundColor & 16777215, 6), W.context.fillStyle = "#" + t, W.context.fill()), c.border && (W.context.lineWidth =
                                        1, W.context.lineCap = "square", t = T.hex(c.borderColor & 16777215, 6), W.context.strokeStyle = "#" + t, W.context.stroke());
                                    if (-1 < a.__caretIndex && c.selectable && a.__showCursor) {
                                        r = -a.get_scrollH() + (d ? 0 : k);
                                        y = d = 0;
                                        for (t = a.get_scrollV() - 1; y < t;) u = y++, d += c.lineHeights.get(u);
                                        W.context.beginPath();
                                        t = T.hex(a.get_defaultTextFormat().color & 16777215, 6);
                                        W.context.strokeStyle = "#" + t;
                                        W.context.moveTo(r + 2.5, d + 2.5);
                                        W.context.lineWidth = 1;
                                        W.context.lineTo(r + 2.5, d + Bb.getFormatHeight(a.get_defaultTextFormat()) - 1);
                                        W.context.stroke();
                                        W.context.closePath()
                                    }
                                }
                                null == f.__bitmap ? f.__bitmap = Ob.fromCanvas(f.__canvas) : f.__bitmap.width != f.__canvas.width || f.__bitmap.height != f.__canvas.height ? (c = f.__bitmap.__texture, null != c && c.dispose(), f.__bitmap = Ob.fromCanvas(f.__canvas)) : f.__bitmap.image.version++;
                                f.__bitmapScaleX = l;
                                f.__bitmapScaleY = l;
                                f.__visible = !0;
                                a.__dirty = !1;
                                f.__softwareDirty = !1;
                                f.set___dirty(!1)
                            }
                        }
                        g = !1;
                        0 == a.__textEngine.antiAliasType && 1 == a.__textEngine.gridFitType && (g = b.context.imageSmoothingEnabled) && (b.context.imageSmoothingEnabled = !1);
                        null == a.opaqueBackground && null == a.__graphics || !a.__renderable || (k = b.__getAlpha(a.__worldAlpha), 0 >= k || (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height() && (b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a), c = b.context, b.setTransform(a.__renderTransform, c), x = a.opaqueBackground, c.fillStyle = "rgb(" + (x >>> 16 & 255) + "," + (x >>> 8 & 255) + "," + (x & 255) + ")", c.fillRect(0, 0, a.get_width(), a.get_height()), b.__popMaskObject(a)), null == a.__graphics || !a.__renderable || (k = b.__getAlpha(a.__worldAlpha),
                        0 >= k || (f = a.__graphics, !(null != f && (n.render(f, b), h = f.__width, r = f.__height, d = f.__canvas, null != d && f.__visible && 1 <= h && 1 <= r && (l = f.__worldTransform, c = b.context, z = a.__scrollRect, null == z || 0 < z.width && 0 < z.height))))))) || (b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a), c.globalAlpha = k, k = va.__pool.get(), k.scale(1 / f.__bitmapScaleX, 1 / f.__bitmapScaleY), k.concat(l), b.setTransform(k, c), c.drawImage(d, 0, 0, h, r), va.__pool.release(k), b.__popMaskObject(a));
                        g && (b.context.imageSmoothingEnabled = !0)
                    } else a = a.__cacheBitmap,
                    a.__renderable && (k = b.__getAlpha(a.__worldAlpha), 0 < k && null != a.__bitmapData && a.__bitmapData.__isValid && a.__bitmapData.readable && (c = b.context, b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a, !1), Aa.convertToCanvas(a.__bitmapData.image), c.globalAlpha = k, z = a.__scrollRect, b.setTransform(a.__renderTransform, c), b.__allowSmoothing && a.smoothing || (c.imageSmoothingEnabled = !1), null == z ? c.drawImage(a.__bitmapData.image.get_src(), 0, 0, a.__bitmapData.image.width, a.__bitmapData.image.height) : c.drawImage(a.__bitmapData.image.get_src(),
                        z.x, z.y, z.width, z.height, z.x, z.y, z.width, z.height), b.__allowSmoothing && a.smoothing || (c.imageSmoothingEnabled = !0), b.__popMaskObject(a, !1)))
            };
            W.renderDrawableMask = function (a, b) {
                Uf.renderDrawableMask(a, b)
            };
            var Ve = function () {
            };
            h["openfl.display._internal.CanvasTilemap"] = Ve;
            Ve.__name__ = "openfl.display._internal.CanvasTilemap";
            Ve.renderTileContainer = function (a, b, c, d, g, f, k, h, l, n, r, t) {
                var q = b.context,
                    p = b.__roundPixels,
                    y = va.__pool.get(),
                    z = a.__tiles,
                    u, x = null,
                    A = 0;
                for (a = a.__length; A < a;) {
                    var m = A++;
                    var Q = z[m];
                    y.setTo(1, 0, 0, 1, -Q.get_originX(), -Q.get_originY());
                    y.concat(Q.get_matrix());
                    y.concat(c);
                    p && (y.tx = Math.round(y.tx), y.ty = Math.round(y.ty));
                    var O = null != Q.get_tileset() ? Q.get_tileset() : d;
                    m = Q.get_alpha() * k;
                    if ((u = Q.get_visible()) && !(0 >= m))
                        if (f || (m = 1), h && (x = null != Q.__blendMode ? Q.__blendMode : l), 0 < Q.__length) Ve.renderTileContainer(Q, b, y, O, g, f, m, h, x, n, r, t);
                        else if (null != O) {
                            u = Q.get_id();
                            if (-1 == u) {
                                if (Q = Q.__rect, null == Q || 0 >= Q.width || 0 >= Q.height) continue
                            } else {
                                Q = O.__data[u];
                                if (null == Q) continue;
                                t.setTo(Q.x, Q.y, Q.width,
                                    Q.height);
                                Q = t
                            }
                            O = O.__bitmapData;
                            null != O && null != O.image && (O != n && (null == O.image.buffer.__srcImage && Aa.convertToCanvas(O.image), r = O.image.get_src(), n = O), q.globalAlpha = m, h && b.__setBlendMode(x), b.setTransform(y, q), q.drawImage(r, Q.x, Q.y, Q.width, Q.height, 0, 0, Q.width, Q.height))
                        }
                }
                va.__pool.release(y)
            };
            Ve.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    if (!(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || (h = b.__getAlpha(a.__worldAlpha),
                    0 >= h || (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height() && (b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a), l = b.context, b.setTransform(a.__renderTransform, l), h = a.opaqueBackground, l.fillStyle = "rgb(" + (h >>> 16 & 255) + "," + (h >>> 8 & 255) + "," + (h & 255) + ")", l.fillRect(0, 0, a.get_width(), a.get_height()), b.__popMaskObject(a)), null == a.__graphics || !a.__renderable || (h = b.__getAlpha(a.__worldAlpha), 0 >= h))))) {
                        var c = a.__graphics;
                        if (null != c) {
                            n.render(c, b);
                            var d = c.__width,
                                g = c.__height,
                                f = c.__canvas;
                            if (null != f && c.__visible && 1 <= d && 1 <= g) {
                                var k = c.__worldTransform;
                                l = b.context;
                                r = a.__scrollRect;
                                if (null == r || 0 < r.width && 0 < r.height) b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a), l.globalAlpha = h, h = va.__pool.get(), h.scale(1 / c.__bitmapScaleX, 1 / c.__bitmapScaleY), h.concat(k), b.setTransform(h, l), l.drawImage(f, 0, 0, d, g), va.__pool.release(h), b.__popMaskObject(a)
                            }
                        }
                    }
                    a.__renderable && 0 != a.__group.__tiles.length && (h = b.__getAlpha(a.__worldAlpha), 0 >= h || (l = b.context, b.__setBlendMode(a.__worldBlendMode),
                        b.__pushMaskObject(a), c = sa.__pool.get(), c.setTo(0, 0, a.__width, a.__height), b.__pushMaskRect(c, a.__renderTransform), b.__allowSmoothing && a.smoothing || (l.imageSmoothingEnabled = !1), Ve.renderTileContainer(a.__group, b, a.__renderTransform, a.__tileset, b.__allowSmoothing && a.smoothing, a.tileAlphaEnabled, h, a.tileBlendModeEnabled, a.__worldBlendMode, null, null, c), b.__allowSmoothing && a.smoothing || (l.imageSmoothingEnabled = !0), b.__popMaskRect(), b.__popMaskObject(a), sa.__pool.release(c)))
                } else if (c = a.__cacheBitmap,
                    c.__renderable) {
                    var h = b.__getAlpha(c.__worldAlpha);
                    if (0 < h && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable) {
                        var l = b.context;
                        b.__setBlendMode(c.__worldBlendMode);
                        b.__pushMaskObject(c, !1);
                        Aa.convertToCanvas(c.__bitmapData.image);
                        l.globalAlpha = h;
                        var r = c.__scrollRect;
                        b.setTransform(c.__renderTransform, l);
                        b.__allowSmoothing && c.smoothing || (l.imageSmoothingEnabled = !1);
                        null == r ? l.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height) : l.drawImage(c.__bitmapData.image.get_src(),
                            r.x, r.y, r.width, r.height, r.x, r.y, r.width, r.height);
                        b.__allowSmoothing && c.smoothing || (l.imageSmoothingEnabled = !0);
                        b.__popMaskObject(c, !1)
                    }
                }
                b.__renderEvent(a)
            };
            Ve.renderDrawableMask = function (a, b) {
            };
            var Vf = function () {
            };
            h["openfl.display._internal.CanvasVideo"] = Vf;
            Vf.__name__ = "openfl.display._internal.CanvasVideo";
            Vf.render = function (a, b) {
                if (a.__renderable && null != a.__stream) {
                    var c = b.__getAlpha(a.__worldAlpha);
                    if (!(0 >= c)) {
                        var d = b.context;
                        if (null != a.__stream.__video) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            d.globalAlpha = c;
                            c = a.__scrollRect;
                            var g = a.smoothing;
                            b.setTransform(a.__worldTransform, d);
                            g || (d.imageSmoothingEnabled = !1);
                            null == c ? d.drawImage(a.__stream.__video, 0, 0, a.get_width(), a.get_height()) : d.drawImage(a.__stream.__video, c.x, c.y, c.width, c.height, c.x, c.y, c.width, c.height);
                            g || (d.imageSmoothingEnabled = !0);
                            b.__popMaskObject(a)
                        }
                    }
                }
            };
            Vf.renderDrawable = function (a, b) {
                Vf.render(a, b);
                b.__renderEvent(a)
            };
            Vf.renderDrawableMask = function (a, b) {
            };
            var Sd = function () {
            };
            h["openfl.display._internal.Context3DBitmap"] =
                Sd;
            Sd.__name__ = "openfl.display._internal.Context3DBitmap";
            Sd.render = function (a, b) {
                if (a.__renderable && !(0 >= a.__worldAlpha) && null != a.__bitmapData && a.__bitmapData.__isValid) {
                    var c = b.__context3D;
                    b.__setBlendMode(a.__worldBlendMode);
                    b.__pushMaskObject(a);
                    var d = b.__initDisplayShader(a.__worldShader);
                    b.setShader(d);
                    b.applyBitmapData(a.__bitmapData, b.__allowSmoothing && (a.smoothing || b.__upscaled));
                    b.applyMatrix(b.__getMatrix(a.__renderTransform, a.pixelSnapping));
                    b.applyAlpha(a.__worldAlpha);
                    b.applyColorTransform(a.__worldColorTransform);
                    b.updateShader();
                    var g = a.__bitmapData.getVertexBuffer(c);
                    null != d.__position && c.setVertexBufferAt(d.__position.index, g, 0, 3);
                    null != d.__textureCoord && c.setVertexBufferAt(d.__textureCoord.index, g, 3, 2);
                    d = a.__bitmapData.getIndexBuffer(c);
                    c.drawTriangles(d);
                    b.__clearShader();
                    b.__popMaskObject(a)
                }
            };
            Sd.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a, !1);
                null != a.__bitmapData && null != a.__bitmapData.image && (a.__imageVersion = a.__bitmapData.image.version);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    if (!(null ==
                        a.opaqueBackground && null == a.__graphics || !a.__renderable || 0 >= a.__worldAlpha)) {
                        if (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            var c = b.__context3D,
                                d = sa.__pool.get();
                            d.setTo(0, 0, a.get_width(), a.get_height());
                            b.__pushMaskRect(d, a.__renderTransform);
                            var g = a.opaqueBackground;
                            c.__clear(!0, (g >>> 16 & 255) / 255, (g >>> 8 & 255) / 255, (g & 255) / 255, 1, 0, 0, 1);
                            b.__popMaskRect();
                            b.__popMaskObject(a);
                            sa.__pool.release(d)
                        }
                        null !=
                        a.__graphics && Ge.render(a, b)
                    }
                    Sd.render(a, b)
                } else Sd.render(a.__cacheBitmap, b);
                b.__renderEvent(a)
            };
            Sd.renderDrawableMask = function (a, b) {
                Sd.renderMask(a, b)
            };
            Sd.renderMask = function (a, b) {
                if (null != a.__bitmapData && a.__bitmapData.__isValid) {
                    var c = b.__context3D,
                        d = b.__maskShader;
                    b.setShader(d);
                    b.applyBitmapData(Xf.opaqueBitmapData, !0);
                    b.applyMatrix(b.__getMatrix(a.__renderTransform, a.pixelSnapping));
                    b.updateShader();
                    var g = a.__bitmapData.getVertexBuffer(c);
                    null != d.__position && c.setVertexBufferAt(d.__position.index,
                        g, 0, 3);
                    null != d.__textureCoord && c.setVertexBufferAt(d.__textureCoord.index, g, 3, 2);
                    a = a.__bitmapData.getIndexBuffer(c);
                    c.drawTriangles(a);
                    b.__clearShader()
                }
            };
            var Qj = function () {
            };
            h["openfl.display._internal.Context3DBitmapData"] = Qj;
            Qj.__name__ = "openfl.display._internal.Context3DBitmapData";
            Qj.renderDrawable = function (a, b) {
                var c = b.__context3D;
                b.__setBlendMode(10);
                var d = b.__defaultDisplayShader;
                b.setShader(d);
                b.applyBitmapData(a, b.__upscaled);
                b.applyMatrix(b.__getMatrix(a.__worldTransform, 1));
                b.applyAlpha(a.__worldAlpha);
                b.applyColorTransform(a.__worldColorTransform);
                b.updateShader();
                var g = a.getVertexBuffer(c);
                null != d.__position && c.setVertexBufferAt(d.__position.index, g, 0, 3);
                null != d.__textureCoord && c.setVertexBufferAt(d.__textureCoord.index, g, 3, 2);
                a = a.getIndexBuffer(c);
                c.drawTriangles(a);
                b.__clearShader()
            };
            Qj.renderDrawableMask = function (a, b) {
                var c = b.__context3D,
                    d = b.__maskShader;
                b.setShader(d);
                b.applyBitmapData(a, b.__upscaled);
                b.applyMatrix(b.__getMatrix(a.__worldTransform, 1));
                b.updateShader();
                var g = a.getVertexBuffer(c);
                null != d.__position && c.setVertexBufferAt(d.__position.index, g, 0, 3);
                null != d.__textureCoord && c.setVertexBufferAt(d.__textureCoord.index, g, 3, 2);
                a = a.getIndexBuffer(c);
                c.drawTriangles(a);
                b.__clearShader()
            };
            var wh = function (a, b, c, d) {
                this.context3D = a;
                this.elementType = b;
                this.dataPerVertex = d;
                this.vertexCount = this.indexCount = 0;
                this.resize(c)
            };
            h["openfl.display._internal.Context3DBuffer"] = wh;
            wh.__name__ = "openfl.display._internal.Context3DBuffer";
            wh.prototype = {
                flushVertexBufferData: function () {
                    this.vertexBufferData.length >
                    this.vertexCount && (this.vertexCount = this.vertexBufferData.length, this.vertexBuffer = this.context3D.createVertexBuffer(this.vertexCount, this.dataPerVertex, 0));
                    this.vertexBuffer.uploadFromTypedArray(oh.toArrayBufferView(this.vertexBufferData))
                },
                resize: function (a, b) {
                    null == b && (b = -1);
                    this.elementCount = a;
                    -
                        1 == b && (b = this.dataPerVertex);
                    b != this.dataPerVertex && (this.vertexBuffer = null, this.vertexCount = 0, this.dataPerVertex = b);
                    var c = 0;
                    switch (this.elementType._hx_index) {
                        case 0:
                            c = 4 * a;
                            break;
                        case 1:
                            c = 3 * a;
                            break;
                        case 2:
                            c =
                                3 * a
                    }
                    b *= c;
                    if (null == this.vertexBufferData) {
                        var d = c = null,
                            g = null,
                            f = null,
                            k = null;
                        this.vertexBufferData = b = null != b ? new Float32Array(b) : null != c ? new Float32Array(c) : null != d ? new Float32Array(d.__array) : null != g ? new Float32Array(g) : null != f ? null == k ? new Float32Array(f, 0) : new Float32Array(f, 0, k) : null
                    } else b > this.vertexBufferData.length && (a = this.vertexBufferData, k = f = g = d = c = null, this.vertexBufferData = b = null != b ? new Float32Array(b) : null != c ? new Float32Array(c) : null != d ? new Float32Array(d.__array) : null != g ? new Float32Array(g) :
                        null != f ? null == k ? new Float32Array(f, 0) : new Float32Array(f, 0, k) : null, this.vertexBufferData.set(a))
                },
                __class__: wh
            };
            var Zj = N["openfl.display._internal.Context3DElementType"] = {
                __ename__: "openfl.display._internal.Context3DElementType",
                __constructs__: null,
                QUADS: {
                    _hx_name: "QUADS",
                    _hx_index: 0,
                    __enum__: "openfl.display._internal.Context3DElementType",
                    toString: u
                },
                TRIANGLES: {
                    _hx_name: "TRIANGLES",
                    _hx_index: 1,
                    __enum__: "openfl.display._internal.Context3DElementType",
                    toString: u
                },
                TRIANGLE_INDICES: {
                    _hx_name: "TRIANGLE_INDICES",
                    _hx_index: 2,
                    __enum__: "openfl.display._internal.Context3DElementType",
                    toString: u
                }
            };
            Zj.__constructs__ = [Zj.QUADS, Zj.TRIANGLES, Zj.TRIANGLE_INDICES];
            var Yf = function () {
            };
            h["openfl.display._internal.Context3DDisplayObject"] = Yf;
            Yf.__name__ = "openfl.display._internal.Context3DDisplayObject";
            Yf.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null != a.__cacheBitmap && !a.__isCacheBitmapRender) Sd.render(a.__cacheBitmap, b);
                else if (!(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || 0 >= a.__worldAlpha)) {
                    if (null !=
                        a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                        b.__setBlendMode(a.__worldBlendMode);
                        b.__pushMaskObject(a);
                        var c = b.__context3D,
                            d = sa.__pool.get();
                        d.setTo(0, 0, a.get_width(), a.get_height());
                        b.__pushMaskRect(d, a.__renderTransform);
                        var g = a.opaqueBackground;
                        c.__clear(!0, (g >>> 16 & 255) / 255, (g >>> 8 & 255) / 255, (g & 255) / 255, 1, 0, 0, 1);
                        b.__popMaskRect();
                        b.__popMaskObject(a);
                        sa.__pool.release(d)
                    }
                    null != a.__graphics && Ge.render(a, b)
                }
                b.__renderEvent(a)
            };
            Yf.renderDrawableMask = function (a, b) {
                null !=
                a.__graphics && Ge.renderMask(a, b)
            };
            var Rj = function () {
            };
            h["openfl.display._internal.Context3DDisplayObjectContainer"] = Rj;
            Rj.__name__ = "openfl.display._internal.Context3DDisplayObjectContainer";
            Rj.renderDrawable = function (a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext();) {
                    var d = c.next();
                    null == d.stage && d.__cleanup()
                }
                a.__removedChildren.set_length(0);
                if (a.__renderable && !(0 >= a.__worldAlpha) && (Yf.renderDrawable(a, b), null == a.__cacheBitmap || a.__isCacheBitmapRender)) {
                    if (0 < a.__children.length)
                        if (b.__pushMaskObject(a),
                        null != b.__stage) {
                            c = 0;
                            for (d = a.__children; c < d.length;) {
                                var g = d[c];
                                ++c;
                                b.__renderDrawable(g);
                                g.__renderDirty = !1
                            }
                            a.__renderDirty = !1
                        } else
                            for (c = 0, d = a.__children; c < d.length;) g = d[c], ++c, b.__renderDrawable(g);
                    0 < a.__children.length && b.__popMaskObject(a)
                }
            };
            Rj.renderDrawableMask = function (a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext();) {
                    var d = c.next();
                    null == d.stage && d.__cleanup()
                }
                a.__removedChildren.set_length(0);
                null != a.__graphics && Ge.renderMask(a, b);
                c = 0;
                for (a = a.__children; c < a.length;) d = a[c], ++c,
                    b.__renderDrawableMask(d)
            };
            var Y = function () {
            };
            h["openfl.display._internal.Context3DGraphics"] = Y;
            Y.__name__ = "openfl.display._internal.Context3DGraphics";
            Y.maskRender = null;
            Y.tempScale9VerticesVector = null;
            Y.buildBuffer = function (a, b) {
                var c = 0,
                    d = 0,
                    g = 0,
                    f = a.__bounds,
                    k = new te(a.__commands),
                    h = b.__context3D,
                    l = sa.__pool.get(),
                    n = va.__pool.get(),
                    r = null,
                    t = a.__owner.__scale9Grid,
                    y = null != t && !a.__owner.__isMask && 0 == a.__worldTransform.b && 0 == a.__worldTransform.c;
                y || (t = null);
                for (var p = 0, z = a.__commands.types; p < z.length;) {
                    var u =
                        z[p];
                    ++p;
                    switch (u._hx_index) {
                        case 0:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos +=
                                        4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = ja.BEGIN_BITMAP_FILL;
                            var x = k;
                            r = x.buffer.o[x.oPos];
                            break;
                        case 1:
                            r = null;
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos +=
                                        4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = u;
                            break;
                        case 2:
                            r = null;
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos +=
                                        6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = u;
                            break;
                        case 3:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos +=
                                        1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = ja.BEGIN_SHADER_FILL;
                            var A = k,
                                Q = A.buffer.o[A.oPos];
                            r = null;
                            if (null != Q)
                                for (var m = 0, O = Q.inputCount; m < O;) {
                                    var N = m++;
                                    if ("bitmap" == Q.inputRefs[N].name) {
                                        r = Q.inputs[N];
                                        break
                                    }
                                }
                            break;
                        case 6:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos +=
                                        4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = ja.DRAW_CIRCLE;
                            var v = k,
                                w = v.buffer.f[v.fPos],
                                F = v.buffer.f[v.fPos + 1],
                                D = v.buffer.f[v.fPos + 2],
                                H = a.__owner.get_scaleX(),
                                ta = a.__owner.get_scaleY();
                            xh.buildEllipseVerticesAndIndices(w - D, F - D, D, D, H, ta, Y.tempVerticesVector,
                                Y.tempIndicesVector);
                            var I = Y.tempVerticesVector,
                                J = Y.tempIndicesVector,
                                E = null;
                            if (y) {
                                null == Y.tempScale9VerticesVector ? Y.tempScale9VerticesVector = pa.toFloatVector(null, I.get_length()) : Y.tempScale9VerticesVector.set_length(I.get_length());
                                for (var R = 0, ha = I.get_length(), jc = !0; R < ha;) jc ? Y.tempScale9VerticesVector.set(R, Y.toScale9Position(I.get(R), t.x, t.width, f.width, a.__owner.get_scaleX()) / a.__owner.get_scaleX()) : Y.tempScale9VerticesVector.set(R, Y.toScale9Position(I.get(R), t.y, t.height, f.height, a.__owner.get_scaleY()) /
                                    a.__owner.get_scaleY()), ++R, jc = !jc;
                                I = Y.tempScale9VerticesVector
                            }
                            null != r && null == E && (E = Y.tempUvtVector, Y.populateUvtVector(I, r, E));
                            var rc = null != J,
                                B = Math.floor(I.get_length() / 2),
                                na = rc ? J.get_length() : B,
                                P = null != E,
                                C = P && E.get_length() >= 3 * B,
                                kb = C ? 4 : 2,
                                M = C ? 3 : 2,
                                L = kb + 2,
                                K = C ? g : d;
                            Y.resizeVertexBuffer(a, C, K + na * L);
                            for (var G = C ? a.__vertexBufferDataUVT : a.__vertexBufferData, la, S, Jb, W, lc = 0, Ja = na; lc < Ja;) {
                                var V = lc++;
                                la = K + V * L;
                                S = rc ? 2 * J.get(V) : 2 * V;
                                Jb = rc ? J.get(V) * M : V * M;
                                C ? (W = E.get(Jb + 2), G[la] = I.get(S) / W, G[la + 1] = I.get(S + 1) / W, G[la +
                                2] = 0, G[la + 3] = 1 / W) : (G[la] = I.get(S), G[la + 1] = I.get(S + 1));
                                G[la + kb] = P ? E.get(Jb) : 0;
                                G[la + kb + 1] = P ? E.get(Jb + 1) : 0
                            }
                            C ? g += na * L : d += na * L;
                            break;
                        case 7:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos +=
                                        2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = ja.DRAW_ELLIPSE;
                            var ea = k,
                                wb = ea.buffer.f[ea.fPos],
                                Z = ea.buffer.f[ea.fPos + 1],
                                aa = ea.buffer.f[ea.fPos + 2] / 2,
                                T = ea.buffer.f[ea.fPos + 3] / 2,
                                X = a.__owner.get_scaleX(),
                                ca = a.__owner.get_scaleY();
                            xh.buildEllipseVerticesAndIndices(wb, Z, aa, T, X, ca, Y.tempVerticesVector, Y.tempIndicesVector);
                            var Zb =
                                    Y.tempVerticesVector,
                                ba = Y.tempIndicesVector,
                                Hc = null;
                            if (y) {
                                null == Y.tempScale9VerticesVector ? Y.tempScale9VerticesVector = pa.toFloatVector(null, Zb.get_length()) : Y.tempScale9VerticesVector.set_length(Zb.get_length());
                                for (var U = 0, xa = Zb.get_length(), hc = !0; U < xa;) hc ? Y.tempScale9VerticesVector.set(U, Y.toScale9Position(Zb.get(U), t.x, t.width, f.width, a.__owner.get_scaleX()) / a.__owner.get_scaleX()) : Y.tempScale9VerticesVector.set(U, Y.toScale9Position(Zb.get(U), t.y, t.height, f.height, a.__owner.get_scaleY()) / a.__owner.get_scaleY()),
                                    ++U, hc = !hc;
                                Zb = Y.tempScale9VerticesVector
                            }
                            null != r && null == Hc && (Hc = Y.tempUvtVector, Y.populateUvtVector(Zb, r, Hc));
                            var da = null != ba,
                                jb = Math.floor(Zb.get_length() / 2),
                                ka = da ? ba.get_length() : jb,
                                ia = null != Hc,
                                mc = ia && Hc.get_length() >= 3 * jb,
                                Gb = mc ? 4 : 2,
                                oa = mc ? 3 : 2,
                                Ba = Gb + 2,
                                fc = mc ? g : d;
                            Y.resizeVertexBuffer(a, mc, fc + ka * Ba);
                            for (var fa = mc ? a.__vertexBufferDataUVT : a.__vertexBufferData, ma, qc, qa, ra, Tb = 0, $d = ka; Tb < $d;) {
                                var Xa = Tb++;
                                ma = fc + Xa * Ba;
                                qc = da ? 2 * ba.get(Xa) : 2 * Xa;
                                qa = da ? ba.get(Xa) * oa : Xa * oa;
                                mc ? (ra = Hc.get(qa + 2), fa[ma] = Zb.get(qc) /
                                    ra, fa[ma + 1] = Zb.get(qc + 1) / ra, fa[ma + 2] = 0, fa[ma + 3] = 1 / ra) : (fa[ma] = Zb.get(qc), fa[ma + 1] = Zb.get(qc + 1));
                                fa[ma + Gb] = ia ? Hc.get(qa) : 0;
                                fa[ma + Gb + 1] = ia ? Hc.get(qa + 1) : 0
                            }
                            mc ? g += ka * Ba : d += ka * Ba;
                            break;
                        case 8:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos +=
                                        5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = ja.DRAW_QUADS;
                            var ua = k,
                                ya = ua.buffer.o[ua.oPos],
                                Ca = ua.buffer.o[ua.oPos + 1],
                                wa = ua.buffer.o[ua.oPos + 2],
                                Ga = null != Ca,
                                Ea = !1,
                                Ya = !1,
                                Oa = Ga ? Ca.get_length() : Math.floor(ya.get_length() / 4);
                            if (0 == Oa) return;
                            null != wa && (wa.get_length() >=
                            6 * Oa ? Ya = Ea = !0 : wa.get_length() >= 4 * Oa ? Ea = !0 : wa.get_length() >= 2 * Oa && (Ya = !0));
                            null == a.__quadBuffer ? a.__quadBuffer = new wh(h, Zj.QUADS, Oa, 4) : a.__quadBuffer.resize(c + Oa, 4);
                            var tb = a.__quadBuffer.vertexBufferData,
                                Ka = 1,
                                rb = 1;
                            null != r && (Ka = r.width, rb = r.height);
                            for (var Ia = 0, Pa = Oa; Ia < Pa;) {
                                var La = Ia++;
                                var Aa = 16 * (c + La);
                                var Ma = Ga ? 4 * Ca.get(La) : 4 * La;
                                if (!(0 > Ma)) {
                                    l.setTo(ya.get(Ma), ya.get(Ma + 1), ya.get(Ma + 2), ya.get(Ma + 3));
                                    var Na = l.width;
                                    var Fb = l.height;
                                    if (!(0 >= Na || 0 >= Fb)) {
                                        if (Ea && Ya) {
                                            var Da = 6 * La;
                                            n.setTo(wa.get(Da), wa.get(Da +
                                                1), wa.get(Da + 2), wa.get(Da + 3), wa.get(Da + 4), wa.get(Da + 5))
                                        } else Ea ? (Da = 4 * La, n.setTo(wa.get(Da), wa.get(Da + 1), wa.get(Da + 2), wa.get(Da + 3), l.x, l.y)) : Ya ? (Da = 2 * La, n.tx = wa.get(Da), n.ty = wa.get(Da + 1)) : (n.tx = l.x, n.ty = l.y);
                                        var ec = l.x / Ka;
                                        var yb = l.y / rb;
                                        var Ta = l.get_right() / Ka;
                                        var Ua = l.get_bottom() / rb;
                                        var Wa = 0 * n.a + 0 * n.c + n.tx;
                                        var Za = 0 * n.b + 0 * n.d + n.ty;
                                        var bb = Na * n.a + 0 * n.c + n.tx;
                                        var db = Na * n.b + 0 * n.d + n.ty;
                                        var ab = 0 * n.a + Fb * n.c + n.tx;
                                        var fb = 0 * n.b + Fb * n.d + n.ty;
                                        var cb = Na * n.a + Fb * n.c + n.tx;
                                        var za = Na * n.b + Fb * n.d + n.ty;
                                        tb[Aa] = Wa;
                                        tb[Aa +
                                        1] = Za;
                                        tb[Aa + 2] = ec;
                                        tb[Aa + 3] = yb;
                                        tb[Aa + 4] = bb;
                                        tb[Aa + 4 + 1] = db;
                                        tb[Aa + 4 + 2] = Ta;
                                        tb[Aa + 4 + 3] = yb;
                                        tb[Aa + 8] = ab;
                                        tb[Aa + 8 + 1] = fb;
                                        tb[Aa + 8 + 2] = ec;
                                        tb[Aa + 8 + 3] = Ua;
                                        tb[Aa + 12] = cb;
                                        tb[Aa + 12 + 1] = za;
                                        tb[Aa + 12 + 2] = Ta;
                                        tb[Aa + 12 + 3] = Ua
                                    }
                                }
                            }
                            c += Oa;
                            break;
                        case 9:
                            if (null != r) {
                                switch (k.prev._hx_index) {
                                    case 0:
                                        k.oPos += 2;
                                        k.bPos += 2;
                                        break;
                                    case 1:
                                        k.iPos += 1;
                                        k.fPos += 1;
                                        break;
                                    case 2:
                                        k.oPos += 4;
                                        k.iiPos += 2;
                                        k.ffPos += 1;
                                        k.fPos += 1;
                                        break;
                                    case 3:
                                        k.oPos += 1;
                                        break;
                                    case 4:
                                        k.fPos += 6;
                                        break;
                                    case 5:
                                        k.fPos += 4;
                                        break;
                                    case 6:
                                        k.fPos += 3;
                                        break;
                                    case 7:
                                        k.fPos += 4;
                                        break;
                                    case 8:
                                        k.oPos +=
                                            3;
                                        break;
                                    case 9:
                                        k.fPos += 4;
                                        break;
                                    case 10:
                                        k.fPos += 5;
                                        k.oPos += 1;
                                        break;
                                    case 12:
                                        k.oPos += 4;
                                        break;
                                    case 14:
                                        k.oPos += 2;
                                        k.bPos += 2;
                                        break;
                                    case 15:
                                        k.oPos += 4;
                                        k.iiPos += 2;
                                        k.ffPos += 1;
                                        k.fPos += 1;
                                        break;
                                    case 16:
                                        k.oPos += 4;
                                        k.iPos += 1;
                                        k.fPos += 2;
                                        k.bPos += 1;
                                        break;
                                    case 17:
                                        k.fPos += 2;
                                        break;
                                    case 18:
                                        k.fPos += 2;
                                        break;
                                    case 19:
                                        k.oPos += 1;
                                        break;
                                    case 20:
                                        k.oPos += 1
                                }
                                k.prev = ja.DRAW_RECT;
                                var Ha = k;
                                Y.tempVerticesVector.set_length(8);
                                Y.tempVerticesVector.set(0, Ha.buffer.f[Ha.fPos]);
                                Y.tempVerticesVector.set(1, Ha.buffer.f[Ha.fPos + 1]);
                                Y.tempVerticesVector.set(2,
                                    Ha.buffer.f[Ha.fPos] + Ha.buffer.f[Ha.fPos + 2]);
                                Y.tempVerticesVector.set(3, Ha.buffer.f[Ha.fPos + 1]);
                                Y.tempVerticesVector.set(4, Ha.buffer.f[Ha.fPos]);
                                Y.tempVerticesVector.set(5, Ha.buffer.f[Ha.fPos + 1] + Ha.buffer.f[Ha.fPos + 3]);
                                Y.tempVerticesVector.set(6, Ha.buffer.f[Ha.fPos] + Ha.buffer.f[Ha.fPos + 2]);
                                Y.tempVerticesVector.set(7, Ha.buffer.f[Ha.fPos + 1] + Ha.buffer.f[Ha.fPos + 3]);
                                Y.tempIndicesVector.set_length(6);
                                Y.tempIndicesVector.set(0, 0);
                                Y.tempIndicesVector.set(1, 1);
                                Y.tempIndicesVector.set(2, 2);
                                Y.tempIndicesVector.set(3,
                                    1);
                                Y.tempIndicesVector.set(4, 2);
                                Y.tempIndicesVector.set(5, 3);
                                var Sa = Y.tempVerticesVector,
                                    gd = Y.tempIndicesVector,
                                    Ra = null;
                                if (y) {
                                    null == Y.tempScale9VerticesVector ? Y.tempScale9VerticesVector = pa.toFloatVector(null, Sa.get_length()) : Y.tempScale9VerticesVector.set_length(Sa.get_length());
                                    for (var Va = 0, ib = Sa.get_length(), Bc = !0; Va < ib;) Bc ? Y.tempScale9VerticesVector.set(Va, Y.toScale9Position(Sa.get(Va), t.x, t.width, f.width, a.__owner.get_scaleX()) / a.__owner.get_scaleX()) : Y.tempScale9VerticesVector.set(Va, Y.toScale9Position(Sa.get(Va),
                                        t.y, t.height, f.height, a.__owner.get_scaleY()) / a.__owner.get_scaleY()), ++Va, Bc = !Bc;
                                    Sa = Y.tempScale9VerticesVector
                                }
                                null != r && null == Ra && (Ra = Y.tempUvtVector, Y.populateUvtVector(Sa, r, Ra));
                                var Sb = null != gd,
                                    $a = Math.floor(Sa.get_length() / 2),
                                    gb = Sb ? gd.get_length() : $a,
                                    ob = null != Ra,
                                    qb = ob && Ra.get_length() >= 3 * $a,
                                    zb = qb ? 4 : 2,
                                    mb = qb ? 3 : 2,
                                    lb = zb + 2,
                                    nb = qb ? g : d;
                                Y.resizeVertexBuffer(a, qb, nb + gb * lb);
                                for (var eb = qb ? a.__vertexBufferDataUVT : a.__vertexBufferData, hb, pb, Cc, Mc, vb = 0, xb = gb; vb < xb;) {
                                    var ub = vb++;
                                    hb = nb + ub * lb;
                                    pb = Sb ? 2 * gd.get(ub) :
                                        2 * ub;
                                    Cc = Sb ? gd.get(ub) * mb : ub * mb;
                                    qb ? (Mc = Ra.get(Cc + 2), eb[hb] = Sa.get(pb) / Mc, eb[hb + 1] = Sa.get(pb + 1) / Mc, eb[hb + 2] = 0, eb[hb + 3] = 1 / Mc) : (eb[hb] = Sa.get(pb), eb[hb + 1] = Sa.get(pb + 1));
                                    eb[hb + zb] = ob ? Ra.get(Cc) : 0;
                                    eb[hb + zb + 1] = ob ? Ra.get(Cc + 1) : 0
                                }
                                qb ? g += gb * lb : d += gb * lb
                            }
                            break;
                        case 10:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos +=
                                        4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = ja.DRAW_ROUND_RECT;
                            var Qa = k,
                                Ab = Qa.buffer.f[Qa.fPos],
                                Cb = Qa.buffer.f[Qa.fPos + 1],
                                zc = Qa.buffer.f[Qa.fPos + 2],
                                Eb = Qa.buffer.f[Qa.fPos + 3],
                                ae = Qa.buffer.f[Qa.fPos +
                                4] / 2,
                                Db = (null != Qa.buffer.o[Qa.oPos] ? Qa.buffer.o[Qa.oPos] : Qa.buffer.f[Qa.fPos + 4]) / 2,
                                Hb = y && Qa.buffer.f[Qa.fPos] + ae <= t.x && Qa.buffer.f[Qa.fPos] + Qa.buffer.f[Qa.fPos + 2] - ae >= t.x + t.width ? 1 : a.__owner.get_scaleX(),
                                Ib = y && Qa.buffer.f[Qa.fPos + 1] + Db <= t.y && Qa.buffer.f[Qa.fPos + 1] + Qa.buffer.f[Qa.fPos + 3] - ae >= t.y + t.height ? 1 : a.__owner.get_scaleY();
                            xh.buildRoundRectVerticesAndIndices(Ab, Cb, zc, Eb, ae, Db, Hb, Ib, Y.tempVerticesVector, Y.tempIndicesVector);
                            var sb = Y.tempVerticesVector,
                                ac = Y.tempIndicesVector,
                                Bd = null;
                            if (y) {
                                null ==
                                Y.tempScale9VerticesVector ? Y.tempScale9VerticesVector = pa.toFloatVector(null, sb.get_length()) : Y.tempScale9VerticesVector.set_length(sb.get_length());
                                for (var Bb = 0, Ob = sb.get_length(), Kb = !0; Bb < Ob;) Kb ? Y.tempScale9VerticesVector.set(Bb, Y.toScale9Position(sb.get(Bb), t.x, t.width, f.width, a.__owner.get_scaleX()) / a.__owner.get_scaleX()) : Y.tempScale9VerticesVector.set(Bb, Y.toScale9Position(sb.get(Bb), t.y, t.height, f.height, a.__owner.get_scaleY()) / a.__owner.get_scaleY()), ++Bb, Kb = !Kb;
                                sb = Y.tempScale9VerticesVector
                            }
                            null !=
                            r && null == Bd && (Bd = Y.tempUvtVector, Y.populateUvtVector(sb, r, Bd));
                            var Gd = null != ac,
                                Pb = Math.floor(sb.get_length() / 2),
                                Mb = Gd ? ac.get_length() : Pb,
                                Qb = null != Bd,
                                Lb = Qb && Bd.get_length() >= 3 * Pb,
                                Ub = Lb ? 4 : 2,
                                jd = Lb ? 3 : 2,
                                dc = Ub + 2,
                                Wb = Lb ? g : d;
                            Y.resizeVertexBuffer(a, Lb, Wb + Mb * dc);
                            for (var Nb = Lb ? a.__vertexBufferDataUVT : a.__vertexBufferData, Vb, Xb, $b, cc, ic = 0, Ac = Mb; ic < Ac;) {
                                var bc = ic++;
                                Vb = Wb + bc * dc;
                                Xb = Gd ? 2 * ac.get(bc) : 2 * bc;
                                $b = Gd ? ac.get(bc) * jd : bc * jd;
                                Lb ? (cc = Bd.get($b + 2), Nb[Vb] = sb.get(Xb) / cc, Nb[Vb + 1] = sb.get(Xb + 1) / cc, Nb[Vb + 2] = 0, Nb[Vb + 3] =
                                    1 / cc) : (Nb[Vb] = sb.get(Xb), Nb[Vb + 1] = sb.get(Xb + 1));
                                Nb[Vb + Ub] = Qb ? Bd.get($b) : 0;
                                Nb[Vb + Ub + 1] = Qb ? Bd.get($b + 1) : 0
                            }
                            Lb ? g += Mb * dc : d += Mb * dc;
                            break;
                        case 12:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = ja.DRAW_TRIANGLES;
                            var Yb = k,
                                ye = Yb.buffer.o[Yb.oPos + 1],
                                Rb = Yb.buffer.o[Yb.oPos],
                                gc = Yb.buffer.o[Yb.oPos + 2];
                            if (y) {
                                null == Y.tempScale9VerticesVector ? Y.tempScale9VerticesVector = pa.toFloatVector(null, Rb.get_length()) : Y.tempScale9VerticesVector.set_length(Rb.get_length());
                                for (var nc = 0, ad = Rb.get_length(), sc = !0; nc < ad;) sc ? Y.tempScale9VerticesVector.set(nc, Y.toScale9Position(Rb.get(nc), t.x, t.width, f.width, a.__owner.get_scaleX()) / a.__owner.get_scaleX()) : Y.tempScale9VerticesVector.set(nc, Y.toScale9Position(Rb.get(nc), t.y, t.height, f.height, a.__owner.get_scaleY()) / a.__owner.get_scaleY()), ++nc, sc = !sc;
                                Rb = Y.tempScale9VerticesVector
                            }
                            null != r && null == gc && (gc = Y.tempUvtVector, Y.populateUvtVector(Rb, r, gc));
                            var tc = null != ye,
                                yc = Math.floor(Rb.get_length() / 2),
                                Gc = tc ? ye.get_length() : yc,
                                Pc =
                                    null != gc,
                                oc = Pc && gc.get_length() >= 3 * yc,
                                wc = oc ? 4 : 2,
                                Ec = oc ? 3 : 2,
                                vc = wc + 2,
                                Fc = oc ? g : d;
                            Y.resizeVertexBuffer(a, oc, Fc + Gc * vc);
                            for (var Jc = oc ? a.__vertexBufferDataUVT : a.__vertexBufferData, kc, uc, xc, Dc, Ic = 0, Kc = Gc; Ic < Kc;) {
                                var Lc = Ic++;
                                kc = Fc + Lc * vc;
                                uc = tc ? 2 * ye.get(Lc) : 2 * Lc;
                                xc = tc ? ye.get(Lc) * Ec : Lc * Ec;
                                oc ? (Dc = gc.get(xc + 2), Jc[kc] = Rb.get(uc) / Dc, Jc[kc + 1] = Rb.get(uc + 1) / Dc, Jc[kc + 2] = 0, Jc[kc + 3] = 1 / Dc) : (Jc[kc] = Rb.get(uc), Jc[kc + 1] = Rb.get(uc + 1));
                                Jc[kc + wc] = Pc ? gc.get(xc) : 0;
                                Jc[kc + wc + 1] = Pc ? gc.get(xc + 1) : 0
                            }
                            oc ? g += Gc * vc : d += Gc * vc;
                            break;
                        case 13:
                            r =
                                null;
                            break;
                        default:
                            switch (k.prev._hx_index) {
                                case 0:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 1:
                                    k.iPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 2:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 3:
                                    k.oPos += 1;
                                    break;
                                case 4:
                                    k.fPos += 6;
                                    break;
                                case 5:
                                    k.fPos += 4;
                                    break;
                                case 6:
                                    k.fPos += 3;
                                    break;
                                case 7:
                                    k.fPos += 4;
                                    break;
                                case 8:
                                    k.oPos += 3;
                                    break;
                                case 9:
                                    k.fPos += 4;
                                    break;
                                case 10:
                                    k.fPos += 5;
                                    k.oPos += 1;
                                    break;
                                case 12:
                                    k.oPos += 4;
                                    break;
                                case 14:
                                    k.oPos += 2;
                                    k.bPos += 2;
                                    break;
                                case 15:
                                    k.oPos += 4;
                                    k.iiPos += 2;
                                    k.ffPos += 1;
                                    k.fPos += 1;
                                    break;
                                case 16:
                                    k.oPos += 4;
                                    k.iPos += 1;
                                    k.fPos += 2;
                                    k.bPos += 1;
                                    break;
                                case 17:
                                    k.fPos += 2;
                                    break;
                                case 18:
                                    k.fPos += 2;
                                    break;
                                case 19:
                                    k.oPos += 1;
                                    break;
                                case 20:
                                    k.oPos += 1
                            }
                            k.prev = u
                    }
                }
                0 < c && a.__quadBuffer.flushVertexBufferData();
                if (0 < d) {
                    var pc = a.__vertexBuffer;
                    if (null == pc || d > a.__vertexBufferCount) pc = h.createVertexBuffer(d, 4, 0), a.__vertexBuffer = pc, a.__vertexBufferCount = d;
                    pc.uploadFromTypedArray(oh.toArrayBufferView(a.__vertexBufferData))
                }
                if (0 < g) {
                    pc = a.__vertexBufferUVT;
                    if (null == pc || g > a.__vertexBufferCountUVT) pc = h.createVertexBuffer(g, 6, 0), a.__vertexBufferUVT =
                        pc, a.__vertexBufferCountUVT = g;
                    pc.uploadFromTypedArray(oh.toArrayBufferView(a.__vertexBufferDataUVT))
                }
                sa.__pool.release(l);
                va.__pool.release(n)
            };
            Y.isCompatible = function (a) {
                if (null != a.__owner.__worldScale9Grid) return !1;
                var b = new te(a.__commands),
                    c = !1,
                    d = !1,
                    g = !1,
                    f = 0;
                for (a = a.__commands.types; f < a.length;) {
                    var k = a[f];
                    ++f;
                    switch (k._hx_index) {
                        case 0:
                            switch (b.prev._hx_index) {
                                case 0:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 1:
                                    b.iPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 2:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 3:
                                    b.oPos +=
                                        1;
                                    break;
                                case 4:
                                    b.fPos += 6;
                                    break;
                                case 5:
                                    b.fPos += 4;
                                    break;
                                case 6:
                                    b.fPos += 3;
                                    break;
                                case 7:
                                    b.fPos += 4;
                                    break;
                                case 8:
                                    b.oPos += 3;
                                    break;
                                case 9:
                                    b.fPos += 4;
                                    break;
                                case 10:
                                    b.fPos += 5;
                                    b.oPos += 1;
                                    break;
                                case 12:
                                    b.oPos += 4;
                                    break;
                                case 14:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 15:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 16:
                                    b.oPos += 4;
                                    b.iPos += 1;
                                    b.fPos += 2;
                                    b.bPos += 1;
                                    break;
                                case 17:
                                    b.fPos += 2;
                                    break;
                                case 18:
                                    b.fPos += 2;
                                    break;
                                case 19:
                                    b.oPos += 1;
                                    break;
                                case 20:
                                    b.oPos += 1
                            }
                            b.prev = ja.BEGIN_BITMAP_FILL;
                            c = b;
                            if (null != c.buffer.o[c.oPos + 1]) return b.destroy(),
                                !1;
                            d = !0;
                            g = c = !1;
                            switch (b.prev._hx_index) {
                                case 0:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 1:
                                    b.iPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 2:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 3:
                                    b.oPos += 1;
                                    break;
                                case 4:
                                    b.fPos += 6;
                                    break;
                                case 5:
                                    b.fPos += 4;
                                    break;
                                case 6:
                                    b.fPos += 3;
                                    break;
                                case 7:
                                    b.fPos += 4;
                                    break;
                                case 8:
                                    b.oPos += 3;
                                    break;
                                case 9:
                                    b.fPos += 4;
                                    break;
                                case 10:
                                    b.fPos += 5;
                                    b.oPos += 1;
                                    break;
                                case 12:
                                    b.oPos += 4;
                                    break;
                                case 14:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 15:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 16:
                                    b.oPos += 4;
                                    b.iPos += 1;
                                    b.fPos +=
                                        2;
                                    b.bPos += 1;
                                    break;
                                case 17:
                                    b.fPos += 2;
                                    break;
                                case 18:
                                    b.fPos += 2;
                                    break;
                                case 19:
                                    b.oPos += 1;
                                    break;
                                case 20:
                                    b.oPos += 1
                            }
                            b.prev = k;
                            break;
                        case 1:
                            d = !1;
                            c = !0;
                            g = !1;
                            switch (b.prev._hx_index) {
                                case 0:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 1:
                                    b.iPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 2:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 3:
                                    b.oPos += 1;
                                    break;
                                case 4:
                                    b.fPos += 6;
                                    break;
                                case 5:
                                    b.fPos += 4;
                                    break;
                                case 6:
                                    b.fPos += 3;
                                    break;
                                case 7:
                                    b.fPos += 4;
                                    break;
                                case 8:
                                    b.oPos += 3;
                                    break;
                                case 9:
                                    b.fPos += 4;
                                    break;
                                case 10:
                                    b.fPos += 5;
                                    b.oPos += 1;
                                    break;
                                case 12:
                                    b.oPos +=
                                        4;
                                    break;
                                case 14:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 15:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 16:
                                    b.oPos += 4;
                                    b.iPos += 1;
                                    b.fPos += 2;
                                    b.bPos += 1;
                                    break;
                                case 17:
                                    b.fPos += 2;
                                    break;
                                case 18:
                                    b.fPos += 2;
                                    break;
                                case 19:
                                    b.oPos += 1;
                                    break;
                                case 20:
                                    b.oPos += 1
                            }
                            b.prev = k;
                            break;
                        case 3:
                            c = d = !1;
                            g = !0;
                            switch (b.prev._hx_index) {
                                case 0:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 1:
                                    b.iPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 2:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 3:
                                    b.oPos += 1;
                                    break;
                                case 4:
                                    b.fPos += 6;
                                    break;
                                case 5:
                                    b.fPos += 4;
                                    break;
                                case 6:
                                    b.fPos +=
                                        3;
                                    break;
                                case 7:
                                    b.fPos += 4;
                                    break;
                                case 8:
                                    b.oPos += 3;
                                    break;
                                case 9:
                                    b.fPos += 4;
                                    break;
                                case 10:
                                    b.fPos += 5;
                                    b.oPos += 1;
                                    break;
                                case 12:
                                    b.oPos += 4;
                                    break;
                                case 14:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 15:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 16:
                                    b.oPos += 4;
                                    b.iPos += 1;
                                    b.fPos += 2;
                                    b.bPos += 1;
                                    break;
                                case 17:
                                    b.fPos += 2;
                                    break;
                                case 18:
                                    b.fPos += 2;
                                    break;
                                case 19:
                                    b.oPos += 1;
                                    break;
                                case 20:
                                    b.oPos += 1
                            }
                            b.prev = k;
                            break;
                        case 8:
                            if (c || d || g) {
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos +=
                                            4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = k
                            } else return b.destroy(),
                                !1;
                            break;
                        case 9:
                            if (c || d || g) {
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos += 5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = k
                            } else return b.destroy(), !1;
                            break;
                        case 12:
                            if (c || d || g) {
                                switch (b.prev._hx_index) {
                                    case 0:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 1:
                                        b.iPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 2:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 3:
                                        b.oPos += 1;
                                        break;
                                    case 4:
                                        b.fPos += 6;
                                        break;
                                    case 5:
                                        b.fPos += 4;
                                        break;
                                    case 6:
                                        b.fPos += 3;
                                        break;
                                    case 7:
                                        b.fPos += 4;
                                        break;
                                    case 8:
                                        b.oPos += 3;
                                        break;
                                    case 9:
                                        b.fPos += 4;
                                        break;
                                    case 10:
                                        b.fPos +=
                                            5;
                                        b.oPos += 1;
                                        break;
                                    case 12:
                                        b.oPos += 4;
                                        break;
                                    case 14:
                                        b.oPos += 2;
                                        b.bPos += 2;
                                        break;
                                    case 15:
                                        b.oPos += 4;
                                        b.iiPos += 2;
                                        b.ffPos += 1;
                                        b.fPos += 1;
                                        break;
                                    case 16:
                                        b.oPos += 4;
                                        b.iPos += 1;
                                        b.fPos += 2;
                                        b.bPos += 1;
                                        break;
                                    case 17:
                                        b.fPos += 2;
                                        break;
                                    case 18:
                                        b.fPos += 2;
                                        break;
                                    case 19:
                                        b.oPos += 1;
                                        break;
                                    case 20:
                                        b.oPos += 1
                                }
                                b.prev = k
                            } else return b.destroy(), !1;
                            break;
                        case 13:
                            g = c = d = !1;
                            switch (b.prev._hx_index) {
                                case 0:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 1:
                                    b.iPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 2:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 3:
                                    b.oPos += 1;
                                    break;
                                case 4:
                                    b.fPos += 6;
                                    break;
                                case 5:
                                    b.fPos += 4;
                                    break;
                                case 6:
                                    b.fPos += 3;
                                    break;
                                case 7:
                                    b.fPos += 4;
                                    break;
                                case 8:
                                    b.oPos += 3;
                                    break;
                                case 9:
                                    b.fPos += 4;
                                    break;
                                case 10:
                                    b.fPos += 5;
                                    b.oPos += 1;
                                    break;
                                case 12:
                                    b.oPos += 4;
                                    break;
                                case 14:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 15:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 16:
                                    b.oPos += 4;
                                    b.iPos += 1;
                                    b.fPos += 2;
                                    b.bPos += 1;
                                    break;
                                case 17:
                                    b.fPos += 2;
                                    break;
                                case 18:
                                    b.fPos += 2;
                                    break;
                                case 19:
                                    b.oPos += 1;
                                    break;
                                case 20:
                                    b.oPos += 1
                            }
                            b.prev = k;
                            break;
                        case 18:
                            switch (b.prev._hx_index) {
                                case 0:
                                    b.oPos += 2;
                                    b.bPos +=
                                        2;
                                    break;
                                case 1:
                                    b.iPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 2:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 3:
                                    b.oPos += 1;
                                    break;
                                case 4:
                                    b.fPos += 6;
                                    break;
                                case 5:
                                    b.fPos += 4;
                                    break;
                                case 6:
                                    b.fPos += 3;
                                    break;
                                case 7:
                                    b.fPos += 4;
                                    break;
                                case 8:
                                    b.oPos += 3;
                                    break;
                                case 9:
                                    b.fPos += 4;
                                    break;
                                case 10:
                                    b.fPos += 5;
                                    b.oPos += 1;
                                    break;
                                case 12:
                                    b.oPos += 4;
                                    break;
                                case 14:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 15:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 16:
                                    b.oPos += 4;
                                    b.iPos += 1;
                                    b.fPos += 2;
                                    b.bPos += 1;
                                    break;
                                case 17:
                                    b.fPos += 2;
                                    break;
                                case 18:
                                    b.fPos += 2;
                                    break;
                                case 19:
                                    b.oPos += 1;
                                    break;
                                case 20:
                                    b.oPos += 1
                            }
                            b.prev = k;
                            break;
                        case 19:
                            switch (b.prev._hx_index) {
                                case 0:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 1:
                                    b.iPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 2:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos += 1;
                                    b.fPos += 1;
                                    break;
                                case 3:
                                    b.oPos += 1;
                                    break;
                                case 4:
                                    b.fPos += 6;
                                    break;
                                case 5:
                                    b.fPos += 4;
                                    break;
                                case 6:
                                    b.fPos += 3;
                                    break;
                                case 7:
                                    b.fPos += 4;
                                    break;
                                case 8:
                                    b.oPos += 3;
                                    break;
                                case 9:
                                    b.fPos += 4;
                                    break;
                                case 10:
                                    b.fPos += 5;
                                    b.oPos += 1;
                                    break;
                                case 12:
                                    b.oPos += 4;
                                    break;
                                case 14:
                                    b.oPos += 2;
                                    b.bPos += 2;
                                    break;
                                case 15:
                                    b.oPos += 4;
                                    b.iiPos += 2;
                                    b.ffPos +=
                                        1;
                                    b.fPos += 1;
                                    break;
                                case 16:
                                    b.oPos += 4;
                                    b.iPos += 1;
                                    b.fPos += 2;
                                    b.bPos += 1;
                                    break;
                                case 17:
                                    b.fPos += 2;
                                    break;
                                case 18:
                                    b.fPos += 2;
                                    break;
                                case 19:
                                    b.oPos += 1;
                                    break;
                                case 20:
                                    b.oPos += 1
                            }
                            b.prev = k;
                            break;
                        default:
                            return b.destroy(), !1
                    }
                }
                b.destroy();
                return !0
            };
            Y.render = function (a, b) {
                if (a.__visible && 0 != a.__commands.get_length()) {
                    if (null != a.__bitmap && !a.__dirty || !Y.isCompatible(a)) {
                        b.__softwareRenderer.__pixelRatio = b.__pixelRatio;
                        var c = b.__softwareRenderer.__worldTransform;
                        b.__softwareRenderer.__worldTransform = 7 == a.__owner.__drawableType ?
                            va.__identity : b.__worldTransform;
                        n.render(a, b.__softwareRenderer);
                        b.__softwareRenderer.__worldTransform = c
                    } else {
                        a.__bitmap = null;
                        a.__update(b.__worldTransform, b.__pixelRatio);
                        var d = a.__bounds,
                            g = a.__width,
                            f = a.__height;
                        if (null != d && 1 <= g && 1 <= f) {
                            (a.__hardwareDirty || null == a.__quadBuffer && null == a.__vertexBuffer && null == a.__vertexBufferUVT) && Y.buildBuffer(a, b);
                            var k = a.__owner.__scale9Grid,
                                h = null != k && !a.__owner.__isMask && 0 == a.__worldTransform.b && 0 == a.__worldTransform.c;
                            h || (k = null);
                            for (var l = new te(a.__commands),
                                     r = b.__context3D, t = va.__pool.get(), y = null, z = null, p = !1, u = !1, x = null, A = 0, Q = 0, m = 0, O = 0, N = 0, v = a.__commands.types; N < v.length;) {
                                var w = v[N];
                                ++N;
                                switch (w._hx_index) {
                                    case 0:
                                        switch (l.prev._hx_index) {
                                            case 0:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 1:
                                                l.iPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 2:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 3:
                                                l.oPos += 1;
                                                break;
                                            case 4:
                                                l.fPos += 6;
                                                break;
                                            case 5:
                                                l.fPos += 4;
                                                break;
                                            case 6:
                                                l.fPos += 3;
                                                break;
                                            case 7:
                                                l.fPos += 4;
                                                break;
                                            case 8:
                                                l.oPos += 3;
                                                break;
                                            case 9:
                                                l.fPos += 4;
                                                break;
                                            case 10:
                                                l.fPos += 5;
                                                l.oPos += 1;
                                                break;
                                            case 12:
                                                l.oPos += 4;
                                                break;
                                            case 14:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 15:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 16:
                                                l.oPos += 4;
                                                l.iPos += 1;
                                                l.fPos += 2;
                                                l.bPos += 1;
                                                break;
                                            case 17:
                                                l.fPos += 2;
                                                break;
                                            case 18:
                                                l.fPos += 2;
                                                break;
                                            case 19:
                                                l.oPos += 1;
                                                break;
                                            case 20:
                                                l.oPos += 1
                                        }
                                        l.prev = ja.BEGIN_BITMAP_FILL;
                                        var F = l;
                                        z = F.buffer.o[F.oPos];
                                        p = F.buffer.b[F.bPos];
                                        u = F.buffer.b[F.bPos + 1];
                                        x = y = null;
                                        break;
                                    case 1:
                                        switch (l.prev._hx_index) {
                                            case 0:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 1:
                                                l.iPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 2:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos +=
                                                    1;
                                                l.fPos += 1;
                                                break;
                                            case 3:
                                                l.oPos += 1;
                                                break;
                                            case 4:
                                                l.fPos += 6;
                                                break;
                                            case 5:
                                                l.fPos += 4;
                                                break;
                                            case 6:
                                                l.fPos += 3;
                                                break;
                                            case 7:
                                                l.fPos += 4;
                                                break;
                                            case 8:
                                                l.oPos += 3;
                                                break;
                                            case 9:
                                                l.fPos += 4;
                                                break;
                                            case 10:
                                                l.fPos += 5;
                                                l.oPos += 1;
                                                break;
                                            case 12:
                                                l.oPos += 4;
                                                break;
                                            case 14:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 15:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 16:
                                                l.oPos += 4;
                                                l.iPos += 1;
                                                l.fPos += 2;
                                                l.bPos += 1;
                                                break;
                                            case 17:
                                                l.fPos += 2;
                                                break;
                                            case 18:
                                                l.fPos += 2;
                                                break;
                                            case 19:
                                                l.oPos += 1;
                                                break;
                                            case 20:
                                                l.oPos += 1
                                        }
                                        l.prev = ja.BEGIN_FILL;
                                        var D = l;
                                        x =
                                            (D.buffer.i[D.iPos] | 0) & 16777215 | (255 * D.buffer.f[D.fPos] | 0) << 24;
                                        z = y = null;
                                        break;
                                    case 2:
                                        switch (l.prev._hx_index) {
                                            case 0:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 1:
                                                l.iPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 2:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 3:
                                                l.oPos += 1;
                                                break;
                                            case 4:
                                                l.fPos += 6;
                                                break;
                                            case 5:
                                                l.fPos += 4;
                                                break;
                                            case 6:
                                                l.fPos += 3;
                                                break;
                                            case 7:
                                                l.fPos += 4;
                                                break;
                                            case 8:
                                                l.oPos += 3;
                                                break;
                                            case 9:
                                                l.fPos += 4;
                                                break;
                                            case 10:
                                                l.fPos += 5;
                                                l.oPos += 1;
                                                break;
                                            case 12:
                                                l.oPos += 4;
                                                break;
                                            case 14:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 15:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 16:
                                                l.oPos += 4;
                                                l.iPos += 1;
                                                l.fPos += 2;
                                                l.bPos += 1;
                                                break;
                                            case 17:
                                                l.fPos += 2;
                                                break;
                                            case 18:
                                                l.fPos += 2;
                                                break;
                                            case 19:
                                                l.oPos += 1;
                                                break;
                                            case 20:
                                                l.oPos += 1
                                        }
                                        l.prev = w;
                                        x = 0;
                                        z = y = null;
                                        break;
                                    case 3:
                                        switch (l.prev._hx_index) {
                                            case 0:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 1:
                                                l.iPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 2:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 3:
                                                l.oPos += 1;
                                                break;
                                            case 4:
                                                l.fPos += 6;
                                                break;
                                            case 5:
                                                l.fPos += 4;
                                                break;
                                            case 6:
                                                l.fPos += 3;
                                                break;
                                            case 7:
                                                l.fPos += 4;
                                                break;
                                            case 8:
                                                l.oPos += 3;
                                                break;
                                            case 9:
                                                l.fPos += 4;
                                                break;
                                            case 10:
                                                l.fPos += 5;
                                                l.oPos += 1;
                                                break;
                                            case 12:
                                                l.oPos += 4;
                                                break;
                                            case 14:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 15:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 16:
                                                l.oPos += 4;
                                                l.iPos += 1;
                                                l.fPos += 2;
                                                l.bPos += 1;
                                                break;
                                            case 17:
                                                l.fPos += 2;
                                                break;
                                            case 18:
                                                l.fPos += 2;
                                                break;
                                            case 19:
                                                l.oPos += 1;
                                                break;
                                            case 20:
                                                l.oPos += 1
                                        }
                                        l.prev = ja.BEGIN_SHADER_FILL;
                                        var H = l;
                                        y = H.buffer.o[H.oPos];
                                        Q = 0;
                                        z = null == y || null == y.shader || null == y.shader.__bitmap ? null : y.shader.__bitmap.input;
                                        x = null;
                                        break;
                                    case 6:
                                        switch (l.prev._hx_index) {
                                            case 0:
                                                l.oPos +=
                                                    2;
                                                l.bPos += 2;
                                                break;
                                            case 1:
                                                l.iPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 2:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 3:
                                                l.oPos += 1;
                                                break;
                                            case 4:
                                                l.fPos += 6;
                                                break;
                                            case 5:
                                                l.fPos += 4;
                                                break;
                                            case 6:
                                                l.fPos += 3;
                                                break;
                                            case 7:
                                                l.fPos += 4;
                                                break;
                                            case 8:
                                                l.oPos += 3;
                                                break;
                                            case 9:
                                                l.fPos += 4;
                                                break;
                                            case 10:
                                                l.fPos += 5;
                                                l.oPos += 1;
                                                break;
                                            case 12:
                                                l.oPos += 4;
                                                break;
                                            case 14:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 15:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 16:
                                                l.oPos += 4;
                                                l.iPos += 1;
                                                l.fPos += 2;
                                                l.bPos += 1;
                                                break;
                                            case 17:
                                                l.fPos += 2;
                                                break;
                                            case 18:
                                                l.fPos +=
                                                    2;
                                                break;
                                            case 19:
                                                l.oPos += 1;
                                                break;
                                            case 20:
                                                l.oPos += 1
                                        }
                                        l.prev = ja.DRAW_CIRCLE;
                                        var I = l,
                                            ta = I.buffer.f[I.fPos + 2],
                                            E = Math.PI * (ta + ta) / 4 | 0;
                                        6 > E && (E = 6);
                                        var J = E,
                                            R = 2 * J,
                                            ha = 3 * (J - 2),
                                            jc = 0;
                                        null != z && 0 == jc && (jc = R);
                                        if (null != z || 0 == jc && null != x) {
                                            var rc = Math.floor(R / 2),
                                                B = 0 < ha ? ha : rc,
                                                na = jc >= 3 * rc,
                                                C = na ? 4 : 2,
                                                P = C + 2,
                                                kb = na ? a.__vertexBufferUVT : a.__vertexBuffer,
                                                L = na ? O : m,
                                                M = b.__getMatrix(a.__owner.__renderTransform, 1);
                                            if (null == y || Y.maskRender) {
                                                if (null != z) {
                                                    var G = Y.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                                    b.setShader(G);
                                                    b.applyMatrix(M);
                                                    b.applyBitmapData(z, u, p);
                                                    b.applyAlpha(a.__owner.__worldAlpha);
                                                    b.applyColorTransform(a.__owner.__worldColorTransform)
                                                } else {
                                                    G = Y.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                                    b.setShader(G);
                                                    b.applyMatrix(M);
                                                    b.applyBitmapData(Y.blankBitmapData, !0, p);
                                                    var K = x;
                                                    Y.tempColorTransform.redOffset = K >>> 16 & 255;
                                                    Y.tempColorTransform.greenOffset = K >>> 8 & 255;
                                                    Y.tempColorTransform.blueOffset = K & 255;
                                                    Y.tempColorTransform.__combine(a.__owner.__worldColorTransform);
                                                    b.applyAlpha((K >>> 24 & 255) / 255 * a.__owner.__worldAlpha);
                                                    b.applyColorTransform(Y.tempColorTransform)
                                                }
                                                b.updateShader()
                                            } else G = b.__initShaderBuffer(y), b.__setShaderBuffer(y), b.applyMatrix(M), b.applyBitmapData(z, !1, p), b.applyAlpha(1), b.applyColorTransform(null), b.__updateShaderBuffer(Q);
                                            null != G.__position && r.setVertexBufferAt(G.__position.index, kb, L, na ? 4 : 2);
                                            null != G.__textureCoord && r.setVertexBufferAt(G.__textureCoord.index, kb, L + C, 2);
                                            r.setCulling(3);
                                            r.__drawTriangles(0, B);
                                            Q += B;
                                            na ? O += P * B : m += P * B;
                                            r.setCulling(0);
                                            b.__clearShader()
                                        }
                                        break;
                                    case 7:
                                        switch (l.prev._hx_index) {
                                            case 0:
                                                l.oPos +=
                                                    2;
                                                l.bPos += 2;
                                                break;
                                            case 1:
                                                l.iPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 2:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 3:
                                                l.oPos += 1;
                                                break;
                                            case 4:
                                                l.fPos += 6;
                                                break;
                                            case 5:
                                                l.fPos += 4;
                                                break;
                                            case 6:
                                                l.fPos += 3;
                                                break;
                                            case 7:
                                                l.fPos += 4;
                                                break;
                                            case 8:
                                                l.oPos += 3;
                                                break;
                                            case 9:
                                                l.fPos += 4;
                                                break;
                                            case 10:
                                                l.fPos += 5;
                                                l.oPos += 1;
                                                break;
                                            case 12:
                                                l.oPos += 4;
                                                break;
                                            case 14:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 15:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 16:
                                                l.oPos += 4;
                                                l.iPos += 1;
                                                l.fPos += 2;
                                                l.bPos += 1;
                                                break;
                                            case 17:
                                                l.fPos += 2;
                                                break;
                                            case 18:
                                                l.fPos +=
                                                    2;
                                                break;
                                            case 19:
                                                l.oPos += 1;
                                                break;
                                            case 20:
                                                l.oPos += 1
                                        }
                                        l.prev = ja.DRAW_ELLIPSE;
                                        var la = l,
                                            S = la.buffer.f[la.fPos + 2] / 2,
                                            Jb = la.buffer.f[la.fPos + 3] / 2,
                                            W = a.__owner.get_scaleX(),
                                            lc = a.__owner.get_scaleY(),
                                            Ja = Math.PI * (S * W + Jb * lc) / 4 | 0;
                                        6 > Ja && (Ja = 6);
                                        var ea = Ja,
                                            V = 2 * ea,
                                            wb = 3 * (ea - 2),
                                            Z = 0;
                                        null != z && 0 == Z && (Z = V);
                                        if (null != z || 0 == Z && null != x) {
                                            var aa = Math.floor(V / 2),
                                                Zb = 0 < wb ? wb : aa,
                                                T = Z >= 3 * aa,
                                                X = T ? 4 : 2,
                                                Hc = X + 2,
                                                U = T ? a.__vertexBufferUVT : a.__vertexBuffer,
                                                ba = T ? O : m,
                                                ca = b.__getMatrix(a.__owner.__renderTransform, 1);
                                            if (null == y || Y.maskRender) {
                                                if (null !=
                                                    z) {
                                                    var hc = Y.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                                    b.setShader(hc);
                                                    b.applyMatrix(ca);
                                                    b.applyBitmapData(z, u, p);
                                                    b.applyAlpha(a.__owner.__worldAlpha);
                                                    b.applyColorTransform(a.__owner.__worldColorTransform)
                                                } else {
                                                    hc = Y.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                                    b.setShader(hc);
                                                    b.applyMatrix(ca);
                                                    b.applyBitmapData(Y.blankBitmapData, !0, p);
                                                    var xa = x;
                                                    Y.tempColorTransform.redOffset = xa >>> 16 & 255;
                                                    Y.tempColorTransform.greenOffset = xa >>> 8 & 255;
                                                    Y.tempColorTransform.blueOffset = xa & 255;
                                                    Y.tempColorTransform.__combine(a.__owner.__worldColorTransform);
                                                    b.applyAlpha((xa >>> 24 & 255) / 255 * a.__owner.__worldAlpha);
                                                    b.applyColorTransform(Y.tempColorTransform)
                                                }
                                                b.updateShader()
                                            } else hc = b.__initShaderBuffer(y), b.__setShaderBuffer(y), b.applyMatrix(ca), b.applyBitmapData(z, !1, p), b.applyAlpha(1), b.applyColorTransform(null), b.__updateShaderBuffer(Q);
                                            null != hc.__position && r.setVertexBufferAt(hc.__position.index, U, ba, T ? 4 : 2);
                                            null != hc.__textureCoord && r.setVertexBufferAt(hc.__textureCoord.index, U, ba + X, 2);
                                            r.setCulling(3);
                                            r.__drawTriangles(0, Zb);
                                            Q += Zb;
                                            T ? O += Hc * Zb : m += Hc * Zb;
                                            r.setCulling(0);
                                            b.__clearShader()
                                        }
                                        break;
                                    case 8:
                                        if (null != z || null != x) {
                                            switch (l.prev._hx_index) {
                                                case 0:
                                                    l.oPos += 2;
                                                    l.bPos += 2;
                                                    break;
                                                case 1:
                                                    l.iPos += 1;
                                                    l.fPos += 1;
                                                    break;
                                                case 2:
                                                    l.oPos += 4;
                                                    l.iiPos += 2;
                                                    l.ffPos += 1;
                                                    l.fPos += 1;
                                                    break;
                                                case 3:
                                                    l.oPos += 1;
                                                    break;
                                                case 4:
                                                    l.fPos += 6;
                                                    break;
                                                case 5:
                                                    l.fPos += 4;
                                                    break;
                                                case 6:
                                                    l.fPos += 3;
                                                    break;
                                                case 7:
                                                    l.fPos += 4;
                                                    break;
                                                case 8:
                                                    l.oPos += 3;
                                                    break;
                                                case 9:
                                                    l.fPos += 4;
                                                    break;
                                                case 10:
                                                    l.fPos += 5;
                                                    l.oPos += 1;
                                                    break;
                                                case 12:
                                                    l.oPos += 4;
                                                    break;
                                                case 14:
                                                    l.oPos += 2;
                                                    l.bPos += 2;
                                                    break;
                                                case 15:
                                                    l.oPos += 4;
                                                    l.iiPos += 2;
                                                    l.ffPos +=
                                                        1;
                                                    l.fPos += 1;
                                                    break;
                                                case 16:
                                                    l.oPos += 4;
                                                    l.iPos += 1;
                                                    l.fPos += 2;
                                                    l.bPos += 1;
                                                    break;
                                                case 17:
                                                    l.fPos += 2;
                                                    break;
                                                case 18:
                                                    l.fPos += 2;
                                                    break;
                                                case 19:
                                                    l.oPos += 1;
                                                    break;
                                                case 20:
                                                    l.oPos += 1
                                            }
                                            l.prev = ja.DRAW_QUADS;
                                            var da = l,
                                                jb = da.buffer.o[da.oPos],
                                                mc = da.buffer.o[da.oPos + 1],
                                                ka = null != mc ? mc.get_length() : Math.floor(jb.get_length() / 4),
                                                ia = b.__getMatrix(a.__owner.__renderTransform, 1);
                                            if (null == y || Y.maskRender) {
                                                if (null != z) {
                                                    var Gb = Y.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                                    b.setShader(Gb);
                                                    b.applyMatrix(ia);
                                                    b.applyBitmapData(z,
                                                        u, p);
                                                    b.applyAlpha(a.__owner.__worldAlpha);
                                                    b.applyColorTransform(a.__owner.__worldColorTransform)
                                                } else {
                                                    Gb = Y.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                                    b.setShader(Gb);
                                                    b.applyMatrix(ia);
                                                    b.applyBitmapData(Y.blankBitmapData, !0, p);
                                                    var oa = x;
                                                    Y.tempColorTransform.redOffset = oa >>> 16 & 255;
                                                    Y.tempColorTransform.greenOffset = oa >>> 8 & 255;
                                                    Y.tempColorTransform.blueOffset = oa & 255;
                                                    Y.tempColorTransform.__combine(a.__owner.__worldColorTransform);
                                                    b.applyAlpha((oa >>> 24 & 255) / 255 * a.__owner.__worldAlpha);
                                                    b.applyColorTransform(Y.tempColorTransform)
                                                }
                                                b.updateShader()
                                            } else Gb =
                                                b.__initShaderBuffer(y), b.__setShaderBuffer(y), b.applyMatrix(ia), b.applyBitmapData(z, !1, p), b.applyAlpha(a.__owner.__worldAlpha), b.applyColorTransform(a.__owner.__worldColorTransform);
                                            for (var Ba = A + ka; A < Ba;) {
                                                ka = Math.min(Ba - A, r.__quadIndexBufferElements) | 0;
                                                if (0 >= ka) break;
                                                null == y || Y.maskRender || b.__updateShaderBuffer(Q);
                                                null != Gb.__position && r.setVertexBufferAt(Gb.__position.index, a.__quadBuffer.vertexBuffer, 16 * A, 2);
                                                null != Gb.__textureCoord && r.setVertexBufferAt(Gb.__textureCoord.index, a.__quadBuffer.vertexBuffer,
                                                    16 * A + 2, 2);
                                                r.drawTriangles(r.__quadIndexBuffer, 0, 2 * ka);
                                                Q += 4 * ka;
                                                A += ka
                                            }
                                            b.__clearShader()
                                        }
                                        break;
                                    case 9:
                                        switch (l.prev._hx_index) {
                                            case 0:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 1:
                                                l.iPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 2:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 3:
                                                l.oPos += 1;
                                                break;
                                            case 4:
                                                l.fPos += 6;
                                                break;
                                            case 5:
                                                l.fPos += 4;
                                                break;
                                            case 6:
                                                l.fPos += 3;
                                                break;
                                            case 7:
                                                l.fPos += 4;
                                                break;
                                            case 8:
                                                l.oPos += 3;
                                                break;
                                            case 9:
                                                l.fPos += 4;
                                                break;
                                            case 10:
                                                l.fPos += 5;
                                                l.oPos += 1;
                                                break;
                                            case 12:
                                                l.oPos += 4;
                                                break;
                                            case 14:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 15:
                                                l.oPos +=
                                                    4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 16:
                                                l.oPos += 4;
                                                l.iPos += 1;
                                                l.fPos += 2;
                                                l.bPos += 1;
                                                break;
                                            case 17:
                                                l.fPos += 2;
                                                break;
                                            case 18:
                                                l.fPos += 2;
                                                break;
                                            case 19:
                                                l.oPos += 1;
                                                break;
                                            case 20:
                                                l.oPos += 1
                                        }
                                        l.prev = ja.DRAW_RECT;
                                        var fa = l;
                                        if (null != z) {
                                            var ma = 0;
                                            null != z && 0 == ma && (ma = 8);
                                            if (null != z || 0 == ma && null != x) {
                                                var fc = 12 <= ma,
                                                    qc = fc ? 4 : 2,
                                                    qa = qc + 2,
                                                    ra = fc ? a.__vertexBufferUVT : a.__vertexBuffer,
                                                    sa = fc ? O : m,
                                                    Tb = b.__getMatrix(a.__owner.__renderTransform, 1);
                                                if (null == y || Y.maskRender) {
                                                    if (null != z) {
                                                        var ua = Y.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                                        b.setShader(ua);
                                                        b.applyMatrix(Tb);
                                                        b.applyBitmapData(z, u, p);
                                                        b.applyAlpha(a.__owner.__worldAlpha);
                                                        b.applyColorTransform(a.__owner.__worldColorTransform)
                                                    } else {
                                                        ua = Y.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                                        b.setShader(ua);
                                                        b.applyMatrix(Tb);
                                                        b.applyBitmapData(Y.blankBitmapData, !0, p);
                                                        var Xa = x;
                                                        Y.tempColorTransform.redOffset = Xa >>> 16 & 255;
                                                        Y.tempColorTransform.greenOffset = Xa >>> 8 & 255;
                                                        Y.tempColorTransform.blueOffset = Xa & 255;
                                                        Y.tempColorTransform.__combine(a.__owner.__worldColorTransform);
                                                        b.applyAlpha((Xa >>>
                                                            24 & 255) / 255 * a.__owner.__worldAlpha);
                                                        b.applyColorTransform(Y.tempColorTransform)
                                                    }
                                                    b.updateShader()
                                                } else ua = b.__initShaderBuffer(y), b.__setShaderBuffer(y), b.applyMatrix(Tb), b.applyBitmapData(z, !1, p), b.applyAlpha(1), b.applyColorTransform(null), b.__updateShaderBuffer(Q);
                                                null != ua.__position && r.setVertexBufferAt(ua.__position.index, ra, sa, fc ? 4 : 2);
                                                null != ua.__textureCoord && r.setVertexBufferAt(ua.__textureCoord.index, ra, sa + qc, 2);
                                                r.setCulling(3);
                                                r.__drawTriangles(0, 6);
                                                Q += 6;
                                                fc ? O += 6 * qa : m += 6 * qa;
                                                r.setCulling(0);
                                                b.__clearShader()
                                            }
                                        } else if (null != x) {
                                            var $d = fa.buffer.f[fa.fPos],
                                                wa = fa.buffer.f[fa.fPos + 1];
                                            g = fa.buffer.f[fa.fPos + 2];
                                            f = fa.buffer.f[fa.fPos + 3];
                                            if (h) {
                                                var ya = Y.toScale9Position(fa.buffer.f[fa.fPos], k.x, k.width, d.width, a.__owner.get_scaleX()),
                                                    tb = Y.toScale9Position(fa.buffer.f[fa.fPos + 1], k.y, k.height, d.height, a.__owner.get_scaleY()),
                                                    pa = Y.toScale9Position(fa.buffer.f[fa.fPos] + fa.buffer.f[fa.fPos + 2], k.x, k.width, d.width, a.__owner.get_scaleX()),
                                                    Ca = Y.toScale9Position(fa.buffer.f[fa.fPos + 1] + fa.buffer.f[fa.fPos +
                                                    3], k.y, k.height, d.height, a.__owner.get_scaleY());
                                                $d = ya / a.__owner.get_scaleX();
                                                wa = tb / a.__owner.get_scaleY();
                                                g = (pa - ya) / a.__owner.get_scaleX();
                                                f = (Ca - tb) / a.__owner.get_scaleY()
                                            }
                                            t.identity();
                                            t.scale(g, f);
                                            t.tx = $d;
                                            t.ty = wa;
                                            t.concat(a.__owner.__renderTransform);
                                            var Aa = Y.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                            b.setShader(Aa);
                                            b.applyMatrix(b.__getMatrix(t, 1));
                                            b.applyBitmapData(Y.blankBitmapData, !0, p);
                                            var Oa = x;
                                            Y.tempColorTransform.redOffset = Oa >>> 16 & 255;
                                            Y.tempColorTransform.greenOffset = Oa >>> 8 &
                                                255;
                                            Y.tempColorTransform.blueOffset = Oa & 255;
                                            Y.tempColorTransform.__combine(a.__owner.__worldColorTransform);
                                            b.applyAlpha((Oa >>> 24 & 255) / 255 * a.__owner.__worldAlpha);
                                            b.applyColorTransform(Y.tempColorTransform);
                                            b.updateShader();
                                            var Ea = Y.blankBitmapData.getVertexBuffer(r);
                                            null != Aa.__position && r.setVertexBufferAt(Aa.__position.index, Ea, 0, 3);
                                            null != Aa.__textureCoord && r.setVertexBufferAt(Aa.__textureCoord.index, Ea, 3, 2);
                                            var Ya = Y.blankBitmapData.getIndexBuffer(r);
                                            r.drawTriangles(Ya);
                                            Q += 4;
                                            b.__clearShader()
                                        }
                                        break;
                                    case 10:
                                        switch (l.prev._hx_index) {
                                            case 0:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 1:
                                                l.iPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 2:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 3:
                                                l.oPos += 1;
                                                break;
                                            case 4:
                                                l.fPos += 6;
                                                break;
                                            case 5:
                                                l.fPos += 4;
                                                break;
                                            case 6:
                                                l.fPos += 3;
                                                break;
                                            case 7:
                                                l.fPos += 4;
                                                break;
                                            case 8:
                                                l.oPos += 3;
                                                break;
                                            case 9:
                                                l.fPos += 4;
                                                break;
                                            case 10:
                                                l.fPos += 5;
                                                l.oPos += 1;
                                                break;
                                            case 12:
                                                l.oPos += 4;
                                                break;
                                            case 14:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 15:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 16:
                                                l.oPos += 4;
                                                l.iPos += 1;
                                                l.fPos += 2;
                                                l.bPos += 1;
                                                break;
                                            case 17:
                                                l.fPos += 2;
                                                break;
                                            case 18:
                                                l.fPos += 2;
                                                break;
                                            case 19:
                                                l.oPos += 1;
                                                break;
                                            case 20:
                                                l.oPos += 1
                                        }
                                        l.prev = ja.DRAW_ROUND_RECT;
                                        var Ga = l,
                                            Da = Ga.buffer.f[Ga.fPos + 4] / 2,
                                            Ha = (null != Ga.buffer.o[Ga.oPos] ? Ga.buffer.o[Ga.oPos] : Ga.buffer.f[Ga.fPos + 4]) / 2,
                                            Ka = h && Ga.buffer.f[Ga.fPos] + Da <= k.x && Ga.buffer.f[Ga.fPos] + Ga.buffer.f[Ga.fPos + 2] - Da >= k.x + k.width ? 1 : a.__owner.get_scaleX(),
                                            La = h && Ga.buffer.f[Ga.fPos + 1] + Ha <= k.y && Ga.buffer.f[Ga.fPos + 1] + Ga.buffer.f[Ga.fPos + 3] - Da >= k.y + k.height ? 1 : a.__owner.get_scaleY(),
                                            rb = Math.ceil(Math.PI *
                                                (Da * Ka + Ha * La) / 8);
                                        3 > rb && (rb = 3);
                                        var Ma = 4 * rb,
                                            Na = 2 * Ma,
                                            Fb = 3 * (Ma - 2),
                                            Ia = 0;
                                        null != z && 0 == Ia && (Ia = Na);
                                        if (null != z || 0 == Ia && null != x) {
                                            var Pa = Math.floor(Na / 2),
                                                ec = 0 < Fb ? Fb : Pa,
                                                Qa = Ia >= 3 * Pa,
                                                Sa = Qa ? 4 : 2,
                                                yb = Sa + 2,
                                                Ta = Qa ? a.__vertexBufferUVT : a.__vertexBuffer,
                                                Ua = Qa ? O : m,
                                                Wa = b.__getMatrix(a.__owner.__renderTransform, 1);
                                            if (null == y || Y.maskRender) {
                                                if (null != z) {
                                                    var Ra = Y.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                                    b.setShader(Ra);
                                                    b.applyMatrix(Wa);
                                                    b.applyBitmapData(z, u, p);
                                                    b.applyAlpha(a.__owner.__worldAlpha);
                                                    b.applyColorTransform(a.__owner.__worldColorTransform)
                                                } else {
                                                    Ra =
                                                        Y.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                                    b.setShader(Ra);
                                                    b.applyMatrix(Wa);
                                                    b.applyBitmapData(Y.blankBitmapData, !0, p);
                                                    var Za = x;
                                                    Y.tempColorTransform.redOffset = Za >>> 16 & 255;
                                                    Y.tempColorTransform.greenOffset = Za >>> 8 & 255;
                                                    Y.tempColorTransform.blueOffset = Za & 255;
                                                    Y.tempColorTransform.__combine(a.__owner.__worldColorTransform);
                                                    b.applyAlpha((Za >>> 24 & 255) / 255 * a.__owner.__worldAlpha);
                                                    b.applyColorTransform(Y.tempColorTransform)
                                                }
                                                b.updateShader()
                                            } else Ra = b.__initShaderBuffer(y), b.__setShaderBuffer(y),
                                                b.applyMatrix(Wa), b.applyBitmapData(z, !1, p), b.applyAlpha(1), b.applyColorTransform(null), b.__updateShaderBuffer(Q);
                                            null != Ra.__position && r.setVertexBufferAt(Ra.__position.index, Ta, Ua, Qa ? 4 : 2);
                                            null != Ra.__textureCoord && r.setVertexBufferAt(Ra.__textureCoord.index, Ta, Ua + Sa, 2);
                                            r.setCulling(3);
                                            r.__drawTriangles(0, ec);
                                            Q += ec;
                                            Qa ? O += yb * ec : m += yb * ec;
                                            r.setCulling(0);
                                            b.__clearShader()
                                        }
                                        break;
                                    case 12:
                                        switch (l.prev._hx_index) {
                                            case 0:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 1:
                                                l.iPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 2:
                                                l.oPos += 4;
                                                l.iiPos +=
                                                    2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 3:
                                                l.oPos += 1;
                                                break;
                                            case 4:
                                                l.fPos += 6;
                                                break;
                                            case 5:
                                                l.fPos += 4;
                                                break;
                                            case 6:
                                                l.fPos += 3;
                                                break;
                                            case 7:
                                                l.fPos += 4;
                                                break;
                                            case 8:
                                                l.oPos += 3;
                                                break;
                                            case 9:
                                                l.fPos += 4;
                                                break;
                                            case 10:
                                                l.fPos += 5;
                                                l.oPos += 1;
                                                break;
                                            case 12:
                                                l.oPos += 4;
                                                break;
                                            case 14:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 15:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 16:
                                                l.oPos += 4;
                                                l.iPos += 1;
                                                l.fPos += 2;
                                                l.bPos += 1;
                                                break;
                                            case 17:
                                                l.fPos += 2;
                                                break;
                                            case 18:
                                                l.fPos += 2;
                                                break;
                                            case 19:
                                                l.oPos += 1;
                                                break;
                                            case 20:
                                                l.oPos += 1
                                        }
                                        l.prev = ja.DRAW_TRIANGLES;
                                        var Va = l,
                                            bb = Va.buffer.o[Va.oPos + 1],
                                            qb = Va.buffer.o[Va.oPos + 2],
                                            db = Va.buffer.o[Va.oPos + 3],
                                            gd = Va.buffer.o[Va.oPos].get_length(),
                                            eb = null != bb ? bb.get_length() : 0,
                                            ab = null != qb ? qb.get_length() : 0;
                                        null != z && 0 == ab && (ab = gd);
                                        if (null != z || 0 == ab && null != x) {
                                            var fb = Math.floor(gd / 2),
                                                cb = 0 < eb ? eb : fb,
                                                za = ab >= 3 * fb,
                                                gb = za ? 4 : 2,
                                                Bc = gb + 2,
                                                Sb = za ? a.__vertexBufferUVT : a.__vertexBuffer,
                                                ob = za ? O : m,
                                                hb = b.__getMatrix(a.__owner.__renderTransform, 1);
                                            if (null == y || Y.maskRender) {
                                                if (null != z) {
                                                    var $a = Y.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                                    b.setShader($a);
                                                    b.applyMatrix(hb);
                                                    b.applyBitmapData(z, u, p);
                                                    b.applyAlpha(a.__owner.__worldAlpha);
                                                    b.applyColorTransform(a.__owner.__worldColorTransform)
                                                } else {
                                                    $a = Y.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                                    b.setShader($a);
                                                    b.applyMatrix(hb);
                                                    b.applyBitmapData(Y.blankBitmapData, !0, p);
                                                    var ib = x;
                                                    Y.tempColorTransform.redOffset = ib >>> 16 & 255;
                                                    Y.tempColorTransform.greenOffset = ib >>> 8 & 255;
                                                    Y.tempColorTransform.blueOffset = ib & 255;
                                                    Y.tempColorTransform.__combine(a.__owner.__worldColorTransform);
                                                    b.applyAlpha((ib >>>
                                                        24 & 255) / 255 * a.__owner.__worldAlpha);
                                                    b.applyColorTransform(Y.tempColorTransform)
                                                }
                                                b.updateShader()
                                            } else $a = b.__initShaderBuffer(y), b.__setShaderBuffer(y), b.applyMatrix(hb), b.applyBitmapData(z, !1, p), b.applyAlpha(1), b.applyColorTransform(null), b.__updateShaderBuffer(Q);
                                            null != $a.__position && r.setVertexBufferAt($a.__position.index, Sb, ob, za ? 4 : 2);
                                            null != $a.__textureCoord && r.setVertexBufferAt($a.__textureCoord.index, Sb, ob + gb, 2);
                                            switch (db) {
                                                case 0:
                                                    r.setCulling(0);
                                                    break;
                                                case 1:
                                                    r.setCulling(3);
                                                    break;
                                                case 2:
                                                    r.setCulling(1)
                                            }
                                            r.__drawTriangles(0,
                                                cb);
                                            Q += cb;
                                            za ? O += Bc * cb : m += Bc * cb;
                                            switch (db) {
                                                case 1:
                                                case 2:
                                                    r.setCulling(0)
                                            }
                                            b.__clearShader()
                                        }
                                        break;
                                    case 13:
                                        y = x = z = null;
                                        switch (l.prev._hx_index) {
                                            case 0:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 1:
                                                l.iPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 2:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 3:
                                                l.oPos += 1;
                                                break;
                                            case 4:
                                                l.fPos += 6;
                                                break;
                                            case 5:
                                                l.fPos += 4;
                                                break;
                                            case 6:
                                                l.fPos += 3;
                                                break;
                                            case 7:
                                                l.fPos += 4;
                                                break;
                                            case 8:
                                                l.oPos += 3;
                                                break;
                                            case 9:
                                                l.fPos += 4;
                                                break;
                                            case 10:
                                                l.fPos += 5;
                                                l.oPos += 1;
                                                break;
                                            case 12:
                                                l.oPos += 4;
                                                break;
                                            case 14:
                                                l.oPos += 2;
                                                l.bPos +=
                                                    2;
                                                break;
                                            case 15:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 16:
                                                l.oPos += 4;
                                                l.iPos += 1;
                                                l.fPos += 2;
                                                l.bPos += 1;
                                                break;
                                            case 17:
                                                l.fPos += 2;
                                                break;
                                            case 18:
                                                l.fPos += 2;
                                                break;
                                            case 19:
                                                l.oPos += 1;
                                                break;
                                            case 20:
                                                l.oPos += 1
                                        }
                                        l.prev = w;
                                        r.setCulling(3);
                                        break;
                                    case 18:
                                        switch (l.prev._hx_index) {
                                            case 0:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 1:
                                                l.iPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 2:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 3:
                                                l.oPos += 1;
                                                break;
                                            case 4:
                                                l.fPos += 6;
                                                break;
                                            case 5:
                                                l.fPos += 4;
                                                break;
                                            case 6:
                                                l.fPos += 3;
                                                break;
                                            case 7:
                                                l.fPos += 4;
                                                break;
                                            case 8:
                                                l.oPos += 3;
                                                break;
                                            case 9:
                                                l.fPos += 4;
                                                break;
                                            case 10:
                                                l.fPos += 5;
                                                l.oPos += 1;
                                                break;
                                            case 12:
                                                l.oPos += 4;
                                                break;
                                            case 14:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 15:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 16:
                                                l.oPos += 4;
                                                l.iPos += 1;
                                                l.fPos += 2;
                                                l.bPos += 1;
                                                break;
                                            case 17:
                                                l.fPos += 2;
                                                break;
                                            case 18:
                                                l.fPos += 2;
                                                break;
                                            case 19:
                                                l.oPos += 1;
                                                break;
                                            case 20:
                                                l.oPos += 1
                                        }
                                        l.prev = ja.MOVE_TO;
                                        break;
                                    case 19:
                                        switch (l.prev._hx_index) {
                                            case 0:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 1:
                                                l.iPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 2:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos +=
                                                    1;
                                                l.fPos += 1;
                                                break;
                                            case 3:
                                                l.oPos += 1;
                                                break;
                                            case 4:
                                                l.fPos += 6;
                                                break;
                                            case 5:
                                                l.fPos += 4;
                                                break;
                                            case 6:
                                                l.fPos += 3;
                                                break;
                                            case 7:
                                                l.fPos += 4;
                                                break;
                                            case 8:
                                                l.oPos += 3;
                                                break;
                                            case 9:
                                                l.fPos += 4;
                                                break;
                                            case 10:
                                                l.fPos += 5;
                                                l.oPos += 1;
                                                break;
                                            case 12:
                                                l.oPos += 4;
                                                break;
                                            case 14:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 15:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 16:
                                                l.oPos += 4;
                                                l.iPos += 1;
                                                l.fPos += 2;
                                                l.bPos += 1;
                                                break;
                                            case 17:
                                                l.fPos += 2;
                                                break;
                                            case 18:
                                                l.fPos += 2;
                                                break;
                                            case 19:
                                                l.oPos += 1;
                                                break;
                                            case 20:
                                                l.oPos += 1
                                        }
                                        l.prev = ja.OVERRIDE_BLEND_MODE;
                                        var zb = l;
                                        b.__setBlendMode(zb.buffer.o[zb.oPos]);
                                        break;
                                    default:
                                        switch (l.prev._hx_index) {
                                            case 0:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 1:
                                                l.iPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 2:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 3:
                                                l.oPos += 1;
                                                break;
                                            case 4:
                                                l.fPos += 6;
                                                break;
                                            case 5:
                                                l.fPos += 4;
                                                break;
                                            case 6:
                                                l.fPos += 3;
                                                break;
                                            case 7:
                                                l.fPos += 4;
                                                break;
                                            case 8:
                                                l.oPos += 3;
                                                break;
                                            case 9:
                                                l.fPos += 4;
                                                break;
                                            case 10:
                                                l.fPos += 5;
                                                l.oPos += 1;
                                                break;
                                            case 12:
                                                l.oPos += 4;
                                                break;
                                            case 14:
                                                l.oPos += 2;
                                                l.bPos += 2;
                                                break;
                                            case 15:
                                                l.oPos += 4;
                                                l.iiPos += 2;
                                                l.ffPos += 1;
                                                l.fPos += 1;
                                                break;
                                            case 16:
                                                l.oPos += 4;
                                                l.iPos += 1;
                                                l.fPos += 2;
                                                l.bPos += 1;
                                                break;
                                            case 17:
                                                l.fPos += 2;
                                                break;
                                            case 18:
                                                l.fPos += 2;
                                                break;
                                            case 19:
                                                l.oPos += 1;
                                                break;
                                            case 20:
                                                l.oPos += 1
                                        }
                                        l.prev = w
                                }
                            }
                            va.__pool.release(t)
                        }
                        a.set___dirty(!1)
                    }
                    a.__hardwareDirty = !1
                }
            };
            Y.renderMask = function (a, b) {
                Y.maskRender = !0;
                Y.render(a, b);
                Y.maskRender = !1
            };
            Y.resizeVertexBuffer = function (a, b, c) {
                var d = b ? a.__vertexBufferDataUVT : a.__vertexBufferData,
                    g = null;
                if (null == d) {
                    var f = g = null,
                        k = null,
                        h = null,
                        l = null;
                    g = c = null != c ? new Float32Array(c) : null != g ? new Float32Array(g) :
                        null != f ? new Float32Array(f.__array) : null != k ? new Float32Array(k) : null != h ? null == l ? new Float32Array(h, 0) : new Float32Array(h, 0, l) : null
                } else c > d.length && (l = h = k = f = g = null, g = c = null != c ? new Float32Array(c) : null != g ? new Float32Array(g) : null != f ? new Float32Array(f.__array) : null != k ? new Float32Array(k) : null != h ? null == l ? new Float32Array(h, 0) : new Float32Array(h, 0, l) : null, g.set(d));
                null != g && (b ? a.__vertexBufferDataUVT = g : a.__vertexBufferData = g)
            };
            Y.populateUvtVector = function (a, b, c) {
                for (var d = a.get(0), g = d, f = a.get(1), k = f,
                         h = 2, l = a.get_length(); h < l;) {
                    var n = a.get(h);
                    d > n ? d = n : g < n && (g = n);
                    n = a.get(h + 1);
                    f > n ? f = n : k < n && (k = n);
                    h += 2
                }
                d = g - d;
                f = k - f;
                c.set_length(l);
                for (h = 0; h < l;) c.set(h, d * (a.get(h) / d) / b.width), c.set(h + 1, f * (a.get(h + 1) / f) / b.height), h += 2
            };
            Y.toScale9Position = function (a, b, c, d, g) {
                if (0 >= g) return 0;
                var f = d - c - b;
                d = d * g - b - f;
                return a <= b ? 0 > d ? a * (b + f + d) / (b + f) : a : a >= b + c ? 0 > d ? (b + (a - b - c)) * (b + f + d) / (b + f) : b + d + (a - b - c) : 0 > d ? b * (b + f + d) / (b + f) : b + d * (a - b) / c
            };
            var xh = function () {
            };
            h["openfl.display._internal._Context3DGraphics.PolygonFunctions"] = xh;
            xh.__name__ =
                "openfl.display._internal._Context3DGraphics.PolygonFunctions";
            xh.buildEllipseVerticesAndIndices = function (a, b, c, d, g, f, k, h) {
                g = Math.PI * (c * g + d * f) / 4 | 0;
                6 > g && (g = 6);
                f = 2 * Math.PI / g;
                var l = 0;
                k.set_length(2 * g);
                for (var q = 0, n = g; q < n;) {
                    var r = q++;
                    k.set(2 * r, Math.cos(l) * c + a + c);
                    k.set(2 * r + 1, Math.sin(l) * d + b + d);
                    l += f
                }
                h.set_length(3 * (g - 2));
                q = 0;
                for (n = g - 2; q < n;) r = q++, h.set(3 * r, 0), h.set(3 * r + 1, r + 1), h.set(3 * r + 2, r + 2)
            };
            xh.buildRoundRectVerticesAndIndices = function (a, b, c, d, g, f, k, h, l, n) {
                k = Math.ceil(Math.PI * (g * k + f * h) / 8);
                3 > k && (k = 3);
                h =
                    4 * k;
                var q = h / 4 | 0,
                    r = Math.PI / 2 / (q - 1),
                    t = 0,
                    p = c - g - g,
                    y = d - f - f,
                    z = !0;
                l.set_length(2 * h);
                var u = 0,
                    x = q;
                for (k = 0; 4 > k;) {
                    for (k++; u < x;) l.set(2 * u, p + Math.cos(t) * g + a + g), l.set(2 * u + 1, y + Math.sin(t) * f + b + f), t += r, ++u;
                    t -= r;
                    z ? p = 0 == p ? c - g - g : 0 : y = 0 == y ? d - f - f : 0;
                    z = !z;
                    x += q
                }
                n.set_length(3 * (h - 2));
                k = 0;
                for (b = h - 2; k < b;) a = k++, n.set(3 * a, 0), n.set(3 * a + 1, a + 1), n.set(3 * a + 2, a + 2)
            };
            var Xf = function () {
                null == this.__glFragmentSource && (this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t\tif (color.a == 0.0) {\n\n\t\t\t\tdiscard;\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = color;\n\n\t\t\t}\n\n\t\t}");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}");
                Ed.call(this);
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.display._internal.Context3DMaskShader"] = Xf;
            Xf.__name__ = "openfl.display._internal.Context3DMaskShader";
            Xf.__super__ = Ed;
            Xf.prototype = w(Ed.prototype, {
                __class__: Xf
            });
            var Ge = function () {
            };
            h["openfl.display._internal.Context3DShape"] = Ge;
            Ge.__name__ = "openfl.display._internal.Context3DShape";
            Ge.render = function (a, b) {
                if (a.__renderable && !(0 >= a.__worldAlpha)) {
                    var c = a.__graphics;
                    if (null != c) {
                        b.__setBlendMode(a.__worldBlendMode);
                        b.__pushMaskObject(a);
                        Y.render(c, b);
                        if (null != c.__bitmap && c.__visible) {
                            var d = b.__context3D,
                                g = b.__initDisplayShader(a.__worldShader);
                            b.setShader(g);
                            b.applyBitmapData(c.__bitmap, !0);
                            var f = va.__pool.get();
                            f.scale(1 / c.__bitmapScaleX, 1 / c.__bitmapScaleY);
                            f.concat(c.__worldTransform);
                            b.applyMatrix(b.__getMatrix(f, 1));
                            va.__pool.release(f);
                            b.applyAlpha(a.__worldAlpha);
                            b.applyColorTransform(a.__worldColorTransform);
                            b.updateShader();
                            f = c.__bitmap.getVertexBuffer(d);
                            null != g.__position && d.setVertexBufferAt(g.__position.index, f, 0, 3);
                            null != g.__textureCoord && d.setVertexBufferAt(g.__textureCoord.index, f, 3, 2);
                            c = c.__bitmap.getIndexBuffer(d);
                            d.drawTriangles(c);
                            b.__clearShader()
                        }
                        b.__popMaskObject(a)
                    }
                }
            };
            Ge.renderMask =
                function (a, b) {
                    var c = a.__graphics;
                    if (null != c && (Y.renderMask(c, b), null != c.__bitmap)) {
                        a = b.__context3D;
                        var d = b.__maskShader;
                        b.setShader(d);
                        b.applyBitmapData(c.__bitmap, !0);
                        b.applyMatrix(b.__getMatrix(c.__worldTransform, 1));
                        b.updateShader();
                        var g = c.__bitmap.getVertexBuffer(a);
                        null != d.__position && a.setVertexBufferAt(d.__position.index, g, 0, 3);
                        null != d.__textureCoord && a.setVertexBufferAt(d.__textureCoord.index, g, 3, 2);
                        c = c.__bitmap.getIndexBuffer(a);
                        a.drawTriangles(c);
                        b.__clearShader()
                    }
                };
            var Sj = function () {
            };
            h["openfl.display._internal.Context3DSimpleButton"] = Sj;
            Sj.__name__ = "openfl.display._internal.Context3DSimpleButton";
            Sj.renderDrawable = OpenflShared.renderDrawableSimple;
            Sj.renderDrawableMask = function (a, b) {
                null != a.__currentState && b.__renderDrawableMask(a.__currentState)
            };
            var Xe = function () {
            };
            h["openfl.display._internal.Context3DTextField"] = Xe;
            Xe.__name__ = "openfl.display._internal.Context3DTextField";
            Xe.render = function (a, b) {
                b.__softwareRenderer.__pixelRatio = b.__pixelRatio;
                var c = b.__softwareRenderer,
                    d = a.__textEngine,
                    g = !(d.background || d.border),
                    f = g ? d.textBounds : d.bounds;
                b = a.__graphics;
                var k = 0;
                if (a.__dirty) {
                    a.__updateLayout();
                    null == b.__bounds && (b.__bounds = new sa);
                    if (0 == a.get_text().length) {
                        k = d.bounds.width - 4;
                        var h = a.get_defaultTextFormat().align;
                        k = 3 == h ? 0 : 4 == h ? k : k / 2;
                        switch (h) {
                            case 0:
                                k += a.get_defaultTextFormat().leftMargin / 2;
                                k -= a.get_defaultTextFormat().rightMargin / 2;
                                k += a.get_defaultTextFormat().indent /
                                    2;
                                k += a.get_defaultTextFormat().blockIndent / 2;
                                break;
                            case 2:
                                k += a.get_defaultTextFormat().leftMargin;
                                k += a.get_defaultTextFormat().indent;
                                k += a.get_defaultTextFormat().blockIndent;
                                break;
                            case 3:
                                k += a.get_defaultTextFormat().leftMargin;
                                k += a.get_defaultTextFormat().indent;
                                k += a.get_defaultTextFormat().blockIndent;
                                break;
                            case 4:
                                k -= a.get_defaultTextFormat().rightMargin
                        }
                        g && (f.y = d.bounds.y, f.x = k)
                    }
                    b.__bounds.copyFrom(f)
                }
                h = c.__pixelRatio;
                b.__update(c.__worldTransform, h);
                if (a.__dirty || b.__softwareDirty) {
                    var l = Math.round(b.__width *
                            h),
                        n = Math.round(b.__height * h);
                    if (!(null != d.text && "" != d.text || d.background || d.border || d.__hasFocus || 1 == d.type && d.selectable) || (0 >= d.width || 0 >= d.height) && 2 != d.autoSize) a.__graphics.__canvas = null, a.__graphics.__context = null, a.__graphics.__bitmap = null, a.__graphics.__softwareDirty = !1, a.__graphics.set___dirty(!1), a.__dirty = !1;
                    else {
                        null == a.__graphics.__canvas && (a.__graphics.__canvas = window.document.createElement("canvas"), a.__graphics.__context = a.__graphics.__canvas.getContext("2d"));
                        W.context = b.__context;
                        b.__canvas.width = l;
                        b.__canvas.height = n;
                        c.__isDOM && (b.__canvas.style.width = Math.round(l / h) + "px", b.__canvas.style.height = Math.round(n / h) + "px");
                        l = va.__pool.get();
                        l.scale(h, h);
                        l.concat(b.__renderTransform);
                        W.context.setTransform(l.a, l.b, l.c, l.d, l.tx, l.ty);
                        va.__pool.release(l);
                        null == W.clearRect && (W.clearRect = "undefined" !== typeof navigator && "undefined" !== typeof navigator.isCocoonJS);
                        W.clearRect && W.context.clearRect(0, 0, b.__canvas.width, b.__canvas.height);
                        if (null != d.text && "" != d.text || d.__hasFocus) {
                            g = d.text;
                            b.__context.imageSmoothingEnabled = !c.__allowSmoothing || 0 == d.antiAliasType && 400 == d.sharpness ? !1 : !0;
                            if (d.border || d.background) {
                                W.context.rect(.5, .5, f.width - 1, f.height - 1);
                                if (d.background) {
                                    var r = T.hex(d.backgroundColor & 16777215, 6);
                                    W.context.fillStyle = "#" + r;
                                    W.context.fill()
                                }
                                d.border && (W.context.lineWidth = 1, r = T.hex(d.borderColor & 16777215, 6), W.context.strokeStyle = "#" + r, W.context.stroke())
                            }
                            W.context.textBaseline = "alphabetic";
                            W.context.textAlign = "start";
                            c = -a.get_scrollH();
                            var t = k = 0;
                            for (r = a.get_scrollV() - 1; t <
                            r;) {
                                var y = t++;
                                k -= d.lineHeights.get(y)
                            }
                            var p;
                            for (l = d.layoutGroups.iterator(); l.hasNext();)
                                if (n = l.next(), !(n.lineIndex < a.get_scrollV() - 1)) {
                                    if (n.lineIndex > d.get_bottomScrollV() - 1) break;
                                    var z = "#" + T.hex(n.format.color & 16777215, 6);
                                    W.context.font = Bb.getFont(n.format);
                                    W.context.fillStyle = z;
                                    W.context.fillText(g.substring(n.startIndex, n.endIndex), n.offsetX + c - f.x, n.offsetY + n.ascent + k - f.y);
                                    if (-1 < a.__caretIndex && d.selectable)
                                        if (a.__selectionIndex == a.__caretIndex) {
                                            if (a.__showCursor && n.startIndex <= a.__caretIndex &&
                                                n.endIndex >= a.__caretIndex) {
                                                t = p = 0;
                                                for (r = a.__caretIndex - n.startIndex; t < r;) {
                                                    y = t++;
                                                    if (n.positions.length <= y) break;
                                                    p += n.positions[y]
                                                }
                                                t = 0;
                                                r = a.get_scrollV();
                                                for (y = n.lineIndex + 1; r < y;) {
                                                    var u = r++;
                                                    t += d.lineHeights.get(u - 1)
                                                }
                                                W.context.beginPath();
                                                r = T.hex(n.format.color & 16777215, 6);
                                                W.context.strokeStyle = "#" + r;
                                                W.context.moveTo(n.offsetX + p - a.get_scrollH() - f.x, t + 2 - f.y);
                                                W.context.lineWidth = 1;
                                                W.context.lineTo(n.offsetX + p - a.get_scrollH() - f.x, t + Bb.getFormatHeight(a.get_defaultTextFormat()) - 1 - f.y);
                                                W.context.stroke();
                                                W.context.closePath()
                                            }
                                        } else if (n.startIndex <= a.__caretIndex && n.endIndex >= a.__caretIndex || n.startIndex <= a.__selectionIndex && n.endIndex >= a.__selectionIndex || n.startIndex > a.__caretIndex && n.endIndex < a.__selectionIndex || n.startIndex > a.__selectionIndex && n.endIndex < a.__caretIndex) p = Math.min(a.__selectionIndex, a.__caretIndex) | 0, t = Math.max(a.__selectionIndex, a.__caretIndex) | 0, n.startIndex > p && (p = n.startIndex), n.endIndex < t && (t = n.endIndex), y = a.getCharBoundaries(p), t >= n.endIndex ? (r = a.getCharBoundaries(n.endIndex -
                                            1), null != r && (r.x += r.width + 2)) : r = a.getCharBoundaries(t), null != y && null != r && (W.context.fillStyle = "#000000", W.context.fillRect(y.x + c - f.x, y.y + k, r.x - y.x, n.height), W.context.fillStyle = "#FFFFFF", W.context.fillText(g.substring(p, t), c + y.x - f.x, n.offsetY + n.ascent + k));
                                    n.format.underline && (W.context.beginPath(), W.context.strokeStyle = z, W.context.lineWidth = 1, p = n.offsetX + c - f.x, t = Math.ceil(n.offsetY + k + n.ascent - f.y) + Math.floor(.185 * n.ascent) + .5, W.context.moveTo(p, t), W.context.lineTo(p + n.width, t), W.context.stroke(),
                                        W.context.closePath());
                                    n.format.strikethrough && (W.context.beginPath(), W.context.strokeStyle = z, W.context.lineWidth = 1, z = n.offsetX + c - f.x, p = Math.ceil(n.offsetY + k + 2 * n.ascent / 3 - f.y), W.context.moveTo(z, p), W.context.lineTo(z + n.width, p), W.context.stroke(), W.context.closePath())
                                }
                        } else {
                            if (d.border || d.background) d.border ? W.context.rect(.5, .5, f.width - 1, f.height - 1) : W.context.rect(0, 0, f.width, f.height), d.background && (r = T.hex(d.backgroundColor & 16777215, 6), W.context.fillStyle = "#" + r, W.context.fill()), d.border && (W.context.lineWidth =
                                1, W.context.lineCap = "square", r = T.hex(d.borderColor & 16777215, 6), W.context.strokeStyle = "#" + r, W.context.stroke());
                            if (-1 < a.__caretIndex && d.selectable && a.__showCursor) {
                                c = -a.get_scrollH() + (g ? 0 : k);
                                t = k = 0;
                                for (r = a.get_scrollV() - 1; t < r;) y = t++, k += d.lineHeights.get(y);
                                W.context.beginPath();
                                r = T.hex(a.get_defaultTextFormat().color & 16777215, 6);
                                W.context.strokeStyle = "#" + r;
                                W.context.moveTo(c + 2.5, k + 2.5);
                                W.context.lineWidth = 1;
                                W.context.lineTo(c + 2.5, k + Bb.getFormatHeight(a.get_defaultTextFormat()) - 1);
                                W.context.stroke();
                                W.context.closePath()
                            }
                        }
                        null == b.__bitmap ? b.__bitmap = Ob.fromCanvas(b.__canvas) : b.__bitmap.width != b.__canvas.width || b.__bitmap.height != b.__canvas.height ? (d = b.__bitmap.__texture, null != d && d.dispose(), b.__bitmap = Ob.fromCanvas(b.__canvas)) : b.__bitmap.image.version++;
                        b.__bitmapScaleX = h;
                        b.__bitmapScaleY = h;
                        b.__visible = !0;
                        a.__dirty = !1;
                        b.__softwareDirty = !1;
                        b.set___dirty(!1)
                    }
                }
                a.__graphics.__hardwareDirty = !1
            };
            Xe.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    if (Xe.render(a,
                        b), !(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || 0 >= a.__worldAlpha)) {
                        if (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            var c = b.__context3D,
                                d = sa.__pool.get();
                            d.setTo(0, 0, a.get_width(), a.get_height());
                            b.__pushMaskRect(d, a.__renderTransform);
                            var g = a.opaqueBackground;
                            c.__clear(!0, (g >>> 16 & 255) / 255, (g >>> 8 & 255) / 255, (g & 255) / 255, 1, 0, 0, 1);
                            b.__popMaskRect();
                            b.__popMaskObject(a);
                            sa.__pool.release(d)
                        }
                        null !=
                        a.__graphics && Ge.render(a, b)
                    }
                } else Sd.render(a.__cacheBitmap, b);
                b.__renderEvent(a)
            };
            Xe.renderDrawableMask = function (a, b) {
                Xe.renderMask(a, b);
                Yf.renderDrawableMask(a, b)
            };
            Xe.renderMask = function (a, b) {
                var c = b.__softwareRenderer,
                    d = a.__textEngine,
                    g = !(d.background || d.border),
                    f = g ? d.textBounds : d.bounds;
                b = a.__graphics;
                var k = 0;
                if (a.__dirty) {
                    a.__updateLayout();
                    null == b.__bounds && (b.__bounds = new sa);
                    if (0 == a.get_text().length) {
                        k = d.bounds.width - 4;
                        var h = a.get_defaultTextFormat().align;
                        k = 3 == h ? 0 : 4 == h ? k : k / 2;
                        switch (h) {
                            case 0:
                                k +=
                                    a.get_defaultTextFormat().leftMargin / 2;
                                k -= a.get_defaultTextFormat().rightMargin / 2;
                                k += a.get_defaultTextFormat().indent / 2;
                                k += a.get_defaultTextFormat().blockIndent / 2;
                                break;
                            case 2:
                                k += a.get_defaultTextFormat().leftMargin;
                                k += a.get_defaultTextFormat().indent;
                                k += a.get_defaultTextFormat().blockIndent;
                                break;
                            case 3:
                                k += a.get_defaultTextFormat().leftMargin;
                                k += a.get_defaultTextFormat().indent;
                                k += a.get_defaultTextFormat().blockIndent;
                                break;
                            case 4:
                                k -= a.get_defaultTextFormat().rightMargin
                        }
                        g && (f.y = d.bounds.y, f.x = k)
                    }
                    b.__bounds.copyFrom(f)
                }
                h =
                    c.__pixelRatio;
                b.__update(c.__worldTransform, h);
                if (a.__dirty || b.__softwareDirty) {
                    var l = Math.round(b.__width * h),
                        n = Math.round(b.__height * h);
                    if (!(null != d.text && "" != d.text || d.background || d.border || d.__hasFocus || 1 == d.type && d.selectable) || (0 >= d.width || 0 >= d.height) && 2 != d.autoSize) a.__graphics.__canvas = null, a.__graphics.__context = null, a.__graphics.__bitmap = null, a.__graphics.__softwareDirty = !1, a.__graphics.set___dirty(!1), a.__dirty = !1;
                    else {
                        null == a.__graphics.__canvas && (a.__graphics.__canvas = window.document.createElement("canvas"),
                            a.__graphics.__context = a.__graphics.__canvas.getContext("2d"));
                        W.context = b.__context;
                        b.__canvas.width = l;
                        b.__canvas.height = n;
                        c.__isDOM && (b.__canvas.style.width = Math.round(l / h) + "px", b.__canvas.style.height = Math.round(n / h) + "px");
                        l = va.__pool.get();
                        l.scale(h, h);
                        l.concat(b.__renderTransform);
                        W.context.setTransform(l.a, l.b, l.c, l.d, l.tx, l.ty);
                        va.__pool.release(l);
                        null == W.clearRect && (W.clearRect = "undefined" !== typeof navigator && "undefined" !== typeof navigator.isCocoonJS);
                        W.clearRect && W.context.clearRect(0, 0,
                            b.__canvas.width, b.__canvas.height);
                        if (null != d.text && "" != d.text || d.__hasFocus) {
                            g = d.text;
                            b.__context.imageSmoothingEnabled = !c.__allowSmoothing || 0 == d.antiAliasType && 400 == d.sharpness ? !1 : !0;
                            if (d.border || d.background) {
                                W.context.rect(.5, .5, f.width - 1, f.height - 1);
                                if (d.background) {
                                    var r = T.hex(d.backgroundColor & 16777215, 6);
                                    W.context.fillStyle = "#" + r;
                                    W.context.fill()
                                }
                                d.border && (W.context.lineWidth = 1, r = T.hex(d.borderColor & 16777215, 6), W.context.strokeStyle = "#" + r, W.context.stroke())
                            }
                            W.context.textBaseline = "alphabetic";
                            W.context.textAlign = "start";
                            c = -a.get_scrollH();
                            var t = k = 0;
                            for (r = a.get_scrollV() - 1; t < r;) {
                                var y = t++;
                                k -= d.lineHeights.get(y)
                            }
                            var p;
                            for (l = d.layoutGroups.iterator(); l.hasNext();)
                                if (n = l.next(), !(n.lineIndex < a.get_scrollV() - 1)) {
                                    if (n.lineIndex > d.get_bottomScrollV() - 1) break;
                                    var z = "#" + T.hex(n.format.color & 16777215, 6);
                                    W.context.font = Bb.getFont(n.format);
                                    W.context.fillStyle = z;
                                    W.context.fillText(g.substring(n.startIndex, n.endIndex), n.offsetX + c - f.x, n.offsetY + n.ascent + k - f.y);
                                    if (-1 < a.__caretIndex && d.selectable)
                                        if (a.__selectionIndex ==
                                            a.__caretIndex) {
                                            if (a.__showCursor && n.startIndex <= a.__caretIndex && n.endIndex >= a.__caretIndex) {
                                                t = p = 0;
                                                for (r = a.__caretIndex - n.startIndex; t < r;) {
                                                    y = t++;
                                                    if (n.positions.length <= y) break;
                                                    p += n.positions[y]
                                                }
                                                t = 0;
                                                r = a.get_scrollV();
                                                for (y = n.lineIndex + 1; r < y;) {
                                                    var u = r++;
                                                    t += d.lineHeights.get(u - 1)
                                                }
                                                W.context.beginPath();
                                                r = T.hex(n.format.color & 16777215, 6);
                                                W.context.strokeStyle = "#" + r;
                                                W.context.moveTo(n.offsetX + p - a.get_scrollH() - f.x, t + 2 - f.y);
                                                W.context.lineWidth = 1;
                                                W.context.lineTo(n.offsetX + p - a.get_scrollH() - f.x, t + Bb.getFormatHeight(a.get_defaultTextFormat()) -
                                                    1 - f.y);
                                                W.context.stroke();
                                                W.context.closePath()
                                            }
                                        } else if (n.startIndex <= a.__caretIndex && n.endIndex >= a.__caretIndex || n.startIndex <= a.__selectionIndex && n.endIndex >= a.__selectionIndex || n.startIndex > a.__caretIndex && n.endIndex < a.__selectionIndex || n.startIndex > a.__selectionIndex && n.endIndex < a.__caretIndex) p = Math.min(a.__selectionIndex, a.__caretIndex) | 0, t = Math.max(a.__selectionIndex, a.__caretIndex) | 0, n.startIndex > p && (p = n.startIndex), n.endIndex < t && (t = n.endIndex), y = a.getCharBoundaries(p), t >= n.endIndex ? (r = a.getCharBoundaries(n.endIndex -
                                            1), null != r && (r.x += r.width + 2)) : r = a.getCharBoundaries(t), null != y && null != r && (W.context.fillStyle = "#000000", W.context.fillRect(y.x + c - f.x, y.y + k, r.x - y.x, n.height), W.context.fillStyle = "#FFFFFF", W.context.fillText(g.substring(p, t), c + y.x - f.x, n.offsetY + n.ascent + k));
                                    n.format.underline && (W.context.beginPath(), W.context.strokeStyle = z, W.context.lineWidth = 1, p = n.offsetX + c - f.x, t = Math.ceil(n.offsetY + k + n.ascent - f.y) + Math.floor(.185 * n.ascent) + .5, W.context.moveTo(p, t), W.context.lineTo(p + n.width, t), W.context.stroke(),
                                        W.context.closePath());
                                    n.format.strikethrough && (W.context.beginPath(), W.context.strokeStyle = z, W.context.lineWidth = 1, z = n.offsetX + c - f.x, p = Math.ceil(n.offsetY + k + 2 * n.ascent / 3 - f.y), W.context.moveTo(z, p), W.context.lineTo(z + n.width, p), W.context.stroke(), W.context.closePath())
                                }
                        } else {
                            if (d.border || d.background) d.border ? W.context.rect(.5, .5, f.width - 1, f.height - 1) : W.context.rect(0, 0, f.width, f.height), d.background && (r = T.hex(d.backgroundColor & 16777215, 6), W.context.fillStyle = "#" + r, W.context.fill()), d.border && (W.context.lineWidth =
                                1, W.context.lineCap = "square", r = T.hex(d.borderColor & 16777215, 6), W.context.strokeStyle = "#" + r, W.context.stroke());
                            if (-1 < a.__caretIndex && d.selectable && a.__showCursor) {
                                c = -a.get_scrollH() + (g ? 0 : k);
                                t = k = 0;
                                for (r = a.get_scrollV() - 1; t < r;) y = t++, k += d.lineHeights.get(y);
                                W.context.beginPath();
                                r = T.hex(a.get_defaultTextFormat().color & 16777215, 6);
                                W.context.strokeStyle = "#" + r;
                                W.context.moveTo(c + 2.5, k + 2.5);
                                W.context.lineWidth = 1;
                                W.context.lineTo(c + 2.5, k + Bb.getFormatHeight(a.get_defaultTextFormat()) - 1);
                                W.context.stroke();
                                W.context.closePath()
                            }
                        }
                        null == b.__bitmap ? b.__bitmap = Ob.fromCanvas(b.__canvas) : b.__bitmap.width != b.__canvas.width || b.__bitmap.height != b.__canvas.height ? (d = b.__bitmap.__texture, null != d && d.dispose(), b.__bitmap = Ob.fromCanvas(b.__canvas)) : b.__bitmap.image.version++;
                        b.__bitmapScaleX = h;
                        b.__bitmapScaleY = h;
                        b.__visible = !0;
                        a.__dirty = !1;
                        b.__softwareDirty = !1;
                        b.set___dirty(!1)
                    }
                }
                a.__graphics.__hardwareDirty = !1
            };
            var S = function () {
            };
            h["openfl.display._internal.Context3DTilemap"] = S;
            S.__name__ = "openfl.display._internal.Context3DTilemap";
            S.cacheColorTransform = null;
            S.context = null;
            S.dataPerVertex = null;
            S.currentBitmapData = null;
            S.currentBlendMode = null;
            S.currentShader = null;
            S.bufferPosition = null;
            S.lastFlushedPosition = null;
            S.lastUsedBitmapData = null;
            S.lastUsedShader = null;
            S.numTiles = null;
            S.vertexBufferData = null;
            S.vertexDataPosition = null;
            S.buildBuffer = function (a, b) {
                if (!a.__renderable || 0 == a.__group.__tiles.length || 0 >= a.__worldAlpha) a.__group.__dirty = !1;
                else {
                    S.numTiles = 0;
                    S.vertexBufferData = null != a.__buffer ? a.__buffer.vertexBufferData : null;
                    S.vertexDataPosition =
                        0;
                    var c = sa.__pool.get(),
                        d = va.__pool.get(),
                        g = va.__pool.get();
                    S.dataPerVertex = 4;
                    a.tileAlphaEnabled && S.dataPerVertex++;
                    a.tileColorTransformEnabled && (S.dataPerVertex += 8);
                    S.buildBufferTileContainer(a, a.__group, b, g, a.__tileset, a.tileAlphaEnabled, a.__worldAlpha, a.tileColorTransformEnabled, a.__worldColorTransform, null, c, d);
                    a.__buffer.flushVertexBufferData();
                    sa.__pool.release(c);
                    va.__pool.release(d);
                    va.__pool.release(g)
                }
            };
            S.buildBufferTileContainer = function (a, b, c, d, g, f, k, h, l, n, r, t, y) {
                null == y && (y = !0);
                var p =
                        va.__pool.get(),
                    q = c.__roundPixels,
                    z = b.__tiles;
                y && S.resizeBuffer(a, S.numTiles + S.getRecursiveLength(b));
                y = null;
                for (var u, x, A, Q, m, O, N, v, w, F, D, H = f ? 5 : 4, I = 0; I < z.length;) {
                    Q = z[I];
                    ++I;
                    p.setTo(1, 0, 0, 1, -Q.get_originX(), -Q.get_originY());
                    p.concat(Q.get_matrix());
                    p.concat(d);
                    q && (p.tx = Math.round(p.tx), p.ty = Math.round(p.ty));
                    var ta = null != Q.get_tileset() ? Q.get_tileset() : g;
                    var E = Q.get_alpha() * k;
                    var J = Q.get_visible();
                    Q.__dirty = !1;
                    if (J && !(0 >= E))
                        if (h && (null != Q.get_colorTransform() ? null == l ? y = Q.get_colorTransform() : (null ==
                        S.cacheColorTransform && (S.cacheColorTransform = new Lb), y = S.cacheColorTransform, y.redMultiplier = l.redMultiplier * Q.get_colorTransform().redMultiplier, y.greenMultiplier = l.greenMultiplier * Q.get_colorTransform().greenMultiplier, y.blueMultiplier = l.blueMultiplier * Q.get_colorTransform().blueMultiplier, y.alphaMultiplier = l.alphaMultiplier * Q.get_colorTransform().alphaMultiplier, y.redOffset = l.redOffset + Q.get_colorTransform().redOffset, y.greenOffset = l.greenOffset + Q.get_colorTransform().greenOffset, y.blueOffset =
                            l.blueOffset + Q.get_colorTransform().blueOffset, y.alphaOffset = l.alphaOffset + Q.get_colorTransform().alphaOffset) : y = l), f || (E = 1), 0 < Q.__length) S.buildBufferTileContainer(a, Q, c, p, ta, f, E, h, y, n, r, t, !1);
                        else if (null != ta && (J = Q.get_id(), u = ta.__bitmapData, null != u)) {
                            if (-1 == J) {
                                x = Q.__rect;
                                if (null == x || 0 >= x.width || 0 >= x.height) continue;
                                ta = x.x / u.width;
                                Q = x.y / u.height;
                                J = x.get_right() / u.width;
                                m = x.get_bottom() / u.height
                            } else {
                                u = ta.__data[J];
                                if (null == u) continue;
                                r.setTo(u.x, u.y, u.width, u.height);
                                x = r;
                                ta = u.__uvX;
                                Q = u.__uvY;
                                J =
                                    u.__uvWidth;
                                m = u.__uvHeight
                            }
                            u = x.width;
                            A = x.height;
                            x = 0 * p.a + 0 * p.c + p.tx;
                            O = 0 * p.b + 0 * p.d + p.ty;
                            N = u * p.a + 0 * p.c + p.tx;
                            v = u * p.b + 0 * p.d + p.ty;
                            w = 0 * p.a + A * p.c + p.tx;
                            F = 0 * p.b + A * p.d + p.ty;
                            D = u * p.a + A * p.c + p.tx;
                            A = u * p.b + A * p.d + p.ty;
                            u = S.vertexDataPosition;
                            S.vertexBufferData[u] = x;
                            S.vertexBufferData[u + 1] = O;
                            S.vertexBufferData[u + 2] = ta;
                            S.vertexBufferData[u + 3] = Q;
                            S.vertexBufferData[u + S.dataPerVertex] = N;
                            S.vertexBufferData[u + S.dataPerVertex + 1] = v;
                            S.vertexBufferData[u + S.dataPerVertex + 2] = J;
                            S.vertexBufferData[u + S.dataPerVertex + 3] = Q;
                            S.vertexBufferData[u +
                            2 * S.dataPerVertex] = w;
                            S.vertexBufferData[u + 2 * S.dataPerVertex + 1] = F;
                            S.vertexBufferData[u + 2 * S.dataPerVertex + 2] = ta;
                            S.vertexBufferData[u + 2 * S.dataPerVertex + 3] = m;
                            S.vertexBufferData[u + 3 * S.dataPerVertex] = D;
                            S.vertexBufferData[u + 3 * S.dataPerVertex + 1] = A;
                            S.vertexBufferData[u + 3 * S.dataPerVertex + 2] = J;
                            S.vertexBufferData[u + 3 * S.dataPerVertex + 3] = m;
                            f && (S.vertexBufferData[u + 0 * S.dataPerVertex + 4] = E, S.vertexBufferData[u + S.dataPerVertex + 4] = E, S.vertexBufferData[u + 2 * S.dataPerVertex + 4] = E, S.vertexBufferData[u + 3 * S.dataPerVertex +
                            4] = E);
                            if (h)
                                if (null != y)
                                    for (E = 0; 4 > E;) ta = E++, S.vertexBufferData[u + S.dataPerVertex * ta + H] = y.redMultiplier, S.vertexBufferData[u + S.dataPerVertex * ta + H + 1] = y.greenMultiplier, S.vertexBufferData[u + S.dataPerVertex * ta + H + 2] = y.blueMultiplier, S.vertexBufferData[u + S.dataPerVertex * ta + H + 3] = y.alphaMultiplier, S.vertexBufferData[u + S.dataPerVertex * ta + H + 4] = y.redOffset, S.vertexBufferData[u + S.dataPerVertex * ta + H + 5] = y.greenOffset, S.vertexBufferData[u + S.dataPerVertex * ta + H + 6] = y.blueOffset, S.vertexBufferData[u + S.dataPerVertex * ta +
                                    H + 7] = y.alphaOffset;
                                else
                                    for (E = 0; 4 > E;) ta = E++, S.vertexBufferData[u + S.dataPerVertex * ta + H] = 1, S.vertexBufferData[u + S.dataPerVertex * ta + H + 1] = 1, S.vertexBufferData[u + S.dataPerVertex * ta + H + 2] = 1, S.vertexBufferData[u + S.dataPerVertex * ta + H + 3] = 1, S.vertexBufferData[u + S.dataPerVertex * ta + H + 4] = 0, S.vertexBufferData[u + S.dataPerVertex * ta + H + 5] = 0, S.vertexBufferData[u + S.dataPerVertex * ta + H + 6] = 0, S.vertexBufferData[u + S.dataPerVertex * ta + H + 7] = 0;
                            S.vertexDataPosition += 4 * S.dataPerVertex
                        }
                }
                b.__dirty = !1;
                va.__pool.release(p)
            };
            S.flush =
                function (a, b, c) {
                    null == S.currentShader && (S.currentShader = b.__defaultDisplayShader);
                    if (S.bufferPosition > S.lastFlushedPosition && null != S.currentBitmapData && null != S.currentShader) {
                        var d = b.__initDisplayShader(S.currentShader);
                        b.setShader(d);
                        b.applyBitmapData(S.currentBitmapData, a.smoothing);
                        b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
                        a.tileAlphaEnabled ? b.useAlphaArray() : b.applyAlpha(a.__worldAlpha);
                        a.tileBlendModeEnabled && b.__setBlendMode(c);
                        a.tileColorTransformEnabled ? (b.applyHasColorTransform(!0),
                            b.useColorTransformArray()) : b.applyColorTransform(a.__worldColorTransform);
                        b.updateShader();
                        c = a.__buffer.vertexBuffer;
                        for (var g = S.lastFlushedPosition * S.dataPerVertex * 4, f; S.lastFlushedPosition < S.bufferPosition;) {
                            f = Math.min(S.bufferPosition - S.lastFlushedPosition, S.context.__quadIndexBufferElements) | 0;
                            if (0 >= f) break;
                            null != d.__position && S.context.setVertexBufferAt(d.__position.index, c, g, 2);
                            null != d.__textureCoord && S.context.setVertexBufferAt(d.__textureCoord.index, c, g + 2, 2);
                            a.tileAlphaEnabled && null != d.__alpha &&
                            S.context.setVertexBufferAt(d.__alpha.index, c, g + 4, 1);
                            if (a.tileColorTransformEnabled) {
                                var k = a.tileAlphaEnabled ? 5 : 4;
                                null != d.__colorMultiplier && S.context.setVertexBufferAt(d.__colorMultiplier.index, c, g + k, 4);
                                null != d.__colorOffset && S.context.setVertexBufferAt(d.__colorOffset.index, c, g + k + 4, 4)
                            }
                            S.context.drawTriangles(S.context.__quadIndexBuffer, 0, 2 * f);
                            S.lastFlushedPosition += f
                        }
                        b.__clearShader()
                    }
                    S.lastUsedBitmapData = S.currentBitmapData;
                    S.lastUsedShader = S.currentShader
                };
            S.getRecursiveLength = function (a) {
                a = a.__tiles;
                for (var b = 0, c = 0; c < a.length;) {
                    var d = a[c];
                    ++c;
                    0 < d.__length ? b += S.getRecursiveLength(d) : ++b
                }
                return b
            };
            S.render = function (a, b) {
                if (a.__renderable && !(0 >= a.__worldAlpha) && (S.context = b.__context3D, S.buildBuffer(a, b), 0 != S.numTiles)) {
                    S.bufferPosition = 0;
                    S.lastFlushedPosition = 0;
                    S.lastUsedBitmapData = null;
                    S.lastUsedShader = null;
                    S.currentBitmapData = null;
                    S.currentShader = null;
                    S.currentBlendMode = a.__worldBlendMode;
                    a.tileBlendModeEnabled || b.__setBlendMode(S.currentBlendMode);
                    b.__pushMaskObject(a);
                    var c = sa.__pool.get();
                    c.setTo(0, 0, a.__width, a.__height);
                    b.__pushMaskRect(c, a.__renderTransform);
                    S.renderTileContainer(a, b, a.__group, a.__worldShader, a.__tileset, a.__worldAlpha, a.tileBlendModeEnabled, S.currentBlendMode, null);
                    S.flush(a, b, S.currentBlendMode);
                    b.__popMaskRect();
                    b.__popMaskObject(a);
                    sa.__pool.release(c)
                }
            };
            S.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    if (!(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || 0 >= a.__worldAlpha)) {
                        if (null !=
                            a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            var c = b.__context3D,
                                d = sa.__pool.get();
                            d.setTo(0, 0, a.get_width(), a.get_height());
                            b.__pushMaskRect(d, a.__renderTransform);
                            var g = a.opaqueBackground;
                            c.__clear(!0, (g >>> 16 & 255) / 255, (g >>> 8 & 255) / 255, (g & 255) / 255, 1, 0, 0, 1);
                            b.__popMaskRect();
                            b.__popMaskObject(a);
                            sa.__pool.release(d)
                        }
                        null != a.__graphics && Ge.render(a, b)
                    }
                    S.render(a, b)
                } else Sd.render(a.__cacheBitmap, b);
                b.__renderEvent(a)
            };
            S.renderDrawableMask = function (a, b) {
                if (null != a.opaqueBackground || null != a.__graphics) null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && a.get_height(), null != a.__graphics && Ge.renderMask(a, b);
                S.renderMask(a, b)
            };
            S.renderTileContainer = function (a, b, c, d, g, f, k, h, l) {
                c = c.__tiles;
                for (var n, q, r, t = null, p, y = 0; y < c.length;) {
                    var u = c[y];
                    ++y;
                    n = null != u.get_tileset() ? u.get_tileset() : g;
                    q = u.get_alpha() * f;
                    if ((r = u.get_visible()) && !(0 >= q))
                        if (r = null != u.get_shader() ? u.get_shader() : d, k && (t = null != u.__blendMode ?
                            u.__blendMode : h), 0 < u.__length) S.renderTileContainer(a, b, u, r, n, q, k, t, l);
                        else if (null != n && (p = u.get_id(), q = n.__bitmapData, null != q)) {
                            if (-1 == p) {
                                if (n = u.__rect, null == n || 0 >= n.width || 0 >= n.height) continue
                            } else if (n = n.__data[p], null == n) continue;
                            (16383 <= S.bufferPosition - S.lastFlushedPosition || r != S.currentShader || q != S.currentBitmapData && null != S.currentBitmapData || S.currentBlendMode != t) && S.flush(a, b, S.currentBlendMode);
                            S.currentBitmapData = q;
                            S.currentShader = r;
                            S.currentBlendMode = t;
                            S.bufferPosition++
                        }
                }
            };
            S.renderMask =
                function (a, b) {
                };
            S.resizeBuffer = function (a, b) {
                S.numTiles = b;
                null == a.__buffer ? a.__buffer = new wh(S.context, Zj.QUADS, S.numTiles, S.dataPerVertex) : a.__buffer.resize(S.numTiles, S.dataPerVertex);
                S.vertexBufferData = a.__buffer.vertexBufferData
            };
            var Td = function () {
            };
            h["openfl.display._internal.Context3DVideo"] = Td;
            Td.__name__ = "openfl.display._internal.Context3DVideo";
            Td.render = function (a, b) {
                if (a.__renderable && !(0 >= a.__worldAlpha) && null != a.__stream && null != a.__stream.__video) {
                    var c = b.__context3D,
                        d = c.gl;
                    if (null !=
                        a.__getTexture(c)) {
                        b.__setBlendMode(a.__worldBlendMode);
                        b.__pushMaskObject(a);
                        var g = b.__initDisplayShader(a.__worldShader);
                        b.setShader(g);
                        b.applyBitmapData(null, !0, !1);
                        b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
                        b.applyAlpha(a.__worldAlpha);
                        b.applyColorTransform(a.__worldColorTransform);
                        null != g.__textureSize && (Td.__textureSizeValue[0] = null != a.__stream ? a.__stream.__video.videoWidth : 0, Td.__textureSizeValue[1] = null != a.__stream ? a.__stream.__video.videoHeight : 0, g.__textureSize.value = Td.__textureSizeValue);
                        b.updateShader();
                        c.setTextureAt(0, a.__getTexture(c));
                        c.__flushGLTextures();
                        d.uniform1i(g.__texture.index, 0);
                        a.smoothing ? (d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MAG_FILTER, d.LINEAR), d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MIN_FILTER, d.LINEAR)) : (d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MAG_FILTER, d.NEAREST), d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MIN_FILTER, d.NEAREST));
                        d = a.__getVertexBuffer(c);
                        null != g.__position && c.setVertexBufferAt(g.__position.index, d, 0, 3);
                        null != g.__textureCoord && c.setVertexBufferAt(g.__textureCoord.index,
                            d, 3, 2);
                        g = a.__getIndexBuffer(c);
                        c.drawTriangles(g);
                        b.__clearShader();
                        b.__popMaskObject(a)
                    }
                }
            };
            Td.renderDrawable = function (a, b) {
                Td.render(a, b);
                b.__renderEvent(a)
            };
            Td.renderDrawableMask = function (a, b) {
                Td.renderMask(a, b)
            };
            Td.renderMask = function (a, b) {
                if (null != a.__stream && null != a.__stream.__video) {
                    var c = b.__context3D,
                        d = b.__maskShader;
                    b.setShader(d);
                    b.applyBitmapData(Xf.opaqueBitmapData, !0);
                    b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
                    b.updateShader();
                    var g = a.__getVertexBuffer(c);
                    null != d.__position &&
                    c.setVertexBufferAt(d.__position.index, g, 0, 3);
                    null != d.__textureCoord && c.setVertexBufferAt(d.__textureCoord.index, g, 3, 2);
                    a = a.__getIndexBuffer(c);
                    c.drawTriangles(a);
                    b.__clearShader()
                }
            };
            var Qa = function () {
            };
            h["openfl.display._internal.DOMBitmap"] = Qa;
            Qa.__name__ = "openfl.display._internal.DOMBitmap";
            Qa.clear = function (a, b) {
                xd.clear(a, b);
                null != a.__image && (b.element.removeChild(a.__image), a.__image = null, a.__style = null);
                null != a.__canvas && (b.element.removeChild(a.__canvas), a.__canvas = null, a.__style = null)
            };
            Qa.renderCanvas =
                function (a, b) {
                    null != a.__image && (b.element.removeChild(a.__image), a.__image = null);
                    null == a.__canvas && (a.__canvas = window.document.createElement("canvas"), a.__context = a.__canvas.getContext("2d"), a.__imageVersion = -1, b.__allowSmoothing && a.smoothing || (a.__context.imageSmoothingEnabled = !1), b.__initializeElement(a, a.__canvas));
                    a.__imageVersion != a.__bitmapData.image.version && (Aa.convertToCanvas(a.__bitmapData.image), a.__canvas.width = a.__bitmapData.width + 1, a.__canvas.width = a.__bitmapData.width, a.__canvas.height =
                        a.__bitmapData.height, a.__context.drawImage(a.__bitmapData.image.buffer.__srcCanvas, 0, 0), a.__imageVersion = a.__bitmapData.image.version);
                    b.__updateClip(a);
                    b.__applyStyle(a, !0, !0, !0)
                };
            Qa.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && a.get_height();
                    var c = a.__graphics;
                    if (null != a.stage && a.__worldVisible && a.__renderable && null != c) {
                        n.render(c, b.__canvasRenderer);
                        if (c.__softwareDirty ||
                            a.__worldAlphaChanged || a.__canvas != c.__canvas) null != c.__canvas ? a.__canvas != c.__canvas && (null != a.__canvas && b.element.removeChild(a.__canvas), a.__canvas = c.__canvas, a.__context = c.__context, b.__initializeElement(a, a.__canvas)) : uf.clear(a, b);
                        if (null != a.__canvas) {
                            b.__pushMaskObject(a);
                            var d = a.__renderTransform;
                            a.__renderTransform = c.__worldTransform;
                            c.__transformDirty && (c.__transformDirty = !1, a.__renderTransformChanged = !0);
                            b.__updateClip(a);
                            b.__applyStyle(a, !0, !0, !0);
                            a.__renderTransform = d;
                            b.__popMaskObject(a)
                        }
                    } else uf.clear(a,
                        b);
                    null != a.stage && a.__worldVisible && a.__renderable && null != a.__bitmapData && a.__bitmapData.__isValid && a.__bitmapData.readable ? (b.__pushMaskObject(a), null != a.__bitmapData.image.buffer.__srcImage ? (d = a.__bitmapData.image.buffer.__srcImage.src, T.startsWith(d, "data:") || T.startsWith(d, "blob:") ? Qa.renderCanvas(a, b) : Qa.renderImage(a, b)) : Qa.renderCanvas(a, b), b.__popMaskObject(a)) : Qa.clear(a, b)
                } else b.__renderDrawableClear(a), a.__cacheBitmap.stage = a.stage, c = a.__cacheBitmap, null != c.stage && c.__worldVisible && c.__renderable &&
                null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable ? (b.__pushMaskObject(c), null != c.__bitmapData.image.buffer.__srcImage ? (d = c.__bitmapData.image.buffer.__srcImage.src, T.startsWith(d, "data:") || T.startsWith(d, "blob:") ? Qa.renderCanvas(c, b) : Qa.renderImage(c, b)) : Qa.renderCanvas(c, b), b.__popMaskObject(c)) : Qa.clear(c, b);
                b.__renderEvent(a)
            };
            Qa.renderDrawableClear = function (a, b) {
                Qa.clear(a, b)
            };
            Qa.renderImage = function (a, b) {
                null != a.__canvas && (b.element.removeChild(a.__canvas), a.__canvas = null);
                null == a.__image && (a.__image = window.document.createElement("img"), a.__image.crossOrigin = "Anonymous", a.__image.src = a.__bitmapData.image.buffer.__srcImage.src, b.__initializeElement(a, a.__image));
                b.__updateClip(a);
                b.__applyStyle(a, !0, !0, !0)
            };
            var xd = function () {
            };
            h["openfl.display._internal.DOMDisplayObject"] = xd;
            xd.__name__ = "openfl.display._internal.DOMDisplayObject";
            xd.clear = function (a, b) {
                null != a.__cacheBitmap && Qa.clear(a.__cacheBitmap, b);
                uf.clear(a, b)
            };
            xd.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a,
                    !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && a.get_height();
                    var c = a.__graphics;
                    if (null != a.stage && a.__worldVisible && a.__renderable && null != c) {
                        n.render(c, b.__canvasRenderer);
                        if (c.__softwareDirty || a.__worldAlphaChanged || a.__canvas != c.__canvas) null != c.__canvas ? a.__canvas != c.__canvas && (null != a.__canvas && b.element.removeChild(a.__canvas), a.__canvas = c.__canvas, a.__context = c.__context, b.__initializeElement(a, a.__canvas)) : uf.clear(a,
                            b);
                        if (null != a.__canvas) {
                            b.__pushMaskObject(a);
                            var d = a.__renderTransform;
                            a.__renderTransform = c.__worldTransform;
                            c.__transformDirty && (c.__transformDirty = !1, a.__renderTransformChanged = !0);
                            b.__updateClip(a);
                            b.__applyStyle(a, !0, !0, !0);
                            a.__renderTransform = d;
                            b.__popMaskObject(a)
                        }
                    } else uf.clear(a, b)
                } else b.__renderDrawableClear(a), a.__cacheBitmap.stage = a.stage, c = a.__cacheBitmap, null != c.stage && c.__worldVisible && c.__renderable && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable ? (b.__pushMaskObject(c),
                    null != c.__bitmapData.image.buffer.__srcImage ? (d = c.__bitmapData.image.buffer.__srcImage.src, T.startsWith(d, "data:") || T.startsWith(d, "blob:") ? Qa.renderCanvas(c, b) : Qa.renderImage(c, b)) : Qa.renderCanvas(c, b), b.__popMaskObject(c)) : Qa.clear(c, b);
                b.__renderEvent(a)
            };
            xd.renderDrawableClear = function (a, b) {
                xd.clear(a, b)
            };
            var zj = function () {
            };
            h["openfl.display._internal.DOMDisplayObjectContainer"] = zj;
            zj.__name__ = "openfl.display._internal.DOMDisplayObjectContainer";
            zj.renderDrawable = function (a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext();) {
                    var d =
                        c.next();
                    null == d.stage && b.__renderDrawable(d)
                }
                for (c = a.__removedChildren.iterator(); c.hasNext();) d = c.next(), null == d.stage && d.__cleanup();
                a.__removedChildren.set_length(0);
                xd.renderDrawable(a, b);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    b.__pushMaskObject(a);
                    if (null != b.__stage) {
                        c = 0;
                        for (d = a.__children; c < d.length;) g = d[c], ++c, b.__renderDrawable(g), g.__renderDirty = !1;
                        a.__renderDirty = !1
                    } else
                        for (c = 0, d = a.__children; c < d.length;) g = d[c], ++c, b.__renderDrawable(g);
                    b.__popMaskObject(a)
                } else {
                    c = 0;
                    for (d =
                             a.__children; c < d.length;) {
                        var g = d[c];
                        ++c;
                        b.__renderDrawableClear(g)
                    }
                    uf.clear(a, b);
                    a.__cacheBitmap.stage = a.stage
                }
            };
            zj.renderDrawableClear = function (a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext();) {
                    var d = c.next();
                    null == d.stage && b.__renderDrawableClear(d)
                }
                for (c = a.__removedChildren.iterator(); c.hasNext();) d = c.next(), null == d.stage && d.__cleanup();
                a.__removedChildren.set_length(0);
                c = 0;
                for (d = a.__children; c < d.length;) {
                    var g = d[c];
                    ++c;
                    b.__renderDrawableClear(g)
                }
                xd.clear(a, b)
            };
            var uf = function () {
            };
            h["openfl.display._internal.DOMShape"] =
                uf;
            uf.__name__ = "openfl.display._internal.DOMShape";
            uf.clear = function (a, b) {
                null != a.__canvas && (b.element.removeChild(a.__canvas), a.__canvas = null, a.__style = null)
            };
            var Aj = function () {
            };
            h["openfl.display._internal.DOMSimpleButton"] = Aj;
            Aj.__name__ = "openfl.display._internal.DOMSimpleButton";
            Aj.renderDrawable = function (a, b) {
                b.__pushMaskObject(a);
                for (var c = a.__previousStates.iterator(); c.hasNext();) {
                    var d = c.next();
                    b.__renderDrawable(d)
                }
                a.__previousStates.set_length(0);
                null != a.__currentState && (a.__currentState.stage !=
                a.stage && a.__currentState.__setStageReference(a.stage), b.__renderDrawable(a.__currentState));
                b.__popMaskObject(a);
                b.__renderEvent(a)
            };
            Aj.renderDrawableClear = function (a, b) {
                xd.renderDrawableClear(a, b)
            };
            var qf = function () {
            };
            h["openfl.display._internal.DOMTextField"] = qf;
            qf.__name__ = "openfl.display._internal.DOMTextField";
            qf.clear = function (a, b) {
                xd.clear(a, b);
                null != a.__div && (b.element.removeChild(a.__div), a.__div = null, a.__style = null)
            };
            qf.renderDrawable = function (a, b) {
                a.__domRender = !0;
                b.__updateCacheBitmap(a,
                    a.__forceCachedBitmapUpdate);
                a.__forceCachedBitmapUpdate = !1;
                a.__domRender = !1;
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    a.__renderedOnCanvasWhileOnDOM && (a.__renderedOnCanvasWhileOnDOM = !1, a.__isHTML && null != a.__htmlText && (a.__updateText(a.__htmlText), a.__dirty = !0, a.__layoutDirty = !0, a.__renderDirty || (a.__renderDirty = !0, a.__setParentRenderDirty())));
                    var c = a.__textEngine;
                    if (null != a.stage && a.__worldVisible && a.__renderable) {
                        if (a.__dirty || a.__renderTransformChanged || null == a.__div)
                            if ("" != c.text || c.background ||
                                c.border || 1 == c.type) {
                                a.__updateLayout();
                                null == a.__div && (a.__div = window.document.createElement("div"), b.__initializeElement(a, a.__div), a.__style.setProperty("outline", "none", null), a.__div.addEventListener("input", function (b) {
                                    b.preventDefault();
                                    a.get_htmlText() != a.__div.innerHTML && (a.set_htmlText(a.__div.innerHTML), a.__dirty = !1, a.dispatchEvent(new Fe("textInput", !1, !1, a.get_htmlText())))
                                }, !0));
                                c.wordWrap ? a.__style.setProperty("word-wrap", "break-word", null) : a.__style.setProperty("white-space", "nowrap",
                                    null);
                                a.__style.setProperty("overflow", "hidden", null);
                                c.selectable ? (a.__style.setProperty("cursor", "text", null), a.__style.setProperty("-webkit-user-select", "text", null), a.__style.setProperty("-moz-user-select", "text", null), a.__style.setProperty("-ms-user-select", "text", null), a.__style.setProperty("-o-user-select", "text", null)) : a.__style.setProperty("cursor", "inherit", null);
                                a.__div.contentEditable = 1 == c.type;
                                var d = a.__style;
                                c.background ? d.setProperty("background-color", "#" + T.hex(c.backgroundColor & 16777215,
                                    6), null) : d.removeProperty("background-color");
                                var g = c.width,
                                    f = c.height,
                                    k = "";
                                a.__isHTML && a.__updateText(Na.parse(a.__text, a.get_multiline(), a.__styleSheet, a.__textFormat, a.__textEngine.textFormatRanges));
                                for (var h = -a.get_scrollH(), l = c.layoutGroups.iterator(); l.hasNext();) {
                                    var n = l.next();
                                    if (!(n.lineIndex < a.get_scrollV() - 1)) {
                                        if (n.lineIndex > c.get_bottomScrollV() - 1) break;
                                        k += '<div style="';
                                        null != n.format.font && (k += "font: " + Bb.getFont(n.format) + "; ");
                                        null != n.format.color && (k += "color: #" + T.hex(n.format.color &
                                            16777215, 6) + "; ");
                                        1 == n.format.underline && (k += "text-decoration: underline; ");
                                        if (null != n.format.align) switch (n.format.align) {
                                            case 0:
                                                k += "text-align: center; ";
                                                break;
                                            case 2:
                                                k += "text-align: justify; ";
                                                break;
                                            case 4:
                                                k += "text-align: right; ";
                                                break;
                                            default:
                                                k += "text-align: left; "
                                        }
                                        null != n.format.leftMargin && (k += "padding-left: " + 1 * n.format.leftMargin + "px; ");
                                        null != n.format.rightMargin && (k += "padding-right: " + 1 * n.format.rightMargin + "px; ");
                                        null != n.format.indent && (k += "text-indent: " + 1 * n.format.indent + "px; ");
                                        k += "left: " + (n.offsetX + h) + "px; top: " + (n.offsetY + 0 + 3) + 'px; vertical-align: top; position: absolute;">';
                                        if (null != n.format.url && "" != n.format.url) {
                                            var r = "text-decoration: underline; ";
                                            null != n.format.color && (r += "color: #" + T.hex(n.format.color & 16777215, 6) + "; ");
                                            k += "<a style='" + r + "' href='" + n.format.url + "' target='" + n.format.target + "'>"
                                        }
                                        k = a.__isHTML ? k + T.replace(c.text.substring(n.startIndex, n.endIndex), " ", "&nbsp;") : k + T.replace(T.htmlEscape(c.text.substring(n.startIndex, n.endIndex)), " ", "&nbsp;");
                                        null !=
                                        n.format.url && "" != n.format.url && (k += "</a>");
                                        k += "</div>"
                                    }
                                }
                                c.border ? (d.setProperty("border", "solid 1px #" + T.hex(c.borderColor & 16777215, 6), null), a.__renderTransform.translate(-1, -1), a.__renderTransformChanged = !0, a.__transformDirty = !0) : "" != d.border && (d.removeProperty("border"), a.__renderTransformChanged = !0);
                                d.setProperty("width", g + "px", null);
                                d.setProperty("height", f + "px", null);
                                a.__div.innerHTML = k;
                                a.__dirty = !1
                            } else null != a.__div && (b.element.removeChild(a.__div), a.__div = null);
                        null != a.__div && (c = b.__roundPixels,
                            b.__roundPixels = !0, b.__updateClip(a), b.__applyStyle(a, !0, !0, !0), b.__roundPixels = c)
                    } else qf.clear(a, b)
                } else b.__renderDrawableClear(a), a.__cacheBitmap.stage = a.stage, c = a.__cacheBitmap, null != c.stage && c.__worldVisible && c.__renderable && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable ? (b.__pushMaskObject(c), null != c.__bitmapData.image.buffer.__srcImage ? (d = c.__bitmapData.image.buffer.__srcImage.src, T.startsWith(d, "data:") || T.startsWith(d, "blob:") ? Qa.renderCanvas(c, b) : Qa.renderImage(c,
                    b)) : Qa.renderCanvas(c, b), b.__popMaskObject(c)) : Qa.clear(c, b);
                b.__renderEvent(a)
            };
            qf.renderDrawableClear = function (a, b) {
                qf.clear(a, b)
            };
            var rf = function () {
            };
            h["openfl.display._internal.DOMTilemap"] = rf;
            rf.__name__ = "openfl.display._internal.DOMTilemap";
            rf.clear = function (a, b) {
                xd.clear(a, b);
                null != a.__canvas && (b.element.removeChild(a.__canvas), a.__canvas = null, a.__style = null)
            };
            rf.renderDrawable = function (a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender)
                    if (null != a.stage && a.__worldVisible &&
                        a.__renderable && 0 < a.__group.__tiles.length) {
                        null == a.__canvas && (a.__canvas = window.document.createElement("canvas"), a.__context = a.__canvas.getContext("2d"), b.__initializeElement(a, a.__canvas));
                        a.__canvas.width = a.__width;
                        a.__canvas.height = a.__height;
                        b.__canvasRenderer.context = a.__context;
                        var c = a.__renderTransform;
                        a.__renderTransform = va.__identity;
                        var d = b.__canvasRenderer;
                        if ((null != a.opaqueBackground || null != a.__graphics) && a.__renderable) {
                            var g = d.__getAlpha(a.__worldAlpha);
                            if (!(0 >= g)) {
                                if (null != a.opaqueBackground &&
                                    !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                                    d.__setBlendMode(a.__worldBlendMode);
                                    d.__pushMaskObject(a);
                                    var f = d.context;
                                    d.setTransform(a.__renderTransform, f);
                                    g = a.opaqueBackground;
                                    f.fillStyle = "rgb(" + (g >>> 16 & 255) + "," + (g >>> 8 & 255) + "," + (g & 255) + ")";
                                    f.fillRect(0, 0, a.get_width(), a.get_height());
                                    d.__popMaskObject(a)
                                }
                                if (null != a.__graphics && a.__renderable && (g = d.__getAlpha(a.__worldAlpha), !(0 >= g))) {
                                    var k = a.__graphics;
                                    if (null != k) {
                                        n.render(k, d);
                                        var h = k.__width,
                                            l = k.__height,
                                            r = k.__canvas;
                                        if (null !=
                                            r && k.__visible && 1 <= h && 1 <= l) {
                                            var t = k.__worldTransform;
                                            f = d.context;
                                            var y = a.__scrollRect;
                                            if (null == y || 0 < y.width && 0 < y.height) d.__setBlendMode(a.__worldBlendMode), d.__pushMaskObject(a), f.globalAlpha = g, g = va.__pool.get(), g.scale(1 / k.__bitmapScaleX, 1 / k.__bitmapScaleY), g.concat(t), d.setTransform(g, f), f.drawImage(r, 0, 0, h, l), va.__pool.release(g), d.__popMaskObject(a)
                                        }
                                    }
                                }
                            }
                        }
                        d = b.__canvasRenderer;
                        a.__renderable && 0 != a.__group.__tiles.length && (g = d.__getAlpha(a.__worldAlpha), 0 >= g || (f = d.context, d.__setBlendMode(a.__worldBlendMode),
                            d.__pushMaskObject(a), k = sa.__pool.get(), k.setTo(0, 0, a.__width, a.__height), d.__pushMaskRect(k, a.__renderTransform), d.__allowSmoothing && a.smoothing || (f.imageSmoothingEnabled = !1), Ve.renderTileContainer(a.__group, d, a.__renderTransform, a.__tileset, d.__allowSmoothing && a.smoothing, a.tileAlphaEnabled, g, a.tileBlendModeEnabled, a.__worldBlendMode, null, null, k), d.__allowSmoothing && a.smoothing || (f.imageSmoothingEnabled = !0), d.__popMaskRect(), d.__popMaskObject(a), sa.__pool.release(k)));
                        a.__renderTransform = c;
                        b.__canvasRenderer.context =
                            null;
                        b.__updateClip(a);
                        b.__applyStyle(a, !0, !1, !0)
                    } else rf.clear(a, b);
                else b.__renderDrawableClear(a), a.__cacheBitmap.stage = a.stage, c = a.__cacheBitmap, null != c.stage && c.__worldVisible && c.__renderable && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable ? (b.__pushMaskObject(c), null != c.__bitmapData.image.buffer.__srcImage ? (d = c.__bitmapData.image.buffer.__srcImage.src, T.startsWith(d, "data:") || T.startsWith(d, "blob:") ? Qa.renderCanvas(c, b) : Qa.renderImage(c, b)) : Qa.renderCanvas(c, b), b.__popMaskObject(c)) :
                    Qa.clear(c, b);
                b.__renderEvent(a)
            };
            rf.renderDrawableClear = function (a, b) {
                rf.clear(a, b)
            };
            var We = function () {
            };
            h["openfl.display._internal.DOMVideo"] = We;
            We.__name__ = "openfl.display._internal.DOMVideo";
            We.clear = function (a, b) {
                xd.clear(a, b);
                a.__active && (b.element.removeChild(a.__stream.__video), a.__active = !1)
            };
            We.render = function (a, b) {
                null != a.stage && null != a.__stream && a.__worldVisible && a.__renderable ? (a.__active || (b.__initializeElement(a, a.__stream.__video), a.__active = !0, a.__dirty = !0), a.__dirty && (a.__stream.__video.width =
                    a.__width | 0, a.__stream.__video.height = a.__height | 0, a.__dirty = !1), b.__updateClip(a), b.__applyStyle(a, !0, !0, !0)) : We.clear(a, b)
            };
            We.renderDrawable = function (a, b) {
                We.render(a, b);
                b.__renderEvent(a)
            };
            We.renderDrawableClear = function (a, b) {
                xd.renderDrawableClear(a, b)
            };
            var te = function (a) {
                this.buffer = a;
                this.bPos = this.iPos = this.fPos = this.oPos = this.ffPos = this.iiPos = this.tsPos = 0;
                this.prev = ja.UNKNOWN
            };
            h["openfl.display._internal.DrawCommandReader"] = te;
            te.__name__ = "openfl.display._internal.DrawCommandReader";
            te.prototype = {
                destroy: function () {
                    this.buffer = null;
                    this.reset()
                },
                reset: function () {
                    this.bPos = this.iPos = this.fPos = this.oPos = this.ffPos = this.iiPos = this.tsPos = 0
                },
                __class__: te
            };
            var ja = N["openfl.display._internal.DrawCommandType"] = {
                __ename__: "openfl.display._internal.DrawCommandType",
                __constructs__: null,
                BEGIN_BITMAP_FILL: {
                    _hx_name: "BEGIN_BITMAP_FILL",
                    _hx_index: 0,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                BEGIN_FILL: {
                    _hx_name: "BEGIN_FILL",
                    _hx_index: 1,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                BEGIN_GRADIENT_FILL: {
                    _hx_name: "BEGIN_GRADIENT_FILL",
                    _hx_index: 2,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                BEGIN_SHADER_FILL: {
                    _hx_name: "BEGIN_SHADER_FILL",
                    _hx_index: 3,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                CUBIC_CURVE_TO: {
                    _hx_name: "CUBIC_CURVE_TO",
                    _hx_index: 4,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                CURVE_TO: {
                    _hx_name: "CURVE_TO",
                    _hx_index: 5,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                DRAW_CIRCLE: {
                    _hx_name: "DRAW_CIRCLE",
                    _hx_index: 6,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                DRAW_ELLIPSE: {
                    _hx_name: "DRAW_ELLIPSE",
                    _hx_index: 7,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                DRAW_QUADS: {
                    _hx_name: "DRAW_QUADS",
                    _hx_index: 8,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                DRAW_RECT: {
                    _hx_name: "DRAW_RECT",
                    _hx_index: 9,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                DRAW_ROUND_RECT: {
                    _hx_name: "DRAW_ROUND_RECT",
                    _hx_index: 10,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                DRAW_TILES: {
                    _hx_name: "DRAW_TILES",
                    _hx_index: 11,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                DRAW_TRIANGLES: {
                    _hx_name: "DRAW_TRIANGLES",
                    _hx_index: 12,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                END_FILL: {
                    _hx_name: "END_FILL",
                    _hx_index: 13,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                LINE_BITMAP_STYLE: {
                    _hx_name: "LINE_BITMAP_STYLE",
                    _hx_index: 14,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                LINE_GRADIENT_STYLE: {
                    _hx_name: "LINE_GRADIENT_STYLE",
                    _hx_index: 15,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                LINE_STYLE: {
                    _hx_name: "LINE_STYLE",
                    _hx_index: 16,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                LINE_TO: {
                    _hx_name: "LINE_TO",
                    _hx_index: 17,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                MOVE_TO: {
                    _hx_name: "MOVE_TO",
                    _hx_index: 18,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                OVERRIDE_BLEND_MODE: {
                    _hx_name: "OVERRIDE_BLEND_MODE",
                    _hx_index: 19,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                OVERRIDE_MATRIX: {
                    _hx_name: "OVERRIDE_MATRIX",
                    _hx_index: 20,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                WINDING_EVEN_ODD: {
                    _hx_name: "WINDING_EVEN_ODD",
                    _hx_index: 21,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                WINDING_NON_ZERO: {
                    _hx_name: "WINDING_NON_ZERO",
                    _hx_index: 22,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                },
                UNKNOWN: {
                    _hx_name: "UNKNOWN",
                    _hx_index: 23,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: u
                }
            };
            ja.__constructs__ = [ja.BEGIN_BITMAP_FILL, ja.BEGIN_FILL, ja.BEGIN_GRADIENT_FILL, ja.BEGIN_SHADER_FILL, ja.CUBIC_CURVE_TO, ja.CURVE_TO, ja.DRAW_CIRCLE, ja.DRAW_ELLIPSE, ja.DRAW_QUADS, ja.DRAW_RECT, ja.DRAW_ROUND_RECT, ja.DRAW_TILES, ja.DRAW_TRIANGLES, ja.END_FILL, ja.LINE_BITMAP_STYLE, ja.LINE_GRADIENT_STYLE, ja.LINE_STYLE, ja.LINE_TO, ja.MOVE_TO, ja.OVERRIDE_BLEND_MODE, ja.OVERRIDE_MATRIX, ja.WINDING_EVEN_ODD, ja.WINDING_NON_ZERO, ja.UNKNOWN];
            var cg = function (a, b, c, d, g, f, k) {
                null == k && (k = !1);
                null == f && (f = !1);
                null == g && (g = !1);
                null == d && (d = 0);
                null ==
                c && (c = 2);
                null == b && (b = 5);
                null == a && (a = 0);
                this.wrap = a;
                this.filter = b;
                this.mipfilter = c;
                this.lodBias = d;
                this.ignoreSampler = g;
                this.centroid = f;
                this.textureAlpha = k
            };
            h["openfl.display._internal.SamplerState"] = cg;
            cg.__name__ = "openfl.display._internal.SamplerState";
            cg.prototype = {
                clone: function () {
                    var a = new cg(this.wrap, this.filter, this.mipfilter, this.lodBias, this.ignoreSampler, this.centroid, this.textureAlpha);
                    a.mipmapGenerated = this.mipmapGenerated;
                    return a
                },
                copyFrom: function (a) {
                    null == a || a.ignoreSampler || (this.wrap =
                        a.wrap, this.filter = a.filter, this.mipfilter = a.mipfilter, this.lodBias = a.lodBias, this.centroid = a.centroid, this.textureAlpha = a.textureAlpha)
                },
                equals: function (a) {
                    return null == a ? !1 : this.wrap == a.wrap && this.filter == a.filter && this.mipfilter == a.mipfilter && this.lodBias == a.lodBias ? this.textureAlpha == a.textureAlpha : !1
                },
                __class__: cg
            };
            var Dj = function () {
                this.inputRefs = [];
                this.inputFilter = [];
                this.inputMipFilter = [];
                this.inputs = [];
                this.inputWrap = [];
                this.overrideIntNames = [];
                this.overrideIntValues = [];
                this.overrideFloatNames = [];
                this.overrideFloatValues = [];
                this.overrideBoolNames = [];
                this.overrideBoolValues = [];
                this.paramLengths = [];
                this.paramPositions = [];
                this.paramRefs_Bool = [];
                this.paramRefs_Float = [];
                this.paramRefs_Int = [];
                this.paramTypes = []
            };
            h["openfl.display._internal.ShaderBuffer"] = Dj;
            Dj.__name__ = "openfl.display._internal.ShaderBuffer";
            Dj.prototype = {
                addBoolOverride: function (a, b) {
                    this.overrideBoolNames[this.overrideBoolCount] = a;
                    this.overrideBoolValues[this.overrideBoolCount] = b;
                    this.overrideBoolCount++
                },
                addFloatOverride: function (a,
                                            b) {
                    this.overrideFloatNames[this.overrideFloatCount] = a;
                    this.overrideFloatValues[this.overrideFloatCount] = b;
                    this.overrideFloatCount++
                },
                clearOverride: function () {
                    this.overrideBoolCount = this.overrideFloatCount = this.overrideIntCount = 0
                },
                update: function (a) {
                    this.paramIntCount = this.paramFloatCount = this.paramDataLength = this.paramCount = this.paramBoolCount = this.overrideBoolCount = this.overrideFloatCount = this.overrideIntCount = this.inputCount = 0;
                    this.shader = null;
                    if (null != a) {
                        a.__init();
                        this.inputCount = a.__inputBitmapData.length;
                        for (var b, c = 0, d = this.inputCount; c < d;) {
                            var g = c++;
                            b = a.__inputBitmapData[g];
                            this.inputs[g] = b.input;
                            this.inputFilter[g] = b.filter;
                            this.inputMipFilter[g] = b.mipFilter;
                            this.inputRefs[g] = b;
                            this.inputWrap[g] = b.wrap
                        }
                        b = a.__paramBool.length;
                        var f = a.__paramFloat.length,
                            k = a.__paramInt.length;
                        this.paramCount = b + f + k;
                        this.paramBoolCount = b;
                        this.paramFloatCount = f;
                        this.paramIntCount = k;
                        var h = 0;
                        c = 0;
                        for (d = b; c < d;) {
                            g = c++;
                            var l = a.__paramBool[g];
                            this.paramPositions[h] = this.paramDataLength;
                            var n = null != l.value ? l.value.length : 0;
                            this.paramLengths[h] = n;
                            this.paramDataLength += n;
                            this.paramTypes[h] = 0;
                            this.paramRefs_Bool[g] = l;
                            ++h
                        }
                        c = 0;
                        for (d = f; c < d;) g = c++, l = a.__paramFloat[g], this.paramPositions[h] = this.paramDataLength, n = null != l.value ? l.value.length : 0, this.paramLengths[h] = n, this.paramDataLength += n, this.paramTypes[h] = 1, this.paramRefs_Float[g] = l, ++h;
                        c = 0;
                        for (d = k; c < d;) g = c++, l = a.__paramInt[g], this.paramPositions[h] = this.paramDataLength, n = null != l.value ? l.value.length : 0, this.paramLengths[h] = n, this.paramDataLength += n, this.paramTypes[h] = 2,
                            this.paramRefs_Int[g] = l, ++h;
                        if (0 < this.paramDataLength)
                            if (null == this.paramData) {
                                c = this.paramDataLength;
                                var r = l = h = k = d = null;
                                this.paramData = c = null != c ? new Float32Array(c) : null != d ? new Float32Array(d) : null != k ? new Float32Array(k.__array) : null != h ? new Float32Array(h) : null != l ? null == r ? new Float32Array(l, 0) : new Float32Array(l, 0, r) : null
                            } else this.paramDataLength > this.paramData.length && (c = this.paramDataLength, r = l = h = k = d = null, c = null != c ? new Float32Array(c) : null != d ? new Float32Array(d) : null != k ? new Float32Array(k.__array) :
                                null != h ? new Float32Array(h) : null != l ? null == r ? new Float32Array(l, 0) : new Float32Array(l, 0, r) : null, c.set(this.paramData), this.paramData = c);
                        c = r = l = h = k = 0;
                        for (d = this.paramCount; c < d;)
                            if (g = c++, n = this.paramLengths[g], g < b) {
                                g = this.paramRefs_Bool[k];
                                ++k;
                                for (var t = 0; t < n;) {
                                    var y = t++;
                                    this.paramData[r] = g.value[y] ? 1 : 0;
                                    ++r
                                }
                            } else if (g < b + f)
                                for (g = this.paramRefs_Float[h], ++h, t = 0; t < n;) y = t++, this.paramData[r] = g.value[y], ++r;
                            else
                                for (g = this.paramRefs_Int[l], ++l, t = 0; t < n;) y = t++, this.paramData[r] = g.value[y], ++r;
                        this.shader = a
                    }
                },
                __class__: Dj
            };
            var Ab = function (a, b, c) {
                this.driverInfo = "OpenGL (Direct blitting)";
                this.backBufferHeight = this.backBufferWidth = 0;
                oa.call(this);
                this.__stage = a;
                this.__contextState = b;
                this.__stage3D = c;
                this.__context = a.window.context;
                this.gl = this.__context.webgl;
                null == this.__contextState && (this.__contextState = new yh);
                this.__state = new yh;
                var d;
                this.__vertexConstants = new Float32Array(512);
                this.__fragmentConstants = new Float32Array(512);
                var g = null;
                a = [1, 1, 1, 1];
                var f = d = c = b = null;
                this.__positionScale = a = null != g ? new Float32Array(g) :
                    null != a ? new Float32Array(a) : null != b ? new Float32Array(b.__array) : null != c ? new Float32Array(c) : null != d ? null == f ? new Float32Array(d, 0) : new Float32Array(d, 0, f) : null;
                this.__programs = new ab;
                -
                    1 == Ab.__glMaxViewportDims && (Ab.__glMaxViewportDims = this.gl.getParameter(this.gl.MAX_VIEWPORT_DIMS));
                this.maxBackBufferHeight = this.maxBackBufferWidth = Ab.__glMaxViewportDims;
                -
                    1 == Ab.__glMaxTextureMaxAnisotropy && (a = this.gl.getExtension("EXT_texture_filter_anisotropic"), null != a && Object.prototype.hasOwnProperty.call(a, "MAX_TEXTURE_MAX_ANISOTROPY_EXT") ||
                (a = this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")), null != a && Object.prototype.hasOwnProperty.call(a, "MAX_TEXTURE_MAX_ANISOTROPY_EXT") || (a = this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")), null != a ? (Ab.__glTextureMaxAnisotropy = a.TEXTURE_MAX_ANISOTROPY_EXT, Ab.__glMaxTextureMaxAnisotropy = this.gl.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY_EXT)) : (Ab.__glTextureMaxAnisotropy = 0, Ab.__glMaxTextureMaxAnisotropy = 0));
                -
                    1 == Ab.__glDepthStencil && (Ab.__glDepthStencil = this.gl.DEPTH_STENCIL);
                -
                    1 ==
                Ab.__glMemoryTotalAvailable && (a = this.gl.getExtension("NVX_gpu_memory_info"), null != a && (Ab.__glMemoryTotalAvailable = a.GPU_MEMORY_INFO_DEDICATED_VIDMEM_NVX, Ab.__glMemoryCurrentAvailable = a.GPU_MEMORY_INFO_CURRENT_AVAILABLE_VIDMEM_NVX));
                null == Ab.__driverInfo && (a = this.gl.getParameter(this.gl.VENDOR), b = this.gl.getParameter(this.gl.VERSION), c = this.gl.getParameter(this.gl.RENDERER), d = this.gl.getParameter(this.gl.SHADING_LANGUAGE_VERSION), Ab.__driverInfo = "OpenGL Vendor=" + a + " Version=" + b + " Renderer=" + c + " GLSL=" +
                    d);
                this.driverInfo = Ab.__driverInfo;
                this.__quadIndexBufferElements = 16383;
                g = this.__quadIndexBufferCount = 6 * this.__quadIndexBufferElements;
                f = d = c = b = a = null;
                a = null != g ? new Uint16Array(g) : null != a ? new Uint16Array(a) : null != b ? new Uint16Array(b.__array) : null != c ? new Uint16Array(c) : null != d ? null == f ? new Uint16Array(d, 0) : new Uint16Array(d, 0, f) : null;
                d = c = b = 0;
                for (f = this.__quadIndexBufferElements; d < f;) d++, a[b] = c, a[b + 1] = c + 1, a[b + 2] = c + 2, a[b + 3] = c + 2, a[b + 4] = c + 1, a[b + 5] = c + 3, b += 6, c += 4;
                this.__quadIndexBuffer = this.createIndexBuffer(this.__quadIndexBufferCount);
                this.__quadIndexBuffer.uploadFromTypedArray(a)
            };
            h["openfl.display3D.Context3D"] = Ab;
            Ab.__name__ = "openfl.display3D.Context3D";
            Ab.__driverInfo = null;
            Ab.__super__ = oa;
            Ab.prototype = w(oa.prototype, {
                clear: function (a, b, c, d, g, f, k) {
                    null == k && (k = 7);
                    null == f && (f = 0);
                    null == g && (g = 1);
                    null == d && (d = 1);
                    null == c && (c = 0);
                    null == b && (b = 0);
                    null == a && (a = 0);
                    this.__clear(!1, a, b, c, d, g, f, k)
                },
                __clear: function (a, b, c, d, g, f, k, h) {
                    null == h && (h = 7);
                    null == k && (k = 0);
                    null == f && (f = 1);
                    null == g && (g = 1);
                    null == d && (d = 0);
                    null == c && (c = 0);
                    null == b && (b = 0);
                    this.__flushGLFramebuffer();
                    this.__flushGLViewport();
                    var l = 0;
                    if (0 != (h & 1)) {
                        null == this.__state.renderToTexture && (this.__stage.context3D != this || this.__stage.__renderer.__cleared || (this.__stage.__renderer.__cleared = !0), this.__cleared = !0);
                        l |= this.gl.COLOR_BUFFER_BIT;
                        if (1 != this.__contextState.colorMaskRed || 1 != this.__contextState.colorMaskGreen || 1 != this.__contextState.colorMaskBlue || 1 != this.__contextState.colorMaskAlpha) this.gl.colorMask(!0, !0, !0, !0), this.__contextState.colorMaskRed = !0, this.__contextState.colorMaskGreen = !0, this.__contextState.colorMaskBlue = !0, this.__contextState.colorMaskAlpha = !0;
                        this.gl.clearColor(b, c, d, g)
                    }
                    0 != (h & 2) && (l |= this.gl.DEPTH_BUFFER_BIT, 1 != this.__contextState.depthMask && (this.gl.depthMask(!0), this.__contextState.depthMask = !0), this.gl.clearDepth(f));
                    0 != (h & 4) && (l |= this.gl.STENCIL_BUFFER_BIT, 255 != this.__contextState.stencilWriteMask && (this.gl.stencilMask(255), this.__contextState.stencilWriteMask = 255), this.gl.clearStencil(k), this.__contextState.stencilWriteMask = 255);
                    0 != l && (a ? this.__flushGLScissor() : this.__setGLScissorTest(!1),
                        this.gl.clear(l))
                },
                configureBackBuffer: function (a, b, c, d, g, f) {
                    null == f && (f = !1);
                    null == g && (g = !1);
                    null == d && (d = !0);
                    g && (a = a * this.__stage.window.__scale | 0, b = b * this.__stage.window.__scale | 0);
                    if (null == this.__stage3D) this.backBufferWidth = a, this.backBufferHeight = b, this.__backBufferAntiAlias = c, this.__state.backBufferEnableDepthAndStencil = d, this.__backBufferWantsBestResolution = g, this.__backBufferWantsBestResolutionOnBrowserZoom = f;
                    else {
                        if (null == this.__backBufferTexture || this.backBufferWidth != a || this.backBufferHeight !=
                            b) {
                            null != this.__backBufferTexture && this.__backBufferTexture.dispose();
                            null != this.__frontBufferTexture && this.__frontBufferTexture.dispose();
                            this.__backBufferTexture = this.createRectangleTexture(a, b, 1, !0);
                            this.__frontBufferTexture = this.createRectangleTexture(a, b, 1, !0);
                            null == this.__stage3D.__vertexBuffer && (this.__stage3D.__vertexBuffer = this.createVertexBuffer(4, 5));
                            var k = g ? a : a * this.__stage.window.__scale | 0,
                                h = g ? b : b * this.__stage.window.__scale | 0;
                            k = pa.toFloatVector(null, null, null, [k, h, 0, 1, 1, 0, h, 0, 0, 1, k,
                                0, 0, 1, 0, 0, 0, 0, 0, 0
                            ]);
                            this.__stage3D.__vertexBuffer.uploadFromVector(k, 0, 20);
                            null == this.__stage3D.__indexBuffer && (this.__stage3D.__indexBuffer = this.createIndexBuffer(6), k = pa.toIntVector(null, null, null, [0, 1, 2, 2, 1, 3]), this.__stage3D.__indexBuffer.uploadFromVector(k, 0, 6))
                        }
                        this.backBufferWidth = a;
                        this.backBufferHeight = b;
                        this.__backBufferAntiAlias = c;
                        this.__state.backBufferEnableDepthAndStencil = d;
                        this.__backBufferWantsBestResolution = g;
                        this.__backBufferWantsBestResolutionOnBrowserZoom = f;
                        this.__state.__primaryGLFramebuffer =
                            this.__backBufferTexture.__getGLFramebuffer(d, c, 0);
                        this.__frontBufferTexture.__getGLFramebuffer(d, c, 0)
                    }
                },
                createIndexBuffer: function (a, b) {
                    null == b && (b = 1);
                    return new Bl(this, a, b)
                },
                createProgram: function (a) {
                    null == a && (a = 0);
                    return new Cl(this, a)
                },
                createRectangleTexture: function (a, b, c, d) {
                    return new zh(this, a, b, Im.toString(c), d)
                },
                createVertexBuffer: function (a, b, c) {
                    null == c && (c = 1);
                    return new Dl(this, a, b, tm.toString(c))
                },
                drawTriangles: function (a, b, c) {
                    null == c && (c = -1);
                    null == b && (b = 0);
                    null == this.__state.renderToTexture &&
                    (this.__stage.context3D != this || this.__stage.__renderer.__cleared ? this.__cleared || this.clear(0, 0, 0, 0, 1, 0, 1) : this.__stage.__renderer.__clear());
                    this.__flushGL();
                    null != this.__state.program && this.__state.program.__flush();
                    c = -1 == c ? a.__numIndices : 3 * c;
                    this.__bindGLElementArrayBuffer(a.__id);
                    this.gl.drawElements(this.gl.TRIANGLES, c, this.gl.UNSIGNED_SHORT, 2 * b)
                },
                present: function () {
                    this.setRenderToBackBuffer();
                    if (null != this.__stage3D && null != this.__backBufferTexture) {
                        this.__cleared || this.clear(0, 0, 0, 0, 1, 0, 1);
                        var a = this.__backBufferTexture;
                        this.__backBufferTexture = this.__frontBufferTexture;
                        this.__frontBufferTexture = a;
                        this.__state.__primaryGLFramebuffer = this.__backBufferTexture.__getGLFramebuffer(this.__state.backBufferEnableDepthAndStencil, this.__backBufferAntiAlias, 0);
                        this.__cleared = !1
                    }
                    this.__present = !0
                },
                setBlendFactors: function (a, b) {
                    this.setBlendFactorsSeparate(a, b, a, b)
                },
                setBlendFactorsSeparate: function (a, b, c, d) {
                    this.__state.blendSourceRGBFactor = a;
                    this.__state.blendDestinationRGBFactor = b;
                    this.__state.blendSourceAlphaFactor =
                        c;
                    this.__state.blendDestinationAlphaFactor = d;
                    this.__setGLBlendEquation(this.gl.FUNC_ADD)
                },
                setColorMask: function (a, b, c, d) {
                    this.__state.colorMaskRed = a;
                    this.__state.colorMaskGreen = b;
                    this.__state.colorMaskBlue = c;
                    this.__state.colorMaskAlpha = d
                },
                setCulling: function (a) {
                    this.__state.culling = a
                },
                setDepthTest: function (a, b) {
                    this.__state.depthMask = a;
                    this.__state.depthCompareMode = b
                },
                setProgram: function (a) {
                    this.__state.program = a;
                    this.__state.shader = null;
                    if (null != a)
                        for (var b = 0, c = a.__samplerStates.length; b < c;) {
                            var d =
                                b++;
                            null == this.__state.samplerStates[d] ? this.__state.samplerStates[d] = a.__samplerStates[d].clone() : this.__state.samplerStates[d].copyFrom(a.__samplerStates[d])
                        }
                },
                setProgramConstantsFromMatrix: function (a, b, c, d) {
                    null == d && (d = !1);
                    if (null != this.__state.program && 1 == this.__state.program.__format) this.__flushGLProgram(), a = new Float32Array(16), a[0] = c.rawData.get(0), a[1] = c.rawData.get(1), a[2] = c.rawData.get(2), a[3] = c.rawData.get(3), a[4] = c.rawData.get(4), a[5] = c.rawData.get(5), a[6] = c.rawData.get(6), a[7] = c.rawData.get(7),
                        a[8] = c.rawData.get(8), a[9] = c.rawData.get(9), a[10] = c.rawData.get(10), a[11] = c.rawData.get(11), a[12] = c.rawData.get(12), a[13] = c.rawData.get(13), a[14] = c.rawData.get(14), a[15] = c.rawData.get(15), Tc.uniformMatrix4fv(this.gl, b, d, a);
                    else {
                        var g = (a = 1 == a) ? this.__vertexConstants : this.__fragmentConstants;
                        c = c.rawData;
                        var f = 4 * b;
                        d ? (g[f++] = c.get(0), g[f++] = c.get(4), g[f++] = c.get(8), g[f++] = c.get(12), g[f++] = c.get(1), g[f++] = c.get(5), g[f++] = c.get(9), g[f++] = c.get(13), g[f++] = c.get(2), g[f++] = c.get(6), g[f++] = c.get(10), g[f++] =
                            c.get(14), g[f++] = c.get(3), g[f++] = c.get(7), g[f++] = c.get(11)) : (g[f++] = c.get(0), g[f++] = c.get(1), g[f++] = c.get(2), g[f++] = c.get(3), g[f++] = c.get(4), g[f++] = c.get(5), g[f++] = c.get(6), g[f++] = c.get(7), g[f++] = c.get(8), g[f++] = c.get(9), g[f++] = c.get(10), g[f++] = c.get(11), g[f++] = c.get(12), g[f++] = c.get(13), g[f++] = c.get(14));
                        g[f++] = c.get(15);
                        null != this.__state.program && this.__state.program.__markDirty(a, b, 4)
                    }
                },
                setRenderToBackBuffer: function () {
                    this.__state.renderToTexture = null
                },
                setRenderToTexture: function (a, b, c, d) {
                    null ==
                    d && (d = 0);
                    null == c && (c = 0);
                    null == b && (b = !1);
                    this.__state.renderToTexture = a;
                    this.__state.renderToTextureDepthStencil = b;
                    this.__state.renderToTextureAntiAlias = c;
                    this.__state.renderToTextureSurfaceSelector = d
                },
                setSamplerStateAt: function (a, b, c, d) {
                    null == this.__state.samplerStates[a] && (this.__state.samplerStates[a] = new cg);
                    a = this.__state.samplerStates[a];
                    a.wrap = b;
                    a.filter = c;
                    a.mipfilter = d
                },
                setScissorRectangle: function (a) {
                    null != a ? (this.__state.scissorEnabled = !0, this.__state.scissorRectangle.copyFrom(a)) : this.__state.scissorEnabled = !1
                },
                setStencilActions: function (a, b, c, d, g) {
                    null == g && (g = 5);
                    null == d && (d = 5);
                    null == c && (c = 5);
                    null == b && (b = 0);
                    null == a && (a = 2);
                    this.__state.stencilTriangleFace = a;
                    this.__state.stencilCompareMode = b;
                    this.__state.stencilPass = c;
                    this.__state.stencilDepthFail = d;
                    this.__state.stencilFail = g
                },
                setStencilReferenceValue: function (a, b, c) {
                    null == c && (c = 255);
                    null == b && (b = 255);
                    this.__state.stencilReferenceValue = a;
                    this.__state.stencilReadMask = b;
                    this.__state.stencilWriteMask = c
                },
                setTextureAt: function (a, b) {
                    this.__state.textures[a] =
                        b
                },
                setVertexBufferAt: function (a, b, c, d) {
                    null == d && (d = 4);
                    null == c && (c = 0);
                    if (!(0 > a))
                        if (null == b) this.gl.disableVertexAttribArray(a), this.__bindGLArrayBuffer(null);
                        else switch (this.__bindGLArrayBuffer(b.__id), this.gl.enableVertexAttribArray(a), c *= 4, d) {
                            case 0:
                                this.gl.vertexAttribPointer(a, 4, this.gl.UNSIGNED_BYTE, !0, b.__stride, c);
                                break;
                            case 1:
                                this.gl.vertexAttribPointer(a, 1, this.gl.FLOAT, !1, b.__stride, c);
                                break;
                            case 2:
                                this.gl.vertexAttribPointer(a, 2, this.gl.FLOAT, !1, b.__stride, c);
                                break;
                            case 3:
                                this.gl.vertexAttribPointer(a,
                                    3, this.gl.FLOAT, !1, b.__stride, c);
                                break;
                            case 4:
                                this.gl.vertexAttribPointer(a, 4, this.gl.FLOAT, !1, b.__stride, c);
                                break;
                            default:
                                throw new tc;
                        }
                },
                __bindGLArrayBuffer: function (a) {
                    this.__contextState.__currentGLArrayBuffer != a && (this.gl.bindBuffer(this.gl.ARRAY_BUFFER, a), this.__contextState.__currentGLArrayBuffer = a)
                },
                __bindGLElementArrayBuffer: function (a) {
                    this.__contextState.__currentGLElementArrayBuffer != a && (this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, a), this.__contextState.__currentGLElementArrayBuffer =
                        a)
                },
                __bindGLFramebuffer: function (a) {
                    this.__contextState.__currentGLFramebuffer != a && (this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, a), this.__contextState.__currentGLFramebuffer = a)
                },
                __bindGLTexture2D: function (a) {
                    this.gl.bindTexture(this.gl.TEXTURE_2D, a);
                    this.__contextState.__currentGLTexture2D = a
                },
                __bindGLTextureCubeMap: function (a) {
                    this.gl.bindTexture(this.gl.TEXTURE_CUBE_MAP, a);
                    this.__contextState.__currentGLTextureCubeMap = a
                },
                __dispose: function () {
                    this.driverInfo += " (Disposed)";
                    null != this.__stage3D && (this.__stage3D.__indexBuffer =
                        null, this.__stage3D.__vertexBuffer = null, this.__stage3D = this.__stage3D.context3D = null);
                    this.__positionScale = this.__frontBufferTexture = this.__fragmentConstants = this.__renderStage3DProgram = this.__context = this.__backBufferTexture = null;
                    this.__present = !1;
                    this.__vertexConstants = this.__stage = this.__quadIndexBuffer = null
                },
                __drawTriangles: function (a, b) {
                    null == a && (a = 0);
                    null == this.__state.renderToTexture && (this.__stage.context3D != this || this.__stage.__renderer.__cleared ? this.__cleared || this.clear(0, 0, 0, 0, 1, 0, 1) :
                        this.__stage.__renderer.__clear());
                    this.__flushGL();
                    null != this.__state.program && this.__state.program.__flush();
                    this.gl.drawArrays(this.gl.TRIANGLES, a, b)
                },
                __flushGL: function () {
                    this.__flushGLProgram();
                    this.__flushGLFramebuffer();
                    this.__flushGLViewport();
                    this.__flushGLBlend();
                    if (this.__contextState.colorMaskRed != this.__state.colorMaskRed || this.__contextState.colorMaskGreen != this.__state.colorMaskGreen || this.__contextState.colorMaskBlue != this.__state.colorMaskBlue || this.__contextState.colorMaskAlpha !=
                        this.__state.colorMaskAlpha) this.gl.colorMask(this.__state.colorMaskRed, this.__state.colorMaskGreen, this.__state.colorMaskBlue, this.__state.colorMaskAlpha), this.__contextState.colorMaskRed = this.__state.colorMaskRed, this.__contextState.colorMaskGreen = this.__state.colorMaskGreen, this.__contextState.colorMaskBlue = this.__state.colorMaskBlue, this.__contextState.colorMaskAlpha = this.__state.colorMaskAlpha;
                    this.__flushGLCulling();
                    this.__flushGLDepth();
                    this.__flushGLScissor();
                    this.__flushGLStencil();
                    this.__flushGLTextures()
                },
                __flushGLBlend: function () {
                    if (this.__contextState.blendDestinationRGBFactor != this.__state.blendDestinationRGBFactor || this.__contextState.blendSourceRGBFactor != this.__state.blendSourceRGBFactor || this.__contextState.blendDestinationAlphaFactor != this.__state.blendDestinationAlphaFactor || this.__contextState.blendSourceAlphaFactor != this.__state.blendSourceAlphaFactor) this.__setGLBlend(!0), this.__state.blendDestinationRGBFactor == this.__state.blendDestinationAlphaFactor && this.__state.blendSourceRGBFactor ==
                    this.__state.blendSourceAlphaFactor ? this.gl.blendFunc(this.__getGLBlend(this.__state.blendSourceRGBFactor), this.__getGLBlend(this.__state.blendDestinationRGBFactor)) : this.gl.blendFuncSeparate(this.__getGLBlend(this.__state.blendSourceRGBFactor), this.__getGLBlend(this.__state.blendDestinationRGBFactor), this.__getGLBlend(this.__state.blendSourceAlphaFactor), this.__getGLBlend(this.__state.blendDestinationAlphaFactor)), this.__contextState.blendDestinationRGBFactor = this.__state.blendDestinationRGBFactor,
                        this.__contextState.blendSourceRGBFactor = this.__state.blendSourceRGBFactor, this.__contextState.blendDestinationAlphaFactor = this.__state.blendDestinationAlphaFactor, this.__contextState.blendSourceAlphaFactor = this.__state.blendSourceAlphaFactor
                },
                __flushGLCulling: function () {
                    if (this.__contextState.culling != this.__state.culling) {
                        if (3 == this.__state.culling) this.__setGLCullFace(!1);
                        else switch (this.__setGLCullFace(!0), this.__state.culling) {
                            case 0:
                                this.gl.cullFace(this.gl.BACK);
                                break;
                            case 1:
                                this.gl.cullFace(this.gl.FRONT);
                                break;
                            case 2:
                                this.gl.cullFace(this.gl.FRONT_AND_BACK);
                                break;
                            case 3:
                                break;
                            default:
                                throw new tc;
                        }
                        this.__contextState.culling = this.__state.culling
                    }
                },
                __flushGLDepth: function () {
                    var a = this.__state.depthMask && (null != this.__state.renderToTexture ? this.__state.renderToTextureDepthStencil : this.__state.backBufferEnableDepthAndStencil);
                    this.__contextState.depthMask != a && (this.gl.depthMask(a), this.__contextState.depthMask = a);
                    if (this.__contextState.depthCompareMode != this.__state.depthCompareMode) {
                        switch (this.__state.depthCompareMode) {
                            case 0:
                                this.gl.depthFunc(this.gl.ALWAYS);
                                break;
                            case 1:
                                this.gl.depthFunc(this.gl.EQUAL);
                                break;
                            case 2:
                                this.gl.depthFunc(this.gl.GREATER);
                                break;
                            case 3:
                                this.gl.depthFunc(this.gl.GEQUAL);
                                break;
                            case 4:
                                this.gl.depthFunc(this.gl.LESS);
                                break;
                            case 5:
                                this.gl.depthFunc(this.gl.LEQUAL);
                                break;
                            case 6:
                                this.gl.depthFunc(this.gl.NEVER);
                                break;
                            case 7:
                                this.gl.depthFunc(this.gl.NOTEQUAL);
                                break;
                            default:
                                throw new tc;
                        }
                        this.__contextState.depthCompareMode = this.__state.depthCompareMode
                    }
                },
                __flushGLFramebuffer: function () {
                    if (null != this.__state.renderToTexture) {
                        if (this.__contextState.renderToTexture !=
                            this.__state.renderToTexture || this.__contextState.renderToTextureSurfaceSelector != this.__state.renderToTextureSurfaceSelector) {
                            var a = this.__state.renderToTexture.__getGLFramebuffer(this.__state.renderToTextureDepthStencil, this.__state.renderToTextureAntiAlias, this.__state.renderToTextureSurfaceSelector);
                            this.__bindGLFramebuffer(a);
                            this.__contextState.renderToTexture = this.__state.renderToTexture;
                            this.__contextState.renderToTextureAntiAlias = this.__state.renderToTextureAntiAlias;
                            this.__contextState.renderToTextureDepthStencil =
                                this.__state.renderToTextureDepthStencil;
                            this.__contextState.renderToTextureSurfaceSelector = this.__state.renderToTextureSurfaceSelector
                        }
                        this.__setGLDepthTest(this.__state.renderToTextureDepthStencil);
                        this.__setGLStencilTest(this.__state.renderToTextureDepthStencil);
                        this.__setGLFrontFace(!0)
                    } else {
                        if (null == this.__stage && 0 == this.backBufferWidth && 0 == this.backBufferHeight) throw new $b("Context3D backbuffer has not been configured");
                        if (null != this.__contextState.renderToTexture || this.__contextState.__currentGLFramebuffer !=
                            this.__state.__primaryGLFramebuffer || this.__contextState.backBufferEnableDepthAndStencil != this.__state.backBufferEnableDepthAndStencil) this.__bindGLFramebuffer(this.__state.__primaryGLFramebuffer), this.__contextState.renderToTexture = null, this.__contextState.backBufferEnableDepthAndStencil = this.__state.backBufferEnableDepthAndStencil;
                        this.__setGLDepthTest(this.__state.backBufferEnableDepthAndStencil);
                        this.__setGLStencilTest(this.__state.backBufferEnableDepthAndStencil);
                        this.__setGLFrontFace(this.__stage.context3D !=
                            this)
                    }
                },
                __flushGLProgram: function () {
                    var a = this.__state.shader,
                        b = this.__state.program;
                    this.__contextState.shader != a && (null != this.__contextState.shader && this.__contextState.shader.__disable(), null != a && a.__enable(), this.__contextState.shader = a);
                    this.__contextState.program != b && (null != this.__contextState.program && this.__contextState.program.__disable(), null != b && b.__enable(), this.__contextState.program = b);
                    null != b && 0 == b.__format && (this.__positionScale[1] = this.__stage.context3D == this && null == this.__state.renderToTexture ?
                        1 : -1, b.__setPositionScale(this.__positionScale))
                },
                __flushGLScissor: function () {
                    if (this.__state.scissorEnabled) {
                        this.__setGLScissorTest(!0);
                        this.__contextState.scissorEnabled = !0;
                        var a = this.__state.scissorRectangle.x | 0,
                            b = this.__state.scissorRectangle.y | 0,
                            c = this.__state.scissorRectangle.width | 0,
                            d = this.__state.scissorRectangle.height | 0;
                        this.__backBufferWantsBestResolution && (a = this.__state.scissorRectangle.x * this.__stage.window.__scale | 0, b = this.__state.scissorRectangle.y * this.__stage.window.__scale | 0, c =
                            this.__state.scissorRectangle.width * this.__stage.window.__scale | 0, d = this.__state.scissorRectangle.height * this.__stage.window.__scale | 0);
                        null == this.__state.renderToTexture && null == this.__stage3D && (b = (this.__stage.window.__height * this.__stage.window.__scale | 0) - d - b);
                        if (this.__contextState.scissorRectangle.x != a || this.__contextState.scissorRectangle.y != b || this.__contextState.scissorRectangle.width != c || this.__contextState.scissorRectangle.height != d) this.gl.scissor(a, b, c, d), this.__contextState.scissorRectangle.setTo(a,
                            b, c, d)
                    } else this.__contextState.scissorEnabled != this.__state.scissorEnabled && (this.__setGLScissorTest(!1), this.__contextState.scissorEnabled = !1)
                },
                __flushGLStencil: function () {
                    if (this.__contextState.stencilTriangleFace != this.__state.stencilTriangleFace || this.__contextState.stencilPass != this.__state.stencilPass || this.__contextState.stencilDepthFail != this.__state.stencilDepthFail || this.__contextState.stencilFail != this.__state.stencilFail) this.gl.stencilOpSeparate(this.__getGLTriangleFace(this.__state.stencilTriangleFace),
                        this.__getGLStencilAction(this.__state.stencilFail), this.__getGLStencilAction(this.__state.stencilDepthFail), this.__getGLStencilAction(this.__state.stencilPass)), this.__contextState.stencilTriangleFace = this.__state.stencilTriangleFace, this.__contextState.stencilPass = this.__state.stencilPass, this.__contextState.stencilDepthFail = this.__state.stencilDepthFail, this.__contextState.stencilFail = this.__state.stencilFail;
                    this.__contextState.stencilWriteMask != this.__state.stencilWriteMask && (this.gl.stencilMask(this.__state.stencilWriteMask),
                        this.__contextState.stencilWriteMask = this.__state.stencilWriteMask);
                    if (this.__contextState.stencilCompareMode != this.__state.stencilCompareMode || this.__contextState.stencilReferenceValue != this.__state.stencilReferenceValue || this.__contextState.stencilReadMask != this.__state.stencilReadMask) this.gl.stencilFunc(this.__getGLCompareMode(this.__state.stencilCompareMode), this.__state.stencilReferenceValue, this.__state.stencilReadMask), this.__contextState.stencilCompareMode = this.__state.stencilCompareMode,
                        this.__contextState.stencilReferenceValue = this.__state.stencilReferenceValue, this.__contextState.stencilReadMask = this.__state.stencilReadMask
                },
                __flushGLTextures: function () {
                    for (var a = 0, b, c, d = 0, g = this.__state.textures.length; d < g;) {
                        var f = d++;
                        b = this.__state.textures[f];
                        c = this.__state.samplerStates[f];
                        null == c && (this.__state.samplerStates[f] = new cg, c = this.__state.samplerStates[f]);
                        this.gl.activeTexture(this.gl.TEXTURE0 + a);
                        null != b ? (b.__textureTarget == this.gl.TEXTURE_2D ? this.__bindGLTexture2D(b.__getTexture()) :
                            this.__bindGLTextureCubeMap(b.__getTexture()), this.__contextState.textures[f] = b, b.__setSamplerState(c)) : this.__bindGLTexture2D(null);
                        null != this.__state.program && 0 == this.__state.program.__format && c.textureAlpha && (this.gl.activeTexture(this.gl.TEXTURE0 + a + 4), null != b && null != b.__alphaTexture ? (b.__alphaTexture.__textureTarget == this.gl.TEXTURE_2D ? this.__bindGLTexture2D(b.__alphaTexture.__getTexture()) : this.__bindGLTextureCubeMap(b.__alphaTexture.__getTexture()), b.__alphaTexture.__setSamplerState(c), this.gl.uniform1i(this.__state.program.__agalAlphaSamplerEnabled[a].location,
                            1)) : (this.__bindGLTexture2D(null), null != this.__state.program.__agalAlphaSamplerEnabled[a] && this.gl.uniform1i(this.__state.program.__agalAlphaSamplerEnabled[a].location, 0)));
                        ++a
                    }
                },
                __flushGLViewport: function () {
                    if (null == this.__state.renderToTexture)
                        if (this.__stage.context3D == this) {
                            var a = this.backBufferWidth,
                                b = this.backBufferHeight;
                            null != this.__stage3D || this.__backBufferWantsBestResolution || (a = this.backBufferWidth * this.__stage.window.__scale | 0, b = this.backBufferHeight * this.__stage.window.__scale | 0);
                            var c =
                                    null == this.__stage3D ? 0 : this.__stage3D.get_x() | 0,
                                d = this.__stage.window.__height * this.__stage.window.__scale - b - (null == this.__stage3D ? 0 : this.__stage3D.get_y()) | 0;
                            this.gl.viewport(c, d, a, b)
                        } else this.gl.viewport(0, 0, this.backBufferWidth, this.backBufferHeight);
                    else b = a = 0, this.__state.renderToTexture instanceof ak ? (b = this.__state.renderToTexture, a = b.__width, b = b.__height) : this.__state.renderToTexture instanceof zh ? (b = this.__state.renderToTexture, a = b.__width, b = b.__height) : this.__state.renderToTexture instanceof
                        bk && (b = this.__state.renderToTexture, b = a = b.__size), this.gl.viewport(0, 0, a, b)
                },
                __getGLBlend: function (a) {
                    switch (a) {
                        case 0:
                            return this.gl.DST_ALPHA;
                        case 1:
                            return this.gl.DST_COLOR;
                        case 2:
                            return this.gl.ONE;
                        case 3:
                            return this.gl.ONE_MINUS_DST_ALPHA;
                        case 4:
                            return this.gl.ONE_MINUS_DST_COLOR;
                        case 5:
                            return this.gl.ONE_MINUS_SRC_ALPHA;
                        case 6:
                            return this.gl.ONE_MINUS_SRC_COLOR;
                        case 7:
                            return this.gl.SRC_ALPHA;
                        case 8:
                            return this.gl.SRC_COLOR;
                        case 9:
                            return this.gl.ZERO;
                        default:
                            throw new tc;
                    }
                },
                __getGLCompareMode: function (a) {
                    switch (a) {
                        case 0:
                            return this.gl.ALWAYS;
                        case 1:
                            return this.gl.EQUAL;
                        case 2:
                            return this.gl.GREATER;
                        case 3:
                            return this.gl.GEQUAL;
                        case 4:
                            return this.gl.LESS;
                        case 5:
                            return this.gl.LEQUAL;
                        case 6:
                            return this.gl.NEVER;
                        case 7:
                            return this.gl.NOTEQUAL;
                        default:
                            return this.gl.EQUAL
                    }
                },
                __getGLStencilAction: function (a) {
                    switch (a) {
                        case 0:
                            return this.gl.DECR;
                        case 1:
                            return this.gl.DECR_WRAP;
                        case 2:
                            return this.gl.INCR;
                        case 3:
                            return this.gl.INCR_WRAP;
                        case 4:
                            return this.gl.INVERT;
                        case 5:
                            return this.gl.KEEP;
                        case 6:
                            return this.gl.REPLACE;
                        case 7:
                            return this.gl.ZERO;
                        default:
                            return this.gl.KEEP
                    }
                },
                __getGLTriangleFace: function (a) {
                    switch (a) {
                        case 0:
                            return this.gl.BACK;
                        case 1:
                            return this.gl.FRONT;
                        case 2:
                            return this.gl.FRONT_AND_BACK;
                        case 3:
                            return this.gl.NONE;
                        default:
                            return this.gl.FRONT_AND_BACK
                    }
                },
                __renderStage3D: function (a) {
                    var b = a.context3D;
                    if (null != b && b != this && null != b.__frontBufferTexture && a.visible && 0 < this.backBufferHeight && 0 < this.backBufferWidth) {
                        if (null == this.__renderStage3DProgram) {
                            var c = new ra;
                            c.assemble(um.toString(1), "m44 op, va0, vc0\nmov v0, va1");
                            var d =
                                new ra;
                            d.assemble(um.toString(0), "tex ft1, v0, fs0 <2d,nearest,nomip>\nmov oc, ft1");
                            this.__renderStage3DProgram = this.createProgram();
                            this.__renderStage3DProgram.upload(c.agalcode, d.agalcode)
                        }
                        this.setProgram(this.__renderStage3DProgram);
                        this.setBlendFactors(2, 9);
                        this.setColorMask(!0, !0, !0, !0);
                        this.setCulling(3);
                        this.setDepthTest(!1, 0);
                        this.setStencilActions();
                        this.setStencilReferenceValue(0, 0, 0);
                        this.setScissorRectangle(null);
                        this.setTextureAt(0, b.__frontBufferTexture);
                        this.setVertexBufferAt(0, a.__vertexBuffer,
                            0, 3);
                        this.setVertexBufferAt(1, a.__vertexBuffer, 3, 2);
                        this.setProgramConstantsFromMatrix(1, 0, a.__renderTransform, !0);
                        this.drawTriangles(a.__indexBuffer);
                        this.__present = !0
                    }
                },
                __setGLBlend: function (a) {
                    this.__contextState.__enableGLBlend != a && (a ? this.gl.enable(this.gl.BLEND) : this.gl.disable(this.gl.BLEND), this.__contextState.__enableGLBlend = a)
                },
                __setGLBlendEquation: function (a) {
                    this.__contextState.__glBlendEquation != a && (this.gl.blendEquation(a), this.__contextState.__glBlendEquation = a)
                },
                __setGLCullFace: function (a) {
                    this.__contextState.__enableGLCullFace !=
                    a && (a ? this.gl.enable(this.gl.CULL_FACE) : this.gl.disable(this.gl.CULL_FACE), this.__contextState.__enableGLCullFace = a)
                },
                __setGLDepthTest: function (a) {
                    this.__contextState.__enableGLDepthTest != a && (a ? this.gl.enable(this.gl.DEPTH_TEST) : this.gl.disable(this.gl.DEPTH_TEST), this.__contextState.__enableGLDepthTest = a)
                },
                __setGLFrontFace: function (a) {
                    this.__contextState.__frontFaceGLCCW != a && (this.gl.frontFace(a ? this.gl.CCW : this.gl.CW), this.__contextState.__frontFaceGLCCW = a)
                },
                __setGLScissorTest: function (a) {
                    this.__contextState.__enableGLScissorTest !=
                    a && (a ? this.gl.enable(this.gl.SCISSOR_TEST) : this.gl.disable(this.gl.SCISSOR_TEST), this.__contextState.__enableGLScissorTest = a)
                },
                __setGLStencilTest: function (a) {
                    this.__contextState.__enableGLStencilTest != a && (a ? this.gl.enable(this.gl.STENCIL_TEST) : this.gl.disable(this.gl.STENCIL_TEST), this.__contextState.__enableGLStencilTest = a)
                },
                __class__: Ab
            });
            var tm = {
                    fromString: function (a) {
                        switch (a) {
                            case "dynamicDraw":
                                return 0;
                            case "staticDraw":
                                return 1;
                            default:
                                return null
                        }
                    },
                    toString: function (a) {
                        switch (a) {
                            case 0:
                                return "dynamicDraw";
                            case 1:
                                return "staticDraw";
                            default:
                                return null
                        }
                    }
                },
                um = {
                    toString: function (a) {
                        switch (a) {
                            case 0:
                                return "fragment";
                            case 1:
                                return "vertex";
                            default:
                                return null
                        }
                    }
                },
                Im = {
                    toString: function (a) {
                        switch (a) {
                            case 0:
                                return "bgrPacked565";
                            case 1:
                                return "bgra";
                            case 2:
                                return "bgraPacked4444";
                            case 3:
                                return "compressed";
                            case 4:
                                return "compressedAlpha";
                            case 5:
                                return "rgbaHalfFloat";
                            default:
                                return null
                        }
                    }
                },
                Bl = function (a, b, c) {
                    this.__context = a;
                    this.__numIndices = b;
                    a = this.__context.gl;
                    this.__id = a.createBuffer();
                    this.__usage = 0 == c ? a.DYNAMIC_DRAW :
                        a.STATIC_DRAW
                };
            h["openfl.display3D.IndexBuffer3D"] = Bl;
            Bl.__name__ = "openfl.display3D.IndexBuffer3D";
            Bl.prototype = {
                uploadFromTypedArray: function (a, b) {
                    null != a && (b = this.__context.gl, this.__context.__bindGLElementArrayBuffer(this.__id), Tc.bufferData(b, b.ELEMENT_ARRAY_BUFFER, a, this.__usage))
                },
                uploadFromVector: function (a, b, c) {
                    if (null != a) {
                        var d = b + c,
                            g = this.__tempUInt16Array;
                        if (null == this.__tempUInt16Array || this.__tempUInt16Array.length < c) this.__tempUInt16Array = null != c ? new Uint16Array(c) : null, null != g && this.__tempUInt16Array.set(g);
                        for (c = b; c < d;) g = c++, this.__tempUInt16Array[g - b] = a.get(g);
                        this.uploadFromTypedArray(this.__tempUInt16Array)
                    }
                },
                __class__: Bl
            };
            var Cl = function (a, b) {
                this.__context = a;
                this.__format = b;
                0 == this.__format ? (this.__agalSamplerUsageMask = 0, this.__agalUniforms = new jb, this.__agalSamplerUniforms = new jb, this.__agalAlphaSamplerUniforms = new jb, this.__agalAlphaSamplerEnabled = []) : (this.__glslAttribNames = [], this.__glslAttribTypes = [], this.__glslSamplerNames = [], this.__glslUniformLocations = [], this.__glslUniformNames = [], this.__glslUniformTypes = []);
                this.__samplerStates = []
            };
            h["openfl.display3D.Program3D"] = Cl;
            Cl.__name__ = "openfl.display3D.Program3D";
            Cl.prototype = {
                upload: function (a, b) {
                    if (0 == this.__format) {
                        var c = [];
                        a = ld.convertToGLSL(a, null);
                        b = ld.convertToGLSL(b, c);
                        5 == Wa.level && (Wa.info(a, {

                            className: "openfl.display3D.Program3D",
                            methodName: "upload"
                        }), Wa.info(b, {

                            className: "openfl.display3D.Program3D",
                            methodName: "upload"
                        }));
                        this.__deleteShaders();
                        this.__uploadFromGLSL(a, b);
                        this.__buildAGALUniformList();
                        b = 0;
                        for (a = c.length; b < a;) {
                            var d = b++;
                            this.__samplerStates[d] = c[d]
                        }
                    }
                },
                __buildAGALUniformList: function () {
                    if (1 != this.__format) {
                        var a = this.__context.gl;
                        this.__agalUniforms.clear();
                        this.__agalSamplerUniforms.clear();
                        this.__agalAlphaSamplerUniforms.clear();
                        this.__agalAlphaSamplerEnabled = [];
                        this.__agalSamplerUsageMask = 0;
                        var b = a.getProgramParameter(this.__glProgram, a.ACTIVE_UNIFORMS);
                        for (var c = new jb, d = new jb, g = 0; g < b;) {
                            var f = g++,
                                k = a.getActiveUniform(this.__glProgram,
                                    f),
                                h = k.name,
                                l = k.size,
                                n = k.type;
                            k = new ck(this.__context);
                            k.name = h;
                            k.size = l;
                            k.type = n;
                            k.location = a.getUniformLocation(this.__glProgram, k.name);
                            h = k.name.indexOf("[");
                            0 <= h && (k.name = k.name.substring(0, h));
                            switch (k.type) {
                                case 35674:
                                    k.regCount = 2;
                                    break;
                                case 35675:
                                    k.regCount = 3;
                                    break;
                                case 35676:
                                    k.regCount = 4;
                                    break;
                                default:
                                    k.regCount = 1
                            }
                            k.regCount *= k.size;
                            this.__agalUniforms.add(k);
                            if ("vcPositionScale" == k.name) this.__agalPositionScale = k;
                            else if (T.startsWith(k.name, "vc")) k.regIndex = E.parseInt(k.name.substring(2)),
                                k.regData = this.__context.__vertexConstants, c.add(k);
                            else if (T.startsWith(k.name, "fc")) k.regIndex = E.parseInt(k.name.substring(2)), k.regData = this.__context.__fragmentConstants, d.add(k);
                            else if (T.startsWith(k.name, "sampler") && -1 == k.name.indexOf("alpha"))
                                for (k.regIndex = E.parseInt(k.name.substring(7)), this.__agalSamplerUniforms.add(k), h = 0, l = k.regCount; h < l;) n = h++, this.__agalSamplerUsageMask |= 1 << k.regIndex + n;
                            else T.startsWith(k.name, "sampler") && T.endsWith(k.name, "_alpha") ? (h = k.name.indexOf("_") - 7, k.regIndex =
                                    E.parseInt(k.name.substring(7, 7 + h)) + 4, this.__agalAlphaSamplerUniforms.add(k)) : T.startsWith(k.name, "sampler") && T.endsWith(k.name, "_alphaEnabled") && (k.regIndex = E.parseInt(k.name.substring(7)), this.__agalAlphaSamplerEnabled[k.regIndex] = k);
                            5 == Wa.level && Wa.verbose("" + f + " name:" + k.name + " type:" + k.type + " size:" + k.size + " location:" + E.string(k.location), {

                                className: "openfl.display3D.Program3D",
                                methodName: "__buildAGALUniformList"
                            })
                        }
                        this.__agalVertexUniformMap =
                            new Ah(D.array(c));
                        this.__agalFragmentUniformMap = new Ah(D.array(d))
                    }
                },
                __deleteShaders: function () {
                    var a = this.__context.gl;
                    null != this.__glProgram && (this.__glProgram = null);
                    null != this.__glVertexShader && (a.deleteShader(this.__glVertexShader), this.__glVertexShader = null);
                    null != this.__glFragmentShader && (a.deleteShader(this.__glFragmentShader), this.__glFragmentShader = null)
                },
                __disable: function () {
                },
                __enable: function () {
                    var a = this.__context.gl;
                    a.useProgram(this.__glProgram);
                    if (0 == this.__format) {
                        this.__agalVertexUniformMap.markAllDirty();
                        this.__agalFragmentUniformMap.markAllDirty();
                        for (var b = this.__agalSamplerUniforms.h; null != b;) {
                            var c = b.item;
                            b = b.next;
                            if (1 == c.regCount) a.uniform1i(c.location, c.regIndex);
                            else throw new tc("!!! TODO: uniform location on webgl");
                        }
                        for (b = this.__agalAlphaSamplerUniforms.h; null != b;)
                            if (c = b.item, b = b.next, 1 == c.regCount) a.uniform1i(c.location, c.regIndex);
                            else throw new tc("!!! TODO: uniform location on webgl");
                    }
                },
                __flush: function () {
                    0 == this.__format && (this.__agalVertexUniformMap.flush(), this.__agalFragmentUniformMap.flush())
                },
                __markDirty: function (a, b, c) {
                    1 != this.__format && (a ? this.__agalVertexUniformMap.markDirty(b, c) : this.__agalFragmentUniformMap.markDirty(b, c))
                },
                __setPositionScale: function (a) {
                    1 != this.__format && null != this.__agalPositionScale && this.__context.gl.uniform4fv(this.__agalPositionScale.location, a)
                },
                __uploadFromGLSL: function (a, b) {
                    var c = this.__context.gl;
                    this.__glVertexSource = a;
                    this.__glFragmentSource = b;
                    this.__glVertexShader = c.createShader(c.VERTEX_SHADER);
                    c.shaderSource(this.__glVertexShader, a);
                    c.compileShader(this.__glVertexShader);
                    if (0 == c.getShaderParameter(this.__glVertexShader, c.COMPILE_STATUS)) {
                        var d = "Error compiling vertex shader\n" + c.getShaderInfoLog(this.__glVertexShader);
                        Wa.error(d + ("\n" + a), {

                            className: "openfl.display3D.Program3D",
                            methodName: "__uploadFromGLSL"
                        })
                    }
                    this.__glFragmentShader = c.createShader(c.FRAGMENT_SHADER);
                    c.shaderSource(this.__glFragmentShader, b);
                    c.compileShader(this.__glFragmentShader);
                    0 == c.getShaderParameter(this.__glFragmentShader, c.COMPILE_STATUS) &&
                    (d = "Error compiling fragment shader\n" + c.getShaderInfoLog(this.__glFragmentShader), Wa.error(d + ("\n" + b), {

                        className: "openfl.display3D.Program3D",
                        methodName: "__uploadFromGLSL"
                    }));
                    this.__glProgram = c.createProgram();
                    if (0 == this.__format)
                        for (b = 0; 16 > b;) {
                            var g = b++;
                            d = "va" + g;
                            -
                                1 != a.indexOf(" " + d) && c.bindAttribLocation(this.__glProgram, g, d)
                        } else
                        for (b = 0, a = this.__glslAttribNames; b < a.length;)
                            if (d = a[b], ++b, -1 < d.indexOf("Position") && T.startsWith(d, "openfl_")) {
                                c.bindAttribLocation(this.__glProgram,
                                    0, d);
                                break
                            }
                    c.attachShader(this.__glProgram, this.__glVertexShader);
                    c.attachShader(this.__glProgram, this.__glFragmentShader);
                    c.linkProgram(this.__glProgram);
                    0 == c.getProgramParameter(this.__glProgram, c.LINK_STATUS) && (d = "Unable to initialize the shader program\n" + c.getProgramInfoLog(this.__glProgram), Wa.error(d, {

                        className: "openfl.display3D.Program3D",
                        methodName: "__uploadFromGLSL"
                    }))
                },
                __class__: Cl
            };
            var ck = function (a) {
                this.context = a;
                this.isDirty = !0;
                this.regDataPointer = new vl(null, 0)
            };
            h["openfl.display3D.Uniform"] = ck;
            ck.__name__ = "openfl.display3D.Uniform";
            ck.prototype = {
                flush: function () {
                    var a = this.context.gl,
                        b = 4 * this.regIndex;
                    switch (this.type) {
                        case 35664:
                            Dm.uniform2fv(a, this.location, this.regData.subarray(b, b + 2 * this.regCount));
                            break;
                        case 35665:
                            var c = this.location;
                            b = this.regData.subarray(b, b + 3 * this.regCount);
                            var d = null;
                            null != d ? a.uniform3fv(c, b, d, null) : a.uniform3fv(c, b);
                            break;
                        case 35666:
                            c = this.location;
                            b = this.regData.subarray(b, b + 4 * this.regCount);
                            d = null;
                            null != d ? a.uniform4fv(c, b, d, null) : a.uniform4fv(c, b);
                            break;
                        case 35674:
                            Tc.uniformMatrix2fv(a, this.location, !1, this.regData.subarray(b, b + 4 * this.size));
                            break;
                        case 35675:
                            Tc.uniformMatrix3fv(a, this.location, !1, this.regData.subarray(b, b + 9 * this.size));
                            break;
                        case 35676:
                            Tc.uniformMatrix4fv(a, this.location, !1, this.regData.subarray(b, b + 16 * this.size));
                            break;
                        default:
                            c = this.location, b = this.regData.subarray(b, b + 4 * this.regCount), d = null, null != d ? a.uniform4fv(c, b, d, null) : a.uniform4fv(c, b)
                    }
                },
                __class__: ck
            };
            var Ah =
                function (a) {
                    this.__uniforms = a;
                    this.__uniforms.sort(function (a, b) {
                        return L.compare(a.regIndex, b.regIndex)
                    });
                    var b = 0;
                    a = 0;
                    for (var c = this.__uniforms; a < c.length;) {
                        var d = c[a];
                        ++a;
                        d.regIndex + d.regCount > b && (b = d.regIndex + d.regCount)
                    }
                    this.__registerLookup = pa.toObjectVector(null, b);
                    a = 0;
                    for (c = this.__uniforms; a < c.length;) {
                        d = c[a];
                        ++a;
                        b = 0;
                        for (var g = d.regCount; b < g;) {
                            var f = b++;
                            this.__registerLookup.set(d.regIndex + f, d)
                        }
                    }
                    this.__anyDirty = this.__allDirty = !0
                };
            h["openfl.display3D.UniformMap"] = Ah;
            Ah.__name__ = "openfl.display3D.UniformMap";
            Ah.prototype = {
                flush: function () {
                    if (this.__anyDirty) {
                        for (var a = 0, b = this.__uniforms; a < b.length;) {
                            var c = b[a];
                            ++a;
                            if (this.__allDirty || c.isDirty) c.flush(), c.isDirty = !1
                        }
                        this.__anyDirty = this.__allDirty = !1
                    }
                },
                markAllDirty: function () {
                    this.__anyDirty = this.__allDirty = !0
                },
                markDirty: function (a, b) {
                    if (!this.__allDirty)
                        for (b = a + b, b > this.__registerLookup.get_length() && (b = this.__registerLookup.get_length()); a < b;) {
                            var c = this.__registerLookup.get(a);
                            null != c ? (this.__anyDirty = c.isDirty = !0, a = c.regIndex + c.regCount) : ++a
                        }
                },
                __class__: Ah
            };
            var Dl = function (a, b, c, d) {
                this.__context = a;
                this.__numVertices = b;
                this.__vertexSize = c;
                a = this.__context.gl;
                this.__id = a.createBuffer();
                this.__stride = 4 * this.__vertexSize;
                this.__usage = 0 == tm.fromString(d) ? a.DYNAMIC_DRAW : a.STATIC_DRAW
            };
            h["openfl.display3D.VertexBuffer3D"] = Dl;
            Dl.__name__ = "openfl.display3D.VertexBuffer3D";
            Dl.prototype = {
                uploadFromTypedArray: function (a, b) {
                    null != a && (b = this.__context.gl, this.__context.__bindGLArrayBuffer(this.__id), Tc.bufferData(b, b.ARRAY_BUFFER, a, this.__usage))
                },
                uploadFromVector: function (a,
                                            b, c) {
                    if (null != a) {
                        b *= this.__vertexSize;
                        var d = c * this.__vertexSize;
                        c = b + d;
                        var g = this.__tempFloat32Array;
                        if (null == this.__tempFloat32Array || this.__tempFloat32Array.length < d) this.__tempFloat32Array = null != d ? new Float32Array(d) : null, null != g && this.__tempFloat32Array.set(g);
                        for (d = b; d < c;) g = d++, this.__tempFloat32Array[g - b] = a.get(g);
                        this.uploadFromTypedArray(oh.toArrayBufferView(this.__tempFloat32Array))
                    }
                },
                __class__: Dl
            };
            var ld = function () {
            };
            h["openfl.display3D._internal.AGALConverter"] = ld;
            ld.__name__ = "openfl.display3D._internal.AGALConverter";
            ld.prefixFromType = function (a, b) {
                switch (a) {
                    case 0:
                        return "va";
                    case 1:
                        return b == He.VERTEX ? "vc" : "fc";
                    case 2:
                        return b == He.VERTEX ? "vt" : "ft";
                    case 3:
                        return "output_";
                    case 4:
                        return "v";
                    case 5:
                        return "sampler";
                    default:
                        throw new tc("Invalid data!");
                }
            };
            ld.readUInt64 = function (a) {
                var b = a.readInt();
                a = a.readInt();
                return new lb(a, b)
            };
            ld.convertToGLSL = function (a, b) {
                a.position = 0;
                a.__endian = 1;
                var c = a.readByte() & 255;
                if (176 == c) return a.readUTF();
                if (160 != c) throw new tc("Magic value must be 0xA0, may not be AGAL");
                var d = a.readInt();
                if (161 != (a.readByte() & 255)) throw new tc("Shader type ID must be 0xA1");
                c = 0 == (a.readByte() & 255) ? He.VERTEX : He.FRAGMENT;
                for (var g = new dk, f = ""; ;) {
                    var k = a.position;
                    if (!Ja.gt(Pd.get_length(a), k)) break;
                    var h = a.readInt();
                    k = a.readUnsignedInt();
                    var l = ld.readUInt64(a),
                        n = ld.readUInt64(a);
                    k = Lg.parse(k, c);
                    l = dg.parse(l, c, k.mask);
                    var r = dg.parse(n, c, k.mask);
                    f += "\t";
                    switch (h) {
                        case 0:
                            f += E.string(k.toGLSL() + " = " + l.toGLSL() + "; // mov");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            break;
                        case 1:
                            f += E.string(k.toGLSL() +
                                " = " + l.toGLSL() + " + " + r.toGLSL() + "; // add");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        case 2:
                            f += E.string(k.toGLSL() + " = " + l.toGLSL() + " - " + r.toGLSL() + "; // sub");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        case 3:
                            f += E.string(k.toGLSL() + " = " + l.toGLSL() + " * " + r.toGLSL() + "; // mul");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        case 4:
                            f += E.string(k.toGLSL() + " = " + l.toGLSL() + " / " + r.toGLSL() + "; // div");
                            g.addDR(k,
                                ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        case 5:
                            f = -1 < l.toGLSL().indexOf(".") ? f + E.string(k.toGLSL() + " = 1.0 / " + l.toGLSL() + "; // rcp") : f + E.string(k.toGLSL() + " = vec4(1) / " + l.toGLSL() + "; // rcp");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            break;
                        case 6:
                            f += E.string(k.toGLSL() + " = min(" + l.toGLSL() + ", " + r.toGLSL() + "); // min");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        case 7:
                            f += E.string(k.toGLSL() + " = max(" + l.toGLSL() + ", " + r.toGLSL() + "); // max");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        case 8:
                            f += E.string(k.toGLSL() + " = fract(" + l.toGLSL() + "); // frc");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            break;
                        case 9:
                            f += E.string(k.toGLSL() + " = sqrt(" + l.toGLSL() + "); // sqrt");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            break;
                        case 10:
                            f += E.string(k.toGLSL() + " = inversesqrt(" + l.toGLSL() + "); // rsq");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            break;
                        case 11:
                            f += E.string(k.toGLSL() + " = pow(" + l.toGLSL() + ", " + r.toGLSL() +
                                "); // pow");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        case 12:
                            f += E.string(k.toGLSL() + " = log2(" + l.toGLSL() + "); // log");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            break;
                        case 13:
                            f += E.string(k.toGLSL() + " = exp2(" + l.toGLSL() + "); // exp");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            break;
                        case 14:
                            f += E.string(k.toGLSL() + " = normalize(" + l.toGLSL() + "); // normalize");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            break;
                        case 15:
                            f += E.string(k.toGLSL() + " = sin(" + l.toGLSL() +
                                "); // sin");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            break;
                        case 16:
                            f += E.string(k.toGLSL() + " = cos(" + l.toGLSL() + "); // cos");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            break;
                        case 17:
                            l.sourceMask = r.sourceMask = 7;
                            f += E.string(k.toGLSL() + " = cross(vec3(" + l.toGLSL() + "), vec3(" + r.toGLSL() + ")); // crs");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        case 18:
                            l.sourceMask = r.sourceMask = 7;
                            f += E.string(k.toGLSL() + " = vec4(dot(vec3(" + l.toGLSL() + "), vec3(" + r.toGLSL() + ")))" + k.getWriteMask() +
                                "; // dp3");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        case 19:
                            l.sourceMask = r.sourceMask = 15;
                            f += E.string(k.toGLSL() + " = vec4(dot(vec4(" + l.toGLSL() + "), vec4(" + r.toGLSL() + ")))" + k.getWriteMask() + "; // dp4");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        case 20:
                            f += E.string(k.toGLSL() + " = abs(" + l.toGLSL() + "); // abs");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            break;
                        case 21:
                            f += E.string(k.toGLSL() + " = -" + l.toGLSL() + "; // neg");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            break;
                        case 22:
                            f += E.string(k.toGLSL() + " = clamp(" + l.toGLSL() + ", 0.0, 1.0); // saturate");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            break;
                        case 23:
                            h = g.getRegisterUsage(r);
                            h != ka.VECTOR_4 && h != ka.VECTOR_4_ARRAY ? (f += E.string(k.toGLSL() + " = " + l.toGLSL() + " * mat3(" + r.toGLSL(!1) + "); // m33"), g.addDR(k, ka.VECTOR_4), g.addSR(l, ka.VECTOR_4), g.addSR(r, ka.MATRIX_4_4)) : (l.sourceMask = r.sourceMask = 7, f += E.string(k.toGLSL() + " = vec3(dot(" + l.toGLSL(!0) + "," + r.toGLSL(!0, 0) + "), dot(" + l.toGLSL(!0) +
                                "," + r.toGLSL(!0, 1) + "),dot(" + l.toGLSL(!0) + "," + r.toGLSL(!0, 2) + ")); // m33"), g.addDR(k, ka.VECTOR_4), g.addSR(l, ka.VECTOR_4), g.addSR(r, ka.VECTOR_4, 0), g.addSR(r, ka.VECTOR_4, 1), g.addSR(r, ka.VECTOR_4, 2));
                            break;
                        case 24:
                            h = g.getRegisterUsage(r);
                            h != ka.VECTOR_4 && h != ka.VECTOR_4_ARRAY ? (f += E.string(k.toGLSL() + " = " + l.toGLSL() + " * " + r.toGLSL(!1) + "; // m44"), g.addDR(k, ka.VECTOR_4), g.addSR(l, ka.VECTOR_4), g.addSR(r, ka.MATRIX_4_4)) : (l.sourceMask = r.sourceMask = 15, f += E.string(k.toGLSL() + " = vec4(dot(" + l.toGLSL(!0) + "," + r.toGLSL(!0,
                                0) + "), dot(" + l.toGLSL(!0) + "," + r.toGLSL(!0, 1) + "), dot(" + l.toGLSL(!0) + "," + r.toGLSL(!0, 2) + "), dot(" + l.toGLSL(!0) + "," + r.toGLSL(!0, 3) + ")); // m44"), g.addDR(k, ka.VECTOR_4), g.addSR(l, ka.VECTOR_4), g.addSR(r, ka.VECTOR_4, 0), g.addSR(r, ka.VECTOR_4, 1), g.addSR(r, ka.VECTOR_4, 2), g.addSR(r, ka.VECTOR_4, 3));
                            break;
                        case 25:
                            k.mask &= 7;
                            h = g.getRegisterUsage(r);
                            h != ka.VECTOR_4 && h != ka.VECTOR_4_ARRAY ? (f += E.string(k.toGLSL() + " = " + l.toGLSL() + " * " + r.toGLSL(!1) + "; // m34"), g.addDR(k, ka.VECTOR_4), g.addSR(l, ka.VECTOR_4), g.addSR(r,
                                ka.MATRIX_4_4)) : (l.sourceMask = r.sourceMask = 15, f += E.string(k.toGLSL() + " = vec3(dot(" + l.toGLSL(!0) + "," + r.toGLSL(!0, 0) + "), dot(" + l.toGLSL(!0) + "," + r.toGLSL(!0, 1) + "),dot(" + l.toGLSL(!0) + "," + r.toGLSL(!0, 2) + ")); // m34"), g.addDR(k, ka.VECTOR_4), g.addSR(l, ka.VECTOR_4), g.addSR(r, ka.VECTOR_4, 0), g.addSR(r, ka.VECTOR_4, 1), g.addSR(r, ka.VECTOR_4, 2));
                            break;
                        case 26:
                            if (2 > d) throw new tc("Version must be 2");
                            f += E.string(k.toGLSL() + " = ddx(" + l.toGLSL() + "); // ddx");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            break;
                        case 27:
                            if (2 >
                                d) throw new tc("Version must be 2");
                            f += E.string(k.toGLSL() + " = ddy(" + l.toGLSL() + "); // ddy");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            break;
                        case 28:
                            if (2 > d) throw new tc("Version must be 2");
                            l.sourceMask = r.sourceMask = 1;
                            f += E.string("if (" + l.toGLSL() + " == " + r.toGLSL() + ") { // ife");
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        case 29:
                            if (2 > d) throw new tc("Version must be 2");
                            l.sourceMask = r.sourceMask = 1;
                            f += E.string("if (" + l.toGLSL() + " != " + r.toGLSL() + ") { // ine");
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r,
                                ka.VECTOR_4);
                            break;
                        case 30:
                            if (2 > d) throw new tc("Version must be 2");
                            l.sourceMask = r.sourceMask = 1;
                            f += E.string("if (" + l.toGLSL() + " >= " + r.toGLSL() + ") { // ifg");
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        case 31:
                            if (2 > d) throw new tc("Version must be 2");
                            l.sourceMask = r.sourceMask = 1;
                            f += E.string("if (" + l.toGLSL() + " < " + r.toGLSL() + ") { // ifl");
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        case 32:
                            if (2 > d) throw new tc("Version must be 2");
                            f += "} else { // els";
                            break;
                        case 33:
                            if (2 > d) throw new tc("Version must be 2");
                            f += "} // eif";
                            break;
                        case 39:
                            l.sourceMask = 15;
                            f += E.string("if (any(lessThan(" + l.toGLSL() + ", vec4(0)))) discard;");
                            g.addSR(l, ka.VECTOR_4);
                            break;
                        case 40:
                            r = Mg.parse(n, c);
                            switch (r.d) {
                                case 0:
                                    2 == r.t ? (l.sourceMask = 3, g.addSaR(r, ka.SAMPLER_2D_ALPHA), f += E.string("if (" + r.toGLSL() + "_alphaEnabled) {\n"), f += E.string("\t\t" + k.toGLSL() + " = vec4(texture2D(" + r.toGLSL() + ", " + l.toGLSL() + ").xyz, texture2D(" + r.toGLSL() + "_alpha, " + l.toGLSL() + ").x); // tex + alpha\n"), f += "\t} else {\n", f += E.string("\t\t" + k.toGLSL() + " = texture2D(" +
                                        r.toGLSL() + ", " + l.toGLSL() + "); // tex\n"), f += "\t}") : (l.sourceMask = 3, g.addSaR(r, ka.SAMPLER_2D), f += E.string(k.toGLSL() + " = texture2D(" + r.toGLSL() + ", " + l.toGLSL() + "); // tex"));
                                    break;
                                case 1:
                                    2 == r.t ? (l.sourceMask = 7, g.addSaR(r, ka.SAMPLER_CUBE_ALPHA), f += E.string("if (" + r.toGLSL() + "_alphaEnabled) {\n"), f += E.string("\t\t" + k.toGLSL() + " = vec4(textureCube(" + r.toGLSL() + ", " + l.toGLSL() + ").xyz, textureCube(" + r.toGLSL() + "_alpha, " + l.toGLSL() + ").x); // tex + alpha\n"), f += "\t} else {\n", f += E.string("\t\t" + k.toGLSL() +
                                        " = textureCube(" + r.toGLSL() + ", " + l.toGLSL() + "); // tex"), f += "\t}") : (l.sourceMask = 7, f += E.string(k.toGLSL() + " = textureCube(" + r.toGLSL() + ", " + l.toGLSL() + "); // tex"), g.addSaR(r, ka.SAMPLER_CUBE))
                            }
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            null != b && (b[r.n] = r.toSamplerState());
                            break;
                        case 41:
                            l.sourceMask = r.sourceMask = 15;
                            f += E.string(k.toGLSL() + " = vec4(greaterThanEqual(" + l.toGLSL() + ", " + r.toGLSL() + "))" + k.getWriteMask() + "; // ste");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        case 42:
                            l.sourceMask = r.sourceMask = 15;
                            f += E.string(k.toGLSL() + " = vec4(lessThan(" + l.toGLSL() + ", " + r.toGLSL() + "))" + k.getWriteMask() + "; // slt");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        case 44:
                            l.sourceMask = r.sourceMask = 15;
                            f += E.string(k.toGLSL() + " = vec4(equal(" + l.toGLSL() + ", " + r.toGLSL() + "))" + k.getWriteMask() + "; // seq");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        case 45:
                            l.sourceMask = r.sourceMask = 15;
                            f += E.string(k.toGLSL() + " = vec4(notEqual(" +
                                l.toGLSL() + ", " + r.toGLSL() + "))" + k.getWriteMask() + "; // sne");
                            g.addDR(k, ka.VECTOR_4);
                            g.addSR(l, ka.VECTOR_4);
                            g.addSR(r, ka.VECTOR_4);
                            break;
                        default:
                            throw new tc("Opcode " + h);
                    }
                    f += "\n"
                }
                null == ld.limitedProfile && (d = ce.context.getParameter(7938), ld.limitedProfile = -1 < d.indexOf("OpenGL ES") || -1 < d.indexOf("WebGL"));
                a = "" + E.string("// AGAL " + (c == He.VERTEX ? "vertex" : "fragment") + " shader\n");
                a = ld.limitedProfile ? a + "#version 100\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n" :
                    a + "#version 120\n";
                a += E.string(g.toGLSL(!1));
                c == He.VERTEX && (a += "uniform vec4 vcPositionScale;\n");
                a = a + "void main() {\n" + E.string(g.toGLSL(!0));
                a += E.string(f);
                c == He.VERTEX && (a += "\tgl_Position *= vcPositionScale;\n");
                return a + "}\n"
            };
            var Lg = function () {
            };
            h["openfl.display3D._internal._AGALConverter.DestRegister"] = Lg;
            Lg.__name__ = "openfl.display3D._internal._AGALConverter.DestRegister";
            Lg.parse = function (a, b) {
                var c = new Lg;
                c.programType = b;
                c.type = a >>> 24 & 15;
                c.mask = a >>> 16 & 15;
                c.n = a & 65535;
                return c
            };
            Lg.prototype = {
                getWriteMask: function () {
                    var a = ".";
                    0 != (this.mask & 1) && (a += "x");
                    0 != (this.mask & 2) && (a += "y");
                    0 != (this.mask & 4) && (a += "z");
                    0 != (this.mask & 8) && (a += "w");
                    return a
                },
                toGLSL: function (a) {
                    null == a && (a = !0);
                    var b = 3 == this.type ? this.programType == He.VERTEX ? "gl_Position" : "gl_FragColor" : ld.prefixFromType(this.type, this.programType) + this.n;
                    a && 15 != this.mask && (b += this.getWriteMask());
                    return b
                },
                __class__: Lg
            };
            var He = N["openfl.display3D._internal._AGALConverter.ProgramType"] = {
                __ename__: "openfl.display3D._internal._AGALConverter.ProgramType",
                __constructs__: null,
                VERTEX: {
                    _hx_name: "VERTEX",
                    _hx_index: 0,
                    __enum__: "openfl.display3D._internal._AGALConverter.ProgramType",
                    toString: u
                },
                FRAGMENT: {
                    _hx_name: "FRAGMENT",
                    _hx_index: 1,
                    __enum__: "openfl.display3D._internal._AGALConverter.ProgramType",
                    toString: u
                }
            };
            He.__constructs__ = [He.VERTEX, He.FRAGMENT];
            var dk = function () {
                this.mEntries = []
            };
            h["openfl.display3D._internal.RegisterMap"] = dk;
            dk.__name__ = "openfl.display3D._internal.RegisterMap";
            dk.prototype = {
                add: function (a, b, c, d) {
                    for (var g = 0, f = this.mEntries; g < f.length;) {
                        var k =
                            f[g];
                        ++g;
                        if (k.type == a && k.name == b && k.number == c) {
                            if (k.usage != d) throw new tc("Cannot use register in multiple ways yet (mat4/vec4)");
                            return
                        }
                    }
                    k = new El;
                    k.type = a;
                    k.name = b;
                    k.number = c;
                    k.usage = d;
                    this.mEntries.push(k)
                },
                addDR: function (a, b) {
                    this.add(a.type, a.toGLSL(!1), a.n, b)
                },
                addSaR: function (a, b) {
                    this.add(a.type, a.toGLSL(), a.n, b)
                },
                addSR: function (a, b, c) {
                    null == c && (c = 0);
                    0 != a.d ? (this.add(a.itype, ld.prefixFromType(a.itype, a.programType) + a.n, a.n, ka.VECTOR_4), this.add(a.type, ld.prefixFromType(a.type, a.programType) +
                        a.o, a.o, ka.VECTOR_4_ARRAY)) : this.add(a.type, a.toGLSL(!1, c), a.n + c, b)
                },
                getRegisterUsage: function (a) {
                    return 0 != a.d ? ka.VECTOR_4_ARRAY : this.getUsage(a.type, a.toGLSL(!1), a.n)
                },
                getUsage: function (a, b, c) {
                    for (var d = 0, g = this.mEntries; d < g.length;) {
                        var f = g[d];
                        ++d;
                        if (f.type == a && f.name == b && f.number == c) return f.usage
                    }
                    return ka.UNUSED
                },
                toGLSL: function (a) {
                    this.mEntries.sort(function (a, b) {
                        return a.number - b.number
                    });
                    this.mEntries.sort(function (a, b) {
                        return Ua.__cast(a.type, om) - Ua.__cast(b.type, om)
                    });
                    for (var b = "", c = 0,
                             d = this.mEntries.length; c < d;) {
                        var g = c++;
                        g = this.mEntries[g];
                        if (!(a && 2 != g.type || !a && 2 == g.type) && 3 != g.type) {
                            switch (g.type) {
                                case 0:
                                    b += "attribute ";
                                    break;
                                case 1:
                                    b += "uniform ";
                                    break;
                                case 2:
                                    b += "\t";
                                    break;
                                case 3:
                                    break;
                                case 4:
                                    b += "varying ";
                                    break;
                                case 5:
                                    b += "uniform ";
                                    break;
                                default:
                                    throw new tc;
                            }
                            switch (g.usage._hx_index) {
                                case 0:
                                    Wa.info("Missing switch patten: RegisterUsage.UNUSED", {

                                        className: "openfl.display3D._internal.RegisterMap",
                                        methodName: "toGLSL"
                                    });
                                    break;
                                case 1:
                                    b += "vec4 ";
                                    break;
                                case 2:
                                    b += "mat4 ";
                                    break;
                                case 3:
                                    b += "sampler2D ";
                                    break;
                                case 5:
                                    b += "samplerCube ";
                                    break;
                                case 7:
                                    b += "vec4 "
                            }
                            g.usage == ka.SAMPLER_2D_ALPHA ? (b += "sampler2D ", b += E.string(g.name), b += ";\n", b += "uniform ", b += "sampler2D ", b += E.string(g.name + "_alpha"), b += ";\n", b += "uniform ", b += "bool ", b += E.string(g.name + "_alphaEnabled")) : g.usage == ka.SAMPLER_CUBE_ALPHA ? (b += "samplerCube ", b += E.string(g.name), b += ";\n", b += "uniform ", b += "samplerCube ", b += E.string(g.name + "_alpha"), b += ";\n", b += "uniform ", b +=
                                "bool ", b += E.string(g.name + "_alphaEnabled")) : b = g.usage == ka.VECTOR_4_ARRAY ? b + E.string(g.name + "[128]") : b + E.string(g.name);
                            b += ";\n"
                        }
                    }
                    return b
                },
                __class__: dk
            };
            var El = function () {
            };
            h["openfl.display3D._internal._AGALConverter.RegisterMapEntry"] = El;
            El.__name__ = "openfl.display3D._internal._AGALConverter.RegisterMapEntry";
            El.prototype = {
                __class__: El
            };
            var ka = N["openfl.display3D._internal._AGALConverter.RegisterUsage"] = {
                __ename__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                __constructs__: null,
                UNUSED: {
                    _hx_name: "UNUSED",
                    _hx_index: 0,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: u
                },
                VECTOR_4: {
                    _hx_name: "VECTOR_4",
                    _hx_index: 1,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: u
                },
                MATRIX_4_4: {
                    _hx_name: "MATRIX_4_4",
                    _hx_index: 2,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: u
                },
                SAMPLER_2D: {
                    _hx_name: "SAMPLER_2D",
                    _hx_index: 3,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: u
                },
                SAMPLER_2D_ALPHA: {
                    _hx_name: "SAMPLER_2D_ALPHA",
                    _hx_index: 4,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: u
                },
                SAMPLER_CUBE: {
                    _hx_name: "SAMPLER_CUBE",
                    _hx_index: 5,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: u
                },
                SAMPLER_CUBE_ALPHA: {
                    _hx_name: "SAMPLER_CUBE_ALPHA",
                    _hx_index: 6,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: u
                },
                VECTOR_4_ARRAY: {
                    _hx_name: "VECTOR_4_ARRAY",
                    _hx_index: 7,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: u
                }
            };
            ka.__constructs__ = [ka.UNUSED, ka.VECTOR_4, ka.MATRIX_4_4, ka.SAMPLER_2D, ka.SAMPLER_2D_ALPHA, ka.SAMPLER_CUBE, ka.SAMPLER_CUBE_ALPHA, ka.VECTOR_4_ARRAY];
            var Mg = function () {
            };
            h["openfl.display3D._internal._AGALConverter.SamplerRegister"] = Mg;
            Mg.__name__ = "openfl.display3D._internal._AGALConverter.SamplerRegister";
            Mg.parse = function (a, b) {
                var c = new Mg;
                c.programType = b;
                b = 60;
                b = 0 == b ? new lb(a.high, a.low) : 32 > b ? new lb(a.high >> b, a.high << 32 - b | a.low >>> b) : new lb(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                c.f = b;
                b = 56;
                b = 0 == b ? new lb(a.high, a.low) : 32 >
                b ? new lb(a.high >> b, a.high << 32 - b | a.low >>> b) : new lb(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                c.m = b;
                b = 52;
                b = 0 == b ? new lb(a.high, a.low) : 32 > b ? new lb(a.high >> b, a.high << 32 - b | a.low >>> b) : new lb(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                c.w = b;
                b = 48;
                b = 0 == b ? new lb(a.high, a.low) : 32 > b ? new lb(a.high >> b, a.high << 32 - b | a.low >>> b) : new lb(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                c.s = b;
                b = 44;
                b = 0 == b ? new lb(a.high, a.low) : 32 > b ? new lb(a.high >> b, a.high << 32 - b | a.low >>> b) : new lb(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                c.d = b;
                b = 40;
                b = 0 == b ? new lb(a.high,
                    a.low) : 32 > b ? new lb(a.high >> b, a.high << 32 - b | a.low >>> b) : new lb(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                c.t = b;
                b = 32;
                b = 0 == b ? new lb(a.high, a.low) : 32 > b ? new lb(a.high >> b, a.high << 32 - b | a.low >>> b) : new lb(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                c.type = b;
                b = 16;
                b = 0 == b ? new lb(a.high, a.low) : 32 > b ? new lb(a.high >> b, a.high << 32 - b | a.low >>> b) : new lb(a.high >> 31, a.high >> b - 32);
                b = b.low & 255;
                c.b = b;
                b = a.low & 65535;
                c.n = b;
                return c
            };
            Mg.prototype = {
                toGLSL: function () {
                    return ld.prefixFromType(this.type, this.programType) + this.n
                },
                toSamplerState: function () {
                    switch (this.f) {
                        case 0:
                            var a =
                                5;
                            break;
                        case 1:
                            a = 4;
                            break;
                        default:
                            throw new tc;
                    }
                    switch (this.m) {
                        case 0:
                            var b = 2;
                            break;
                        case 1:
                            b = 1;
                            break;
                        case 2:
                            b = 0;
                            break;
                        default:
                            throw new tc;
                    }
                    switch (this.w) {
                        case 0:
                            var c = 0;
                            break;
                        case 1:
                            c = 2;
                            break;
                        default:
                            throw new tc;
                    }
                    return new cg(c, a, b, (this.b << 24 >> 24) / 8, 4 == (this.s & 4), 1 == (this.s & 1), 2 == this.t)
                },
                __class__: Mg
            };
            var dg = function () {
            };
            h["openfl.display3D._internal._AGALConverter.SourceRegister"] = dg;
            dg.__name__ = "openfl.display3D._internal._AGALConverter.SourceRegister";
            dg.parse = function (a, b, c) {
                var d = new dg;
                d.programType = b;
                b = 63;
                b = 0 == b ? new lb(a.high, a.low) : 32 > b ? new lb(a.high >> b, a.high << 32 - b | a.low >>> b) : new lb(a.high >> 31, a.high >> b - 32);
                b = b.low & 1;
                d.d = b;
                b = 48;
                b = 0 == b ? new lb(a.high, a.low) : 32 > b ? new lb(a.high >> b, a.high << 32 - b | a.low >>> b) : new lb(a.high >> 31, a.high >> b - 32);
                b = b.low & 3;
                d.q = b;
                b = 40;
                b = 0 == b ? new lb(a.high, a.low) : 32 > b ? new lb(a.high >> b, a.high << 32 - b | a.low >>> b) : new lb(a.high >> 31, a.high >> b - 32);
                b = b.low & 15;
                d.itype = b;
                b = 32;
                b = 0 == b ? new lb(a.high, a.low) : 32 > b ? new lb(a.high >> b, a.high << 32 - b | a.low >>> b) : new lb(a.high >> 31, a.high >>
                    b - 32);
                b = b.low & 15;
                d.type = b;
                b = 24;
                b = 0 == b ? new lb(a.high, a.low) : 32 > b ? new lb(a.high >> b, a.high << 32 - b | a.low >>> b) : new lb(a.high >> 31, a.high >> b - 32);
                b = b.low & 255;
                d.s = b;
                b = 16;
                b = 0 == b ? new lb(a.high, a.low) : 32 > b ? new lb(a.high >> b, a.high << 32 - b | a.low >>> b) : new lb(a.high >> 31, a.high >> b - 32);
                b = b.low & 255;
                d.o = b;
                b = a.low & 65535;
                d.n = b;
                d.sourceMask = c;
                return d
            };
            dg.prototype = {
                toGLSL: function (a, b) {
                    null == b && (b = 0);
                    null == a && (a = !0);
                    if (3 == this.type) return this.programType == He.VERTEX ? "gl_Position" : "gl_FragColor";
                    var c = 228 == this.s && 15 == this.sourceMask,
                        d = "";
                    if (5 != this.type && !c) {
                        if (0 != (this.sourceMask & 1)) switch (this.s & 3) {
                            case 0:
                                d += "x";
                                break;
                            case 1:
                                d += "y";
                                break;
                            case 2:
                                d += "z";
                                break;
                            case 3:
                                d += "w"
                        }
                        if (0 != (this.sourceMask & 2)) switch (this.s >> 2 & 3) {
                            case 0:
                                d += "x";
                                break;
                            case 1:
                                d += "y";
                                break;
                            case 2:
                                d += "z";
                                break;
                            case 3:
                                d += "w"
                        }
                        if (0 != (this.sourceMask & 4)) switch (this.s >> 4 & 3) {
                            case 0:
                                d += "x";
                                break;
                            case 1:
                                d += "y";
                                break;
                            case 2:
                                d += "z";
                                break;
                            case 3:
                                d += "w"
                        }
                        if (0 != (this.sourceMask & 8)) switch (this.s >> 6 & 3) {
                            case 0:
                                d += "x";
                                break;
                            case 1:
                                d += "y";
                                break;
                            case 2:
                                d += "z";
                                break;
                            case 3:
                                d += "w"
                        }
                    }
                    c =
                        ld.prefixFromType(this.type, this.programType);
                    if (0 == this.d) c += this.n + b;
                    else {
                        c += this.o;
                        var g = "";
                        switch (this.q) {
                            case 0:
                                g = "x";
                                break;
                            case 1:
                                g = "y";
                                break;
                            case 2:
                                g = "z";
                                break;
                            case 3:
                                g = "w"
                        }
                        g = ld.prefixFromType(this.itype, this.programType) + this.n + "." + g;
                        c += "[ int(" + g + ") +" + b + "]"
                    }
                    a && "" != d && (c += "." + d);
                    return c
                },
                __class__: dg
            };
            var yh = function () {
                this.backBufferEnableDepthAndStencil = !1;
                this.blendDestinationAlphaFactor = 9;
                this.blendSourceAlphaFactor = 2;
                this.blendDestinationRGBFactor = 9;
                this.blendSourceRGBFactor = 2;
                this.colorMaskAlpha =
                    this.colorMaskBlue = this.colorMaskGreen = this.colorMaskRed = !0;
                this.culling = 3;
                this.depthCompareMode = 4;
                this.depthMask = !0;
                this.samplerStates = [];
                this.scissorRectangle = new sa;
                this.stencilCompareMode = 0;
                this.stencilPass = this.stencilFail = this.stencilDepthFail = 5;
                this.stencilReadMask = 255;
                this.stencilReferenceValue = 0;
                this.stencilTriangleFace = 2;
                this.stencilWriteMask = 255;
                this.textures = [];
                this.__frontFaceGLCCW = !0;
                this.__glBlendEquation = 32774
            };
            h["openfl.display3D._internal.Context3DState"] = yh;
            yh.__name__ = "openfl.display3D._internal.Context3DState";
            yh.prototype = {
                __class__: yh
            };
            var Eb = function (a) {
                oa.call(this);
                this.__context = a;
                var b = this.__context.gl;
                this.__textureID = b.createTexture();
                this.__textureContext = this.__context.__context;
                if (null == Eb.__supportsBGRA) {
                    Eb.__textureInternalFormat = b.RGBA;
                    Eb.__supportsBGRA = !1;
                    Eb.__textureFormat = b.RGBA;
                    Eb.__compressedFormats = new Ec;
                    Eb.__compressedFormatsAlpha = new Ec;
                    a = b.getExtension("WEBGL_compressed_texture_s3tc");
                    var c = b.getExtension("WEBGL_compressed_texture_etc1");
                    b = b.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                    if (null != a) {
                        var d = a.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                        Eb.__compressedFormats.h[0] = d;
                        d = a.COMPRESSED_RGBA_S3TC_DXT5_EXT;
                        Eb.__compressedFormatsAlpha.h[0] = d
                    }
                    null != c && (d = c.COMPRESSED_RGB_ETC1_WEBGL, Eb.__compressedFormats.h[2] = d, d = c.COMPRESSED_RGB_ETC1_WEBGL, Eb.__compressedFormatsAlpha.h[2] = d);
                    null != b && (d = b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG, Eb.__compressedFormats.h[1] = d, d = b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG, Eb.__compressedFormatsAlpha.h[1] = d)
                }
                this.__internalFormat = Eb.__textureInternalFormat;
                this.__format = Eb.__textureFormat
            };
            h["openfl.display3D.textures.TextureBase"] = Eb;
            Eb.__name__ = "openfl.display3D.textures.TextureBase";
            Eb.__compressedFormats = null;
            Eb.__compressedFormatsAlpha = null;
            Eb.__textureFormat = null;
            Eb.__textureInternalFormat = null;
            Eb.__super__ = oa;
            Eb.prototype = w(oa.prototype, {
                dispose: function () {
                    var a = this.__context.gl;
                    null != this.__alphaTexture && (this.__alphaTexture.dispose(), this.__alphaTexture = null);
                    null != this.__textureID && (a.deleteTexture(this.__textureID), this.__textureID = null);
                    null != this.__glFramebuffer && (a.deleteFramebuffer(this.__glFramebuffer),
                        this.__glFramebuffer = null);
                    null != this.__glDepthRenderbuffer && (a.deleteRenderbuffer(this.__glDepthRenderbuffer), this.__glDepthRenderbuffer = null);
                    null != this.__glStencilRenderbuffer && (a.deleteRenderbuffer(this.__glStencilRenderbuffer), this.__glStencilRenderbuffer = null)
                },
                __getGLFramebuffer: function (a, b, c) {
                    b = this.__context.gl;
                    null == this.__glFramebuffer && (this.__glFramebuffer = b.createFramebuffer(), this.__context.__bindGLFramebuffer(this.__glFramebuffer), b.framebufferTexture2D(b.FRAMEBUFFER, b.COLOR_ATTACHMENT0,
                        b.TEXTURE_2D, this.__textureID, 0), this.__context.__enableErrorChecking && (c = b.checkFramebufferStatus(b.FRAMEBUFFER), c != b.FRAMEBUFFER_COMPLETE && Wa.warn("Error: Context3D.setRenderToTexture status:" + c + " width:" + this.__width + " height:" + this.__height, {

                        className: "openfl.display3D.textures.TextureBase",
                        methodName: "__getGLFramebuffer"
                    })));
                    a && null == this.__glDepthRenderbuffer && (this.__context.__bindGLFramebuffer(this.__glFramebuffer), 0 != Ab.__glDepthStencil ?
                        (this.__glStencilRenderbuffer = this.__glDepthRenderbuffer = b.createRenderbuffer(), b.bindRenderbuffer(b.RENDERBUFFER, this.__glDepthRenderbuffer), b.renderbufferStorage(b.RENDERBUFFER, Ab.__glDepthStencil, this.__width, this.__height), b.framebufferRenderbuffer(b.FRAMEBUFFER, b.DEPTH_STENCIL_ATTACHMENT, b.RENDERBUFFER, this.__glDepthRenderbuffer)) : (this.__glDepthRenderbuffer = b.createRenderbuffer(), this.__glStencilRenderbuffer = b.createRenderbuffer(), b.bindRenderbuffer(b.RENDERBUFFER, this.__glDepthRenderbuffer),
                            b.renderbufferStorage(b.RENDERBUFFER, b.DEPTH_COMPONENT16, this.__width, this.__height), b.bindRenderbuffer(b.RENDERBUFFER, this.__glStencilRenderbuffer), b.renderbufferStorage(b.RENDERBUFFER, b.STENCIL_INDEX8, this.__width, this.__height), b.framebufferRenderbuffer(b.FRAMEBUFFER, b.DEPTH_ATTACHMENT, b.RENDERBUFFER, this.__glDepthRenderbuffer), b.framebufferRenderbuffer(b.FRAMEBUFFER, b.STENCIL_ATTACHMENT, b.RENDERBUFFER, this.__glStencilRenderbuffer)), this.__context.__enableErrorChecking && (c = b.checkFramebufferStatus(b.FRAMEBUFFER),
                    c != b.FRAMEBUFFER_COMPLETE && Wa.warn("Error: Context3D.setRenderToTexture status:" + c + " width:" + this.__width + " height:" + this.__height, {

                        className: "openfl.display3D.textures.TextureBase",
                        methodName: "__getGLFramebuffer"
                    })), b.bindRenderbuffer(b.RENDERBUFFER, null));
                    return this.__glFramebuffer
                },
                __getTexture: function () {
                    return this.__textureID
                },
                __setSamplerState: function (a) {
                    if (!a.equals(this.__samplerState)) {
                        var b = this.__context.gl;
                        this.__textureTarget ==
                        this.__context.gl.TEXTURE_CUBE_MAP ? this.__context.__bindGLTextureCubeMap(this.__textureID) : this.__context.__bindGLTexture2D(this.__textureID);
                        var c;
                        switch (a.wrap) {
                            case 0:
                                var d = c = b.CLAMP_TO_EDGE;
                                break;
                            case 1:
                                c = b.CLAMP_TO_EDGE;
                                d = b.REPEAT;
                                break;
                            case 2:
                                d = c = b.REPEAT;
                                break;
                            case 3:
                                c = b.REPEAT;
                                d = b.CLAMP_TO_EDGE;
                                break;
                            default:
                                throw new $b("wrap bad enum");
                        }
                        var g = 5 == a.filter ? b.NEAREST : b.LINEAR;
                        switch (a.mipfilter) {
                            case 0:
                                var f = 5 == a.filter ? b.NEAREST_MIPMAP_LINEAR : b.LINEAR_MIPMAP_LINEAR;
                                break;
                            case 1:
                                f = 5 == a.filter ?
                                    b.NEAREST_MIPMAP_NEAREST : b.LINEAR_MIPMAP_NEAREST;
                                break;
                            case 2:
                                f = 5 == a.filter ? b.NEAREST : b.LINEAR;
                                break;
                            default:
                                throw new $b("mipfiter bad enum");
                        }
                        b.texParameteri(this.__textureTarget, b.TEXTURE_MIN_FILTER, f);
                        b.texParameteri(this.__textureTarget, b.TEXTURE_MAG_FILTER, g);
                        b.texParameteri(this.__textureTarget, b.TEXTURE_WRAP_S, c);
                        b.texParameteri(this.__textureTarget, b.TEXTURE_WRAP_T, d);
                        null == this.__samplerState && (this.__samplerState = a.clone());
                        this.__samplerState.copyFrom(a);
                        return !0
                    }
                    return !1
                },
                __uploadFromImage: function (a) {
                    var b =
                            this.__context.gl,
                        c;
                    if (this.__textureTarget == b.TEXTURE_2D) {
                        if (1 == a.buffer.bitsPerPixel) var d = c = b.ALPHA;
                        else c = Eb.__textureInternalFormat, d = Eb.__textureFormat;
                        this.__context.__bindGLTexture2D(this.__textureID);
                        a.type == ed.DATA || a.get_premultiplied() ? !a.get_premultiplied() && a.get_transparent() && b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1) : b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);
                        a.type == ed.DATA ? Tc.texImage2D(b, b.TEXTURE_2D, 0, c, a.buffer.width, a.buffer.height, 0, d, b.UNSIGNED_BYTE, a.get_data()) :
                            Tc.texImage2D(b, b.TEXTURE_2D, 0, c, d, b.UNSIGNED_BYTE, a.get_src());
                        this.__context.__bindGLTexture2D(null)
                    }
                },
                __class__: Eb
            });
            var bk = function (a, b, c, d, g) {
                Eb.call(this, a);
                this.__width = this.__height = this.__size = b;
                this.__optimizeForRenderToTexture = d;
                this.__streamingLevels = g;
                this.__textureTarget = this.__context.gl.TEXTURE_CUBE_MAP;
                this.__uploadedSides = 0
            };
            h["openfl.display3D.textures.CubeTexture"] = bk;
            bk.__name__ = "openfl.display3D.textures.CubeTexture";
            bk.__super__ = Eb;
            bk.prototype = w(Eb.prototype, {
                __getGLFramebuffer: function (a,
                                              b, c) {
                    var d = this.__context.gl;
                    null == this.__glFramebuffer && (this.__glFramebuffer = d.createFramebuffer(), this.__framebufferSurface = -1);
                    if (this.__framebufferSurface != c && (this.__framebufferSurface = c, this.__context.__bindGLFramebuffer(this.__glFramebuffer), d.framebufferTexture2D(d.FRAMEBUFFER, d.COLOR_ATTACHMENT0, d.TEXTURE_CUBE_MAP_POSITIVE_X + c, this.__textureID, 0), this.__context.__enableErrorChecking)) {
                        var g = d.checkFramebufferStatus(d.FRAMEBUFFER);
                        g != d.FRAMEBUFFER_COMPLETE && Wa.error("Error: Context3D.setRenderToTexture status:" +
                            g + " width:" + this.__width + " height:" + this.__height, {

                            className: "openfl.display3D.textures.CubeTexture",
                            methodName: "__getGLFramebuffer"
                        })
                    }
                    return Eb.prototype.__getGLFramebuffer.call(this, a, b, c)
                },
                __setSamplerState: function (a) {
                    if (Eb.prototype.__setSamplerState.call(this, a)) {
                        var b = this.__context.gl;
                        2 == a.mipfilter || this.__samplerState.mipmapGenerated || (b.generateMipmap(b.TEXTURE_CUBE_MAP), this.__samplerState.mipmapGenerated = !0);
                        if (0 != Ab.__glMaxTextureMaxAnisotropy) {
                            switch (a.filter) {
                                case 0:
                                    a =
                                        16;
                                    break;
                                case 1:
                                    a = 2;
                                    break;
                                case 2:
                                    a = 4;
                                    break;
                                case 3:
                                    a = 8;
                                    break;
                                default:
                                    a = 1
                            }
                            a > Ab.__glMaxTextureMaxAnisotropy && (a = Ab.__glMaxTextureMaxAnisotropy);
                            b.texParameterf(b.TEXTURE_CUBE_MAP, Ab.__glTextureMaxAnisotropy, a)
                        }
                        return !0
                    }
                    return !1
                },
                __class__: bk
            });
            var zh = function (a, b, c, d, g) {
                Eb.call(this, a);
                this.__width = b;
                this.__height = c;
                this.__optimizeForRenderToTexture = g;
                this.__textureTarget = this.__context.gl.TEXTURE_2D;
                this.uploadFromTypedArray(null);
                g && this.__getGLFramebuffer(!0, 0, 0)
            };
            h["openfl.display3D.textures.RectangleTexture"] =
                zh;
            zh.__name__ = "openfl.display3D.textures.RectangleTexture";
            zh.__super__ = Eb;
            zh.prototype = w(Eb.prototype, {
                uploadFromTypedArray: function (a) {
                    var b = this.__context.gl;
                    this.__context.__bindGLTexture2D(this.__textureID);
                    Tc.texImage2D(b, this.__textureTarget, 0, this.__internalFormat, this.__width, this.__height, 0, this.__format, b.UNSIGNED_BYTE, a);
                    this.__context.__bindGLTexture2D(null)
                },
                __setSamplerState: function (a) {
                    if (Eb.prototype.__setSamplerState.call(this, a)) {
                        var b = this.__context.gl;
                        if (0 != Ab.__glMaxTextureMaxAnisotropy) {
                            switch (a.filter) {
                                case 0:
                                    a =
                                        16;
                                    break;
                                case 1:
                                    a = 2;
                                    break;
                                case 2:
                                    a = 4;
                                    break;
                                case 3:
                                    a = 8;
                                    break;
                                default:
                                    a = 1
                            }
                            a > Ab.__glMaxTextureMaxAnisotropy && (a = Ab.__glMaxTextureMaxAnisotropy);
                            b.texParameterf(b.TEXTURE_2D, Ab.__glTextureMaxAnisotropy, a)
                        }
                        return !0
                    }
                    return !1
                },
                __class__: zh
            });
            var ak = function (a, b, c, d, g, f) {
                Eb.call(this, a);
                this.__width = b;
                this.__height = c;
                this.__optimizeForRenderToTexture = g;
                this.__streamingLevels = f;
                a = this.__context.gl;
                this.__textureTarget = a.TEXTURE_2D;
                this.__context.__bindGLTexture2D(this.__textureID);
                Tc.texImage2D(a, this.__textureTarget,
                    0, this.__internalFormat, this.__width, this.__height, 0, this.__format, a.UNSIGNED_BYTE, null);
                this.__context.__bindGLTexture2D(null);
                g && this.__getGLFramebuffer(!0, 0, 0)
            };
            h["openfl.display3D.textures.Texture"] = ak;
            ak.__name__ = "openfl.display3D.textures.Texture";
            ak.__super__ = Eb;
            ak.prototype = w(Eb.prototype, {
                __setSamplerState: function (a) {
                    if (Eb.prototype.__setSamplerState.call(this, a)) {
                        var b = this.__context.gl;
                        2 == a.mipfilter || this.__samplerState.mipmapGenerated || (b.generateMipmap(b.TEXTURE_2D), this.__samplerState.mipmapGenerated = !0);
                        if (0 != Ab.__glMaxTextureMaxAnisotropy) {
                            switch (a.filter) {
                                case 0:
                                    a = 16;
                                    break;
                                case 1:
                                    a = 2;
                                    break;
                                case 2:
                                    a = 4;
                                    break;
                                case 3:
                                    a = 8;
                                    break;
                                default:
                                    a = 1
                            }
                            a > Ab.__glMaxTextureMaxAnisotropy && (a = Ab.__glMaxTextureMaxAnisotropy);
                            b.texParameterf(b.TEXTURE_2D, Ab.__glTextureMaxAnisotropy, a)
                        }
                        return !0
                    }
                    return !1
                },
                __class__: ak
            });
            var Fl = function (a) {
                Eb.call(this, a);
                this.__textureTarget = this.__context.gl.TEXTURE_2D
            };
            h["openfl.display3D.textures.VideoTexture"] = Fl;
            Fl.__name__ = "openfl.display3D.textures.VideoTexture";
            Fl.__super__ =
                Eb;
            Fl.prototype = w(Eb.prototype, {
                dispose: function () {
                    null != this.__netStream && null != this.__netStream.__video && this.__netStream.__video.removeEventListener("timeupdate", m(this, this.__onTimeUpdate));
                    Eb.prototype.dispose.call(this)
                },
                __onTimeUpdate: function (a) {
                    null != this.__netStream && this.__netStream.__video.currentTime != this.__cacheTime && 2 <= this.__netStream.__video.readyState && this.__textureReady()
                },
                __getTexture: function () {
                    if (this.__netStream.__video.currentTime != this.__cacheTime && 2 <= this.__netStream.__video.readyState) {
                        var a =
                            this.__context.gl;
                        this.__context.__bindGLTexture2D(this.__textureID);
                        Tc.texImage2D(a, a.TEXTURE_2D, 0, a.RGBA, a.RGBA, a.UNSIGNED_BYTE, this.__netStream.__video);
                        this.__cacheTime = this.__netStream.__video.currentTime
                    }
                    return this.__textureID
                },
                __textureReady: function () {
                    this.videoWidth = this.__netStream.__video.videoWidth;
                    this.videoHeight = this.__netStream.__video.videoHeight;
                    var a = new ua("textureReady");
                    this.dispatchEvent(a)
                },
                __class__: Fl
            });
            var $b = function (a, b) {
                null == b && (b = 0);
                null == a && (a = "");
                aa.call(this, a);
                this.errorID = b;
                this.name = "Error";
                this.__skipStack++
            };
            h["openfl.errors.Error"] = $b;
            $b.__name__ = "openfl.errors.Error";
            $b.__super__ = aa;
            $b.prototype = w(aa.prototype, {
                toString: function () {
                    return null != this.get_message() ? this.get_message() : "Error"
                },
                __class__: $b
            });
            var Af = function (a) {
                null == a && (a = "");
                $b.call(this, a);
                this.name = "ArgumentError";
                this.__skipStack++
            };
            h["openfl.errors.ArgumentError"] = Af;
            Af.__name__ = "openfl.errors.ArgumentError";
            Af.__super__ = $b;
            Af.prototype = w($b.prototype, {
                __class__: Af
            });
            var Ng = function (a) {
                null ==
                a && (a = "");
                $b.call(this, a);
                this.name = "IOError";
                this.__skipStack++
            };
            h["openfl.errors.IOError"] = Ng;
            Ng.__name__ = "openfl.errors.IOError";
            Ng.__super__ = $b;
            Ng.prototype = w($b.prototype, {
                __class__: Ng
            });
            var Bh = function (a, b) {
                Ng.call(this, "End of file was encountered");
                this.name = "EOFError";
                this.errorID = 2030;
                this.__skipStack++
            };
            h["openfl.errors.EOFError"] = Bh;
            Bh.__name__ = "openfl.errors.EOFError";
            Bh.__super__ = Ng;
            Bh.prototype = w(Ng.prototype, {
                __class__: Bh
            });
            var tc = function (a) {
                null == a && (a = "");
                $b.call(this, a, 0);
                this.name =
                    "IllegalOperationError";
                this.__skipStack++
            };
            h["openfl.errors.IllegalOperationError"] = tc;
            tc.__name__ = "openfl.errors.IllegalOperationError";
            tc.__super__ = $b;
            tc.prototype = w($b.prototype, {
                __class__: tc
            });
            var Bf = function (a) {
                null == a && (a = "");
                $b.call(this, a, 0);
                this.name = "RangeError";
                this.__skipStack++
            };
            h["openfl.errors.RangeError"] = Bf;
            Bf.__name__ = "openfl.errors.RangeError";
            Bf.__super__ = $b;
            Bf.prototype = w($b.prototype, {
                __class__: Bf
            });
            var zf = function (a) {
                null == a && (a = "");
                $b.call(this, a, 0);
                this.name = "TypeError";
                this.__skipStack++
            };
            h["openfl.errors.TypeError"] = zf;
            zf.__name__ = "openfl.errors.TypeError";
            zf.__super__ = $b;
            zf.prototype = w($b.prototype, {
                __class__: zf
            });
            var ua = function (a, b, c) {
                null == c && (c = !1);
                null == b && (b = !1);
                this.type = a;
                this.bubbles = b;
                this.cancelable = c;
                this.eventPhase = 2
            };
            h["openfl.events.Event"] = ua;
            ua.__name__ = "openfl.events.Event";
            ua.prototype = {
                isDefaultPrevented: function () {
                    return this.__preventDefault
                },
                preventDefault: function () {
                    this.cancelable && (this.__preventDefault = !0)
                },
                stopPropagation: function () {
                    this.__isCanceled = !0
                },
                __class__: ua
            };
            var Og = function (a, b, c, d) {
                null == d && (d = !1);
                null == c && (c = !1);
                null == b && (b = !1);
                ua.call(this, a, b, c);
                this.activating = d
            };
            h["openfl.events.ActivityEvent"] = Og;
            Og.__name__ = "openfl.events.ActivityEvent";
            Og.__super__ = ua;
            Og.prototype = w(ua.prototype, {
                __class__: Og
            });
            var Fe = function (a, b, c, d) {
                null == d && (d = "");
                null == c && (c = !1);
                null == b && (b = !1);
                ua.call(this, a, b, c);
                this.text = d
            };
            h["openfl.events.TextEvent"] = Fe;
            Fe.__name__ = "openfl.events.TextEvent";
            Fe.__super__ = ua;
            Fe.prototype = w(ua.prototype, {
                __class__: Fe
            });
            var Ud = function (a, b, c, d, g) {
                null == g && (g = 0);
                null == d && (d = "");
                null == c && (c = !1);
                null == b && (b = !1);
                Fe.call(this, a, b, c, d);
                this.errorID = g
            };
            h["openfl.events.ErrorEvent"] = Ud;
            Ud.__name__ = "openfl.events.ErrorEvent";
            Ud.__super__ = Fe;
            Ud.prototype = w(Fe.prototype, {
                __class__: Ud
            });
            var Wg = function (a) {
                this.active = !1;
                this.reset(a)
            };
            h["openfl.events._EventDispatcher.DispatchIterator"] = Wg;
            Wg.__name__ = "openfl.events._EventDispatcher.DispatchIterator";
            Wg.prototype = {
                copy: function () {
                    this.isCopy || (this.list = this.list.slice(), this.isCopy = !0)
                },
                hasNext: function () {
                    return this.index < this.list.length
                },
                next: function () {
                    return this.list[this.index++]
                },
                remove: function (a, b) {
                    if (this.active)
                        if (this.isCopy) {
                            b = this.index;
                            for (var c = this.list.length; b < c;) {
                                var d = b++;
                                if (this.list[d] == a) {
                                    this.list.splice(d, 1);
                                    break
                                }
                            }
                        } else b < this.index && this.index--
                },
                reset: function (a) {
                    this.list = a;
                    this.isCopy = !1;
                    this.index = 0
                },
                start: function () {
                    this.active = !0
                },
                stop: function () {
                    this.active = !1
                },
                __class__: Wg
            };
            var yf = function (a, b, c, d) {
                d && yf.supportsWeakReference ? this.weakRefCallback =
                    new WeakRef(a) : this.callback = a;
                this.useCapture = b;
                this.priority = c;
                this.useWeakReference = d
            };
            h["openfl.events._EventDispatcher.Listener"] = yf;
            yf.__name__ = "openfl.events._EventDispatcher.Listener";
            yf.prototype = {
                match: function (a, b) {
                    var c = this.callback;
                    return null != this.weakRefCallback && (c = this.weakRefCallback.deref(), null == c) ? !1 : c == a ? this.useCapture == b : !1
                },
                __class__: yf
            };
            var ag = function (a, b, c, d, g, f) {
                null == f && (f = 0);
                null == g && (g = !1);
                null == c && (c = !1);
                null == b && (b = !1);
                ua.call(this, a, b, c);
                this.keyCode = f;
                this.shiftKey =
                    g;
                this.relatedObject = d
            };
            h["openfl.events.FocusEvent"] = ag;
            ag.__name__ = "openfl.events.FocusEvent";
            ag.__super__ = ua;
            ag.prototype = w(ua.prototype, {
                __class__: ag
            });
            var af = function (a, b, c, d, g) {
                null == g && (g = !1);
                null == d && (d = !1);
                null == c && (c = !1);
                null == b && (b = !1);
                Og.call(this, a, b, c);
                this.fullScreen = d;
                this.interactive = g
            };
            h["openfl.events.FullScreenEvent"] = af;
            af.__name__ = "openfl.events.FullScreenEvent";
            af.__super__ = Og;
            af.prototype = w(Og.prototype, {
                __class__: af
            });
            var Pg = function (a, b, c, d) {
                null == c && (c = !1);
                null == b && (b = !0);
                ua.call(this, a, b, c);
                this.device = d
            };
            h["openfl.events.GameInputEvent"] = Pg;
            Pg.__name__ = "openfl.events.GameInputEvent";
            Pg.__super__ = ua;
            Pg.prototype = w(ua.prototype, {
                __class__: Pg
            });
            var Ch = function (a, b, c, d, g) {
                null == g && (g = !1);
                null == d && (d = 0);
                null == c && (c = !1);
                null == b && (b = !1);
                this.responseHeaders = [];
                this.status = d;
                this.redirected = g;
                ua.call(this, a, b, c)
            };
            h["openfl.events.HTTPStatusEvent"] = Ch;
            Ch.__name__ = "openfl.events.HTTPStatusEvent";
            Ch.__super__ = ua;
            Ch.prototype = w(ua.prototype, {
                __class__: Ch
            });
            var Qg = function (a,
                               b, c, d, g) {
                null == g && (g = 0);
                null == d && (d = "");
                null == c && (c = !1);
                null == b && (b = !0);
                Ud.call(this, a, b, c, d, g)
            };
            h["openfl.events.IOErrorEvent"] = Qg;
            Qg.__name__ = "openfl.events.IOErrorEvent";
            Qg.__super__ = Ud;
            Qg.prototype = w(Ud.prototype, {
                __class__: Qg
            });
            var Tj = function (a, b, c, d, g, f, k, h, l, r, n) {
                null == n && (n = !1);
                null == r && (r = !1);
                null == l && (l = !1);
                null == h && (h = !1);
                null == k && (k = !1);
                null == g && (g = 0);
                null == d && (d = 0);
                null == c && (c = !1);
                null == b && (b = !1);
                ua.call(this, a, b, c);
                this.charCode = d;
                this.keyCode = g;
                this.keyLocation = null != f ? f : 0;
                this.ctrlKey =
                    k;
                this.altKey = h;
                this.shiftKey = l;
                this.controlKey = r;
                this.commandKey = n;
                this.__updateAfterEventFlag = !1
            };
            h["openfl.events.KeyboardEvent"] = Tj;
            Tj.__name__ = "openfl.events.KeyboardEvent";
            Tj.__super__ = ua;
            Tj.prototype = w(ua.prototype, {
                __class__: Tj
            });
            var Ib = function (a, b, c, d, g, f, k, h, l, r, n, t, y, p) {
                null == p && (p = 0);
                null == y && (y = !1);
                null == t && (t = !1);
                null == n && (n = 0);
                null == r && (r = !1);
                null == l && (l = !1);
                null == h && (h = !1);
                null == k && (k = !1);
                null == g && (g = 0);
                null == d && (d = 0);
                null == c && (c = !1);
                null == b && (b = !0);
                ua.call(this, a, b, c);
                this.shiftKey =
                    l;
                this.altKey = h;
                this.ctrlKey = k;
                this.bubbles = b;
                this.relatedObject = f;
                this.delta = n;
                this.localX = d;
                this.localY = g;
                this.buttonDown = r;
                this.commandKey = t;
                this.controlKey = y;
                this.clickCount = p;
                this.isRelatedObjectInaccessible = !1;
                this.stageY = this.stageX = NaN;
                this.__updateAfterEventFlag = !1
            };
            h["openfl.events.MouseEvent"] = Ib;
            Ib.__name__ = "openfl.events.MouseEvent";
            Ib.__altKey = null;
            Ib.__buttonDown = null;
            Ib.__commandKey = null;
            Ib.__controlKey = null;
            Ib.__ctrlKey = null;
            Ib.__shiftKey = null;
            Ib.__create = function (a, b, c, d, g, f, k, h) {
                null ==
                h && (h = 0);
                a = new Ib(a, !0, !1, f.x, f.y, null, Ib.__ctrlKey, Ib.__altKey, Ib.__shiftKey, Ib.__buttonDown, h, Ib.__commandKey, Ib.__controlKey, c);
                a.stageX = d;
                a.stageY = g;
                a.target = k;
                return a
            };
            Ib.__super__ = ua;
            Ib.prototype = w(ua.prototype, {
                updateAfterEvent: function () {
                    this.__updateAfterEventFlag = !0
                },
                __class__: Ib
            });
            var ek = function (a, b, c, d) {
                null == c && (c = !1);
                null == b && (b = !1);
                this.info = d;
                ua.call(this, a, b, c)
            };
            h["openfl.events.NetStatusEvent"] = ek;
            ek.__name__ = "openfl.events.NetStatusEvent";
            ek.__super__ = ua;
            ek.prototype = w(ua.prototype, {
                __class__: ek
            });
            var tf = function (a, b, c, d, g) {
                null == g && (g = 0);
                null == d && (d = 0);
                null == c && (c = !1);
                null == b && (b = !1);
                ua.call(this, a, b, c);
                this.bytesLoaded = d;
                this.bytesTotal = g
            };
            h["openfl.events.ProgressEvent"] = tf;
            tf.__name__ = "openfl.events.ProgressEvent";
            tf.__super__ = ua;
            tf.prototype = w(ua.prototype, {
                __class__: tf
            });
            var Ih = function (a, b, c, d, g, f) {
                null == f && (f = !0);
                null == c && (c = !1);
                null == b && (b = !1);
                ua.call(this, a, b, c);
                this.objectMatrix = d;
                this.objectColorTransform = g;
                this.allowSmoothing = f
            };
            h["openfl.events.RenderEvent"] = Ih;
            Ih.__name__ = "openfl.events.RenderEvent";
            Ih.__super__ = ua;
            Ih.prototype = w(ua.prototype, {
                __class__: Ih
            });
            var fk = function (a, b, c) {
                null == c && (c = !1);
                null == b && (b = !1);
                ua.call(this, a, b, c);
                this.data = new Xc(0);
                this.data.__endian = 1;
                this.position = 0
            };
            h["openfl.events.SampleDataEvent"] = fk;
            fk.__name__ = "openfl.events.SampleDataEvent";
            fk.__super__ = ua;
            fk.prototype = w(ua.prototype, {
                getBufferSize: function () {
                    var a = Ja.toFloat(Pd.get_length(this.data)) / Ja.toFloat(4) / 2 | 0;
                    if (0 < a) {
                        if (0 != a && 0 == (a & a - 1) && 2048 <= a && 8192 >= a) return this.tempBuffer =
                            new Float32Array(2 * a), a;
                        throw new $b("To be consistent with flash the listener function registered to SampleDataEvent has to provide 2048, 4096 or 8192 samples if targeting HTML5.");
                    }
                    return 0
                },
                getSamples: function (a) {
                    this.data.position = 0;
                    this.tempBuffer = ym.fromBytes(Pd.toBytes(this.data));
                    this.leftChannel = a.outputBuffer.getChannelData(0);
                    this.rightChannel = a.outputBuffer.getChannelData(1);
                    for (var b = a = 0, c = Ja.toFloat(Pd.get_length(this.data)) / Ja.toFloat(2) | 0; b < c;) {
                        var d = b++;
                        this.leftChannel[d] = this.tempBuffer[a++];
                        this.rightChannel[d] = this.tempBuffer[a++]
                    }
                },
                __class__: fk
            });
            var gk = function (a, b, c, d, g) {
                null == g && (g = 0);
                null == d && (d = "");
                null == c && (c = !1);
                null == b && (b = !1);
                Ud.call(this, a, b, c, d, g)
            };
            h["openfl.events.SecurityErrorEvent"] = gk;
            gk.__name__ = "openfl.events.SecurityErrorEvent";
            gk.__super__ = Ud;
            gk.prototype = w(Ud.prototype, {
                __class__: gk
            });
            var Uj = function (a, b, c, d, g) {
                null == g && (g = 3);
                null == d && (d = 3);
                null == c && (c = !1);
                null == b && (b = !1);
                ua.call(this, a, b, c);
                this.beforeOrientation = d;
                this.afterOrientation = g
            };
            h["openfl.events.StageOrientationEvent"] =
                Uj;
            Uj.__name__ = "openfl.events.StageOrientationEvent";
            Uj.__super__ = ua;
            Uj.prototype = w(ua.prototype, {
                __class__: Uj
            });
            var Rg = function (a, b, c) {
                null == c && (c = !1);
                null == b && (b = !1);
                ua.call(this, a, b, c);
                this.__updateAfterEventFlag = !1
            };
            h["openfl.events.TimerEvent"] = Rg;
            Rg.__name__ = "openfl.events.TimerEvent";
            Rg.__super__ = ua;
            Rg.prototype = w(ua.prototype, {
                updateAfterEvent: function () {
                    this.__updateAfterEventFlag = !0
                },
                __class__: Rg
            });
            var Wd = function (a, b, c, d, g, f, k, h, l, r, n, t, y, p, u, z, x, A, Q, m) {
                null == z && (z = !1);
                null == u && (u = !1);
                null == p && (p = !1);
                null == y && (y = !1);
                null == t && (t = !1);
                null == r && (r = 0);
                null == l && (l = 0);
                null == h && (h = 0);
                null == k && (k = 0);
                null == f && (f = 0);
                null == g && (g = !1);
                null == d && (d = 0);
                null == c && (c = !1);
                null == b && (b = !0);
                ua.call(this, a, b, c);
                this.touchPointID = d;
                this.isPrimaryTouchPoint = g;
                this.localX = f;
                this.localY = k;
                this.sizeX = h;
                this.sizeY = l;
                this.pressure = r;
                this.relatedObject = n;
                this.ctrlKey = t;
                this.altKey = y;
                this.shiftKey = p;
                this.commandKey = u;
                this.controlKey = z;
                this.stageY = this.stageX = NaN;
                this.__updateAfterEventFlag = !1
            };
            h["openfl.events.TouchEvent"] =
                Wd;
            Wd.__name__ = "openfl.events.TouchEvent";
            Wd.__create = function (a, b, c, d, g, f) {
                a = new Wd(a, !0, !1, 0, !0, g.x, g.y, 1, 1, 1);
                a.stageX = c;
                a.stageY = d;
                a.target = f;
                return a
            };
            Wd.__super__ = ua;
            Wd.prototype = w(ua.prototype, {
                __class__: Wd
            });
            var fg = function (a, b, c, d) {
                null == c && (c = !0);
                null == b && (b = !0);
                Ud.call(this, a, b, c);
                this.error = d
            };
            h["openfl.events.UncaughtErrorEvent"] = fg;
            fg.__name__ = "openfl.events.UncaughtErrorEvent";
            fg.__super__ = Ud;
            fg.prototype = w(Ud.prototype, {
                __class__: fg
            });
            var Pj = function () {
                this.__enabled = !0;
                oa.call(this)
            };
            h["openfl.events.UncaughtErrorEvents"] = Pj;
            Pj.__name__ = "openfl.events.UncaughtErrorEvents";
            Pj.__super__ = oa;
            Pj.prototype = w(oa.prototype, {
                addEventListener: function (a, b, c, d, g) {
                    null == g && (g = !1);
                    null == d && (d = 0);
                    null == c && (c = !1);
                    oa.prototype.addEventListener.call(this, a, b, c, d, g);
                    Object.prototype.hasOwnProperty.call(this.__eventMap.h, "uncaughtError") && (this.__enabled = !0)
                },
                removeEventListener: function (a, b, c) {
                    null == c && (c = !1);
                    oa.prototype.removeEventListener.call(this, a, b, c);
                    Object.prototype.hasOwnProperty.call(this.__eventMap.h,
                        "uncaughtError") || (this.__enabled = !1)
                },
                __class__: Pj
            });
            var Ye = function () {
                this.__leftExtension = this.__bottomExtension = 0;
                this.__needSecondBitmapData = !0;
                this.__numShaderPasses = 0;
                this.__preserveObject = !1;
                this.__rightExtension = 0;
                this.__shaderBlendMode = 10;
                this.__topExtension = 0;
                this.__smooth = !0
            };
            h["openfl.filters.BitmapFilter"] = Ye;
            Ye.__name__ = "openfl.filters.BitmapFilter";
            Ye.prototype = {
                clone: function () {
                    return new Ye
                },
                __applyFilter: function (a, b, c, d) {
                    return b
                },
                __initShader: function (a, b, c) {
                    return null
                },
                __class__: Ye
            };
            var Uc = function (a) {
                null == this.__glFragmentSource && (this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t}");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}");
                Ed.call(this, a);
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.filters.BitmapFilterShader"] = Uc;
            Uc.__name__ = "openfl.filters.BitmapFilterShader";
            Uc.__super__ = Ed;
            Uc.prototype = w(Ed.prototype, {
                __class__: Uc
            });
            var hk = function () {
                null == this.__glFragmentSource && (this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec4 uColor;\n\t\tuniform float uStrength;\n\t\tvarying vec2 vTexCoord;\n\t\tvarying vec2 vBlurCoords[6];\n\n\t\tvoid main(void)\n\t\t{\n            vec4 texel = texture2D(openfl_Texture, vTexCoord);\n\n            vec3 contributions = vec3(0.00443, 0.05399, 0.24197);\n            vec3 top = vec3(\n                texture2D(openfl_Texture, vBlurCoords[0]).a,\n                texture2D(openfl_Texture, vBlurCoords[1]).a,\n                texture2D(openfl_Texture, vBlurCoords[2]).a\n            );\n            vec3 bottom = vec3(\n                texture2D(openfl_Texture, vBlurCoords[3]).a,\n                texture2D(openfl_Texture, vBlurCoords[4]).a,\n                texture2D(openfl_Texture, vBlurCoords[5]).a\n            );\n\n            float a = texel.a * 0.39894;\n\t\t\ta += dot(top, contributions.xyz);\n            a += dot(bottom, contributions.zyx);\n\n\t\t\tgl_FragColor = uColor * clamp(a * uStrength, 0.0, 1.0);\n\t\t}\n\t");
                null == this.__glVertexSource && (this.__glVertexSource = "\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tuniform vec2 uRadius;\n\t\tvarying vec2 vTexCoord;\n\t\tvarying vec2 vBlurCoords[6];\n\n\t\tvoid main(void) {\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\tvTexCoord = openfl_TextureCoord;\n\n\t\t\tvec3 offset = vec3(0.5, 0.75, 1.0);\n\t\t\tvec2 r = uRadius / openfl_TextureSize;\n\t\t\tvBlurCoords[0] = openfl_TextureCoord - r * offset.z;\n\t\t\tvBlurCoords[1] = openfl_TextureCoord - r * offset.y;\n\t\t\tvBlurCoords[2] = openfl_TextureCoord - r * offset.x;\n\t\t\tvBlurCoords[3] = openfl_TextureCoord + r * offset.x;\n\t\t\tvBlurCoords[4] = openfl_TextureCoord + r * offset.y;\n\t\t\tvBlurCoords[5] = openfl_TextureCoord + r * offset.z;\n\t\t}\n\t");
                Uc.call(this);
                this.uRadius.value = [0, 0];
                this.uColor.value = [0, 0, 0, 0];
                this.uStrength.value = [1];
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.filters._GlowFilter.BlurAlphaShader"] = hk;
            hk.__name__ = "openfl.filters._GlowFilter.BlurAlphaShader";
            hk.__super__ = Uc;
            hk.prototype = w(Uc.prototype, {
                __class__: hk
            });
            var ik = function () {
                null == this.__glFragmentSource && (this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = glow * (1.0 - src.a);\n\t\t}\n\t");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t");
                Uc.call(this);
                this.offset.value = [0, 0];
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.filters._GlowFilter.CombineKnockoutShader"] = ik;
            ik.__name__ = "openfl.filters._GlowFilter.CombineKnockoutShader";
            ik.__super__ = Uc;
            ik.prototype = w(Uc.prototype, {
                __class__: ik
            });
            var jk = function () {
                null == this.__glFragmentSource && (this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = src + glow * (1.0 - src.a);\n\t\t}\n\t");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t");
                Uc.call(this);
                this.offset.value = [0, 0];
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.filters._GlowFilter.CombineShader"] = jk;
            jk.__name__ = "openfl.filters._GlowFilter.CombineShader";
            jk.__super__ = Uc;
            jk.prototype = w(Uc.prototype, {
                __class__: jk
            });
            var kk = function () {
                null == this.__glFragmentSource && (this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = glow * src.a;\n\t\t}\n\t");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t");
                Uc.call(this);
                this.offset.value = [0, 0];
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.filters._GlowFilter.InnerCombineKnockoutShader"] = kk;
            kk.__name__ = "openfl.filters._GlowFilter.InnerCombineKnockoutShader";
            kk.__super__ = Uc;
            kk.prototype = w(Uc.prototype, {
                __class__: kk
            });
            var lk = function () {
                null == this.__glFragmentSource && (this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = vec4((src.rgb * (1.0 - glow.a)) + (glow.rgb * src.a), src.a);\n\t\t}\n\t");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t");
                Uc.call(this);
                this.offset.value = [0, 0];
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.filters._GlowFilter.InnerCombineShader"] = lk;
            lk.__name__ = "openfl.filters._GlowFilter.InnerCombineShader";
            lk.__super__ = Uc;
            lk.prototype = w(Uc.prototype, {
                __class__: lk
            });
            var mk = function () {
                null == this.__glFragmentSource && (this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tvarying vec2 vTexCoord;\n\n\t\tvoid main(void) {\n\t\t\tvec4 texel = texture2D(openfl_Texture, vTexCoord);\n\t\t\tgl_FragColor = vec4(texel.rgb, 1.0 - texel.a);\n\t\t}\n\t");
                null == this.__glVertexSource &&
                (this.__glVertexSource = "\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tvarying vec2 vTexCoord;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\tvTexCoord = openfl_TextureCoord;\n\t\t}\n\t");
                Uc.call(this);
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.filters._GlowFilter.InvertAlphaShader"] = mk;
            mk.__name__ = "openfl.filters._GlowFilter.InvertAlphaShader";
            mk.__super__ = Uc;
            mk.prototype = w(Uc.prototype, {
                __class__: mk
            });
            var kd = function (a, b, c, d, g, f, k, h) {
                null == h && (h = !1);
                null == k && (k = !1);
                null == f && (f = 1);
                null == g && (g = 2);
                null == d && (d = 6);
                null == c && (c = 6);
                null == b && (b = 1);
                null == a && (a = 16711680);
                Ye.call(this);
                this.__color = a;
                this.__alpha = b;
                this.__blurX = c;
                this.__blurY = d;
                this.__strength = g;
                this.__inner = k;
                this.__knockout = h;
                this.__quality = f;
                this.__updateSize();
                this.__renderDirty = this.__preserveObject = this.__needSecondBitmapData = !0
            };
            h["openfl.filters.GlowFilter"] = kd;
            kd.__name__ = "openfl.filters.GlowFilter";
            kd.__super__ = Ye;
            kd.prototype = w(Ye.prototype, {
                clone: function () {
                    return new kd(this.__color, this.__alpha, this.__blurX, this.__blurY, this.__strength, this.__quality, this.__inner, this.__knockout)
                },
                __applyFilter: function (a, b, c, d) {
                    var g = this.__color >> 16 & 255,
                        f = this.__color >> 8 & 255,
                        k = this.__color & 255;
                    c = Xb.gaussianBlur(a.image, b.image, c.__toLimeRectangle(), d.__toLimeVector2(), this.__blurX, this.__blurY, this.__quality, this.__strength);
                    c.colorTransform(c.get_rect(), (new Lb(0, 0, 0, this.__alpha, g, f, k, 0)).__toLimeColorMatrix());
                    return c ==
                    a.image ? a : b
                },
                __initShader: function (a, b, c) {
                    if (this.__inner && 0 == b) return kd.__invertAlphaShader;
                    a = b - (this.__inner ? 1 : 0);
                    b = this.__horizontalPasses + this.__verticalPasses;
                    if (a < b) {
                        var d = kd.__blurAlphaShader;
                        a < this.__horizontalPasses ? (c = .5 * Math.pow(.5, a >> 1), d.uRadius.value[0] = this.get_blurX() * c, d.uRadius.value[1] = 0) : (c = .5 * Math.pow(.5, a - this.__horizontalPasses >> 1), d.uRadius.value[0] = 0, d.uRadius.value[1] = this.get_blurY() * c);
                        d.uColor.value[0] = (this.get_color() >> 16 & 255) / 255;
                        d.uColor.value[1] = (this.get_color() >>
                            8 & 255) / 255;
                        d.uColor.value[2] = (this.get_color() & 255) / 255;
                        d.uColor.value[3] = this.get_alpha();
                        d.uStrength.value[0] = a == b - 1 ? this.__strength : 1;
                        return d
                    }
                    if (this.__inner) {
                        if (this.__knockout) return d = kd.__innerCombineKnockoutShader, d.sourceBitmap.input = c, d.offset.value[0] = 0, d.offset.value[1] = 0, d;
                        d = kd.__innerCombineShader
                    } else {
                        if (this.__knockout) return d = kd.__combineKnockoutShader, d.sourceBitmap.input = c, d.offset.value[0] = 0, d.offset.value[1] = 0, d;
                        d = kd.__combineShader
                    }
                    d.sourceBitmap.input = c;
                    d.offset.value[0] =
                        0;
                    d.offset.value[1] = 0;
                    return d
                },
                __updateSize: function () {
                    this.__rightExtension = this.__leftExtension = 0 < this.__blurX ? Math.ceil(1.5 * this.__blurX) : 0;
                    this.__bottomExtension = this.__topExtension = 0 < this.__blurY ? Math.ceil(1.5 * this.__blurY) : 0;
                    this.__calculateNumShaderPasses()
                },
                __calculateNumShaderPasses: function () {
                    this.__horizontalPasses = 0 >= this.__blurX ? 0 : Math.round(this.__quality / 4 * this.__blurX) + 1;
                    this.__verticalPasses = 0 >= this.__blurY ? 0 : Math.round(this.__quality / 4 * this.__blurY) + 1;
                    this.__numShaderPasses = this.__horizontalPasses +
                        this.__verticalPasses + (this.__inner ? 2 : 1)
                },
                get_alpha: function () {
                    return this.__alpha
                },
                get_blurX: function () {
                    return this.__blurX
                },
                get_blurY: function () {
                    return this.__blurY
                },
                get_color: function () {
                    return this.__color
                },
                __class__: kd,
                __properties__: {
                    get_color: "get_color",
                    get_blurY: "get_blurY",
                    get_blurX: "get_blurX",
                    get_alpha: "get_alpha"
                }
            });
            var Hg = function (a) {
                this.blendMode = 10;
                Ye.call(this);
                this.shader = a;
                this.__numShaderPasses = 1
            };
            h["openfl.filters.ShaderFilter"] = Hg;
            Hg.__name__ = "openfl.filters.ShaderFilter";
            Hg.__super__ =
                Ye;
            Hg.prototype = w(Ye.prototype, {
                clone: function () {
                    var a = new Hg(this.shader);
                    a.set_bottomExtension(this.get_bottomExtension());
                    a.set_leftExtension(this.get_leftExtension());
                    a.set_rightExtension(this.get_rightExtension());
                    a.set_topExtension(this.get_topExtension());
                    a.blendMode = this.blendMode;
                    return a
                },
                get_topExtension: function () {
                    return this.__topExtension
                },
                set_topExtension: function (a) {
                    return this.__topExtension = a
                },
                get_bottomExtension: function () {
                    return this.__bottomExtension
                },
                set_bottomExtension: function (a) {
                    return this.__bottomExtension =
                        a
                },
                get_leftExtension: function () {
                    return this.__leftExtension
                },
                set_leftExtension: function (a) {
                    return this.__leftExtension = a
                },
                get_rightExtension: function () {
                    return this.__rightExtension
                },
                set_rightExtension: function (a) {
                    return this.__rightExtension = a
                },
                __initShader: function (a, b, c) {
                    this.__shaderBlendMode = this.blendMode;
                    return this.shader
                },
                __class__: Hg,
                __properties__: {
                    set_topExtension: "set_topExtension",
                    get_topExtension: "get_topExtension",
                    set_rightExtension: "set_rightExtension",
                    get_rightExtension: "get_rightExtension",
                    set_leftExtension: "set_leftExtension",
                    get_leftExtension: "get_leftExtension",
                    set_bottomExtension: "set_bottomExtension",
                    get_bottomExtension: "get_bottomExtension"
                }
            });
            var Wj = function (a) {
                null != a && 16 == a.get_length() ? this.rawData = a.concat(null) : this.rawData = pa.toFloatVector(null, null, null, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1])
            };
            h["openfl.geom.Matrix3D"] = Wj;
            Wj.__name__ = "openfl.geom.Matrix3D";
            Wj.prototype = {
                append: function (a) {
                    var b = this.rawData.get(0),
                        c = this.rawData.get(4),
                        d = this.rawData.get(8),
                        g = this.rawData.get(12),
                        f = this.rawData.get(1),
                        k = this.rawData.get(5),
                        h = this.rawData.get(9),
                        l = this.rawData.get(13),
                        r = this.rawData.get(2),
                        n = this.rawData.get(6),
                        t = this.rawData.get(10),
                        y = this.rawData.get(14),
                        p = this.rawData.get(3),
                        u = this.rawData.get(7),
                        z = this.rawData.get(11),
                        x = this.rawData.get(15),
                        A = a.rawData.get(0),
                        Q = a.rawData.get(4),
                        m = a.rawData.get(8),
                        O = a.rawData.get(12),
                        N = a.rawData.get(1),
                        v = a.rawData.get(5),
                        w = a.rawData.get(9),
                        F = a.rawData.get(13),
                        D = a.rawData.get(2),
                        H = a.rawData.get(6),
                        ta = a.rawData.get(10),
                        I = a.rawData.get(14),
                        E = a.rawData.get(3),
                        J = a.rawData.get(7),
                        R = a.rawData.get(11);
                    a = a.rawData.get(15);
                    this.rawData.set(0, b * A + f * Q + r * m + p * O);
                    this.rawData.set(1, b * N + f * v + r * w + p * F);
                    this.rawData.set(2, b * D + f * H + r * ta + p * I);
                    this.rawData.set(3, b * E + f * J + r * R + p * a);
                    this.rawData.set(4, c * A + k * Q + n * m + u * O);
                    this.rawData.set(5, c * N + k * v + n * w + u * F);
                    this.rawData.set(6, c * D + k * H + n * ta + u * I);
                    this.rawData.set(7, c * E + k * J + n * R + u * a);
                    this.rawData.set(8, d * A + h * Q + t * m + z * O);
                    this.rawData.set(9, d * N + h * v + t * w + z * F);
                    this.rawData.set(10, d * D + h * H + t * ta + z * I);
                    this.rawData.set(11, d * E +
                        h * J + t * R + z * a);
                    this.rawData.set(12, g * A + l * Q + y * m + x * O);
                    this.rawData.set(13, g * N + l * v + y * w + x * F);
                    this.rawData.set(14, g * D + l * H + y * ta + x * I);
                    this.rawData.set(15, g * E + l * J + y * R + x * a)
                },
                appendTranslation: function (a, b, c) {
                    var d = this.rawData;
                    d.set(12, d.get(12) + a);
                    d = this.rawData;
                    d.set(13, d.get(13) + b);
                    d = this.rawData;
                    d.set(14, d.get(14) + c)
                },
                copyRawDataFrom: function (a, b, c) {
                    null == c && (c = !1);
                    null == b && (b = 0);
                    c && this.transpose();
                    for (var d = 0, g = a.get_length() - b; d < g;) {
                        var f = d++;
                        this.rawData.set(f, a.get(f + b))
                    }
                    c && this.transpose()
                },
                identity: function () {
                    this.rawData =
                        pa.toFloatVector(null, null, null, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1])
                },
                transpose: function () {
                    var a = this.rawData.copy();
                    this.rawData.set(1, a.get(4));
                    this.rawData.set(2, a.get(8));
                    this.rawData.set(3, a.get(12));
                    this.rawData.set(4, a.get(1));
                    this.rawData.set(6, a.get(9));
                    this.rawData.set(7, a.get(13));
                    this.rawData.set(8, a.get(2));
                    this.rawData.set(9, a.get(6));
                    this.rawData.set(11, a.get(14));
                    this.rawData.set(12, a.get(3));
                    this.rawData.set(13, a.get(7));
                    this.rawData.set(14, a.get(11))
                },
                __class__: Wj
            };
            var Jh = function (a) {
                this.__colorTransform =
                    new Lb;
                this.concatenatedColorTransform = new Lb;
                this.pixelBounds = new sa;
                this.__displayObject = a;
                this.__hasMatrix = !0
            };
            h["openfl.geom.Transform"] = Jh;
            Jh.__name__ = "openfl.geom.Transform";
            Jh.prototype = {
                get_colorTransform: function () {
                    return this.__colorTransform.__clone()
                },
                __setTransform: function (a, b, c, d, g, f) {
                    if (null != this.__displayObject) {
                        var k = this.__displayObject.__transform;
                        if (k.a != a || k.b != b || k.c != c || k.d != d || k.tx != g || k.ty != f) {
                            var h = 0 == b ? a : Math.sqrt(a * a + b * b);
                            var l = 0 == c ? d : Math.sqrt(c * c + d * d);
                            this.__displayObject.__scaleX =
                                h;
                            this.__displayObject.__scaleY = l;
                            h = 180 / Math.PI * Math.atan2(d, c) - 90;
                            h != this.__displayObject.__rotation && (this.__displayObject.__rotation = h, h *= Math.PI / 180, this.__displayObject.__rotationSine = Math.sin(h), this.__displayObject.__rotationCosine = Math.cos(h));
                            k.a = a;
                            k.b = b;
                            k.c = c;
                            k.d = d;
                            k.tx = g;
                            k.ty = f;
                            this.__displayObject.__setTransformDirty()
                        }
                    }
                },
                __class__: Jh,
                __properties__: {
                    get_colorTransform: "get_colorTransform"
                }
            };
            var gf = function (a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 0);
                this.w = d;
                this.x = a;
                this.y = b;
                this.z = c
            };
            h["openfl.geom.Vector3D"] = gf;
            gf.__name__ = "openfl.geom.Vector3D";
            gf.distance = function (a, b) {
                var c = b.x - a.x,
                    d = b.y - a.y;
                a = b.z - a.z;
                return Math.sqrt(c * c + d * d + a * a)
            };
            gf.prototype = {
                __class__: gf
            };
            var Gl = function (a, b) {
                this.__webAudioContext = null;
                this.__urlLoading = !1;
                oa.call(this, this);
                this.bytesTotal = this.bytesLoaded = 0;
                this.isBuffering = !1;
                this.url = null;
                null != a && this.load(a, b);
                null == a && null != ve.context && "web" == ve.context.type && (this.__webAudioContext = ve.context.web)
            };
            h["openfl.media.Sound"] =
                Gl;
            Gl.__name__ = "openfl.media.Sound";
            Gl.__super__ = oa;
            Gl.prototype = w(oa.prototype, {
                load: function (a, b) {
                    var c = this;
                    this.url = a.url;
                    this.__urlLoading = !0;
                    this.dispatchEvent(new ua("open"));
                    a = Pa.getLibrary("default");
                    if (null != a && Object.prototype.hasOwnProperty.call(a.cachedAudioBuffers.h, this.url)) a = a.cachedAudioBuffers.h[this.url], b = null != a && null != a.data ? a.data.byteLength : 0, this.AudioBuffer_onURLProgress(b, b), this.AudioBuffer_onURLLoad(a);
                    else Oc.loadFromFile(this.url).onProgress(m(this, this.AudioBuffer_onURLProgress)).onComplete(m(this,
                        this.AudioBuffer_onURLLoad)).onError(function (a) {
                        c.AudioBuffer_onURLLoad(null)
                    })
                },
                AudioBuffer_onURLLoad: function (a) {
                    this.__urlLoading = !1;
                    null == a ? this.dispatchEvent(new Qg("ioError")) : (this.__buffer = a, a = 1, null != this.__buffer.data && (a = this.__buffer.data.length), this.dispatchEvent(new tf("progress", !1, !1, a, a)), this.dispatchEvent(new ua("complete")), null != this.__pendingSoundChannel && (this.__pendingAudioSource.buffer = this.__buffer, this.__pendingAudioSource.init(), this.__pendingSoundChannel.__initAudioSource(this.__pendingAudioSource)));
                    this.__pendingAudioSource = this.__pendingSoundChannel = null
                },
                AudioBuffer_onURLProgress: function (a, b) {
                    var c = new tf("progress");
                    c.bytesLoaded = a;
                    c.bytesTotal = b;
                    this.dispatchEvent(c)
                },
                __class__: Gl
            });
            var Hl = function (a, b, c) {
                this.__firstRun = !0;
                oa.call(this, this);
                this.__sound = a;
                this.rightPeak = this.leftPeak = 1;
                this.__soundTransform = null != c ? c : new eg;
                this.__initAudioSource(b);
                ue.__registerSoundChannel(this)
            };
            h["openfl.media.SoundChannel"] = Hl;
            Hl.__name__ = "openfl.media.SoundChannel";
            Hl.__super__ = oa;
            Hl.prototype =
                w(oa.prototype, {
                    stop: function () {
                        ue.__unregisterSoundChannel(this);
                        this.__isValid && (null != this.__processor && (this.__processor.disconnect(), this.__processor = this.__processor.onaudioprocess = null), this.__audioSource.stop(), this.__dispose())
                    },
                    __dispose: function () {
                        this.__isValid && (this.__audioSource.onComplete.remove(m(this, this.audioSource_onComplete)), this.__audioSource.dispose(), this.__audioSource = null, this.__isValid = !1)
                    },
                    __startSampleData: function () {
                        var a = this,
                            b = this.__sound.__webAudioContext;
                        if (null !=
                            b) {
                            this.__sampleDataEvent = new fk("sampleData");
                            this.__sound.dispatchEvent(this.__sampleDataEvent);
                            var c = this.__sampleDataEvent.getBufferSize();
                            0 == c ? db.setTimeout(function () {
                                a.stop();
                                a.dispatchEvent(new ua("soundComplete"))
                            }, 1) : (this.__processor = b.createScriptProcessor(c, 0, 2), this.__processor.connect(b.destination), this.__processor.onaudioprocess = m(this, this.onSample), b.resume())
                        }
                    },
                    __updateTransform: function () {
                        this.set_soundTransform(this.get_soundTransform())
                    },
                    __initAudioSource: function (a) {
                        this.__audioSource =
                            a;
                        null != this.__audioSource && (this.__audioSource.onComplete.add(m(this, this.audioSource_onComplete)), this.__isValid = !0, this.__audioSource.play())
                    },
                    get_position: function () {
                        return this.__isValid ? this.__audioSource.get_currentTime() + this.__audioSource.offset : 0
                    },
                    set_position: function (a) {
                        if (!this.__isValid) return 0;
                        this.__audioSource.set_currentTime((a | 0) - this.__audioSource.offset);
                        return a
                    },
                    get_soundTransform: function () {
                        return this.__soundTransform.clone()
                    },
                    set_soundTransform: function (a) {
                        if (null != a) {
                            this.__soundTransform.pan =
                                a.pan;
                            this.__soundTransform.volume = a.volume;
                            var b = ue.__soundTransform.pan + this.__soundTransform.pan;
                            -
                                1 > b && (b = -1);
                            1 < b && (b = 1);
                            var c = ue.__soundTransform.volume * this.__soundTransform.volume;
                            this.__isValid && (this.__audioSource.set_gain(c), c = this.__audioSource.get_position(), c.x = b, c.z = -1 * Math.sqrt(1 - Math.pow(b, 2)), this.__audioSource.set_position(c))
                        }
                        return a
                    },
                    audioSource_onComplete: function () {
                        ue.__unregisterSoundChannel(this);
                        this.__dispose();
                        this.dispatchEvent(new ua("soundComplete"))
                    },
                    onSample: function (a) {
                        if (this.__firstRun) {
                            var b = !0;
                            this.__firstRun = !1
                        } else Pd.set_length(this.__sampleDataEvent.data, 0), this.__sound.dispatchEvent(this.__sampleDataEvent), b = Ja.gt(Pd.get_length(this.__sampleDataEvent.data), 0);
                        b ? this.__sampleDataEvent.getSamples(a) : (this.stop(), this.dispatchEvent(new ua("soundComplete")))
                    },
                    __class__: Hl,
                    __properties__: {
                        set_soundTransform: "set_soundTransform",
                        get_soundTransform: "get_soundTransform",
                        set_position: "set_position",
                        get_position: "get_position"
                    }
                });
            var vm = function () {
            };
            h["openfl.media.SoundLoaderContext"] = vm;
            vm.__name__ = "openfl.media.SoundLoaderContext";
            var eg = function (a, b) {
                null == b && (b = 0);
                null == a && (a = 1);
                this.volume = a;
                this.pan = b;
                this.rightToRight = this.rightToLeft = this.leftToRight = this.leftToLeft = 0
            };
            h["openfl.media.SoundTransform"] = eg;
            eg.__name__ = "openfl.media.SoundTransform";
            eg.prototype = {
                clone: function () {
                    return new eg(this.volume, this.pan)
                },
                __class__: eg
            };
            var ue = function () {
            };
            h["openfl.media.SoundMixer"] = ue;
            ue.__name__ = "openfl.media.SoundMixer";
            ue.__registerSoundChannel = function (a) {
                ue.__soundChannels.push(a)
            };
            ue.__unregisterSoundChannel = function (a) {
                M.remove(ue.__soundChannels, a)
            };
            var Il = function (a, b) {
                null == b && (b = 240);
                null == a && (a = 320);
                ea.call(this);
                this.__drawableType = 8;
                this.__width = a;
                this.__height = b;
                this.__textureTime = -1;
                this.smoothing = !1;
                this.deblocking = 0
            };
            h["openfl.media.Video"] = Il;
            Il.__name__ = "openfl.media.Video";
            Il.__super__ = ea;
            Il.prototype = w(ea.prototype, {
                __enterFrame: function (a) {
                    this.__renderable && null != this.__stream && !this.__renderDirty && (this.__renderDirty = !0, this.__setParentRenderDirty())
                },
                __getBounds: function (a,
                                       b) {
                    var c = sa.__pool.get();
                    c.setTo(0, 0, this.__width, this.__height);
                    c.__transform(c, b);
                    a.__expand(c.x, c.y, c.width, c.height);
                    sa.__pool.release(c)
                },
                __getIndexBuffer: function (a) {
                    if (null == this.__indexBuffer || this.__indexBufferContext != a.__context) this.__indexBufferData = new Uint16Array(6), this.__indexBufferData[0] = 0, this.__indexBufferData[1] = 1, this.__indexBufferData[2] = 2, this.__indexBufferData[3] = 2, this.__indexBufferData[4] = 1, this.__indexBufferData[5] = 3, this.__indexBufferContext = a.__context, this.__indexBuffer =
                        a.createIndexBuffer(6), this.__indexBuffer.uploadFromTypedArray(this.__indexBufferData);
                    return this.__indexBuffer
                },
                __getTexture: function (a) {
                    if (null == this.__stream || null == this.__stream.__video) return null;
                    var b = a.__context.webgl,
                        c = b.RGBA,
                        d = b.RGBA;
                    this.__stream.__closed || this.__stream.__video.currentTime == this.__textureTime || (null == this.__texture && (this.__texture = a.createRectangleTexture(this.__stream.__video.videoWidth, this.__stream.__video.videoHeight, 1, !1)), a.__bindGLTexture2D(this.__texture.__textureID),
                        Tc.texImage2D(b, b.TEXTURE_2D, 0, c, d, b.UNSIGNED_BYTE, this.__stream.__video), this.__textureTime = this.__stream.__video.currentTime);
                    return this.__texture
                },
                __getVertexBuffer: function (a) {
                    if (null == this.__vertexBuffer || this.__vertexBufferContext != a.__context || this.__currentWidth != this.get_width() || this.__currentHeight != this.get_height()) this.__currentWidth = this.get_width(), this.__currentHeight = this.get_height(), this.__vertexBufferData = new Float32Array(20), this.__vertexBufferData[0] = this.get_width(), this.__vertexBufferData[1] =
                        this.get_height(), this.__vertexBufferData[3] = 1, this.__vertexBufferData[4] = 1, this.__vertexBufferData[6] = this.get_height(), this.__vertexBufferData[9] = 1, this.__vertexBufferData[10] = this.get_width(), this.__vertexBufferData[13] = 1, this.__vertexBufferContext = a.__context, this.__vertexBuffer = a.createVertexBuffer(3, 5), this.__vertexBuffer.uploadFromTypedArray(oh.toArrayBufferView(this.__vertexBufferData));
                    return this.__vertexBuffer
                },
                __hitTest: function (a, b, c, d, g, f) {
                    if (!f.get_visible() || this.__isMask || null != this.get_mask() &&
                        !this.get_mask().__hitTestMask(a, b)) return !1;
                    this.__getRenderTransform();
                    var k = this.__renderTransform,
                        h = k.a * k.d - k.b * k.c;
                    c = 0 == h ? -k.tx : 1 / h * (k.c * (k.ty - b) + k.d * (a - k.tx));
                    k = this.__renderTransform;
                    h = k.a * k.d - k.b * k.c;
                    a = 0 == h ? -k.ty : 1 / h * (k.a * (b - k.ty) + k.b * (k.tx - a));
                    return 0 < c && 0 < a && c <= this.__width && a <= this.__height ? (null == d || g || d.push(f), !0) : !1
                },
                __hitTestMask: function (a, b) {
                    var c = F.__pool.get();
                    c.setTo(a, b);
                    this.__globalToLocal(c, c);
                    a = 0 < c.x && 0 < c.y && c.x <= this.__width && c.y <= this.__height;
                    F.__pool.release(c);
                    return a
                },
                get_height: function () {
                    return this.__height * this.get_scaleY()
                },
                set_height: function (a) {
                    if (1 != this.get_scaleY() || a != this.__height) this.__setTransformDirty(), this.__dirty = !0;
                    this.set_scaleY(1);
                    return this.__height = a
                },
                get_width: function () {
                    return this.__width * this.__scaleX
                },
                set_width: function (a) {
                    if (1 != this.__scaleX || this.__width != a) this.__setTransformDirty(), this.__dirty = !0;
                    this.set_scaleX(1);
                    return this.__width = a
                },
                __class__: Il
            });
            var xk = function (a, b, c) {
                this.description = a;
                this.extension = b;
                this.macType = c
            };
            h["openfl.net.FileFilter"] = xk;
            xk.__name__ = "openfl.net.FileFilter";
            xk.prototype = {
                __class__: xk
            };
            var Zg = function () {
                oa.call(this);
                this.__inputControl = window.document.createElement("input");
                this.__inputControl.setAttribute("type", "file");
                this.__inputControl.onclick = function (a) {
                    a.cancelBubble = !0;
                    a.stopPropagation()
                }
            };
            h["openfl.net.FileReference"] = Zg;
            Zg.__name__ = "openfl.net.FileReference";
            Zg.__super__ = oa;
            Zg.prototype = w(oa.prototype, {
                browse: function (a) {
                    var b = this,
                        c = this.__path = this.__data = null;
                    if (null != a) {
                        c = [];
                        for (var d = 0; d < a.length;) {
                            var g = a[d];
                            ++d;
                            c.push(T.replace(T.replace(g.extension, "*.", "."), ";", ","))
                        }
                        c = c.join(",")
                    }
                    null != c ? this.__inputControl.setAttribute("accept", c) : this.__inputControl.removeAttribute("accept");
                    this.__inputControl.onchange = function () {
                        if (0 == b.__inputControl.files.length) b.dispatchEvent(new ua("cancel"));
                        else {
                            var a = b.__inputControl.files[0],
                                c = new Date(a.lastModified);
                            b.modificationDate = c;
                            b.creationDate = b.get_modificationDate();
                            b.size = a.size;
                            c = Rd.extension(a.name);
                            b.type = "." + c;
                            b.name =
                                Rd.withoutDirectory(a.name);
                            b.__path = a.name;
                            b.dispatchEvent(new ua("select"))
                        }
                    };
                    this.__inputControl.click();
                    return !0
                },
                load: function () {
                    var a = this,
                        b = this.__inputControl.files[0],
                        c = new FileReader;
                    c.onload = function (b) {
                        a.data = Pd.fromArrayBuffer(b.target.result);
                        a.openFileDialog_onComplete()
                    };
                    c.onerror = function (b) {
                        a.dispatchEvent(new Qg("ioError"))
                    };
                    c.readAsArrayBuffer(b)
                },
                openFileDialog_onComplete: function () {
                    this.dispatchEvent(new ua("complete"))
                },
                get_modificationDate: function () {
                    return this.modificationDate
                },
                __class__: Zg,
                __properties__: {
                    get_modificationDate: "get_modificationDate"
                }
            });
            var Jl = function () {
                oa.call(this)
            };
            h["openfl.net.NetConnection"] = Jl;
            Jl.__name__ = "openfl.net.NetConnection";
            Jl.__super__ = oa;
            Jl.prototype = w(oa.prototype, {
                __class__: Jl
            });
            var Kl = function (a, b) {
                oa.call(this);
                this.__connection = a;
                this.__soundTransform = new eg;
                this.__video = window.document.createElement("video");
                this.__video.setAttribute("playsinline", "");
                this.__video.setAttribute("webkit-playsinline", "");
                this.__video.setAttribute("crossorigin",
                    "anonymous");
                this.__video.addEventListener("error", m(this, this.video_onError), !1);
                this.__video.addEventListener("waiting", m(this, this.video_onWaiting), !1);
                this.__video.addEventListener("ended", m(this, this.video_onEnd), !1);
                this.__video.addEventListener("pause", m(this, this.video_onPause), !1);
                this.__video.addEventListener("seeking", m(this, this.video_onSeeking), !1);
                this.__video.addEventListener("playing", m(this, this.video_onPlaying), !1);
                this.__video.addEventListener("timeupdate", m(this, this.video_onTimeUpdate),
                    !1);
                this.__video.addEventListener("loadstart", m(this, this.video_onLoadStart), !1);
                this.__video.addEventListener("stalled", m(this, this.video_onStalled), !1);
                this.__video.addEventListener("durationchange", m(this, this.video_onDurationChange), !1);
                this.__video.addEventListener("canplay", m(this, this.video_onCanPlay), !1);
                this.__video.addEventListener("canplaythrough", m(this, this.video_onCanPlayThrough), !1);
                this.__video.addEventListener("loadedmetadata", m(this, this.video_onLoadMetaData), !1)
            };
            h["openfl.net.NetStream"] =
                Kl;
            Kl.__name__ = "openfl.net.NetStream";
            Kl.__super__ = oa;
            Kl.prototype = w(oa.prototype, {
                __dispatchStatus: function (a) {
                    a = new ek("netStatus", !1, !1, {
                        code: a
                    });
                    this.__connection.dispatchEvent(a);
                    this.dispatchEvent(a)
                },
                __playStatus: function (a) {
                    if (null != this.__video && null != this.client) try {
                        var b = this.client.onPlayStatus;
                        b({
                            code: a,
                            duration: this.__video.duration,
                            position: this.__video.currentTime,
                            speed: this.__video.playbackRate,
                            start: this.__video.startTime
                        })
                    } catch (c) {
                        Ha.lastError = c
                    }
                },
                video_onCanPlay: function (a) {
                    this.__playStatus("NetStream.Play.canplay")
                },
                video_onCanPlayThrough: function (a) {
                    this.__playStatus("NetStream.Play.canplaythrough")
                },
                video_onDurationChange: function (a) {
                    this.__playStatus("NetStream.Play.durationchange")
                },
                video_onEnd: function (a) {
                    this.__dispatchStatus("NetStream.Play.Stop");
                    this.__dispatchStatus("NetStream.Play.Complete");
                    this.__playStatus("NetStream.Play.Complete")
                },
                video_onError: function (a) {
                    this.__dispatchStatus("NetStream.Play.Stop");
                    this.__playStatus("NetStream.Play.error")
                },
                video_onLoadMetaData: function (a) {
                    if (null != this.__video &&
                        null != this.client) try {
                        var b = this.client.onMetaData;
                        b({
                            width: this.__video.videoWidth,
                            height: this.__video.videoHeight,
                            duration: this.__video.duration
                        })
                    } catch (c) {
                        Ha.lastError = c
                    }
                },
                video_onLoadStart: function (a) {
                    this.__playStatus("NetStream.Play.loadstart")
                },
                video_onPause: function (a) {
                    this.__playStatus("NetStream.Play.pause")
                },
                video_onPlaying: function (a) {
                    this.__dispatchStatus("NetStream.Play.Start");
                    this.__playStatus("NetStream.Play.playing")
                },
                video_onSeeking: function (a) {
                    this.__playStatus("NetStream.Play.seeking");
                    this.__dispatchStatus("NetStream.Seek.Complete")
                },
                video_onStalled: function (a) {
                    this.__playStatus("NetStream.Play.stalled")
                },
                video_onTimeUpdate: function (a) {
                    null != this.__video && (this.time = this.__video.currentTime, this.__playStatus("NetStream.Play.timeupdate"))
                },
                video_onWaiting: function (a) {
                    this.__playStatus("NetStream.Play.waiting")
                },
                __class__: Kl
            });
            var cd = function () {
                oa.call(this);
                this.client = this;
                this.objectEncoding = cd.defaultObjectEncoding
            };
            h["openfl.net.SharedObject"] = cd;
            cd.__name__ = "openfl.net.SharedObject";
            cd.__sharedObjects = null;
            cd.getLocal = function (a, b, c) {
                c = " ~%&\\;:\"',<>?#".split("");
                var d = !0;
                if (null == a || "" == a) d = !1;
                else
                    for (var g = 0; g < c.length;) {
                        var f = c[g];
                        ++g;
                        if (-1 < a.indexOf(f)) {
                            d = !1;
                            break
                        }
                    }
                if (!d) throw new $b("Error #2134: Cannot create SharedObject.");
                null == cd.__sharedObjects && (cd.__sharedObjects = new ab, null != C.current && C.current.onExit.add(cd.application_onExit));
                c = b + "/" + a;
                if (!Object.prototype.hasOwnProperty.call(cd.__sharedObjects.h, c)) {
                    d = null;
                    try {
                        var k = mf.getLocalStorage();
                        null == b && (null != k &&
                        (d = k.getItem(window.location.href + ":" + a), k.removeItem(window.location.href + ":" + a)), b = window.location.pathname);
                        null != k && null == d && (d = k.getItem(b + ":" + a))
                    } catch (l) {
                        Ha.lastError = l
                    }
                    k = new cd;
                    k.data = {};
                    k.__localPath = b;
                    k.__name = a;
                    if (null != d && "" != d) try {
                        var h = new pd(d);
                        h.setResolver({
                            resolveEnum: z.resolveEnum,
                            resolveClass: cd.__resolveClass
                        });
                        k.data = h.unserialize()
                    } catch (l) {
                        Ha.lastError = l
                    }
                    cd.__sharedObjects.h[c] = k
                }
                return cd.__sharedObjects.h[c]
            };
            cd.__resolveClass = function (a) {
                return null != a ? (T.startsWith(a, "neash.") &&
                (a = T.replace(a, "neash.", "openfl.")), T.startsWith(a, "native.") && (a = T.replace(a, "native.", "openfl.")), T.startsWith(a, "flash.") && (a = T.replace(a, "flash.", "openfl.")), T.startsWith(a, "openfl._v2.") && (a = T.replace(a, "openfl._v2.", "openfl.")), T.startsWith(a, "openfl._legacy.") && (a = T.replace(a, "openfl._legacy.", "openfl.")), h[a]) : null
            };
            cd.application_onExit = function (a) {
                a = cd.__sharedObjects.h;
                for (var b = Object.keys(a), c = b.length, d = 0; d < c;) a[b[d++]].flush()
            };
            cd.__super__ = oa;
            cd.prototype = w(oa.prototype, {
                flush: function (a) {
                    if (0 ==
                        L.fields(this.data).length) return 0;
                    a = ud.run(this.data);
                    try {
                        var b = mf.getLocalStorage();
                        null != b && (b.removeItem(this.__localPath + ":" + this.__name), b.setItem(this.__localPath + ":" + this.__name, a))
                    } catch (c) {
                        return Ha.lastError = c, 1
                    }
                    return 0
                },
                __class__: cd
            });
            var Ll = function (a) {
                oa.call(this);
                this.bytesTotal = this.bytesLoaded = 0;
                this.dataFormat = 1;
                null != a && this.load(a)
            };
            h["openfl.net.URLLoader"] = Ll;
            Ll.__name__ = "openfl.net.URLLoader";
            Ll.__super__ = oa;
            Ll.prototype = w(oa.prototype, {
                load: function (a) {
                    var b = this,
                        c = new ua("open");
                    this.dispatchEvent(c);
                    0 == this.dataFormat ? (c = new mj, this.__prepareRequest(c, a), c.load().onProgress(m(this, this.httpRequest_onProgress)).onError(m(this, this.httpRequest_onError)).onComplete(function (a) {
                        b.__dispatchResponseStatus();
                        b.__dispatchStatus();
                        b.data = a;
                        a = new ua("complete");
                        b.dispatchEvent(a)
                    })) : (c = new Fg, this.__prepareRequest(c, a), c.load().onProgress(m(this, this.httpRequest_onProgress)).onError(m(this, this.httpRequest_onError)).onComplete(function (a) {
                        b.__dispatchResponseStatus();
                        b.__dispatchStatus();
                        b.data = 2 == b.dataFormat ? wm._new(a) : a;
                        a = new ua("complete");
                        b.dispatchEvent(a)
                    }))
                },
                __dispatchResponseStatus: function () {
                    var a = new Ch("httpResponseStatus", !1, !1, this.__httpRequest.responseStatus);
                    a.responseURL = this.__httpRequest.uri;
                    var b = [];
                    if (this.__httpRequest.enableResponseHeaders && null != this.__httpRequest.responseHeaders)
                        for (var c = 0, d = this.__httpRequest.responseHeaders; c < d.length;) {
                            var g = d[c];
                            ++c;
                            b.push(new Ml(g.name, g.value))
                        }
                    a.responseHeaders = b;
                    this.dispatchEvent(a)
                },
                __dispatchStatus: function () {
                    var a =
                        new Ch("httpStatus", !1, !1, this.__httpRequest.responseStatus);
                    this.dispatchEvent(a)
                },
                __prepareRequest: function (a, b) {
                    this.__httpRequest = a;
                    this.__httpRequest.uri = b.url;
                    this.__httpRequest.method = b.method;
                    if (null != b.data)
                        if (z.typeof(b.data) == cb.TObject) {
                            var c = L.fields(b.data);
                            for (a = 0; a < c.length;) {
                                var d = c[a];
                                ++a;
                                this.__httpRequest.formData.h[d] = L.field(b.data, d)
                            }
                        } else this.__httpRequest.data = b.data instanceof Db ? b.data : Db.ofString(E.string(b.data));
                    this.__httpRequest.contentType = b.contentType;
                    if (null !=
                        b.requestHeaders)
                        for (a = 0, c = b.requestHeaders; a < c.length;) d = c[a], ++a, this.__httpRequest.headers.push(new dj(d.name, d.value));
                    this.__httpRequest.followRedirects = b.followRedirects;
                    this.__httpRequest.timeout = b.idleTimeout | 0;
                    this.__httpRequest.manageCookies = b.manageCookies;
                    this.__httpRequest.withCredentials = b.withCredentials;
                    this.__httpRequest.userAgent = b.userAgent;
                    this.__httpRequest.enableResponseHeaders = !0
                },
                httpRequest_onError: function (a) {
                    this.__dispatchResponseStatus();
                    this.__dispatchStatus();
                    this.__httpRequest instanceof
                    pf ? this.data = this.__httpRequest.responseData : this.__httpRequest instanceof Fg && (this.data = this.__httpRequest.responseData);
                    var b = 403 == a ? new gk("securityError") : new Qg("ioError");
                    b.text = E.string(a);
                    this.dispatchEvent(b)
                },
                httpRequest_onProgress: function (a, b) {
                    var c = new tf("progress");
                    c.bytesLoaded = a;
                    c.bytesTotal = b;
                    this.dispatchEvent(c)
                },
                __class__: Ll
            });
            var ni = function (a) {
                this.withCredentials = !1;
                null != a && (this.url = a);
                this.contentType = null;
                this.followRedirects = Ze.followRedirects;
                this.idleTimeout = 0 < Ze.idleTimeout ?
                    Ze.idleTimeout : 3E4;
                this.manageCookies = Ze.manageCookies;
                this.method = "GET";
                this.requestHeaders = [];
                this.userAgent = Ze.userAgent
            };
            h["openfl.net.URLRequest"] = ni;
            ni.__name__ = "openfl.net.URLRequest";
            ni.prototype = {
                __class__: ni
            };
            var Ze = function () {
            };
            h["openfl.net.URLRequestDefaults"] = Ze;
            Ze.__name__ = "openfl.net.URLRequestDefaults";
            Ze.userAgent = null;
            var Ml = function (a, b) {
                null == b && (b = "");
                null == a && (a = "");
                this.name = a;
                this.value = b
            };
            h["openfl.net.URLRequestHeader"] = Ml;
            Ml.__name__ = "openfl.net.URLRequestHeader";
            Ml.prototype = {
                __class__: Ml
            };
            var wm = {
                    _new: function (a) {
                        var b = {};
                        null != a && wm.decode(b, a);
                        return b
                    },
                    decode: function (a, b) {
                        for (var c = L.fields(a), d = 0; d < c.length;) {
                            var g = c[d];
                            ++d;
                            L.deleteField(a, g)
                        }
                        c = b.split("&");
                        for (d = 0; d < c.length;)
                            if (g = c[d], ++d, b = g.indexOf("="), 0 < b) {
                                var f = M.substr(g, 0, b);
                                f = decodeURIComponent(f.split("+").join(" "));
                                g = M.substr(g, b + 1, null);
                                a[f] = decodeURIComponent(g.split("+").join(" "))
                            } else 0 != b && (a[decodeURIComponent(g.split("+").join(" "))] = "")
                    }
                },
                Jg = function (a) {
                    this.parentDomain = null != a ? a : Jg.currentDomain
                };
            h["openfl.system.ApplicationDomain"] = Jg;
            Jg.__name__ = "openfl.system.ApplicationDomain";
            Jg.prototype = {
                __class__: Jg
            };
            var Nl = function () {
                oa.call(this);
                this.clear()
            };
            h["openfl.text.StyleSheet"] = Nl;
            Nl.__name__ = "openfl.text.StyleSheet";
            Nl.__super__ = oa;
            Nl.prototype = w(oa.prototype, {
                clear: function () {
                    this.__styleNamesDirty = !1;
                    this.__styleNames = null;
                    this.__styles = new ab
                },
                __applyStyle: function (a, b) {
                    a = a.toLowerCase();
                    Object.prototype.hasOwnProperty.call(this.__styles.h, a) && this.__applyStyleObject(this.__styles.h[a],
                        b)
                },
                __applyStyleObject: function (a, b) {
                    if (null != a) {
                        var c = new Ya("[0-9A-Fa-f]+", ""),
                            d = new Ya("[0-9]+", "");
                        var g = a;
                        null != g && Object.prototype.hasOwnProperty.call(g, "color") ? (g = Nd.__get(a, "color"), g = c.match(null == g ? null : E.string(g))) : g = !1;
                        g && (b.color = E.parseInt("0x" + c.matched(0)));
                        g = a;
                        null != g && Object.prototype.hasOwnProperty.call(g, "fontFamily") && (g = Nd.__get(a, "fontFamily"), b.set_font(this.__parseFont(null == g ? null : E.string(g))));
                        g = a;
                        null != g && Object.prototype.hasOwnProperty.call(g, "fontSize") ? (g = Nd.__get(a,
                            "fontSize"), g = d.match(null == g ? null : E.string(g))) : g = !1;
                        g && b.set_size(E.parseInt(d.matched(0)));
                        g = a;
                        if (null != g && Object.prototype.hasOwnProperty.call(g, "fontStyle")) switch (Nd.__get(a, "fontStyle")) {
                            case "italic":
                                b.set_italic(!0);
                                break;
                            case "normal":
                                b.set_italic(!1)
                        }
                        g = a;
                        if (null != g && Object.prototype.hasOwnProperty.call(g, "fontWeight")) switch (Nd.__get(a, "fontWeight")) {
                            case "bold":
                                b.set_bold(!0);
                                break;
                            case "normal":
                                b.set_bold(!1)
                        }
                        g = a;
                        null != g && Object.prototype.hasOwnProperty.call(g, "leading") ? (g = Nd.__get(a,
                            "leading"), g = d.match(null == g ? null : E.string(g))) : g = !1;
                        g && (b.leading = E.parseInt(d.matched(0)));
                        g = a;
                        null != g && Object.prototype.hasOwnProperty.call(g, "letterSpacing") ? (g = Nd.__get(a, "letterSpacing"), g = d.match(null == g ? null : E.string(g))) : g = !1;
                        g && (b.letterSpacing = parseFloat(d.matched(0)));
                        g = a;
                        null != g && Object.prototype.hasOwnProperty.call(g, "marginLeft") ? (g = Nd.__get(a, "marginLeft"), g = d.match(null == g ? null : E.string(g))) : g = !1;
                        g && (b.leftMargin = E.parseInt(d.matched(0)));
                        g = a;
                        null != g && Object.prototype.hasOwnProperty.call(g,
                            "marginRight") ? (g = Nd.__get(a, "marginRight"), g = d.match(null == g ? null : E.string(g))) : g = !1;
                        g && (b.rightMargin = E.parseInt(d.matched(0)));
                        g = a;
                        if (null != g && Object.prototype.hasOwnProperty.call(g, "textAlign")) switch (Nd.__get(a, "textAlign")) {
                            case "center":
                                b.align = 0;
                                break;
                            case "justify":
                                b.align = 2;
                                break;
                            case "left":
                                b.align = 3;
                                break;
                            case "right":
                                b.align = 4
                        }
                        g = a;
                        if (null != g && Object.prototype.hasOwnProperty.call(g, "textDecoration")) switch (Nd.__get(a, "textDecoration")) {
                            case "none":
                                b.underline = !1;
                                break;
                            case "underline":
                                b.underline = !0
                        }
                        g = a;
                        null != g && Object.prototype.hasOwnProperty.call(g, "textIndent") ? (g = Nd.__get(a, "textIndent"), g = d.match(null == g ? null : E.string(g))) : g = !1;
                        g && (b.blockIndent = E.parseInt(d.matched(0)))
                    }
                },
                __parseFont: function (a) {
                    if (null == a) return null;
                    -
                        1 < a.indexOf(",") && (a = M.substr(a, 0, a.indexOf(",")));
                    switch (a) {
                        case "mono":
                            return "_typewriter";
                        case "sans-serif":
                            return "_sans";
                        case "serif":
                            return "_serif";
                        default:
                            return a
                    }
                },
                __class__: Nl
            });
            var Yc = function () {
                this.__renderedOnCanvasWhileOnDOM = this.__forceCachedBitmapUpdate = !1;
                this.__mouseScrollVCounter = 0;
                this.condenseWhite = !1;
                xa.call(this);
                this.__wordSelection = !1;
                this.__drawableType = 7;
                this.__selectionIndex = this.__caretIndex = 0;
                this.__displayAsPassword = !1;
                this.__passwordChar = "*";
                this.__graphics = new qd(this);
                this.__graphics.__commands.clear();
                this.__textEngine = new Bb(this);
                this.__layoutDirty = !0;
                this.__offsetY = this.__offsetX = 0;
                this.__mouseWheelEnabled = !0;
                this.__text = "";
                null == Yc.__defaultTextFormat && (Yc.__defaultTextFormat = new Le("Times New Roman", 12, 0, !1, !1, !1, "", "", 3,
                    0, 0, 0, 0), Yc.__defaultTextFormat.blockIndent = 0, Yc.__defaultTextFormat.bullet = !1, Yc.__defaultTextFormat.letterSpacing = 0, Yc.__defaultTextFormat.kerning = !1);
                this.__textFormat = Yc.__defaultTextFormat.clone();
                this.__textEngine.textFormatRanges.push(new zd(this.__textFormat, 0, 0));
                this.addEventListener("mouseDown", m(this, this.this_onMouseDown));
                this.addEventListener("focusIn", m(this, this.this_onFocusIn));
                this.addEventListener("focusOut", m(this, this.this_onFocusOut));
                this.addEventListener("keyDown", m(this,
                    this.this_onKeyDown));
                this.addEventListener("mouseWheel", m(this, this.this_onMouseWheel))
            };
            h["openfl.text.TextField"] = Yc;
            Yc.__name__ = "openfl.text.TextField";
            Yc.__defaultTextFormat = null;
            Yc.__super__ = xa;
            Yc.prototype = w(xa.prototype, {
                getCharBoundaries: function (a) {
                    if (0 > a || a > this.__text.length - 1) return null;
                    var b = new sa;
                    return this.__getCharBoundaries(a, b) ? b : null
                },
                getLineIndexOfChar: function (a) {
                    if (0 > a || a > this.__text.length) return -1;
                    this.__updateLayout();
                    for (var b = this.__textEngine.layoutGroups.iterator(); b.hasNext();) {
                        var c =
                            b.next();
                        if (c.startIndex <= a && c.endIndex >= a) return c.lineIndex
                    }
                    return -1
                },
                getLineLength: function (a) {
                    this.__updateLayout();
                    if (0 > a || a > this.__textEngine.numLines - 1) return 0;
                    for (var b = -1, c = -1, d = this.__textEngine.layoutGroups.iterator(); d.hasNext();) {
                        var g = d.next();
                        if (g.lineIndex == a) -1 == b && (b = g.startIndex);
                        else if (g.lineIndex == a + 1) {
                            c = g.startIndex;
                            break
                        }
                    }
                    -
                        1 == c && (c = this.__text.length);
                    return c - b
                },
                getLineOffset: function (a) {
                    this.__updateLayout();
                    if (0 > a) throw new Bf;
                    if (a > this.__textEngine.numLines - 1) return -1;
                    for (var b = this.__textEngine.layoutGroups.iterator(); b.hasNext();) {
                        var c = b.next();
                        if (c.lineIndex == a) return c.startIndex
                    }
                    return 0
                },
                getLineText: function (a) {
                    this.__updateLayout();
                    if (0 > a) throw new Bf;
                    if (a > this.__textEngine.numLines - 1) return null;
                    for (var b = -1, c = -1, d = this.__textEngine.layoutGroups.iterator(); d.hasNext();) {
                        var g = d.next();
                        if (g.lineIndex == a) -1 == b && (b = g.startIndex);
                        else if (g.lineIndex == a + 1) {
                            c = g.startIndex;
                            break
                        }
                    }
                    -
                        1 == c && (c = this.__text.length);
                    return this.__textEngine.text.substring(b, c)
                },
                replaceSelectedText: function (a) {
                    this.__replaceSelectedText(a,
                        !1)
                },
                replaceText: function (a, b, c) {
                    this.__replaceText(a, b, c, !1)
                },
                setSelection: function (a, b) {
                    this.__selectionIndex = a;
                    this.__caretIndex = b;
                    this.__updateScrollV();
                    this.__updateScrollH();
                    null != this.stage && this.stage.get_focus() == this && (this.__stopCursorTimer(), this.__startCursorTimer())
                },
                setTextFormat: function (a, b, c) {
                    null == c && (c = -1);
                    null == b && (b = -1);
                    var d = this.get_text().length;
                    -
                        1 == b ? (-1 == c && (c = d), b = 0) : -1 == c && (c = b + 1);
                    if (b != c) {
                        if (0 > b || 0 >= c || c < b || b >= d || c > d) throw new Bf;
                        if (0 == b && c == d) {
                            this.__textEngine.textFormatRanges.set_length(1);
                            var g = this.__textEngine.textFormatRanges.get(0);
                            g.start = 0;
                            g.end = d;
                            g.format.__merge(a)
                        } else {
                            d = 0;
                            for (var f; d < this.__textEngine.textFormatRanges.get_length();)
                                if (g = this.__textEngine.textFormatRanges.get(d), g.end <= b) ++d;
                                else if (g.start >= c) break;
                                else if (g.start <= b && g.end >= c)
                                    if (g.start == b && g.end == c) {
                                        g.format = g.format.clone();
                                        g.format.__merge(a);
                                        break
                                    } else if (g.start == b) f = new zd(g.format.clone(), b, c), f.format.__merge(a), this.__textEngine.textFormatRanges.insertAt(d, f), g.start = c, d += 2;
                                    else {
                                        g.end == c ? (f = new zd(g.format.clone(),
                                            b, c), f.format.__merge(a), this.__textEngine.textFormatRanges.insertAt(d + 1, f)) : (f = new zd(g.format.clone(), b, c), f.format.__merge(a), this.__textEngine.textFormatRanges.insertAt(d + 1, f), f = new zd(g.format.clone(), c, g.end), this.__textEngine.textFormatRanges.insertAt(d + 2, f));
                                        g.end = b;
                                        break
                                    } else if (g.start >= b && g.end <= c) g.start == b ? (g.format = g.format.clone(), g.format.__merge(a), g.end = c) : this.__textEngine.textFormatRanges.removeAt(d);
                                else if (g.start > b && g.end > b) {
                                    g.start = c;
                                    break
                                } else g.start < b && g.end <= c ? (f = new zd(g.format.clone(),
                                    b, c), f.format.__merge(a), this.__textEngine.textFormatRanges.insertAt(d + 1, f), g.end = b, d += 2) : (++d, Wa.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {

                                    className: "openfl.text.TextField",
                                    methodName: "setTextFormat"
                                }))
                        }
                        this.__layoutDirty = this.__dirty = !0;
                        this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty())
                    }
                },
                __setStageReference: function (a) {
                    this.__stopTextInput();
                    xa.prototype.__setStageReference.call(this, a)
                },
                __allowMouseFocus: function () {
                    return this.mouseEnabled
                },
                __caretBeginningOfLine: function () {
                    this.__caretIndex = this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex))
                },
                __caretBeginningOfNextLine: function () {
                    var a = this.getLineIndexOfChar(this.__caretIndex);
                    this.__caretIndex = a < this.__textEngine.numLines - 1 ? this.getLineOffset(a + 1) : this.__text.length
                },
                __caretBeginningOfPreviousLine: function () {
                    var a = this.getLineIndexOfChar(this.__caretIndex);
                    if (0 < a) {
                        var b =
                            this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex));
                        this.__caretIndex = this.__caretIndex == b ? this.getLineOffset(a - 1) : b
                    }
                },
                __caretEndOfLine: function () {
                    var a = this.getLineIndexOfChar(this.__caretIndex);
                    this.__caretIndex = a < this.__textEngine.numLines - 1 ? this.getLineOffset(a + 1) - 1 : this.__text.length
                },
                __caretNextCharacter: function () {
                    this.__caretIndex < this.__text.length && this.__caretIndex++
                },
                __caretNextLine: function () {
                    var a = this.getLineIndexOfChar(this.__caretIndex);
                    a < this.__textEngine.numLines - 1 &&
                    (this.__caretIndex = this.__getCharIndexOnDifferentLine(this.get_caretIndex(), a + 1))
                },
                __caretPreviousCharacter: function () {
                    0 < this.__caretIndex && this.__caretIndex--
                },
                __caretPreviousLine: function () {
                    var a = this.getLineIndexOfChar(this.__caretIndex);
                    0 < a && (this.__caretIndex = this.__getCharIndexOnDifferentLine(this.get_caretIndex(), a - 1))
                },
                __disableInput: function () {
                    this.__inputEnabled && null != this.stage && (this.stage.window.__backend.setTextInputEnabled(!1), this.stage.window.onTextInput.remove(m(this, this.window_onTextInput)),
                        this.stage.window.onKeyDown.remove(m(this, this.window_onKeyDown)), this.__inputEnabled = !1, this.__stopCursorTimer())
                },
                __dispatch: function (a) {
                    if (2 == a.eventPhase && "mouseUp" == a.type) {
                        var b = this.__getGroup(this.get_mouseX(), this.get_mouseY(), !0);
                        null != b && (b = b.format.url, null != b && "" != b && (T.startsWith(b, "event:") ? this.dispatchEvent(new Fe("link", !0, !1, M.substr(b, 6, null))) : db.getURL(new ni(b))))
                    }
                    return xa.prototype.__dispatch.call(this, a)
                },
                __enableInput: function () {
                    if (null != this.stage) {
                        this.stage.window.__backend.setTextInputEnabled(!0);
                        var a = this.getBounds(this.stage);
                        a = new vd(a.x, a.y, a.width, a.height);
                        this.stage.window.setTextInputRect(a);
                        this.__inputEnabled || (this.stage.window.__backend.setTextInputEnabled(!0), this.stage.window.onTextInput.has(m(this, this.window_onTextInput)) || (this.stage.window.onTextInput.add(m(this, this.window_onTextInput)), this.stage.window.onKeyDown.add(m(this, this.window_onKeyDown))), this.__inputEnabled = !0, this.__stopCursorTimer(), this.__startCursorTimer())
                    }
                },
                __getBounds: function (a, b) {
                    this.__updateLayout();
                    var c = sa.__pool.get();
                    c.copyFrom(this.__textEngine.bounds);
                    c.offset(this.__offsetX, this.__offsetY);
                    c.__transform(c, b);
                    a.__expand(c.x, c.y, c.width, c.height);
                    sa.__pool.release(c)
                },
                __getCharBoundaries: function (a, b) {
                    if (0 > a || a > this.__text.length - 1) return !1;
                    this.__updateLayout();
                    for (var c = this.__textEngine.layoutGroups.iterator(); c.hasNext();) {
                        var d = c.next();
                        if (a >= d.startIndex && a < d.endIndex) try {
                            for (var g = d.offsetX, f = 0, k = a - d.startIndex; f < k;) {
                                var h = f++;
                                g += d.positions[h]
                            }
                            b.setTo(g, d.offsetY, d.positions[a - d.startIndex],
                                d.ascent + d.descent);
                            return !0
                        } catch (l) {
                            Ha.lastError = l
                        }
                    }
                    return !1
                },
                __getCharIndexOnDifferentLine: function (a, b) {
                    if (0 > a || a > this.__text.length || 0 > b || b > this.__textEngine.numLines - 1) return -1;
                    for (var c = null, d = null, g = this.__textEngine.layoutGroups.iterator(); g.hasNext();) {
                        var f = g.next();
                        if (a >= f.startIndex && a <= f.endIndex) {
                            c = f.offsetX;
                            for (var k = 0, h = a - f.startIndex; k < h;) {
                                var l = k++;
                                c += f.positions[l]
                            }
                            if (null != d) return this.__getPosition(c, d)
                        }
                        if (f.lineIndex == b) {
                            d = f.offsetY + f.height / 2;
                            f = 0;
                            for (k = this.get_scrollV() -
                                1; f < k;) h = f++, d -= this.__textEngine.lineHeights.get(h);
                            if (null != c) return this.__getPosition(c, d)
                        }
                    }
                    return -1
                },
                __getCursor: function () {
                    var a = this.__getGroup(this.get_mouseX(), this.get_mouseY(), !0);
                    return null != a && "" != a.format.url ? "button" : this.__textEngine.selectable ? "ibeam" : null
                },
                __getGroup: function (a, b, c) {
                    null == c && (c = !1);
                    this.__updateLayout();
                    a += this.get_scrollH();
                    for (var d = 0, g = this.get_scrollV() - 1; d < g;) {
                        var f = d++;
                        b += this.__textEngine.lineHeights.get(f)
                    }
                    !c && b > this.__textEngine.textHeight && (b = this.__textEngine.textHeight);
                    var k = !0;
                    d = 0;
                    for (g = this.__textEngine.layoutGroups.get_length(); d < g;) {
                        f = d++;
                        var h = this.__textEngine.layoutGroups.get(f);
                        f = f < this.__textEngine.layoutGroups.get_length() - 1 ? this.__textEngine.layoutGroups.get(f + 1) : null;
                        k && (b < h.offsetY && (b = h.offsetY), a < h.offsetX && (a = h.offsetX), k = !1);
                        if (b >= h.offsetY && b <= h.offsetY + h.height || !c && null == f)
                            if (a >= h.offsetX && a <= h.offsetX + h.width || !c && (null == f || f.lineIndex != h.lineIndex)) return h
                    }
                    return null
                },
                __getPosition: function (a, b) {
                    b = this.__getGroup(a, b);
                    if (null == b) return this.__text.length;
                    for (var c = 0, d = 0, g = b.positions.length; d < g;) {
                        var f = d++;
                        c += b.positions[f];
                        if (a <= b.offsetX + c) {
                            if (a <= b.offsetX + (c - b.positions[f]) + b.positions[f] / 2) return b.startIndex + f;
                            if (b.startIndex + f < b.endIndex) return b.startIndex + f + 1;
                            break
                        }
                    }
                    return b.endIndex
                },
                __getPositionByIdentifier: function (a, b, c) {
                    a = this.__getPosition(a, b);
                    c = c ? "\n" : " .,;:!?()[]{}<>/\\|-=+*&^%$#@~`'\"\n";
                    b = this.__text.charAt(a);
                    if (this.__specialSelectionInitialIndex <= a)
                        for (; -1 == c.indexOf(b) && a < this.__text.length;) ++a, b = this.__text.charAt(a);
                    else {
                        for (; -1 ==
                               c.indexOf(b) && 0 < a;) --a, b = this.__text.charAt(a);
                        if (0 == a) return a;
                        ++a
                    }
                    return a
                },
                __getOppositeIdentifierBound: function (a, b) {
                    b = b ? "\n" : " .,;:!?()[]{}<>/\\|-=+*&^%$#@~`'\"\n";
                    var c = this.__text.charAt(a);
                    if (a <= this.__caretIndex) {
                        if (0 == a) return a;
                        do --a, c = this.__text.charAt(a); while (-1 == b.indexOf(c) && 0 < a);
                        if (0 == a) return a;
                        ++a
                    } else
                        for (; -1 == b.indexOf(c) && a < this.__text.length;) ++a, c = this.__text.charAt(a);
                    return a
                },
                __hitTest: function (a, b, c, d, g, f) {
                    if (!f.get_visible() || this.__isMask || g && !this.mouseEnabled || null !=
                        this.get_mask() && !this.get_mask().__hitTestMask(a, b)) return !1;
                    this.__getRenderTransform();
                    this.__updateLayout();
                    c = this.__renderTransform;
                    g = c.a * c.d - c.b * c.c;
                    var k = 0 == g ? -c.tx : 1 / g * (c.c * (c.ty - b) + c.d * (a - c.tx));
                    c = this.__renderTransform;
                    g = c.a * c.d - c.b * c.c;
                    return this.__textEngine.bounds.contains(k, 0 == g ? -c.ty : 1 / g * (c.a * (b - c.ty) + c.b * (c.tx - a))) ? (null != d && d.push(f), !0) : !1
                },
                __hitTestMask: function (a, b) {
                    this.__getRenderTransform();
                    this.__updateLayout();
                    var c = this.__renderTransform,
                        d = c.a * c.d - c.b * c.c,
                        g = 0 == d ? -c.tx : 1 /
                            d * (c.c * (c.ty - b) + c.d * (a - c.tx));
                    c = this.__renderTransform;
                    d = c.a * c.d - c.b * c.c;
                    return this.__textEngine.bounds.contains(g, 0 == d ? -c.ty : 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a))) ? !0 : !1
                },
                __replaceSelectedText: function (a, b) {
                    null == b && (b = !0);
                    null == a && (a = "");
                    if ("" != a || this.__selectionIndex != this.__caretIndex) {
                        var c = this.__caretIndex < this.__selectionIndex ? this.__caretIndex : this.__selectionIndex,
                            d = this.__caretIndex > this.__selectionIndex ? this.__caretIndex : this.__selectionIndex;
                        if (!(c == d && 0 < this.__textEngine.maxChars && this.__text.length ==
                            this.__textEngine.maxChars)) {
                            c > this.__text.length && (c = this.__text.length);
                            d > this.__text.length && (d = this.__text.length);
                            if (d < c) {
                                var g = d;
                                d = c;
                                c = g
                            }
                            0 > c && (c = 0);
                            this.__replaceText(c, d, a, b)
                        }
                    }
                },
                __replaceText: function (a, b, c, d) {
                    if (!(b < a || 0 > a || b > this.__text.length || null == c)) {
                        d && (c = this.__textEngine.restrictText(c), 0 < this.__textEngine.maxChars && (d = this.__textEngine.maxChars - this.__text.length + (b - a), 0 >= d ? c = "" : d < c.length && (c = M.substr(c, 0, d))));
                        this.__updateText(this.__text.substring(0, a) + c + this.__text.substring(b));
                        d = c.length - (b - a);
                        for (var g = 0, f; g < this.__textEngine.textFormatRanges.get_length();) {
                            f = this.__textEngine.textFormatRanges.get(g);
                            if (a == b) f.start == f.end ? 0 != f.start ? Wa.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {

                                className: "openfl.text.TextField",
                                methodName: "__replaceText"
                            }) : f.end += d : f.end >= a && (f.start >= a ? (f.start += d, f.end += d) : f.start < a && f.end >= b && (f.end += d));
                            else if (f.end >
                                a)
                                if (f.start > b) f.start += d, f.end += d;
                                else if (f.start <= a && f.end > b) f.end += d;
                                else if (f.start >= a && f.end <= b) {
                                    f = this.__textEngine.textFormatRanges;
                                    f.__tempIndex = g--;
                                    for (var k = 0, h = []; k < h.length;) {
                                        var l = h[k++];
                                        f.insertAt(f.__tempIndex, l);
                                        f.__tempIndex++
                                    }
                                    f.splice(f.__tempIndex, 1)
                                } else f.end > b && f.start > a && f.start <= b ? (f.start = a, f.end += d) : f.start < a && f.end > a && f.end <= b && (f.end = a);
                            ++g
                        }
                        0 == this.__textEngine.textFormatRanges.get_length() ? this.__textEngine.textFormatRanges.push(new zd(this.get_defaultTextFormat().clone(),
                            0, c.length)) : a == b && 0 < this.__textEngine.textFormatRanges.get(0).start ? this.__textEngine.textFormatRanges.unshift(new zd(this.get_defaultTextFormat().clone(), 0, this.__textEngine.textFormatRanges.get(0).start)) : a != b && this.__textEngine.textFormatRanges.get(this.__textEngine.textFormatRanges.get_length() - 1).end < this.__text.length && this.__textEngine.textFormatRanges.push(new zd(this.get_defaultTextFormat().clone(), this.__textEngine.textFormatRanges.get(this.__textEngine.textFormatRanges.get_length() - 1).end,
                            this.__text.length));
                        this.__selectionIndex = this.__caretIndex = a + c.length;
                        this.__layoutDirty = this.__dirty = !0;
                        this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty())
                    }
                },
                __startCursorTimer: function () {
                    1 == this.get_type() ? (this.__inputEnabled && (this.__cursorTimer = Qf.delay(m(this, this.__startCursorTimer), 600), this.__showCursor = !this.__showCursor), this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty())) : this.get_selectable() && (this.__dirty = !0, this.__renderDirty ||
                    (this.__renderDirty = !0, this.__setParentRenderDirty()))
                },
                __startTextInput: function () {
                    0 > this.__caretIndex && (this.__selectionIndex = this.__caretIndex = this.__text.length);
                    (ea.__supportDOM ? this.__renderedOnCanvasWhileOnDOM : 1) && this.__enableInput()
                },
                __stopCursorTimer: function () {
                    null != this.__cursorTimer && (this.__cursorTimer.stop(), this.__cursorTimer = null);
                    this.__showCursor && (this.__showCursor = !1, this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()))
                },
                __stopTextInput: function () {
                    (ea.__supportDOM ?
                        this.__renderedOnCanvasWhileOnDOM : 1) && this.__disableInput()
                },
                __updateLayout: function () {
                    if (this.__layoutDirty) {
                        var a = this.__textEngine.width;
                        this.__textEngine.update();
                        if (2 != this.__textEngine.autoSize) {
                            if (this.__textEngine.width != a) switch (this.__textEngine.autoSize) {
                                case 0:
                                    this.set_x(this.get_x() + (a - this.__textEngine.width) / 2);
                                    break;
                                case 3:
                                    this.set_x(this.get_x() + (a - this.__textEngine.width))
                            }
                            this.__textEngine.getBounds()
                        }
                        this.__layoutDirty = !1;
                        this.setSelection(this.__selectionIndex, this.__caretIndex)
                    }
                },
                __updateMouseDrag: function () {
                    if (null != this.stage) {
                        var a = this.get_scrollH(),
                            b = this.get_scrollV(),
                            c = this.getBounds(this);
                        this.get_mouseX() > c.width - 1 ? this.set_scrollH(this.get_scrollH() + (Math.max(Math.min(.1 * (this.get_mouseX() - c.width), 10), 1) | 0)) : 1 > this.get_mouseX() && this.set_scrollH(this.get_scrollH() - (Math.max(Math.min(-.1 * this.get_mouseX(), 10), 1) | 0));
                        this.__mouseScrollVCounter++;
                        this.__mouseScrollVCounter > this.stage.get_frameRate() / 10 && (this.get_mouseY() > c.height - 2 ? this.set_scrollV(Math.min(this.get_scrollV() +
                            Math.max(Math.min(.03 * (this.get_mouseY() - c.height), 5), 1), this.get_maxScrollV()) | 0) : 2 > this.get_mouseY() && this.set_scrollV(this.get_scrollV() - (Math.max(Math.min(-.03 * this.get_mouseY(), 5), 1) | 0)), this.__mouseScrollVCounter = 0);
                        this.get_scrollH() == a && this.get_scrollV() == b || this.stage_onMouseMove(null)
                    }
                },
                __updateScrollH: function () {
                    this.__updateLayout();
                    var a = this.getBounds(this);
                    if (this.get_textWidth() <= a.width - 4) this.set_scrollH(0);
                    else {
                        var b = this.get_scrollH();
                        if (0 == this.__caretIndex || this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex)) ==
                            this.__caretIndex) b = 0;
                        else {
                            var c = sa.__pool.get(),
                                d = !1;
                            this.__caretIndex < this.__text.length && (d = this.__getCharBoundaries(this.__caretIndex, c));
                            d || (this.__getCharBoundaries(this.__caretIndex - 1, c), c.x += c.width);
                            for (; c.x < b && 0 < b;) b -= 24;
                            for (; c.x > b + a.width - 4;) b += 24;
                            sa.__pool.release(c)
                        }
                        0 < b && 1 != this.get_type() && (c = this.getLineLength(this.getLineIndexOfChar(this.__caretIndex)), this.get_scrollH() + a.width - 4 > c && this.set_scrollH(Math.ceil(c - a.width + 4)));
                        0 > b ? this.set_scrollH(0) : b > this.get_maxScrollH() ? this.set_scrollH(this.get_maxScrollH()) :
                            this.set_scrollH(b)
                    }
                },
                __updateScrollV: function () {
                    this.__updateLayout();
                    if (this.get_textHeight() <= this.get_height() - 4) this.set_scrollV(1);
                    else {
                        var a = this.getLineIndexOfChar(this.__caretIndex);
                        -
                            1 == a && 0 < this.__caretIndex && (a = this.getLineIndexOfChar(this.__caretIndex - 1) + 1);
                        if (a + 1 < this.get_scrollV()) this.set_scrollV(a + 1);
                        else if (a + 1 > this.get_bottomScrollV()) {
                            var b = 0;
                            for (a >= this.__textEngine.lineHeights.get_length() && (a = this.__textEngine.lineHeights.get_length() - 1); 0 <= a;) {
                                b += this.__textEngine.lineHeights.get(a);
                                if (b > this.get_height() - 4) {
                                    a += 0 > b - this.get_height() ? 1 : 2;
                                    break
                                }
                                --a
                            }
                            this.set_scrollV(a)
                        } else this.set_scrollV(this.get_scrollV())
                    }
                },
                __updateText: function (a) {
                    ea.__supportDOM && this.__renderedOnCanvasWhileOnDOM && (this.__forceCachedBitmapUpdate = this.__text != a);
                    this.__textEngine.set_text(a);
                    this.__text = this.__textEngine.text;
                    null != this.stage && this.stage.get_focus() == this ? (this.__text.length < this.__selectionIndex && (this.__selectionIndex = this.__text.length), this.__text.length < this.__caretIndex && (this.__caretIndex =
                        this.__text.length)) : this.__isHTML ? this.__selectionIndex = this.__caretIndex = this.__text.length : this.__caretIndex = this.__selectionIndex = 0;
                    if (!this.__displayAsPassword || ea.__supportDOM && !this.__renderedOnCanvasWhileOnDOM) this.__textEngine.set_text(this.__text);
                    else {
                        a = "";
                        for (var b = 0, c = this.get_text().length; b < c;) b++, a += this.__passwordChar;
                        this.__textEngine.set_text(a)
                    }
                },
                __updateTransforms: function (a) {
                    xa.prototype.__updateTransforms.call(this, a);
                    a = this.__renderTransform;
                    var b = this.__offsetX,
                        c = this.__offsetY;
                    a.tx = b * a.a + c * a.c + a.tx;
                    a.ty = b * a.b + c * a.d + a.ty
                },
                set_autoSize: function (a) {
                    a != this.__textEngine.autoSize && (this.__layoutDirty = this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    return this.__textEngine.autoSize = a
                },
                set_background: function (a) {
                    a != this.__textEngine.background && (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    return this.__textEngine.background = a
                },
                set_backgroundColor: function (a) {
                    a != this.__textEngine.backgroundColor &&
                    (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    return this.__textEngine.backgroundColor = a
                },
                set_border: function (a) {
                    a != this.__textEngine.border && (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    return this.__textEngine.border = a
                },
                set_borderColor: function (a) {
                    a != this.__textEngine.borderColor && (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    return this.__textEngine.borderColor =
                        a
                },
                get_bottomScrollV: function () {
                    this.__updateLayout();
                    return this.__textEngine.get_bottomScrollV()
                },
                get_caretIndex: function () {
                    return this.__caretIndex
                },
                get_defaultTextFormat: function () {
                    return this.__textFormat.clone()
                },
                set_defaultTextFormat: function (a) {
                    this.__textFormat.__merge(a);
                    this.__dirty = this.__layoutDirty = !0;
                    this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty());
                    return a
                },
                get_displayAsPassword: function () {
                    return this.__displayAsPassword
                },
                get_height: function () {
                    this.__updateLayout();
                    return this.__textEngine.height * Math.abs(this.get_scaleY())
                },
                set_height: function (a) {
                    a != this.__textEngine.height && (this.__setTransformDirty(), this.__layoutDirty = this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()), this.__textEngine.height = a);
                    return this.__textEngine.height * Math.abs(this.get_scaleY())
                },
                get_htmlText: function () {
                    return this.__isHTML ? this.__htmlText : this.__text
                },
                set_htmlText: function (a) {
                    if (null == a) throw a = new zf("Error #2007: Parameter text must be non-null."),
                        a.errorID = 2007, a;
                    this.__isHTML && this.__text == a || (this.__layoutDirty = this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    this.__isHTML = !0;
                    this.condenseWhite && (a = a.replace(/\s+/g, " "));
                    this.__htmlText = a;
                    a = Na.parse(a, this.get_multiline(), this.__styleSheet, this.__textFormat, this.__textEngine.textFormatRanges);
                    this.__updateText(a);
                    return a
                },
                get_length: function () {
                    return null != this.__text ? this.__text.length : 0
                },
                get_maxScrollH: function () {
                    this.__updateLayout();
                    return this.__textEngine.maxScrollH
                },
                get_maxScrollV: function () {
                    this.__updateLayout();
                    return this.__textEngine.get_maxScrollV()
                },
                get_mouseWheelEnabled: function () {
                    return this.__mouseWheelEnabled
                },
                get_multiline: function () {
                    return this.__textEngine.multiline
                },
                set_multiline: function (a) {
                    return this.__textEngine.multiline = a
                },
                get_numLines: function () {
                    this.__updateLayout();
                    return this.__textEngine.numLines
                },
                set_restrict: function (a) {
                    this.__textEngine.restrict != a && (this.__textEngine.set_restrict(a), this.__updateText(this.__text));
                    return a
                },
                get_scrollH: function () {
                    return this.__textEngine.scrollH
                },
                set_scrollH: function (a) {
                    this.__updateLayout();
                    a > this.__textEngine.maxScrollH && (a = this.__textEngine.maxScrollH);
                    0 > a && (a = 0);
                    a != this.__textEngine.scrollH && (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()), this.__textEngine.scrollH = a, this.dispatchEvent(new ua("scroll")));
                    return this.__textEngine.scrollH
                },
                get_scrollV: function () {
                    return this.__textEngine.get_scrollV()
                },
                set_scrollV: function (a) {
                    this.__updateLayout();
                    a > this.__textEngine.get_maxScrollV() && (a = this.__textEngine.get_maxScrollV());
                    1 > a && (a = 1);
                    if (a != this.__textEngine.get_scrollV() || 0 == this.__textEngine.get_scrollV()) this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()), this.__textEngine.set_scrollV(a), this.dispatchEvent(new ua("scroll"));
                    return this.__textEngine.get_scrollV()
                },
                get_selectable: function () {
                    return this.__textEngine.selectable
                },
                set_selectable: function (a) {
                    a != this.__textEngine.selectable && 1 == this.get_type() && (null != this.stage && this.stage.get_focus() == this ? this.__startTextInput() : a ||
                        this.__stopTextInput());
                    return this.__textEngine.selectable = a
                },
                get_tabEnabled: function () {
                    return null == this.__tabEnabled ? 1 == this.__textEngine.type : this.__tabEnabled
                },
                get_text: function () {
                    return this.__text
                },
                set_text: function (a) {
                    if (null == a) throw a = new zf("Error #2007: Parameter text must be non-null."), a.errorID = 2007, a;
                    if (null != this.__styleSheet) return this.set_htmlText(a);
                    if (this.__isHTML || this.__text != a) this.__layoutDirty = this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty());
                    else return a;
                    if (1 < this.__textEngine.textFormatRanges.get_length()) {
                        var b = this.__textEngine.textFormatRanges,
                            c = this.__textEngine.textFormatRanges.get_length() - 1;
                        b.__tempIndex = 1;
                        for (var d = 0, g = []; d < g.length;) {
                            var f = g[d++];
                            b.insertAt(b.__tempIndex, f);
                            b.__tempIndex++
                        }
                        b.splice(b.__tempIndex, c)
                    }
                    b = this.__textEngine.textFormatRanges.get(0);
                    b.format = this.__textFormat;
                    b.start = 0;
                    b.end = a.length;
                    this.__isHTML = !1;
                    this.__updateText(a);
                    return a
                },
                set_textColor: function (a) {
                    a != this.__textFormat.color && (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    for (var b = this.__textEngine.textFormatRanges.iterator(); b.hasNext();) b.next().format.color = a;
                    return this.__textFormat.color = a
                },
                get_textWidth: function () {
                    this.__updateLayout();
                    return this.__textEngine.textWidth
                },
                get_textHeight: function () {
                    this.__updateLayout();
                    return this.__textEngine.textHeight
                },
                get_type: function () {
                    return this.__textEngine.type
                },
                set_type: function (a) {
                    null != this.__styleSheet && (a = 0);
                    a != this.__textEngine.type &&
                    (this.__textEngine.type = a, 1 == a ? (this.addEventListener("addedToStage", m(this, this.this_onAddedToStage)), this.this_onFocusIn(null), this.__textEngine.__useIntAdvances = !0) : (this.removeEventListener("addedToStage", m(this, this.this_onAddedToStage)), this.__stopTextInput(), this.__textEngine.__useIntAdvances = null), this.__layoutDirty = this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    return this.__textEngine.type
                },
                get_width: function () {
                    this.__updateLayout();
                    return this.__textEngine.width *
                        Math.abs(this.__scaleX)
                },
                set_width: function (a) {
                    a != this.__textEngine.width && (this.__setTransformDirty(), this.__layoutDirty = this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()), this.__textEngine.width = a);
                    return this.__textEngine.width * Math.abs(this.__scaleX)
                },
                set_wordWrap: function (a) {
                    a != this.__textEngine.wordWrap && (this.__layoutDirty = this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()));
                    return this.__textEngine.wordWrap = a
                },
                get_x: function () {
                    return this.__transform.tx +
                        this.__offsetX
                },
                set_x: function (a) {
                    a != this.__transform.tx + this.__offsetX && this.__setTransformDirty();
                    this.__transform.tx = a - this.__offsetX;
                    return a
                },
                get_y: function () {
                    return this.__transform.ty + this.__offsetY
                },
                set_y: function (a) {
                    a != this.__transform.ty + this.__offsetY && this.__setTransformDirty();
                    this.__transform.ty = a - this.__offsetY;
                    return a
                },
                stage_onMouseMove: function (a) {
                    if (null != this.stage && this.get_selectable() && 0 <= this.__selectionIndex && (this.__updateLayout(), a = this.__lineSelection ? this.__getPositionByIdentifier(this.get_mouseX() +
                        this.get_scrollH(), this.get_mouseY(), !0) : this.__wordSelection ? this.__getPositionByIdentifier(this.get_mouseX() + this.get_scrollH(), this.get_mouseY(), !1) : this.__getPosition(this.get_mouseX() + this.get_scrollH(), this.get_mouseY()), a != this.__caretIndex)) {
                        this.__caretIndex = a;
                        if (this.__wordSelection || this.__lineSelection) this.__selectionIndex = this.__getOppositeIdentifierBound(this.__specialSelectionInitialIndex, this.__lineSelection);
                        a = !0;
                        ea.__supportDOM && (this.__renderedOnCanvasWhileOnDOM && (this.__forceCachedBitmapUpdate = !0), a = !1);
                        a && (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()))
                    }
                },
                stage_onMouseUp: function (a) {
                    a = a.currentTarget;
                    a.removeEventListener("enterFrame", m(this, this.this_onEnterFrame));
                    a.removeEventListener("mouseMove", m(this, this.stage_onMouseMove));
                    a.removeEventListener("mouseUp", m(this, this.stage_onMouseUp));
                    if (this.stage == a && a.get_focus() == this) {
                        this.__getWorldTransform();
                        this.__updateLayout();
                        if (this.__lineSelection || this.__wordSelection) {
                            a = 0;
                            this.__lineSelection ?
                                a = this.__getPositionByIdentifier(this.get_mouseX() + this.get_scrollH(), this.get_mouseY(), !0) : this.__wordSelection && (a = this.__getPositionByIdentifier(this.get_mouseX() + this.get_scrollH(), this.get_mouseY(), !1));
                            var b = Math.max(this.__selectionIndex, a) | 0;
                            this.__selectionIndex = Math.min(this.__selectionIndex, a) | 0;
                            this.__caretIndex = b
                        }
                        this.__lineSelection = this.__wordSelection = !1;
                        this.__inputEnabled && (this.this_onFocusIn(null), this.__stopCursorTimer(), this.__startCursorTimer(), ea.__supportDOM && this.__renderedOnCanvasWhileOnDOM &&
                        (this.__forceCachedBitmapUpdate = !0))
                    }
                },
                this_onAddedToStage: function (a) {
                    this.this_onFocusIn(null)
                },
                this_onEnterFrame: function (a) {
                    this.__updateMouseDrag()
                },
                this_onFocusIn: function (a) {
                    1 == this.get_type() && null != this.stage && this.stage.get_focus() == this ? this.__startTextInput() : 1 != this.get_type() && this.get_selectable() && null != this.stage && this.stage.get_focus() == this && this.__startCursorTimer()
                },
                this_onFocusOut: function (a) {
                    this.__stopCursorTimer();
                    this.__stopTextInput();
                    this.__selectionIndex != this.__caretIndex &&
                    (this.__selectionIndex = this.__caretIndex, this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty()))
                },
                this_onKeyDown: function (a) {
                    this.get_selectable() && 1 != this.get_type() && 67 == a.keyCode && (a.commandKey || a.ctrlKey) && (this.__caretIndex == this.__selectionIndex || this.get_displayAsPassword() || kc.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex)))
                },
                this_onMouseDown: function (a) {
                    if (this.get_selectable() || 1 == this.get_type()) this.__lineSelection = 3 == a.clickCount,
                        this.__wordSelection = 2 == a.clickCount, this.__lineSelection ? (a = this.__caretIndex, this.__caretIndex = this.__getPositionByIdentifier(this.get_mouseX() + this.get_scrollH(), this.get_mouseY(), !0), this.__selectionIndex = this.__getOppositeIdentifierBound(a, !0)) : this.__wordSelection ? (a = this.__caretIndex, this.__caretIndex = this.__getPositionByIdentifier(this.get_mouseX() + this.get_scrollH(), this.get_mouseY(), !1), this.__selectionIndex = this.__getOppositeIdentifierBound(a, !1), this.__specialSelectionInitialIndex = a) :
                        this.__selectionIndex = this.__caretIndex = this.__getPosition(this.get_mouseX() + this.get_scrollH(), this.get_mouseY()), this.setSelection(this.__caretIndex, this.__selectionIndex), this.__updateLayout(), ea.__supportDOM || (this.__dirty = !0, this.__renderDirty || (this.__renderDirty = !0, this.__setParentRenderDirty())), null != this.stage && (this.stage.addEventListener("enterFrame", m(this, this.this_onEnterFrame)), this.stage.addEventListener("mouseMove", m(this, this.stage_onMouseMove)), this.stage.addEventListener("mouseUp",
                        m(this, this.stage_onMouseUp)))
                },
                this_onMouseWheel: function (a) {
                    this.get_mouseWheelEnabled() && this.set_scrollV(Math.min(this.get_scrollV() - a.delta, this.get_maxScrollV()) | 0)
                },
                window_onKeyDown: function (a, b) {
                    switch (a) {
                        case 8:
                            this.__selectionIndex == this.__caretIndex && 0 < this.__caretIndex && (this.__selectionIndex = this.__caretIndex - 1);
                            this.__selectionIndex != this.__caretIndex ? (this.replaceSelectedText(""), this.__selectionIndex = this.__caretIndex, this.dispatchEvent(new ua("change", !0))) : (this.__stopCursorTimer(),
                                this.__startCursorTimer());
                            break;
                        case 97:
                            this.get_selectable() && (gb.get_metaKey(b) || gb.get_ctrlKey(b)) && this.setSelection(0, this.__text.length);
                            break;
                        case 99:
                            if (gb.get_metaKey(b) || gb.get_ctrlKey(b)) this.__caretIndex == this.__selectionIndex || this.get_displayAsPassword() || kc.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex));
                            break;
                        case 120:
                            !gb.get_metaKey(b) && !gb.get_ctrlKey(b) || this.__caretIndex == this.__selectionIndex || this.get_displayAsPassword() || (kc.set_text(this.__text.substring(this.__caretIndex,
                                this.__selectionIndex)), this.replaceSelectedText(""), this.dispatchEvent(new ua("change", !0)));
                            break;
                        case 127:
                            this.__selectionIndex == this.__caretIndex && this.__caretIndex < this.__text.length && (this.__selectionIndex = this.__caretIndex + 1);
                            this.__selectionIndex != this.__caretIndex ? (this.replaceSelectedText(""), this.__selectionIndex = this.__caretIndex, this.dispatchEvent(new ua("change", !0))) : (this.__stopCursorTimer(), this.__startCursorTimer());
                            break;
                        case 1073741898:
                            this.get_selectable() && (gb.get_metaKey(b) ||
                            gb.get_ctrlKey(b) ? this.__caretIndex = 0 : this.__caretBeginningOfLine(), gb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex), this.setSelection(this.__selectionIndex, this.__caretIndex));
                            break;
                        case 1073741901:
                            this.get_selectable() && (gb.get_metaKey(b) || gb.get_ctrlKey(b) ? this.__caretIndex = this.__text.length : this.__caretEndOfLine(), gb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex), this.setSelection(this.__selectionIndex, this.__caretIndex));
                            break;
                        case 1073741903:
                            this.get_selectable() &&
                            (gb.get_metaKey(b) || gb.get_ctrlKey(b) ? this.__caretBeginningOfNextLine() : this.__caretNextCharacter(), gb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex), this.setSelection(this.__selectionIndex, this.__caretIndex));
                            break;
                        case 1073741904:
                            this.get_selectable() && (gb.get_metaKey(b) || gb.get_ctrlKey(b) ? this.__caretBeginningOfPreviousLine() : this.__caretPreviousCharacter(), gb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex), this.setSelection(this.__selectionIndex, this.__caretIndex));
                            break;
                        case 1073741905:
                            this.get_selectable() && (gb.get_metaKey(b) || gb.get_ctrlKey(b) ? this.__caretIndex = this.__text.length : this.__caretNextLine(), gb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex), this.setSelection(this.__selectionIndex, this.__caretIndex));
                            break;
                        case 1073741906:
                            this.get_selectable() && (gb.get_metaKey(b) || gb.get_ctrlKey(b) ? this.__caretIndex = 0 : this.__caretPreviousLine(), gb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex), this.setSelection(this.__selectionIndex, this.__caretIndex));
                            break;
                        case 13:
                        case 1073741912:
                            this.__textEngine.multiline ? (a = new Fe("textInput", !0, !0, "\n"), this.dispatchEvent(a), a.isDefaultPrevented() || (this.__replaceSelectedText("\n", !0), this.dispatchEvent(new ua("change", !0)))) : (this.__stopCursorTimer(), this.__startCursorTimer())
                    }
                },
                window_onTextInput: function (a) {
                    this.__replaceSelectedText(a, !0);
                    this.dispatchEvent(new ua("change", !0))
                },
                __class__: Yc,
                __properties__: w(xa.prototype.__properties__, {
                    set_wordWrap: "set_wordWrap",
                    set_textColor: "set_textColor",
                    set_restrict: "set_restrict",
                    set_borderColor: "set_borderColor",
                    set_border: "set_border",
                    set_backgroundColor: "set_backgroundColor",
                    set_background: "set_background",
                    set_autoSize: "set_autoSize",
                    set_type: "set_type",
                    get_type: "get_type",
                    get_textWidth: "get_textWidth",
                    get_textHeight: "get_textHeight",
                    set_text: "set_text",
                    get_text: "get_text",
                    set_selectable: "set_selectable",
                    get_selectable: "get_selectable",
                    set_scrollV: "set_scrollV",
                    get_scrollV: "get_scrollV",
                    set_scrollH: "set_scrollH",
                    get_scrollH: "get_scrollH",
                    get_numLines: "get_numLines",
                    set_multiline: "set_multiline",
                    get_multiline: "get_multiline",
                    get_mouseWheelEnabled: "get_mouseWheelEnabled",
                    get_maxScrollV: "get_maxScrollV",
                    get_maxScrollH: "get_maxScrollH",
                    get_length: "get_length",
                    set_htmlText: "set_htmlText",
                    get_htmlText: "get_htmlText",
                    get_displayAsPassword: "get_displayAsPassword",
                    set_defaultTextFormat: "set_defaultTextFormat",
                    get_defaultTextFormat: "get_defaultTextFormat",
                    get_caretIndex: "get_caretIndex",
                    get_bottomScrollV: "get_bottomScrollV"
                })
            });
            var Le = function (a, b, c, d, g, f, k, h, l, r, n, t, y) {
                this.set_font(a);
                this.set_size(b);
                this.color = c;
                this.set_bold(d);
                this.set_italic(g);
                this.underline = f;
                this.url = k;
                this.target = h;
                this.align = l;
                this.leftMargin = r;
                this.rightMargin = n;
                this.indent = t;
                this.leading = y
            };
            h["openfl.text.TextFormat"] = Le;
            Le.__name__ = "openfl.text.TextFormat";
            Le.prototype = {
                clone: function () {
                    var a = new Le(this.font, this.size, this.color, this.bold, this.italic, this.underline, this.url, this.target);
                    a.align = this.align;
                    a.leftMargin = this.leftMargin;
                    a.rightMargin = this.rightMargin;
                    a.indent = this.indent;
                    a.leading = this.leading;
                    a.blockIndent =
                        this.blockIndent;
                    a.bullet = this.bullet;
                    a.kerning = this.kerning;
                    a.letterSpacing = this.letterSpacing;
                    a.tabStops = this.tabStops;
                    a.strikethrough = this.strikethrough;
                    a.__ascent = this.__ascent;
                    a.__descent = this.__descent;
                    a.__cacheKey = this.__toCacheKey();
                    return a
                },
                __merge: function (a) {
                    null != a.font && this.set_font(a.font);
                    null != a.size && this.set_size(a.size);
                    null != a.color && (this.color = a.color);
                    null != a.bold && this.set_bold(a.bold);
                    null != a.italic && this.set_italic(a.italic);
                    null != a.underline && (this.underline = a.underline);
                    null != a.url && (this.url = a.url);
                    null != a.target && (this.target = a.target);
                    null != a.align && (this.align = a.align);
                    null != a.leftMargin && (this.leftMargin = a.leftMargin);
                    null != a.rightMargin && (this.rightMargin = a.rightMargin);
                    null != a.indent && (this.indent = a.indent);
                    null != a.leading && (this.leading = a.leading);
                    null != a.blockIndent && (this.blockIndent = a.blockIndent);
                    null != a.bullet && (this.bullet = a.bullet);
                    null != a.kerning && (this.kerning = a.kerning);
                    null != a.letterSpacing && (this.letterSpacing = a.letterSpacing);
                    null != a.tabStops &&
                    (this.tabStops = a.tabStops);
                    null != a.strikethrough && (this.strikethrough = a.strikethrough);
                    null != a.__ascent && (this.__ascent = a.__ascent);
                    null != a.__descent && (this.__descent = a.__descent);
                    this.__toCacheKey()
                },
                __toCacheKey: function () {
                    return this.__cacheKey = "" + this.font + this.size + E.string(this.bold) + E.string(this.italic)
                },
                set_font: function (a) {
                    this.font != a && (this.font = a, this.__toCacheKey());
                    return this.font
                },
                set_size: function (a) {
                    this.size != a && (this.size = a, this.__toCacheKey());
                    return this.size
                },
                set_bold: function (a) {
                    this.bold !=
                    a && (this.bold = a, this.__toCacheKey());
                    return this.bold
                },
                set_italic: function (a) {
                    this.italic != a && (this.italic = a, this.__toCacheKey());
                    return this.italic
                },
                __class__: Le,
                __properties__: {
                    set_size: "set_size",
                    set_italic: "set_italic",
                    set_font: "set_font",
                    set_bold: "set_bold"
                }
            };
            var Jm = {
                    fromString: function (a) {
                        switch (a) {
                            case "center":
                                return 0;
                            case "end":
                                return 1;
                            case "justify":
                                return 2;
                            case "left":
                                return 3;
                            case "right":
                                return 4;
                            case "start":
                                return 5;
                            default:
                                return null
                        }
                    }
                },
                Dh = function (a, b) {
                    this.__collisions = [];
                    this.__wordMap =
                        new Ec;
                    this.set(a, b)
                };
            h["openfl.text._internal.CacheMeasurement"] = Dh;
            Dh.__name__ = "openfl.text._internal.CacheMeasurement";
            Dh.prototype = {
                set: function (a, b) {
                    this.__addCollision(a, b)
                },
                get: function (a) {
                    return 1 < this.__collisions.length ? this.__wordMap.h[this.__collisions.indexOf(a)] : this.__wordMap.h[0]
                },
                __addCollision: function (a, b) {
                    if (!this.exists(a)) {
                        var c = this.__wordMap;
                        a = this.__collisions.push(a) - 1;
                        c.h[a] = b
                    }
                },
                exists: function (a) {
                    return 0 == this.__collisions.length ? !1 : -1 < this.__collisions.indexOf(a)
                },
                __class__: Dh
            };
            var Na = function () {
            };
            h["openfl.text._internal.HTMLParser"] = Na;
            Na.__name__ = "openfl.text._internal.HTMLParser";
            Na.parse = function (a, b, c, d, g) {
                a = b ? a.replace(Na.__regexBreakTag.r, "\n") : a.replace(Na.__regexBreakTag.r, "");
                a = a.replace(Na.__regexEntityNbsp.r, " ");
                a = Na.__regexCharEntity.map(a, function (a) {
                    var b = a.matched(1),
                        c = a.matched(2);
                    return null != b && (b = E.parseInt(b), null != b) ? String.fromCodePoint(b) : null != c && (c = E.parseInt("0" + c), null != c) ? String.fromCodePoint(c) : a.matched(0)
                });
                var f = a.split("<");
                if (1 == f.length) {
                    a =
                        Na.__htmlUnescape(a.replace(Na.__regexHTMLTag.r, ""));
                    if (1 < g.get_length()) {
                        var k = g.get_length() - 1;
                        g.__tempIndex = 1;
                        for (var h = 0, l = []; h < l.length;) {
                            var r = l[h++];
                            g.insertAt(g.__tempIndex, r);
                            g.__tempIndex++
                        }
                        g.splice(g.__tempIndex, k)
                    }
                    b = g.get(0);
                    b.format = d;
                    b.start = 0;
                    b.end = a.length
                } else {
                    k = g.get_length();
                    h = g.__tempIndex = 0;
                    for (l = []; h < l.length;) r = l[h++], g.insertAt(g.__tempIndex, r), g.__tempIndex++;
                    g.splice(g.__tempIndex, k);
                    a = "";
                    k = [d.clone()];
                    h = [];
                    r = !1;
                    for (l = 0; l < f.length;) {
                        var n = f[l];
                        ++l;
                        if ("" != n) {
                            var t = "/" == M.substr(n,
                                    0, 1),
                                y = n.indexOf(">"),
                                p = y + 1,
                                u = n.indexOf(" ");
                            u = n.substring(t ? 1 : 0, -1 < u && u < y ? u : y).toLowerCase();
                            if (t) 0 != h.length && u == h[h.length - 1] && (h.pop(), k.pop(), t = k[k.length - 1].clone(), ("p" == u || "li" == u) && 0 < g.get_length() && (b && (a += "\n"), r = !0), p < n.length && (r = Na.__htmlUnescape(M.substr(n, p, null)), g.push(new zd(t, a.length, a.length + r.length)), a += r, r = !1));
                            else if (t = k[k.length - 1].clone(), -1 < y) {
                                null != c && (c.__applyStyle(u, t), Na.__regexClass.match(n) && (c.__applyStyle("." + Na.__getAttributeMatch(Na.__regexClass), t), c.__applyStyle(u +
                                    "." + Na.__getAttributeMatch(Na.__regexClass), t)));
                                switch (u) {
                                    case "a":
                                        null != c && c.__applyStyle("a:link", t);
                                        Na.__regexHref.match(n) && (t.url = Na.__getAttributeMatch(Na.__regexHref));
                                        break;
                                    case "b":
                                        t.set_bold(!0);
                                        break;
                                    case "em":
                                    case "i":
                                        t.set_italic(!0);
                                        break;
                                    case "font":
                                        Na.__regexFace.match(n) && t.set_font(Na.__getAttributeMatch(Na.__regexFace));
                                        Na.__regexColor.match(n) && (t.color = E.parseInt("0x" + Na.__getAttributeMatch(Na.__regexColor)));
                                        if (Na.__regexSize.match(n)) {
                                            y = Na.__getAttributeMatch(Na.__regexSize);
                                            var z = M.cca(y, 0);
                                            43 == z || 45 == z ? t.set_size((2 <= k.length ? k[k.length - 2] : d).size + E.parseInt(y)) : t.set_size(E.parseInt(y))
                                        }
                                        break;
                                    case "li":
                                        0 < g.get_length() && !r && (a += "\n");
                                        y = t.clone();
                                        y.underline = !1;
                                        g.push(new zd(y, a.length, a.length + 2));
                                        a += "\u2022 ";
                                        break;
                                    case "p":
                                        0 < g.get_length() && !r && (a += "\n");
                                        Na.__regexAlign.match(n) && (y = Na.__getAttributeMatch(Na.__regexAlign).toLowerCase(), t.align = Jm.fromString(y));
                                        break;
                                    case "textformat":
                                        Na.__regexBlockIndent.match(n) && (t.blockIndent = E.parseInt(Na.__getAttributeMatch(Na.__regexBlockIndent)));
                                        Na.__regexIndent.match(n) && (t.indent = E.parseInt(Na.__getAttributeMatch(Na.__regexIndent)));
                                        Na.__regexLeading.match(n) && (t.leading = E.parseInt(Na.__getAttributeMatch(Na.__regexLeading)));
                                        Na.__regexLeftMargin.match(n) && (t.leftMargin = E.parseInt(Na.__getAttributeMatch(Na.__regexLeftMargin)));
                                        Na.__regexRightMargin.match(n) && (t.rightMargin = E.parseInt(Na.__getAttributeMatch(Na.__regexRightMargin)));
                                        if (Na.__regexTabStops.match(n)) {
                                            y = Na.__getAttributeMatch(Na.__regexTabStops).split(" ");
                                            z = [];
                                            for (var x = 0; x <
                                            y.length;) {
                                                var A = y[x];
                                                ++x;
                                                z.push(E.parseInt(A))
                                            }
                                            t.tabStops = z
                                        }
                                        break;
                                    case "u":
                                        t.underline = !0
                                }
                                k.push(t);
                                h.push(u);
                                p < n.length && (r = Na.__htmlUnescape(n.substring(p)), g.push(new zd(t, a.length, a.length + r.length)), a += r, r = !1)
                            } else r = Na.__htmlUnescape(n), g.push(new zd(t, a.length, a.length + r.length)), a += r, r = !1
                        }
                    }
                    0 == g.get_length() && g.push(new zd(k[0], 0, 0))
                }
                return a
            };
            Na.__getAttributeMatch = function (a) {
                return null != a.matched(2) ? a.matched(2) : a.matched(3)
            };
            Na.__htmlUnescape = function (a) {
                a = a.replace(Na.__regexEntityApos.r,
                    "'");
                return T.htmlUnescape(a)
            };
            var Sg = function () {
                this.__shortWordMap = new ab;
                this.__longWordMap = new ab
            };
            h["openfl.text._internal.ShapeCache"] = Sg;
            Sg.__name__ = "openfl.text._internal.ShapeCache";
            Sg.hashFunction = function (a) {
                for (var b = 0, c, d = 0, g = a.length; d < g;) c = d++, c = M.cca(a, c), b = (b << 5) - b + c, b |= 0;
                return b
            };
            Sg.prototype = {
                cache: function (a, b, c) {
                    a = a.format.__cacheKey;
                    return 15 < c.length ? this.__cacheLongWord(c, a, b) : this.__cacheShortWord(c, a, b)
                },
                __cacheShortWord: function (a, b, c) {
                    if (Object.prototype.hasOwnProperty.call(this.__shortWordMap.h,
                        b)) {
                        var d = this.__shortWordMap.h[b];
                        if (Object.prototype.hasOwnProperty.call(d.h, a)) return d.h[a];
                        var g = c();
                        d.h[a] = g
                    } else d = new ab, g = c(), d.h[a] = g, this.__shortWordMap.h[b] = d;
                    return c()
                },
                __cacheLongWord: function (a, b, c) {
                    var d = Sg.hashFunction(a);
                    if (Object.prototype.hasOwnProperty.call(this.__longWordMap.h, b)) {
                        var g = this.__longWordMap.h[b];
                        if (g.h.hasOwnProperty(d)) {
                            var f = g.h[d];
                            if (f.exists(a)) return f.get(a);
                            f.set(a, c())
                        } else f = new Dh(a, c()), g.h[d] = f
                    } else g = new Ec, f = new Dh(a, c()), f.hash = d, g.h[d] = f, this.__longWordMap.h[b] =
                        g;
                    return c()
                },
                __class__: Sg
            };
            var Bb = function (a) {
                this.__shapeCache = new Sg;
                this.textField = a;
                this.height = this.width = 100;
                this.set_text("");
                this.bounds = new sa(0, 0, 0, 0);
                this.textBounds = new sa(0, 0, 0, 0);
                this.type = 0;
                this.autoSize = 2;
                this.embedFonts = !1;
                this.selectable = !0;
                this.borderColor = 0;
                this.border = !1;
                this.backgroundColor = 16777215;
                this.background = !1;
                this.gridFitType = 1;
                this.maxChars = 0;
                this.multiline = !1;
                this.numLines = 1;
                this.scrollH = this.sharpness = 0;
                this.set_scrollV(1);
                this.wordWrap = !1;
                this.lineAscents = pa.toFloatVector(null);
                this.lineBreaks = pa.toIntVector(null);
                this.lineDescents = pa.toFloatVector(null);
                this.lineLeadings = pa.toFloatVector(null);
                this.lineHeights = pa.toFloatVector(null);
                this.lineWidths = pa.toFloatVector(null);
                this.layoutGroups = pa.toObjectVector(null);
                this.textFormatRanges = pa.toObjectVector(null);
                null == Bb.__context && (Bb.__context = window.document.createElement("canvas").getContext("2d"))
            };
            h["openfl.text._internal.TextEngine"] = Bb;
            Bb.__name__ = "openfl.text._internal.TextEngine";
            Bb.__context = null;
            Bb.findFont = function (a) {
                return ya.__fontByName.h[a]
            };
            Bb.findFontVariant = function (a) {
                var b = a.font,
                    c = a.bold;
                a = a.italic;
                null == b && (b = "_serif");
                var d = T.replace(T.replace(b, " Normal", ""), " Regular", "");
                return c && a && Object.prototype.hasOwnProperty.call(ya.__fontByName.h, d + " Bold Italic") ? Bb.findFont(d + " Bold Italic") : c && Object.prototype.hasOwnProperty.call(ya.__fontByName.h, d + " Bold") ? Bb.findFont(d + " Bold") : a && Object.prototype.hasOwnProperty.call(ya.__fontByName.h, d + " Italic") ? Bb.findFont(d + " Italic") : Bb.findFont(b)
            };
            Bb.getFormatHeight = function (a) {
                var b = Bb.getFont(a);
                Bb.__context.font = b;
                b = Bb.getFontInstance(a);
                if (null != a.__ascent) {
                    var c = a.size * a.__ascent;
                    b = a.size * a.__descent
                } else null != b && 0 != b.unitsPerEM ? (c = b.ascender / b.unitsPerEM * a.size, b = Math.abs(b.descender / b.unitsPerEM * a.size)) : (c = a.size, b = .185 * a.size);
                return c + b + a.leading
            };
            Bb.getFont = function (a) {
                var b = a.font,
                    c = a.bold,
                    d = a.italic;
                null == b && (b = "_serif");
                var g = T.replace(T.replace(b, " Normal", ""), " Regular", "");
                c && d && Object.prototype.hasOwnProperty.call(ya.__fontByName.h, g + " Bold Italic") ? (b = g + " Bold Italic", d =
                    c = !1) : c && Object.prototype.hasOwnProperty.call(ya.__fontByName.h, g + " Bold") ? (b = g + " Bold", c = !1) : d && Object.prototype.hasOwnProperty.call(ya.__fontByName.h, g + " Italic") ? (b = g + " Italic", d = !1) : (c && (-1 < b.indexOf(" Bold ") || T.endsWith(b, " Bold")) && (c = !1), d && (-1 < b.indexOf(" Italic ") || T.endsWith(b, " Italic")) && (d = !1));
                c = (d ? "italic " : "normal ") + "normal " + (c ? "bold " : "normal ");
                c += a.size + "px";
                c += "/" + (a.size + 3) + "px ";
                switch (b) {
                    case "_sans":
                        a = "sans-serif";
                        break;
                    case "_serif":
                        a = "serif";
                        break;
                    case "_typewriter":
                        a =
                            "monospace";
                        break;
                    default:
                        a = "'" + b.replace(/^[\s'"]+(.*)[\s'"]+$/, "$1") + "'"
                }
                return c += "" + a
            };
            Bb.getFontInstance = function (a) {
                return Bb.findFontVariant(a)
            };
            Bb.prototype = {
                createRestrictRegexp: function (a) {
                    var b = "",
                        c = !1;
                    a = (new Ya("\\^([^\\^]+)", "gu")).map(a, function (a) {
                        if (c) return c = !c, a.matched(1);
                        b += a.matched(1);
                        c = !c;
                        return ""
                    });
                    var d = [];
                    0 < a.length && d.push("[^" + a + "]");
                    0 < b.length && d.push("[" + b + "]");
                    return new Ya("(" + d.join("|") + ")", "g")
                },
                getBounds: function () {
                    var a = this.border ? 1 : 0;
                    this.bounds.width = this.width +
                        a;
                    this.bounds.height = this.height + a;
                    a = this.width;
                    for (var b = this.height, c = this.layoutGroups.get_length() - 1, d = 0, g = this.layoutGroups.get_length(); d < g;) {
                        var f = d++,
                            k = this.layoutGroups.get(f);
                        if (f != c || k.startIndex != k.endIndex || 1 == this.type) k.offsetX < a && (a = k.offsetX), k.offsetY < b && (b = k.offsetY)
                    }
                    a >= this.width && (a = 2);
                    b >= this.height && (b = 2);
                    this.textBounds.setTo(Math.max(a - 2, 0), Math.max(b - 2, 0), Math.min(this.textWidth + 4, this.bounds.width), Math.min(1.185 * this.textHeight + 4, this.bounds.height))
                },
                getLineBreaks: function () {
                    this.lineBreaks.set_length(0);
                    for (var a = -1, b; a < this.text.length;)
                        if (b = this.text.indexOf("\n", a + 1), a = this.text.indexOf("\r", a + 1), a = -1 == a ? b : -1 == b ? a : a < b ? a : b, -1 < a) this.lineBreaks.push(a);
                        else break
                },
                getLineMeasurements: function () {
                    this.lineAscents.set_length(0);
                    this.lineDescents.set_length(0);
                    this.lineLeadings.set_length(0);
                    this.lineHeights.set_length(0);
                    this.lineWidths.set_length(0);
                    var a = 0,
                        b = 0,
                        c = null,
                        d = 0,
                        g = 0;
                    this.textHeight = this.textWidth = 0;
                    this.numLines = 1;
                    this.maxScrollH = 0;
                    for (var f = this.layoutGroups.get_length() - 1, k = 0, h = this.layoutGroups.get_length(); k <
                    h;) {
                        var l = k++;
                        var r = this.layoutGroups.get(l);
                        if (l != f || r.startIndex != r.endIndex || 1 == this.type) {
                            for (; r.lineIndex > this.numLines - 1;) this.lineAscents.push(a), this.lineDescents.push(b), this.lineLeadings.push(null != c ? c : 0), this.lineHeights.push(d), this.lineWidths.push(g), b = a = 0, c = null, g = d = 0, this.numLines++;
                            a = Math.max(a, r.ascent);
                            b = Math.max(b, r.descent);
                            c = null == c ? r.leading : Math.max(c, r.leading) | 0;
                            d = Math.max(d, r.height);
                            g = r.offsetX - 2 + r.width;
                            g > this.textWidth && (this.textWidth = g);
                            l = Math.ceil(r.offsetY - 2 + r.ascent +
                                r.descent);
                            l > this.textHeight && (this.textHeight = l)
                        }
                    }
                    0 == this.textHeight && null != this.textField && 1 == this.type && (a = this.textField.__textFormat, b = Bb.getFontInstance(a), null != a.__ascent ? (f = a.size * a.__ascent, k = a.size * a.__descent) : null != b && 0 != b.unitsPerEM ? (f = b.ascender / b.unitsPerEM * a.size, k = Math.abs(b.descender / b.unitsPerEM * a.size)) : (f = a.size, k = .185 * a.size), c = a.leading, a = f, b = k, this.textHeight = l = Math.ceil(f + k));
                    this.lineAscents.push(a);
                    this.lineDescents.push(b);
                    this.lineLeadings.push(null != c ? c : 0);
                    this.lineHeights.push(d);
                    this.lineWidths.push(g);
                    1 == this.numLines && 0 < c && (this.textHeight += c);
                    if (2 != this.autoSize) switch (this.autoSize) {
                        case 0:
                        case 1:
                        case 3:
                            this.wordWrap || (this.width = this.textWidth + 4), this.height = this.textHeight + 4, this.bottomScrollV = this.numLines
                    }
                    this.maxScrollH = this.textWidth > this.width - 4 ? this.textWidth - this.width + 4 | 0 : 0;
                    this.scrollH > this.maxScrollH && (this.scrollH = this.maxScrollH)
                },
                getLayoutGroups: function () {
                    var a = this;
                    this.layoutGroups.set_length(0);
                    if (null != this.text && "" != this.text) {
                        var b = -1,
                            c = null,
                            d = null,
                            g = Yc.__defaultTextFormat.clone(),
                            f = 0,
                            k = 0,
                            h = 0,
                            l = 0,
                            r = 3,
                            n = 0,
                            t = 0,
                            y = 0,
                            p = 0,
                            u = !0,
                            z = null,
                            x = null,
                            A = 0,
                            Q = 0,
                            m = 0,
                            O = -2,
                            N = -1,
                            v = this.text.indexOf(" "),
                            w = 0,
                            F = w < this.lineBreaks.get_length() ? this.lineBreaks.get(w) : -1,
                            D = 0,
                            H = 0,
                            ta = 0,
                            I = 0,
                            E = function (b, d, f) {
                                var k = function () {
                                    var c = [];
                                    if (null == a.__useIntAdvances) {
                                        var g = new Ya("Trident/7.0", "");
                                        a.__useIntAdvances = g.match(B.navigator.userAgent)
                                    }
                                    if (a.__useIntAdvances) {
                                        var k = 0;
                                        g = d;
                                        for (var l = f; g < l;) {
                                            var h = g++;
                                            h = a.measureText(b.substring(d, h + 1));
                                            c.push(h - k);
                                            k = h
                                        }
                                    } else
                                        for (g = d, l = f; g <
                                        l;) h = g++, h < b.length - 1 ? (k = a.measureText(b.charAt(h + 1)), k = a.measureText(M.substr(b, h, 2)) - k) : k = Bb.__context.measureText(b.charAt(h)).width, c.push(k);
                                    return c
                                };
                                return 2 == g.align ? k() : a.__shapeCache.cache(c, k, b.substring(d, f))
                            },
                            J = function (a) {
                                for (var b = 0, c = 0; c < a.length;) {
                                    var d = a[c];
                                    ++c;
                                    b += d
                                }
                                return b
                            },
                            R = function () {
                                return 2 + y + n + (u ? t : 0)
                            },
                            ha = function () {
                                return a.width - 2 - p - R()
                            },
                            jc = function (b, d) {
                                null == z || z.startIndex != z.endIndex ? (z = new nk(c.format, b, d), a.layoutGroups.push(z)) : (z.format = c.format, z.startIndex = b,
                                    z.endIndex = d)
                            },
                            rc = function () {
                                null != g.__ascent ? (k = g.size * g.__ascent, l = g.size * g.__descent) : null != d && 0 != d.unitsPerEM ? (k = d.ascender / d.unitsPerEM * g.size, l = Math.abs(d.descender / d.unitsPerEM * g.size)) : (k = g.size, l = .185 * g.size);
                                f = g.leading;
                                Q = Math.ceil(k + l + f);
                                Q > m && (m = Q);
                                k > h && (h = k)
                            },
                            na = function () {
                                u = !0;
                                r = null != g.align ? g.align : 3;
                                n = null != g.blockIndent ? g.blockIndent : 0;
                                t = null != g.indent ? g.indent : 0;
                                y = null != g.leftMargin ? g.leftMargin : 0;
                                p = null != g.rightMargin ? g.rightMargin : 0
                            },
                            C = function () {
                                if (b < a.textFormatRanges.get_length() -
                                    1) {
                                    b += 1;
                                    c = a.textFormatRanges.get(b);
                                    g.__merge(c.format);
                                    var f = Bb.getFont(g);
                                    Bb.__context.font = f;
                                    d = Bb.getFontInstance(g);
                                    return !0
                                }
                                return !1
                            },
                            P = function (d, f) {
                                if (d >= f) x = [], A = 0;
                                else if (f <= c.end) x = E(a.text, d, f), A = J(x);
                                else {
                                    var g = d;
                                    d = c.end;
                                    var k = 0;
                                    x = [];
                                    for (A = 0; ;)
                                        if (g != d && (g = E(a.text, g, d), x = x.concat(g)), d != f) {
                                            if (!C()) {
                                                Wa.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {

                                                    className: "openfl.text._internal.TextEngine",
                                                    methodName: "getLayoutGroups"
                                                });
                                                break
                                            }
                                            g = d;
                                            d = f < c.end ? f : c.end;
                                            ++k
                                        } else {
                                            A = J(x);
                                            break
                                        }
                                    b -= k + 1;
                                    C()
                                }
                            },
                            kb = function (b) {
                                if (b <= c.end) {
                                    x = E(a.text, ta, b);
                                    A = J(x);
                                    jc(ta, b);
                                    z.positions = x;
                                    var d = D,
                                        g = R();
                                    z.offsetX = d + g;
                                    z.ascent = k;
                                    z.descent = l;
                                    z.leading = f;
                                    z.lineIndex = I;
                                    z.offsetY = H + 2;
                                    z.width = A;
                                    z.height = Q;
                                    D += A;
                                    b == c.end && (z = null, C(), rc())
                                } else
                                    for (; ;) {
                                        var h = b < c.end ? b : c.end;
                                        ta != h && (x = E(a.text, ta, h), A = J(x), jc(ta, h), z.positions = x, d = D, g = R(), z.offsetX = d + g, z.ascent = k, z.descent = l, z.leading =
                                            f, z.lineIndex = I, z.offsetY = H + 2, z.width = A, z.height = Q, D += A, ta = h);
                                        h == c.end && (z = null);
                                        if (h == b) break;
                                        if (!C()) {
                                            Wa.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {

                                                className: "openfl.text._internal.TextEngine",
                                                methodName: "getLayoutGroups"
                                            });
                                            break
                                        }
                                        rc()
                                    }
                                ta = b
                            },
                            L = function () {
                                rc();
                                for (var b = a.layoutGroups.get_length(); -1 < --b;) {
                                    var c = a.layoutGroups.get(b);
                                    if (c.lineIndex <
                                        I) break;
                                    c.lineIndex > I || (c.ascent = h, c.height = m)
                                }
                                H += m;
                                m = h = 0;
                                I += 1;
                                D = 0;
                                u = !1
                            },
                            G = function (b) {
                                if (4 <= a.width && a.wordWrap) {
                                    var c = x;
                                    var d = J(c);
                                    for (var f = c.length - 1; 0 <= f;) {
                                        var g = M.cca(a.text, ta + f);
                                        if (32 != g && 9 != g) break;
                                        d -= c[f];
                                        --f
                                    }
                                    for (; 0 < c.length && D + d > ha();) {
                                        for (g = f = d = 0; D + g < ha();) {
                                            var k = c[f];
                                            0 == k ? (++f, ++d) : (g += k, ++f)
                                        }
                                        if (f == d) f = d + 1;
                                        else
                                            for (; 1 < f && D + g > ha();) --f, 0 < f - d ? (P(ta, ta + f - d), g = A) : (f = 1, d = 0, P(ta, ta + 1), g = 0);
                                        c = ta + f - d;
                                        kb(c);
                                        L();
                                        P(c, b);
                                        c = x;
                                        d = A
                                    }
                                }
                                kb(b)
                            };
                        C();
                        na();
                        rc();
                        for (var K, la = this.text.length + 1; ta < la;)
                            if (-1 <
                                F && (-1 == v || F < v)) ta <= F ? (P(ta, F), G(F), z = null) : null != z && z.startIndex != z.endIndex && (z.endIndex == v && (z.width -= z.positions[z.positions.length - 1]), z = null), L(), c.end == F && (C(), rc()), ta = F + 1, N = F, ++w, F = w < this.lineBreaks.get_length() ? this.lineBreaks.get(w) : -1, na();
                            else if (-1 < v)
                                for (null != z && z.startIndex != z.endIndex && (z = null), K = !1; ta < this.text.length;) {
                                    var S = -1;
                                    -
                                        1 == v ? S = F : (S = v + 1, -1 < F && F < S && (S = F));
                                    -
                                        1 == S && (S = this.text.length);
                                    P(ta, S);
                                    if (2 == r) {
                                        if (0 < x.length && ta == O) {
                                            ta += 1;
                                            var Jb = x.shift();
                                            A -= Jb;
                                            D += Jb
                                        }
                                        0 < x.length && S ==
                                        v + 1 && (--S, Jb = x.pop(), A -= Jb)
                                    }
                                    this.wordWrap && D + A > ha() && (K = !0, 0 < x.length && S == v + 1 && D + A - x[x.length - 1] <= ha() && (K = !1));
                                    if (K) {
                                        2 != r && (null != z || 0 < this.layoutGroups.get_length()) && (K = z, null == K && (K = this.layoutGroups.get(this.layoutGroups.get_length() - 1)), K.width -= K.positions[K.positions.length - 1], K.endIndex--);
                                        K = this.layoutGroups.get_length() - 1;
                                        for (Jb = 0; 0 <= K;) {
                                            z = this.layoutGroups.get(K);
                                            if (0 < K && z.startIndex > O) ++Jb;
                                            else break;
                                            --K
                                        }
                                        ta == O + 1 && L();
                                        D = 0;
                                        if (0 < Jb) {
                                            K = this.layoutGroups.get(this.layoutGroups.get_length() -
                                                Jb).offsetX;
                                            Jb = this.layoutGroups.get_length() - Jb;
                                            for (var W = this.layoutGroups.get_length(); Jb < W;) {
                                                var lc = Jb++;
                                                z = this.layoutGroups.get(lc);
                                                z.offsetX -= K;
                                                z.offsetY = H + 2;
                                                z.lineIndex = I;
                                                D += z.width
                                            }
                                        }
                                        G(S);
                                        K = !1
                                    } else null != z && ta == v && O != v - 1 ? (2 != r && (z.endIndex = v, z.positions = z.positions.concat(x), z.width += A), D += A, ta = S) : null == z || 2 == r ? (G(S), S == this.text.length && L()) : (Jb = S < c.end ? S : c.end, Jb < S && (x = E(this.text, ta, Jb), A = J(x)), z.endIndex = Jb, z.positions = z.positions.concat(x), z.width += A, D += A, Jb == c.end && (z = null, C(), rc(), ta =
                                        Jb, Jb != S && kb(S)), F == S && ++S, ta = S, S == this.text.length && (L(), -1 != F && (N = F, ++w, F = w < this.lineBreaks.get_length() ? this.lineBreaks.get(w) : -1)));
                                    S = this.text.indexOf(" ", ta);
                                    F == O && (z.endIndex = F, 0 > F - z.startIndex - z.positions.length && z.positions.push(0), ta = F + 1);
                                    O = v;
                                    v = S;
                                    if (-1 < F && F <= ta && (v > F || -1 == v) || ta > this.text.length) break
                                } else ta < this.text.length && (P(ta, this.text.length), G(this.text.length), L()), ta += 1;
                        N == ta - 2 && -1 < N && (jc(ta - 1, ta - 1), z.positions = [], z.ascent = k, z.descent = l, z.leading = f, z.lineIndex = I, z.offsetX = R(),
                            z.offsetY = H + 2, z.width = 0, z.height = Q)
                    }
                },
                measureText: function (a) {
                    return Bb.__context.measureText(a).width
                },
                restrictText: function (a) {
                    if (null == a) return a;
                    null != this.__restrictRegexp && (a = this.__restrictRegexp.split(a).join(""));
                    return a
                },
                setTextAlignment: function () {
                    for (var a = -1, b = 0, c, d, g = !1, f = 0, k = this.layoutGroups.get_length(); f < k;) {
                        var h = f++;
                        c = this.layoutGroups.get(h);
                        if (c.lineIndex != a) switch (a = c.lineIndex, b = this.width - 4 - c.format.rightMargin, c.format.align) {
                            case 0:
                                b = this.lineWidths.get(a) < b ? Math.round((b -
                                    this.lineWidths.get(a)) / 2) : 0;
                                break;
                            case 2:
                                if (this.lineWidths.get(a) < b) {
                                    d = 1;
                                    for (var l = h + 1, r = this.layoutGroups.get_length(); l < r;) {
                                        var n = l++;
                                        if (this.layoutGroups.get(n).lineIndex == a) 0 != n && 32 != M.cca(this.text, this.layoutGroups.get(n).startIndex - 1) || ++d;
                                        else break
                                    }
                                    if (1 < d && (c = this.layoutGroups.get(h + d - 1), l = M.cca(this.text, c.endIndex), c.endIndex < this.text.length && 10 != l && 13 != l)) {
                                        b = (b - this.lineWidths.get(a)) / (d - 1);
                                        g = !0;
                                        l = 1;
                                        do this.layoutGroups.get(h + l).offsetX += b * l; while (++l < d)
                                    }
                                }
                                b = 0;
                                break;
                            case 4:
                                b = this.lineWidths.get(a) <
                                b ? Math.round(b - this.lineWidths.get(a)) : 0;
                                break;
                            default:
                                b = 0
                        }
                        0 < b && (c.offsetX += b)
                    }
                    g && this.getLineMeasurements()
                },
                update: function () {
                    null == this.text || 0 == this.textFormatRanges.get_length() ? (this.lineAscents.set_length(0), this.lineBreaks.set_length(0), this.lineDescents.set_length(0), this.lineLeadings.set_length(0), this.lineHeights.set_length(0), this.lineWidths.set_length(0), this.layoutGroups.set_length(0), this.textHeight = this.textWidth = 0, this.numLines = 1, this.maxScrollH = 0, this.bottomScrollV = this.maxScrollV =
                        1) : (this.getLineBreaks(), this.getLayoutGroups(), this.getLineMeasurements(), this.setTextAlignment());
                    this.getBounds()
                },
                get_bottomScrollV: function () {
                    if (1 == this.numLines || null == this.lineHeights) return 1;
                    for (var a = this.lineHeights.get_length(), b = this.lineLeadings.get_length() == a ? -this.lineLeadings.get(a - 1) : 0, c = (0 < this.get_scrollV() ? this.get_scrollV() : 1) - 1, d = this.lineHeights.get_length(); c < d;) {
                        var g = c++,
                            f = this.lineHeights.get(g);
                        b += f;
                        if (b > this.height - 4) {
                            a = g + (0 <= b - this.height ? 0 : 1);
                            break
                        }
                    }
                    return a < this.get_scrollV() ?
                        this.get_scrollV() : a
                },
                get_maxScrollV: function () {
                    if (1 == this.numLines || null == this.lineHeights) return 1;
                    for (var a = this.numLines - 1, b = 0; 0 <= a;) {
                        b += this.lineHeights.get(a);
                        if (b > this.height - 4) {
                            a += 0 > b - this.height ? 1 : 2;
                            break
                        }
                        --a
                    }
                    return 1 > a ? 1 : a
                },
                set_restrict: function (a) {
                    if (this.restrict == a) return this.restrict;
                    this.restrict = a;
                    this.__restrictRegexp = null == this.restrict || 0 == this.restrict.length ? null : this.createRestrictRegexp(a);
                    return this.restrict
                },
                get_scrollV: function () {
                    if (1 == this.numLines || null == this.lineHeights) return 1;
                    var a = this.get_maxScrollV();
                    return this.scrollV > a ? a : this.scrollV
                },
                set_scrollV: function (a) {
                    1 > a ? a = 1 : a > this.get_maxScrollV() && (a = this.get_maxScrollV());
                    return this.scrollV = a
                },
                set_text: function (a) {
                    return this.text = a
                },
                __class__: Bb,
                __properties__: {
                    set_text: "set_text",
                    set_scrollV: "set_scrollV",
                    get_scrollV: "get_scrollV",
                    set_restrict: "set_restrict",
                    get_maxScrollV: "get_maxScrollV",
                    get_bottomScrollV: "get_bottomScrollV"
                }
            };
            var zd = function (a, b, c) {
                this.format = a;
                this.start = b;
                this.end = c
            };
            h["openfl.text._internal.TextFormatRange"] =
                zd;
            zd.__name__ = "openfl.text._internal.TextFormatRange";
            zd.prototype = {
                __class__: zd
            };
            var nk = function (a, b, c) {
                this.format = a;
                this.startIndex = b;
                this.endIndex = c
            };
            h["openfl.text._internal.TextLayoutGroup"] = nk;
            nk.__name__ = "openfl.text._internal.TextLayoutGroup";
            nk.prototype = {
                __class__: nk
            };
            var eb = function () {
                oa.call(this);
                eb.__instances.push(this)
            };
            h["openfl.ui.GameInput"] = eb;
            eb.__name__ = "openfl.ui.GameInput";
            eb.__getDevice = function (a) {
                if (null == a) return null;
                if (null == eb.__devices.h.__keys__[a.__id__]) {
                    var b =
                        new Ol(a.__jsGamepad.id, a.__jsGamepad.id);
                    eb.__deviceList.push(b);
                    eb.__devices.set(a, b);
                    eb.numDevices = eb.__deviceList.length
                }
                return eb.__devices.h[a.__id__]
            };
            eb.__onGamepadAxisMove = function (a, b, c) {
                a = eb.__getDevice(a);
                if (null != a && a.enabled) {
                    if (!a.__axis.h.hasOwnProperty(b)) {
                        if (null == b) var d = "null";
                        else switch (b) {
                            case 0:
                                d = "LEFT_X";
                                break;
                            case 1:
                                d = "LEFT_Y";
                                break;
                            case 2:
                                d = "RIGHT_X";
                                break;
                            case 3:
                                d = "RIGHT_Y";
                                break;
                            case 4:
                                d = "TRIGGER_LEFT";
                                break;
                            case 5:
                                d = "TRIGGER_RIGHT";
                                break;
                            default:
                                d = "UNKNOWN (" + b + ")"
                        }
                        d =
                            new Vd(a, "AXIS_" + d, -1, 1);
                        a.__axis.h[b] = d;
                        a.__controls.push(d)
                    }
                    d = a.__axis.h[b];
                    d.value = c;
                    d.dispatchEvent(new ua("change"))
                }
            };
            eb.__onGamepadButtonDown = function (a, b) {
                a = eb.__getDevice(a);
                if (null != a && a.enabled) {
                    if (!a.__button.h.hasOwnProperty(b)) {
                        if (null == b) var c = "null";
                        else switch (b) {
                            case 0:
                                c = "A";
                                break;
                            case 1:
                                c = "B";
                                break;
                            case 2:
                                c = "X";
                                break;
                            case 3:
                                c = "Y";
                                break;
                            case 4:
                                c = "BACK";
                                break;
                            case 5:
                                c = "GUIDE";
                                break;
                            case 6:
                                c = "START";
                                break;
                            case 7:
                                c = "LEFT_STICK";
                                break;
                            case 8:
                                c = "RIGHT_STICK";
                                break;
                            case 9:
                                c = "LEFT_SHOULDER";
                                break;
                            case 10:
                                c = "RIGHT_SHOULDER";
                                break;
                            case 11:
                                c = "DPAD_UP";
                                break;
                            case 12:
                                c = "DPAD_DOWN";
                                break;
                            case 13:
                                c = "DPAD_LEFT";
                                break;
                            case 14:
                                c = "DPAD_RIGHT";
                                break;
                            default:
                                c = "UNKNOWN (" + b + ")"
                        }
                        c = new Vd(a, "BUTTON_" + c, 0, 1);
                        a.__button.h[b] = c;
                        a.__controls.push(c)
                    }
                    c = a.__button.h[b];
                    c.value = 1;
                    c.dispatchEvent(new ua("change"))
                }
            };
            eb.__onGamepadButtonUp = function (a, b) {
                a = eb.__getDevice(a);
                if (null != a && a.enabled) {
                    if (!a.__button.h.hasOwnProperty(b)) {
                        if (null == b) var c = "null";
                        else switch (b) {
                            case 0:
                                c = "A";
                                break;
                            case 1:
                                c = "B";
                                break;
                            case 2:
                                c = "X";
                                break;
                            case 3:
                                c = "Y";
                                break;
                            case 4:
                                c = "BACK";
                                break;
                            case 5:
                                c = "GUIDE";
                                break;
                            case 6:
                                c = "START";
                                break;
                            case 7:
                                c = "LEFT_STICK";
                                break;
                            case 8:
                                c = "RIGHT_STICK";
                                break;
                            case 9:
                                c = "LEFT_SHOULDER";
                                break;
                            case 10:
                                c = "RIGHT_SHOULDER";
                                break;
                            case 11:
                                c = "DPAD_UP";
                                break;
                            case 12:
                                c = "DPAD_DOWN";
                                break;
                            case 13:
                                c = "DPAD_LEFT";
                                break;
                            case 14:
                                c = "DPAD_RIGHT";
                                break;
                            default:
                                c = "UNKNOWN (" + b + ")"
                        }
                        c = new Vd(a, "BUTTON_" + c, 0, 1);
                        a.__button.h[b] = c;
                        a.__controls.push(c)
                    }
                    c = a.__button.h[b];
                    c.value = 0;
                    c.dispatchEvent(new ua("change"))
                }
            };
            eb.__onGamepadConnect =
                function (a) {
                    a = eb.__getDevice(a);
                    if (null != a)
                        for (var b = 0, c = eb.__instances; b < c.length;) {
                            var d = c[b];
                            ++b;
                            d.dispatchEvent(new Pg("deviceAdded", !0, !1, a))
                        }
                };
            eb.__onGamepadDisconnect = function (a) {
                var b = eb.__devices.h[a.__id__];
                if (null != b) {
                    null != eb.__devices.h.__keys__[a.__id__] && (M.remove(eb.__deviceList, eb.__devices.h[a.__id__]), eb.__devices.remove(a));
                    eb.numDevices = eb.__deviceList.length;
                    a = 0;
                    for (var c = eb.__instances; a < c.length;) {
                        var d = c[a];
                        ++a;
                        d.dispatchEvent(new Pg("deviceRemoved", !0, !1, b))
                    }
                }
            };
            eb.__super__ =
                oa;
            eb.prototype = w(oa.prototype, {
                addEventListener: function (a, b, c, d, g) {
                    null == g && (g = !1);
                    null == d && (d = 0);
                    null == c && (c = !1);
                    oa.prototype.addEventListener.call(this, a, b, c, d, g);
                    if ("deviceAdded" == a)
                        for (a = 0, b = eb.__deviceList; a < b.length;) c = b[a], ++a, this.dispatchEvent(new Pg("deviceAdded", !0, !1, c))
                },
                __class__: eb
            });
            var Vd = function (a, b, c, d, g) {
                null == g && (g = 0);
                oa.call(this);
                this.device = a;
                this.id = b;
                this.minValue = c;
                this.maxValue = d;
                this.value = g
            };
            h["openfl.ui.GameInputControl"] = Vd;
            Vd.__name__ = "openfl.ui.GameInputControl";
            Vd.__super__ = oa;
            Vd.prototype = w(oa.prototype, {
                __class__: Vd
            });
            var Ol = function (a, b) {
                this.__controls = [];
                this.__button = new Ec;
                this.__axis = new Ec;
                this.id = a;
                this.name = b;
                a = new Vd(this, "AXIS_0", -1, 1);
                this.__axis.h[0] = a;
                this.__controls.push(a);
                a = new Vd(this, "AXIS_1", -1, 1);
                this.__axis.h[1] = a;
                this.__controls.push(a);
                a = new Vd(this, "AXIS_2", -1, 1);
                this.__axis.h[2] = a;
                this.__controls.push(a);
                a = new Vd(this, "AXIS_3", -1, 1);
                this.__axis.h[3] = a;
                this.__controls.push(a);
                a = new Vd(this, "AXIS_4", -1, 1);
                this.__axis.h[4] = a;
                this.__controls.push(a);
                a = new Vd(this, "AXIS_5", -1, 1);
                this.__axis.h[5] = a;
                this.__controls.push(a);
                for (b = 0; 15 > b;) {
                    var c = b++;
                    a = new Vd(this, "BUTTON_" + c, 0, 1);
                    this.__button.h[c] = a;
                    this.__controls.push(a)
                }
            };
            h["openfl.ui.GameInputDevice"] = Ol;
            Ol.__name__ = "openfl.ui.GameInputDevice";
            Ol.prototype = {
                __class__: Ol
            };
            var im = function () {
            };
            h["openfl.ui.Keyboard"] = im;
            im.__name__ = "openfl.ui.Keyboard";
            im.__getCharCode = function (a, b, c) {
                null == c && (c = !1);
                null == b && (b = !1);
                var d = b;
                65 <= a && 90 >= a && (d = b != c);
                if (d) {
                    switch (a) {
                        case 48:
                            return 41;
                        case 49:
                            return 33;
                        case 50:
                            return 64;
                        case 51:
                            return 35;
                        case 52:
                            return 36;
                        case 53:
                            return 37;
                        case 54:
                            return 94;
                        case 55:
                            return 38;
                        case 56:
                            return 42;
                        case 57:
                            return 40;
                        case 186:
                            return 58;
                        case 187:
                            return 43;
                        case 188:
                            return 60;
                        case 189:
                            return 95;
                        case 190:
                            return 62;
                        case 191:
                            return 63;
                        case 192:
                            return 126;
                        case 219:
                            return 123;
                        case 220:
                            return 124;
                        case 221:
                            return 125;
                        case 222:
                            return 34
                    }
                    if (65 <= a && 90 >= a) return a - 65 + 65
                } else {
                    switch (a) {
                        case 8:
                            return 8;
                        case 9:
                            return 9;
                        case 13:
                            return 13;
                        case 27:
                            return 27;
                        case 32:
                            return 32;
                        case 186:
                            return 59;
                        case 187:
                            return 61;
                        case 188:
                            return 44;
                        case 189:
                            return 45;
                        case 190:
                            return 46;
                        case 191:
                            return 47;
                        case 192:
                            return 96;
                        case 219:
                            return 91;
                        case 220:
                            return 92;
                        case 221:
                            return 93;
                        case 222:
                            return 39
                    }
                    if (48 <= a && 57 >= a) return a - 48 + 48;
                    if (65 <= a && 90 >= a) return a - 65 + 97
                }
                if (96 <= a && 105 >= a) return a - 96 + 48;
                switch (a) {
                    case 8:
                        return 8;
                    case 13:
                        return 13;
                    case 46:
                        return 127;
                    case 106:
                        return 42;
                    case 107:
                        return 43;
                    case 108:
                        return 44;
                    case 110:
                        return 45;
                    case 111:
                        return 46
                }
                return 0
            };
            var Vj = function () {
            };
            h["openfl.ui.Mouse"] = Vj;
            Vj.__name__ =
                "openfl.ui.Mouse";
            Vj.__hidden = null;
            var Hm = {
                    toLimeCursor: function (a) {
                        switch (a) {
                            case "arrow":
                                return xb.ARROW;
                            case "auto":
                                return xb.DEFAULT;
                            case "button":
                                return xb.POINTER;
                            case "crosshair":
                                return xb.CROSSHAIR;
                            case "custom":
                                return xb.CUSTOM;
                            case "hand":
                                return xb.MOVE;
                            case "ibeam":
                                return xb.TEXT;
                            case "resize_nesw":
                                return xb.RESIZE_NESW;
                            case "resize_ns":
                                return xb.RESIZE_NS;
                            case "resize_nwse":
                                return xb.RESIZE_NWSE;
                            case "resize_we":
                                return xb.RESIZE_WE;
                            case "wait":
                                return xb.WAIT;
                            case "waitarrow":
                                return xb.WAIT_ARROW;
                            default:
                                return xb.DEFAULT
                        }
                    }
                },
                ra = function (a) {
                    null == a && (a = !1);
                    this.debugEnabled = a;
                    ra.initialized || ra.init()
                };
            h["openfl.utils.AGALMiniAssembler"] = ra;
            ra.__name__ = "openfl.utils.AGALMiniAssembler";
            ra.init = function () {
                ra.initialized = !0;
                var a = ra.OPMAP,
                    b = new Cb("mov", 2, 0, 0);
                a.h.mov = b;
                a = ra.OPMAP;
                b = new Cb("add", 3, 1, 0);
                a.h.add = b;
                a = ra.OPMAP;
                b = new Cb("sub", 3, 2, 0);
                a.h.sub = b;
                a = ra.OPMAP;
                b = new Cb("mul", 3, 3, 0);
                a.h.mul = b;
                a = ra.OPMAP;
                b = new Cb("div", 3, 4, 0);
                a.h.div = b;
                a = ra.OPMAP;
                b = new Cb("rcp", 2, 5, 0);
                a.h.rcp = b;
                a = ra.OPMAP;
                b = new Cb("min", 3, 6, 0);
                a.h.min = b;
                a = ra.OPMAP;
                b = new Cb("max", 3, 7, 0);
                a.h.max = b;
                a = ra.OPMAP;
                b = new Cb("frc", 2, 8, 0);
                a.h.frc = b;
                a = ra.OPMAP;
                b = new Cb("sqt", 2, 9, 0);
                a.h.sqt = b;
                a = ra.OPMAP;
                b = new Cb("rsq", 2, 10, 0);
                a.h.rsq = b;
                a = ra.OPMAP;
                b = new Cb("pow", 3, 11, 0);
                a.h.pow = b;
                a = ra.OPMAP;
                b = new Cb("log", 2, 12, 0);
                a.h.log = b;
                a = ra.OPMAP;
                b = new Cb("exp", 2, 13, 0);
                a.h.exp = b;
                a = ra.OPMAP;
                b = new Cb("nrm", 2, 14, 0);
                a.h.nrm = b;
                a = ra.OPMAP;
                b = new Cb("sin", 2, 15, 0);
                a.h.sin = b;
                a = ra.OPMAP;
                b = new Cb("cos", 2, 16, 0);
                a.h.cos = b;
                a = ra.OPMAP;
                b = new Cb("crs", 3, 17, 0);
                a.h.crs = b;
                a = ra.OPMAP;
                b = new Cb("dp3", 3, 18, 0);
                a.h.dp3 = b;
                a = ra.OPMAP;
                b = new Cb("dp4", 3, 19, 0);
                a.h.dp4 = b;
                a = ra.OPMAP;
                b = new Cb("abs", 2, 20, 0);
                a.h.abs = b;
                a = ra.OPMAP;
                b = new Cb("neg", 2, 21, 0);
                a.h.neg = b;
                a = ra.OPMAP;
                b = new Cb("sat", 2, 22, 0);
                a.h.sat = b;
                a = ra.OPMAP;
                b = new Cb("m33", 3, 23, 16);
                a.h.m33 = b;
                a = ra.OPMAP;
                b = new Cb("m44", 3, 24, 16);
                a.h.m44 = b;
                a = ra.OPMAP;
                b = new Cb("m34", 3, 25, 16);
                a.h.m34 = b;
                a = ra.OPMAP;
                b = new Cb("ddx", 2, 26, 288);
                a.h.ddx = b;
                a = ra.OPMAP;
                b = new Cb("ddy", 2, 27, 288);
                a.h.ddy = b;
                a = ra.OPMAP;
                b = new Cb("ife", 2, 28, 897);
                a.h.ife =
                    b;
                a = ra.OPMAP;
                b = new Cb("ine", 2, 29, 897);
                a.h.ine = b;
                a = ra.OPMAP;
                b = new Cb("ifg", 2, 30, 897);
                a.h.ifg = b;
                a = ra.OPMAP;
                b = new Cb("ifl", 2, 31, 897);
                a.h.ifl = b;
                a = ra.OPMAP;
                b = new Cb("els", 0, 32, 1921);
                a.h.els = b;
                a = ra.OPMAP;
                b = new Cb("eif", 0, 33, 1409);
                a.h.eif = b;
                a = ra.OPMAP;
                b = new Cb("kil", 1, 39, 160);
                a.h.kil = b;
                a = ra.OPMAP;
                b = new Cb("tex", 3, 40, 40);
                a.h.tex = b;
                a = ra.OPMAP;
                b = new Cb("sge", 3, 41, 0);
                a.h.sge = b;
                a = ra.OPMAP;
                b = new Cb("slt", 3, 42, 0);
                a.h.slt = b;
                a = ra.OPMAP;
                b = new Cb("sgn", 2, 43, 0);
                a.h.sgn = b;
                a = ra.OPMAP;
                b = new Cb("seq", 3, 44, 0);
                a.h.seq = b;
                a = ra.OPMAP;
                b = new Cb("sne", 3, 45, 0);
                a.h.sne = b;
                a = ra.SAMPLEMAP;
                b = new ic("rgba", 8, 0);
                a.h.rgba = b;
                a = ra.SAMPLEMAP;
                b = new ic("compressed", 8, 1);
                a.h.compressed = b;
                a = ra.SAMPLEMAP;
                b = new ic("compressedalpha", 8, 2);
                a.h.compressedalpha = b;
                a = ra.SAMPLEMAP;
                b = new ic("dxt1", 8, 1);
                a.h.dxt1 = b;
                a = ra.SAMPLEMAP;
                b = new ic("dxt5", 8, 2);
                a.h.dxt5 = b;
                a = ra.SAMPLEMAP;
                b = new ic("video", 8, 3);
                a.h.video = b;
                a = ra.SAMPLEMAP;
                b = new ic("2d", 12, 0);
                a.h["2d"] = b;
                a = ra.SAMPLEMAP;
                b = new ic("3d", 12, 2);
                a.h["3d"] = b;
                a = ra.SAMPLEMAP;
                b = new ic("cube", 12, 1);
                a.h.cube =
                    b;
                a = ra.SAMPLEMAP;
                b = new ic("mipnearest", 24, 1);
                a.h.mipnearest = b;
                a = ra.SAMPLEMAP;
                b = new ic("miplinear", 24, 2);
                a.h.miplinear = b;
                a = ra.SAMPLEMAP;
                b = new ic("mipnone", 24, 0);
                a.h.mipnone = b;
                a = ra.SAMPLEMAP;
                b = new ic("nomip", 24, 0);
                a.h.nomip = b;
                a = ra.SAMPLEMAP;
                b = new ic("nearest", 28, 0);
                a.h.nearest = b;
                a = ra.SAMPLEMAP;
                b = new ic("linear", 28, 1);
                a.h.linear = b;
                a = ra.SAMPLEMAP;
                b = new ic("anisotropic2x", 28, 2);
                a.h.anisotropic2x = b;
                a = ra.SAMPLEMAP;
                b = new ic("anisotropic4x", 28, 3);
                a.h.anisotropic4x = b;
                a = ra.SAMPLEMAP;
                b = new ic("anisotropic8x",
                    28, 4);
                a.h.anisotropic8x = b;
                a = ra.SAMPLEMAP;
                b = new ic("anisotropic16x", 28, 5);
                a.h.anisotropic16x = b;
                a = ra.SAMPLEMAP;
                b = new ic("centroid", 16, 1);
                a.h.centroid = b;
                a = ra.SAMPLEMAP;
                b = new ic("single", 16, 2);
                a.h.single = b;
                a = ra.SAMPLEMAP;
                b = new ic("ignoresampler", 16, 4);
                a.h.ignoresampler = b;
                a = ra.SAMPLEMAP;
                b = new ic("repeat", 20, 1);
                a.h.repeat = b;
                a = ra.SAMPLEMAP;
                b = new ic("wrap", 20, 1);
                a.h.wrap = b;
                a = ra.SAMPLEMAP;
                b = new ic("clamp", 20, 0);
                a.h.clamp = b;
                a = ra.SAMPLEMAP;
                b = new ic("clamp_u_repeat_v", 20, 2);
                a.h.clamp_u_repeat_v = b;
                a = ra.SAMPLEMAP;
                b = new ic("repeat_u_clamp_v", 20, 3);
                a.h.repeat_u_clamp_v = b
            };
            ra.prototype = {
                assemble: function (a, b, c, d) {
                    null == d && (d = !1);
                    null == c && (c = 1);
                    var g = db.getTimer();
                    this.agalcode = new Xc(0);
                    this.error = "";
                    var f = !1;
                    "fragment" == a ? f = !0 : "vertex" != a && (this.error = 'ERROR: mode needs to be "fragment" or "vertex" but is "' + a + '".');
                    this.agalcode.__endian = 1;
                    this.agalcode.writeByte(160);
                    this.agalcode.writeUnsignedInt(c);
                    this.agalcode.writeByte(161);
                    this.agalcode.writeByte(f ? 1 : 0);
                    this.initregmap(c, d);
                    a = T.replace(b, "\r", "\n").split("\n");
                    b = 0;
                    d = a.length;
                    for (var k = new Ya("<.*>", "g"), h = new Ya("([\\w\\.\\-\\+]+)", "gi"), l = new Ya("^\\w{3}", "ig"), r = new Ya("vc\\[([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw](\\+\\d{1,3})?)?\\](\\.[xyzw]{1,4})?|([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw]{1,4})?", "gi"), n = new Ya("\\[.*\\]", "ig"), t = new Ya("^\\b[A-Za-z]{1,3}", "ig"), y = new Ya("\\d+", ""), p = new Ya("(\\.[xyzw]{1,4})", ""), z = new Ya("[A-Za-z]{1,3}", "ig"), u = new Ya("(\\.[xyzw]{1,1})", ""), x = new Ya("\\+\\d{1,3}", "ig"), A = 0; A < d && "" == this.error;) {
                        var Q = T.trim(a[A]),
                            m = Q.indexOf("//");
                        -
                            1 != m && (Q = M.substr(Q, 0, m));
                        var O = k.match(Q) ? k.matchedPos().pos : -1;
                        m = null;
                        -
                            1 != O && (m = this.match(M.substr(Q, O, null), h), Q = M.substr(Q, 0, O));
                        var v = null;
                        l.match(Q) && (O = l.matched(0), v = ra.OPMAP.h[O]);
                        if (null == v) 3 <= Q.length && Wa.warn("warning: bad line " + A + ": " + a[A], {

                            className: "openfl.utils.AGALMiniAssembler",
                            methodName: "assemble"
                        });
                        else if (this.debugEnabled && Wa.info(v, {

                            className: "openfl.utils.AGALMiniAssembler",
                            methodName: "assemble"
                        }), null == v) 3 <= Q.length && Wa.warn("warning: bad line " + A + ": " + a[A], {

                            className: "openfl.utils.AGALMiniAssembler",
                            methodName: "assemble"
                        });
                        else {
                            Q = M.substr(Q, Q.indexOf(v.name) + v.name.length, null);
                            if (0 != (v.flags & 256) && 2 > c) {
                                this.error = "error: opcode requires version 2.";
                                break
                            }
                            if (0 != (v.flags & 64) && f) {
                                this.error = "error: opcode is only allowed in vertex programs.";
                                break
                            }
                            if (0 != (v.flags & 32) && !f) {
                                this.error = "error: opcode is only allowed in fragment programs.";
                                break
                            }
                            this.verbose && Wa.info("emit opcode=" + E.string(v), {

                                className: "openfl.utils.AGALMiniAssembler",
                                methodName: "assemble"
                            });
                            this.agalcode.writeUnsignedInt(v.emitCode);
                            ++b;
                            if (4096 < b) {
                                this.error = "error: too many opcodes. maximum is 4096.";
                                break
                            }
                            var N = this.match(Q, r);
                            if (N.length != v.numRegister) {
                                this.error = "error: wrong number of operands. found " + N.length + " but expected " + v.numRegister + ".";
                                break
                            }
                            var w = !1,
                                F = 160;
                            Q = 0;
                            for (O = N.length; Q < O;) {
                                var D =
                                        Q++,
                                    H = !1,
                                    ta = this.match(N[D], n);
                                0 < ta.length && (N[D] = T.replace(N[D], ta[0], "0"), this.verbose && Wa.info("IS REL", {

                                    className: "openfl.utils.AGALMiniAssembler",
                                    methodName: "assemble"
                                }), H = !0);
                                var I = this.match(N[D], t);
                                if (0 == I.length) {
                                    this.error = "error: could not parse operand " + D + " (" + N[D] + ").";
                                    w = !0;
                                    break
                                }
                                var J = ra.REGMAP.h[I[0]];
                                this.debugEnabled && Wa.info(J, {

                                    className: "openfl.utils.AGALMiniAssembler",
                                    methodName: "assemble"
                                });
                                if (null == J) {
                                    this.error = "error: could not find register name for operand " + D + " (" + N[D] + ").";
                                    w = !0;
                                    break
                                }
                                if (f) {
                                    if (0 == (J.flags & 32)) {
                                        this.error = "error: register operand " + D + " (" + N[D] + ") only allowed in vertex programs.";
                                        w = !0;
                                        break
                                    }
                                    if (H) {
                                        this.error = "error: register operand " + D + " (" + N[D] + ") relative adressing not allowed in fragment programs.";
                                        w = !0;
                                        break
                                    }
                                } else if (0 == (J.flags & 64)) {
                                    this.error = "error: register operand " + D + " (" + N[D] + ") only allowed in fragment programs.";
                                    w = !0;
                                    break
                                }
                                N[D] =
                                    M.substr(N[D], N[D].indexOf(J.name) + J.name.length, null);
                                var R = H ? this.match(ta[0], y) : this.match(N[D], y);
                                I = 0;
                                0 < R.length && (I = E.parseInt(R[0]));
                                if (Ja.gt(I, J.range)) {
                                    Q = J.range + 1;
                                    this.error = "error: register operand " + D + " (" + N[D] + ") index exceeds limit of " + (null == Q ? "null" : E.string(Ja.toFloat(Q))) + ".";
                                    w = !0;
                                    break
                                }
                                var ha = this.match(N[D], p),
                                    jc = 0 == D && 0 == (v.flags & 128),
                                    rc = 2 == D && 0 != (v.flags & 8),
                                    na = 0,
                                    B = 0,
                                    C = 0;
                                if (jc && H) {
                                    this.error = "error: relative can not be destination";
                                    w = !0;
                                    break
                                }
                                if (0 < ha.length) {
                                    for (var P = R = 0, K = ha[0].length,
                                             kb = 1; kb < K;) P = M.cca(ha[0], kb) - 120, Ja.gt(P, 2) && (P = 3), R = jc ? R | 1 << P : R | P << (kb - 1 << 1), ++kb;
                                    if (!jc)
                                        for (; 4 >= kb;) R |= P << (kb - 1 << 1), ++kb
                                } else R = jc ? 15 : 228;
                                if (H) {
                                    ha = this.match(ta[0], z);
                                    na = ra.REGMAP.h[ha[0]];
                                    if (null == na) {
                                        this.error = "error: bad index register";
                                        w = !0;
                                        break
                                    }
                                    na = na.emitCode;
                                    P = this.match(ta[0], u);
                                    if (0 == P.length) {
                                        this.error = "error: bad index register select";
                                        w = !0;
                                        break
                                    }
                                    B = M.cca(P[0], 1) - 120;
                                    Ja.gt(B, 2) && (B = 3);
                                    ta = this.match(ta[0], x);
                                    0 < ta.length && (C = E.parseInt(ta[0]));
                                    if (0 > C || 255 < C) {
                                        this.error = "error: index offset " +
                                            C + " out of bounds. [0..255]";
                                        w = !0;
                                        break
                                    }
                                    this.verbose && Wa.info("RELATIVE: type=" + na + "==" + ha[0] + " sel=" + (null == B ? "null" : E.string(Ja.toFloat(B))) + "==" + P[0] + " idx=" + (null == I ? "null" : E.string(Ja.toFloat(I))) + " offset=" + C, {

                                        className: "openfl.utils.AGALMiniAssembler",
                                        methodName: "assemble"
                                    })
                                }
                                this.verbose && Wa.info("  emit argcode=" + E.string(J) + "[" + (null == I ? "null" : E.string(Ja.toFloat(I))) + "][" + R + "]", {

                                    className: "openfl.utils.AGALMiniAssembler",
                                    methodName: "assemble"
                                });
                                if (jc) this.agalcode.writeShort(I), this.agalcode.writeByte(R), this.agalcode.writeByte(J.emitCode), F -= 32;
                                else {
                                    if (rc) {
                                        this.verbose && Wa.info("  emit sampler", {

                                            className: "openfl.utils.AGALMiniAssembler",
                                            methodName: "assemble"
                                        });
                                        D = 5;
                                        ta = H = 0;
                                        for (J = null == m ? 0 : m.length; ta < J;) R = ta++, this.verbose && Wa.info("    opt: " + m[R], {

                                            className: "openfl.utils.AGALMiniAssembler",
                                            methodName: "assemble"
                                        }), jc = ra.SAMPLEMAP.h[m[R]], null == jc ? (H = parseFloat(m[R]), this.verbose && Wa.info("    bias: " + H, {

                                            className: "openfl.utils.AGALMiniAssembler",
                                            methodName: "assemble"
                                        })) : (16 != jc.flag && (D &= ~(15 << jc.flag)), D |= jc.mask << jc.flag);
                                        this.agalcode.writeShort(I);
                                        this.agalcode.writeByte(8 * H | 0);
                                        this.agalcode.writeByte(0);
                                        this.agalcode.writeUnsignedInt(D);
                                        this.verbose && Wa.info("    bits: " + (D - 5), {

                                            className: "openfl.utils.AGALMiniAssembler",
                                            methodName: "assemble"
                                        })
                                    } else 0 == D && (this.agalcode.writeUnsignedInt(0), F -= 32), this.agalcode.writeShort(I), this.agalcode.writeByte(C), this.agalcode.writeByte(R), this.agalcode.writeByte(J.emitCode), this.agalcode.writeByte(na), this.agalcode.writeShort(H ? B | 32768 : 0);
                                    F -= 64
                                }
                            }
                            for (Q = 0; Q < F;) this.agalcode.writeByte(0), Q += 8;
                            if (w) break
                        }
                        ++A
                    }
                    "" != this.error && (this.error += "\n  at line " + A + " " + a[A], Pd.set_length(this.agalcode, 0), Wa.info(this.error, {
                        className: "openfl.utils.AGALMiniAssembler",
                        methodName: "assemble"
                    }));
                    if (this.debugEnabled) {
                        c = "generated bytecode:";
                        f = Pd.get_length(this.agalcode);
                        Q = 0;
                        for (O = f; Q < O;) f = Q++, 0 == f % 16 && (c += "\n"), 0 == f % 4 && (c += " "), f = T.hex(this.agalcode.b[f], 2), 2 > f.length && (f = "0" + f), c += f;
                        Wa.info(c, {

                            className: "openfl.utils.AGALMiniAssembler",
                            methodName: "assemble"
                        })
                    }
                    this.verbose && Wa.info("AGALMiniAssembler.assemble time: " + (db.getTimer() - g) / 1E3 + "s", {
                        className: "openfl.utils.AGALMiniAssembler",
                        methodName: "assemble"
                    });
                    return this.agalcode
                },
                initregmap: function (a, b) {
                    var c = ra.REGMAP,
                        d = new Ld("va", "vertex attribute", 0, b ? 1024 : 1 == a || 2 == a ? 7 : 15, 66);
                    c.h.va = d;
                    c = ra.REGMAP;
                    d = new Ld("vc", "vertex constant", 1, b ? 1024 : 1 == a ? 127 : 249, 66);
                    c.h.vc = d;
                    c = ra.REGMAP;
                    d = new Ld("vt", "vertex temporary", 2, b ? 1024 : 1 == a ? 7 : 25, 67);
                    c.h.vt = d;
                    c = ra.REGMAP;
                    d = new Ld("vo", "vertex output", 3, b ? 1024 : 0, 65);
                    c.h.vo = d;
                    c = ra.REGMAP;
                    d = new Ld("vi", "varying", 4, b ? 1024 : 1 == a ? 7 : 9, 99);
                    c.h.vi =
                        d;
                    c = ra.REGMAP;
                    d = new Ld("fc", "fragment constant", 1, b ? 1024 : 1 == a ? 27 : 2 == a ? 63 : 199, 34);
                    c.h.fc = d;
                    c = ra.REGMAP;
                    d = new Ld("ft", "fragment temporary", 2, b ? 1024 : 1 == a ? 7 : 25, 35);
                    c.h.ft = d;
                    c = ra.REGMAP;
                    d = new Ld("fs", "texture sampler", 5, b ? 1024 : 7, 34);
                    c.h.fs = d;
                    c = ra.REGMAP;
                    d = new Ld("fo", "fragment output", 3, b ? 1024 : 1 == a ? 0 : 3, 33);
                    c.h.fo = d;
                    c = ra.REGMAP;
                    d = new Ld("fd", "fragment depth output", 6, b ? 1024 : 1 == a ? -1 : 0, 33);
                    c.h.fd = d;
                    c = ra.REGMAP;
                    d = new Ld("iid", "instance id", 7, b ? 1024 : 0, 66);
                    c.h.iid = d;
                    d = ra.REGMAP.h.vo;
                    ra.REGMAP.h.op = d;
                    d = ra.REGMAP.h.vi;
                    ra.REGMAP.h.i = d;
                    d = ra.REGMAP.h.vi;
                    ra.REGMAP.h.v = d;
                    d = ra.REGMAP.h.fo;
                    ra.REGMAP.h.oc = d;
                    d = ra.REGMAP.h.fd;
                    ra.REGMAP.h.od = d;
                    d = ra.REGMAP.h.vi;
                    ra.REGMAP.h.fi = d
                },
                match: function (a, b) {
                    for (var c = [], d = 0; b.matchSub(a, d);) d = b.matched(0), c.push(d), d = b.matchedPos().pos + d.length;
                    return c
                },
                __class__: ra
            };
            var Cb = function (a, b, c, d) {
                this.name = a;
                this.numRegister = b;
                this.emitCode = c;
                this.flags = d
            };
            h["openfl.utils._AGALMiniAssembler.OpCode"] = Cb;
            Cb.__name__ = "openfl.utils._AGALMiniAssembler.OpCode";
            Cb.prototype = {
                toString: function () {
                    return '[OpCode name="' +
                        this.name + '", numRegister=' + this.numRegister + ", emitCode=" + this.emitCode + ", flags=" + this.flags + "]"
                },
                __class__: Cb
            };
            var Ld = function (a, b, c, d, g) {
                this.name = a;
                this.longName = b;
                this.emitCode = c;
                this.range = d;
                this.flags = g
            };
            h["openfl.utils._AGALMiniAssembler.Register"] = Ld;
            Ld.__name__ = "openfl.utils._AGALMiniAssembler.Register";
            Ld.prototype = {
                toString: function () {
                    return '[Register name="' + this.name + '", longName="' + this.longName + '", emitCode=' + (null == this.emitCode ? "null" : E.string(Ja.toFloat(this.emitCode))) + ", range=" +
                        (null == this.range ? "null" : E.string(Ja.toFloat(this.range))) + ", flags=" + (null == this.flags ? "null" : E.string(Ja.toFloat(this.flags))) + "]"
                },
                __class__: Ld
            };
            var ic = function (a, b, c) {
                this.name = a;
                this.flag = b;
                this.mask = c
            };
            h["openfl.utils._AGALMiniAssembler.Sampler"] = ic;
            ic.__name__ = "openfl.utils._AGALMiniAssembler.Sampler";
            ic.prototype = {
                __class__: ic
            };
            var ok = function () {
            };
            h["openfl.utils.IAssetCache"] = ok;
            ok.__name__ = "openfl.utils.IAssetCache";
            ok.__isInterface__ = !0;
            ok.prototype = {
                __class__: ok,
                __properties__: {
                    get_enabled: "get_enabled"
                }
            };
            var pk = function () {
                this.__enabled = !0;
                this.bitmapData = new ab;
                this.font = new ab;
                this.sound = new ab
            };
            h["openfl.utils.AssetCache"] = pk;
            pk.__name__ = "openfl.utils.AssetCache";
            pk.__interfaces__ = [ok];
            pk.prototype = {
                getFont: function (a) {
                    return this.font.h[a]
                },
                hasFont: function (a) {
                    return Object.prototype.hasOwnProperty.call(this.font.h, a)
                },
                setFont: function (a, b) {
                    this.font.h[a] = b
                },
                get_enabled: function () {
                    return this.__enabled
                },
                __class__: pk,
                __properties__: {
                    get_enabled: "get_enabled"
                }
            };
            var $e = function () {
                Nb.call(this)
            };
            h["openfl.utils.AssetLibrary"] = $e;
            $e.__name__ = "openfl.utils.AssetLibrary";
            $e.fromBundle = function (a) {
                a = Nb.fromBundle(a);
                if (null != a) {
                    if (a instanceof $e) return a;
                    var b = new $e;
                    b.__proxy = a;
                    return b
                }
                return null
            };
            $e.fromManifest = function (a) {
                a = Nb.fromManifest(a);
                if (null != a) {
                    if (a instanceof $e) return a;
                    var b = new $e;
                    b.__proxy = a;
                    return b
                }
                return null
            };
            $e.__super__ = Nb;
            $e.prototype = w(Nb.prototype, {
                bind: function (a, b) {
                    return !1
                },
                exists: function (a, b) {
                    return null != this.__proxy ? this.__proxy.exists(a, b) : Nb.prototype.exists.call(this,
                        a, b)
                },
                getAsset: function (a, b) {
                    return null != this.__proxy ? this.__proxy.getAsset(a, b) : Nb.prototype.getAsset.call(this, a, b)
                },
                getAudioBuffer: function (a) {
                    return null != this.__proxy ? this.__proxy.getAudioBuffer(a) : Nb.prototype.getAudioBuffer.call(this, a)
                },
                getBytes: function (a) {
                    return null != this.__proxy ? this.__proxy.getBytes(a) : Nb.prototype.getBytes.call(this, a)
                },
                getFont: function (a) {
                    return null != this.__proxy ? this.__proxy.getFont(a) : Nb.prototype.getFont.call(this, a)
                },
                getImage: function (a) {
                    return null != this.__proxy ?
                        this.__proxy.getImage(a) : Nb.prototype.getImage.call(this, a)
                },
                getPath: function (a) {
                    return null != this.__proxy ? this.__proxy.getPath(a) : Nb.prototype.getPath.call(this, a)
                },
                getText: function (a) {
                    return null != this.__proxy ? this.__proxy.getText(a) : Nb.prototype.getText.call(this, a)
                },
                isLocal: function (a, b) {
                    return null != this.__proxy ? this.__proxy.isLocal(a, b) : Nb.prototype.isLocal.call(this, a, b)
                },
                load: function () {
                    return null != this.__proxy ? this.__proxy.load() : Nb.prototype.load.call(this)
                },
                loadAudioBuffer: function (a) {
                    return null !=
                    this.__proxy ? this.__proxy.loadAudioBuffer(a) : Nb.prototype.loadAudioBuffer.call(this, a)
                },
                loadBytes: function (a) {
                    return null != this.__proxy ? this.__proxy.loadBytes(a) : Nb.prototype.loadBytes.call(this, a)
                },
                loadFont: function (a) {
                    return null != this.__proxy ? this.__proxy.loadFont(a) : Nb.prototype.loadFont.call(this, a)
                },
                loadImage: function (a) {
                    return null != this.__proxy ? this.__proxy.loadImage(a) : Nb.prototype.loadImage.call(this, a)
                },
                loadText: function (a) {
                    return null != this.__proxy ? this.__proxy.loadText(a) : Nb.prototype.loadText.call(this,
                        a)
                },
                unload: function () {
                    null != this.__proxy ? this.__proxy.unload() : Nb.prototype.unload.call(this)
                },
                __class__: $e
            });
            var Yb = function () {
            };
            h["openfl.utils.Assets"] = Yb;
            Yb.__name__ = "openfl.utils.Assets";
            Yb.exists = function (a, b) {
                return Pa.exists(a, b)
            };
            Yb.getFont = function (a, b) {
                null == b && (b = !0);
                if (b && Yb.cache.get_enabled() && Yb.cache.hasFont(a)) return Yb.cache.getFont(a);
                var c = Pa.getFont(a, !1);
                if (null != c) {
                    var d = new ya;
                    d.__fromLimeFont(c);
                    b && Yb.cache.get_enabled() && Yb.cache.setFont(a, d);
                    return d
                }
                return new ya
            };
            Yb.getText =
                function (a) {
                    return Pa.getText(a)
                };
            var Pd = {
                    __properties__: {
                        set_length: "set_length",
                        get_length: "get_length"
                    },
                    fromArrayBuffer: function (a) {
                        return null == a ? null : Xc.fromBytes(Db.ofData(a))
                    },
                    fromBytes: function (a) {
                        return null == a ? null : a instanceof Xc ? a : Xc.fromBytes(a)
                    },
                    toArrayBuffer: function (a) {
                        return a.b.bufferValue
                    },
                    toBytes: function (a) {
                        return a
                    },
                    get_length: function (a) {
                        return null == a ? 0 : a.length
                    },
                    set_length: function (a, b) {
                        0 <= b && (a.__resize(b), b < a.position && (a.position = b));
                        return a.length = b
                    }
                },
                lm = function () {
                };
            h["openfl.utils.IDataOutput"] = lm;
            lm.__name__ = "openfl.utils.IDataOutput";
            lm.__isInterface__ = !0;
            var mm = function () {
            };
            h["openfl.utils.IDataInput"] = mm;
            mm.__name__ = "openfl.utils.IDataInput";
            mm.__isInterface__ = !0;
            var Xc = function (a) {
                null == a && (a = 0);
                var b = new Db(new ArrayBuffer(a));
                Db.call(this, b.b.buffer);
                this.__allocated = a;
                null == Xc.__defaultEndian && (yc.get_endianness() == nj.LITTLE_ENDIAN ? Xc.__defaultEndian = 1 : Xc.__defaultEndian = 0);
                this.__endian = Xc.__defaultEndian;
                this.objectEncoding = Xc.defaultObjectEncoding;
                this.position = 0
            };
            h["openfl.utils.ByteArrayData"] = Xc;
            Xc.__name__ = "openfl.utils.ByteArrayData";
            Xc.__interfaces__ = [lm, mm];
            Xc.fromBytes = function (a) {
                var b = new Xc;
                b.__fromBytes(a);
                return b
            };
            Xc.__super__ = Db;
            Xc.prototype = w(Db.prototype, {
                readByte: function () {
                    var a = this.readUnsignedByte();
                    return 0 != (a & 128) ? a - 256 : a
                },
                readInt: function () {
                    var a = this.readUnsignedByte(),
                        b = this.readUnsignedByte(),
                        c = this.readUnsignedByte(),
                        d = this.readUnsignedByte();
                    return 1 == this.__endian ? d << 24 | c << 16 | b << 8 | a : a << 24 | b << 16 | c << 8 | d
                },
                readUnsignedByte: function () {
                    if (this.position <
                        this.length) return this.b[this.position++];
                    throw new Bh;
                },
                readUnsignedInt: function () {
                    var a = this.readUnsignedByte(),
                        b = this.readUnsignedByte(),
                        c = this.readUnsignedByte(),
                        d = this.readUnsignedByte();
                    return 1 == this.__endian ? d << 24 | c << 16 | b << 8 | a : a << 24 | b << 16 | c << 8 | d
                },
                readUnsignedShort: function () {
                    var a = this.readUnsignedByte(),
                        b = this.readUnsignedByte();
                    return 1 == this.__endian ? (b << 8) + a : a << 8 | b
                },
                readUTF: function () {
                    var a = this.readUnsignedShort();
                    return this.readUTFBytes(a)
                },
                readUTFBytes: function (a) {
                    if (this.position +
                        a > this.length) throw new Bh;
                    this.position += a;
                    return this.getString(this.position - a, a)
                },
                writeByte: function (a) {
                    this.__resize(this.position + 1);
                    this.b[this.position++] = a & 255
                },
                writeBytes: function (a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = 0);
                    0 != Pd.get_length(a) && (0 == c && (c = Pd.get_length(a) - b), this.__resize(this.position + c), this.blit(this.position, a, b, c), this.position += c)
                },
                writeInt: function (a) {
                    this.__resize(this.position + 4);
                    1 == this.__endian ? (this.b[this.position++] = a & 255, this.b[this.position++] = a >> 8 & 255, this.b[this.position++] =
                        a >> 16 & 255, this.b[this.position++] = a >> 24 & 255) : (this.b[this.position++] = a >> 24 & 255, this.b[this.position++] = a >> 16 & 255, this.b[this.position++] = a >> 8 & 255, this.b[this.position++] = a & 255)
                },
                writeShort: function (a) {
                    this.__resize(this.position + 2);
                    1 == this.__endian ? (this.b[this.position++] = a, this.b[this.position++] = a >> 8) : (this.b[this.position++] = a >> 8, this.b[this.position++] = a)
                },
                writeUnsignedInt: function (a) {
                    this.writeInt(a)
                },
                __fromBytes: function (a) {
                    this.b = a.b;
                    this.__allocated = a.length;
                    this.data = a.data;
                    this.length =
                        a.length
                },
                __resize: function (a) {
                    if (a > this.__allocated) {
                        var b = new Db(new ArrayBuffer(3 * (a + 1) >> 1));
                        if (0 < this.__allocated) {
                            var c = this.length;
                            this.length = this.__allocated;
                            b.blit(0, this, 0, this.__allocated);
                            this.length = c
                        }
                        this.b = b.b;
                        this.__allocated = b.length;
                        this.data = b.data
                    }
                    this.length < a && (this.length = a)
                },
                __class__: Xc
            });
            var Nd = {
                    __get: function (a, b) {
                        if (null == a || null == b) return null;
                        if (Object.prototype.hasOwnProperty.call(a, b)) return L.field(a, b);
                        if (a instanceof rb) {
                            var c = a.getChildByName(b);
                            if (null != c) return c
                        }
                        b =
                            L.getProperty(a, b);
                        L.isFunction(b) && (b = Function.prototype.bind.call(b, a));
                        return b
                    },
                    __eq: function (a, b) {
                        return a == b
                    }
                },
                qk = function () {
                };
            h["haxe.lang.Iterator"] = qk;
            qk.__name__ = "haxe.lang.Iterator";
            qk.__isInterface__ = !0;
            qk.prototype = {
                __class__: qk
            };
            var rk = function () {
            };
            h["haxe.lang.Iterable"] = rk;
            rk.__name__ = "haxe.lang.Iterable";
            rk.__isInterface__ = !0;
            rk.prototype = {
                __class__: rk
            };
            var Xi = function (a, b) {
                null == b && (b = 0);
                if (isNaN(a) || 0 > a) throw new $b("The delay specified is negative or not a finite number");
                oa.call(this);
                this.__delay = a;
                this.__repeatCount = b;
                this.running = !1;
                this.currentCount = 0
            };
            h["openfl.utils.Timer"] = Xi;
            Xi.__name__ = "openfl.utils.Timer";
            Xi.__super__ = oa;
            Xi.prototype = w(oa.prototype, {
                start: function () {
                    this.running || (this.running = !0, this.__timerID = window.setInterval(m(this, this.timer_onTimer), this.__delay | 0))
                },
                stop: function () {
                    this.running = !1;
                    null != this.__timerID && (window.clearInterval(this.__timerID), this.__timerID = null)
                },
                __handleUpdateAfterEvent: function () {
                    null != db.get_current() && null != db.get_current().stage &&
                    db.get_current().stage.__renderAfterEvent()
                },
                timer_onTimer: function () {
                    this.currentCount++;
                    if (0 < this.__repeatCount && this.currentCount >= this.__repeatCount) {
                        this.stop();
                        var a = new Rg("timer");
                        this.dispatchEvent(a);
                        a.__updateAfterEventFlag && this.__handleUpdateAfterEvent();
                        a = new Rg("timerComplete")
                    } else a = new Rg("timer");
                    this.dispatchEvent(a);
                    a.__updateAfterEventFlag && this.__handleUpdateAfterEvent()
                },
                __class__: Xi
            });
            var vc = function () {
            };
            h["openfl.utils._internal.Lib"] = vc;
            vc.__name__ = "openfl.utils._internal.Lib";
            vc.application = null;
            vc.current = null;
            var bg = function () {
                this.rollOutStack = []
            };
            h["openfl.utils._internal.TouchData"] = bg;
            bg.__name__ = "openfl.utils._internal.TouchData";
            bg.prototype = {
                reset: function () {
                    this.touchOverTarget = this.touchDownTarget = this.touch = null;
                    this.rollOutStack.splice(0, this.rollOutStack.length)
                },
                __class__: bg
            };
            B.$haxeUID |= 0;
            "undefined" != typeof performance && "function" == typeof performance.now && (M.now = performance.now.bind(performance));
            h.Math = Math;
            null == String.fromCodePoint && (String.fromCodePoint =
                function (a) {
                    return 65536 > a ? String.fromCharCode(a) : String.fromCharCode((a >> 10) + 55232) + String.fromCharCode((a & 1023) + 56320)
                });
            Object.defineProperty(String.prototype, "__class__", {
                value: h.String = String,
                enumerable: !1,
                writable: !0
            });
            String.__name__ = "String";
            h.Array = Array;
            Array.__name__ = "Array";
            Date.prototype.__class__ = h.Date = Date;
            Date.__name__ = "Date";
            var om = {},
                Am = {},
                Bm = Number,
                zm = Boolean,
                qm = {},
                rm = {};
            td.NIL = new td(null, null);
            Ua.__toStr = {}.toString;
            "undefined" == typeof window && (B.onmessage = function (a) {
                a = a.data;
                try {
                    B.onmessage = (H = Cd.__current, m(H, H.dispatchMessage)), Cm.toFunction(a)()
                } catch (b) {
                    Ha.lastError = b, Cd.__current.destroy()
                }
            });
            P.__alpha16 = new Uint32Array(256);
            for (var Tg = 0; 256 > Tg;) {
                var Eh = Tg++;
                P.__alpha16[Eh] = Math.ceil(257.00392156862745 * Eh)
            }
            P.__clamp = new Uint8Array(511);
            for (Tg = 0; 255 > Tg;) Eh = Tg++, P.__clamp[Eh] = Eh;
            for (Tg = 255; 511 > Tg;) Eh = Tg++, P.__clamp[Eh] = 255;
            Wa.level = 3;
            "undefined" == typeof console && (console = {});
            null == console.log && (console.log = function () {
            });
            var xm = [new Mj, new Nj, new Oj];
            Wf.__registeredLoaders =
                null == Wf.__registeredLoaders ? xm : xm.concat(Wf.__registeredLoaders);
            n.hitTestCanvas = mf.get_supported() ? window.document.createElement("canvas") : null;
            n.hitTestContext = mf.get_supported() ? n.hitTestCanvas.getContext("2d") : null;
            ea.__meta__ = {
                fields: {
                    __cairo: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    addEventListener: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    removeEventListener: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            ea.__broadcastEvents = new ab;
            ea.__instanceCount = 0;
            ea.__tempStack = new ob(function () {
                    return pa.toObjectVector(null)
                },
                function (a) {
                    a.set_length(0)
                });
            Oa.mobile = !1;
            ya.__fontByName = new ab;
            ya.__registeredFonts = [];
            x.Element = 0;
            x.PCData = 1;
            x.CData = 2;
            x.Comment = 3;
            x.DocType = 4;
            x.ProcessingInstruction = 5;
            x.Document = 6;
            bc.offset = 10;
            bc.delay = 4;
            bc.instance = null;
            ma.windows = [];
            ia.black = 0;
            ia.dark = 4473924;
            ia.medium = 8947848;
            ia.light = 13421772;
            ia.white = 16777215;
            ia.uiFont = "_sans";
            ia.uiFontMono = "_typewriter";
            ia.smallSize = 20;
            ia.normalSize = 24;
            qc.okCancel = ["OK", "Cancel"];
            Bc.maxFaceLength = 13;
            Sb.lastTab = 0;
            jd.hintText = "* Shift+click a tag to learn its effect.";
            zb.MAX_SIZE = 16777216;
            zb.MARGINS = 4;
            zb.embeddedScanned = !1;
            zb.embedded = function (a) {
                a = new ab;
                a.h.ui_font = {
                    name: "Share Tech",
                    url: "/css/Share_Tech_swap.css"
                };
                return a
            }(this);
            Pb.windowDensity = .75;
            Pb.avgRoomSize = 6;
            Pb.roomSizeChaos = 1;
            Pb.regularRooms = !0;
            Pb.preferCorners = !1;
            Pb.preferWalls = !1;
            Pb.noNooks = !1;
            Pb.connectivity = .5;
            F.__pool = new ob(function () {
                return new F
            }, function (a) {
                a.setTo(0, 0)
            });
            t.seed = 1;
            ca.rnd = t.float;
            va.__meta__ = {
                fields: {
                    equals: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            va.__identity = new va;
            va.__pool = new ob(function () {
                return new va
            }, function (a) {
                a.identity()
            });
            Lb.__pool = new ob(function () {
                return new Lb
            }, function (a) {
                a.__identity()
            });
            Z.salon = fi.proto();
            Z.bathroom = Th.proto();
            Z.bedroom = Uh.proto();
            Z.kitchen = $h.proto();
            Z.storage = ji.proto();
            Z.hall = Zh.proto();
            Z.gallery = mg.proto();
            Z.cellar = Vh.proto();
            Z.attic = Sh.proto();
            Z.study = gi.proto();
            Z.library = ai.proto();
            Z.workshop = Rl.proto();
            Z.passage = og.proto();
            Z.observatory = ci.proto();
            Z.laboratory = Ql.proto();
            Z.lookout = bi.proto();
            Z.greenhouse =
                Yh.proto();
            Z.studio = pg.proto();
            Z.vault = ii.proto();
            Z.chapel = Wh.proto();
            Z.trophy = hi.proto();
            Z.armoury = Pl.proto();
            Z.generic = ze.chamber();
            Z.empty = ze.empty();
            Z.corridor = ze.corridor();
            Z.stairhall = ze.stairhall();
            Z.stairwell = ze.stairwell();
            Z.special = [Z.study, Z.library, Z.workshop, Z.passage, Z.laboratory, Z.observatory, Z.greenhouse, Z.chapel, Z.studio, Z.trophy, Z.armoury, Z.lookout, Z.vault];
            Z.gothicSet = !1;
            fa.MAX_SIZE = 11;
            oc.SIZE = ["small", "medium", "large"];
            oc.HEIGHT = ["low", "tall"];
            oc.ALL = "small medium large square low tall slab mechanical organic hallways spiral basement stairwell blank transparent generic".split(" ");
            ub.planView = !0;
            bd.dark = !1;
            sd.curFloor = 0;
            Kf.MARGIN = 10;
            sc.lastCols = 2;
            sc.lastDPC = 100;
            sc.lastFloor = !0;
            sc.lastProps = !0;
            sc.lastAnnote = !0;
            Qe.COLLAPSED = "+ Layers";
            Qe.EXPANDED = "- Layers";
            Oe.nFloors = 0;
            qa.NORTH = new qa(-1, 0);
            qa.SOUTH = new qa(1, 0);
            qa.EAST = new qa(0, 1);
            qa.WEST = new qa(0, -1);
            qa.NE = new qa(-1, 1);
            qa.SE = new qa(1, 1);
            qa.NW = new qa(-1, -1);
            qa.SW = new qa(1, -1);
            qa.CARDINAL = [qa.NORTH, qa.EAST, qa.SOUTH, qa.WEST];
            qa.ORDINAL = [qa.NE, qa.SE, qa.SW, qa.NW];
            qa.ROSE = qa.CARDINAL.concat(qa.ORDINAL);
            $a.tetro0 = " x xxx";
            $a.tetro1 =
                "x  xxx";
            $a.tetro2 = "xx xx ";
            $a.tetro3 = "xx  xx";
            $a.tetro = [$a.tetro0, $a.tetro1, $a.tetro2, $a.tetro3];
            $a.pento0 = " xxxx  x ";
            $a.pento1 = "xx xx x  ";
            $a.pento2 = "xxx x  x ";
            $a.pento3 = "x xxxx";
            $a.pento4 = "x  x  xxx";
            $a.pento5 = "x  xx  xx";
            $a.pento6 = " x xxx x ";
            $a.pento7 = "xx  x  xx";
            $a.pento = [$a.pento0, $a.pento1, $a.pento2, $a.pento3, $a.pento4, $a.pento5, $a.pento6, $a.pento7];
            Jd.HEAD_SIZE = .1;
            Jd.HEAD_ANGLE = .4 * Math.PI;
            nd.OPEN_ANGLE = Math.PI / 3;
            nd.mode = "hidden";
            je.angle = F.polar(1, Math.PI / 4);
            Ae.useFading = !0;
            Be.stepSize =
                .1;
            mb.mode = "dots";
            mb.double = !1;
            mb.dashes = [.1, .1];
            mb.dots = [.03, .07];
            mb.solid = [1, 0];
            Kd.nStrokes = 5;
            Kd.clusterSize = .18;
            Kd.z = 1.2;
            Qc.isVisible = !0;
            Qc.showNumbers = !1;
            Sa.showArrows = !0;
            Sa.showProps = !0;
            Sa.showAO = !0;
            Sa.showLights = !0;
            Sa.exportFloor = !0;
            Sa.exportProps = !0;
            Sa.exportAnnote = !0;
            Ea.TILEW = .08;
            Ea.TILEL = .24;
            Ea.FACE_L = 1.2;
            Ea.TOWER_L = 1.3;
            Ea.LIGHTDIR = -.8333333333333334 * Math.PI;
            Ea.displayed = !0;
            Ea.detailed = !0;
            Ea.shading = !0;
            Ea.fading = !0;
            Ea.shrinking = !0;
            Ea.patterns = [];
            J.colorPaper = 14869216;
            J.colorInk = 3158840;
            J.colorFloor =
                15790320;
            J.colorWall = 3158840;
            J.colorProps = 15790320;
            J.colorWindow = 15790320;
            J.colorStairs = 15790320;
            J.colorRoof = 15790320;
            J.colorLabels = 3357542;
            J.strNormal10 = .3;
            J.strGrid10 = .2;
            J.alphaGrid = .5;
            J.alphaAO = .3;
            J.alphaLight = 0;
            J.fontRoom = {
                face: null,
                embedded: "ui_font",
                size: 28,
                bold: !1,
                italic: !1
            };
            J.hatching = !1;
            J.strokeNormal = .03;
            J.strokeGrid = .02;
            J.colorBlack = 0;
            J.colorChimney = J.colorWall;
            Ka._p0 = new F(-819.2, 0);
            Ka._p1 = new F(819.2, 0);
            Qb.lx = 0;
            Qb.ly = 0;
            Da.JOINTS = function (a) {
                a = new Ec;
                a.h[2] = "round";
                a.h[1] = "miter";
                a.h[0] =
                    "bevel";
                return a
            }(this);
            Da.CAPS = function (a) {
                a = new Ec;
                a.h[1] = "round";
                a.h[2] = "square";
                a.h[0] = "butt";
                return a
            }(this);
            Da.BLEND_MODES = function (a) {
                a = new Ec;
                a.h[10] = "normal";
                a.h[9] = "multiply";
                a.h[0] = "plus-lighter";
                return a
            }(this);
            Da.gradients = [];
            Da.imports = [];
            Da.handleObject = null;
            Da.substituteFont = Da.substituteGenerics;
            Ce.rnd = ca.rnd;
            Va.baseURL = FuncProto.paramsUrlString(params.routes.homepage);
            hf.gold = 2 / (3 + Math.sqrt(5));
            A.fortified = !1;
            A.columnWidth = 40;
            A.floorHeight = 60;
            A.roofSlope = 1.5;
            A.apronHeight = 12;
            A.baseHeight = 10;
            A.baseThickness =
                2;
            I.colorInk = 3355448;
            I.colorBg = 16053490;
            I.colorWall = I.colorBg;
            I.colorRoof = I.colorBg;
            I.colorBase = I.colorWall;
            I.colorStairs = I.colorBase;
            I.colorDoor = I.colorBg;
            I.colorWindow = I.colorBg;
            I.colorFrame = I.colorWall;
            I.colorGrass = I.colorInk;
            I.colorLamp = I.colorWall;
            I.colorSign1 = I.colorBg;
            I.colorSign2 = I.colorInk;
            I.strokeNormal = 1.5;
            I.strokeFine = .8;
            I.mode = Pe.LINEWORK;
            ke.maxRatio = 2.5;
            Ic.f = Ic.decay;
            Ic.color = 0;
            Ic.th0 = 1;
            Ic.th1 = 0;
            vg.STEP_DEPTH = 5;
            Pf.STEP_HEIGHT = 3.5;
            Mf.H = 4;
            Ra.plurals = function (a) {
                a = new ab;
                a.h.child = "children";
                a.h.fish = "fish";
                return a
            }(this);
            Me.rng = Math.random;
            Nh.values = function (a) {
                a = new ab;
                a.h.aliceblue = 15792383;
                a.h.antiquewhite = 16444375;
                a.h.aqua = 65535;
                a.h.aquamarine = 8388564;
                a.h.azure = 15794175;
                a.h.beige = 16119260;
                a.h.bisque = 16770244;
                a.h.black = 0;
                a.h.blanchedalmond = 16772045;
                a.h.blue = 255;
                a.h.blueviolet = 9055202;
                a.h.brown = 10824234;
                a.h.burlywood = 14596231;
                a.h.cadetblue = 6266528;
                a.h.chartreuse = 8388352;
                a.h.chocolate = 13789470;
                a.h.coral = 16744272;
                a.h.cornflowerblue = 6591981;
                a.h.cornsilk = 16775388;
                a.h.crimson = 14423100;
                a.h.cyan = 65535;
                a.h.darkblue = 139;
                a.h.darkcyan = 35723;
                a.h.darkgoldenrod = 12092939;
                a.h.darkgreen = 25600;
                a.h.darkgrey = 11119017;
                a.h.darkkhaki = 12433259;
                a.h.darkmagenta = 9109643;
                a.h.darkolivegreen = 5597999;
                a.h.darkorange = 16747520;
                a.h.darkorchid = 10040012;
                a.h.darkred = 9109504;
                a.h.darksalmon = 15308410;
                a.h.darkseagreen = 9419919;
                a.h.darkslateblue = 4734347;
                a.h.darkslategrey = 3100495;
                a.h.darkturquoise = 52945;
                a.h.darkviolet = 9699539;
                a.h.deeppink = 16716947;
                a.h.deepskyblue = 49151;
                a.h.dimgrey = 6908265;
                a.h.dodgerblue = 2003199;
                a.h.firebrick =
                    11674146;
                a.h.floralwhite = 16775920;
                a.h.forestgreen = 2263842;
                a.h.fuchsia = 16711935;
                a.h.gainsboro = 14474460;
                a.h.ghostwhite = 16316671;
                a.h.goldenrod = 14329120;
                a.h.gold = 16766720;
                a.h.green = 32768;
                a.h.greenyellow = 11403055;
                a.h.grey = 8421504;
                a.h.honeydew = 15794160;
                a.h.hotpink = 16738740;
                a.h.indianred = 13458524;
                a.h.indigo = 4915330;
                a.h.ivory = 16777200;
                a.h.khaki = 15787660;
                a.h.lavenderblush = 16773365;
                a.h.lavender = 15132410;
                a.h.lawngreen = 8190976;
                a.h.lemonchiffon = 16775885;
                a.h.lightblue = 11393254;
                a.h.lightcoral = 15761536;
                a.h.lightcyan =
                    14745599;
                a.h.lightgoldenrodyellow = 16448210;
                a.h.lightgreen = 9498256;
                a.h.lightgrey = 13882323;
                a.h.lightpink = 16758465;
                a.h.lightsalmon = 16752762;
                a.h.lightseagreen = 2142890;
                a.h.lightskyblue = 8900346;
                a.h.lightslategrey = 7833753;
                a.h.lightsteelblue = 11584734;
                a.h.lightyellow = 16777184;
                a.h.lime = 65280;
                a.h.limegreen = 3329330;
                a.h.linen = 16445670;
                a.h.magenta = 16711935;
                a.h.maroon = 8388608;
                a.h.mediumaquamarine = 6737322;
                a.h.mediumblue = 205;
                a.h.mediumorchid = 12211667;
                a.h.mediumpurple = 9662683;
                a.h.mediumseagreen = 3978097;
                a.h.mediumslateblue =
                    8087790;
                a.h.mediumspringgreen = 64154;
                a.h.mediumturquoise = 4772300;
                a.h.mediumvioletred = 13047173;
                a.h.midnightblue = 1644912;
                a.h.mintcream = 16121850;
                a.h.mistyrose = 16770273;
                a.h.moccasin = 16770229;
                a.h.navajowhite = 16768685;
                a.h.navy = 128;
                a.h.oldlace = 16643558;
                a.h.olive = 8421376;
                a.h.olivedrab = 7048739;
                a.h.orange = 16753920;
                a.h.orangered = 16729344;
                a.h.orchid = 14315734;
                a.h.palegoldenrod = 15657130;
                a.h.palegreen = 10025880;
                a.h.paleturquoise = 11529966;
                a.h.palevioletred = 14381203;
                a.h.papayawhip = 16773077;
                a.h.peachpuff = 16767673;
                a.h.peru =
                    13468991;
                a.h.pink = 16761035;
                a.h.plum = 14524637;
                a.h.powderblue = 11591910;
                a.h.purple = 8388736;
                a.h.rebeccapurple = 6697881;
                a.h.red = 16711680;
                a.h.rosybrown = 12357519;
                a.h.royalblue = 4286945;
                a.h.saddlebrown = 9127187;
                a.h.salmon = 16416882;
                a.h.sandybrown = 16032864;
                a.h.seagreen = 3050327;
                a.h.seashell = 16774638;
                a.h.sienna = 10506797;
                a.h.silver = 12632256;
                a.h.skyblue = 8900331;
                a.h.slateblue = 6970061;
                a.h.slategrey = 7372944;
                a.h.snow = 16775930;
                a.h.springgreen = 65407;
                a.h.steelblue = 4620980;
                a.h.tan = 13808780;
                a.h.teal = 32896;
                a.h.thistle = 14204888;
                a.h.tomato = 16737095;
                a.h.turquoise = 4251856;
                a.h.violet = 15631086;
                a.h.wheat = 16113331;
                a.h.white = 16777215;
                a.h.whitesmoke = 16119285;
                a.h.yellow = 16776960;
                a.h.yellowgreen = 10145074;
                return a
            }(this);
            Mb._tick = new gc;
            Mb.source = null;
            Mb.lastTime = 0;
            Mb.timeScale = 1;
            ud.USE_CACHE = !1;
            ud.USE_ENUM_INDEX = !1;
            ud.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
            ud.BASE64_CODES = null;
            pd.DEFAULT_RESOLVER = new Yi;
            pd.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
            pd.CODES = null;
            bf.escapes =
                function (a) {
                    a = new ab;
                    a.h.lt = "<";
                    a.h.gt = ">";
                    a.h.amp = "&";
                    a.h.quot = '"';
                    a.h.apos = "'";
                    return a
                }(this);
            dd.LEN_EXTRA_BITS_TBL = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, -1, -1];
            dd.LEN_BASE_VAL_TBL = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258];
            dd.DIST_EXTRA_BITS_TBL = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, -1, -1];
            dd.DIST_BASE_VAL_TBL = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,
                8193, 12289, 16385, 24577
            ];
            dd.CODE_LENGTHS_POS = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
            dd.FIXED_HUFFMAN = null;
            lh.undefined = new lh;
            $k.undefined = lh.undefined;
            Jf.replacements = function (a) {
                a = new Ec;
                a.h[39] = "\\'";
                a.h[34] = '\\"';
                a.h[92] = "\\\\";
                a.h[8] = "\\b";
                a.h[12] = "\\f";
                a.h[10] = "\\n";
                a.h[13] = "\\r";
                a.h[9] = "\\t";
                a.h[11] = "\\v";
                a.h[0] = "\\0";
                a.h[8232] = "\\u2028";
                a.h[8233] = "\\u2029";
                return a
            }(this);
            Ca.activeRequests = 0;
            Ca.requestLimit = 17;
            Ca.requestQueue = new jb;
            Cd.__current = new Cd(B.location.href);
            Cd.__isWorker =
                "undefined" == typeof window;
            Cd.__messages = new jb;
            Cd.__resolveMethods = new jb;
            La.dummyCharacter = "\u007f";
            La.windowID = 0;
            De.DICTIONARY = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");
            De.EXTENDED_DICTIONARY = function (a) {
                a = [];
                for (var b = 0, c = De.DICTIONARY; b < c.length;) {
                    var d = c[b];
                    ++b;
                    for (var g = 0, f = De.DICTIONARY; g < f.length;) {
                        var k = f[g];
                        ++g;
                        a.push(d + k)
                    }
                }
                return a
            }(this);
            Dd.MUL_TABLE = [1, 171, 205, 293, 57, 373, 79, 137, 241, 27, 391, 357, 41, 19, 283, 265, 497, 469, 443, 421, 25, 191, 365, 349, 335, 161, 155,
                149, 9, 278, 269, 261, 505, 245, 475, 231, 449, 437, 213, 415, 405, 395, 193, 377, 369, 361, 353, 345, 169, 331, 325, 319, 313, 307, 301, 37, 145, 285, 281, 69, 271, 267, 263, 259, 509, 501, 493, 243, 479, 118, 465, 459, 113, 446, 55, 435, 429, 423, 209, 413, 51, 403, 199, 393, 97, 3, 379, 375, 371, 367, 363, 359, 355, 351, 347, 43, 85, 337, 333, 165, 327, 323, 5, 317, 157, 311, 77, 305, 303, 75, 297, 294, 73, 289, 287, 71, 141, 279, 277, 275, 68, 135, 67, 133, 33, 262, 260, 129, 511, 507, 503, 499, 495, 491, 61, 121, 481, 477, 237, 235, 467, 232, 115, 457, 227, 451, 7, 445, 221, 439, 218, 433, 215, 427, 425, 211, 419, 417,
                207, 411, 409, 203, 202, 401, 399, 396, 197, 49, 389, 387, 385, 383, 95, 189, 47, 187, 93, 185, 23, 183, 91, 181, 45, 179, 89, 177, 11, 175, 87, 173, 345, 343, 341, 339, 337, 21, 167, 83, 331, 329, 327, 163, 81, 323, 321, 319, 159, 79, 315, 313, 39, 155, 309, 307, 153, 305, 303, 151, 75, 299, 149, 37, 295, 147, 73, 291, 145, 289, 287, 143, 285, 71, 141, 281, 35, 279, 139, 69, 275, 137, 273, 17, 271, 135, 269, 267, 133, 265, 33, 263, 131, 261, 130, 259, 129, 257, 1
            ];
            Dd.SHG_TABLE = [0, 9, 10, 11, 9, 12, 10, 11, 12, 9, 13, 13, 10, 9, 13, 13, 14, 14, 14, 14, 10, 13, 14, 14, 14, 13, 13, 13, 9, 14, 14, 14, 15, 14, 15, 14, 15, 15, 14, 15, 15,
                15, 14, 15, 15, 15, 15, 15, 14, 15, 15, 15, 15, 15, 15, 12, 14, 15, 15, 13, 15, 15, 15, 15, 16, 16, 16, 15, 16, 14, 16, 16, 14, 16, 13, 16, 16, 16, 15, 16, 13, 16, 15, 16, 14, 9, 16, 16, 16, 16, 16, 16, 16, 16, 16, 13, 14, 16, 16, 15, 16, 16, 10, 16, 15, 16, 14, 16, 16, 14, 16, 16, 14, 16, 16, 14, 15, 16, 16, 16, 14, 15, 14, 15, 13, 16, 16, 15, 17, 17, 17, 17, 17, 17, 14, 15, 17, 17, 16, 16, 17, 16, 15, 17, 16, 17, 11, 17, 16, 17, 16, 17, 16, 17, 17, 16, 17, 17, 16, 17, 17, 16, 16, 17, 17, 17, 16, 14, 17, 17, 17, 17, 15, 16, 14, 16, 15, 16, 13, 16, 15, 16, 14, 16, 15, 16, 12, 16, 15, 16, 17, 17, 17, 17, 17, 13, 16, 15, 17, 17, 17, 16, 15, 17, 17, 17, 16, 15, 17,
                17, 14, 16, 17, 17, 16, 17, 17, 16, 15, 17, 16, 14, 17, 16, 15, 17, 16, 17, 17, 16, 17, 15, 16, 17, 14, 17, 16, 15, 17, 16, 17, 13, 17, 16, 17, 17, 16, 17, 14, 17, 16, 17, 16, 17, 16, 17, 9
            ];
            nb.__identity = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
            kc.onUpdate = new Nc;
            kc.__updated = !1;
            Ie.sensorByID = new Ec;
            Ie.sensors = [];
            xc.devices = new Ec;
            xc.onConnect = new ol;
            uc.devices = new Ec;
            uc.onConnect = new pl;
            Hb.onCancel = new Eg;
            Hb.onEnd = new Eg;
            Hb.onMove = new Eg;
            Hb.onStart = new Eg;
            Pa.cache = new ul;
            Pa.onChange = new Nc;
            Pa.bundlePaths = new ab;
            Pa.libraries = new ab;
            Pa.libraryPaths =
                new ab;
            Wa.throwErrors = !0;
            db.__lastTimerID = 0;
            db.__timers = new Ec;
            Te.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            rj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    toJSON: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Je.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    toJSON: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            sj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    toJSON: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Xg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    toJSON: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            gg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    toJSON: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Ug.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            sa.__pool = new ob(function () {
                return new sa
            }, function (a) {
                a.setTo(0, 0, 0, 0)
            });
            Ob.__meta__ = {
                fields: {
                    image: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __framebufferContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __indexBufferContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __surface: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __textureContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __vertexBufferContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __fromImage: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Ob.__tempVector = new lg;
            Ob.__fillRectRectangle = new sa;
            wd.__meta__ = {
                fields: {
                    __context: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __type: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            uj.__meta__ = {
                fields: {
                    cairo: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __matrix3: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    applyMatrix: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __setBlendModeCairo: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Ue.__meta__ = {
                fields: {
                    context: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    applySmoothing: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    setTransform: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __setBlendModeContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            yj.__meta__ = {
                fields: {
                    __element: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            rh.__meta__ = {
                fields: {
                    element: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Ed.__meta__ = {
                fields: {
                    glProgram: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            qd.maxTextureHeight = null;
            qd.maxTextureWidth = null;
            se.__meta__ = {
                statics: {
                    create: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                },
                fields: {
                    parameters: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            se.__rootURL = mf.get_supported() ? window.document.URL : "";
            Ma.__meta__ = {
                fields: {
                    gl: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __gl: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __matrix: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __projection: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __projectionFlipped: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Ma.__alphaValue = [1];
            Ma.__colorMultipliersValue = [0, 0, 0, 0];
            Ma.__colorOffsetsValue = [0, 0, 0, 0];
            Ma.__emptyColorValue = [0, 0, 0, 0];
            Ma.__hasColorTransformValue = [!1];
            Ma.__scissorRectangle =
                new sa;
            Ma.__textureSizeValue = [0, 0];
            Fh.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    onComplete: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Vg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Bj.__meta__ = {
                fields: {
                    index: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    name: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            Ig.__meta__ = {
                fields: {
                    index: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    name: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            Kg.__meta__ = {
                fields: {
                    __broadcastEvent: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __dispatchEvent: {
                        SuppressWarnings: [
                            ["checkstyle:Dynamic", "checkstyle:LeftCurly"]
                        ]
                    },
                    __dispatchStack: {
                        SuppressWarnings: [
                            ["checkstyle:Dynamic", "checkstyle:LeftCurly"]
                        ]
                    },
                    __dispatchTarget: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __handleError: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Xj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            ph.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            qh.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Uf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            yd.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    o: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            yd.empty = new yd;
            n.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                statics: {
                    windingRule: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    createBitmapFill: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    createGradientPattern: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            n.fillCommands = new yd;
            n.strokeCommands = new yd;
            W.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Ve.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                statics: {
                    renderTileContainer: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Vf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Sd.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            wh.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Yf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Y.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Y.blankBitmapData = new Ob(1, 1, !1, 0);
            Y.tempColorTransform = new Lb(1, 1, 1, 1, 0, 0, 0, 0);
            Y.tempVerticesVector = pa.toFloatVector(null);
            Y.tempIndicesVector = pa.toIntVector(null);
            Y.tempUvtVector = pa.toFloatVector(null);
            Xf.opaqueBitmapData = new Ob(1, 1, !1, 0);
            Ge.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Xe.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            S.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Td.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Td.__textureSizeValue = [0, 0];
            Qa.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            xd.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            uf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            qf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            rf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            We.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            te.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            cg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Dj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    overrideIntValues: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Ab.__glDepthStencil = -1;
            Ab.__glMaxTextureMaxAnisotropy = -1;
            Ab.__glMaxViewportDims = -1;
            Ab.__glMemoryCurrentAvailable = -1;
            Ab.__glMemoryTotalAvailable = -1;
            Ab.__glTextureMaxAnisotropy = -1;
            ck.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Ah.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            ld.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            ld.limitedProfile = !0;
            Lg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            dk.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Mg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            dg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            yh.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Eb.__meta__ = {
                fields: {
                    __textureContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __getGLFramebuffer: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Eb.__supportsBGRA = null;
            Wg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            yf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            yf.supportsWeakReference = Object.prototype.hasOwnProperty.call(B, "WeakRef");
            kd.__invertAlphaShader = new mk;
            kd.__blurAlphaShader = new hk;
            kd.__combineShader = new jk;
            kd.__innerCombineShader = new lk;
            kd.__combineKnockoutShader = new ik;
            kd.__innerCombineKnockoutShader = new kk;
            Hg.__meta__ = {
                fields: {
                    blendMode: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            eg.__meta__ = {
                fields: {
                    clone: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            ue.__soundChannels = [];
            ue.__soundTransform = new eg;
            cd.defaultObjectEncoding = 10;
            Ze.followRedirects = !0;
            Ze.idleTimeout = 0;
            Ze.manageCookies = !0;
            Jg.currentDomain = new Jg(null);
            Le.__meta__ = {
                fields: {
                    clone: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            Dh.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Na.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Na.__regexAlign = new Ya("align\\s?=\\s?(\"([^\"]+)\"|'([^']+)')",
                "i");
            Na.__regexBreakTag = new Ya("<br\\s*/?>", "gi");
            Na.__regexBlockIndent = new Ya("blockindent\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            Na.__regexClass = new Ya("class\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            Na.__regexColor = new Ya("color\\s?=\\s?(\"#([^\"]+)\"|'#([^']+)')", "i");
            Na.__regexEntityApos = new Ya("&apos;", "g");
            Na.__regexEntityNbsp = new Ya("&nbsp;", "g");
            Na.__regexCharEntity = new Ya("&#(?:([0-9]+)|(x[0-9a-fA-F]+));", "g");
            Na.__regexFace = new Ya("face\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            Na.__regexHTMLTag =
                new Ya("<.*?>", "g");
            Na.__regexHref = new Ya("href\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            Na.__regexIndent = new Ya(" indent\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            Na.__regexLeading = new Ya("leading\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            Na.__regexLeftMargin = new Ya("leftmargin\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            Na.__regexRightMargin = new Ya("rightmargin\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            Na.__regexSize = new Ya("size\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
            Na.__regexTabStops = new Ya("tabstops\\s?=\\s?(\"([^\"]+)\"|'([^']+)')",
                "i");
            Sg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Bb.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            nk.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            eb.__meta__ = {
                fields: {
                    addEventListener: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            eb.numDevices = 0;
            eb.__deviceList = [];
            eb.__instances = [];
            eb.__devices = new Ba;
            Vj.__cursor = "auto";
            ra.__meta__ = {
                obj: {
                    SuppressWarnings: [
                        ["checkstyle:ConstantName", "checkstyle:FieldDocComment"]
                    ]
                }
            };
            ra.OPMAP = new ab;
            ra.REGMAP =
                new ab;
            ra.SAMPLEMAP = new ab;
            ra.initialized = !1;
            Cb.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Ld.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            ic.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Yb.cache = new pk;
            Xc.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Xc.defaultObjectEncoding = 10;
            Xc.__defaultEndian = null;
            Nd.__meta__ = {
                statics: {
                    __get: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            qk.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            rk.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            vc.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            bg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    touch: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            bg.__pool = new ob(function () {
                return new bg
            }, function (a) {
                a.reset()
            });
            la.main()
        })("undefined" != typeof v ? v : "undefined" != typeof window ? window : "undefined" != typeof self ? self : this, "undefined" != typeof window ? window : "undefined" != typeof B ? B : "undefined" !=
        typeof self ? self : this)
    };
    "undefined" !== typeof self && self.constructor.name.includes("Worker") ? B({}, v) : LimeShared.registerLimeProject(K, v, "Dwellings", B);
    LimeShared.registerAmdLime(K);
};
if (params !== null){
    console.debug(params);
    $lime_init("undefined" !== typeof exports ? exports : "function" === typeof define && define.amd ? {} : "undefined" !== typeof window ? window : "undefined" !== typeof self ? self : this, "undefined" !== typeof window ? window : "undefined" !== typeof global ? global : "undefined" !== typeof self ? self : this);
}