name: "Generate build env"
description: "Read package name and version and retain"

runs:
  using: "composite"
  steps:
    - name: "ğŸ“¥ Read version from package.json"
      id: ver
      shell: bash
      run: |
        set -Eeuo pipefail
        nameBuild=$(node -e "const fs=require('fs');const p=JSON.parse(fs.readFileSync('package.json','utf8'));process.stdout.write(p.name)")
        versionBuild=$(node -e "const fs=require('fs');const p=JSON.parse(fs.readFileSync('package.json','utf8'));process.stdout.write(p.version)")

        echo "BUILD_NAME=$nameBuild" > build_env.txt
        echo "BUILD_VER=$versionBuild" >> build_env.txt

        echo "name=$nameBuild" >> $GITHUB_OUTPUT
        echo "version=$versionBuild" >> $GITHUB_OUTPUT

        echo "âœ”ï¸ Found version: $versionBuild (Package Name: $nameBuild)"
